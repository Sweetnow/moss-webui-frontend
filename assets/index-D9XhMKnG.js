var une=Object.defineProperty;var dne=(t,e,n)=>e in t?une(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fne=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ds=(t,e,n)=>(dne(t,typeof e!="symbol"?e+"":e,n),n);var NUe=fne((eVe,JS)=>{function RB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var hne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ep(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J8={exports:{}},CC={},Q8={exports:{}},Wr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb=Symbol.for("react.element"),pne=Symbol.for("react.portal"),mne=Symbol.for("react.fragment"),gne=Symbol.for("react.strict_mode"),vne=Symbol.for("react.profiler"),yne=Symbol.for("react.provider"),_ne=Symbol.for("react.context"),bne=Symbol.for("react.forward_ref"),xne=Symbol.for("react.suspense"),wne=Symbol.for("react.memo"),Sne=Symbol.for("react.lazy"),r4=Symbol.iterator;function Ene(t){return t===null||typeof t!="object"?null:(t=r4&&t[r4]||t["@@iterator"],typeof t=="function"?t:null)}var eG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tG=Object.assign,nG={};function yv(t,e,n){this.props=t,this.context=e,this.refs=nG,this.updater=n||eG}yv.prototype.isReactComponent={};yv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rG(){}rG.prototype=yv.prototype;function OB(t,e,n){this.props=t,this.context=e,this.refs=nG,this.updater=n||eG}var LB=OB.prototype=new rG;LB.constructor=OB;tG(LB,yv.prototype);LB.isPureReactComponent=!0;var i4=Array.isArray,iG=Object.prototype.hasOwnProperty,BB={current:null},oG={key:!0,ref:!0,__self:!0,__source:!0};function sG(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)iG.call(e,r)&&!oG.hasOwnProperty(r)&&(i[r]=e[r]);var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){for(var s=Array(f),p=0;p<f;p++)s[p]=arguments[p+2];i.children=s}if(t&&t.defaultProps)for(r in f=t.defaultProps,f)i[r]===void 0&&(i[r]=f[r]);return{$$typeof:Bb,type:t,key:o,ref:l,props:i,_owner:BB.current}}function Cne(t,e){return{$$typeof:Bb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function DB(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bb}function Tne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var o4=/\/+/g;function GM(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tne(""+t.key):e.toString(36)}function eS(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Bb:case pne:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+GM(l,0):r,i4(i)?(n="",t!=null&&(n=t.replace(o4,"$&/")+"/"),eS(i,e,n,"",function(p){return p})):i!=null&&(DB(i)&&(i=Cne(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(o4,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",i4(t))for(var f=0;f<t.length;f++){o=t[f];var s=r+GM(o,f);l+=eS(o,e,n,s,i)}else if(s=Ene(t),typeof s=="function")for(t=s.call(t),f=0;!(o=t.next()).done;)o=o.value,s=r+GM(o,f++),l+=eS(o,e,n,s,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function $1(t,e,n){if(t==null)return t;var r=[],i=0;return eS(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Ane(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ks={current:null},tS={transition:null},Mne={ReactCurrentDispatcher:Ks,ReactCurrentBatchConfig:tS,ReactCurrentOwner:BB};function aG(){throw Error("act(...) is not supported in production builds of React.")}Wr.Children={map:$1,forEach:function(t,e,n){$1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $1(t,function(){e++}),e},toArray:function(t){return $1(t,function(e){return e})||[]},only:function(t){if(!DB(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wr.Component=yv;Wr.Fragment=mne;Wr.Profiler=vne;Wr.PureComponent=OB;Wr.StrictMode=gne;Wr.Suspense=xne;Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mne;Wr.act=aG;Wr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tG({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=BB.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(s in e)iG.call(e,s)&&!oG.hasOwnProperty(s)&&(r[s]=e[s]===void 0&&f!==void 0?f[s]:e[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){f=Array(s);for(var p=0;p<s;p++)f[p]=arguments[p+2];r.children=f}return{$$typeof:Bb,type:t.type,key:i,ref:o,props:r,_owner:l}};Wr.createContext=function(t){return t={$$typeof:_ne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yne,_context:t},t.Consumer=t};Wr.createElement=sG;Wr.createFactory=function(t){var e=sG.bind(null,t);return e.type=t,e};Wr.createRef=function(){return{current:null}};Wr.forwardRef=function(t){return{$$typeof:bne,render:t}};Wr.isValidElement=DB;Wr.lazy=function(t){return{$$typeof:Sne,_payload:{_status:-1,_result:t},_init:Ane}};Wr.memo=function(t,e){return{$$typeof:wne,type:t,compare:e===void 0?null:e}};Wr.startTransition=function(t){var e=tS.transition;tS.transition={};try{t()}finally{tS.transition=e}};Wr.unstable_act=aG;Wr.useCallback=function(t,e){return Ks.current.useCallback(t,e)};Wr.useContext=function(t){return Ks.current.useContext(t)};Wr.useDebugValue=function(){};Wr.useDeferredValue=function(t){return Ks.current.useDeferredValue(t)};Wr.useEffect=function(t,e){return Ks.current.useEffect(t,e)};Wr.useId=function(){return Ks.current.useId()};Wr.useImperativeHandle=function(t,e,n){return Ks.current.useImperativeHandle(t,e,n)};Wr.useInsertionEffect=function(t,e){return Ks.current.useInsertionEffect(t,e)};Wr.useLayoutEffect=function(t,e){return Ks.current.useLayoutEffect(t,e)};Wr.useMemo=function(t,e){return Ks.current.useMemo(t,e)};Wr.useReducer=function(t,e,n){return Ks.current.useReducer(t,e,n)};Wr.useRef=function(t){return Ks.current.useRef(t)};Wr.useState=function(t){return Ks.current.useState(t)};Wr.useSyncExternalStore=function(t,e,n){return Ks.current.useSyncExternalStore(t,e,n)};Wr.useTransition=function(){return Ks.current.useTransition()};Wr.version="18.3.1";Q8.exports=Wr;var E=Q8.exports;const Tt=Ep(E),Db=RB({__proto__:null,default:Tt},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pne=E,Ine=Symbol.for("react.element"),Rne=Symbol.for("react.fragment"),One=Object.prototype.hasOwnProperty,Lne=Pne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bne={key:!0,ref:!0,__self:!0,__source:!0};function lG(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)One.call(e,r)&&!Bne.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ine,type:t,key:o,ref:l,props:i,_owner:Lne.current}}CC.Fragment=Rne;CC.jsx=lG;CC.jsxs=lG;J8.exports=CC;var an=J8.exports,bR={},cG={exports:{}},Za={},uG={exports:{}},dG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(fe,xe){var Re=fe.length;fe.push(xe);e:for(;0<Re;){var ke=Re-1>>>1,ze=fe[ke];if(0<i(ze,xe))fe[ke]=xe,fe[Re]=ze,Re=ke;else break e}}function n(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var xe=fe[0],Re=fe.pop();if(Re!==xe){fe[0]=Re;e:for(var ke=0,ze=fe.length,Xe=ze>>>1;ke<Xe;){var Ne=2*(ke+1)-1,Qe=fe[Ne],pt=Ne+1,Ke=fe[pt];if(0>i(Qe,Re))pt<ze&&0>i(Ke,Qe)?(fe[ke]=Ke,fe[pt]=Re,ke=pt):(fe[ke]=Qe,fe[Ne]=Re,ke=Ne);else if(pt<ze&&0>i(Ke,Re))fe[ke]=Ke,fe[pt]=Re,ke=pt;else break e}}return xe}function i(fe,xe){var Re=fe.sortIndex-xe.sortIndex;return Re!==0?Re:fe.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,f=l.now();t.unstable_now=function(){return l.now()-f}}var s=[],p=[],v=1,x=null,S=3,M=!1,P=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(fe){for(var xe=n(p);xe!==null;){if(xe.callback===null)r(p);else if(xe.startTime<=fe)r(p),xe.sortIndex=xe.expirationTime,e(s,xe);else break;xe=n(p)}}function $(fe){if(R=!1,k(fe),!P)if(n(s)!==null)P=!0,Ae(H);else{var xe=n(p);xe!==null&&pe($,xe.startTime-fe)}}function H(fe,xe){P=!1,R&&(R=!1,B(J),J=-1),M=!0;var Re=S;try{for(k(xe),x=n(s);x!==null&&(!(x.expirationTime>xe)||fe&&!ce());){var ke=x.callback;if(typeof ke=="function"){x.callback=null,S=x.priorityLevel;var ze=ke(x.expirationTime<=xe);xe=t.unstable_now(),typeof ze=="function"?x.callback=ze:x===n(s)&&r(s),k(xe)}else r(s);x=n(s)}if(x!==null)var Xe=!0;else{var Ne=n(p);Ne!==null&&pe($,Ne.startTime-xe),Xe=!1}return Xe}finally{x=null,S=Re,M=!1}}var U=!1,X=null,J=-1,K=5,Q=-1;function ce(){return!(t.unstable_now()-Q<K)}function ge(){if(X!==null){var fe=t.unstable_now();Q=fe;var xe=!0;try{xe=X(!0,fe)}finally{xe?ae():(U=!1,X=null)}}else U=!1}var ae;if(typeof O=="function")ae=function(){O(ge)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Fe=ve.port2;ve.port1.onmessage=ge,ae=function(){Fe.postMessage(null)}}else ae=function(){D(ge,0)};function Ae(fe){X=fe,U||(U=!0,ae())}function pe(fe,xe){J=D(function(){fe(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(fe){fe.callback=null},t.unstable_continueExecution=function(){P||M||(P=!0,Ae(H))},t.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<fe?Math.floor(1e3/fe):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(fe){switch(S){case 1:case 2:case 3:var xe=3;break;default:xe=S}var Re=S;S=xe;try{return fe()}finally{S=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(fe,xe){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Re=S;S=fe;try{return xe()}finally{S=Re}},t.unstable_scheduleCallback=function(fe,xe,Re){var ke=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?ke+Re:ke):Re=ke,fe){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Re+ze,fe={id:v++,callback:xe,priorityLevel:fe,startTime:Re,expirationTime:ze,sortIndex:-1},Re>ke?(fe.sortIndex=Re,e(p,fe),n(s)===null&&fe===n(p)&&(R?(B(J),J=-1):R=!0,pe($,Re-ke))):(fe.sortIndex=ze,e(s,fe),P||M||(P=!0,Ae(H))),fe},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(fe){var xe=S;return function(){var Re=S;S=xe;try{return fe.apply(this,arguments)}finally{S=Re}}}})(dG);uG.exports=dG;var Dne=uG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kne=E,Ya=Dne;function un(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fG=new Set,P_={};function Cp(t,e){Wg(t,e),Wg(t+"Capture",e)}function Wg(t,e){for(P_[t]=e,t=0;t<e.length;t++)fG.add(e[t])}var Qu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xR=Object.prototype.hasOwnProperty,Fne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s4={},a4={};function zne(t){return xR.call(a4,t)?!0:xR.call(s4,t)?!1:Fne.test(t)?a4[t]=!0:(s4[t]=!0,!1)}function Nne(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $ne(t,e,n,r){if(e===null||typeof e>"u"||Nne(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Js(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bs[t]=new Js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bs[e]=new Js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bs[t]=new Js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bs[t]=new Js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bs[t]=new Js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bs[t]=new Js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bs[t]=new Js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bs[t]=new Js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bs[t]=new Js(t,5,!1,t.toLowerCase(),null,!1,!1)});var kB=/[\-:]([a-z])/g;function FB(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kB,FB);bs[e]=new Js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kB,FB);bs[e]=new Js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kB,FB);bs[e]=new Js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bs[t]=new Js(t,1,!1,t.toLowerCase(),null,!1,!1)});bs.xlinkHref=new Js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bs[t]=new Js(t,1,!1,t.toLowerCase(),null,!0,!0)});function zB(t,e,n,r){var i=bs.hasOwnProperty(e)?bs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($ne(e,n,i,r)&&(n=null),r||i===null?zne(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fd=kne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j1=Symbol.for("react.element"),ag=Symbol.for("react.portal"),lg=Symbol.for("react.fragment"),NB=Symbol.for("react.strict_mode"),wR=Symbol.for("react.profiler"),hG=Symbol.for("react.provider"),pG=Symbol.for("react.context"),$B=Symbol.for("react.forward_ref"),SR=Symbol.for("react.suspense"),ER=Symbol.for("react.suspense_list"),jB=Symbol.for("react.memo"),sf=Symbol.for("react.lazy"),mG=Symbol.for("react.offscreen"),l4=Symbol.iterator;function l0(t){return t===null||typeof t!="object"?null:(t=l4&&t[l4]||t["@@iterator"],typeof t=="function"?t:null)}var Eo=Object.assign,HM;function N0(t){if(HM===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);HM=e&&e[1]||""}return`
`+HM+t}var WM=!1;function XM(t,e){if(!t||WM)return"";WM=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,f=o.length-1;1<=l&&0<=f&&i[l]!==o[f];)f--;for(;1<=l&&0<=f;l--,f--)if(i[l]!==o[f]){if(l!==1||f!==1)do if(l--,f--,0>f||i[l]!==o[f]){var s=`
`+i[l].replace(" at new "," at ");return t.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",t.displayName)),s}while(1<=l&&0<=f);break}}}finally{WM=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?N0(t):""}function jne(t){switch(t.tag){case 5:return N0(t.type);case 16:return N0("Lazy");case 13:return N0("Suspense");case 19:return N0("SuspenseList");case 0:case 2:case 15:return t=XM(t.type,!1),t;case 11:return t=XM(t.type.render,!1),t;case 1:return t=XM(t.type,!0),t;default:return""}}function CR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lg:return"Fragment";case ag:return"Portal";case wR:return"Profiler";case NB:return"StrictMode";case SR:return"Suspense";case ER:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pG:return(t.displayName||"Context")+".Consumer";case hG:return(t._context.displayName||"Context")+".Provider";case $B:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jB:return e=t.displayName||null,e!==null?e:CR(t.type)||"Memo";case sf:e=t._payload,t=t._init;try{return CR(t(e))}catch{}}return null}function Une(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CR(e);case 8:return e===NB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vne(t){var e=gG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function U1(t){t._valueTracker||(t._valueTracker=Vne(t))}function vG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function QS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function TR(t,e){var n=e.checked;return Eo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function c4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yG(t,e){e=e.checked,e!=null&&zB(t,"checked",e,!1)}function AR(t,e){yG(t,e);var n=kf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?MR(t,e.type,n):e.hasOwnProperty("defaultValue")&&MR(t,e.type,kf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function u4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function MR(t,e,n){(e!=="number"||QS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $0=Array.isArray;function Ig(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function PR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(un(91));return Eo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(un(92));if($0(n)){if(1<n.length)throw Error(un(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kf(n)}}function _G(t,e){var n=kf(e.value),r=kf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function f4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var V1,xG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(V1=V1||document.createElement("div"),V1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=V1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function I_(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Q0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gne=["Webkit","ms","Moz","O"];Object.keys(Q0).forEach(function(t){Gne.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Q0[e]=Q0[t]})});function wG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Q0.hasOwnProperty(t)&&Q0[t]?(""+e).trim():e+"px"}function SG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Hne=Eo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RR(t,e){if(e){if(Hne[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(un(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(un(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(un(61))}if(e.style!=null&&typeof e.style!="object")throw Error(un(62))}}function OR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LR=null;function UB(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var BR=null,Rg=null,Og=null;function h4(t){if(t=zb(t)){if(typeof BR!="function")throw Error(un(280));var e=t.stateNode;e&&(e=IC(e),BR(t.stateNode,t.type,e))}}function EG(t){Rg?Og?Og.push(t):Og=[t]:Rg=t}function CG(){if(Rg){var t=Rg,e=Og;if(Og=Rg=null,h4(t),e)for(t=0;t<e.length;t++)h4(e[t])}}function TG(t,e){return t(e)}function AG(){}var qM=!1;function MG(t,e,n){if(qM)return t(e,n);qM=!0;try{return TG(t,e,n)}finally{qM=!1,(Rg!==null||Og!==null)&&(AG(),CG())}}function R_(t,e){var n=t.stateNode;if(n===null)return null;var r=IC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(un(231,e,typeof n));return n}var DR=!1;if(Qu)try{var c0={};Object.defineProperty(c0,"passive",{get:function(){DR=!0}}),window.addEventListener("test",c0,c0),window.removeEventListener("test",c0,c0)}catch{DR=!1}function Wne(t,e,n,r,i,o,l,f,s){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var e_=!1,eE=null,tE=!1,kR=null,Xne={onError:function(t){e_=!0,eE=t}};function qne(t,e,n,r,i,o,l,f,s){e_=!1,eE=null,Wne.apply(Xne,arguments)}function Yne(t,e,n,r,i,o,l,f,s){if(qne.apply(this,arguments),e_){if(e_){var p=eE;e_=!1,eE=null}else throw Error(un(198));tE||(tE=!0,kR=p)}}function Tp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function p4(t){if(Tp(t)!==t)throw Error(un(188))}function Zne(t){var e=t.alternate;if(!e){if(e=Tp(t),e===null)throw Error(un(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return p4(i),t;if(o===r)return p4(i),e;o=o.sibling}throw Error(un(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,f=i.child;f;){if(f===n){l=!0,n=i,r=o;break}if(f===r){l=!0,r=i,n=o;break}f=f.sibling}if(!l){for(f=o.child;f;){if(f===n){l=!0,n=o,r=i;break}if(f===r){l=!0,r=o,n=i;break}f=f.sibling}if(!l)throw Error(un(189))}}if(n.alternate!==r)throw Error(un(190))}if(n.tag!==3)throw Error(un(188));return n.stateNode.current===n?t:e}function IG(t){return t=Zne(t),t!==null?RG(t):null}function RG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RG(t);if(e!==null)return e;t=t.sibling}return null}var OG=Ya.unstable_scheduleCallback,m4=Ya.unstable_cancelCallback,Kne=Ya.unstable_shouldYield,Jne=Ya.unstable_requestPaint,Fo=Ya.unstable_now,Qne=Ya.unstable_getCurrentPriorityLevel,VB=Ya.unstable_ImmediatePriority,LG=Ya.unstable_UserBlockingPriority,nE=Ya.unstable_NormalPriority,ere=Ya.unstable_LowPriority,BG=Ya.unstable_IdlePriority,TC=null,ru=null;function tre(t){if(ru&&typeof ru.onCommitFiberRoot=="function")try{ru.onCommitFiberRoot(TC,t,void 0,(t.current.flags&128)===128)}catch{}}var fc=Math.clz32?Math.clz32:ire,nre=Math.log,rre=Math.LN2;function ire(t){return t>>>=0,t===0?32:31-(nre(t)/rre|0)|0}var G1=64,H1=4194304;function j0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var f=l&~i;f!==0?r=j0(f):(o&=l,o!==0&&(r=j0(o)))}else l=n&~i,l!==0?r=j0(l):o!==0&&(r=j0(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fc(e),i=1<<n,r|=t[n],e&=~i;return r}function ore(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sre(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-fc(o),f=1<<l,s=i[l];s===-1?(!(f&n)||f&r)&&(i[l]=ore(f,e)):s<=e&&(t.expiredLanes|=f),o&=~f}}function FR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DG(){var t=G1;return G1<<=1,!(G1&4194240)&&(G1=64),t}function YM(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kb(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fc(e),t[e]=n}function are(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function GB(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Li=0;function kG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FG,HB,zG,NG,$G,zR=!1,W1=[],Ef=null,Cf=null,Tf=null,O_=new Map,L_=new Map,lf=[],lre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g4(t,e){switch(t){case"focusin":case"focusout":Ef=null;break;case"dragenter":case"dragleave":Cf=null;break;case"mouseover":case"mouseout":Tf=null;break;case"pointerover":case"pointerout":O_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":L_.delete(e.pointerId)}}function u0(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=zb(e),e!==null&&HB(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cre(t,e,n,r,i){switch(e){case"focusin":return Ef=u0(Ef,t,e,n,r,i),!0;case"dragenter":return Cf=u0(Cf,t,e,n,r,i),!0;case"mouseover":return Tf=u0(Tf,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return O_.set(o,u0(O_.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,L_.set(o,u0(L_.get(o)||null,t,e,n,r,i)),!0}return!1}function jG(t){var e=Uh(t.target);if(e!==null){var n=Tp(e);if(n!==null){if(e=n.tag,e===13){if(e=PG(n),e!==null){t.blockedOn=e,$G(t.priority,function(){zG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=NR(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);LR=r,n.target.dispatchEvent(r),LR=null}else return e=zb(n),e!==null&&HB(e),t.blockedOn=n,!1;e.shift()}return!0}function v4(t,e,n){nS(t)&&n.delete(e)}function ure(){zR=!1,Ef!==null&&nS(Ef)&&(Ef=null),Cf!==null&&nS(Cf)&&(Cf=null),Tf!==null&&nS(Tf)&&(Tf=null),O_.forEach(v4),L_.forEach(v4)}function d0(t,e){t.blockedOn===e&&(t.blockedOn=null,zR||(zR=!0,Ya.unstable_scheduleCallback(Ya.unstable_NormalPriority,ure)))}function B_(t){function e(i){return d0(i,t)}if(0<W1.length){d0(W1[0],t);for(var n=1;n<W1.length;n++){var r=W1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ef!==null&&d0(Ef,t),Cf!==null&&d0(Cf,t),Tf!==null&&d0(Tf,t),O_.forEach(e),L_.forEach(e),n=0;n<lf.length;n++)r=lf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lf.length&&(n=lf[0],n.blockedOn===null);)jG(n),n.blockedOn===null&&lf.shift()}var Lg=fd.ReactCurrentBatchConfig,iE=!0;function dre(t,e,n,r){var i=Li,o=Lg.transition;Lg.transition=null;try{Li=1,WB(t,e,n,r)}finally{Li=i,Lg.transition=o}}function fre(t,e,n,r){var i=Li,o=Lg.transition;Lg.transition=null;try{Li=4,WB(t,e,n,r)}finally{Li=i,Lg.transition=o}}function WB(t,e,n,r){if(iE){var i=NR(t,e,n,r);if(i===null)oP(t,e,r,oE,n),g4(t,r);else if(cre(i,t,e,n,r))r.stopPropagation();else if(g4(t,r),e&4&&-1<lre.indexOf(t)){for(;i!==null;){var o=zb(i);if(o!==null&&FG(o),o=NR(t,e,n,r),o===null&&oP(t,e,r,oE,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else oP(t,e,r,null,n)}}var oE=null;function NR(t,e,n,r){if(oE=null,t=UB(r),t=Uh(t),t!==null)if(e=Tp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oE=t,null}function UG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qne()){case VB:return 1;case LG:return 4;case nE:case ere:return 16;case BG:return 536870912;default:return 16}default:return 16}}var uf=null,XB=null,rS=null;function VG(){if(rS)return rS;var t,e=XB,n=e.length,r,i="value"in uf?uf.value:uf.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return rS=i.slice(t,1<r?1-r:void 0)}function iS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function X1(){return!0}function y4(){return!1}function Ka(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?X1:y4,this.isPropagationStopped=y4,this}return Eo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=X1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=X1)},persist:function(){},isPersistent:X1}),e}var _v={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qB=Ka(_v),Fb=Eo({},_v,{view:0,detail:0}),hre=Ka(Fb),ZM,KM,f0,AC=Eo({},Fb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YB,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==f0&&(f0&&t.type==="mousemove"?(ZM=t.screenX-f0.screenX,KM=t.screenY-f0.screenY):KM=ZM=0,f0=t),ZM)},movementY:function(t){return"movementY"in t?t.movementY:KM}}),_4=Ka(AC),pre=Eo({},AC,{dataTransfer:0}),mre=Ka(pre),gre=Eo({},Fb,{relatedTarget:0}),JM=Ka(gre),vre=Eo({},_v,{animationName:0,elapsedTime:0,pseudoElement:0}),yre=Ka(vre),_re=Eo({},_v,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bre=Ka(_re),xre=Eo({},_v,{data:0}),b4=Ka(xre),wre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ere={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cre(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ere[t])?!!e[t]:!1}function YB(){return Cre}var Tre=Eo({},Fb,{key:function(t){if(t.key){var e=wre[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sre[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YB,charCode:function(t){return t.type==="keypress"?iS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Are=Ka(Tre),Mre=Eo({},AC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x4=Ka(Mre),Pre=Eo({},Fb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YB}),Ire=Ka(Pre),Rre=Eo({},_v,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ore=Ka(Rre),Lre=Eo({},AC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bre=Ka(Lre),Dre=[9,13,27,32],ZB=Qu&&"CompositionEvent"in window,t_=null;Qu&&"documentMode"in document&&(t_=document.documentMode);var kre=Qu&&"TextEvent"in window&&!t_,GG=Qu&&(!ZB||t_&&8<t_&&11>=t_),w4=" ",S4=!1;function HG(t,e){switch(t){case"keyup":return Dre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cg=!1;function Fre(t,e){switch(t){case"compositionend":return WG(e);case"keypress":return e.which!==32?null:(S4=!0,w4);case"textInput":return t=e.data,t===w4&&S4?null:t;default:return null}}function zre(t,e){if(cg)return t==="compositionend"||!ZB&&HG(t,e)?(t=VG(),rS=XB=uf=null,cg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GG&&e.locale!=="ko"?null:e.data;default:return null}}var Nre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nre[t.type]:e==="textarea"}function XG(t,e,n,r){EG(r),e=sE(e,"onChange"),0<e.length&&(n=new qB("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var n_=null,D_=null;function $re(t){i9(t,0)}function MC(t){var e=fg(t);if(vG(e))return t}function jre(t,e){if(t==="change")return e}var qG=!1;if(Qu){var QM;if(Qu){var eP="oninput"in document;if(!eP){var C4=document.createElement("div");C4.setAttribute("oninput","return;"),eP=typeof C4.oninput=="function"}QM=eP}else QM=!1;qG=QM&&(!document.documentMode||9<document.documentMode)}function T4(){n_&&(n_.detachEvent("onpropertychange",YG),D_=n_=null)}function YG(t){if(t.propertyName==="value"&&MC(D_)){var e=[];XG(e,D_,t,UB(t)),MG($re,e)}}function Ure(t,e,n){t==="focusin"?(T4(),n_=e,D_=n,n_.attachEvent("onpropertychange",YG)):t==="focusout"&&T4()}function Vre(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return MC(D_)}function Gre(t,e){if(t==="click")return MC(e)}function Hre(t,e){if(t==="input"||t==="change")return MC(e)}function Wre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vc=typeof Object.is=="function"?Object.is:Wre;function k_(t,e){if(vc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xR.call(e,i)||!vc(t[i],e[i]))return!1}return!0}function A4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M4(t,e){var n=A4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A4(n)}}function ZG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KG(){for(var t=window,e=QS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=QS(t.document)}return e}function KB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xre(t){var e=KG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZG(n.ownerDocument.documentElement,n)){if(r!==null&&KB(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=M4(n,o);var l=M4(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qre=Qu&&"documentMode"in document&&11>=document.documentMode,ug=null,$R=null,r_=null,jR=!1;function P4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jR||ug==null||ug!==QS(r)||(r=ug,"selectionStart"in r&&KB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),r_&&k_(r_,r)||(r_=r,r=sE($R,"onSelect"),0<r.length&&(e=new qB("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ug)))}function q1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dg={animationend:q1("Animation","AnimationEnd"),animationiteration:q1("Animation","AnimationIteration"),animationstart:q1("Animation","AnimationStart"),transitionend:q1("Transition","TransitionEnd")},tP={},JG={};Qu&&(JG=document.createElement("div").style,"AnimationEvent"in window||(delete dg.animationend.animation,delete dg.animationiteration.animation,delete dg.animationstart.animation),"TransitionEvent"in window||delete dg.transitionend.transition);function PC(t){if(tP[t])return tP[t];if(!dg[t])return t;var e=dg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JG)return tP[t]=e[n];return t}var QG=PC("animationend"),e9=PC("animationiteration"),t9=PC("animationstart"),n9=PC("transitionend"),r9=new Map,I4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jf(t,e){r9.set(t,e),Cp(e,[t])}for(var nP=0;nP<I4.length;nP++){var rP=I4[nP],Yre=rP.toLowerCase(),Zre=rP[0].toUpperCase()+rP.slice(1);jf(Yre,"on"+Zre)}jf(QG,"onAnimationEnd");jf(e9,"onAnimationIteration");jf(t9,"onAnimationStart");jf("dblclick","onDoubleClick");jf("focusin","onFocus");jf("focusout","onBlur");jf(n9,"onTransitionEnd");Wg("onMouseEnter",["mouseout","mouseover"]);Wg("onMouseLeave",["mouseout","mouseover"]);Wg("onPointerEnter",["pointerout","pointerover"]);Wg("onPointerLeave",["pointerout","pointerover"]);Cp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var U0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kre=new Set("cancel close invalid load scroll toggle".split(" ").concat(U0));function R4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yne(r,e,void 0,t),t.currentTarget=null}function i9(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var f=r[l],s=f.instance,p=f.currentTarget;if(f=f.listener,s!==o&&i.isPropagationStopped())break e;R4(i,f,p),o=s}else for(l=0;l<r.length;l++){if(f=r[l],s=f.instance,p=f.currentTarget,f=f.listener,s!==o&&i.isPropagationStopped())break e;R4(i,f,p),o=s}}}if(tE)throw t=kR,tE=!1,kR=null,t}function no(t,e){var n=e[WR];n===void 0&&(n=e[WR]=new Set);var r=t+"__bubble";n.has(r)||(o9(e,t,2,!1),n.add(r))}function iP(t,e,n){var r=0;e&&(r|=4),o9(n,t,r,e)}var Y1="_reactListening"+Math.random().toString(36).slice(2);function F_(t){if(!t[Y1]){t[Y1]=!0,fG.forEach(function(n){n!=="selectionchange"&&(Kre.has(n)||iP(n,!1,t),iP(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Y1]||(e[Y1]=!0,iP("selectionchange",!1,e))}}function o9(t,e,n,r){switch(UG(e)){case 1:var i=dre;break;case 4:i=fre;break;default:i=WB}n=i.bind(null,e,n,t),i=void 0,!DR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function oP(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var f=r.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var s=l.tag;if((s===3||s===4)&&(s=l.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;l=l.return}for(;f!==null;){if(l=Uh(f),l===null)return;if(s=l.tag,s===5||s===6){r=o=l;continue e}f=f.parentNode}}r=r.return}MG(function(){var p=o,v=UB(n),x=[];e:{var S=r9.get(t);if(S!==void 0){var M=qB,P=t;switch(t){case"keypress":if(iS(n)===0)break e;case"keydown":case"keyup":M=Are;break;case"focusin":P="focus",M=JM;break;case"focusout":P="blur",M=JM;break;case"beforeblur":case"afterblur":M=JM;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=_4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=mre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=Ire;break;case QG:case e9:case t9:M=yre;break;case n9:M=Ore;break;case"scroll":M=hre;break;case"wheel":M=Bre;break;case"copy":case"cut":case"paste":M=bre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=x4}var R=(e&4)!==0,D=!R&&t==="scroll",B=R?S!==null?S+"Capture":null:S;R=[];for(var O=p,k;O!==null;){k=O;var $=k.stateNode;if(k.tag===5&&$!==null&&(k=$,B!==null&&($=R_(O,B),$!=null&&R.push(z_(O,$,k)))),D)break;O=O.return}0<R.length&&(S=new M(S,P,null,n,v),x.push({event:S,listeners:R}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",S&&n!==LR&&(P=n.relatedTarget||n.fromElement)&&(Uh(P)||P[ed]))break e;if((M||S)&&(S=v.window===v?v:(S=v.ownerDocument)?S.defaultView||S.parentWindow:window,M?(P=n.relatedTarget||n.toElement,M=p,P=P?Uh(P):null,P!==null&&(D=Tp(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(M=null,P=p),M!==P)){if(R=_4,$="onMouseLeave",B="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(R=x4,$="onPointerLeave",B="onPointerEnter",O="pointer"),D=M==null?S:fg(M),k=P==null?S:fg(P),S=new R($,O+"leave",M,n,v),S.target=D,S.relatedTarget=k,$=null,Uh(v)===p&&(R=new R(B,O+"enter",P,n,v),R.target=k,R.relatedTarget=D,$=R),D=$,M&&P)t:{for(R=M,B=P,O=0,k=R;k;k=Lm(k))O++;for(k=0,$=B;$;$=Lm($))k++;for(;0<O-k;)R=Lm(R),O--;for(;0<k-O;)B=Lm(B),k--;for(;O--;){if(R===B||B!==null&&R===B.alternate)break t;R=Lm(R),B=Lm(B)}R=null}else R=null;M!==null&&O4(x,S,M,R,!1),P!==null&&D!==null&&O4(x,D,P,R,!0)}}e:{if(S=p?fg(p):window,M=S.nodeName&&S.nodeName.toLowerCase(),M==="select"||M==="input"&&S.type==="file")var H=jre;else if(E4(S))if(qG)H=Hre;else{H=Vre;var U=Ure}else(M=S.nodeName)&&M.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(H=Gre);if(H&&(H=H(t,p))){XG(x,H,n,v);break e}U&&U(t,S,p),t==="focusout"&&(U=S._wrapperState)&&U.controlled&&S.type==="number"&&MR(S,"number",S.value)}switch(U=p?fg(p):window,t){case"focusin":(E4(U)||U.contentEditable==="true")&&(ug=U,$R=p,r_=null);break;case"focusout":r_=$R=ug=null;break;case"mousedown":jR=!0;break;case"contextmenu":case"mouseup":case"dragend":jR=!1,P4(x,n,v);break;case"selectionchange":if(qre)break;case"keydown":case"keyup":P4(x,n,v)}var X;if(ZB)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else cg?HG(t,n)&&(J="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(GG&&n.locale!=="ko"&&(cg||J!=="onCompositionStart"?J==="onCompositionEnd"&&cg&&(X=VG()):(uf=v,XB="value"in uf?uf.value:uf.textContent,cg=!0)),U=sE(p,J),0<U.length&&(J=new b4(J,t,null,n,v),x.push({event:J,listeners:U}),X?J.data=X:(X=WG(n),X!==null&&(J.data=X)))),(X=kre?Fre(t,n):zre(t,n))&&(p=sE(p,"onBeforeInput"),0<p.length&&(v=new b4("onBeforeInput","beforeinput",null,n,v),x.push({event:v,listeners:p}),v.data=X))}i9(x,e)})}function z_(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=R_(t,n),o!=null&&r.unshift(z_(t,o,i)),o=R_(t,e),o!=null&&r.push(z_(t,o,i))),t=t.return}return r}function Lm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O4(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var f=n,s=f.alternate,p=f.stateNode;if(s!==null&&s===r)break;f.tag===5&&p!==null&&(f=p,i?(s=R_(n,o),s!=null&&l.unshift(z_(n,s,f))):i||(s=R_(n,o),s!=null&&l.push(z_(n,s,f)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Jre=/\r\n?/g,Qre=/\u0000|\uFFFD/g;function L4(t){return(typeof t=="string"?t:""+t).replace(Jre,`
`).replace(Qre,"")}function Z1(t,e,n){if(e=L4(e),L4(t)!==e&&n)throw Error(un(425))}function aE(){}var UR=null,VR=null;function GR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HR=typeof setTimeout=="function"?setTimeout:void 0,eie=typeof clearTimeout=="function"?clearTimeout:void 0,B4=typeof Promise=="function"?Promise:void 0,tie=typeof queueMicrotask=="function"?queueMicrotask:typeof B4<"u"?function(t){return B4.resolve(null).then(t).catch(nie)}:HR;function nie(t){setTimeout(function(){throw t})}function sP(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),B_(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);B_(e)}function Af(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bv=Math.random().toString(36).slice(2),Zc="__reactFiber$"+bv,N_="__reactProps$"+bv,ed="__reactContainer$"+bv,WR="__reactEvents$"+bv,rie="__reactListeners$"+bv,iie="__reactHandles$"+bv;function Uh(t){var e=t[Zc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ed]||n[Zc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D4(t);t!==null;){if(n=t[Zc])return n;t=D4(t)}return e}t=n,n=t.parentNode}return null}function zb(t){return t=t[Zc]||t[ed],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(un(33))}function IC(t){return t[N_]||null}var XR=[],hg=-1;function Uf(t){return{current:t}}function io(t){0>hg||(t.current=XR[hg],XR[hg]=null,hg--)}function Qi(t,e){hg++,XR[hg]=t.current,t.current=e}var Ff={},Fs=Uf(Ff),ga=Uf(!1),up=Ff;function Xg(t,e){var n=t.type.contextTypes;if(!n)return Ff;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function va(t){return t=t.childContextTypes,t!=null}function lE(){io(ga),io(Fs)}function k4(t,e,n){if(Fs.current!==Ff)throw Error(un(168));Qi(Fs,e),Qi(ga,n)}function s9(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(un(108,Une(t)||"Unknown",i));return Eo({},n,r)}function cE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ff,up=Fs.current,Qi(Fs,t),Qi(ga,ga.current),!0}function F4(t,e,n){var r=t.stateNode;if(!r)throw Error(un(169));n?(t=s9(t,e,up),r.__reactInternalMemoizedMergedChildContext=t,io(ga),io(Fs),Qi(Fs,t)):io(ga),Qi(ga,n)}var Nu=null,RC=!1,aP=!1;function a9(t){Nu===null?Nu=[t]:Nu.push(t)}function oie(t){RC=!0,a9(t)}function Vf(){if(!aP&&Nu!==null){aP=!0;var t=0,e=Li;try{var n=Nu;for(Li=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nu=null,RC=!1}catch(i){throw Nu!==null&&(Nu=Nu.slice(t+1)),OG(VB,Vf),i}finally{Li=e,aP=!1}}return null}var pg=[],mg=0,uE=null,dE=0,vl=[],yl=0,dp=null,Vu=1,Gu="";function Lh(t,e){pg[mg++]=dE,pg[mg++]=uE,uE=t,dE=e}function l9(t,e,n){vl[yl++]=Vu,vl[yl++]=Gu,vl[yl++]=dp,dp=t;var r=Vu;t=Gu;var i=32-fc(r)-1;r&=~(1<<i),n+=1;var o=32-fc(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Vu=1<<32-fc(e)+i|n<<i|r,Gu=o+t}else Vu=1<<o|n<<i|r,Gu=t}function JB(t){t.return!==null&&(Lh(t,1),l9(t,1,0))}function QB(t){for(;t===uE;)uE=pg[--mg],pg[mg]=null,dE=pg[--mg],pg[mg]=null;for(;t===dp;)dp=vl[--yl],vl[yl]=null,Gu=vl[--yl],vl[yl]=null,Vu=vl[--yl],vl[yl]=null}var Xa=null,Ga=null,fo=!1,oc=null;function c9(t,e){var n=bl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xa=t,Ga=Af(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xa=t,Ga=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dp!==null?{id:Vu,overflow:Gu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xa=t,Ga=null,!0):!1;default:return!1}}function qR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function YR(t){if(fo){var e=Ga;if(e){var n=e;if(!z4(t,e)){if(qR(t))throw Error(un(418));e=Af(n.nextSibling);var r=Xa;e&&z4(t,e)?c9(r,n):(t.flags=t.flags&-4097|2,fo=!1,Xa=t)}}else{if(qR(t))throw Error(un(418));t.flags=t.flags&-4097|2,fo=!1,Xa=t}}}function N4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xa=t}function K1(t){if(t!==Xa)return!1;if(!fo)return N4(t),fo=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!GR(t.type,t.memoizedProps)),e&&(e=Ga)){if(qR(t))throw u9(),Error(un(418));for(;e;)c9(t,e),e=Af(e.nextSibling)}if(N4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(un(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ga=Af(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ga=null}}else Ga=Xa?Af(t.stateNode.nextSibling):null;return!0}function u9(){for(var t=Ga;t;)t=Af(t.nextSibling)}function qg(){Ga=Xa=null,fo=!1}function eD(t){oc===null?oc=[t]:oc.push(t)}var sie=fd.ReactCurrentBatchConfig;function h0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(un(309));var r=n.stateNode}if(!r)throw Error(un(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var f=i.refs;l===null?delete f[o]:f[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(un(284));if(!n._owner)throw Error(un(290,t))}return t}function J1(t,e){throw t=Object.prototype.toString.call(e),Error(un(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $4(t){var e=t._init;return e(t._payload)}function d9(t){function e(B,O){if(t){var k=B.deletions;k===null?(B.deletions=[O],B.flags|=16):k.push(O)}}function n(B,O){if(!t)return null;for(;O!==null;)e(B,O),O=O.sibling;return null}function r(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function i(B,O){return B=Rf(B,O),B.index=0,B.sibling=null,B}function o(B,O,k){return B.index=k,t?(k=B.alternate,k!==null?(k=k.index,k<O?(B.flags|=2,O):k):(B.flags|=2,O)):(B.flags|=1048576,O)}function l(B){return t&&B.alternate===null&&(B.flags|=2),B}function f(B,O,k,$){return O===null||O.tag!==6?(O=pP(k,B.mode,$),O.return=B,O):(O=i(O,k),O.return=B,O)}function s(B,O,k,$){var H=k.type;return H===lg?v(B,O,k.props.children,$,k.key):O!==null&&(O.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===sf&&$4(H)===O.type)?($=i(O,k.props),$.ref=h0(B,O,k),$.return=B,$):($=dS(k.type,k.key,k.props,null,B.mode,$),$.ref=h0(B,O,k),$.return=B,$)}function p(B,O,k,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=mP(k,B.mode,$),O.return=B,O):(O=i(O,k.children||[]),O.return=B,O)}function v(B,O,k,$,H){return O===null||O.tag!==7?(O=op(k,B.mode,$,H),O.return=B,O):(O=i(O,k),O.return=B,O)}function x(B,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return O=pP(""+O,B.mode,k),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j1:return k=dS(O.type,O.key,O.props,null,B.mode,k),k.ref=h0(B,null,O),k.return=B,k;case ag:return O=mP(O,B.mode,k),O.return=B,O;case sf:var $=O._init;return x(B,$(O._payload),k)}if($0(O)||l0(O))return O=op(O,B.mode,k,null),O.return=B,O;J1(B,O)}return null}function S(B,O,k,$){var H=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return H!==null?null:f(B,O,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case j1:return k.key===H?s(B,O,k,$):null;case ag:return k.key===H?p(B,O,k,$):null;case sf:return H=k._init,S(B,O,H(k._payload),$)}if($0(k)||l0(k))return H!==null?null:v(B,O,k,$,null);J1(B,k)}return null}function M(B,O,k,$,H){if(typeof $=="string"&&$!==""||typeof $=="number")return B=B.get(k)||null,f(O,B,""+$,H);if(typeof $=="object"&&$!==null){switch($.$$typeof){case j1:return B=B.get($.key===null?k:$.key)||null,s(O,B,$,H);case ag:return B=B.get($.key===null?k:$.key)||null,p(O,B,$,H);case sf:var U=$._init;return M(B,O,k,U($._payload),H)}if($0($)||l0($))return B=B.get(k)||null,v(O,B,$,H,null);J1(O,$)}return null}function P(B,O,k,$){for(var H=null,U=null,X=O,J=O=0,K=null;X!==null&&J<k.length;J++){X.index>J?(K=X,X=null):K=X.sibling;var Q=S(B,X,k[J],$);if(Q===null){X===null&&(X=K);break}t&&X&&Q.alternate===null&&e(B,X),O=o(Q,O,J),U===null?H=Q:U.sibling=Q,U=Q,X=K}if(J===k.length)return n(B,X),fo&&Lh(B,J),H;if(X===null){for(;J<k.length;J++)X=x(B,k[J],$),X!==null&&(O=o(X,O,J),U===null?H=X:U.sibling=X,U=X);return fo&&Lh(B,J),H}for(X=r(B,X);J<k.length;J++)K=M(X,B,J,k[J],$),K!==null&&(t&&K.alternate!==null&&X.delete(K.key===null?J:K.key),O=o(K,O,J),U===null?H=K:U.sibling=K,U=K);return t&&X.forEach(function(ce){return e(B,ce)}),fo&&Lh(B,J),H}function R(B,O,k,$){var H=l0(k);if(typeof H!="function")throw Error(un(150));if(k=H.call(k),k==null)throw Error(un(151));for(var U=H=null,X=O,J=O=0,K=null,Q=k.next();X!==null&&!Q.done;J++,Q=k.next()){X.index>J?(K=X,X=null):K=X.sibling;var ce=S(B,X,Q.value,$);if(ce===null){X===null&&(X=K);break}t&&X&&ce.alternate===null&&e(B,X),O=o(ce,O,J),U===null?H=ce:U.sibling=ce,U=ce,X=K}if(Q.done)return n(B,X),fo&&Lh(B,J),H;if(X===null){for(;!Q.done;J++,Q=k.next())Q=x(B,Q.value,$),Q!==null&&(O=o(Q,O,J),U===null?H=Q:U.sibling=Q,U=Q);return fo&&Lh(B,J),H}for(X=r(B,X);!Q.done;J++,Q=k.next())Q=M(X,B,J,Q.value,$),Q!==null&&(t&&Q.alternate!==null&&X.delete(Q.key===null?J:Q.key),O=o(Q,O,J),U===null?H=Q:U.sibling=Q,U=Q);return t&&X.forEach(function(ge){return e(B,ge)}),fo&&Lh(B,J),H}function D(B,O,k,$){if(typeof k=="object"&&k!==null&&k.type===lg&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case j1:e:{for(var H=k.key,U=O;U!==null;){if(U.key===H){if(H=k.type,H===lg){if(U.tag===7){n(B,U.sibling),O=i(U,k.props.children),O.return=B,B=O;break e}}else if(U.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===sf&&$4(H)===U.type){n(B,U.sibling),O=i(U,k.props),O.ref=h0(B,U,k),O.return=B,B=O;break e}n(B,U);break}else e(B,U);U=U.sibling}k.type===lg?(O=op(k.props.children,B.mode,$,k.key),O.return=B,B=O):($=dS(k.type,k.key,k.props,null,B.mode,$),$.ref=h0(B,O,k),$.return=B,B=$)}return l(B);case ag:e:{for(U=k.key;O!==null;){if(O.key===U)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){n(B,O.sibling),O=i(O,k.children||[]),O.return=B,B=O;break e}else{n(B,O);break}else e(B,O);O=O.sibling}O=mP(k,B.mode,$),O.return=B,B=O}return l(B);case sf:return U=k._init,D(B,O,U(k._payload),$)}if($0(k))return P(B,O,k,$);if(l0(k))return R(B,O,k,$);J1(B,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,O!==null&&O.tag===6?(n(B,O.sibling),O=i(O,k),O.return=B,B=O):(n(B,O),O=pP(k,B.mode,$),O.return=B,B=O),l(B)):n(B,O)}return D}var Yg=d9(!0),f9=d9(!1),fE=Uf(null),hE=null,gg=null,tD=null;function nD(){tD=gg=hE=null}function rD(t){var e=fE.current;io(fE),t._currentValue=e}function ZR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bg(t,e){hE=t,tD=gg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ma=!0),t.firstContext=null)}function Sl(t){var e=t._currentValue;if(tD!==t)if(t={context:t,memoizedValue:e,next:null},gg===null){if(hE===null)throw Error(un(308));gg=t,hE.dependencies={lanes:0,firstContext:t}}else gg=gg.next=t;return e}var Vh=null;function iD(t){Vh===null?Vh=[t]:Vh.push(t)}function h9(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iD(e)):(n.next=i.next,i.next=n),e.interleaved=n,td(t,r)}function td(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var af=!1;function oD(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,si&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,td(t,n)}return i=r.interleaved,i===null?(e.next=e,iD(r)):(e.next=i.next,i.next=e),r.interleaved=e,td(t,n)}function oS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GB(t,n)}}function j4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pE(t,e,n,r){var i=t.updateQueue;af=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var s=f,p=s.next;s.next=null,l===null?o=p:l.next=p,l=s;var v=t.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==l&&(f===null?v.firstBaseUpdate=p:f.next=p,v.lastBaseUpdate=s))}if(o!==null){var x=i.baseState;l=0,v=p=s=null,f=o;do{var S=f.lane,M=f.eventTime;if((r&S)===S){v!==null&&(v=v.next={eventTime:M,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var P=t,R=f;switch(S=e,M=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){x=P.call(M,x,S);break e}x=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,S=typeof P=="function"?P.call(M,x,S):P,S==null)break e;x=Eo({},x,S);break e;case 2:af=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,S=i.effects,S===null?i.effects=[f]:S.push(f))}else M={eventTime:M,lane:S,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(p=v=M,s=x):v=v.next=M,l|=S;if(f=f.next,f===null){if(f=i.shared.pending,f===null)break;S=f,f=S.next,S.next=null,i.lastBaseUpdate=S,i.shared.pending=null}}while(!0);if(v===null&&(s=x),i.baseState=s,i.firstBaseUpdate=p,i.lastBaseUpdate=v,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);hp|=l,t.lanes=l,t.memoizedState=x}}function U4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(un(191,i));i.call(r)}}}var Nb={},iu=Uf(Nb),$_=Uf(Nb),j_=Uf(Nb);function Gh(t){if(t===Nb)throw Error(un(174));return t}function sD(t,e){switch(Qi(j_,e),Qi($_,t),Qi(iu,Nb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IR(e,t)}io(iu),Qi(iu,e)}function Zg(){io(iu),io($_),io(j_)}function m9(t){Gh(j_.current);var e=Gh(iu.current),n=IR(e,t.type);e!==n&&(Qi($_,t),Qi(iu,n))}function aD(t){$_.current===t&&(io(iu),io($_))}var bo=Uf(0);function mE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lP=[];function lD(){for(var t=0;t<lP.length;t++)lP[t]._workInProgressVersionPrimary=null;lP.length=0}var sS=fd.ReactCurrentDispatcher,cP=fd.ReactCurrentBatchConfig,fp=0,So=null,Yo=null,ss=null,gE=!1,i_=!1,U_=0,aie=0;function Is(){throw Error(un(321))}function cD(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vc(t[n],e[n]))return!1;return!0}function uD(t,e,n,r,i,o){if(fp=o,So=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sS.current=t===null||t.memoizedState===null?die:fie,t=n(r,i),i_){o=0;do{if(i_=!1,U_=0,25<=o)throw Error(un(301));o+=1,ss=Yo=null,e.updateQueue=null,sS.current=hie,t=n(r,i)}while(i_)}if(sS.current=vE,e=Yo!==null&&Yo.next!==null,fp=0,ss=Yo=So=null,gE=!1,e)throw Error(un(300));return t}function dD(){var t=U_!==0;return U_=0,t}function qc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?So.memoizedState=ss=t:ss=ss.next=t,ss}function El(){if(Yo===null){var t=So.alternate;t=t!==null?t.memoizedState:null}else t=Yo.next;var e=ss===null?So.memoizedState:ss.next;if(e!==null)ss=e,Yo=t;else{if(t===null)throw Error(un(310));Yo=t,t={memoizedState:Yo.memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},ss===null?So.memoizedState=ss=t:ss=ss.next=t}return ss}function V_(t,e){return typeof e=="function"?e(t):e}function uP(t){var e=El(),n=e.queue;if(n===null)throw Error(un(311));n.lastRenderedReducer=t;var r=Yo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var f=l=null,s=null,p=o;do{var v=p.lane;if((fp&v)===v)s!==null&&(s=s.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var x={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};s===null?(f=s=x,l=r):s=s.next=x,So.lanes|=v,hp|=v}p=p.next}while(p!==null&&p!==o);s===null?l=r:s.next=f,vc(r,e.memoizedState)||(ma=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=s,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,So.lanes|=o,hp|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dP(t){var e=El(),n=e.queue;if(n===null)throw Error(un(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);vc(o,e.memoizedState)||(ma=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function g9(){}function v9(t,e){var n=So,r=El(),i=e(),o=!vc(r.memoizedState,i);if(o&&(r.memoizedState=i,ma=!0),r=r.queue,fD(b9.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ss!==null&&ss.memoizedState.tag&1){if(n.flags|=2048,G_(9,_9.bind(null,n,r,i,e),void 0,null),ls===null)throw Error(un(349));fp&30||y9(n,e,i)}return i}function y9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=So.updateQueue,e===null?(e={lastEffect:null,stores:null},So.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _9(t,e,n,r){e.value=n,e.getSnapshot=r,x9(e)&&w9(t)}function b9(t,e,n){return n(function(){x9(e)&&w9(t)})}function x9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vc(t,n)}catch{return!0}}function w9(t){var e=td(t,1);e!==null&&hc(e,t,1,-1)}function V4(t){var e=qc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:t},e.queue=t,t=t.dispatch=uie.bind(null,So,t),[e.memoizedState,t]}function G_(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=So.updateQueue,e===null?(e={lastEffect:null,stores:null},So.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function S9(){return El().memoizedState}function aS(t,e,n,r){var i=qc();So.flags|=t,i.memoizedState=G_(1|e,n,void 0,r===void 0?null:r)}function OC(t,e,n,r){var i=El();r=r===void 0?null:r;var o=void 0;if(Yo!==null){var l=Yo.memoizedState;if(o=l.destroy,r!==null&&cD(r,l.deps)){i.memoizedState=G_(e,n,o,r);return}}So.flags|=t,i.memoizedState=G_(1|e,n,o,r)}function G4(t,e){return aS(8390656,8,t,e)}function fD(t,e){return OC(2048,8,t,e)}function E9(t,e){return OC(4,2,t,e)}function C9(t,e){return OC(4,4,t,e)}function T9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A9(t,e,n){return n=n!=null?n.concat([t]):null,OC(4,4,T9.bind(null,e,t),n)}function hD(){}function M9(t,e){var n=El();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cD(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function P9(t,e){var n=El();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cD(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I9(t,e,n){return fp&21?(vc(n,e)||(n=DG(),So.lanes|=n,hp|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ma=!0),t.memoizedState=n)}function lie(t,e){var n=Li;Li=n!==0&&4>n?n:4,t(!0);var r=cP.transition;cP.transition={};try{t(!1),e()}finally{Li=n,cP.transition=r}}function R9(){return El().memoizedState}function cie(t,e,n){var r=If(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O9(t))L9(e,n);else if(n=h9(t,e,n,r),n!==null){var i=Ws();hc(n,t,r,i),B9(n,e,r)}}function uie(t,e,n){var r=If(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O9(t))L9(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,f=o(l,n);if(i.hasEagerState=!0,i.eagerState=f,vc(f,l)){var s=e.interleaved;s===null?(i.next=i,iD(e)):(i.next=s.next,s.next=i),e.interleaved=i;return}}catch{}finally{}n=h9(t,e,i,r),n!==null&&(i=Ws(),hc(n,t,r,i),B9(n,e,r))}}function O9(t){var e=t.alternate;return t===So||e!==null&&e===So}function L9(t,e){i_=gE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GB(t,n)}}var vE={readContext:Sl,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useInsertionEffect:Is,useLayoutEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useMutableSource:Is,useSyncExternalStore:Is,useId:Is,unstable_isNewReconciler:!1},die={readContext:Sl,useCallback:function(t,e){return qc().memoizedState=[t,e===void 0?null:e],t},useContext:Sl,useEffect:G4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aS(4194308,4,T9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aS(4194308,4,t,e)},useInsertionEffect:function(t,e){return aS(4,2,t,e)},useMemo:function(t,e){var n=qc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cie.bind(null,So,t),[r.memoizedState,t]},useRef:function(t){var e=qc();return t={current:t},e.memoizedState=t},useState:V4,useDebugValue:hD,useDeferredValue:function(t){return qc().memoizedState=t},useTransition:function(){var t=V4(!1),e=t[0];return t=lie.bind(null,t[1]),qc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=So,i=qc();if(fo){if(n===void 0)throw Error(un(407));n=n()}else{if(n=e(),ls===null)throw Error(un(349));fp&30||y9(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,G4(b9.bind(null,r,o,t),[t]),r.flags|=2048,G_(9,_9.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=qc(),e=ls.identifierPrefix;if(fo){var n=Gu,r=Vu;n=(r&~(1<<32-fc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=U_++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aie++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fie={readContext:Sl,useCallback:M9,useContext:Sl,useEffect:fD,useImperativeHandle:A9,useInsertionEffect:E9,useLayoutEffect:C9,useMemo:P9,useReducer:uP,useRef:S9,useState:function(){return uP(V_)},useDebugValue:hD,useDeferredValue:function(t){var e=El();return I9(e,Yo.memoizedState,t)},useTransition:function(){var t=uP(V_)[0],e=El().memoizedState;return[t,e]},useMutableSource:g9,useSyncExternalStore:v9,useId:R9,unstable_isNewReconciler:!1},hie={readContext:Sl,useCallback:M9,useContext:Sl,useEffect:fD,useImperativeHandle:A9,useInsertionEffect:E9,useLayoutEffect:C9,useMemo:P9,useReducer:dP,useRef:S9,useState:function(){return dP(V_)},useDebugValue:hD,useDeferredValue:function(t){var e=El();return Yo===null?e.memoizedState=t:I9(e,Yo.memoizedState,t)},useTransition:function(){var t=dP(V_)[0],e=El().memoizedState;return[t,e]},useMutableSource:g9,useSyncExternalStore:v9,useId:R9,unstable_isNewReconciler:!1};function Kl(t,e){if(t&&t.defaultProps){e=Eo({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function KR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Eo({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LC={isMounted:function(t){return(t=t._reactInternals)?Tp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ws(),i=If(t),o=qu(r,i);o.payload=e,n!=null&&(o.callback=n),e=Mf(t,o,i),e!==null&&(hc(e,t,i,r),oS(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ws(),i=If(t),o=qu(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Mf(t,o,i),e!==null&&(hc(e,t,i,r),oS(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ws(),r=If(t),i=qu(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mf(t,i,r),e!==null&&(hc(e,t,r,n),oS(e,t,r))}};function H4(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!k_(n,r)||!k_(i,o):!0}function D9(t,e,n){var r=!1,i=Ff,o=e.contextType;return typeof o=="object"&&o!==null?o=Sl(o):(i=va(e)?up:Fs.current,r=e.contextTypes,o=(r=r!=null)?Xg(t,i):Ff),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function W4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&LC.enqueueReplaceState(e,e.state,null)}function JR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},oD(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Sl(o):(o=va(e)?up:Fs.current,i.context=Xg(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(KR(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&LC.enqueueReplaceState(i,i.state,null),pE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Kg(t,e){try{var n="",r=e;do n+=jne(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function fP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function QR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pie=typeof WeakMap=="function"?WeakMap:Map;function k9(t,e,n){n=qu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_E||(_E=!0,cO=r),QR(t,e)},n}function F9(t,e,n){n=qu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){QR(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){QR(t,e),typeof r!="function"&&(Pf===null?Pf=new Set([this]):Pf.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function X4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Mie.bind(null,t,e,n),e.then(t,t))}function q4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qu(-1,1),e.tag=2,Mf(n,e,1))),n.lanes|=1),t)}var mie=fd.ReactCurrentOwner,ma=!1;function Us(t,e,n,r){e.child=t===null?f9(e,null,n,r):Yg(e,t.child,n,r)}function Z4(t,e,n,r,i){n=n.render;var o=e.ref;return Bg(e,i),r=uD(t,e,n,r,o,i),n=dD(),t!==null&&!ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nd(t,e,i)):(fo&&n&&JB(e),e.flags|=1,Us(t,e,r,i),e.child)}function K4(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!xD(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,z9(t,e,o,r,i)):(t=dS(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:k_,n(l,r)&&t.ref===e.ref)return nd(t,e,i)}return e.flags|=1,t=Rf(o,r),t.ref=e.ref,t.return=e,e.child=t}function z9(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(k_(o,r)&&t.ref===e.ref)if(ma=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ma=!0);else return e.lanes=t.lanes,nd(t,e,i)}return eO(t,e,n,r,i)}function N9(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qi(yg,Na),Na|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qi(yg,Na),Na|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Qi(yg,Na),Na|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Qi(yg,Na),Na|=r;return Us(t,e,i,n),e.child}function $9(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eO(t,e,n,r,i){var o=va(n)?up:Fs.current;return o=Xg(e,o),Bg(e,i),n=uD(t,e,n,r,o,i),r=dD(),t!==null&&!ma?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nd(t,e,i)):(fo&&r&&JB(e),e.flags|=1,Us(t,e,n,i),e.child)}function J4(t,e,n,r,i){if(va(n)){var o=!0;cE(e)}else o=!1;if(Bg(e,i),e.stateNode===null)lS(t,e),D9(e,n,r),JR(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,f=e.memoizedProps;l.props=f;var s=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Sl(p):(p=va(n)?up:Fs.current,p=Xg(e,p));var v=n.getDerivedStateFromProps,x=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==r||s!==p)&&W4(e,l,r,p),af=!1;var S=e.memoizedState;l.state=S,pE(e,r,l,i),s=e.memoizedState,f!==r||S!==s||ga.current||af?(typeof v=="function"&&(KR(e,n,v,r),s=e.memoizedState),(f=af||H4(e,n,f,r,S,s,p))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=s),l.props=r,l.state=s,l.context=p,r=f):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,p9(t,e),f=e.memoizedProps,p=e.type===e.elementType?f:Kl(e.type,f),l.props=p,x=e.pendingProps,S=l.context,s=n.contextType,typeof s=="object"&&s!==null?s=Sl(s):(s=va(n)?up:Fs.current,s=Xg(e,s));var M=n.getDerivedStateFromProps;(v=typeof M=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==x||S!==s)&&W4(e,l,r,s),af=!1,S=e.memoizedState,l.state=S,pE(e,r,l,i);var P=e.memoizedState;f!==x||S!==P||ga.current||af?(typeof M=="function"&&(KR(e,n,M,r),P=e.memoizedState),(p=af||H4(e,n,p,r,S,P,s)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,P,s),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,P,s)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),l.props=r,l.state=P,l.context=s,r=p):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),r=!1)}return tO(t,e,n,r,o,i)}function tO(t,e,n,r,i,o){$9(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&F4(e,n,!1),nd(t,e,o);r=e.stateNode,mie.current=e;var f=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Yg(e,t.child,null,o),e.child=Yg(e,null,f,o)):Us(t,e,f,o),e.memoizedState=r.state,i&&F4(e,n,!0),e.child}function j9(t){var e=t.stateNode;e.pendingContext?k4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&k4(t,e.context,!1),sD(t,e.containerInfo)}function Q4(t,e,n,r,i){return qg(),eD(i),e.flags|=256,Us(t,e,n,r),e.child}var nO={dehydrated:null,treeContext:null,retryLane:0};function rO(t){return{baseLanes:t,cachePool:null,transitions:null}}function U9(t,e,n){var r=e.pendingProps,i=bo.current,o=!1,l=(e.flags&128)!==0,f;if((f=l)||(f=t!==null&&t.memoizedState===null?!1:(i&2)!==0),f?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qi(bo,i&1),t===null)return YR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=kC(l,r,0,null),t=op(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rO(n),e.memoizedState=nO,t):pD(e,l));if(i=t.memoizedState,i!==null&&(f=i.dehydrated,f!==null))return gie(t,e,l,r,f,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,f=i.sibling;var s={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=s,e.deletions=null):(r=Rf(i,s),r.subtreeFlags=i.subtreeFlags&14680064),f!==null?o=Rf(f,o):(o=op(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?rO(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=nO,r}return o=t.child,t=o.sibling,r=Rf(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pD(t,e){return e=kC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Q1(t,e,n,r){return r!==null&&eD(r),Yg(e,t.child,null,n),t=pD(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gie(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=fP(Error(un(422))),Q1(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=kC({mode:"visible",children:r.children},i,0,null),o=op(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yg(e,t.child,null,l),e.child.memoizedState=rO(l),e.memoizedState=nO,o);if(!(e.mode&1))return Q1(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var f=r.dgst;return r=f,o=Error(un(419)),r=fP(o,r,void 0),Q1(t,e,l,r)}if(f=(l&t.childLanes)!==0,ma||f){if(r=ls,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,td(t,i),hc(r,t,i,-1))}return bD(),r=fP(Error(un(421))),Q1(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Pie.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ga=Af(i.nextSibling),Xa=e,fo=!0,oc=null,t!==null&&(vl[yl++]=Vu,vl[yl++]=Gu,vl[yl++]=dp,Vu=t.id,Gu=t.overflow,dp=e),e=pD(e,r.children),e.flags|=4096,e)}function e2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ZR(t.return,e,n)}function hP(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function V9(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Us(t,e,r.children,n),r=bo.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e2(t,n,e);else if(t.tag===19)e2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qi(bo,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mE(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hP(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mE(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hP(e,!0,n,null,o);break;case"together":hP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hp|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(un(153));if(e.child!==null){for(t=e.child,n=Rf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vie(t,e,n){switch(e.tag){case 3:j9(e),qg();break;case 5:m9(e);break;case 1:va(e.type)&&cE(e);break;case 4:sD(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qi(fE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qi(bo,bo.current&1),e.flags|=128,null):n&e.child.childLanes?U9(t,e,n):(Qi(bo,bo.current&1),t=nd(t,e,n),t!==null?t.sibling:null);Qi(bo,bo.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V9(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qi(bo,bo.current),r)break;return null;case 22:case 23:return e.lanes=0,N9(t,e,n)}return nd(t,e,n)}var G9,iO,H9,W9;G9=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iO=function(){};H9=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gh(iu.current);var o=null;switch(n){case"input":i=TR(t,i),r=TR(t,r),o=[];break;case"select":i=Eo({},i,{value:void 0}),r=Eo({},r,{value:void 0}),o=[];break;case"textarea":i=PR(t,i),r=PR(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=aE)}RR(n,r);var l;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var f=i[p];for(l in f)f.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(P_.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var s=r[p];if(f=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&s!==f&&(s!=null||f!=null))if(p==="style")if(f){for(l in f)!f.hasOwnProperty(l)||s&&s.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in s)s.hasOwnProperty(l)&&f[l]!==s[l]&&(n||(n={}),n[l]=s[l])}else n||(o||(o=[]),o.push(p,n)),n=s;else p==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,f=f?f.__html:void 0,s!=null&&f!==s&&(o=o||[]).push(p,s)):p==="children"?typeof s!="string"&&typeof s!="number"||(o=o||[]).push(p,""+s):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(P_.hasOwnProperty(p)?(s!=null&&p==="onScroll"&&no("scroll",t),o||f===s||(o=[])):(o=o||[]).push(p,s))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};W9=function(t,e,n,r){n!==r&&(e.flags|=4)};function p0(t,e){if(!fo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yie(t,e,n){var r=e.pendingProps;switch(QB(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rs(e),null;case 1:return va(e.type)&&lE(),Rs(e),null;case 3:return r=e.stateNode,Zg(),io(ga),io(Fs),lD(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(K1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oc!==null&&(fO(oc),oc=null))),iO(t,e),Rs(e),null;case 5:aD(e);var i=Gh(j_.current);if(n=e.type,t!==null&&e.stateNode!=null)H9(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(un(166));return Rs(e),null}if(t=Gh(iu.current),K1(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Zc]=e,r[N_]=o,t=(e.mode&1)!==0,n){case"dialog":no("cancel",r),no("close",r);break;case"iframe":case"object":case"embed":no("load",r);break;case"video":case"audio":for(i=0;i<U0.length;i++)no(U0[i],r);break;case"source":no("error",r);break;case"img":case"image":case"link":no("error",r),no("load",r);break;case"details":no("toggle",r);break;case"input":c4(r,o),no("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},no("invalid",r);break;case"textarea":d4(r,o),no("invalid",r)}RR(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var f=o[l];l==="children"?typeof f=="string"?r.textContent!==f&&(o.suppressHydrationWarning!==!0&&Z1(r.textContent,f,t),i=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&Z1(r.textContent,f,t),i=["children",""+f]):P_.hasOwnProperty(l)&&f!=null&&l==="onScroll"&&no("scroll",r)}switch(n){case"input":U1(r),u4(r,o,!0);break;case"textarea":U1(r),f4(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=aE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Zc]=e,t[N_]=r,G9(t,e,!1,!1),e.stateNode=t;e:{switch(l=OR(n,r),n){case"dialog":no("cancel",t),no("close",t),i=r;break;case"iframe":case"object":case"embed":no("load",t),i=r;break;case"video":case"audio":for(i=0;i<U0.length;i++)no(U0[i],t);i=r;break;case"source":no("error",t),i=r;break;case"img":case"image":case"link":no("error",t),no("load",t),i=r;break;case"details":no("toggle",t),i=r;break;case"input":c4(t,r),i=TR(t,r),no("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Eo({},r,{value:void 0}),no("invalid",t);break;case"textarea":d4(t,r),i=PR(t,r),no("invalid",t);break;default:i=r}RR(n,i),f=i;for(o in f)if(f.hasOwnProperty(o)){var s=f[o];o==="style"?SG(t,s):o==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&xG(t,s)):o==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&I_(t,s):typeof s=="number"&&I_(t,""+s):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(P_.hasOwnProperty(o)?s!=null&&o==="onScroll"&&no("scroll",t):s!=null&&zB(t,o,s,l))}switch(n){case"input":U1(t),u4(t,r,!1);break;case"textarea":U1(t),f4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kf(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ig(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ig(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=aE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rs(e),null;case 6:if(t&&e.stateNode!=null)W9(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(un(166));if(n=Gh(j_.current),Gh(iu.current),K1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zc]=e,(o=r.nodeValue!==n)&&(t=Xa,t!==null))switch(t.tag){case 3:Z1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Z1(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zc]=e,e.stateNode=r}return Rs(e),null;case 13:if(io(bo),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fo&&Ga!==null&&e.mode&1&&!(e.flags&128))u9(),qg(),e.flags|=98560,o=!1;else if(o=K1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(un(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(un(317));o[Zc]=e}else qg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rs(e),o=!1}else oc!==null&&(fO(oc),oc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bo.current&1?Zo===0&&(Zo=3):bD())),e.updateQueue!==null&&(e.flags|=4),Rs(e),null);case 4:return Zg(),iO(t,e),t===null&&F_(e.stateNode.containerInfo),Rs(e),null;case 10:return rD(e.type._context),Rs(e),null;case 17:return va(e.type)&&lE(),Rs(e),null;case 19:if(io(bo),o=e.memoizedState,o===null)return Rs(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)p0(o,!1);else{if(Zo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=mE(t),l!==null){for(e.flags|=128,p0(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qi(bo,bo.current&1|2),e.child}t=t.sibling}o.tail!==null&&Fo()>Jg&&(e.flags|=128,r=!0,p0(o,!1),e.lanes=4194304)}else{if(!r)if(t=mE(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),p0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!fo)return Rs(e),null}else 2*Fo()-o.renderingStartTime>Jg&&n!==1073741824&&(e.flags|=128,r=!0,p0(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Fo(),e.sibling=null,n=bo.current,Qi(bo,r?n&1|2:n&1),e):(Rs(e),null);case 22:case 23:return _D(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Na&1073741824&&(Rs(e),e.subtreeFlags&6&&(e.flags|=8192)):Rs(e),null;case 24:return null;case 25:return null}throw Error(un(156,e.tag))}function _ie(t,e){switch(QB(e),e.tag){case 1:return va(e.type)&&lE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zg(),io(ga),io(Fs),lD(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aD(e),null;case 13:if(io(bo),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(un(340));qg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return io(bo),null;case 4:return Zg(),null;case 10:return rD(e.type._context),null;case 22:case 23:return _D(),null;case 24:return null;default:return null}}var ew=!1,Bs=!1,bie=typeof WeakSet=="function"?WeakSet:Set,Un=null;function vg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Po(t,e,r)}else n.current=null}function oO(t,e,n){try{n()}catch(r){Po(t,e,r)}}var t2=!1;function xie(t,e){if(UR=iE,t=KG(),KB(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,f=-1,s=-1,p=0,v=0,x=t,S=null;t:for(;;){for(var M;x!==n||i!==0&&x.nodeType!==3||(f=l+i),x!==o||r!==0&&x.nodeType!==3||(s=l+r),x.nodeType===3&&(l+=x.nodeValue.length),(M=x.firstChild)!==null;)S=x,x=M;for(;;){if(x===t)break t;if(S===n&&++p===i&&(f=l),S===o&&++v===r&&(s=l),(M=x.nextSibling)!==null)break;x=S,S=x.parentNode}x=M}n=f===-1||s===-1?null:{start:f,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(VR={focusedElem:t,selectionRange:n},iE=!1,Un=e;Un!==null;)if(e=Un,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Un=t;else for(;Un!==null;){e=Un;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,D=P.memoizedState,B=e.stateNode,O=B.getSnapshotBeforeUpdate(e.elementType===e.type?R:Kl(e.type,R),D);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(un(163))}}catch($){Po(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,Un=t;break}Un=e.return}return P=t2,t2=!1,P}function o_(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&oO(e,n,o)}i=i.next}while(i!==r)}}function BC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sO(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function X9(t){var e=t.alternate;e!==null&&(t.alternate=null,X9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zc],delete e[N_],delete e[WR],delete e[rie],delete e[iie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q9(t){return t.tag===5||t.tag===3||t.tag===4}function n2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function aO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=aE));else if(r!==4&&(t=t.child,t!==null))for(aO(t,e,n),t=t.sibling;t!==null;)aO(t,e,n),t=t.sibling}function lO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lO(t,e,n),t=t.sibling;t!==null;)lO(t,e,n),t=t.sibling}var hs=null,Ql=!1;function Xd(t,e,n){for(n=n.child;n!==null;)Y9(t,e,n),n=n.sibling}function Y9(t,e,n){if(ru&&typeof ru.onCommitFiberUnmount=="function")try{ru.onCommitFiberUnmount(TC,n)}catch{}switch(n.tag){case 5:Bs||vg(n,e);case 6:var r=hs,i=Ql;hs=null,Xd(t,e,n),hs=r,Ql=i,hs!==null&&(Ql?(t=hs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:hs!==null&&(Ql?(t=hs,n=n.stateNode,t.nodeType===8?sP(t.parentNode,n):t.nodeType===1&&sP(t,n),B_(t)):sP(hs,n.stateNode));break;case 4:r=hs,i=Ql,hs=n.stateNode.containerInfo,Ql=!0,Xd(t,e,n),hs=r,Ql=i;break;case 0:case 11:case 14:case 15:if(!Bs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&oO(n,e,l),i=i.next}while(i!==r)}Xd(t,e,n);break;case 1:if(!Bs&&(vg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){Po(n,e,f)}Xd(t,e,n);break;case 21:Xd(t,e,n);break;case 22:n.mode&1?(Bs=(r=Bs)||n.memoizedState!==null,Xd(t,e,n),Bs=r):Xd(t,e,n);break;default:Xd(t,e,n)}}function r2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bie),e.forEach(function(r){var i=Iie.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,f=l;e:for(;f!==null;){switch(f.tag){case 5:hs=f.stateNode,Ql=!1;break e;case 3:hs=f.stateNode.containerInfo,Ql=!0;break e;case 4:hs=f.stateNode.containerInfo,Ql=!0;break e}f=f.return}if(hs===null)throw Error(un(160));Y9(o,l,i),hs=null,Ql=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(p){Po(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z9(e,t),e=e.sibling}function Z9(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xl(e,t),jc(t),r&4){try{o_(3,t,t.return),BC(3,t)}catch(R){Po(t,t.return,R)}try{o_(5,t,t.return)}catch(R){Po(t,t.return,R)}}break;case 1:Xl(e,t),jc(t),r&512&&n!==null&&vg(n,n.return);break;case 5:if(Xl(e,t),jc(t),r&512&&n!==null&&vg(n,n.return),t.flags&32){var i=t.stateNode;try{I_(i,"")}catch(R){Po(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,f=t.type,s=t.updateQueue;if(t.updateQueue=null,s!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&yG(i,o),OR(f,l);var p=OR(f,o);for(l=0;l<s.length;l+=2){var v=s[l],x=s[l+1];v==="style"?SG(i,x):v==="dangerouslySetInnerHTML"?xG(i,x):v==="children"?I_(i,x):zB(i,v,x,p)}switch(f){case"input":AR(i,o);break;case"textarea":_G(i,o);break;case"select":var S=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var M=o.value;M!=null?Ig(i,!!o.multiple,M,!1):S!==!!o.multiple&&(o.defaultValue!=null?Ig(i,!!o.multiple,o.defaultValue,!0):Ig(i,!!o.multiple,o.multiple?[]:"",!1))}i[N_]=o}catch(R){Po(t,t.return,R)}}break;case 6:if(Xl(e,t),jc(t),r&4){if(t.stateNode===null)throw Error(un(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(R){Po(t,t.return,R)}}break;case 3:if(Xl(e,t),jc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{B_(e.containerInfo)}catch(R){Po(t,t.return,R)}break;case 4:Xl(e,t),jc(t);break;case 13:Xl(e,t),jc(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(vD=Fo())),r&4&&r2(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Bs=(p=Bs)||v,Xl(e,t),Bs=p):Xl(e,t),jc(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(Un=t,v=t.child;v!==null;){for(x=Un=v;Un!==null;){switch(S=Un,M=S.child,S.tag){case 0:case 11:case 14:case 15:o_(4,S,S.return);break;case 1:vg(S,S.return);var P=S.stateNode;if(typeof P.componentWillUnmount=="function"){r=S,n=S.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){Po(r,n,R)}}break;case 5:vg(S,S.return);break;case 22:if(S.memoizedState!==null){o2(x);continue}}M!==null?(M.return=S,Un=M):o2(x)}v=v.sibling}e:for(v=null,x=t;;){if(x.tag===5){if(v===null){v=x;try{i=x.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=x.stateNode,s=x.memoizedProps.style,l=s!=null&&s.hasOwnProperty("display")?s.display:null,f.style.display=wG("display",l))}catch(R){Po(t,t.return,R)}}}else if(x.tag===6){if(v===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(R){Po(t,t.return,R)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Xl(e,t),jc(t),r&4&&r2(t);break;case 21:break;default:Xl(e,t),jc(t)}}function jc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q9(n)){var r=n;break e}n=n.return}throw Error(un(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(I_(i,""),r.flags&=-33);var o=n2(t);lO(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,f=n2(t);aO(t,f,l);break;default:throw Error(un(161))}}catch(s){Po(t,t.return,s)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wie(t,e,n){Un=t,K9(t)}function K9(t,e,n){for(var r=(t.mode&1)!==0;Un!==null;){var i=Un,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ew;if(!l){var f=i.alternate,s=f!==null&&f.memoizedState!==null||Bs;f=ew;var p=Bs;if(ew=l,(Bs=s)&&!p)for(Un=i;Un!==null;)l=Un,s=l.child,l.tag===22&&l.memoizedState!==null?s2(i):s!==null?(s.return=l,Un=s):s2(i);for(;o!==null;)Un=o,K9(o),o=o.sibling;Un=i,ew=f,Bs=p}i2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Un=o):i2(t)}}function i2(t){for(;Un!==null;){var e=Un;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bs||BC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bs)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&U4(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}U4(e,l,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var s=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var x=v.dehydrated;x!==null&&B_(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(un(163))}Bs||e.flags&512&&sO(e)}catch(S){Po(e,e.return,S)}}if(e===t){Un=null;break}if(n=e.sibling,n!==null){n.return=e.return,Un=n;break}Un=e.return}}function o2(t){for(;Un!==null;){var e=Un;if(e===t){Un=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Un=n;break}Un=e.return}}function s2(t){for(;Un!==null;){var e=Un;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{BC(4,e)}catch(s){Po(e,n,s)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(s){Po(e,i,s)}}var o=e.return;try{sO(e)}catch(s){Po(e,o,s)}break;case 5:var l=e.return;try{sO(e)}catch(s){Po(e,l,s)}}}catch(s){Po(e,e.return,s)}if(e===t){Un=null;break}var f=e.sibling;if(f!==null){f.return=e.return,Un=f;break}Un=e.return}}var Sie=Math.ceil,yE=fd.ReactCurrentDispatcher,mD=fd.ReactCurrentOwner,xl=fd.ReactCurrentBatchConfig,si=0,ls=null,Vo=null,ms=0,Na=0,yg=Uf(0),Zo=0,H_=null,hp=0,DC=0,gD=0,s_=null,ha=null,vD=0,Jg=1/0,ku=null,_E=!1,cO=null,Pf=null,tw=!1,df=null,bE=0,a_=0,uO=null,cS=-1,uS=0;function Ws(){return si&6?Fo():cS!==-1?cS:cS=Fo()}function If(t){return t.mode&1?si&2&&ms!==0?ms&-ms:sie.transition!==null?(uS===0&&(uS=DG()),uS):(t=Li,t!==0||(t=window.event,t=t===void 0?16:UG(t.type)),t):1}function hc(t,e,n,r){if(50<a_)throw a_=0,uO=null,Error(un(185));kb(t,n,r),(!(si&2)||t!==ls)&&(t===ls&&(!(si&2)&&(DC|=n),Zo===4&&cf(t,ms)),ya(t,r),n===1&&si===0&&!(e.mode&1)&&(Jg=Fo()+500,RC&&Vf()))}function ya(t,e){var n=t.callbackNode;sre(t,e);var r=rE(t,t===ls?ms:0);if(r===0)n!==null&&m4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&m4(n),e===1)t.tag===0?oie(a2.bind(null,t)):a9(a2.bind(null,t)),tie(function(){!(si&6)&&Vf()}),n=null;else{switch(kG(r)){case 1:n=VB;break;case 4:n=LG;break;case 16:n=nE;break;case 536870912:n=BG;break;default:n=nE}n=oH(n,J9.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function J9(t,e){if(cS=-1,uS=0,si&6)throw Error(un(327));var n=t.callbackNode;if(Dg()&&t.callbackNode!==n)return null;var r=rE(t,t===ls?ms:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xE(t,r);else{e=r;var i=si;si|=2;var o=eH();(ls!==t||ms!==e)&&(ku=null,Jg=Fo()+500,ip(t,e));do try{Tie();break}catch(f){Q9(t,f)}while(!0);nD(),yE.current=o,si=i,Vo!==null?e=0:(ls=null,ms=0,e=Zo)}if(e!==0){if(e===2&&(i=FR(t),i!==0&&(r=i,e=dO(t,i))),e===1)throw n=H_,ip(t,0),cf(t,r),ya(t,Fo()),n;if(e===6)cf(t,r);else{if(i=t.current.alternate,!(r&30)&&!Eie(i)&&(e=xE(t,r),e===2&&(o=FR(t),o!==0&&(r=o,e=dO(t,o))),e===1))throw n=H_,ip(t,0),cf(t,r),ya(t,Fo()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(un(345));case 2:Bh(t,ha,ku);break;case 3:if(cf(t,r),(r&130023424)===r&&(e=vD+500-Fo(),10<e)){if(rE(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ws(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=HR(Bh.bind(null,t,ha,ku),e);break}Bh(t,ha,ku);break;case 4:if(cf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-fc(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=Fo()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sie(r/1960))-r,10<r){t.timeoutHandle=HR(Bh.bind(null,t,ha,ku),r);break}Bh(t,ha,ku);break;case 5:Bh(t,ha,ku);break;default:throw Error(un(329))}}}return ya(t,Fo()),t.callbackNode===n?J9.bind(null,t):null}function dO(t,e){var n=s_;return t.current.memoizedState.isDehydrated&&(ip(t,e).flags|=256),t=xE(t,e),t!==2&&(e=ha,ha=n,e!==null&&fO(e)),t}function fO(t){ha===null?ha=t:ha.push.apply(ha,t)}function Eie(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!vc(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cf(t,e){for(e&=~gD,e&=~DC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fc(e),r=1<<n;t[n]=-1,e&=~r}}function a2(t){if(si&6)throw Error(un(327));Dg();var e=rE(t,0);if(!(e&1))return ya(t,Fo()),null;var n=xE(t,e);if(t.tag!==0&&n===2){var r=FR(t);r!==0&&(e=r,n=dO(t,r))}if(n===1)throw n=H_,ip(t,0),cf(t,e),ya(t,Fo()),n;if(n===6)throw Error(un(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bh(t,ha,ku),ya(t,Fo()),null}function yD(t,e){var n=si;si|=1;try{return t(e)}finally{si=n,si===0&&(Jg=Fo()+500,RC&&Vf())}}function pp(t){df!==null&&df.tag===0&&!(si&6)&&Dg();var e=si;si|=1;var n=xl.transition,r=Li;try{if(xl.transition=null,Li=1,t)return t()}finally{Li=r,xl.transition=n,si=e,!(si&6)&&Vf()}}function _D(){Na=yg.current,io(yg)}function ip(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eie(n)),Vo!==null)for(n=Vo.return;n!==null;){var r=n;switch(QB(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lE();break;case 3:Zg(),io(ga),io(Fs),lD();break;case 5:aD(r);break;case 4:Zg();break;case 13:io(bo);break;case 19:io(bo);break;case 10:rD(r.type._context);break;case 22:case 23:_D()}n=n.return}if(ls=t,Vo=t=Rf(t.current,null),ms=Na=e,Zo=0,H_=null,gD=DC=hp=0,ha=s_=null,Vh!==null){for(e=0;e<Vh.length;e++)if(n=Vh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Vh=null}return t}function Q9(t,e){do{var n=Vo;try{if(nD(),sS.current=vE,gE){for(var r=So.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gE=!1}if(fp=0,ss=Yo=So=null,i_=!1,U_=0,mD.current=null,n===null||n.return===null){Zo=1,H_=e,Vo=null;break}e:{var o=t,l=n.return,f=n,s=e;if(e=ms,f.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var p=s,v=f,x=v.tag;if(!(v.mode&1)&&(x===0||x===11||x===15)){var S=v.alternate;S?(v.updateQueue=S.updateQueue,v.memoizedState=S.memoizedState,v.lanes=S.lanes):(v.updateQueue=null,v.memoizedState=null)}var M=q4(l);if(M!==null){M.flags&=-257,Y4(M,l,f,o,e),M.mode&1&&X4(o,p,e),e=M,s=p;var P=e.updateQueue;if(P===null){var R=new Set;R.add(s),e.updateQueue=R}else P.add(s);break e}else{if(!(e&1)){X4(o,p,e),bD();break e}s=Error(un(426))}}else if(fo&&f.mode&1){var D=q4(l);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Y4(D,l,f,o,e),eD(Kg(s,f));break e}}o=s=Kg(s,f),Zo!==4&&(Zo=2),s_===null?s_=[o]:s_.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var B=k9(o,s,e);j4(o,B);break e;case 1:f=s;var O=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Pf===null||!Pf.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var $=F9(o,f,e);j4(o,$);break e}}o=o.return}while(o!==null)}nH(n)}catch(H){e=H,Vo===n&&n!==null&&(Vo=n=n.return);continue}break}while(!0)}function eH(){var t=yE.current;return yE.current=vE,t===null?vE:t}function bD(){(Zo===0||Zo===3||Zo===2)&&(Zo=4),ls===null||!(hp&268435455)&&!(DC&268435455)||cf(ls,ms)}function xE(t,e){var n=si;si|=2;var r=eH();(ls!==t||ms!==e)&&(ku=null,ip(t,e));do try{Cie();break}catch(i){Q9(t,i)}while(!0);if(nD(),si=n,yE.current=r,Vo!==null)throw Error(un(261));return ls=null,ms=0,Zo}function Cie(){for(;Vo!==null;)tH(Vo)}function Tie(){for(;Vo!==null&&!Kne();)tH(Vo)}function tH(t){var e=iH(t.alternate,t,Na);t.memoizedProps=t.pendingProps,e===null?nH(t):Vo=e,mD.current=null}function nH(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_ie(n,e),n!==null){n.flags&=32767,Vo=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zo=6,Vo=null;return}}else if(n=yie(n,e,Na),n!==null){Vo=n;return}if(e=e.sibling,e!==null){Vo=e;return}Vo=e=t}while(e!==null);Zo===0&&(Zo=5)}function Bh(t,e,n){var r=Li,i=xl.transition;try{xl.transition=null,Li=1,Aie(t,e,n,r)}finally{xl.transition=i,Li=r}return null}function Aie(t,e,n,r){do Dg();while(df!==null);if(si&6)throw Error(un(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(un(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(are(t,o),t===ls&&(Vo=ls=null,ms=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tw||(tw=!0,oH(nE,function(){return Dg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=xl.transition,xl.transition=null;var l=Li;Li=1;var f=si;si|=4,mD.current=null,xie(t,n),Z9(n,t),Xre(VR),iE=!!UR,VR=UR=null,t.current=n,wie(n),Jne(),si=f,Li=l,xl.transition=o}else t.current=n;if(tw&&(tw=!1,df=t,bE=i),o=t.pendingLanes,o===0&&(Pf=null),tre(n.stateNode),ya(t,Fo()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_E)throw _E=!1,t=cO,cO=null,t;return bE&1&&t.tag!==0&&Dg(),o=t.pendingLanes,o&1?t===uO?a_++:(a_=0,uO=t):a_=0,Vf(),null}function Dg(){if(df!==null){var t=kG(bE),e=xl.transition,n=Li;try{if(xl.transition=null,Li=16>t?16:t,df===null)var r=!1;else{if(t=df,df=null,bE=0,si&6)throw Error(un(331));var i=si;for(si|=4,Un=t.current;Un!==null;){var o=Un,l=o.child;if(Un.flags&16){var f=o.deletions;if(f!==null){for(var s=0;s<f.length;s++){var p=f[s];for(Un=p;Un!==null;){var v=Un;switch(v.tag){case 0:case 11:case 15:o_(8,v,o)}var x=v.child;if(x!==null)x.return=v,Un=x;else for(;Un!==null;){v=Un;var S=v.sibling,M=v.return;if(X9(v),v===p){Un=null;break}if(S!==null){S.return=M,Un=S;break}Un=M}}}var P=o.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}Un=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Un=l;else e:for(;Un!==null;){if(o=Un,o.flags&2048)switch(o.tag){case 0:case 11:case 15:o_(9,o,o.return)}var B=o.sibling;if(B!==null){B.return=o.return,Un=B;break e}Un=o.return}}var O=t.current;for(Un=O;Un!==null;){l=Un;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,Un=k;else e:for(l=O;Un!==null;){if(f=Un,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:BC(9,f)}}catch(H){Po(f,f.return,H)}if(f===l){Un=null;break e}var $=f.sibling;if($!==null){$.return=f.return,Un=$;break e}Un=f.return}}if(si=i,Vf(),ru&&typeof ru.onPostCommitFiberRoot=="function")try{ru.onPostCommitFiberRoot(TC,t)}catch{}r=!0}return r}finally{Li=n,xl.transition=e}}return!1}function l2(t,e,n){e=Kg(n,e),e=k9(t,e,1),t=Mf(t,e,1),e=Ws(),t!==null&&(kb(t,1,e),ya(t,e))}function Po(t,e,n){if(t.tag===3)l2(t,t,n);else for(;e!==null;){if(e.tag===3){l2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pf===null||!Pf.has(r))){t=Kg(n,t),t=F9(e,t,1),e=Mf(e,t,1),t=Ws(),e!==null&&(kb(e,1,t),ya(e,t));break}}e=e.return}}function Mie(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ws(),t.pingedLanes|=t.suspendedLanes&n,ls===t&&(ms&n)===n&&(Zo===4||Zo===3&&(ms&130023424)===ms&&500>Fo()-vD?ip(t,0):gD|=n),ya(t,e)}function rH(t,e){e===0&&(t.mode&1?(e=H1,H1<<=1,!(H1&130023424)&&(H1=4194304)):e=1);var n=Ws();t=td(t,e),t!==null&&(kb(t,e,n),ya(t,n))}function Pie(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rH(t,n)}function Iie(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(un(314))}r!==null&&r.delete(e),rH(t,n)}var iH;iH=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ga.current)ma=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ma=!1,vie(t,e,n);ma=!!(t.flags&131072)}else ma=!1,fo&&e.flags&1048576&&l9(e,dE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lS(t,e),t=e.pendingProps;var i=Xg(e,Fs.current);Bg(e,n),i=uD(null,e,r,t,i,n);var o=dD();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,va(r)?(o=!0,cE(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oD(e),i.updater=LC,e.stateNode=i,i._reactInternals=e,JR(e,r,t,n),e=tO(null,e,r,!0,o,n)):(e.tag=0,fo&&o&&JB(e),Us(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lS(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Oie(r),t=Kl(r,t),i){case 0:e=eO(null,e,r,t,n);break e;case 1:e=J4(null,e,r,t,n);break e;case 11:e=Z4(null,e,r,t,n);break e;case 14:e=K4(null,e,r,Kl(r.type,t),n);break e}throw Error(un(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kl(r,i),eO(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kl(r,i),J4(t,e,r,i,n);case 3:e:{if(j9(e),t===null)throw Error(un(387));r=e.pendingProps,o=e.memoizedState,i=o.element,p9(t,e),pE(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Kg(Error(un(423)),e),e=Q4(t,e,r,n,i);break e}else if(r!==i){i=Kg(Error(un(424)),e),e=Q4(t,e,r,n,i);break e}else for(Ga=Af(e.stateNode.containerInfo.firstChild),Xa=e,fo=!0,oc=null,n=f9(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qg(),r===i){e=nd(t,e,n);break e}Us(t,e,r,n)}e=e.child}return e;case 5:return m9(e),t===null&&YR(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,GR(r,i)?l=null:o!==null&&GR(r,o)&&(e.flags|=32),$9(t,e),Us(t,e,l,n),e.child;case 6:return t===null&&YR(e),null;case 13:return U9(t,e,n);case 4:return sD(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yg(e,null,r,n):Us(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kl(r,i),Z4(t,e,r,i,n);case 7:return Us(t,e,e.pendingProps,n),e.child;case 8:return Us(t,e,e.pendingProps.children,n),e.child;case 12:return Us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,Qi(fE,r._currentValue),r._currentValue=l,o!==null)if(vc(o.value,l)){if(o.children===i.children&&!ga.current){e=nd(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var f=o.dependencies;if(f!==null){l=o.child;for(var s=f.firstContext;s!==null;){if(s.context===r){if(o.tag===1){s=qu(-1,n&-n),s.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?s.next=s:(s.next=v.next,v.next=s),p.pending=s}}o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),ZR(o.return,n,e),f.lanes|=n;break}s=s.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(un(341));l.lanes|=n,f=l.alternate,f!==null&&(f.lanes|=n),ZR(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Us(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bg(e,n),i=Sl(i),r=r(i),e.flags|=1,Us(t,e,r,n),e.child;case 14:return r=e.type,i=Kl(r,e.pendingProps),i=Kl(r.type,i),K4(t,e,r,i,n);case 15:return z9(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kl(r,i),lS(t,e),e.tag=1,va(r)?(t=!0,cE(e)):t=!1,Bg(e,n),D9(e,r,i),JR(e,r,i,n),tO(null,e,r,!0,t,n);case 19:return V9(t,e,n);case 22:return N9(t,e,n)}throw Error(un(156,e.tag))};function oH(t,e){return OG(t,e)}function Rie(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bl(t,e,n,r){return new Rie(t,e,n,r)}function xD(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oie(t){if(typeof t=="function")return xD(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$B)return 11;if(t===jB)return 14}return 2}function Rf(t,e){var n=t.alternate;return n===null?(n=bl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dS(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")xD(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case lg:return op(n.children,i,o,e);case NB:l=8,i|=8;break;case wR:return t=bl(12,n,e,i|2),t.elementType=wR,t.lanes=o,t;case SR:return t=bl(13,n,e,i),t.elementType=SR,t.lanes=o,t;case ER:return t=bl(19,n,e,i),t.elementType=ER,t.lanes=o,t;case mG:return kC(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hG:l=10;break e;case pG:l=9;break e;case $B:l=11;break e;case jB:l=14;break e;case sf:l=16,r=null;break e}throw Error(un(130,t==null?t:typeof t,""))}return e=bl(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function op(t,e,n,r){return t=bl(7,t,r,e),t.lanes=n,t}function kC(t,e,n,r){return t=bl(22,t,r,e),t.elementType=mG,t.lanes=n,t.stateNode={isHidden:!1},t}function pP(t,e,n){return t=bl(6,t,null,e),t.lanes=n,t}function mP(t,e,n){return e=bl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lie(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YM(0),this.expirationTimes=YM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YM(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wD(t,e,n,r,i,o,l,f,s){return t=new Lie(t,e,n,f,s),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oD(o),t}function Bie(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ag,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sH(t){if(!t)return Ff;t=t._reactInternals;e:{if(Tp(t)!==t||t.tag!==1)throw Error(un(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(va(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(un(171))}if(t.tag===1){var n=t.type;if(va(n))return s9(t,n,e)}return e}function aH(t,e,n,r,i,o,l,f,s){return t=wD(n,r,!0,t,i,o,l,f,s),t.context=sH(null),n=t.current,r=Ws(),i=If(n),o=qu(r,i),o.callback=e??null,Mf(n,o,i),t.current.lanes=i,kb(t,i,r),ya(t,r),t}function FC(t,e,n,r){var i=e.current,o=Ws(),l=If(i);return n=sH(n),e.context===null?e.context=n:e.pendingContext=n,e=qu(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mf(i,e,l),t!==null&&(hc(t,i,l,o),oS(t,i,l)),l}function wE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function SD(t,e){c2(t,e),(t=t.alternate)&&c2(t,e)}function Die(){return null}var lH=typeof reportError=="function"?reportError:function(t){console.error(t)};function ED(t){this._internalRoot=t}zC.prototype.render=ED.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(un(409));FC(t,e,null,null)};zC.prototype.unmount=ED.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pp(function(){FC(null,t,null,null)}),e[ed]=null}};function zC(t){this._internalRoot=t}zC.prototype.unstable_scheduleHydration=function(t){if(t){var e=NG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lf.length&&e!==0&&e<lf[n].priority;n++);lf.splice(n,0,t),n===0&&jG(t)}};function CD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function NC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u2(){}function kie(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=wE(l);o.call(p)}}var l=aH(e,r,t,0,null,!1,!1,"",u2);return t._reactRootContainer=l,t[ed]=l.current,F_(t.nodeType===8?t.parentNode:t),pp(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var f=r;r=function(){var p=wE(s);f.call(p)}}var s=wD(t,0,!1,null,null,!1,!1,"",u2);return t._reactRootContainer=s,t[ed]=s.current,F_(t.nodeType===8?t.parentNode:t),pp(function(){FC(e,s,n,r)}),s}function $C(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var f=i;i=function(){var s=wE(l);f.call(s)}}FC(e,l,t,i)}else l=kie(n,e,t,i,r);return wE(l)}FG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=j0(e.pendingLanes);n!==0&&(GB(e,n|1),ya(e,Fo()),!(si&6)&&(Jg=Fo()+500,Vf()))}break;case 13:pp(function(){var r=td(t,1);if(r!==null){var i=Ws();hc(r,t,1,i)}}),SD(t,1)}};HB=function(t){if(t.tag===13){var e=td(t,134217728);if(e!==null){var n=Ws();hc(e,t,134217728,n)}SD(t,134217728)}};zG=function(t){if(t.tag===13){var e=If(t),n=td(t,e);if(n!==null){var r=Ws();hc(n,t,e,r)}SD(t,e)}};NG=function(){return Li};$G=function(t,e){var n=Li;try{return Li=t,e()}finally{Li=n}};BR=function(t,e,n){switch(e){case"input":if(AR(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=IC(r);if(!i)throw Error(un(90));vG(r),AR(r,i)}}}break;case"textarea":_G(t,n);break;case"select":e=n.value,e!=null&&Ig(t,!!n.multiple,e,!1)}};TG=yD;AG=pp;var Fie={usingClientEntryPoint:!1,Events:[zb,fg,IC,EG,CG,yD]},m0={findFiberByHostInstance:Uh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zie={bundleType:m0.bundleType,version:m0.version,rendererPackageName:m0.rendererPackageName,rendererConfig:m0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IG(t),t===null?null:t.stateNode},findFiberByHostInstance:m0.findFiberByHostInstance||Die,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nw.isDisabled&&nw.supportsFiber)try{TC=nw.inject(zie),ru=nw}catch{}}Za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fie;Za.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CD(e))throw Error(un(200));return Bie(t,e,null,n)};Za.createRoot=function(t,e){if(!CD(t))throw Error(un(299));var n=!1,r="",i=lH;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wD(t,1,!1,null,null,n,!1,r,i),t[ed]=e.current,F_(t.nodeType===8?t.parentNode:t),new ED(e)};Za.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(un(188)):(t=Object.keys(t).join(","),Error(un(268,t)));return t=IG(e),t=t===null?null:t.stateNode,t};Za.flushSync=function(t){return pp(t)};Za.hydrate=function(t,e,n){if(!NC(e))throw Error(un(200));return $C(null,t,e,!0,n)};Za.hydrateRoot=function(t,e,n){if(!CD(t))throw Error(un(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=lH;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=aH(e,null,t,1,n??null,i,!1,o,l),t[ed]=e.current,F_(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zC(e)};Za.render=function(t,e,n){if(!NC(e))throw Error(un(200));return $C(null,t,e,!1,n)};Za.unmountComponentAtNode=function(t){if(!NC(t))throw Error(un(40));return t._reactRootContainer?(pp(function(){$C(null,null,t,!1,function(){t._reactRootContainer=null,t[ed]=null})}),!0):!1};Za.unstable_batchedUpdates=yD;Za.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!NC(n))throw Error(un(200));if(t==null||t._reactInternals===void 0)throw Error(un(38));return $C(t,e,n,!1,r)};Za.version="18.3.1-next-f1338f8080-20240426";function cH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cH)}catch(t){console.error(t)}}cH(),cG.exports=Za;var rd=cG.exports;const hO=Ep(rd),uH=RB({__proto__:null,default:hO},[rd]);var d2=rd;bR.createRoot=d2.createRoot,bR.hydrateRoot=d2.hydrateRoot;var Nie=E.createContext({});const jC=Nie;function Mn(){return Mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mn.apply(null,arguments)}function dH(t){if(Array.isArray(t))return t}function $ie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,l,f=[],s=!0,p=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(f.push(r.value),f.length!==e);s=!0);}catch(v){p=!0,i=v}finally{try{if(!s&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw i}}return f}}function pO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function TD(t,e){if(t){if(typeof t=="string")return pO(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pO(t,e):void 0}}function fH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(t,e){return dH(t)||$ie(t,e)||TD(t,e)||fH()}function Kn(t){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(t)}function jie(t,e){if(Kn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hH(t){var e=jie(t,"string");return Kn(e)=="symbol"?e:e+""}function j(t,e,n){return(e=hH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Hr(t,e){if(t==null)return{};var n,r,i=Uie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var pH={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var f=arguments[l];f&&(o=i(o,r(f)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var f in o)e.call(o,f)&&o[f]&&(l=i(l,f));return l}function i(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(pH);var Vie=pH.exports;const At=Ep(Vie);function gs(t,e){Gie(t)&&(t="100%");var n=Hie(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function rw(t){return Math.min(1,Math.max(0,t))}function Gie(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Hie(t){return typeof t=="string"&&t.indexOf("%")!==-1}function mH(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function iw(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Hh(t){return t.length===1?"0"+t:String(t)}function Wie(t,e,n){return{r:gs(t,255)*255,g:gs(e,255)*255,b:gs(n,255)*255}}function f2(t,e,n){t=gs(t,255),e=gs(e,255),n=gs(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,l=0,f=(r+i)/2;if(r===i)l=0,o=0;else{var s=r-i;switch(l=f>.5?s/(2-r-i):s/(r+i),r){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4;break}o/=6}return{h:o,s:l,l:f}}function gP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Xie(t,e,n){var r,i,o;if(t=gs(t,360),e=gs(e,100),n=gs(n,100),e===0)i=n,o=n,r=n;else{var l=n<.5?n*(1+e):n+e-n*e,f=2*n-l;r=gP(f,l,t+1/3),i=gP(f,l,t),o=gP(f,l,t-1/3)}return{r:r*255,g:i*255,b:o*255}}function mO(t,e,n){t=gs(t,255),e=gs(e,255),n=gs(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,l=r,f=r-i,s=r===0?0:f/r;if(r===i)o=0;else{switch(r){case t:o=(e-n)/f+(e<n?6:0);break;case e:o=(n-t)/f+2;break;case n:o=(t-e)/f+4;break}o/=6}return{h:o,s,v:l}}function qie(t,e,n){t=gs(t,360)*6,e=gs(e,100),n=gs(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),l=n*(1-i*e),f=n*(1-(1-i)*e),s=r%6,p=[n,l,o,o,f,n][s],v=[f,n,n,l,o,o][s],x=[o,o,f,n,n,l][s];return{r:p*255,g:v*255,b:x*255}}function gO(t,e,n,r){var i=[Hh(Math.round(t).toString(16)),Hh(Math.round(e).toString(16)),Hh(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Yie(t,e,n,r,i){var o=[Hh(Math.round(t).toString(16)),Hh(Math.round(e).toString(16)),Hh(Math.round(n).toString(16)),Hh(Zie(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Zie(t){return Math.round(parseFloat(t)*255).toString(16)}function h2(t){return Ba(t)/255}function Ba(t){return parseInt(t,16)}function Kie(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var vO={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function tg(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,f=!1;return typeof t=="string"&&(t=eoe(t)),typeof t=="object"&&(Iu(t.r)&&Iu(t.g)&&Iu(t.b)?(e=Wie(t.r,t.g,t.b),l=!0,f=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Iu(t.h)&&Iu(t.s)&&Iu(t.v)?(r=iw(t.s),i=iw(t.v),e=qie(t.h,r,i),l=!0,f="hsv"):Iu(t.h)&&Iu(t.s)&&Iu(t.l)&&(r=iw(t.s),o=iw(t.l),e=Xie(t.h,r,o),l=!0,f="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=mH(n),{ok:l,format:t.format||f,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Jie="[-\\+]?\\d+%?",Qie="[-\\+]?\\d*\\.\\d+%?",ff="(?:".concat(Qie,")|(?:").concat(Jie,")"),vP="[\\s|\\(]+(".concat(ff,")[,|\\s]+(").concat(ff,")[,|\\s]+(").concat(ff,")\\s*\\)?"),yP="[\\s|\\(]+(".concat(ff,")[,|\\s]+(").concat(ff,")[,|\\s]+(").concat(ff,")[,|\\s]+(").concat(ff,")\\s*\\)?"),ql={CSS_UNIT:new RegExp(ff),rgb:new RegExp("rgb"+vP),rgba:new RegExp("rgba"+yP),hsl:new RegExp("hsl"+vP),hsla:new RegExp("hsla"+yP),hsv:new RegExp("hsv"+vP),hsva:new RegExp("hsva"+yP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function eoe(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(vO[t])t=vO[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=ql.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=ql.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ql.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=ql.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ql.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=ql.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ql.hex8.exec(t),n?{r:Ba(n[1]),g:Ba(n[2]),b:Ba(n[3]),a:h2(n[4]),format:e?"name":"hex8"}:(n=ql.hex6.exec(t),n?{r:Ba(n[1]),g:Ba(n[2]),b:Ba(n[3]),format:e?"name":"hex"}:(n=ql.hex4.exec(t),n?{r:Ba(n[1]+n[1]),g:Ba(n[2]+n[2]),b:Ba(n[3]+n[3]),a:h2(n[4]+n[4]),format:e?"name":"hex8"}:(n=ql.hex3.exec(t),n?{r:Ba(n[1]+n[1]),g:Ba(n[2]+n[2]),b:Ba(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function Iu(t){return!!ql.CSS_UNIT.exec(String(t))}var Ro=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=Kie(e)),this.originalInput=e;var i=tg(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,i,o=e.r/255,l=e.g/255,f=e.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),l<=.03928?r=l/12.92:r=Math.pow((l+.055)/1.055,2.4),f<=.03928?i=f/12.92:i=Math.pow((f+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=mH(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=mO(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=mO(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=f2(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=f2(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),gO(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),Yie(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(gs(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(gs(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+gO(this.r,this.g,this.b,!1),n=0,r=Object.entries(vO);n<r.length;n++){var i=r[n],o=i[0],l=i[1];if(e===l)return o}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,o=!n&&i&&(e.startsWith("hex")||e==="name");return o?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=rw(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=rw(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=rw(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=rw(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),i=new t(e).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new t(l)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(new t(r));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,l=[],f=1/e;e--;)l.push(new t({h:r,s:i,v:o})),o=(o+f)%1;return l},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),i=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,i=[this],o=360/e,l=1;l<e;l++)i.push(new t({h:(r+l*o)%360,s:n.s,l:n.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}(),ow=2,p2=.16,toe=.05,noe=.05,roe=.15,gH=5,vH=4,ioe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function m2(t){var e=t.r,n=t.g,r=t.b,i=mO(e,n,r);return{h:i.h*360,s:i.s,v:i.v}}function sw(t){var e=t.r,n=t.g,r=t.b;return"#".concat(gO(e,n,r,!1))}function ooe(t,e,n){var r=n/100,i={r:(e.r-t.r)*r+t.r,g:(e.g-t.g)*r+t.g,b:(e.b-t.b)*r+t.b};return i}function g2(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-ow*e:Math.round(t.h)+ow*e:r=n?Math.round(t.h)+ow*e:Math.round(t.h)-ow*e,r<0?r+=360:r>=360&&(r-=360),r}function v2(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-p2*e:e===vH?r=t.s+p2:r=t.s+toe*e,r>1&&(r=1),n&&e===gH&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function y2(t,e,n){var r;return n?r=t.v+noe*e:r=t.v-roe*e,r>1&&(r=1),Number(r.toFixed(2))}function W_(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=tg(t),i=gH;i>0;i-=1){var o=m2(r),l=sw(tg({h:g2(o,i,!0),s:v2(o,i,!0),v:y2(o,i,!0)}));n.push(l)}n.push(sw(r));for(var f=1;f<=vH;f+=1){var s=m2(r),p=sw(tg({h:g2(s,f),s:v2(s,f),v:y2(s,f)}));n.push(p)}return e.theme==="dark"?ioe.map(function(v){var x=v.index,S=v.opacity,M=sw(ooe(tg(e.backgroundColor||"#141414"),tg(n[x]),S*100));return M}):n}var _P={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},yO=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];yO.primary=yO[5];var _O=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];_O.primary=_O[5];var bO=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];bO.primary=bO[5];var xO=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];xO.primary=xO[5];var wO=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];wO.primary=wO[5];var SO=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];SO.primary=SO[5];var EO=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];EO.primary=EO[5];var CO=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];CO.primary=CO[5];var SE=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];SE.primary=SE[5];var TO=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];TO.primary=TO[5];var AO=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];AO.primary=AO[5];var MO=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];MO.primary=MO[5];var PO=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];PO.primary=PO[5];var bP={red:yO,volcano:_O,orange:bO,gold:xO,yellow:wO,lime:SO,green:EO,cyan:CO,blue:SE,geekblue:TO,purple:AO,magenta:MO,grey:PO};function _2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xs(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function IO(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var b2="data-rc-order",x2="data-rc-priority",soe="rc-util-key",RO=new Map;function yH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):soe}function UC(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function aoe(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function AD(t){return Array.from((RO.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function _H(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xs())return null;var n=e.csp,r=e.prepend,i=e.priority,o=i===void 0?0:i,l=aoe(r),f=l==="prependQueue",s=document.createElement("style");s.setAttribute(b2,l),f&&o&&s.setAttribute(x2,"".concat(o)),n!=null&&n.nonce&&(s.nonce=n==null?void 0:n.nonce),s.innerHTML=t;var p=UC(e),v=p.firstChild;if(r){if(f){var x=(e.styles||AD(p)).filter(function(S){if(!["prepend","prependQueue"].includes(S.getAttribute(b2)))return!1;var M=Number(S.getAttribute(x2)||0);return o>=M});if(x.length)return p.insertBefore(s,x[x.length-1].nextSibling),s}p.insertBefore(s,v)}else p.appendChild(s);return s}function bH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=UC(e);return(e.styles||AD(n)).find(function(r){return r.getAttribute(yH(e))===t})}function X_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=bH(t,e);if(n){var r=UC(e);r.removeChild(n)}}function loe(t,e){var n=RO.get(t);if(!n||!IO(document,n)){var r=_H("",e),i=r.parentNode;RO.set(t,i),t.removeChild(r)}}function Yu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=UC(n),i=AD(r),o=Ye(Ye({},n),{},{styles:i});loe(r,o);var l=bH(e,o);if(l){var f,s;if((f=o.csp)!==null&&f!==void 0&&f.nonce&&l.nonce!==((s=o.csp)===null||s===void 0?void 0:s.nonce)){var p;l.nonce=(p=o.csp)===null||p===void 0?void 0:p.nonce}return l.innerHTML!==t&&(l.innerHTML=t),l}var v=_H(t,o);return v.setAttribute(yH(o),e),v}function xH(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function coe(t){return xH(t)instanceof ShadowRoot}function EE(t){return coe(t)?xH(t):null}var OO={},uoe=function(e){};function doe(t,e){}function foe(t,e){}function hoe(){OO={}}function wH(t,e,n){!e&&!OO[n]&&(t(!1,n),OO[n]=!0)}function vs(t,e){wH(doe,t,e)}function poe(t,e){wH(foe,t,e)}vs.preMessage=uoe;vs.resetWarned=hoe;vs.noteOnce=poe;function moe(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function LO(t,e){vs(t,"[@ant-design/icons] ".concat(e))}function w2(t){return Kn(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Kn(t.icon)==="object"||typeof t.icon=="function")}function S2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[moe(n)]=r}return e},{})}function BO(t,e,n){return n?Tt.createElement(t.tag,Ye(Ye({key:e},S2(t.attrs)),n),(t.children||[]).map(function(r,i){return BO(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):Tt.createElement(t.tag,Ye({key:e},S2(t.attrs)),(t.children||[]).map(function(r,i){return BO(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function SH(t){return W_(t)[0]}function EH(t){return t?Array.isArray(t)?t:[t]:[]}var goe={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},voe=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,CH=function(e){var n=E.useContext(jC),r=n.csp,i=n.prefixCls,o=voe;i&&(o=o.replace(/anticon/g,i)),E.useEffect(function(){var l=e.current,f=EE(l);Yu(o,"@ant-design-icons",{prepend:!0,csp:r,attachTo:f})},[])},yoe=["icon","className","onClick","style","primaryColor","secondaryColor"],l_={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function _oe(t){var e=t.primaryColor,n=t.secondaryColor;l_.primaryColor=e,l_.secondaryColor=n||SH(e),l_.calculated=!!n}function boe(){return Ye({},l_)}var VC=function(e){var n=e.icon,r=e.className,i=e.onClick,o=e.style,l=e.primaryColor,f=e.secondaryColor,s=Hr(e,yoe),p=E.useRef(),v=l_;if(l&&(v={primaryColor:l,secondaryColor:f||SH(l)}),CH(p),LO(w2(n),"icon should be icon definiton, but got ".concat(n)),!w2(n))return null;var x=n;return x&&typeof x.icon=="function"&&(x=Ye(Ye({},x),{},{icon:x.icon(v.primaryColor,v.secondaryColor)})),BO(x.icon,"svg-".concat(x.name),Ye(Ye({className:r,onClick:i,style:o,"data-icon":x.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:p}))};VC.displayName="IconReact";VC.getTwoToneColors=boe;VC.setTwoToneColors=_oe;const MD=VC;function TH(t){var e=EH(t),n=ct(e,2),r=n[0],i=n[1];return MD.setTwoToneColors({primaryColor:r,secondaryColor:i})}function xoe(){var t=MD.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var woe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];TH(SE.primary);var GC=E.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,o=t.rotate,l=t.tabIndex,f=t.onClick,s=t.twoToneColor,p=Hr(t,woe),v=E.useContext(jC),x=v.prefixCls,S=x===void 0?"anticon":x,M=v.rootClassName,P=At(M,S,j(j({},"".concat(S,"-").concat(r.name),!!r.name),"".concat(S,"-spin"),!!i||r.name==="loading"),n),R=l;R===void 0&&f&&(R=-1);var D=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,B=EH(s),O=ct(B,2),k=O[0],$=O[1];return E.createElement("span",Mn({role:"img","aria-label":r.name},p,{ref:e,tabIndex:R,onClick:f,className:P}),E.createElement(MD,{icon:r,primaryColor:k,secondaryColor:$,style:D}))});GC.displayName="AntdIcon";GC.getTwoToneColor=xoe;GC.setTwoToneColor=TH;const Go=GC;var Soe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const Eoe=Soe;var Coe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Eoe}))},Toe=E.forwardRef(Coe);const PD=Toe;var Aoe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const Moe=Aoe;var Poe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Moe}))},Ioe=E.forwardRef(Poe);const Roe=Ioe;var Ooe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const Loe=Ooe;var Boe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Loe}))},Doe=E.forwardRef(Boe);const $b=Doe;var koe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const Foe=koe;var zoe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Foe}))},Noe=E.forwardRef(zoe);const jb=Noe;var $oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"};const joe=$oe;var Uoe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:joe}))},Voe=E.forwardRef(Uoe);const E2=Voe;var Goe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const Hoe=Goe;var Woe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Hoe}))},Xoe=E.forwardRef(Woe);const AH=Xoe;var qoe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const Yoe=qoe;var Zoe=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Yoe}))},Koe=E.forwardRef(Zoe);const Joe=Koe;var Qoe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const ese=Qoe;var tse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:ese}))},nse=E.forwardRef(tse);const ID=nse;var rse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const ise=rse;var ose=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:ise}))},sse=E.forwardRef(ose);const ase=sse;var lse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const cse=lse;var use=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:cse}))},dse=E.forwardRef(use);const fse=dse;var hse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const pse=hse;var mse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:pse}))},gse=E.forwardRef(mse);const MH=gse;var vse={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const yse=vse;var _se=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:yse}))},bse=E.forwardRef(_se);const HC=bse;var xse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"};const wse=xse;var Sse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:wse}))},Ese=E.forwardRef(Sse);const Cse=Ese;var Tse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};const Ase=Tse;var Mse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Ase}))},Pse=E.forwardRef(Mse);const Ise=Pse;var Rse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const Ose=Rse;var Lse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Ose}))},Bse=E.forwardRef(Lse);const Dse=Bse;var kse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const Fse=kse;var zse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Fse}))},Nse=E.forwardRef(zse);const PH=Nse;var $se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const jse=$se;var Use=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:jse}))},Vse=E.forwardRef(Use);const Gse=Vse;var Hse={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M347.6 528.95l383.2 301.02c14.25 11.2 35.2 1.1 35.2-16.95V210.97c0-18.05-20.95-28.14-35.2-16.94L347.6 495.05a21.53 21.53 0 000 33.9M330 864h-64a8 8 0 01-8-8V168a8 8 0 018-8h64a8 8 0 018 8v688a8 8 0 01-8 8"}}]},name:"step-backward",theme:"outlined"};const Wse=Hse;var Xse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Wse}))},qse=E.forwardRef(Xse);const Yse=qse;var Zse={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M676.4 528.95L293.2 829.97c-14.25 11.2-35.2 1.1-35.2-16.95V210.97c0-18.05 20.95-28.14 35.2-16.94l383.2 301.02a21.53 21.53 0 010 33.9M694 864h64a8 8 0 008-8V168a8 8 0 00-8-8h-64a8 8 0 00-8 8v688a8 8 0 008 8"}}]},name:"step-forward",theme:"outlined"};const Kse=Zse;var Jse=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:Kse}))},Qse=E.forwardRef(Jse);const eae=Qse;var tae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const nae=tae;var rae=function(e,n){return E.createElement(Go,Mn({},e,{ref:n,icon:nae}))},iae=E.forwardRef(rae);const oae=iae;var IH={exports:{}},Bi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD=Symbol.for("react.element"),OD=Symbol.for("react.portal"),WC=Symbol.for("react.fragment"),XC=Symbol.for("react.strict_mode"),qC=Symbol.for("react.profiler"),YC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),sae=Symbol.for("react.server_context"),KC=Symbol.for("react.forward_ref"),JC=Symbol.for("react.suspense"),QC=Symbol.for("react.suspense_list"),eT=Symbol.for("react.memo"),tT=Symbol.for("react.lazy"),aae=Symbol.for("react.offscreen"),RH;RH=Symbol.for("react.module.reference");function Tl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RD:switch(t=t.type,t){case WC:case qC:case XC:case JC:case QC:return t;default:switch(t=t&&t.$$typeof,t){case sae:case ZC:case KC:case tT:case eT:case YC:return t;default:return e}}case OD:return e}}}Bi.ContextConsumer=ZC;Bi.ContextProvider=YC;Bi.Element=RD;Bi.ForwardRef=KC;Bi.Fragment=WC;Bi.Lazy=tT;Bi.Memo=eT;Bi.Portal=OD;Bi.Profiler=qC;Bi.StrictMode=XC;Bi.Suspense=JC;Bi.SuspenseList=QC;Bi.isAsyncMode=function(){return!1};Bi.isConcurrentMode=function(){return!1};Bi.isContextConsumer=function(t){return Tl(t)===ZC};Bi.isContextProvider=function(t){return Tl(t)===YC};Bi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RD};Bi.isForwardRef=function(t){return Tl(t)===KC};Bi.isFragment=function(t){return Tl(t)===WC};Bi.isLazy=function(t){return Tl(t)===tT};Bi.isMemo=function(t){return Tl(t)===eT};Bi.isPortal=function(t){return Tl(t)===OD};Bi.isProfiler=function(t){return Tl(t)===qC};Bi.isStrictMode=function(t){return Tl(t)===XC};Bi.isSuspense=function(t){return Tl(t)===JC};Bi.isSuspenseList=function(t){return Tl(t)===QC};Bi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WC||t===qC||t===XC||t===JC||t===QC||t===aae||typeof t=="object"&&t!==null&&(t.$$typeof===tT||t.$$typeof===eT||t.$$typeof===YC||t.$$typeof===ZC||t.$$typeof===KC||t.$$typeof===RH||t.getModuleId!==void 0)};Bi.typeOf=Tl;IH.exports=Bi;var c_=IH.exports;function nT(t,e,n){var r=E.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var LD=function(e,n){typeof e=="function"?e(n):Kn(e)==="object"&&e&&"current"in e&&(e.current=n)},Al=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);return i.length<=1?i[0]:function(o){n.forEach(function(l){LD(l,o)})}},xv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return nT(function(){return Al.apply(void 0,n)},n,function(i,o){return i.length!==o.length||i.every(function(l,f){return l!==o[f]})})},wv=function(e){var n,r,i=c_.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==c_.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==c_.ForwardRef)};function C2(t){return E.isValidElement(t)&&!c_.isFragment(t)}Number(E.version.split(".")[0])>=19;var lae=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],OH=E.forwardRef(function(t,e){var n=t.className,r=t.component,i=t.viewBox,o=t.spin,l=t.rotate,f=t.tabIndex,s=t.onClick,p=t.children,v=Hr(t,lae),x=E.useRef(),S=xv(x,e);LO(!!(r||p),"Should have `component` prop or `children`."),CH(x);var M=E.useContext(jC),P=M.prefixCls,R=P===void 0?"anticon":P,D=M.rootClassName,B=At(D,R,j({},"".concat(R,"-spin"),!!o&&!!r),n),O=At(j({},"".concat(R,"-spin"),!!o)),k=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,$=Ye(Ye({},goe),{},{className:O,style:k,viewBox:i});i||delete $.viewBox;var H=function(){return r?E.createElement(r,$,p):p?(LO(!!i||E.Children.count(p)===1&&E.isValidElement(p)&&E.Children.only(p).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),E.createElement("svg",Mn({},$,{viewBox:i}),p)):null},U=f;return U===void 0&&s&&(U=-1),E.createElement("span",Mn({role:"img"},v,{ref:S,tabIndex:U,onClick:s,className:B}),H())});OH.displayName="AntdIcon";const cae=OH;var uae=["type","children"],LH=new Set;function dae(t){return!!(typeof t=="string"&&t.length&&!LH.has(t))}function CE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t[e];if(dae(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),t.length>e+1&&(r.onload=function(){CE(t,e+1)},r.onerror=function(){CE(t,e+1)}),LH.add(n),document.body.appendChild(r)}}function fae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.scriptUrl,n=t.extraCommonProps,r=n===void 0?{}:n;e&&typeof document<"u"&&typeof window<"u"&&typeof document.createElement=="function"&&(Array.isArray(e)?CE(e.reverse()):CE([e]));var i=E.forwardRef(function(o,l){var f=o.type,s=o.children,p=Hr(o,uae),v=null;return o.type&&(v=E.createElement("use",{xlinkHref:"#".concat(f)})),s&&(v=s),E.createElement(cae,Mn({},r,p,{ref:l}),v)});return i.displayName="Iconfont",i}function zf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Tt.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(zf(r)):c_.isFragment(r)&&r.props?n=n.concat(zf(r.props.children,e)):n.push(r))}),n}function q_(t){return t instanceof HTMLElement||t instanceof SVGElement}function BH(t){return t&&Kn(t)==="object"&&q_(t.nativeElement)?t.nativeElement:q_(t)?t:null}function u_(t){var e=BH(t);if(e)return e;if(t instanceof Tt.Component){var n;return(n=hO.findDOMNode)===null||n===void 0?void 0:n.call(hO,t)}return null}var DO=E.createContext(null);function hae(t){var e=t.children,n=t.onBatchResize,r=E.useRef(0),i=E.useRef([]),o=E.useContext(DO),l=E.useCallback(function(f,s,p){r.current+=1;var v=r.current;i.current.push({size:f,element:s,data:p}),Promise.resolve().then(function(){v===r.current&&(n==null||n(i.current),i.current=[])}),o==null||o(f,s,p)},[n,o]);return E.createElement(DO.Provider,{value:l},e)}var DH=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];n.call(r,l[1],l[0])}},e}()}(),kO=typeof window<"u"&&typeof document<"u"&&window.document===document,TE=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),pae=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(TE):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),mae=2;function gae(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&f()}function l(){pae(o)}function f(){var s=Date.now();if(n){if(s-i<mae)return;r=!0}else n=!0,r=!1,setTimeout(l,e);i=s}return f}var vae=20,yae=["top","right","bottom","left","width","height","size","weight"],_ae=typeof MutationObserver<"u",bae=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=gae(this.refresh.bind(this),vae)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!kO||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),_ae?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!kO||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=yae.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),kH=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Qg=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||TE},FH=rT(0,0,0,0);function AE(t){return parseFloat(t)||0}function T2(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var o=t["border-"+i+"-width"];return r+AE(o)},0)}function xae(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],l=t["padding-"+o];n[o]=AE(l)}return n}function wae(t){var e=t.getBBox();return rT(0,0,e.width,e.height)}function Sae(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return FH;var r=Qg(t).getComputedStyle(t),i=xae(r),o=i.left+i.right,l=i.top+i.bottom,f=AE(r.width),s=AE(r.height);if(r.boxSizing==="border-box"&&(Math.round(f+o)!==e&&(f-=T2(r,"left","right")+o),Math.round(s+l)!==n&&(s-=T2(r,"top","bottom")+l)),!Cae(t)){var p=Math.round(f+o)-e,v=Math.round(s+l)-n;Math.abs(p)!==1&&(f-=p),Math.abs(v)!==1&&(s-=v)}return rT(i.left,i.top,f,s)}var Eae=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Qg(t).SVGGraphicsElement}:function(t){return t instanceof Qg(t).SVGElement&&typeof t.getBBox=="function"}}();function Cae(t){return t===Qg(t).document.documentElement}function Tae(t){return kO?Eae(t)?wae(t):Sae(t):FH}function Aae(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return kH(l,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),l}function rT(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Mae=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=rT(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Tae(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Pae=function(){function t(e,n){var r=Aae(n);kH(this,{target:e,contentRect:r})}return t}(),Iae=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new DH,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qg(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new Mae(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qg(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Pae(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),zH=typeof WeakMap<"u"?new WeakMap:new DH,NH=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=bae.getInstance(),r=new Iae(e,n,this);zH.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){NH.prototype[t]=function(){var e;return(e=zH.get(this))[t].apply(e,arguments)}});var $H=function(){return typeof TE.ResizeObserver<"u"?TE.ResizeObserver:NH}(),hf=new Map;function Rae(t){t.forEach(function(e){var n,r=e.target;(n=hf.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var jH=new $H(Rae);function Oae(t,e){hf.has(t)||(hf.set(t,new Set),jH.observe(t)),hf.get(t).add(e)}function Lae(t,e){hf.has(t)&&(hf.get(t).delete(e),hf.get(t).size||(jH.unobserve(t),hf.delete(t)))}function Di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hH(r.key),r)}}function ki(t,e,n){return e&&A2(t.prototype,e),n&&A2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y_(t,e){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Y_(t,e)}function Sc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}function yc(t){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yc(t)}function BD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BD=function(){return!!t})()}function wr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iT(t,e){if(e&&(Kn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wr(t)}function Gf(t){var e=BD();return function(){var n,r=yc(t);if(e){var i=yc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iT(this,n)}}var Bae=function(t){Sc(n,t);var e=Gf(n);function n(){return Di(this,n),e.apply(this,arguments)}return ki(n,[{key:"render",value:function(){return this.props.children}}]),n}(E.Component);function Dae(t,e){var n=t.children,r=t.disabled,i=E.useRef(null),o=E.useRef(null),l=E.useContext(DO),f=typeof n=="function",s=f?n(i):n,p=E.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),v=!f&&E.isValidElement(s)&&wv(s),x=v?s.ref:null,S=xv(x,i),M=function(){var B;return u_(i.current)||(i.current&&Kn(i.current)==="object"?u_((B=i.current)===null||B===void 0?void 0:B.nativeElement):null)||u_(o.current)};E.useImperativeHandle(e,function(){return M()});var P=E.useRef(t);P.current=t;var R=E.useCallback(function(D){var B=P.current,O=B.onResize,k=B.data,$=D.getBoundingClientRect(),H=$.width,U=$.height,X=D.offsetWidth,J=D.offsetHeight,K=Math.floor(H),Q=Math.floor(U);if(p.current.width!==K||p.current.height!==Q||p.current.offsetWidth!==X||p.current.offsetHeight!==J){var ce={width:K,height:Q,offsetWidth:X,offsetHeight:J};p.current=ce;var ge=X===Math.round(H)?H:X,ae=J===Math.round(U)?U:J,ve=Ye(Ye({},ce),{},{offsetWidth:ge,offsetHeight:ae});l==null||l(ve,D,k),O&&Promise.resolve().then(function(){O(ve,D)})}},[]);return E.useEffect(function(){var D=M();return D&&!r&&Oae(D,R),function(){return Lae(D,R)}},[i.current,r]),E.createElement(Bae,{ref:o},v?E.cloneElement(s,{ref:S}):s)}var kae=E.forwardRef(Dae),Fae="rc-observer-key";function zae(t,e){var n=t.children,r=typeof n=="function"?[n]:zf(n);return r.map(function(i,o){var l=(i==null?void 0:i.key)||"".concat(Fae,"-").concat(o);return E.createElement(kae,Mn({},t,{key:l,ref:o===0?e:void 0}),i)})}var Hf=E.forwardRef(zae);Hf.Collection=hae;function Ml(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}function Nae(t){if(Array.isArray(t))return pO(t)}function UH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sn(t){return Nae(t)||UH(t)||TD(t)||$ae()}var VH=function(e){return+setTimeout(e,16)},GH=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(VH=function(e){return window.requestAnimationFrame(e)},GH=function(e){return window.cancelAnimationFrame(e)});var M2=0,DD=new Map;function HH(t){DD.delete(t)}var gi=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;M2+=1;var r=M2;function i(o){if(o===0)HH(r),e();else{var l=VH(function(){i(o-1)});DD.set(r,l)}}return i(n),r};gi.cancel=function(t){var e=DD.get(t);return HH(t),GH(e)};function Z_(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function ME(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(o,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=r.has(o);if(vs(!s,"Warning: There may be circular references"),s)return!1;if(o===l)return!0;if(n&&f>1)return!1;r.add(o);var p=f+1;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var v=0;v<o.length;v++)if(!i(o[v],l[v],p))return!1;return!0}if(o&&l&&Kn(o)==="object"&&Kn(l)==="object"){var x=Object.keys(o);return x.length!==Object.keys(l).length?!1:x.every(function(S){return i(o[S],l[S],p)})}return!1}return i(t,e)}var jae="%";function FO(t){return t.join(jae)}var Uae=function(){function t(e){Di(this,t),j(this,"instanceId",void 0),j(this,"cache",new Map),this.instanceId=e}return ki(t,[{key:"get",value:function(n){return this.opGet(FO(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(FO(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),o=r(i);o===null?this.cache.delete(n):this.cache.set(n,o)}}]),t}(),ev="data-token-hash",pc="data-css-hash",pf="__cssinjs_instance__";function Vae(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(pc,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(i){i[pf]=i[pf]||t,i[pf]===t&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(pc,"]"))).forEach(function(i){var o=i.getAttribute(pc);if(r[o]){if(i[pf]===t){var l;(l=i.parentNode)===null||l===void 0||l.removeChild(i)}}else r[o]=!0})}return new Uae(t)}var oT=E.createContext({hashPriority:"low",cache:Vae(),defaultCache:!0});function Gae(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var kD=function(){function t(){Di(this,t),j(this,"cache",void 0),j(this,"keys",void 0),j(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ki(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l={map:this.cache};return n.forEach(function(f){if(!l)l=void 0;else{var s;l=(s=l)===null||s===void 0||(s=s.map)===null||s===void 0?void 0:s.get(f)}}),(r=l)!==null&&r!==void 0&&r.value&&o&&(l.value[1]=this.cacheCallTimes++),(i=l)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var o=this.keys.reduce(function(p,v){var x=ct(p,2),S=x[1];return i.internalGet(v)[1]<S?[v,i.internalGet(v)[1]]:p},[this.keys[0],this.cacheCallTimes]),l=ct(o,1),f=l[0];this.delete(f)}this.keys.push(n)}var s=this.cache;n.forEach(function(p,v){if(v===n.length-1)s.set(p,{value:[r,i.cacheCallTimes++]});else{var x=s.get(p);x?x.map||(x.map=new Map):s.set(p,{map:new Map}),s=s.get(p).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var o;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(o=i.value)===null||o===void 0?void 0:o[0]}var l=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),l}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!Gae(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();j(kD,"MAX_CACHE_SIZE",20);j(kD,"MAX_CACHE_OFFSET",5);var P2=0,WH=function(){function t(e){Di(this,t),j(this,"derivatives",void 0),j(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=P2,e.length===0&&(e.length>0,void 0),P2+=1}return ki(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),t}(),xP=new kD;function zO(t){var e=Array.isArray(t)?t:[t];return xP.has(e)||xP.set(e,new WH(e)),xP.get(e)}var Hae=new WeakMap,wP={};function Wae(t,e){for(var n=Hae,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(wP)||n.set(wP,t()),n.get(wP)}var I2=new WeakMap;function d_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=I2.get(t)||"";return n||(Object.keys(t).forEach(function(r){var i=t[r];n+=r,i instanceof WH?n+=i.id:i&&Kn(i)==="object"?n+=d_(i,e):n+=i}),e&&(n=Z_(n)),I2.set(t,n)),n}function R2(t,e){return Z_("".concat(e,"_").concat(d_(t,!0)))}var NO=Xs();function Kt(t){return typeof t=="number"?"".concat(t,"px"):t}function PE(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(i)return t;var o=Ye(Ye({},r),{},j(j({},ev,e),pc,n)),l=Object.keys(o).map(function(f){var s=o[f];return s?"".concat(f,'="').concat(s,'"'):null}).filter(function(f){return f}).join(" ");return"<style ".concat(l,">").concat(t,"</style>")}var fS=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},Xae=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(i){var o=ct(i,2),l=o[0],f=o[1];return"".concat(l,":").concat(f,";")}).join(""),"}"):""},XH=function(e,n,r){var i={},o={};return Object.entries(e).forEach(function(l){var f,s,p=ct(l,2),v=p[0],x=p[1];if(r!=null&&(f=r.preserve)!==null&&f!==void 0&&f[v])o[v]=x;else if((typeof x=="string"||typeof x=="number")&&!(r!=null&&(s=r.ignore)!==null&&s!==void 0&&s[v])){var S,M=fS(v,r==null?void 0:r.prefix);i[M]=typeof x=="number"&&!(r!=null&&(S=r.unitless)!==null&&S!==void 0&&S[v])?"".concat(x,"px"):String(x),o[v]="var(".concat(M,")")}}),[o,Xae(i,n,{scope:r==null?void 0:r.scope})]},O2=Xs()?E.useLayoutEffect:E.useEffect,Ji=function(e,n){var r=E.useRef(!0);O2(function(){return e(r.current)},n),O2(function(){return r.current=!1,function(){r.current=!0}},[])},f_=function(e,n){Ji(function(r){if(!r)return e()},n)},qae=Ye({},Db),L2=qae.useInsertionEffect,Yae=function(e,n,r){E.useMemo(e,r),Ji(function(){return n(!0)},r)},Zae=L2?function(t,e,n){return L2(function(){return t(),e()},n)}:Yae,Kae=Ye({},Db),Jae=Kae.useInsertionEffect,Qae=function(e){var n=[],r=!1;function i(o){r||n.push(o)}return E.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(o){return o()})}},e),i},ele=function(){return function(e){e()}},tle=typeof Jae<"u"?Qae:ele;function FD(t,e,n,r,i){var o=E.useContext(oT),l=o.cache,f=[t].concat(sn(e)),s=FO(f),p=tle([s]),v=function(P){l.opUpdate(s,function(R){var D=R||[void 0,void 0],B=ct(D,2),O=B[0],k=O===void 0?0:O,$=B[1],H=$,U=H||n(),X=[k,U];return P?P(X):X})};E.useMemo(function(){v()},[s]);var x=l.opGet(s),S=x[1];return Zae(function(){i==null||i(S)},function(M){return v(function(P){var R=ct(P,2),D=R[0],B=R[1];return M&&D===0&&(i==null||i(S)),[D+1,B]}),function(){l.opUpdate(s,function(P){var R=P||[],D=ct(R,2),B=D[0],O=B===void 0?0:B,k=D[1],$=O-1;return $===0?(p(function(){(M||!l.opGet(s))&&(r==null||r(k,!1))}),null):[O-1,k]})}},[s]),S}var nle={},rle="css",kh=new Map;function ile(t){kh.set(t,(kh.get(t)||0)+1)}function ole(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(ev,'="').concat(t,'"]'));n.forEach(function(r){if(r[pf]===e){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var sle=0;function ale(t,e){kh.set(t,(kh.get(t)||0)-1);var n=Array.from(kh.keys()),r=n.filter(function(i){var o=kh.get(i)||0;return o<=0});n.length-r.length>sle&&r.forEach(function(i){ole(i,e),kh.delete(i)})}var lle=function(e,n,r,i){var o=r.getDerivativeToken(e),l=Ye(Ye({},o),n);return i&&(l=i(l)),l},qH="token";function cle(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=E.useContext(oT),i=r.cache.instanceId,o=r.container,l=n.salt,f=l===void 0?"":l,s=n.override,p=s===void 0?nle:s,v=n.formatToken,x=n.getComputedToken,S=n.cssVar,M=Wae(function(){return Object.assign.apply(Object,[{}].concat(sn(e)))},e),P=d_(M),R=d_(p),D=S?d_(S):"",B=FD(qH,[f,t.id,P,R,D],function(){var O,k=x?x(M,p,t):lle(M,p,t,v),$=Ye({},k),H="";if(S){var U=XH(k,S.key,{prefix:S.prefix,ignore:S.ignore,unitless:S.unitless,preserve:S.preserve}),X=ct(U,2);k=X[0],H=X[1]}var J=R2(k,f);k._tokenKey=J,$._tokenKey=R2($,f);var K=(O=S==null?void 0:S.key)!==null&&O!==void 0?O:J;k._themeKey=K,ile(K);var Q="".concat(rle,"-").concat(Z_(J));return k._hashId=Q,[k,Q,$,H,(S==null?void 0:S.key)||""]},function(O){ale(O[0]._themeKey,i)},function(O){var k=ct(O,4),$=k[0],H=k[3];if(S&&H){var U=Yu(H,Z_("css-variables-".concat($._themeKey)),{mark:pc,prepend:"queue",attachTo:o,priority:-999});U[pf]=i,U.setAttribute(ev,$._themeKey)}});return B}var ule=function(e,n,r){var i=ct(e,5),o=i[2],l=i[3],f=i[4],s=r||{},p=s.plain;if(!l)return null;var v=o._tokenKey,x=-999,S={"data-rc-order":"prependQueue","data-rc-priority":"".concat(x)},M=PE(l,f,v,S,p);return[x,v,M]},dle={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YH="comm",ZH="rule",KH="decl",fle="@import",hle="@keyframes",ple="@layer",JH=Math.abs,zD=String.fromCharCode;function QH(t){return t.trim()}function hS(t,e,n){return t.replace(e,n)}function mle(t,e,n){return t.indexOf(e,n)}function K_(t,e){return t.charCodeAt(e)|0}function tv(t,e,n){return t.slice(e,n)}function Yc(t){return t.length}function gle(t){return t.length}function aw(t,e){return e.push(t),t}var sT=1,nv=1,eW=0,Cl=0,Uo=0,Sv="";function ND(t,e,n,r,i,o,l,f){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:sT,column:nv,length:l,return:"",siblings:f}}function vle(){return Uo}function yle(){return Uo=Cl>0?K_(Sv,--Cl):0,nv--,Uo===10&&(nv=1,sT--),Uo}function mc(){return Uo=Cl<eW?K_(Sv,Cl++):0,nv++,Uo===10&&(nv=1,sT++),Uo}function mf(){return K_(Sv,Cl)}function pS(){return Cl}function aT(t,e){return tv(Sv,t,e)}function J_(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _le(t){return sT=nv=1,eW=Yc(Sv=t),Cl=0,[]}function ble(t){return Sv="",t}function SP(t){return QH(aT(Cl-1,$O(t===91?t+2:t===40?t+1:t)))}function xle(t){for(;(Uo=mf())&&Uo<33;)mc();return J_(t)>2||J_(Uo)>3?"":" "}function wle(t,e){for(;--e&&mc()&&!(Uo<48||Uo>102||Uo>57&&Uo<65||Uo>70&&Uo<97););return aT(t,pS()+(e<6&&mf()==32&&mc()==32))}function $O(t){for(;mc();)switch(Uo){case t:return Cl;case 34:case 39:t!==34&&t!==39&&$O(Uo);break;case 40:t===41&&$O(t);break;case 92:mc();break}return Cl}function Sle(t,e){for(;mc()&&t+Uo!==57;)if(t+Uo===84&&mf()===47)break;return"/*"+aT(e,Cl-1)+"*"+zD(t===47?t:mc())}function Ele(t){for(;!J_(mf());)mc();return aT(t,Cl)}function Cle(t){return ble(mS("",null,null,null,[""],t=_le(t),0,[0],t))}function mS(t,e,n,r,i,o,l,f,s){for(var p=0,v=0,x=l,S=0,M=0,P=0,R=1,D=1,B=1,O=0,k="",$=i,H=o,U=r,X=k;D;)switch(P=O,O=mc()){case 40:if(P!=108&&K_(X,x-1)==58){mle(X+=hS(SP(O),"&","&\f"),"&\f",JH(p?f[p-1]:0))!=-1&&(B=-1);break}case 34:case 39:case 91:X+=SP(O);break;case 9:case 10:case 13:case 32:X+=xle(P);break;case 92:X+=wle(pS()-1,7);continue;case 47:switch(mf()){case 42:case 47:aw(Tle(Sle(mc(),pS()),e,n,s),s),(J_(P||1)==5||J_(mf()||1)==5)&&Yc(X)&&tv(X,-1,void 0)!==" "&&(X+=" ");break;default:X+="/"}break;case 123*R:f[p++]=Yc(X)*B;case 125*R:case 59:case 0:switch(O){case 0:case 125:D=0;case 59+v:B==-1&&(X=hS(X,/\f/g,"")),M>0&&(Yc(X)-x||R===0&&P===47)&&aw(M>32?D2(X+";",r,n,x-1,s):D2(hS(X," ","")+";",r,n,x-2,s),s);break;case 59:X+=";";default:if(aw(U=B2(X,e,n,p,v,i,f,k,$=[],H=[],x,o),o),O===123)if(v===0)mS(X,e,U,U,$,o,x,f,H);else switch(S===99&&K_(X,3)===110?100:S){case 100:case 108:case 109:case 115:mS(t,U,U,r&&aw(B2(t,U,U,0,0,i,f,k,i,$=[],x,H),H),i,H,x,f,r?$:H);break;default:mS(X,U,U,U,[""],H,0,f,H)}}p=v=M=0,R=B=1,k=X="",x=l;break;case 58:x=1+Yc(X),M=P;default:if(R<1){if(O==123)--R;else if(O==125&&R++==0&&yle()==125)continue}switch(X+=zD(O),O*R){case 38:B=v>0?1:(X+="\f",-1);break;case 44:f[p++]=(Yc(X)-1)*B,B=1;break;case 64:mf()===45&&(X+=SP(mc())),S=mf(),v=x=Yc(k=X+=Ele(pS())),O++;break;case 45:P===45&&Yc(X)==2&&(R=0)}}return o}function B2(t,e,n,r,i,o,l,f,s,p,v,x){for(var S=i-1,M=i===0?o:[""],P=gle(M),R=0,D=0,B=0;R<r;++R)for(var O=0,k=tv(t,S+1,S=JH(D=l[R])),$=t;O<P;++O)($=QH(D>0?M[O]+" "+k:hS(k,/&\f/g,M[O])))&&(s[B++]=$);return ND(t,e,n,i===0?ZH:f,s,p,v,x)}function Tle(t,e,n,r){return ND(t,e,n,YH,zD(vle()),tv(t,2,-2),0,r)}function D2(t,e,n,r,i){return ND(t,e,n,KH,tv(t,0,r),tv(t,r+1,-1),r,i)}function jO(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Ale(t,e,n,r){switch(t.type){case ple:if(t.children.length)break;case fle:case KH:return t.return=t.return||t.value;case YH:return"";case hle:return t.return=t.value+"{"+jO(t.children,r)+"}";case ZH:if(!Yc(t.value=t.props.join(",")))return""}return Yc(n=jO(t.children,r))?t.return=t.value+"{"+n+"}":""}var k2="data-ant-cssinjs-cache-path",tW="_FILE_STYLE__",sp,nW=!0;function Mle(){if(!sp&&(sp={},Xs())){var t=document.createElement("div");t.className=k2,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var o=i.split(":"),l=ct(o,2),f=l[0],s=l[1];sp[f]=s});var n=document.querySelector("style[".concat(k2,"]"));if(n){var r;nW=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function Ple(t){return Mle(),!!sp[t]}function Ile(t){var e=sp[t],n=null;if(e&&Xs())if(nW)n=tW;else{var r=document.querySelector("style[".concat(pc,'="').concat(sp[t],'"]'));r?n=r.innerHTML:delete sp[t]}return[n,e]}var Rle="_skip_check_",rW="_multi_value_";function gS(t){var e=jO(Cle(t),Ale);return e.replace(/\{%%%\:[^;];}/g,";")}function Ole(t){return Kn(t)==="object"&&t&&(Rle in t||rW in t)}function F2(t,e,n){if(!e)return t;var r=".".concat(e),i=n==="low"?":where(".concat(r,")"):r,o=t.split(",").map(function(l){var f,s=l.trim().split(/\s+/),p=s[0]||"",v=((f=p.match(/^\w+/))===null||f===void 0?void 0:f[0])||"";return p="".concat(v).concat(i).concat(p.slice(v.length)),[p].concat(sn(s.slice(1))).join(" ")});return o.join(",")}var Lle=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,l=r.parentSelectors,f=n.hashId,s=n.layer;n.path;var p=n.hashPriority,v=n.transformers,x=v===void 0?[]:v;n.linters;var S="",M={};function P(B){var O=B.getName(f);if(!M[O]){var k=t(B.style,n,{root:!1,parentSelectors:l}),$=ct(k,1),H=$[0];M[O]="@keyframes ".concat(B.getName(f)).concat(H)}}function R(B){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return B.forEach(function(k){Array.isArray(k)?R(k,O):k&&O.push(k)}),O}var D=R(Array.isArray(e)?e:[e]);return D.forEach(function(B){var O=typeof B=="string"&&!i?{}:B;if(typeof O=="string")S+="".concat(O,`
`);else if(O._keyframe)P(O);else{var k=x.reduce(function($,H){var U;return(H==null||(U=H.visit)===null||U===void 0?void 0:U.call(H,$))||$},O);Object.keys(k).forEach(function($){var H=k[$];if(Kn(H)==="object"&&H&&($!=="animationName"||!H._keyframe)&&!Ole(H)){var U=!1,X=$.trim(),J=!1;(i||o)&&f?X.startsWith("@")?U=!0:X==="&"?X=F2("",f,p):X=F2($,f,p):i&&!f&&(X==="&"||X==="")&&(X="",J=!0);var K=t(H,n,{root:J,injectHash:U,parentSelectors:[].concat(sn(l),[X])}),Q=ct(K,2),ce=Q[0],ge=Q[1];M=Ye(Ye({},M),ge),S+="".concat(X).concat(ce)}else{let Fe=function(Ae,pe){var fe=Ae.replace(/[A-Z]/g,function(Re){return"-".concat(Re.toLowerCase())}),xe=pe;!dle[Ae]&&typeof xe=="number"&&xe!==0&&(xe="".concat(xe,"px")),Ae==="animationName"&&pe!==null&&pe!==void 0&&pe._keyframe&&(P(pe),xe=pe.getName(f)),S+="".concat(fe,":").concat(xe,";")};var ae,ve=(ae=H==null?void 0:H.value)!==null&&ae!==void 0?ae:H;Kn(H)==="object"&&H!==null&&H!==void 0&&H[rW]&&Array.isArray(ve)?ve.forEach(function(Ae){Fe($,Ae)}):Fe($,ve)}})}}),i?s&&(S="@layer ".concat(s.name," {").concat(S,"}"),s.dependencies&&(M["@layer ".concat(s.name)]=s.dependencies.map(function(B){return"@layer ".concat(B,", ").concat(s.name,";")}).join(`
`))):S="{".concat(S,"}"),[S,M]};function iW(t,e){return Z_("".concat(t.join("%")).concat(e))}function Ble(){return null}var oW="style";function UO(t,e){var n=t.token,r=t.path,i=t.hashId,o=t.layer,l=t.nonce,f=t.clientOnly,s=t.order,p=s===void 0?0:s,v=E.useContext(oT),x=v.autoClear;v.mock;var S=v.defaultCache,M=v.hashPriority,P=v.container,R=v.ssrInline,D=v.transformers,B=v.linters,O=v.cache,k=v.layer,$=n._tokenKey,H=[$];k&&H.push("layer"),H.push.apply(H,sn(r));var U=NO,X=FD(oW,H,function(){var ge=H.join("|");if(Ple(ge)){var ae=Ile(ge),ve=ct(ae,2),Fe=ve[0],Ae=ve[1];if(Fe)return[Fe,$,Ae,{},f,p]}var pe=e(),fe=Lle(pe,{hashId:i,hashPriority:M,layer:k?o:void 0,path:r.join("-"),transformers:D,linters:B}),xe=ct(fe,2),Re=xe[0],ke=xe[1],ze=gS(Re),Xe=iW(H,ze);return[ze,$,Xe,ke,f,p]},function(ge,ae){var ve=ct(ge,3),Fe=ve[2];(ae||x)&&NO&&X_(Fe,{mark:pc})},function(ge){var ae=ct(ge,4),ve=ae[0];ae[1];var Fe=ae[2],Ae=ae[3];if(U&&ve!==tW){var pe={mark:pc,prepend:k?!1:"queue",attachTo:P,priority:p},fe=typeof l=="function"?l():l;fe&&(pe.csp={nonce:fe});var xe=[],Re=[];Object.keys(Ae).forEach(function(ze){ze.startsWith("@layer")?xe.push(ze):Re.push(ze)}),xe.forEach(function(ze){Yu(gS(Ae[ze]),"_layer-".concat(ze),Ye(Ye({},pe),{},{prepend:!0}))});var ke=Yu(ve,Fe,pe);ke[pf]=O.instanceId,ke.setAttribute(ev,$),Re.forEach(function(ze){Yu(gS(Ae[ze]),"_effect-".concat(ze),pe)})}}),J=ct(X,3),K=J[0],Q=J[1],ce=J[2];return function(ge){var ae;return!R||U||!S?ae=E.createElement(Ble,null):ae=E.createElement("style",Mn({},j(j({},ev,Q),pc,ce),{dangerouslySetInnerHTML:{__html:K}})),E.createElement(E.Fragment,null,ae,ge)}}var Dle=function(e,n,r){var i=ct(e,6),o=i[0],l=i[1],f=i[2],s=i[3],p=i[4],v=i[5],x=r||{},S=x.plain;if(p)return null;var M=o,P={"data-rc-order":"prependQueue","data-rc-priority":"".concat(v)};return M=PE(o,l,f,P,S),s&&Object.keys(s).forEach(function(R){if(!n[R]){n[R]=!0;var D=gS(s[R]),B=PE(D,l,"_effect-".concat(R),P,S);R.startsWith("@layer")?M=B+M:M+=B}}),[v,f,M]},sW="cssVar",kle=function(e,n){var r=e.key,i=e.prefix,o=e.unitless,l=e.ignore,f=e.token,s=e.scope,p=s===void 0?"":s,v=E.useContext(oT),x=v.cache.instanceId,S=v.container,M=f._tokenKey,P=[].concat(sn(e.path),[r,p,M]),R=FD(sW,P,function(){var D=n(),B=XH(D,r,{prefix:i,unitless:o,ignore:l,scope:p}),O=ct(B,2),k=O[0],$=O[1],H=iW(P,$);return[k,$,H,r]},function(D){var B=ct(D,3),O=B[2];NO&&X_(O,{mark:pc})},function(D){var B=ct(D,3),O=B[1],k=B[2];if(O){var $=Yu(O,k,{mark:pc,prepend:"queue",attachTo:S,priority:-999});$[pf]=x,$.setAttribute(ev,r)}});return R},Fle=function(e,n,r){var i=ct(e,4),o=i[1],l=i[2],f=i[3],s=r||{},p=s.plain;if(!o)return null;var v=-999,x={"data-rc-order":"prependQueue","data-rc-priority":"".concat(v)},S=PE(o,f,l,x,p);return[v,l,S]};j(j(j({},oW,Dle),qH,ule),sW,Fle);var ai=function(){function t(e,n){Di(this,t),j(this,"name",void 0),j(this,"style",void 0),j(this,"_keyframe",!0),this.name=e,this.style=n}return ki(t,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),t}();function Bm(t){return t.notSplit=!0,t}Bm(["borderTop","borderBottom"]),Bm(["borderTop"]),Bm(["borderBottom"]),Bm(["borderLeft","borderRight"]),Bm(["borderLeft"]),Bm(["borderRight"]);function aW(t){return dH(t)||UH(t)||TD(t)||fH()}function Qc(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function lW(t,e,n,r){if(!e.length)return n;var i=aW(e),o=i[0],l=i.slice(1),f;return!t&&typeof o=="number"?f=[]:Array.isArray(t)?f=sn(t):f=Ye({},t),r&&n===void 0&&l.length===1?delete f[o][l[0]]:f[o]=lW(f[o],l,n,r),f}function ec(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!Qc(t,e.slice(0,-1))?t:lW(t,e,n,r)}function zle(t){return Kn(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function z2(t){return Array.isArray(t)?[]:{}}var Nle=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function _g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=z2(e[0]);return e.forEach(function(i){function o(l,f){var s=new Set(f),p=Qc(i,l),v=Array.isArray(p);if(v||zle(p)){if(!s.has(p)){s.add(p);var x=Qc(r,l);v?r=ec(r,l,[]):(!x||Kn(x)!=="object")&&(r=ec(r,l,z2(p))),Nle(p).forEach(function(S){o([].concat(sn(l),[S]),s)})}}else r=ec(r,l,p)}o([])}),r}function $le(){}const jle=E.createContext({}),lT=()=>{const t=()=>{};return t.deprecated=$le,t},cW=E.createContext(void 0);var Ule={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},Vle={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},Gle=Ye(Ye({},Vle),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const Hle={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},uW=Hle,Wle={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Gle),timePickerLocale:Object.assign({},uW)},N2=Wle,Aa="${label} is not a valid ${type}",Nf={locale:"en",Pagination:Ule,DatePicker:N2,TimePicker:uW,Calendar:N2,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Aa,method:Aa,array:Aa,object:Aa,number:Aa,date:Aa,boolean:Aa,integer:Aa,float:Aa,regexp:Aa,email:Aa,url:Aa,hex:Aa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let vS=Object.assign({},Nf.Modal),yS=[];const $2=()=>yS.reduce((t,e)=>Object.assign(Object.assign({},t),e),Nf.Modal);function Xle(t){if(t){const e=Object.assign({},t);return yS.push(e),vS=$2(),()=>{yS=yS.filter(n=>n!==e),vS=$2()}}vS=Object.assign({},Nf.Modal)}function dW(){return vS}const qle=E.createContext(void 0),$D=qle,Ub=(t,e)=>{const n=E.useContext($D),r=E.useMemo(()=>{var o;const l=e||Nf[t],f=(o=n==null?void 0:n[t])!==null&&o!==void 0?o:{};return Object.assign(Object.assign({},typeof l=="function"?l():l),f||{})},[t,e,n]),i=E.useMemo(()=>{const o=n==null?void 0:n.locale;return n!=null&&n.exist&&!o?Nf.locale:o},[n]);return[r,i]},Yle="internalMark",Zle=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;E.useEffect(()=>Xle(e==null?void 0:e.Modal),[e]);const i=E.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return E.createElement($D.Provider,{value:i},n)},Kle=Zle,fW={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Jle=Object.assign(Object.assign({},fW),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Q_=Jle;function Qle(t,e){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=e;const{colorSuccess:i,colorWarning:o,colorError:l,colorInfo:f,colorPrimary:s,colorBgBase:p,colorTextBase:v}=t,x=n(s),S=n(i),M=n(o),P=n(l),R=n(f),D=r(p,v),B=t.colorLink||t.colorInfo,O=n(B),k=new Ro(P[1]).mix(new Ro(P[3]),50).toHexString();return Object.assign(Object.assign({},D),{colorPrimaryBg:x[1],colorPrimaryBgHover:x[2],colorPrimaryBorder:x[3],colorPrimaryBorderHover:x[4],colorPrimaryHover:x[5],colorPrimary:x[6],colorPrimaryActive:x[7],colorPrimaryTextHover:x[8],colorPrimaryText:x[9],colorPrimaryTextActive:x[10],colorSuccessBg:S[1],colorSuccessBgHover:S[2],colorSuccessBorder:S[3],colorSuccessBorderHover:S[4],colorSuccessHover:S[4],colorSuccess:S[6],colorSuccessActive:S[7],colorSuccessTextHover:S[8],colorSuccessText:S[9],colorSuccessTextActive:S[10],colorErrorBg:P[1],colorErrorBgHover:P[2],colorErrorBgFilledHover:k,colorErrorBgActive:P[3],colorErrorBorder:P[3],colorErrorBorderHover:P[4],colorErrorHover:P[5],colorError:P[6],colorErrorActive:P[7],colorErrorTextHover:P[8],colorErrorText:P[9],colorErrorTextActive:P[10],colorWarningBg:M[1],colorWarningBgHover:M[2],colorWarningBorder:M[3],colorWarningBorderHover:M[4],colorWarningHover:M[4],colorWarning:M[6],colorWarningActive:M[7],colorWarningTextHover:M[8],colorWarningText:M[9],colorWarningTextActive:M[10],colorInfoBg:R[1],colorInfoBgHover:R[2],colorInfoBorder:R[3],colorInfoBorderHover:R[4],colorInfoHover:R[4],colorInfo:R[6],colorInfoActive:R[7],colorInfoTextHover:R[8],colorInfoText:R[9],colorInfoTextActive:R[10],colorLinkHover:O[4],colorLink:O[6],colorLinkActive:O[7],colorBgMask:new Ro("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const ece=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}};function tce(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:i+1},ece(r))}const nce=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function _S(t){return(t+8)/t}function rce(t){const e=new Array(10).fill(null).map((n,r)=>{const i=r-1,o=t*Math.pow(Math.E,i/5),l=r>1?Math.floor(o):Math.ceil(o);return Math.floor(l/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:_S(n)}))}const ice=t=>{const e=rce(t),n=e.map(v=>v.size),r=e.map(v=>v.lineHeight),i=n[1],o=n[0],l=n[2],f=r[1],s=r[0],p=r[2];return{fontSizeSM:o,fontSize:i,fontSizeLG:l,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:f,lineHeightLG:p,lineHeightSM:s,fontHeight:Math.round(f*i),fontHeightLG:Math.round(p*l),fontHeightSM:Math.round(s*o),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function oce(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const ll=(t,e)=>new Ro(t).setAlpha(e).toRgbString(),g0=(t,e)=>new Ro(t).darken(e).toHexString(),sce=t=>{const e=W_(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},ace=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:ll(r,.88),colorTextSecondary:ll(r,.65),colorTextTertiary:ll(r,.45),colorTextQuaternary:ll(r,.25),colorFill:ll(r,.15),colorFillSecondary:ll(r,.06),colorFillTertiary:ll(r,.04),colorFillQuaternary:ll(r,.02),colorBgSolid:ll(r,1),colorBgSolidHover:ll(r,.75),colorBgSolidActive:ll(r,.95),colorBgLayout:g0(n,4),colorBgContainer:g0(n,0),colorBgElevated:g0(n,0),colorBgSpotlight:ll(r,.85),colorBgBlur:"transparent",colorBorder:g0(n,15),colorBorderSecondary:g0(n,6)}};function lce(t){_P.pink=_P.magenta,bP.pink=bP.magenta;const e=Object.keys(fW).map(n=>{const r=t[n]===_P[n]?bP[n]:W_(t[n]);return new Array(10).fill(1).reduce((i,o,l)=>(i[`${n}-${l+1}`]=r[l],i[`${n}${l+1}`]=r[l],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),Qle(t,{generateColorPalettes:sce,generateNeutralColorPalettes:ace})),ice(t.fontSize)),oce(t)),nce(t)),tce(t))}const hW=zO(lce),VO={token:Q_,override:{override:Q_},hashed:!0},pW=Tt.createContext(VO),eb="ant",jD="anticon",cce=["outlined","borderless","filled"],uce=(t,e)=>e||(t?`${eb}-${t}`:eb),Sr=E.createContext({getPrefixCls:uce,iconPrefixCls:jD}),dce=`-ant-${Date.now()}-${Math.random()}`;function fce(t,e){const n={},r=(l,f)=>{let s=l.clone();return s=(f==null?void 0:f(s))||s,s.toRgbString()},i=(l,f)=>{const s=new Ro(l),p=W_(s.toRgbString());n[`${f}-color`]=r(s),n[`${f}-color-disabled`]=p[1],n[`${f}-color-hover`]=p[4],n[`${f}-color-active`]=p[6],n[`${f}-color-outline`]=s.clone().setAlpha(.2).toRgbString(),n[`${f}-color-deprecated-bg`]=p[0],n[`${f}-color-deprecated-border`]=p[2]};if(e.primaryColor){i(e.primaryColor,"primary");const l=new Ro(e.primaryColor),f=W_(l.toRgbString());f.forEach((p,v)=>{n[`primary-${v+1}`]=p}),n["primary-color-deprecated-l-35"]=r(l,p=>p.lighten(35)),n["primary-color-deprecated-l-20"]=r(l,p=>p.lighten(20)),n["primary-color-deprecated-t-20"]=r(l,p=>p.tint(20)),n["primary-color-deprecated-t-50"]=r(l,p=>p.tint(50)),n["primary-color-deprecated-f-12"]=r(l,p=>p.setAlpha(p.getAlpha()*.12));const s=new Ro(f[0]);n["primary-color-active-deprecated-f-30"]=r(s,p=>p.setAlpha(p.getAlpha()*.3)),n["primary-color-active-deprecated-d-02"]=r(s,p=>p.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(l=>`--${t}-${l}: ${n[l]};`).join(`
`)}
  }
  `.trim()}function hce(t,e){const n=fce(t,e);Xs()&&Yu(n,`${dce}-dynamic-theme`)}const GO=E.createContext(!1),UD=t=>{let{children:e,disabled:n}=t;const r=E.useContext(GO);return E.createElement(GO.Provider,{value:n??r},e)},du=GO,HO=E.createContext(void 0),pce=t=>{let{children:e,size:n}=t;const r=E.useContext(HO);return E.createElement(HO.Provider,{value:n||r},e)},Vb=HO;function mce(){const t=E.useContext(du),e=E.useContext(Vb);return{componentDisabled:t,componentSize:e}}var mW=ki(function t(){Di(this,t)}),gW="CALC_UNIT",gce=new RegExp(gW,"g");function EP(t){return typeof t=="number"?"".concat(t).concat(gW):t}var vce=function(t){Sc(n,t);var e=Gf(n);function n(r,i){var o;Di(this,n),o=e.call(this),j(wr(o),"result",""),j(wr(o),"unitlessCssVar",void 0),j(wr(o),"lowPriority",void 0);var l=Kn(r);return o.unitlessCssVar=i,r instanceof n?o.result="(".concat(r.result,")"):l==="number"?o.result=EP(r):l==="string"&&(o.result=r),o}return ki(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(EP(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(EP(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var o=this,l=i||{},f=l.unit,s=!0;return typeof f=="boolean"?s=f:Array.from(this.unitlessCssVar).some(function(p){return o.result.includes(p)})&&(s=!1),this.result=this.result.replace(gce,s?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(mW),yce=function(t){Sc(n,t);var e=Gf(n);function n(r){var i;return Di(this,n),i=e.call(this),j(wr(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return ki(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(mW),_ce=function(e,n){var r=e==="css"?vce:yce;return function(i){return new r(i,n)}},j2=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function xo(t){var e=E.useRef();e.current=t;var n=E.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(o))},[]);return n}function mp(t){var e=E.useRef(!1),n=E.useState(t),r=ct(n,2),i=r[0],o=r[1];E.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function l(f,s){s&&e.current||o(f)}return[i,l]}function CP(t){return t!==void 0}function au(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,l=n.postState,f=mp(function(){return CP(i)?i:CP(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),s=ct(f,2),p=s[0],v=s[1],x=i!==void 0?i:p,S=l?l(x):x,M=xo(o),P=mp([x]),R=ct(P,2),D=R[0],B=R[1];f_(function(){var k=D[0];p!==k&&M(p,k)},[D]),f_(function(){CP(i)||v(i)},[i]);var O=xo(function(k,$){v(k,$),B([x],$)});return[S,O]}function U2(t,e,n,r){var i=Ye({},e[t]);if(r!=null&&r.deprecatedTokens){var o=r.deprecatedTokens;o.forEach(function(f){var s=ct(f,2),p=s[0],v=s[1];if(i!=null&&i[p]||i!=null&&i[v]){var x;(x=i[v])!==null&&x!==void 0||(i[v]=i==null?void 0:i[p])}})}var l=Ye(Ye({},n),i);return Object.keys(l).forEach(function(f){l[f]===e[f]&&delete l[f]}),l}var vW=typeof CSSINJS_STATISTIC<"u",WO=!0;function $i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!vW)return Object.assign.apply(Object,[{}].concat(e));WO=!1;var r={};return e.forEach(function(i){if(Kn(i)==="object"){var o=Object.keys(i);o.forEach(function(l){Object.defineProperty(r,l,{configurable:!0,enumerable:!0,get:function(){return i[l]}})})}}),WO=!0,r}var V2={};function bce(){}var xce=function(e){var n,r=e,i=bce;return vW&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(l,f){if(WO){var s;(s=n)===null||s===void 0||s.add(f)}return l[f]}}),i=function(l,f){var s;V2[l]={global:Array.from(n),component:Ye(Ye({},(s=V2[l])===null||s===void 0?void 0:s.component),f)}}),{token:r,keys:n,flush:i}};function G2(t,e,n){if(typeof n=="function"){var r;return n($i(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function wce(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(o){return Kt(o)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(o){return Kt(o)}).join(","),")")}}}var Sce=1e3*60*10,Ece=function(){function t(){Di(this,t),j(this,"map",new Map),j(this,"objectIDMap",new WeakMap),j(this,"nextID",0),j(this,"lastAccessBeat",new Map),j(this,"accessBeat",0)}return ki(t,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(o){return o&&Kn(o)==="object"?"obj_".concat(r.getObjectID(o)):"".concat(Kn(o),"_").concat(o)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,o){r-i>Sce&&(n.map.delete(o),n.lastAccessBeat.delete(o))}),this.accessBeat=0}}}]),t}(),H2=new Ece;function Cce(t,e){return Tt.useMemo(function(){var n=H2.get(e);if(n)return n;var r=t();return H2.set(e,r),r},e)}var Tce=function(){return{}};function Ace(t){var e=t.useCSP,n=e===void 0?Tce:e,r=t.useToken,i=t.usePrefix,o=t.getResetStyles,l=t.getCommonStyle,f=t.getCompUnitless;function s(S,M,P,R){var D=Array.isArray(S)?S[0]:S;function B(J){return"".concat(String(D)).concat(J.slice(0,1).toUpperCase()).concat(J.slice(1))}var O=(R==null?void 0:R.unitless)||{},k=typeof f=="function"?f(S):{},$=Ye(Ye({},k),{},j({},B("zIndexPopup"),!0));Object.keys(O).forEach(function(J){$[B(J)]=O[J]});var H=Ye(Ye({},R),{},{unitless:$,prefixToken:B}),U=v(S,M,P,H),X=p(D,P,H);return function(J){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J,Q=U(J,K),ce=ct(Q,2),ge=ce[1],ae=X(K),ve=ct(ae,2),Fe=ve[0],Ae=ve[1];return[Fe,ge,Ae]}}function p(S,M,P){var R=P.unitless,D=P.injectStyle,B=D===void 0?!0:D,O=P.prefixToken,k=P.ignore,$=function(X){var J=X.rootCls,K=X.cssVar,Q=K===void 0?{}:K,ce=r(),ge=ce.realToken;return kle({path:[S],prefix:Q.prefix,key:Q.key,unitless:R,ignore:k,token:ge,scope:J},function(){var ae=G2(S,ge,M),ve=U2(S,ge,ae,{deprecatedTokens:P==null?void 0:P.deprecatedTokens});return Object.keys(ae).forEach(function(Fe){ve[O(Fe)]=ve[Fe],delete ve[Fe]}),ve}),null},H=function(X){var J=r(),K=J.cssVar;return[function(Q){return B&&K?Tt.createElement(Tt.Fragment,null,Tt.createElement($,{rootCls:X,cssVar:K,component:S}),Q):Q},K==null?void 0:K.key]};return H}function v(S,M,P){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},D=Array.isArray(S)?S:[S,S],B=ct(D,1),O=B[0],k=D.join("-"),$=t.layer||{name:"antd"};return function(H){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H,X=r(),J=X.theme,K=X.realToken,Q=X.hashId,ce=X.token,ge=X.cssVar,ae=i(),ve=ae.rootPrefixCls,Fe=ae.iconPrefixCls,Ae=n(),pe=ge?"css":"js",fe=Cce(function(){var Ne=new Set;return ge&&Object.keys(R.unitless||{}).forEach(function(Qe){Ne.add(fS(Qe,ge.prefix)),Ne.add(fS(Qe,j2(O,ge.prefix)))}),_ce(pe,Ne)},[pe,O,ge==null?void 0:ge.prefix]),xe=wce(pe),Re=xe.max,ke=xe.min,ze={theme:J,token:ce,hashId:Q,nonce:function(){return Ae.nonce},clientOnly:R.clientOnly,layer:$,order:R.order||-999};UO(Ye(Ye({},ze),{},{clientOnly:!1,path:["Shared",ve]}),function(){return typeof o=="function"?o(ce):[]});var Xe=UO(Ye(Ye({},ze),{},{path:[k,H,Fe]}),function(){if(R.injectStyle===!1)return[];var Ne=xce(ce),Qe=Ne.token,pt=Ne.flush,Ke=G2(O,K,P),ot=".".concat(H),St=U2(O,K,Ke,{deprecatedTokens:R.deprecatedTokens});ge&&Ke&&Kn(Ke)==="object"&&Object.keys(Ke).forEach(function(Rt){Ke[Rt]="var(".concat(fS(Rt,j2(O,ge.prefix)),")")});var st=$i(Qe,{componentCls:ot,prefixCls:H,iconCls:".".concat(Fe),antCls:".".concat(ve),calc:fe,max:Re,min:ke},ge?Ke:St),rt=M(st,{hashId:Q,prefixCls:H,rootPrefixCls:ve,iconPrefixCls:Fe});pt(O,St);var lt=typeof l=="function"?l(st,H,U,R.resetFont):null;return[R.resetStyle===!1?null:lt,rt]});return[Xe,Q]}}function x(S,M,P){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},D=v(S,M,P,Ye({resetStyle:!1,order:-998},R)),B=function(k){var $=k.prefixCls,H=k.rootCls,U=H===void 0?$:H;return D($,U),null};return B}return{genStyleHooks:s,genSubStyleComponent:x,genComponentStyleHook:v}}const IE=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],Mce="5.21.1";function TP(t){return t>=0&&t<=255}function lw(t,e){const{r:n,g:r,b:i,a:o}=new Ro(t).toRgb();if(o<1)return t;const{r:l,g:f,b:s}=new Ro(e).toRgb();for(let p=.01;p<=1;p+=.01){const v=Math.round((n-l*(1-p))/p),x=Math.round((r-f*(1-p))/p),S=Math.round((i-s*(1-p))/p);if(TP(v)&&TP(x)&&TP(S))return new Ro({r:v,g:x,b:S,a:Math.round(p*100)/100}).toRgbString()}return new Ro({r:n,g:r,b:i,a:1}).toRgbString()}var Pce=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function yW(t){const{override:e}=t,n=Pce(t,["override"]),r=Object.assign({},e);Object.keys(Q_).forEach(S=>{delete r[S]});const i=Object.assign(Object.assign({},n),r),o=480,l=576,f=768,s=992,p=1200,v=1600;if(i.motion===!1){const S="0s";i.motionDurationFast=S,i.motionDurationMid=S,i.motionDurationSlow=S}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:lw(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:lw(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:lw(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*4,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:lw(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:l-1,screenSM:l,screenSMMin:l,screenSMMax:f-1,screenMD:f,screenMDMin:f,screenMDMax:s-1,screenLG:s,screenLGMin:s,screenLGMax:p-1,screenXL:p,screenXLMin:p,screenXLMax:v-1,screenXXL:v,screenXXLMin:v,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ro("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ro("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ro("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var W2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _W={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},Ice={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},Rce={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},bW=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:i}=e,o=W2(e,["override"]);let l=Object.assign(Object.assign({},r),{override:i});return l=yW(l),o&&Object.entries(o).forEach(f=>{let[s,p]=f;const{theme:v}=p,x=W2(p,["theme"]);let S=x;v&&(S=bW(Object.assign(Object.assign({},l),x),{override:x},v)),l[s]=S}),l};function Ja(){const{token:t,hashed:e,theme:n,override:r,cssVar:i}=Tt.useContext(pW),o=`${Mce}-${e||""}`,l=n||hW,[f,s,p]=cle(l,[Q_,t],{salt:o,override:r,getComputedToken:bW,formatToken:yW,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:_W,ignore:Ice,preserve:Rce}});return[l,p,e?s:"",f,i]}const XO={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ys=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}},cT=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),xW=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),Oce=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),Lce=(t,e,n,r)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,o=n?`.${n}`:i,l={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let f={};return r!==!1&&(f={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},f),l),{[i]:l})}},wW=t=>({outline:`${Kt(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),SW=t=>({"&:focus-visible":Object.assign({},wW(t))}),EW=(t,e)=>{const[n,r]=Ja();return UO({theme:n,token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[{[`.${t}`]:Object.assign(Object.assign({},cT()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},{genStyleHooks:Ss,genComponentStyleHook:Bce,genSubStyleComponent:VD}=Ace({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=E.useContext(Sr);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,i]=Ja();return{theme:t,realToken:e,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:t,iconPrefixCls:e}=E.useContext(Sr);return EW(e,t),t??{}},getResetStyles:t=>[{"&":Oce(t)}],getCommonStyle:Lce,getCompUnitless:()=>_W});function Dce(t,e){return IE.reduce((n,r)=>{const i=t[`${r}1`],o=t[`${r}3`],l=t[`${r}6`],f=t[`${r}7`];return Object.assign(Object.assign({},n),e(r,{lightColor:i,lightBorderColor:o,darkColor:l,textColor:f}))},{})}const kce=Object.assign({},Db),{useId:X2}=kce,Fce=()=>"",zce=typeof X2>"u"?Fce:X2;function Nce(t,e,n){var r;lT();const i=t||{},o=i.inherit===!1||!e?Object.assign(Object.assign({},VO),{hashed:(r=e==null?void 0:e.hashed)!==null&&r!==void 0?r:VO.hashed,cssVar:e==null?void 0:e.cssVar}):e,l=zce();return nT(()=>{var f,s;if(!t)return e;const p=Object.assign({},o.components);Object.keys(t.components||{}).forEach(S=>{p[S]=Object.assign(Object.assign({},p[S]),t.components[S])});const v=`css-var-${l.replace(/:/g,"")}`,x=((f=i.cssVar)!==null&&f!==void 0?f:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof o.cssVar=="object"?o.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((s=i.cssVar)===null||s===void 0?void 0:s.key)||v});return Object.assign(Object.assign(Object.assign({},o),i),{token:Object.assign(Object.assign({},o.token),i.token),components:p,cssVar:x})},[i,o],(f,s)=>f.some((p,v)=>{const x=s[v];return!ME(p,x,!0)}))}var $ce=["children"],CW=E.createContext({});function jce(t){var e=t.children,n=Hr(t,$ce);return E.createElement(CW.Provider,{value:n},e)}var Uce=function(t){Sc(n,t);var e=Gf(n);function n(){return Di(this,n),e.apply(this,arguments)}return ki(n,[{key:"render",value:function(){return this.props.children}}]),n}(E.Component);function Vce(t){var e=E.useReducer(function(f){return f+1},0),n=ct(e,2),r=n[1],i=E.useRef(t),o=xo(function(){return i.current}),l=xo(function(f){i.current=typeof f=="function"?f(i.current):f,r()});return[o,l]}var ef="none",cw="appear",uw="enter",dw="leave",q2="none",tc="prepare",bg="start",xg="active",GD="end",TW="prepared";function Y2(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function Gce(t,e){var n={animationend:Y2("Animation","AnimationEnd"),transitionend:Y2("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var Hce=Gce(Xs(),typeof window<"u"?window:{}),AW={};if(Xs()){var Wce=document.createElement("div");AW=Wce.style}var fw={};function MW(t){if(fw[t])return fw[t];var e=Hce[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in AW)return fw[t]=e[o],fw[t]}return""}var PW=MW("animationend"),IW=MW("transitionend"),RW=!!(PW&&IW),Z2=PW||"animationend",K2=IW||"transitionend";function J2(t,e){if(!t)return null;if(Kn(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const Xce=function(t){var e=E.useRef();function n(i){i&&(i.removeEventListener(K2,t),i.removeEventListener(Z2,t))}function r(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(K2,t),i.addEventListener(Z2,t),e.current=i)}return E.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var OW=Xs()?E.useLayoutEffect:E.useEffect;const qce=function(){var t=E.useRef(null);function e(){gi.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=gi(function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)});t.current=o}return E.useEffect(function(){return function(){e()}},[]),[n,e]};var Yce=[tc,bg,xg,GD],Zce=[tc,TW],LW=!1,Kce=!0;function BW(t){return t===xg||t===GD}const Jce=function(t,e,n){var r=mp(q2),i=ct(r,2),o=i[0],l=i[1],f=qce(),s=ct(f,2),p=s[0],v=s[1];function x(){l(tc,!0)}var S=e?Zce:Yce;return OW(function(){if(o!==q2&&o!==GD){var M=S.indexOf(o),P=S[M+1],R=n(o);R===LW?l(P,!0):P&&p(function(D){function B(){D.isCanceled()||l(P,!0)}R===!0?B():Promise.resolve(R).then(B)})}},[t,o]),E.useEffect(function(){return function(){v()}},[]),[x,o]};function Qce(t,e,n,r){var i=r.motionEnter,o=i===void 0?!0:i,l=r.motionAppear,f=l===void 0?!0:l,s=r.motionLeave,p=s===void 0?!0:s,v=r.motionDeadline,x=r.motionLeaveImmediately,S=r.onAppearPrepare,M=r.onEnterPrepare,P=r.onLeavePrepare,R=r.onAppearStart,D=r.onEnterStart,B=r.onLeaveStart,O=r.onAppearActive,k=r.onEnterActive,$=r.onLeaveActive,H=r.onAppearEnd,U=r.onEnterEnd,X=r.onLeaveEnd,J=r.onVisibleChanged,K=mp(),Q=ct(K,2),ce=Q[0],ge=Q[1],ae=Vce(ef),ve=ct(ae,2),Fe=ve[0],Ae=ve[1],pe=mp(null),fe=ct(pe,2),xe=fe[0],Re=fe[1],ke=Fe(),ze=E.useRef(!1),Xe=E.useRef(null);function Ne(){return n()}var Qe=E.useRef(!1);function pt(){Ae(ef),Re(null,!0)}var Ke=xo(function(rn){var zt=Fe();if(zt!==ef){var bn=Ne();if(!(rn&&!rn.deadline&&rn.target!==bn)){var Ot=Qe.current,Nt;zt===cw&&Ot?Nt=H==null?void 0:H(bn,rn):zt===uw&&Ot?Nt=U==null?void 0:U(bn,rn):zt===dw&&Ot&&(Nt=X==null?void 0:X(bn,rn)),Ot&&Nt!==!1&&pt()}}}),ot=Xce(Ke),St=ct(ot,1),st=St[0],rt=function(zt){switch(zt){case cw:return j(j(j({},tc,S),bg,R),xg,O);case uw:return j(j(j({},tc,M),bg,D),xg,k);case dw:return j(j(j({},tc,P),bg,B),xg,$);default:return{}}},lt=E.useMemo(function(){return rt(ke)},[ke]),Rt=Jce(ke,!t,function(rn){if(rn===tc){var zt=lt[tc];return zt?zt(Ne()):LW}if(it in lt){var bn;Re(((bn=lt[it])===null||bn===void 0?void 0:bn.call(lt,Ne(),null))||null)}return it===xg&&ke!==ef&&(st(Ne()),v>0&&(clearTimeout(Xe.current),Xe.current=setTimeout(function(){Ke({deadline:!0})},v))),it===TW&&pt(),Kce}),bt=ct(Rt,2),wt=bt[0],it=bt[1],Bt=BW(it);Qe.current=Bt,OW(function(){ge(e);var rn=ze.current;ze.current=!0;var zt;!rn&&e&&f&&(zt=cw),rn&&e&&o&&(zt=uw),(rn&&!e&&p||!rn&&x&&!e&&p)&&(zt=dw);var bn=rt(zt);zt&&(t||bn[tc])?(Ae(zt),wt()):Ae(ef)},[e]),E.useEffect(function(){(ke===cw&&!f||ke===uw&&!o||ke===dw&&!p)&&Ae(ef)},[f,o,p]),E.useEffect(function(){return function(){ze.current=!1,clearTimeout(Xe.current)}},[]);var jt=E.useRef(!1);E.useEffect(function(){ce&&(jt.current=!0),ce!==void 0&&ke===ef&&((jt.current||ce)&&(J==null||J(ce)),jt.current=!0)},[ce,ke]);var cn=xe;return lt[tc]&&it===bg&&(cn=Ye({transition:"none"},cn)),[ke,it,cn,ce??e]}function eue(t){var e=t;Kn(t)==="object"&&(e=t.transitionSupport);function n(i,o){return!!(i.motionName&&e&&o!==!1)}var r=E.forwardRef(function(i,o){var l=i.visible,f=l===void 0?!0:l,s=i.removeOnLeave,p=s===void 0?!0:s,v=i.forceRender,x=i.children,S=i.motionName,M=i.leavedClassName,P=i.eventProps,R=E.useContext(CW),D=R.motion,B=n(i,D),O=E.useRef(),k=E.useRef();function $(){try{return O.current instanceof HTMLElement?O.current:u_(k.current)}catch{return null}}var H=Qce(B,f,$,i),U=ct(H,4),X=U[0],J=U[1],K=U[2],Q=U[3],ce=E.useRef(Q);Q&&(ce.current=!0);var ge=E.useCallback(function(xe){O.current=xe,LD(o,xe)},[o]),ae,ve=Ye(Ye({},P),{},{visible:f});if(!x)ae=null;else if(X===ef)Q?ae=x(Ye({},ve),ge):!p&&ce.current&&M?ae=x(Ye(Ye({},ve),{},{className:M}),ge):v||!p&&!M?ae=x(Ye(Ye({},ve),{},{style:{display:"none"}}),ge):ae=null;else{var Fe;J===tc?Fe="prepare":BW(J)?Fe="active":J===bg&&(Fe="start");var Ae=J2(S,"".concat(X,"-").concat(Fe));ae=x(Ye(Ye({},ve),{},{className:At(J2(S,X),j(j({},Ae,Ae&&Fe),S,typeof S=="string")),style:K}),ge)}if(E.isValidElement(ae)&&wv(ae)){var pe=ae,fe=pe.ref;fe||(ae=E.cloneElement(ae,{ref:ge}))}return E.createElement(Uce,{ref:k},ae)});return r.displayName="CSSMotion",r}const Wf=eue(RW);var qO="add",YO="keep",ZO="remove",AP="removed";function tue(t){var e;return t&&Kn(t)==="object"&&"key"in t?e=t:e={key:t},Ye(Ye({},e),{},{key:String(e.key)})}function KO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(tue)}function nue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,o=KO(t),l=KO(e);o.forEach(function(p){for(var v=!1,x=r;x<i;x+=1){var S=l[x];if(S.key===p.key){r<x&&(n=n.concat(l.slice(r,x).map(function(M){return Ye(Ye({},M),{},{status:qO})})),r=x),n.push(Ye(Ye({},S),{},{status:YO})),r+=1,v=!0;break}}v||n.push(Ye(Ye({},p),{},{status:ZO}))}),r<i&&(n=n.concat(l.slice(r).map(function(p){return Ye(Ye({},p),{},{status:qO})})));var f={};n.forEach(function(p){var v=p.key;f[v]=(f[v]||0)+1});var s=Object.keys(f).filter(function(p){return f[p]>1});return s.forEach(function(p){n=n.filter(function(v){var x=v.key,S=v.status;return x!==p||S!==ZO}),n.forEach(function(v){v.key===p&&(v.status=YO)})}),n}var rue=["component","children","onVisibleChanged","onAllRemoved"],iue=["status"],oue=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function sue(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wf,n=function(r){Sc(o,r);var i=Gf(o);function o(){var l;Di(this,o);for(var f=arguments.length,s=new Array(f),p=0;p<f;p++)s[p]=arguments[p];return l=i.call.apply(i,[this].concat(s)),j(wr(l),"state",{keyEntities:[]}),j(wr(l),"removeKey",function(v){l.setState(function(x){var S=x.keyEntities.map(function(M){return M.key!==v?M:Ye(Ye({},M),{},{status:AP})});return{keyEntities:S}},function(){var x=l.state.keyEntities,S=x.filter(function(M){var P=M.status;return P!==AP}).length;S===0&&l.props.onAllRemoved&&l.props.onAllRemoved()})}),l}return ki(o,[{key:"render",value:function(){var f=this,s=this.state.keyEntities,p=this.props,v=p.component,x=p.children,S=p.onVisibleChanged;p.onAllRemoved;var M=Hr(p,rue),P=v||E.Fragment,R={};return oue.forEach(function(D){R[D]=M[D],delete M[D]}),delete M.keys,E.createElement(P,M,s.map(function(D,B){var O=D.status,k=Hr(D,iue),$=O===qO||O===YO;return E.createElement(e,Mn({},R,{key:k.key,visible:$,eventProps:k,onVisibleChanged:function(U){S==null||S(U,{key:k.key}),U||f.removeKey(k.key)}}),function(H,U){return x(Ye(Ye({},H),{},{index:B}),U)})}))}}],[{key:"getDerivedStateFromProps",value:function(f,s){var p=f.keys,v=s.keyEntities,x=KO(p),S=nue(v,x);return{keyEntities:S.filter(function(M){var P=v.find(function(R){var D=R.key;return M.key===D});return!(P&&P.status===AP&&M.status===ZO)})}}}]),o}(E.Component);return j(n,"defaultProps",{component:"div"}),n}const DW=sue(RW);function aue(t){const{children:e}=t,[,n]=Ja(),{motion:r}=n,i=E.useRef(!1);return i.current=i.current||r===!1,i.current?E.createElement(jce,{motion:r},e):e}const lue=()=>null;var cue=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const uue=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let RE,kW,FW,zW;function bS(){return RE||eb}function due(){return kW||jD}function fue(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const hue=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:i}=t;e!==void 0&&(RE=e),n!==void 0&&(kW=n),"holderRender"in t&&(zW=i),r&&(fue(r)?hce(bS(),r):FW=r)},NW=()=>({getPrefixCls:(t,e)=>e||(t?`${bS()}-${t}`:bS()),getIconPrefixCls:due,getRootPrefixCls:()=>RE||bS(),getTheme:()=>FW,holderRender:zW}),pue=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:o,form:l,locale:f,componentSize:s,direction:p,space:v,splitter:x,virtual:S,dropdownMatchSelectWidth:M,popupMatchSelectWidth:P,popupOverflow:R,legacyLocale:D,parentContext:B,iconPrefixCls:O,theme:k,componentDisabled:$,segmented:H,statistic:U,spin:X,calendar:J,carousel:K,cascader:Q,collapse:ce,typography:ge,checkbox:ae,descriptions:ve,divider:Fe,drawer:Ae,skeleton:pe,steps:fe,image:xe,layout:Re,list:ke,mentions:ze,modal:Xe,progress:Ne,result:Qe,slider:pt,breadcrumb:Ke,menu:ot,pagination:St,input:st,textArea:rt,empty:lt,badge:Rt,radio:bt,rate:wt,switch:it,transfer:Bt,avatar:jt,message:cn,tag:rn,table:zt,card:bn,tabs:Ot,timeline:Nt,timePicker:Jt,upload:on,notification:vn,tree:hn,colorPicker:wn,datePicker:Rn,rangePicker:Vn,flex:rr,wave:Pn,dropdown:Sn,warning:fr,tour:cr,floatButtonGroup:ur,variant:tr,inputNumber:oi,treeSelect:Oe}=t,se=E.useCallback((Ze,Et)=>{const{prefixCls:vt}=t;if(Et)return Et;const Ct=vt||B.getPrefixCls("");return Ze?`${Ct}-${Ze}`:Ct},[B.getPrefixCls,t.prefixCls]),oe=O||B.iconPrefixCls||jD,te=n||B.csp;EW(oe,te);const le=Nce(k,B.theme,{prefixCls:se("")}),ue={csp:te,autoInsertSpaceInButton:r,alert:i,anchor:o,locale:f||D,direction:p,space:v,splitter:x,virtual:S,popupMatchSelectWidth:P??M,popupOverflow:R,getPrefixCls:se,iconPrefixCls:oe,theme:le,segmented:H,statistic:U,spin:X,calendar:J,carousel:K,cascader:Q,collapse:ce,typography:ge,checkbox:ae,descriptions:ve,divider:Fe,drawer:Ae,skeleton:pe,steps:fe,image:xe,input:st,textArea:rt,layout:Re,list:ke,mentions:ze,modal:Xe,progress:Ne,result:Qe,slider:pt,breadcrumb:Ke,menu:ot,pagination:St,empty:lt,badge:Rt,radio:bt,rate:wt,switch:it,transfer:Bt,avatar:jt,message:cn,tag:rn,table:zt,card:bn,tabs:Ot,timeline:Nt,timePicker:Jt,upload:on,notification:vn,tree:hn,colorPicker:wn,datePicker:Rn,rangePicker:Vn,flex:rr,wave:Pn,dropdown:Sn,warning:fr,tour:cr,floatButtonGroup:ur,variant:tr,inputNumber:oi,treeSelect:Oe},Me=Object.assign({},B);Object.keys(ue).forEach(Ze=>{ue[Ze]!==void 0&&(Me[Ze]=ue[Ze])}),uue.forEach(Ze=>{const Et=t[Ze];Et&&(Me[Ze]=Et)}),typeof r<"u"&&(Me.button=Object.assign({autoInsertSpace:r},Me.button));const Ce=nT(()=>Me,Me,(Ze,Et)=>{const vt=Object.keys(Ze),Ct=Object.keys(Et);return vt.length!==Ct.length||vt.some(Vt=>Ze[Vt]!==Et[Vt])}),_e=E.useMemo(()=>({prefixCls:oe,csp:te}),[oe,te]);let De=E.createElement(E.Fragment,null,E.createElement(lue,{dropdownMatchSelectWidth:M}),e);const et=E.useMemo(()=>{var Ze,Et,vt,Ct;return _g(((Ze=Nf.Form)===null||Ze===void 0?void 0:Ze.defaultValidateMessages)||{},((vt=(Et=Ce.locale)===null||Et===void 0?void 0:Et.Form)===null||vt===void 0?void 0:vt.defaultValidateMessages)||{},((Ct=Ce.form)===null||Ct===void 0?void 0:Ct.validateMessages)||{},(l==null?void 0:l.validateMessages)||{})},[Ce,l==null?void 0:l.validateMessages]);Object.keys(et).length>0&&(De=E.createElement(cW.Provider,{value:et},De)),f&&(De=E.createElement(Kle,{locale:f,_ANT_MARK__:Yle},De)),(oe||te)&&(De=E.createElement(jC.Provider,{value:_e},De)),s&&(De=E.createElement(pce,{size:s},De)),De=E.createElement(aue,null,De);const nt=E.useMemo(()=>{const Ze=le||{},{algorithm:Et,token:vt,components:Ct,cssVar:Vt}=Ze,ln=cue(Ze,["algorithm","token","components","cssVar"]),kn=Et&&(!Array.isArray(Et)||Et.length>0)?zO(Et):hW,Jn={};Object.entries(Ct||{}).forEach(Wn=>{let[dr,gr]=Wn;const Yn=Object.assign({},gr);"algorithm"in Yn&&(Yn.algorithm===!0?Yn.theme=kn:(Array.isArray(Yn.algorithm)||typeof Yn.algorithm=="function")&&(Yn.theme=zO(Yn.algorithm)),delete Yn.algorithm),Jn[dr]=Yn});const _r=Object.assign(Object.assign({},Q_),vt);return Object.assign(Object.assign({},ln),{theme:kn,token:_r,components:Jn,override:Object.assign({override:_r},Jn),cssVar:Vt})},[le]);return k&&(De=E.createElement(pW.Provider,{value:nt},De)),Ce.warning&&(De=E.createElement(jle.Provider,{value:Ce.warning},De)),$!==void 0&&(De=E.createElement(UD,{disabled:$},De)),E.createElement(Sr.Provider,{value:Ce},De)},Ev=t=>{const e=E.useContext(Sr),n=E.useContext($D);return E.createElement(pue,Object.assign({parentContext:e,legacyLocale:n},t))};Ev.ConfigContext=Sr;Ev.SizeContext=Vb;Ev.config=hue;Ev.useConfig=mce;Object.defineProperty(Ev,"SizeContext",{get:()=>Vb});const Cv=Ev;var mue=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,gue=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,vue="".concat(mue," ").concat(gue).split(/[\s\n]+/),yue="aria-",_ue="data-";function Q2(t,e){return t.indexOf(e)===0}function id(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=Ye({},e);var r={};return Object.keys(t).forEach(function(i){(n.aria&&(i==="role"||Q2(i,yue))||n.data&&Q2(i,_ue)||n.attr&&vue.includes(i))&&(r[i]=t[i])}),r}function $W(t){return t&&Tt.isValidElement(t)&&t.type===Tt.Fragment}const bue=(t,e,n)=>Tt.isValidElement(t)?Tt.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function rv(t,e){return bue(t,t,e)}const e$=t=>typeof t=="object"&&t!=null&&t.nodeType===1,t$=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",MP=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return t$(n.overflowY,e)||t$(n.overflowX,e)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},hw=(t,e,n,r,i,o,l,f)=>o<t&&l>e||o>t&&l<e?0:o<=t&&f<=n||l>=e&&f>=n?o-t-r:l>e&&f<n||o<t&&f>n?l-e+i:0,xue=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},n$=(t,e)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:l,block:f,inline:s,boundary:p,skipOverflowHiddenElements:v}=e,x=typeof p=="function"?p:Ae=>Ae!==p;if(!e$(t))throw new TypeError("Invalid target");const S=document.scrollingElement||document.documentElement,M=[];let P=t;for(;e$(P)&&x(P);){if(P=xue(P),P===S){M.push(P);break}P!=null&&P===document.body&&MP(P)&&!MP(document.documentElement)||P!=null&&MP(P,v)&&M.push(P)}const R=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,D=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:B,scrollY:O}=window,{height:k,width:$,top:H,right:U,bottom:X,left:J}=t.getBoundingClientRect(),{top:K,right:Q,bottom:ce,left:ge}=(Ae=>{const pe=window.getComputedStyle(Ae);return{top:parseFloat(pe.scrollMarginTop)||0,right:parseFloat(pe.scrollMarginRight)||0,bottom:parseFloat(pe.scrollMarginBottom)||0,left:parseFloat(pe.scrollMarginLeft)||0}})(t);let ae=f==="start"||f==="nearest"?H-K:f==="end"?X+ce:H+k/2-K+ce,ve=s==="center"?J+$/2-ge+Q:s==="end"?U+Q:J-ge;const Fe=[];for(let Ae=0;Ae<M.length;Ae++){const pe=M[Ae],{height:fe,width:xe,top:Re,right:ke,bottom:ze,left:Xe}=pe.getBoundingClientRect();if(l==="if-needed"&&H>=0&&J>=0&&X<=D&&U<=R&&H>=Re&&X<=ze&&J>=Xe&&U<=ke)return Fe;const Ne=getComputedStyle(pe),Qe=parseInt(Ne.borderLeftWidth,10),pt=parseInt(Ne.borderTopWidth,10),Ke=parseInt(Ne.borderRightWidth,10),ot=parseInt(Ne.borderBottomWidth,10);let St=0,st=0;const rt="offsetWidth"in pe?pe.offsetWidth-pe.clientWidth-Qe-Ke:0,lt="offsetHeight"in pe?pe.offsetHeight-pe.clientHeight-pt-ot:0,Rt="offsetWidth"in pe?pe.offsetWidth===0?0:xe/pe.offsetWidth:0,bt="offsetHeight"in pe?pe.offsetHeight===0?0:fe/pe.offsetHeight:0;if(S===pe)St=f==="start"?ae:f==="end"?ae-D:f==="nearest"?hw(O,O+D,D,pt,ot,O+ae,O+ae+k,k):ae-D/2,st=s==="start"?ve:s==="center"?ve-R/2:s==="end"?ve-R:hw(B,B+R,R,Qe,Ke,B+ve,B+ve+$,$),St=Math.max(0,St+O),st=Math.max(0,st+B);else{St=f==="start"?ae-Re-pt:f==="end"?ae-ze+ot+lt:f==="nearest"?hw(Re,ze,fe,pt,ot+lt,ae,ae+k,k):ae-(Re+fe/2)+lt/2,st=s==="start"?ve-Xe-Qe:s==="center"?ve-(Xe+xe/2)+rt/2:s==="end"?ve-ke+Ke+rt:hw(Xe,ke,xe,Qe,Ke+rt,ve,ve+$,$);const{scrollLeft:wt,scrollTop:it}=pe;St=bt===0?0:Math.max(0,Math.min(it+St/bt,pe.scrollHeight-fe/bt+lt)),st=Rt===0?0:Math.max(0,Math.min(wt+st/Rt,pe.scrollWidth-xe/Rt+rt)),ae+=it-St,ve+=wt-st}Fe.push({el:pe,top:St,left:st})}return Fe},wue=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function Sue(t,e){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(n$(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:o,left:l}of n$(t,wue(e))){const f=o-n.top+n.bottom,s=l-n.left+n.right;i.scroll({top:f,left:s,behavior:r})}}const _a=t=>{const[,,,,e]=Ja();return e?`${t}-css-var`:""};var nn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=nn.F1&&n<=nn.F12)return!1;switch(n){case nn.ALT:case nn.CAPS_LOCK:case nn.CONTEXT_MENU:case nn.CTRL:case nn.DOWN:case nn.END:case nn.ESC:case nn.HOME:case nn.INSERT:case nn.LEFT:case nn.MAC_FF_META:case nn.META:case nn.NUMLOCK:case nn.NUM_CENTER:case nn.PAGE_DOWN:case nn.PAGE_UP:case nn.PAUSE:case nn.PRINT_SCREEN:case nn.RIGHT:case nn.SHIFT:case nn.UP:case nn.WIN_KEY:case nn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=nn.ZERO&&e<=nn.NINE||e>=nn.NUM_ZERO&&e<=nn.NUM_MULTIPLY||e>=nn.A&&e<=nn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case nn.SPACE:case nn.QUESTION_MARK:case nn.NUM_PLUS:case nn.NUM_MINUS:case nn.NUM_PERIOD:case nn.NUM_DIVISION:case nn.SEMICOLON:case nn.DASH:case nn.EQUALS:case nn.COMMA:case nn.PERIOD:case nn.SLASH:case nn.APOSTROPHE:case nn.SINGLE_QUOTE:case nn.OPEN_SQUARE_BRACKET:case nn.BACKSLASH:case nn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},jW=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,i=t.className,o=t.duration,l=o===void 0?4.5:o,f=t.showProgress,s=t.pauseOnHover,p=s===void 0?!0:s,v=t.eventKey,x=t.content,S=t.closable,M=t.closeIcon,P=M===void 0?"x":M,R=t.props,D=t.onClick,B=t.onNoticeClose,O=t.times,k=t.hovering,$=E.useState(!1),H=ct($,2),U=H[0],X=H[1],J=E.useState(0),K=ct(J,2),Q=K[0],ce=K[1],ge=E.useState(0),ae=ct(ge,2),ve=ae[0],Fe=ae[1],Ae=k||U,pe=l>0&&f,fe=function(){B(v)},xe=function(Qe){(Qe.key==="Enter"||Qe.code==="Enter"||Qe.keyCode===nn.ENTER)&&fe()};E.useEffect(function(){if(!Ae&&l>0){var Ne=Date.now()-ve,Qe=setTimeout(function(){fe()},l*1e3-ve);return function(){p&&clearTimeout(Qe),Fe(Date.now()-Ne)}}},[l,Ae,O]),E.useEffect(function(){if(!Ae&&pe&&(p||ve===0)){var Ne=performance.now(),Qe,pt=function Ke(){cancelAnimationFrame(Qe),Qe=requestAnimationFrame(function(ot){var St=ot+ve-Ne,st=Math.min(St/(l*1e3),1);ce(st*100),st<1&&Ke()})};return pt(),function(){p&&cancelAnimationFrame(Qe)}}},[l,ve,Ae,pe,O]);var Re=E.useMemo(function(){return Kn(S)==="object"&&S!==null?S:S?{closeIcon:P}:{}},[S,P]),ke=id(Re,!0),ze=100-(!Q||Q<0?0:Q>100?100:Q),Xe="".concat(n,"-notice");return E.createElement("div",Mn({},R,{ref:e,className:At(Xe,i,j({},"".concat(Xe,"-closable"),S)),style:r,onMouseEnter:function(Qe){var pt;X(!0),R==null||(pt=R.onMouseEnter)===null||pt===void 0||pt.call(R,Qe)},onMouseLeave:function(Qe){var pt;X(!1),R==null||(pt=R.onMouseLeave)===null||pt===void 0||pt.call(R,Qe)},onClick:D}),E.createElement("div",{className:"".concat(Xe,"-content")},x),S&&E.createElement("a",Mn({tabIndex:0,className:"".concat(Xe,"-close"),onKeyDown:xe,"aria-label":"Close"},ke,{onClick:function(Qe){Qe.preventDefault(),Qe.stopPropagation(),fe()}}),Re.closeIcon),pe&&E.createElement("progress",{className:"".concat(Xe,"-progress"),max:"100",value:ze},ze+"%"))}),UW=Tt.createContext({}),Eue=function(e){var n=e.children,r=e.classNames;return Tt.createElement(UW.Provider,{value:{classNames:r}},n)},r$=8,i$=3,o$=16,Cue=function(e){var n={offset:r$,threshold:i$,gap:o$};if(e&&Kn(e)==="object"){var r,i,o;n.offset=(r=e.offset)!==null&&r!==void 0?r:r$,n.threshold=(i=e.threshold)!==null&&i!==void 0?i:i$,n.gap=(o=e.gap)!==null&&o!==void 0?o:o$}return[!!e,n]},Tue=["className","style","classNames","styles"],Aue=function(e){var n=e.configList,r=e.placement,i=e.prefixCls,o=e.className,l=e.style,f=e.motion,s=e.onAllNoticeRemoved,p=e.onNoticeClose,v=e.stack,x=E.useContext(UW),S=x.classNames,M=E.useRef({}),P=E.useRef(null),R=E.useState([]),D=ct(R,2),B=D[0],O=D[1],k=n.map(function(ae){return{config:ae,key:String(ae.key)}}),$=Cue(v),H=ct($,2),U=H[0],X=H[1],J=X.offset,K=X.threshold,Q=X.gap,ce=U&&(B.length>0||k.length<=K),ge=typeof f=="function"?f(r):f;return E.useEffect(function(){U&&B.length>1&&O(function(ae){return ae.filter(function(ve){return k.some(function(Fe){var Ae=Fe.key;return ve===Ae})})})},[B,k,U]),E.useEffect(function(){var ae;if(U&&M.current[(ae=k[k.length-1])===null||ae===void 0?void 0:ae.key]){var ve;P.current=M.current[(ve=k[k.length-1])===null||ve===void 0?void 0:ve.key]}},[k,U]),Tt.createElement(DW,Mn({key:r,className:At(i,"".concat(i,"-").concat(r),S==null?void 0:S.list,o,j(j({},"".concat(i,"-stack"),!!U),"".concat(i,"-stack-expanded"),ce)),style:l,keys:k,motionAppear:!0},ge,{onAllRemoved:function(){s(r)}}),function(ae,ve){var Fe=ae.config,Ae=ae.className,pe=ae.style,fe=ae.index,xe=Fe,Re=xe.key,ke=xe.times,ze=String(Re),Xe=Fe,Ne=Xe.className,Qe=Xe.style,pt=Xe.classNames,Ke=Xe.styles,ot=Hr(Xe,Tue),St=k.findIndex(function(Nt){return Nt.key===ze}),st={};if(U){var rt=k.length-1-(St>-1?St:fe-1),lt=r==="top"||r==="bottom"?"-50%":"0";if(rt>0){var Rt,bt,wt,it,Bt,jt;st.height=ce?(Rt=M.current[ze])===null||Rt===void 0?void 0:Rt.offsetHeight:(bt=P.current)===null||bt===void 0?void 0:bt.offsetHeight;for(var cn=0,rn=0;rn<rt;rn++){var zt;cn+=((zt=M.current[k[k.length-1-rn].key])===null||zt===void 0?void 0:zt.offsetHeight)+Q}var bn=(ce?cn:rt*J)*(r.startsWith("top")?1:-1),Ot=!ce&&(wt=P.current)!==null&&wt!==void 0&&wt.offsetWidth&&(it=M.current[ze])!==null&&it!==void 0&&it.offsetWidth?(((Bt=P.current)===null||Bt===void 0?void 0:Bt.offsetWidth)-J*2*(rt<3?rt:3))/((jt=M.current[ze])===null||jt===void 0?void 0:jt.offsetWidth):1;st.transform="translate3d(".concat(lt,", ").concat(bn,"px, 0) scaleX(").concat(Ot,")")}else st.transform="translate3d(".concat(lt,", 0, 0)")}return Tt.createElement("div",{ref:ve,className:At("".concat(i,"-notice-wrapper"),Ae,pt==null?void 0:pt.wrapper),style:Ye(Ye(Ye({},pe),st),Ke==null?void 0:Ke.wrapper),onMouseEnter:function(){return O(function(Jt){return Jt.includes(ze)?Jt:[].concat(sn(Jt),[ze])})},onMouseLeave:function(){return O(function(Jt){return Jt.filter(function(on){return on!==ze})})}},Tt.createElement(jW,Mn({},ot,{ref:function(Jt){St>-1?M.current[ze]=Jt:delete M.current[ze]},prefixCls:i,classNames:pt,styles:Ke,className:At(Ne,S==null?void 0:S.notice),style:Qe,times:ke,key:Re,eventKey:Re,onNoticeClose:p,hovering:U&&B.length>0})))})},Mue=E.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-notification":n,i=t.container,o=t.motion,l=t.maxCount,f=t.className,s=t.style,p=t.onAllRemoved,v=t.stack,x=t.renderNotifications,S=E.useState([]),M=ct(S,2),P=M[0],R=M[1],D=function(K){var Q,ce=P.find(function(ge){return ge.key===K});ce==null||(Q=ce.onClose)===null||Q===void 0||Q.call(ce),R(function(ge){return ge.filter(function(ae){return ae.key!==K})})};E.useImperativeHandle(e,function(){return{open:function(K){R(function(Q){var ce=sn(Q),ge=ce.findIndex(function(Fe){return Fe.key===K.key}),ae=Ye({},K);if(ge>=0){var ve;ae.times=(((ve=Q[ge])===null||ve===void 0?void 0:ve.times)||0)+1,ce[ge]=ae}else ae.times=0,ce.push(ae);return l>0&&ce.length>l&&(ce=ce.slice(-l)),ce})},close:function(K){D(K)},destroy:function(){R([])}}});var B=E.useState({}),O=ct(B,2),k=O[0],$=O[1];E.useEffect(function(){var J={};P.forEach(function(K){var Q=K.placement,ce=Q===void 0?"topRight":Q;ce&&(J[ce]=J[ce]||[],J[ce].push(K))}),Object.keys(k).forEach(function(K){J[K]=J[K]||[]}),$(J)},[P]);var H=function(K){$(function(Q){var ce=Ye({},Q),ge=ce[K]||[];return ge.length||delete ce[K],ce})},U=E.useRef(!1);if(E.useEffect(function(){Object.keys(k).length>0?U.current=!0:U.current&&(p==null||p(),U.current=!1)},[k]),!i)return null;var X=Object.keys(k);return rd.createPortal(E.createElement(E.Fragment,null,X.map(function(J){var K=k[J],Q=E.createElement(Aue,{key:J,configList:K,placement:J,prefixCls:r,className:f==null?void 0:f(J),style:s==null?void 0:s(J),motion:o,onNoticeClose:D,onAllNoticeRemoved:H,stack:v});return x?x(Q,{prefixCls:r,key:J}):Q})),i)}),Pue=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Iue=function(){return document.body},s$=0;function Rue(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var l=i[o];l!==void 0&&(t[o]=l)})}),t}function Oue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getContainer,n=e===void 0?Iue:e,r=t.motion,i=t.prefixCls,o=t.maxCount,l=t.className,f=t.style,s=t.onAllRemoved,p=t.stack,v=t.renderNotifications,x=Hr(t,Pue),S=E.useState(),M=ct(S,2),P=M[0],R=M[1],D=E.useRef(),B=E.createElement(Mue,{container:P,ref:D,prefixCls:i,motion:r,maxCount:o,className:l,style:f,onAllRemoved:s,stack:p,renderNotifications:v}),O=E.useState([]),k=ct(O,2),$=k[0],H=k[1],U=E.useMemo(function(){return{open:function(J){var K=Rue(x,J);(K.key===null||K.key===void 0)&&(K.key="rc-notification-".concat(s$),s$+=1),H(function(Q){return[].concat(sn(Q),[{type:"open",config:K}])})},close:function(J){H(function(K){return[].concat(sn(K),[{type:"close",key:J}])})},destroy:function(){H(function(J){return[].concat(sn(J),[{type:"destroy"}])})}}},[]);return E.useEffect(function(){R(n())}),E.useEffect(function(){D.current&&$.length&&($.forEach(function(X){switch(X.type){case"open":D.current.open(X.config);break;case"close":D.current.close(X.key);break;case"destroy":D.current.destroy();break}}),H(function(X){return X.filter(function(J){return!$.includes(J)})}))},[$]),[U,B]}const Lue=Tt.createContext(void 0),HD=Lue,tf=100,Bue=10,VW=tf*Bue,GW={Modal:tf,Drawer:tf,Popover:tf,Popconfirm:tf,Tooltip:tf,Tour:tf,FloatButton:tf},Due={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function kue(t){return t in GW}const WD=(t,e)=>{const[,n]=Ja(),r=Tt.useContext(HD),i=kue(t);let o;if(e!==void 0)o=[e,e];else{let l=r??0;i?l+=(r?0:n.zIndexPopupBase)+GW[t]:l+=Due[t],o=[r===void 0?e:l,l]}return o},Fue=t=>{const{componentCls:e,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:l,colorWarning:f,colorInfo:s,fontSizeLG:p,motionEaseInOutCirc:v,motionDurationSlow:x,marginXS:S,paddingXS:M,borderRadiusLG:P,zIndexPopup:R,contentPadding:D,contentBg:B}=t,O=`${e}-notice`,k=new ai("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:M,transform:"translateY(0)",opacity:1}}),$=new ai("MessageMoveOut",{"0%":{maxHeight:t.height,padding:M,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),H={padding:M,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${n}`]:{marginInlineEnd:S,fontSize:p},[`${O}-content`]:{display:"inline-block",padding:D,background:B,borderRadius:P,boxShadow:r,pointerEvents:"all"},[`${e}-success > ${n}`]:{color:o},[`${e}-error > ${n}`]:{color:l},[`${e}-warning > ${n}`]:{color:f},[`${e}-info > ${n},
      ${e}-loading > ${n}`]:{color:s}};return[{[e]:Object.assign(Object.assign({},ys(t)),{color:i,position:"fixed",top:S,width:"100%",pointerEvents:"none",zIndex:R,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:k,animationDuration:x,animationPlayState:"paused",animationTimingFunction:v},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:$,animationDuration:x,animationPlayState:"paused",animationTimingFunction:v},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${O}-wrapper`]:Object.assign({},H)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},H),{padding:0,textAlign:"start"})}]},zue=t=>({zIndexPopup:t.zIndexPopupBase+VW+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}),HW=Ss("Message",t=>{const e=$i(t,{height:150});return[Fue(e)]},zue);var Nue=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $ue={info:E.createElement(MH,null),success:E.createElement(PD,null),error:E.createElement($b,null),warning:E.createElement(ID,null),loading:E.createElement(HC,null)},WW=t=>{let{prefixCls:e,type:n,icon:r,children:i}=t;return E.createElement("div",{className:At(`${e}-custom-content`,`${e}-${n}`)},r||$ue[n],E.createElement("span",null,i))},jue=t=>{const{prefixCls:e,className:n,type:r,icon:i,content:o}=t,l=Nue(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:f}=E.useContext(Sr),s=e||f("message"),p=_a(s),[v,x,S]=HW(s,p);return v(E.createElement(jW,Object.assign({},l,{prefixCls:s,className:At(n,x,`${s}-notice-pure-panel`,S,p),eventKey:"pure",duration:null,content:E.createElement(WW,{prefixCls:s,type:r,icon:i},o)})))},Uue=jue;function Vue(t,e){return{motionName:e??`${t}-move-up`}}function XD(t){let e;const n=new Promise(i=>{e=t(()=>{i(!0)})}),r=()=>{e==null||e()};return r.then=(i,o)=>n.then(i,o),r.promise=n,r}var Gue=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Hue=8,Wue=3,Xue=t=>{let{children:e,prefixCls:n}=t;const r=_a(n),[i,o,l]=HW(n,r);return i(E.createElement(Eue,{classNames:{list:At(o,l,r)}},e))},que=(t,e)=>{let{prefixCls:n,key:r}=e;return E.createElement(Xue,{prefixCls:n,key:r},t)},Yue=E.forwardRef((t,e)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:l=Wue,rtl:f,transitionName:s,onAllRemoved:p}=t,{getPrefixCls:v,getPopupContainer:x,message:S,direction:M}=E.useContext(Sr),P=r||v("message"),R=()=>({left:"50%",transform:"translateX(-50%)",top:n??Hue}),D=()=>At({[`${P}-rtl`]:f??M==="rtl"}),B=()=>Vue(P,s),O=E.createElement("span",{className:`${P}-close-x`},E.createElement(jb,{className:`${P}-close-icon`})),[k,$]=Oue({prefixCls:P,style:R,className:D,motion:B,closable:!1,closeIcon:O,duration:l,getContainer:()=>(i==null?void 0:i())||(x==null?void 0:x())||document.body,maxCount:o,onAllRemoved:p,renderNotifications:que});return E.useImperativeHandle(e,()=>Object.assign(Object.assign({},k),{prefixCls:P,message:S})),$});let a$=0;function XW(t){const e=E.useRef(null);return lT(),[E.useMemo(()=>{const r=s=>{var p;(p=e.current)===null||p===void 0||p.close(s)},i=s=>{if(!e.current){const U=()=>{};return U.then=()=>{},U}const{open:p,prefixCls:v,message:x}=e.current,S=`${v}-notice`,{content:M,icon:P,type:R,key:D,className:B,style:O,onClose:k}=s,$=Gue(s,["content","icon","type","key","className","style","onClose"]);let H=D;return H==null&&(a$+=1,H=`antd-message-${a$}`),XD(U=>(p(Object.assign(Object.assign({},$),{key:H,content:E.createElement(WW,{prefixCls:v,type:R,icon:P},M),placement:"top",className:At(R&&`${S}-${R}`,B,x==null?void 0:x.className),style:Object.assign(Object.assign({},x==null?void 0:x.style),O),onClose:()=>{k==null||k(),U()}})),()=>{r(H)}))},l={open:i,destroy:s=>{var p;s!==void 0?r(s):(p=e.current)===null||p===void 0||p.destroy()}};return["info","success","warning","error","loading"].forEach(s=>{const p=(v,x,S)=>{let M;v&&typeof v=="object"&&"content"in v?M=v:M={content:v};let P,R;typeof x=="function"?R=x:(P=x,R=S);const D=Object.assign(Object.assign({onClose:R,duration:P},M),{type:s});return i(D)};l[s]=p}),l},[]),E.createElement(Yue,Object.assign({key:"message-holder"},t,{ref:e}))]}function Zue(t){return XW(t)}function Kue(){const[t,e]=E.useState([]),n=E.useCallback(r=>(e(i=>[].concat(sn(i),[r])),()=>{e(i=>i.filter(o=>o!==r))}),[]);return[t,n]}function qs(){qs=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(Ae,pe,fe){Ae[pe]=fe.value},o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function p(Ae,pe,fe){return Object.defineProperty(Ae,pe,{value:fe,enumerable:!0,configurable:!0,writable:!0}),Ae[pe]}try{p({},"")}catch{p=function(fe,xe,Re){return fe[xe]=Re}}function v(Ae,pe,fe,xe){var Re=pe&&pe.prototype instanceof B?pe:B,ke=Object.create(Re.prototype),ze=new ve(xe||[]);return i(ke,"_invoke",{value:Q(Ae,fe,ze)}),ke}function x(Ae,pe,fe){try{return{type:"normal",arg:Ae.call(pe,fe)}}catch(xe){return{type:"throw",arg:xe}}}e.wrap=v;var S="suspendedStart",M="suspendedYield",P="executing",R="completed",D={};function B(){}function O(){}function k(){}var $={};p($,l,function(){return this});var H=Object.getPrototypeOf,U=H&&H(H(Fe([])));U&&U!==n&&r.call(U,l)&&($=U);var X=k.prototype=B.prototype=Object.create($);function J(Ae){["next","throw","return"].forEach(function(pe){p(Ae,pe,function(fe){return this._invoke(pe,fe)})})}function K(Ae,pe){function fe(Re,ke,ze,Xe){var Ne=x(Ae[Re],Ae,ke);if(Ne.type!=="throw"){var Qe=Ne.arg,pt=Qe.value;return pt&&Kn(pt)=="object"&&r.call(pt,"__await")?pe.resolve(pt.__await).then(function(Ke){fe("next",Ke,ze,Xe)},function(Ke){fe("throw",Ke,ze,Xe)}):pe.resolve(pt).then(function(Ke){Qe.value=Ke,ze(Qe)},function(Ke){return fe("throw",Ke,ze,Xe)})}Xe(Ne.arg)}var xe;i(this,"_invoke",{value:function(ke,ze){function Xe(){return new pe(function(Ne,Qe){fe(ke,ze,Ne,Qe)})}return xe=xe?xe.then(Xe,Xe):Xe()}})}function Q(Ae,pe,fe){var xe=S;return function(Re,ke){if(xe===P)throw Error("Generator is already running");if(xe===R){if(Re==="throw")throw ke;return{value:t,done:!0}}for(fe.method=Re,fe.arg=ke;;){var ze=fe.delegate;if(ze){var Xe=ce(ze,fe);if(Xe){if(Xe===D)continue;return Xe}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(xe===S)throw xe=R,fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);xe=P;var Ne=x(Ae,pe,fe);if(Ne.type==="normal"){if(xe=fe.done?R:M,Ne.arg===D)continue;return{value:Ne.arg,done:fe.done}}Ne.type==="throw"&&(xe=R,fe.method="throw",fe.arg=Ne.arg)}}}function ce(Ae,pe){var fe=pe.method,xe=Ae.iterator[fe];if(xe===t)return pe.delegate=null,fe==="throw"&&Ae.iterator.return&&(pe.method="return",pe.arg=t,ce(Ae,pe),pe.method==="throw")||fe!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+fe+"' method")),D;var Re=x(xe,Ae.iterator,pe.arg);if(Re.type==="throw")return pe.method="throw",pe.arg=Re.arg,pe.delegate=null,D;var ke=Re.arg;return ke?ke.done?(pe[Ae.resultName]=ke.value,pe.next=Ae.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=t),pe.delegate=null,D):ke:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,D)}function ge(Ae){var pe={tryLoc:Ae[0]};1 in Ae&&(pe.catchLoc=Ae[1]),2 in Ae&&(pe.finallyLoc=Ae[2],pe.afterLoc=Ae[3]),this.tryEntries.push(pe)}function ae(Ae){var pe=Ae.completion||{};pe.type="normal",delete pe.arg,Ae.completion=pe}function ve(Ae){this.tryEntries=[{tryLoc:"root"}],Ae.forEach(ge,this),this.reset(!0)}function Fe(Ae){if(Ae||Ae===""){var pe=Ae[l];if(pe)return pe.call(Ae);if(typeof Ae.next=="function")return Ae;if(!isNaN(Ae.length)){var fe=-1,xe=function Re(){for(;++fe<Ae.length;)if(r.call(Ae,fe))return Re.value=Ae[fe],Re.done=!1,Re;return Re.value=t,Re.done=!0,Re};return xe.next=xe}}throw new TypeError(Kn(Ae)+" is not iterable")}return O.prototype=k,i(X,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:O,configurable:!0}),O.displayName=p(k,s,"GeneratorFunction"),e.isGeneratorFunction=function(Ae){var pe=typeof Ae=="function"&&Ae.constructor;return!!pe&&(pe===O||(pe.displayName||pe.name)==="GeneratorFunction")},e.mark=function(Ae){return Object.setPrototypeOf?Object.setPrototypeOf(Ae,k):(Ae.__proto__=k,p(Ae,s,"GeneratorFunction")),Ae.prototype=Object.create(X),Ae},e.awrap=function(Ae){return{__await:Ae}},J(K.prototype),p(K.prototype,f,function(){return this}),e.AsyncIterator=K,e.async=function(Ae,pe,fe,xe,Re){Re===void 0&&(Re=Promise);var ke=new K(v(Ae,pe,fe,xe),Re);return e.isGeneratorFunction(pe)?ke:ke.next().then(function(ze){return ze.done?ze.value:ke.next()})},J(X),p(X,s,"Generator"),p(X,l,function(){return this}),p(X,"toString",function(){return"[object Generator]"}),e.keys=function(Ae){var pe=Object(Ae),fe=[];for(var xe in pe)fe.push(xe);return fe.reverse(),function Re(){for(;fe.length;){var ke=fe.pop();if(ke in pe)return Re.value=ke,Re.done=!1,Re}return Re.done=!0,Re}},e.values=Fe,ve.prototype={constructor:ve,reset:function(pe){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(ae),!pe)for(var fe in this)fe.charAt(0)==="t"&&r.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=t)},stop:function(){this.done=!0;var pe=this.tryEntries[0].completion;if(pe.type==="throw")throw pe.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var fe=this;function xe(Qe,pt){return ze.type="throw",ze.arg=pe,fe.next=Qe,pt&&(fe.method="next",fe.arg=t),!!pt}for(var Re=this.tryEntries.length-1;Re>=0;--Re){var ke=this.tryEntries[Re],ze=ke.completion;if(ke.tryLoc==="root")return xe("end");if(ke.tryLoc<=this.prev){var Xe=r.call(ke,"catchLoc"),Ne=r.call(ke,"finallyLoc");if(Xe&&Ne){if(this.prev<ke.catchLoc)return xe(ke.catchLoc,!0);if(this.prev<ke.finallyLoc)return xe(ke.finallyLoc)}else if(Xe){if(this.prev<ke.catchLoc)return xe(ke.catchLoc,!0)}else{if(!Ne)throw Error("try statement without catch or finally");if(this.prev<ke.finallyLoc)return xe(ke.finallyLoc)}}}},abrupt:function(pe,fe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Re=this.tryEntries[xe];if(Re.tryLoc<=this.prev&&r.call(Re,"finallyLoc")&&this.prev<Re.finallyLoc){var ke=Re;break}}ke&&(pe==="break"||pe==="continue")&&ke.tryLoc<=fe&&fe<=ke.finallyLoc&&(ke=null);var ze=ke?ke.completion:{};return ze.type=pe,ze.arg=fe,ke?(this.method="next",this.next=ke.finallyLoc,D):this.complete(ze)},complete:function(pe,fe){if(pe.type==="throw")throw pe.arg;return pe.type==="break"||pe.type==="continue"?this.next=pe.arg:pe.type==="return"?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):pe.type==="normal"&&fe&&(this.next=fe),D},finish:function(pe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var xe=this.tryEntries[fe];if(xe.finallyLoc===pe)return this.complete(xe.completion,xe.afterLoc),ae(xe),D}},catch:function(pe){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var xe=this.tryEntries[fe];if(xe.tryLoc===pe){var Re=xe.completion;if(Re.type==="throw"){var ke=Re.arg;ae(xe)}return ke}}throw Error("illegal catch attempt")},delegateYield:function(pe,fe,xe){return this.delegate={iterator:Fe(pe),resultName:fe,nextLoc:xe},this.method==="next"&&(this.arg=t),D}},e}function l$(t,e,n,r,i,o,l){try{var f=t[o](l),s=f.value}catch(p){return void n(p)}f.done?e(s):Promise.resolve(s).then(r,i)}function Ap(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function l(s){l$(o,r,i,l,f,"next",s)}function f(s){l$(o,r,i,l,f,"throw",s)}l(void 0)})}}var Gb=Ye({},uH),Jue=Gb.version,Que=Gb.render,ede=Gb.unmountComponentAtNode,uT;try{var tde=Number((Jue||"").split(".")[0]);tde>=18&&(uT=Gb.createRoot)}catch{}function c$(t){var e=Gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Kn(e)==="object"&&(e.usingClientEntryPoint=t)}var OE="__rc_react_root__";function nde(t,e){c$(!0);var n=e[OE]||uT(e);c$(!1),n.render(t),e[OE]=n}function rde(t,e){Que(t,e)}function qD(t,e){if(uT){nde(t,e);return}rde(t,e)}function ide(t){return JO.apply(this,arguments)}function JO(){return JO=Ap(qs().mark(function t(e){return qs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var i;(i=e[OE])===null||i===void 0||i.unmount(),delete e[OE]}));case 1:case"end":return r.stop()}},t)})),JO.apply(this,arguments)}function ode(t){ede(t)}function qW(t){return QO.apply(this,arguments)}function QO(){return QO=Ap(qs().mark(function t(e){return qs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(uT===void 0){r.next=2;break}return r.abrupt("return",ide(e));case 2:ode(e);case 3:case"end":return r.stop()}},t)})),QO.apply(this,arguments)}const PP=()=>({height:0,opacity:0}),u$=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},sde=t=>({height:t?t.offsetHeight:0}),IP=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",ade=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:eb}-motion-collapse`,onAppearStart:PP,onEnterStart:PP,onAppearActive:u$,onEnterActive:u$,onLeaveStart:sde,onLeaveActive:PP,onAppearEnd:IP,onEnterEnd:IP,onLeaveEnd:IP,motionDeadline:500}},iv=(t,e,n)=>n!==void 0?n:`${t}-${e}`,d$=ade,YD=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,l=i.height;if(o||l)return!0}}return!1},lde=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},cde=Bce("Wave",t=>[lde(t)]),ZD=`${eb}-wave-target`;function RP(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function ude(t){const{borderTopColor:e,borderColor:n,backgroundColor:r}=getComputedStyle(t);return RP(e)?e:RP(n)?n:RP(r)?r:null}function OP(t){return Number.isNaN(t)?0:t}const dde=t=>{const{className:e,target:n,component:r}=t,i=E.useRef(null),[o,l]=E.useState(null),[f,s]=E.useState([]),[p,v]=E.useState(0),[x,S]=E.useState(0),[M,P]=E.useState(0),[R,D]=E.useState(0),[B,O]=E.useState(!1),k={left:p,top:x,width:M,height:R,borderRadius:f.map(U=>`${U}px`).join(" ")};o&&(k["--wave-color"]=o);function $(){const U=getComputedStyle(n);l(ude(n));const X=U.position==="static",{borderLeftWidth:J,borderTopWidth:K}=U;v(X?n.offsetLeft:OP(-parseFloat(J))),S(X?n.offsetTop:OP(-parseFloat(K))),P(n.offsetWidth),D(n.offsetHeight);const{borderTopLeftRadius:Q,borderTopRightRadius:ce,borderBottomLeftRadius:ge,borderBottomRightRadius:ae}=U;s([Q,ce,ae,ge].map(ve=>OP(parseFloat(ve))))}if(E.useEffect(()=>{if(n){const U=gi(()=>{$(),O(!0)});let X;return typeof ResizeObserver<"u"&&(X=new ResizeObserver($),X.observe(n)),()=>{gi.cancel(U),X==null||X.disconnect()}}},[]),!B)return null;const H=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(ZD));return E.createElement(Wf,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(U,X)=>{var J;if(X.deadline||X.propertyName==="opacity"){const K=(J=i.current)===null||J===void 0?void 0:J.parentElement;qW(K).then(()=>{K==null||K.remove()})}return!1}},(U,X)=>{let{className:J}=U;return E.createElement("div",{ref:Al(i,X),className:At(e,J,{"wave-quick":H}),style:k})})},fde=(t,e)=>{var n;const{component:r}=e;if(r==="Checkbox"&&!(!((n=t.querySelector("input"))===null||n===void 0)&&n.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",t==null||t.insertBefore(i,t==null?void 0:t.firstChild),qD(E.createElement(dde,Object.assign({},e,{target:t})),i)},hde=fde,pde=(t,e,n)=>{const{wave:r}=E.useContext(Sr),[,i,o]=Ja(),l=xo(p=>{const v=t.current;if(r!=null&&r.disabled||!v)return;const x=v.querySelector(`.${ZD}`)||v,{showEffect:S}=r||{};(S||hde)(x,{className:e,token:i,component:n,event:p,hashId:o})}),f=E.useRef();return p=>{gi.cancel(f.current),f.current=gi(()=>{l(p)})}},mde=pde,gde=t=>{const{children:e,disabled:n,component:r}=t,{getPrefixCls:i}=E.useContext(Sr),o=E.useRef(null),l=i("wave"),[,f]=cde(l),s=mde(o,At(l,f),r);if(Tt.useEffect(()=>{const v=o.current;if(!v||v.nodeType!==1||n)return;const x=S=>{!YD(S.target)||!v.getAttribute||v.getAttribute("disabled")||v.disabled||v.className.includes("disabled")||v.className.includes("-leave")||s(S)};return v.addEventListener("click",x,!0),()=>{v.removeEventListener("click",x,!0)}},[n]),!Tt.isValidElement(e))return e??null;const p=wv(e)?Al(e.ref,o):o;return rv(e,{ref:p})},YW=gde,hd=t=>{const e=Tt.useContext(Vb);return Tt.useMemo(()=>t?typeof t=="string"?t??e:t instanceof Function?t(e):e:e,[t,e])},vde=t=>{const{componentCls:e}=t;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},yde=t=>{const{componentCls:e,antCls:n}=t;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},_de=t=>{const{componentCls:e}=t;return{[e]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}},ZW=Ss("Space",t=>{const e=$i(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[yde(e),_de(e),vde(e)]},()=>({}),{resetStyle:!1});var KW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dT=E.createContext(null),Hb=(t,e)=>{const n=E.useContext(dT),r=E.useMemo(()=>{if(!n)return"";const{compactDirection:i,isFirstItem:o,isLastItem:l}=n,f=i==="vertical"?"-vertical-":"-";return At(`${t}-compact${f}item`,{[`${t}-compact${f}first-item`]:o,[`${t}-compact${f}last-item`]:l,[`${t}-compact${f}item-rtl`]:e==="rtl"})},[t,e,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},bde=t=>{let{children:e}=t;return E.createElement(dT.Provider,{value:null},e)},xde=t=>{var{children:e}=t,n=KW(t,["children"]);return E.createElement(dT.Provider,{value:n},e)},wde=t=>{const{getPrefixCls:e,direction:n}=E.useContext(Sr),{size:r,direction:i,block:o,prefixCls:l,className:f,rootClassName:s,children:p}=t,v=KW(t,["size","direction","block","prefixCls","className","rootClassName","children"]),x=hd(k=>r??k),S=e("space-compact",l),[M,P]=ZW(S),R=At(S,P,{[`${S}-rtl`]:n==="rtl",[`${S}-block`]:o,[`${S}-vertical`]:i==="vertical"},f,s),D=E.useContext(dT),B=zf(p),O=E.useMemo(()=>B.map((k,$)=>{const H=(k==null?void 0:k.key)||`${S}-item-${$}`;return E.createElement(xde,{key:H,compactSize:x,compactDirection:i,isFirstItem:$===0&&(!D||(D==null?void 0:D.isFirstItem)),isLastItem:$===B.length-1&&(!D||(D==null?void 0:D.isLastItem))},k)}),[r,B,D]);return B.length===0?null:M(E.createElement("div",Object.assign({className:R},v),O))},Sde=wde;var Ede=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const JW=E.createContext(void 0),Cde=t=>{const{getPrefixCls:e,direction:n}=E.useContext(Sr),{prefixCls:r,size:i,className:o}=t,l=Ede(t,["prefixCls","size","className"]),f=e("btn-group",r),[,,s]=Ja();let p="";switch(i){case"large":p="lg";break;case"small":p="sm";break}const v=At(f,{[`${f}-${p}`]:p,[`${f}-rtl`]:n==="rtl"},o,s);return E.createElement(JW.Provider,{value:i},E.createElement("div",Object.assign({},l,{className:v})))},Tde=Cde,f$=/^[\u4E00-\u9FA5]{2}$/,eL=f$.test.bind(f$);function QW(t){return t==="danger"?{danger:!0}:{type:t}}function h$(t){return typeof t=="string"}function LP(t){return t==="text"||t==="link"}function Ade(t,e){if(t==null)return;const n=e?" ":"";return typeof t!="string"&&typeof t!="number"&&h$(t.type)&&eL(t.props.children)?rv(t,{children:t.props.children.split("").join(n)}):h$(t)?eL(t)?Tt.createElement("span",null,t.split("").join(n)):Tt.createElement("span",null,t):$W(t)?Tt.createElement("span",null,t):t}function Mde(t,e){let n=!1;const r=[];return Tt.Children.forEach(t,i=>{const o=typeof i,l=o==="string"||o==="number";if(n&&l){const f=r.length-1,s=r[f];r[f]=`${s}${i}`}else r.push(i);n=l}),Tt.Children.map(r,i=>Ade(i,e))}const Pde=E.forwardRef((t,e)=>{const{className:n,style:r,children:i,prefixCls:o}=t,l=At(`${o}-icon`,n);return Tt.createElement("span",{ref:e,className:l,style:r},i)}),e7=Pde,p$=E.forwardRef((t,e)=>{const{prefixCls:n,className:r,style:i,iconClassName:o}=t,l=At(`${n}-loading-icon`,r);return Tt.createElement(e7,{prefixCls:n,className:l,style:i,ref:e},Tt.createElement(HC,{className:o}))}),BP=()=>({width:0,opacity:0,transform:"scale(0)"}),DP=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),Ide=t=>{const{prefixCls:e,loading:n,existIcon:r,className:i,style:o}=t,l=!!n;return r?Tt.createElement(p$,{prefixCls:e,className:i,style:o}):Tt.createElement(Wf,{visible:l,motionName:`${e}-loading-icon-motion`,motionLeave:l,removeOnLeave:!0,onAppearStart:BP,onAppearActive:DP,onEnterStart:BP,onEnterActive:DP,onLeaveStart:DP,onLeaveActive:BP},(f,s)=>{let{className:p,style:v}=f;return Tt.createElement(p$,{prefixCls:e,className:i,style:Object.assign(Object.assign({},o),v),ref:s,iconClassName:p})})},Rde=Ide,m$=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),Ode=t=>{const{componentCls:e,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:o}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(r).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},m$(`${e}-primary`,i),m$(`${e}-danger`,o)]}},is=Math.round;function kP(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const g$=(t,e,n)=>n===0?t:t/100;function v0(t,e){const n=e||255;return t>n?n:t<0?0:t}class fT{constructor(e){j(this,"isValid",!0),j(this,"r",0),j(this,"g",0),j(this,"b",0),j(this,"a",1),j(this,"_h",void 0),j(this,"_s",void 0),j(this,"_l",void 0),j(this,"_v",void 0),j(this,"_max",void 0),j(this,"_min",void 0),j(this,"_brightness",void 0);function n(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let o=function(l){return i.startsWith(l)};var r=o;const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):o("rgb")?this.fromRgbString(i):o("hsl")?this.fromHslString(i):(o("hsv")||o("hsb"))&&this.fromHsvString(i)}else if(e instanceof fT)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=v0(e.r),this.g=v0(e.g),this.b=v0(e.b),this.a=typeof e.a=="number"?v0(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(o){const l=o/255;return l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=is(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,o=f=>(r[f]-this[f])*i+this[f],l={r:is(o("r")),g:is(o("g")),b:is(o("b")),a:is(o("a")*100)/100};return this._c(l)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=o=>is((this[o]*this.a+n[o]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const o=is(this.a*255).toString(16);e+=o.length===2?o:"0"+o}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=is(this.getSaturation()*100),r=is(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=v0(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,o){return parseInt(n[i]+n[o||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const S=is(r*255);this.r=S,this.g=S,this.b=S}let o=0,l=0,f=0;const s=e/60,p=(1-Math.abs(2*r-1))*n,v=p*(1-Math.abs(s%2-1));s>=0&&s<1?(o=p,l=v):s>=1&&s<2?(o=v,l=p):s>=2&&s<3?(l=p,f=v):s>=3&&s<4?(l=v,f=p):s>=4&&s<5?(o=v,f=p):s>=5&&s<6&&(o=p,f=v);const x=r-p/2;this.r=is((o+x)*255),this.g=is((l+x)*255),this.b=is((f+x)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const o=is(r*255);if(this.r=o,this.g=o,this.b=o,n<=0)return;const l=e/60,f=Math.floor(l),s=l-f,p=is(r*(1-n)*255),v=is(r*(1-n*s)*255),x=is(r*(1-n*(1-s))*255);switch(f){case 0:this.g=x,this.b=p;break;case 1:this.r=v,this.b=p;break;case 2:this.r=p,this.b=x;break;case 3:this.r=p,this.g=v;break;case 4:this.r=x,this.g=p;break;case 5:default:this.g=p,this.b=v;break}}fromHsvString(e){const n=kP(e,g$);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=kP(e,g$);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=kP(e,(r,i)=>i.includes("%")?is(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var Lde=["b"],Bde=["v"],FP=function(e){return Math.round(Number(e||0))},Dde=function(e){if(e instanceof fT)return e;if(e&&Kn(e)==="object"&&"h"in e&&"b"in e){var n=e,r=n.b,i=Hr(n,Lde);return Ye(Ye({},i),{},{v:r})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},tb=function(t){Sc(n,t);var e=Gf(n);function n(r){return Di(this,n),e.call(this,Dde(r))}return ki(n,[{key:"toHsbString",value:function(){var i=this.toHsb(),o=FP(i.s*100),l=FP(i.b*100),f=FP(i.h),s=i.a,p="hsb(".concat(f,", ").concat(o,"%, ").concat(l,"%)"),v="hsba(".concat(f,", ").concat(o,"%, ").concat(l,"%, ").concat(s.toFixed(s===0?0:2),")");return s===1?p:v}},{key:"toHsb",value:function(){var i=this.toHsv(),o=i.v,l=Hr(i,Bde);return Ye(Ye({},l),{},{b:o,a:this.a})}}]),n}(fT),kde=function(e){return e instanceof tb?e:new tb(e)};kde("#1677ff");const Fde=(t,e)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",zde=(t,e)=>t?Fde(t,e):"";let Nde=function(){function t(e){Di(this,t);var n;if(this.cleared=!1,e instanceof t){this.metaColor=e.metaColor.clone(),this.colors=(n=e.colors)===null||n===void 0?void 0:n.map(i=>({color:new t(i.color),percent:i.percent})),this.cleared=e.cleared;return}const r=Array.isArray(e);r&&e.length?(this.colors=e.map(i=>{let{color:o,percent:l}=i;return{color:new t(o),percent:l}}),this.metaColor=new tb(this.colors[0].color.metaColor)):this.metaColor=new tb(r?"":e),(!e||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return ki(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return zde(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,i)=>{const o=n.colors[i];return r.percent===o.percent&&r.color.equals(o.color)}):this.toHexString()===n.toHexString()}}])}();const $de=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),jde=t=>({animationDuration:t,animationFillMode:"both"}),Ude=t=>({animationDuration:t,animationFillMode:"both"}),hT=function(t,e,n,r){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${t}-enter,
      ${o}${t}-appear
    `]:Object.assign(Object.assign({},jde(r)),{animationPlayState:"paused"}),[`${o}${t}-leave`]:Object.assign(Object.assign({},Ude(r)),{animationPlayState:"paused"}),[`
      ${o}${t}-enter${t}-enter-active,
      ${o}${t}-appear${t}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${o}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Vde=new ai("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Gde=new ai("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Hde=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:n}=t,r=`${n}-fade`,i=e?"&":"";return[hT(r,Vde,Gde,t.motionDurationMid,e),{[`
        ${i}${r}-enter,
        ${i}${r}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]},Wde=new ai("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Xde=new ai("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),qde=new ai("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Yde=new ai("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Zde=new ai("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Kde=new ai("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Jde=new ai("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Qde=new ai("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),efe={"move-up":{inKeyframes:Jde,outKeyframes:Qde},"move-down":{inKeyframes:Wde,outKeyframes:Xde},"move-left":{inKeyframes:qde,outKeyframes:Yde},"move-right":{inKeyframes:Zde,outKeyframes:Kde}},v$=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=efe[e];return[hT(r,i,o,t.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},t7=new ai("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),n7=new ai("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),r7=new ai("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),i7=new ai("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),tfe=new ai("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),nfe=new ai("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),rfe=new ai("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),ife=new ai("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),ofe={"slide-up":{inKeyframes:t7,outKeyframes:n7},"slide-down":{inKeyframes:r7,outKeyframes:i7},"slide-left":{inKeyframes:tfe,outKeyframes:nfe},"slide-right":{inKeyframes:rfe,outKeyframes:ife}},y$=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=ofe[e];return[hT(r,i,o,t.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},KD=new ai("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),sfe=new ai("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),_$=new ai("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),b$=new ai("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),afe=new ai("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),lfe=new ai("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),cfe=new ai("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),ufe=new ai("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),dfe=new ai("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ffe=new ai("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),hfe=new ai("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),pfe=new ai("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),mfe={zoom:{inKeyframes:KD,outKeyframes:sfe},"zoom-big":{inKeyframes:_$,outKeyframes:b$},"zoom-big-fast":{inKeyframes:_$,outKeyframes:b$},"zoom-left":{inKeyframes:cfe,outKeyframes:ufe},"zoom-right":{inKeyframes:dfe,outKeyframes:ffe},"zoom-up":{inKeyframes:afe,outKeyframes:lfe},"zoom-down":{inKeyframes:hfe,outKeyframes:pfe}},o7=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=mfe[e];return[hT(r,i,o,e==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},gfe=(t,e)=>{const{r:n,g:r,b:i,a:o}=t.toRgb(),l=new tb(t.toRgbString()).onBackground(e).toHsv();return o<=.5?l.v>.5:n*.299+r*.587+i*.114>192},s7=t=>{const{paddingInline:e,onlyIconSize:n,paddingBlock:r}=t;return $i(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},a7=t=>{var e,n,r,i,o,l;const f=(e=t.contentFontSize)!==null&&e!==void 0?e:t.fontSize,s=(n=t.contentFontSizeSM)!==null&&n!==void 0?n:t.fontSize,p=(r=t.contentFontSizeLG)!==null&&r!==void 0?r:t.fontSizeLG,v=(i=t.contentLineHeight)!==null&&i!==void 0?i:_S(f),x=(o=t.contentLineHeightSM)!==null&&o!==void 0?o:_S(s),S=(l=t.contentLineHeightLG)!==null&&l!==void 0?l:_S(p),M=gfe(new Nde(t.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:t.fontSizeLG,onlyIconSizeSM:t.fontSizeLG-2,onlyIconSizeLG:t.fontSizeLG+2,groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorBgTextHover,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:M,contentFontSize:f,contentFontSizeSM:s,contentFontSizeLG:p,contentLineHeight:v,contentLineHeightSM:x,contentLineHeightLG:S,paddingBlock:Math.max((t.controlHeight-f*v)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-s*x)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-p*S)/2-t.lineWidth,0)}},vfe=t=>{const{componentCls:e,iconCls:n,fontWeight:r}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Kt(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${e}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},SW(t)),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},l7=(t,e,n)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":n}}),yfe=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),_fe=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),bfe=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),JD=(t,e,n,r,i,o,l,f)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:e,borderColor:r||void 0,boxShadow:"none"},l7(t,Object.assign({background:e},l),Object.assign({background:e},f))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:o||void 0}})}),xfe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},bfe(t))}),wfe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),pT=(t,e,n,r)=>{const o=r&&["link","text"].includes(r)?wfe:xfe;return Object.assign(Object.assign({},o(t)),l7(t.componentCls,e,n))},QD=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:n},pT(t,r,i))}),e3=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:n},pT(t,r,i))}),t3=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),n3=(t,e,n,r)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},pT(t,n,r))}),ov=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-${n}`]:Object.assign({color:e,boxShadow:"none"},pT(t,r,i,n))}),Sfe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},QD(t,t.solidTextColor,t.colorBgSolid,{background:t.colorBgSolidHover},{background:t.colorBgSolidActive})),t3(t)),n3(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),ov(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),JD(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),Efe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},e3(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),t3(t)),n3(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),ov(t,t.colorLink,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),JD(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),Cfe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},QD(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),e3(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),t3(t)),n3(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),ov(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),ov(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),JD(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),Tfe=t=>{const{componentCls:e}=t;return{[`${e}-color-default`]:Sfe(t),[`${e}-color-primary`]:Efe(t),[`${e}-color-dangerous`]:Cfe(t)}},Afe=t=>Object.assign(Object.assign(Object.assign(Object.assign({},e3(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),ov(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),QD(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),ov(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),r3=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:i,lineHeight:o,borderRadius:l,buttonPaddingHorizontal:f,iconCls:s,buttonPaddingVertical:p}=t,v=`${n}-icon-only`;return[{[e]:{fontSize:i,lineHeight:o,height:r,padding:`${Kt(p)} ${Kt(f)}`,borderRadius:l,[`&${v}`]:{width:r,paddingInline:0,[`&${n}-compact-item`]:{flex:"none"},[`&${n}-round`]:{width:"auto"},[s]:{fontSize:t.buttonIconOnlyFontSize}},[`&${n}-loading`]:{opacity:t.opacityLoading,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${t.motionDurationSlow} ${t.motionEaseInOut}, opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`}}},{[`${n}${n}-circle${e}`]:yfe(t)},{[`${n}${n}-round${e}`]:_fe(t)}]},Mfe=t=>{const e=$i(t,{fontSize:t.contentFontSize,lineHeight:t.contentLineHeight});return r3(e,t.componentCls)},Pfe=t=>{const e=$i(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,lineHeight:t.contentLineHeightSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:t.paddingBlockSM,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return r3(e,`${t.componentCls}-sm`)},Ife=t=>{const e=$i(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,lineHeight:t.contentLineHeightLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:t.paddingBlockLG,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return r3(e,`${t.componentCls}-lg`)},Rfe=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},Ofe=Ss("Button",t=>{const e=s7(t);return[vfe(e),Mfe(e),Pfe(e),Ife(e),Rfe(e),Tfe(e),Afe(e),Ode(e)]},a7,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function Lfe(t,e,n){const{focusElCls:r,focus:i,borderElCls:o}=n,l=o?"> *":"",f=["hover",i?"focus":null,"active"].filter(Boolean).map(s=>`&:${s} ${l}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[f]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${l}`]:{zIndex:0}})}}function Bfe(t,e,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function mT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:n}=t,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},Lfe(t,r,e)),Bfe(n,r,e))}}function Dfe(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function kfe(t,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Ffe(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},Dfe(t,e)),kfe(t.componentCls,e))}}const zfe=t=>{const{componentCls:e,calc:n}=t;return{[e]:{[`&-compact-item${e}-primary`]:{[`&:not([disabled]) + ${e}-compact-item${e}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(t.lineWidth).mul(-1).equal(),insetInlineStart:n(t.lineWidth).mul(-1).equal(),display:"inline-block",width:t.lineWidth,height:`calc(100% + ${Kt(t.lineWidth)} * 2)`,backgroundColor:t.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${e}-primary`]:{[`&:not([disabled]) + ${e}-compact-vertical-item${e}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:n(t.lineWidth).mul(-1).equal(),insetInlineStart:n(t.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${Kt(t.lineWidth)} * 2)`,height:t.lineWidth,backgroundColor:t.colorPrimaryHover,content:'""'}}}}}}},Nfe=VD(["Button","compact"],t=>{const e=s7(t);return[mT(e),Ffe(e),zfe(e)]},a7);var $fe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jfe(t){if(typeof t=="object"&&t){let e=t==null?void 0:t.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}const Ufe={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},Vfe=Tt.forwardRef((t,e)=>{var n,r,i;const{loading:o=!1,prefixCls:l,color:f,variant:s,type:p,danger:v=!1,shape:x="default",size:S,styles:M,disabled:P,className:R,rootClassName:D,children:B,icon:O,iconPosition:k="start",ghost:$=!1,block:H=!1,htmlType:U="button",classNames:X,style:J={},autoInsertSpace:K}=t,Q=$fe(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),ce=p||"default",[ge,ae]=E.useMemo(()=>{if(f&&s)return[f,s];const Rn=Ufe[ce]||[];return v?["danger",Rn[1]]:Rn},[p,f,s,v]),Fe=ge==="danger"?"dangerous":ge,{getPrefixCls:Ae,direction:pe,button:fe}=E.useContext(Sr),xe=(n=K??(fe==null?void 0:fe.autoInsertSpace))!==null&&n!==void 0?n:!0,Re=Ae("btn",l),[ke,ze,Xe]=Ofe(Re),Ne=E.useContext(du),Qe=P??Ne,pt=E.useContext(JW),Ke=E.useMemo(()=>jfe(o),[o]),[ot,St]=E.useState(Ke.loading),[st,rt]=E.useState(!1),Rt=Al(e,E.createRef()),bt=E.Children.count(B)===1&&!O&&!LP(ae);E.useEffect(()=>{let Rn=null;Ke.delay>0?Rn=setTimeout(()=>{Rn=null,St(!0)},Ke.delay):St(Ke.loading);function Vn(){Rn&&(clearTimeout(Rn),Rn=null)}return Vn},[Ke]),E.useEffect(()=>{if(!Rt||!Rt.current||!xe)return;const Rn=Rt.current.textContent;bt&&eL(Rn)?st||rt(!0):st&&rt(!1)},[Rt]);const wt=Rn=>{const{onClick:Vn}=t;if(ot||Qe){Rn.preventDefault();return}Vn==null||Vn(Rn)},{compactSize:it,compactItemClassnames:Bt}=Hb(Re,pe),jt={large:"lg",small:"sm",middle:void 0},cn=hd(Rn=>{var Vn,rr;return(rr=(Vn=S??it)!==null&&Vn!==void 0?Vn:pt)!==null&&rr!==void 0?rr:Rn}),rn=cn&&jt[cn]||"",zt=ot?"loading":O,bn=Ml(Q,["navigate"]),Ot=At(Re,ze,Xe,{[`${Re}-${x}`]:x!=="default"&&x,[`${Re}-${ce}`]:ce,[`${Re}-dangerous`]:v,[`${Re}-color-${Fe}`]:Fe,[`${Re}-variant-${ae}`]:ae,[`${Re}-${rn}`]:rn,[`${Re}-icon-only`]:!B&&B!==0&&!!zt,[`${Re}-background-ghost`]:$&&!LP(ae),[`${Re}-loading`]:ot,[`${Re}-two-chinese-chars`]:st&&xe&&!ot,[`${Re}-block`]:H,[`${Re}-rtl`]:pe==="rtl",[`${Re}-icon-end`]:k==="end"},Bt,R,D,fe==null?void 0:fe.className),Nt=Object.assign(Object.assign({},fe==null?void 0:fe.style),J),Jt=At(X==null?void 0:X.icon,(r=fe==null?void 0:fe.classNames)===null||r===void 0?void 0:r.icon),on=Object.assign(Object.assign({},(M==null?void 0:M.icon)||{}),((i=fe==null?void 0:fe.styles)===null||i===void 0?void 0:i.icon)||{}),vn=O&&!ot?Tt.createElement(e7,{prefixCls:Re,className:Jt,style:on},O):Tt.createElement(Rde,{existIcon:!!O,prefixCls:Re,loading:ot}),hn=B||B===0?Mde(B,bt&&xe):null;if(bn.href!==void 0)return ke(Tt.createElement("a",Object.assign({},bn,{className:At(Ot,{[`${Re}-disabled`]:Qe}),href:Qe?void 0:bn.href,style:Nt,onClick:wt,ref:Rt,tabIndex:Qe?-1:0}),vn,hn));let wn=Tt.createElement("button",Object.assign({},Q,{type:U,className:Ot,style:Nt,onClick:wt,disabled:Qe,ref:Rt}),vn,hn,!!Bt&&Tt.createElement(Nfe,{key:"compact",prefixCls:Re}));return LP(ae)||(wn=Tt.createElement(YW,{component:"Button",disabled:ot},wn)),ke(wn)}),i3=Vfe;i3.Group=Tde;i3.__ANT_BUTTON=!0;const os=i3;function zP(t){return!!(t!=null&&t.then)}const Gfe=t=>{const{type:e,children:n,prefixCls:r,buttonProps:i,close:o,autoFocus:l,emitEvent:f,isSilent:s,quitOnNullishReturnValue:p,actionFn:v}=t,x=E.useRef(!1),S=E.useRef(null),[M,P]=mp(!1),R=function(){o==null||o.apply(void 0,arguments)};E.useEffect(()=>{let O=null;return l&&(O=setTimeout(()=>{var k;(k=S.current)===null||k===void 0||k.focus()})),()=>{O&&clearTimeout(O)}},[]);const D=O=>{zP(O)&&(P(!0),O.then(function(){P(!1,!0),R.apply(void 0,arguments),x.current=!1},k=>{if(P(!1,!0),x.current=!1,!(s!=null&&s()))return Promise.reject(k)}))},B=O=>{if(x.current)return;if(x.current=!0,!v){R();return}let k;if(f){if(k=v(O),p&&!zP(k)){x.current=!1,R(O);return}}else if(v.length)k=v(o),x.current=!1;else if(k=v(),!zP(k)){R();return}D(k)};return E.createElement(os,Object.assign({},QW(e),{onClick:B,loading:M,prefixCls:r},i,{ref:S}),n)},c7=Gfe,Wb=Tt.createContext({}),{Provider:u7}=Wb,Hfe=()=>{const{autoFocusButton:t,cancelButtonProps:e,cancelTextLocale:n,isSilent:r,mergedOkCancel:i,rootPrefixCls:o,close:l,onCancel:f,onConfirm:s}=E.useContext(Wb);return i?Tt.createElement(c7,{isSilent:r,actionFn:f,close:function(){l==null||l.apply(void 0,arguments),s==null||s(!1)},autoFocus:t==="cancel",buttonProps:e,prefixCls:`${o}-btn`},n):null},x$=Hfe,Wfe=()=>{const{autoFocusButton:t,close:e,isSilent:n,okButtonProps:r,rootPrefixCls:i,okTextLocale:o,okType:l,onConfirm:f,onOk:s}=E.useContext(Wb);return Tt.createElement(c7,{isSilent:n,type:l||"primary",actionFn:s,close:function(){e==null||e.apply(void 0,arguments),f==null||f(!0)},autoFocus:t==="ok",buttonProps:r,prefixCls:`${i}-btn`},o)},w$=Wfe;var d7=E.createContext(null),S$=[];function Xfe(t,e){var n=E.useState(function(){if(!Xs())return null;var P=document.createElement("div");return P}),r=ct(n,1),i=r[0],o=E.useRef(!1),l=E.useContext(d7),f=E.useState(S$),s=ct(f,2),p=s[0],v=s[1],x=l||(o.current?void 0:function(P){v(function(R){var D=[P].concat(sn(R));return D})});function S(){i.parentElement||document.body.appendChild(i),o.current=!0}function M(){var P;(P=i.parentElement)===null||P===void 0||P.removeChild(i),o.current=!1}return Ji(function(){return t?l?l(S):S():M(),M},[t]),Ji(function(){p.length&&(p.forEach(function(P){return P()}),v(S$))},[p]),[i,x]}function qfe(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var i,o;if(t){var l=getComputedStyle(t);r.scrollbarColor=l.scrollbarColor,r.scrollbarWidth=l.scrollbarWidth;var f=getComputedStyle(t,"::-webkit-scrollbar"),s=parseInt(f.width,10),p=parseInt(f.height,10);try{var v=s?"width: ".concat(f.width,";"):"",x=p?"height: ".concat(f.height,";"):"";Yu(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(v,`
`).concat(x,`
}`),e)}catch(P){console.error(P),i=s,o=p}}document.body.appendChild(n);var S=t&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,M=t&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),X_(e),{width:S,height:M}}function Yfe(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:qfe(t)}function Zfe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Kfe="rc-util-locker-".concat(Date.now()),E$=0;function Jfe(t){var e=!!t,n=E.useState(function(){return E$+=1,"".concat(Kfe,"_").concat(E$)}),r=ct(n,1),i=r[0];Ji(function(){if(e){var o=Yfe(document.body).width,l=Zfe();Yu(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(o,"px);"):"",`
}`),i)}else X_(i);return function(){X_(i)}},[e,i])}var C$=!1;function Qfe(t){return typeof t=="boolean"&&(C$=t),C$}var T$=function(e){return e===!1?!1:!Xs()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},o3=E.forwardRef(function(t,e){var n=t.open,r=t.autoLock,i=t.getContainer;t.debug;var o=t.autoDestroy,l=o===void 0?!0:o,f=t.children,s=E.useState(n),p=ct(s,2),v=p[0],x=p[1],S=v||n;E.useEffect(function(){(l||n)&&x(n)},[n,l]);var M=E.useState(function(){return T$(i)}),P=ct(M,2),R=P[0],D=P[1];E.useEffect(function(){var ce=T$(i);D(ce??null)});var B=Xfe(S&&!R),O=ct(B,2),k=O[0],$=O[1],H=R??k;Jfe(r&&n&&Xs()&&(H===k||H===document.body));var U=null;if(f&&wv(f)&&e){var X=f;U=X.ref}var J=xv(U,e);if(!S||!Xs()||R===void 0)return null;var K=H===!1||Qfe(),Q=f;return e&&(Q=E.cloneElement(f,{ref:J})),E.createElement(d7.Provider,{value:$},K?Q:rd.createPortal(Q,H))}),f7=E.createContext({});function ehe(){var t=Ye({},Db);return t.useId}var A$=0,M$=ehe();const h7=M$?function(e){var n=M$();return e||n}:function(e){var n=E.useState("ssr-id"),r=ct(n,2),i=r[0],o=r[1];return E.useEffect(function(){var l=A$;A$+=1,o("rc_unique_".concat(l))},[]),e||i};function P$(t,e,n){var r=e;return!r&&n&&(r="".concat(t,"-").concat(n)),r}function I$(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if(typeof n!="number"){var i=t.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function the(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},r=t.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=I$(i),n.top+=I$(i,!0),n}const nhe=E.memo(function(t){var e=t.children;return e},function(t,e){var n=e.shouldUpdate;return!n});var rhe={width:0,height:0,overflow:"hidden",outline:"none"},ihe={outline:"none"},p7=Tt.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,i=t.style,o=t.title,l=t.ariaId,f=t.footer,s=t.closable,p=t.closeIcon,v=t.onClose,x=t.children,S=t.bodyStyle,M=t.bodyProps,P=t.modalRender,R=t.onMouseDown,D=t.onMouseUp,B=t.holderRef,O=t.visible,k=t.forceRender,$=t.width,H=t.height,U=t.classNames,X=t.styles,J=Tt.useContext(f7),K=J.panel,Q=xv(B,K),ce=E.useRef(),ge=E.useRef();Tt.useImperativeHandle(e,function(){return{focus:function(){var ze;(ze=ce.current)===null||ze===void 0||ze.focus({preventScroll:!0})},changeActive:function(ze){var Xe=document,Ne=Xe.activeElement;ze&&Ne===ge.current?ce.current.focus({preventScroll:!0}):!ze&&Ne===ce.current&&ge.current.focus({preventScroll:!0})}}});var ae={};$!==void 0&&(ae.width=$),H!==void 0&&(ae.height=H);var ve=f?Tt.createElement("div",{className:At("".concat(n,"-footer"),U==null?void 0:U.footer),style:Ye({},X==null?void 0:X.footer)},f):null,Fe=o?Tt.createElement("div",{className:At("".concat(n,"-header"),U==null?void 0:U.header),style:Ye({},X==null?void 0:X.header)},Tt.createElement("div",{className:"".concat(n,"-title"),id:l},o)):null,Ae=E.useMemo(function(){return Kn(s)==="object"&&s!==null?s:s?{closeIcon:p??Tt.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[s,p,n]),pe=id(Ae,!0),fe=Kn(s)==="object"&&s.disabled,xe=s?Tt.createElement("button",Mn({type:"button",onClick:v,"aria-label":"Close"},pe,{className:"".concat(n,"-close"),disabled:fe}),Ae.closeIcon):null,Re=Tt.createElement("div",{className:At("".concat(n,"-content"),U==null?void 0:U.content),style:X==null?void 0:X.content},xe,Fe,Tt.createElement("div",Mn({className:At("".concat(n,"-body"),U==null?void 0:U.body),style:Ye(Ye({},S),X==null?void 0:X.body)},M),x),ve);return Tt.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?l:null,"aria-modal":"true",ref:Q,style:Ye(Ye({},i),ae),className:At(n,r),onMouseDown:R,onMouseUp:D},Tt.createElement("div",{ref:ce,tabIndex:0,style:ihe},Tt.createElement(nhe,{shouldUpdate:O||k},P?P(Re):Re)),Tt.createElement("div",{tabIndex:0,ref:ge,style:rhe}))}),m7=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.title,i=t.style,o=t.className,l=t.visible,f=t.forceRender,s=t.destroyOnClose,p=t.motionName,v=t.ariaId,x=t.onVisibleChanged,S=t.mousePosition,M=E.useRef(),P=E.useState(),R=ct(P,2),D=R[0],B=R[1],O={};D&&(O.transformOrigin=D);function k(){var $=the(M.current);B(S&&(S.x||S.y)?"".concat(S.x-$.left,"px ").concat(S.y-$.top,"px"):"")}return E.createElement(Wf,{visible:l,onVisibleChanged:x,onAppearPrepare:k,onEnterPrepare:k,forceRender:f,motionName:p,removeOnLeave:s,ref:M},function($,H){var U=$.className,X=$.style;return E.createElement(p7,Mn({},t,{ref:e,title:r,ariaId:v,prefixCls:n,holderRef:H,style:Ye(Ye(Ye({},X),i),O),className:At(o,U)}))})});m7.displayName="Content";var ohe=function(e){var n=e.prefixCls,r=e.style,i=e.visible,o=e.maskProps,l=e.motionName,f=e.className;return E.createElement(Wf,{key:"mask",visible:i,motionName:l,leavedClassName:"".concat(n,"-mask-hidden")},function(s,p){var v=s.className,x=s.style;return E.createElement("div",Mn({ref:p,style:Ye(Ye({},x),r),className:At("".concat(n,"-mask"),v,f)},o))})},she=function(e){var n=e.prefixCls,r=n===void 0?"rc-dialog":n,i=e.zIndex,o=e.visible,l=o===void 0?!1:o,f=e.keyboard,s=f===void 0?!0:f,p=e.focusTriggerAfterClose,v=p===void 0?!0:p,x=e.wrapStyle,S=e.wrapClassName,M=e.wrapProps,P=e.onClose,R=e.afterOpenChange,D=e.afterClose,B=e.transitionName,O=e.animation,k=e.closable,$=k===void 0?!0:k,H=e.mask,U=H===void 0?!0:H,X=e.maskTransitionName,J=e.maskAnimation,K=e.maskClosable,Q=K===void 0?!0:K,ce=e.maskStyle,ge=e.maskProps,ae=e.rootClassName,ve=e.classNames,Fe=e.styles,Ae=E.useRef(),pe=E.useRef(),fe=E.useRef(),xe=E.useState(l),Re=ct(xe,2),ke=Re[0],ze=Re[1],Xe=h7();function Ne(){IO(pe.current,document.activeElement)||(Ae.current=document.activeElement)}function Qe(){if(!IO(pe.current,document.activeElement)){var wt;(wt=fe.current)===null||wt===void 0||wt.focus()}}function pt(wt){if(wt)Qe();else{if(ze(!1),U&&Ae.current&&v){try{Ae.current.focus({preventScroll:!0})}catch{}Ae.current=null}ke&&(D==null||D())}R==null||R(wt)}function Ke(wt){P==null||P(wt)}var ot=E.useRef(!1),St=E.useRef(),st=function(){clearTimeout(St.current),ot.current=!0},rt=function(){St.current=setTimeout(function(){ot.current=!1})},lt=null;Q&&(lt=function(it){ot.current?ot.current=!1:pe.current===it.target&&Ke(it)});function Rt(wt){if(s&&wt.keyCode===nn.ESC){wt.stopPropagation(),Ke(wt);return}l&&wt.keyCode===nn.TAB&&fe.current.changeActive(!wt.shiftKey)}E.useEffect(function(){l&&(ze(!0),Ne())},[l]),E.useEffect(function(){return function(){clearTimeout(St.current)}},[]);var bt=Ye(Ye(Ye({zIndex:i},x),Fe==null?void 0:Fe.wrapper),{},{display:ke?null:"none"});return E.createElement("div",Mn({className:At("".concat(r,"-root"),ae)},id(e,{data:!0})),E.createElement(ohe,{prefixCls:r,visible:U&&l,motionName:P$(r,X,J),style:Ye(Ye({zIndex:i},ce),Fe==null?void 0:Fe.mask),maskProps:ge,className:ve==null?void 0:ve.mask}),E.createElement("div",Mn({tabIndex:-1,onKeyDown:Rt,className:At("".concat(r,"-wrap"),S,ve==null?void 0:ve.wrapper),ref:pe,onClick:lt,style:bt},M),E.createElement(m7,Mn({},e,{onMouseDown:st,onMouseUp:rt,ref:fe,closable:$,ariaId:Xe,prefixCls:r,visible:l&&ke,onClose:Ke,onVisibleChanged:pt,motionName:P$(r,B,O)}))))},g7=function(e){var n=e.visible,r=e.getContainer,i=e.forceRender,o=e.destroyOnClose,l=o===void 0?!1:o,f=e.afterClose,s=e.panelRef,p=E.useState(n),v=ct(p,2),x=v[0],S=v[1],M=E.useMemo(function(){return{panel:s}},[s]);return E.useEffect(function(){n&&S(!0)},[n]),!i&&l&&!x?null:E.createElement(f7.Provider,{value:M},E.createElement(o3,{open:n||i||x,autoDestroy:!1,getContainer:r,autoLock:n||x},E.createElement(she,Mn({},e,{destroyOnClose:l,afterClose:function(){f==null||f(),S(!1)}}))))};g7.displayName="Dialog";var Wh="RC_FORM_INTERNAL_HOOKS",Ni=function(){vs(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},gp=E.createContext({getFieldValue:Ni,getFieldsValue:Ni,getFieldError:Ni,getFieldWarning:Ni,getFieldsError:Ni,isFieldsTouched:Ni,isFieldTouched:Ni,isFieldValidating:Ni,isFieldsValidating:Ni,resetFields:Ni,setFields:Ni,setFieldValue:Ni,setFieldsValue:Ni,validateFields:Ni,submit:Ni,getInternalHooks:function(){return Ni(),{dispatch:Ni,initEntityValue:Ni,registerField:Ni,useSubscribe:Ni,setInitialValues:Ni,destroyForm:Ni,setCallbacks:Ni,registerWatch:Ni,getFields:Ni,setValidateMessages:Ni,setPreserve:Ni,getInitialValue:Ni}}}),nb=E.createContext(null);function tL(t){return t==null?[]:Array.isArray(t)?t:[t]}function ahe(t){return t&&!!t._init}function nL(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var rL=nL();function lhe(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function che(t,e,n){if(BD())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Y_(i,n.prototype),i}function iL(t){var e=typeof Map=="function"?new Map:void 0;return iL=function(r){if(r===null||!lhe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return che(r,arguments,yc(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Y_(i,r)},iL(t)}var uhe=/%[sdj%]/g,dhe=function(){};function oL(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function Ha(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var l=t.replace(uhe,function(f){if(f==="%%")return"%";if(i>=o)return f;switch(f){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return f}});return l}return t}function fhe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Qo(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||fhe(e)&&typeof t=="string"&&!t)}function hhe(t,e,n){var r=[],i=0,o=t.length;function l(f){r.push.apply(r,sn(f||[])),i++,i===o&&n(r)}t.forEach(function(f){e(f,l)})}function R$(t,e,n){var r=0,i=t.length;function o(l){if(l&&l.length){n(l);return}var f=r;r=r+1,f<i?e(t[f],o):n([])}o([])}function phe(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,sn(t[n]||[]))}),e}var O$=function(t){Sc(n,t);var e=Gf(n);function n(r,i){var o;return Di(this,n),o=e.call(this,"Async Validation Error"),j(wr(o),"errors",void 0),j(wr(o),"fields",void 0),o.errors=r,o.fields=i,o}return ki(n)}(iL(Error));function mhe(t,e,n,r,i){if(e.first){var o=new Promise(function(S,M){var P=function(B){return r(B),B.length?M(new O$(B,oL(B))):S(i)},R=phe(t);R$(R,n,P)});return o.catch(function(S){return S}),o}var l=e.firstFields===!0?Object.keys(t):e.firstFields||[],f=Object.keys(t),s=f.length,p=0,v=[],x=new Promise(function(S,M){var P=function(D){if(v.push.apply(v,D),p++,p===s)return r(v),v.length?M(new O$(v,oL(v))):S(i)};f.length||(r(v),S(i)),f.forEach(function(R){var D=t[R];l.indexOf(R)!==-1?R$(D,n,P):hhe(D,n,P)})});return x.catch(function(S){return S}),x}function ghe(t){return!!(t&&t.message!==void 0)}function vhe(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function L$(t,e){return function(n){var r;return t.fullFields?r=vhe(e,t.fullFields):r=e[n.field||t.fullField],ghe(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function B$(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];Kn(r)==="object"&&Kn(t[n])==="object"?t[n]=Ye(Ye({},t[n]),r):t[n]=r}}return t}var Dm="enum",yhe=function(e,n,r,i,o){e[Dm]=Array.isArray(e[Dm])?e[Dm]:[],e[Dm].indexOf(n)===-1&&i.push(Ha(o.messages[Dm],e.fullField,e[Dm].join(", ")))},_he=function(e,n,r,i,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(Ha(o.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var l=new RegExp(e.pattern);l.test(n)||i.push(Ha(o.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},bhe=function(e,n,r,i,o){var l=typeof e.len=="number",f=typeof e.min=="number",s=typeof e.max=="number",p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=n,x=null,S=typeof n=="number",M=typeof n=="string",P=Array.isArray(n);if(S?x="number":M?x="string":P&&(x="array"),!x)return!1;P&&(v=n.length),M&&(v=n.replace(p,"_").length),l?v!==e.len&&i.push(Ha(o.messages[x].len,e.fullField,e.len)):f&&!s&&v<e.min?i.push(Ha(o.messages[x].min,e.fullField,e.min)):s&&!f&&v>e.max?i.push(Ha(o.messages[x].max,e.fullField,e.max)):f&&s&&(v<e.min||v>e.max)&&i.push(Ha(o.messages[x].range,e.fullField,e.min,e.max))},v7=function(e,n,r,i,o,l){e.required&&(!r.hasOwnProperty(e.field)||Qo(n,l||e.type))&&i.push(Ha(o.messages.required,e.fullField))},pw;const xhe=function(){if(pw)return pw;var t="[a-fA-F\\d:]",e=function(U){return U&&U.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",l="(?:".concat(i.join("|"),")").concat(o),f=new RegExp("(?:^".concat(n,"$)|(?:^").concat(l,"$)")),s=new RegExp("^".concat(n,"$")),p=new RegExp("^".concat(l,"$")),v=function(U){return U&&U.exact?f:new RegExp("(?:".concat(e(U)).concat(n).concat(e(U),")|(?:").concat(e(U)).concat(l).concat(e(U),")"),"g")};v.v4=function(H){return H&&H.exact?s:new RegExp("".concat(e(H)).concat(n).concat(e(H)),"g")},v.v6=function(H){return H&&H.exact?p:new RegExp("".concat(e(H)).concat(l).concat(e(H)),"g")};var x="(?:(?:[a-z]+:)?//)",S="(?:\\S+(?::\\S*)?@)?",M=v.v4().source,P=v.v6().source,R="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",D="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",B="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",O="(?::\\d{2,5})?",k='(?:[/?#][^\\s"]*)?',$="(?:".concat(x,"|www\\.)").concat(S,"(?:localhost|").concat(M,"|").concat(P,"|").concat(R).concat(D).concat(B,")").concat(O).concat(k);return pw=new RegExp("(?:^".concat($,"$)"),"i"),pw};var D$={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},V0={integer:function(e){return V0.number(e)&&parseInt(e,10)===e},float:function(e){return V0.number(e)&&!V0.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Kn(e)==="object"&&!V0.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(D$.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(xhe())},hex:function(e){return typeof e=="string"&&!!e.match(D$.hex)}},whe=function(e,n,r,i,o){if(e.required&&n===void 0){v7(e,n,r,i,o);return}var l=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=e.type;l.indexOf(f)>-1?V0[f](n)||i.push(Ha(o.messages.types[f],e.fullField,e.type)):f&&Kn(n)!==e.type&&i.push(Ha(o.messages.types[f],e.fullField,e.type))},She=function(e,n,r,i,o){(/^\s+$/.test(n)||n==="")&&i.push(Ha(o.messages.whitespace,e.fullField))};const Kr={required:v7,whitespace:She,type:whe,range:bhe,enum:yhe,pattern:_he};var Ehe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o)}r(l)},Che=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(n==null&&!e.required)return r();Kr.required(e,n,i,l,o,"array"),n!=null&&(Kr.type(e,n,i,l,o),Kr.range(e,n,i,l,o))}r(l)},The=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&Kr.type(e,n,i,l,o)}r(l)},Ahe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n,"date")&&!e.required)return r();if(Kr.required(e,n,i,l,o),!Qo(n,"date")){var s;n instanceof Date?s=n:s=new Date(n),Kr.type(e,s,i,l,o),s&&Kr.range(e,s.getTime(),i,l,o)}}r(l)},Mhe="enum",Phe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&Kr[Mhe](e,n,i,l,o)}r(l)},Ihe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&(Kr.type(e,n,i,l,o),Kr.range(e,n,i,l,o))}r(l)},Rhe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&(Kr.type(e,n,i,l,o),Kr.range(e,n,i,l,o))}r(l)},Ohe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&Kr.type(e,n,i,l,o)}r(l)},Lhe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(n===""&&(n=void 0),Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&(Kr.type(e,n,i,l,o),Kr.range(e,n,i,l,o))}r(l)},Bhe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),n!==void 0&&Kr.type(e,n,i,l,o)}r(l)},Dhe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n,"string")&&!e.required)return r();Kr.required(e,n,i,l,o),Qo(n,"string")||Kr.pattern(e,n,i,l,o)}r(l)},khe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n)&&!e.required)return r();Kr.required(e,n,i,l,o),Qo(n)||Kr.type(e,n,i,l,o)}r(l)},Fhe=function(e,n,r,i,o){var l=[],f=Array.isArray(n)?"array":Kn(n);Kr.required(e,n,i,l,o,f),r(l)},zhe=function(e,n,r,i,o){var l=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Qo(n,"string")&&!e.required)return r();Kr.required(e,n,i,l,o,"string"),Qo(n,"string")||(Kr.type(e,n,i,l,o),Kr.range(e,n,i,l,o),Kr.pattern(e,n,i,l,o),e.whitespace===!0&&Kr.whitespace(e,n,i,l,o))}r(l)},NP=function(e,n,r,i,o){var l=e.type,f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Qo(n,l)&&!e.required)return r();Kr.required(e,n,i,f,o,l),Qo(n,l)||Kr.type(e,n,i,f,o)}r(f)};const h_={string:zhe,method:Ohe,number:Lhe,boolean:The,regexp:khe,integer:Rhe,float:Ihe,array:Che,object:Bhe,enum:Phe,pattern:Dhe,date:Ahe,url:NP,hex:NP,email:NP,required:Fhe,any:Ehe};var Xb=function(){function t(e){Di(this,t),j(this,"rules",null),j(this,"_messages",rL),this.define(e)}return ki(t,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(Kn(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var o=n[i];r.rules[i]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(n){return n&&(this._messages=B$(nL(),n)),this._messages}},{key:"validate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},l=n,f=i,s=o;if(typeof f=="function"&&(s=f,f={}),!this.rules||Object.keys(this.rules).length===0)return s&&s(null,l),Promise.resolve(l);function p(P){var R=[],D={};function B(k){if(Array.isArray(k)){var $;R=($=R).concat.apply($,sn(k))}else R.push(k)}for(var O=0;O<P.length;O++)B(P[O]);R.length?(D=oL(R),s(R,D)):s(null,l)}if(f.messages){var v=this.messages();v===rL&&(v=nL()),B$(v,f.messages),f.messages=v}else f.messages=this.messages();var x={},S=f.keys||Object.keys(this.rules);S.forEach(function(P){var R=r.rules[P],D=l[P];R.forEach(function(B){var O=B;typeof O.transform=="function"&&(l===n&&(l=Ye({},l)),D=l[P]=O.transform(D),D!=null&&(O.type=O.type||(Array.isArray(D)?"array":Kn(D)))),typeof O=="function"?O={validator:O}:O=Ye({},O),O.validator=r.getValidationMethod(O),O.validator&&(O.field=P,O.fullField=O.fullField||P,O.type=r.getType(O),x[P]=x[P]||[],x[P].push({rule:O,value:D,source:l,field:P}))})});var M={};return mhe(x,f,function(P,R){var D=P.rule,B=(D.type==="object"||D.type==="array")&&(Kn(D.fields)==="object"||Kn(D.defaultField)==="object");B=B&&(D.required||!D.required&&P.value),D.field=P.field;function O(X,J){return Ye(Ye({},J),{},{fullField:"".concat(D.fullField,".").concat(X),fullFields:D.fullFields?[].concat(sn(D.fullFields),[X]):[X]})}function k(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=Array.isArray(X)?X:[X];!f.suppressWarning&&J.length&&t.warning("async-validator:",J),J.length&&D.message!==void 0&&(J=[].concat(D.message));var K=J.map(L$(D,l));if(f.first&&K.length)return M[D.field]=1,R(K);if(!B)R(K);else{if(D.required&&!P.value)return D.message!==void 0?K=[].concat(D.message).map(L$(D,l)):f.error&&(K=[f.error(D,Ha(f.messages.required,D.field))]),R(K);var Q={};D.defaultField&&Object.keys(P.value).map(function(ae){Q[ae]=D.defaultField}),Q=Ye(Ye({},Q),P.rule.fields);var ce={};Object.keys(Q).forEach(function(ae){var ve=Q[ae],Fe=Array.isArray(ve)?ve:[ve];ce[ae]=Fe.map(O.bind(null,ae))});var ge=new t(ce);ge.messages(f.messages),P.rule.options&&(P.rule.options.messages=f.messages,P.rule.options.error=f.error),ge.validate(P.value,P.rule.options||f,function(ae){var ve=[];K&&K.length&&ve.push.apply(ve,sn(K)),ae&&ae.length&&ve.push.apply(ve,sn(ae)),R(ve.length?ve:null)})}}var $;if(D.asyncValidator)$=D.asyncValidator(D,P.value,k,P.source,f);else if(D.validator){try{$=D.validator(D,P.value,k,P.source,f)}catch(X){var H,U;(H=(U=console).error)===null||H===void 0||H.call(U,X),f.suppressValidatorError||setTimeout(function(){throw X},0),k(X.message)}$===!0?k():$===!1?k(typeof D.message=="function"?D.message(D.fullField||D.field):D.message||"".concat(D.fullField||D.field," fails")):$ instanceof Array?k($):$ instanceof Error&&k($.message)}$&&$.then&&$.then(function(){return k()},function(X){return k(X)})},function(P){p(P)},l)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!h_.hasOwnProperty(n.type))throw new Error(Ha("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),i=r.indexOf("message");return i!==-1&&r.splice(i,1),r.length===1&&r[0]==="required"?h_.required:h_[this.getType(n)]||void 0}}]),t}();j(Xb,"register",function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");h_[e]=n});j(Xb,"warning",dhe);j(Xb,"messages",rL);j(Xb,"validators",h_);var Ma="'${name}' is not a valid ${type}",y7={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ma,method:Ma,array:Ma,object:Ma,number:Ma,date:Ma,boolean:Ma,integer:Ma,float:Ma,regexp:Ma,email:Ma,url:Ma,hex:Ma},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},k$=Xb;function Nhe(t,e){return t.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return e[r]})}var F$="CODE_LOGIC_ERROR";function sL(t,e,n,r,i){return aL.apply(this,arguments)}function aL(){return aL=Ap(qs().mark(function t(e,n,r,i,o){var l,f,s,p,v,x,S,M,P;return qs().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return l=Ye({},r),delete l.ruleIndex,k$.warning=function(){},l.validator&&(f=l.validator,l.validator=function(){try{return f.apply(void 0,arguments)}catch(B){return console.error(B),Promise.reject(F$)}}),s=null,l&&l.type==="array"&&l.defaultField&&(s=l.defaultField,delete l.defaultField),p=new k$(j({},e,[l])),v=_g(y7,i.validateMessages),p.messages(v),x=[],D.prev=10,D.next=13,Promise.resolve(p.validate(j({},e,n),Ye({},i)));case 13:D.next=18;break;case 15:D.prev=15,D.t0=D.catch(10),D.t0.errors&&(x=D.t0.errors.map(function(B,O){var k=B.message,$=k===F$?v.default:k;return E.isValidElement($)?E.cloneElement($,{key:"error_".concat(O)}):$}));case 18:if(!(!x.length&&s)){D.next=23;break}return D.next=21,Promise.all(n.map(function(B,O){return sL("".concat(e,".").concat(O),B,s,i,o)}));case 21:return S=D.sent,D.abrupt("return",S.reduce(function(B,O){return[].concat(sn(B),sn(O))},[]));case 23:return M=Ye(Ye({},r),{},{name:e,enum:(r.enum||[]).join(", ")},o),P=x.map(function(B){return typeof B=="string"?Nhe(B,M):B}),D.abrupt("return",P);case 26:case"end":return D.stop()}},t,null,[[10,15]])})),aL.apply(this,arguments)}function $he(t,e,n,r,i,o){var l=t.join("."),f=n.map(function(v,x){var S=v.validator,M=Ye(Ye({},v),{},{ruleIndex:x});return S&&(M.validator=function(P,R,D){var B=!1,O=function(){for(var H=arguments.length,U=new Array(H),X=0;X<H;X++)U[X]=arguments[X];Promise.resolve().then(function(){vs(!B,"Your validator function has already return a promise. `callback` will be ignored."),B||D.apply(void 0,U)})},k=S(P,R,O);B=k&&typeof k.then=="function"&&typeof k.catch=="function",vs(B,"`callback` is deprecated. Please return a promise instead."),B&&k.then(function(){D()}).catch(function($){D($||" ")})}),M}).sort(function(v,x){var S=v.warningOnly,M=v.ruleIndex,P=x.warningOnly,R=x.ruleIndex;return!!S==!!P?M-R:S?1:-1}),s;if(i===!0)s=new Promise(function(){var v=Ap(qs().mark(function x(S,M){var P,R,D;return qs().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:P=0;case 1:if(!(P<f.length)){O.next=12;break}return R=f[P],O.next=5,sL(l,e,R,r,o);case 5:if(D=O.sent,!D.length){O.next=9;break}return M([{errors:D,rule:R}]),O.abrupt("return");case 9:P+=1,O.next=1;break;case 12:S([]);case 13:case"end":return O.stop()}},x)}));return function(x,S){return v.apply(this,arguments)}}());else{var p=f.map(function(v){return sL(l,e,v,r,o).then(function(x){return{errors:x,rule:v}})});s=(i?Uhe(p):jhe(p)).then(function(v){return Promise.reject(v)})}return s.catch(function(v){return v}),s}function jhe(t){return lL.apply(this,arguments)}function lL(){return lL=Ap(qs().mark(function t(e){return qs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(e).then(function(i){var o,l=(o=[]).concat.apply(o,sn(i));return l}));case 1:case"end":return r.stop()}},t)})),lL.apply(this,arguments)}function Uhe(t){return cL.apply(this,arguments)}function cL(){return cL=Ap(qs().mark(function t(e){var n;return qs().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=0,i.abrupt("return",new Promise(function(o){e.forEach(function(l){l.then(function(f){f.errors.length&&o([f]),n+=1,n===e.length&&o([])})})}));case 2:case"end":return i.stop()}},t)})),cL.apply(this,arguments)}function Bo(t){return tL(t)}function z$(t,e){var n={};return e.forEach(function(r){var i=Qc(t,r);n=ec(n,r,i)}),n}function kg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(r){return _7(e,r,n)})}function _7(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!e||!n&&t.length!==e.length?!1:e.every(function(r,i){return t[i]===r})}function Vhe(t,e){if(t===e)return!0;if(!t&&e||t&&!e||!t||!e||Kn(t)!=="object"||Kn(e)!=="object")return!1;var n=Object.keys(t),r=Object.keys(e),i=new Set([].concat(n,r));return sn(i).every(function(o){var l=t[o],f=e[o];return typeof l=="function"&&typeof f=="function"?!0:l===f})}function Ghe(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Kn(e.target)==="object"&&t in e.target?e.target[t]:e}function N$(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],o=e-n;return o>0?[].concat(sn(t.slice(0,n)),[i],sn(t.slice(n,e)),sn(t.slice(e+1,r))):o<0?[].concat(sn(t.slice(0,e)),sn(t.slice(e+1,n+1)),[i],sn(t.slice(n+1,r))):t}var Hhe=["name"],cl=[];function $P(t,e,n,r,i,o){return typeof t=="function"?t(e,n,"source"in o?{source:o.source}:{}):r!==i}var s3=function(t){Sc(n,t);var e=Gf(n);function n(r){var i;if(Di(this,n),i=e.call(this,r),j(wr(i),"state",{resetCount:0}),j(wr(i),"cancelRegisterFunc",null),j(wr(i),"mounted",!1),j(wr(i),"touched",!1),j(wr(i),"dirty",!1),j(wr(i),"validatePromise",void 0),j(wr(i),"prevValidating",void 0),j(wr(i),"errors",cl),j(wr(i),"warnings",cl),j(wr(i),"cancelRegister",function(){var s=i.props,p=s.preserve,v=s.isListField,x=s.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(v,p,Bo(x)),i.cancelRegisterFunc=null}),j(wr(i),"getNamePath",function(){var s=i.props,p=s.name,v=s.fieldContext,x=v.prefixName,S=x===void 0?[]:x;return p!==void 0?[].concat(sn(S),sn(p)):[]}),j(wr(i),"getRules",function(){var s=i.props,p=s.rules,v=p===void 0?[]:p,x=s.fieldContext;return v.map(function(S){return typeof S=="function"?S(x):S})}),j(wr(i),"refresh",function(){i.mounted&&i.setState(function(s){var p=s.resetCount;return{resetCount:p+1}})}),j(wr(i),"metaCache",null),j(wr(i),"triggerMetaEvent",function(s){var p=i.props.onMetaChange;if(p){var v=Ye(Ye({},i.getMeta()),{},{destroy:s});ME(i.metaCache,v)||p(v),i.metaCache=v}else i.metaCache=null}),j(wr(i),"onStoreChange",function(s,p,v){var x=i.props,S=x.shouldUpdate,M=x.dependencies,P=M===void 0?[]:M,R=x.onReset,D=v.store,B=i.getNamePath(),O=i.getValue(s),k=i.getValue(D),$=p&&kg(p,B);switch(v.type==="valueUpdate"&&v.source==="external"&&!ME(O,k)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=cl,i.warnings=cl,i.triggerMetaEvent()),v.type){case"reset":if(!p||$){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=cl,i.warnings=cl,i.triggerMetaEvent(),R==null||R(),i.refresh();return}break;case"remove":{if(S&&$P(S,s,D,O,k,v)){i.reRender();return}break}case"setField":{var H=v.data;if($){"touched"in H&&(i.touched=H.touched),"validating"in H&&!("originRCField"in H)&&(i.validatePromise=H.validating?Promise.resolve([]):null),"errors"in H&&(i.errors=H.errors||cl),"warnings"in H&&(i.warnings=H.warnings||cl),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in H&&kg(p,B,!0)){i.reRender();return}if(S&&!B.length&&$P(S,s,D,O,k,v)){i.reRender();return}break}case"dependenciesUpdate":{var U=P.map(Bo);if(U.some(function(X){return kg(v.relatedFields,X)})){i.reRender();return}break}default:if($||(!P.length||B.length||S)&&$P(S,s,D,O,k,v)){i.reRender();return}break}S===!0&&i.reRender()}),j(wr(i),"validateRules",function(s){var p=i.getNamePath(),v=i.getValue(),x=s||{},S=x.triggerName,M=x.validateOnly,P=M===void 0?!1:M,R=Promise.resolve().then(Ap(qs().mark(function D(){var B,O,k,$,H,U,X;return qs().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(i.mounted){K.next=2;break}return K.abrupt("return",[]);case 2:if(B=i.props,O=B.validateFirst,k=O===void 0?!1:O,$=B.messageVariables,H=B.validateDebounce,U=i.getRules(),S&&(U=U.filter(function(Q){return Q}).filter(function(Q){var ce=Q.validateTrigger;if(!ce)return!0;var ge=tL(ce);return ge.includes(S)})),!(H&&S)){K.next=10;break}return K.next=8,new Promise(function(Q){setTimeout(Q,H)});case 8:if(i.validatePromise===R){K.next=10;break}return K.abrupt("return",[]);case 10:return X=$he(p,v,U,s,k,$),X.catch(function(Q){return Q}).then(function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cl;if(i.validatePromise===R){var ce;i.validatePromise=null;var ge=[],ae=[];(ce=Q.forEach)===null||ce===void 0||ce.call(Q,function(ve){var Fe=ve.rule.warningOnly,Ae=ve.errors,pe=Ae===void 0?cl:Ae;Fe?ae.push.apply(ae,sn(pe)):ge.push.apply(ge,sn(pe))}),i.errors=ge,i.warnings=ae,i.triggerMetaEvent(),i.reRender()}}),K.abrupt("return",X);case 13:case"end":return K.stop()}},D)})));return P||(i.validatePromise=R,i.dirty=!0,i.errors=cl,i.warnings=cl,i.triggerMetaEvent(),i.reRender()),R}),j(wr(i),"isFieldValidating",function(){return!!i.validatePromise}),j(wr(i),"isFieldTouched",function(){return i.touched}),j(wr(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var s=i.props.fieldContext,p=s.getInternalHooks(Wh),v=p.getInitialValue;return v(i.getNamePath())!==void 0}),j(wr(i),"getErrors",function(){return i.errors}),j(wr(i),"getWarnings",function(){return i.warnings}),j(wr(i),"isListField",function(){return i.props.isListField}),j(wr(i),"isList",function(){return i.props.isList}),j(wr(i),"isPreserve",function(){return i.props.preserve}),j(wr(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var s={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return s}),j(wr(i),"getOnlyChild",function(s){if(typeof s=="function"){var p=i.getMeta();return Ye(Ye({},i.getOnlyChild(s(i.getControlled(),p,i.props.fieldContext))),{},{isFunction:!0})}var v=zf(s);return v.length!==1||!E.isValidElement(v[0])?{child:v,isFunction:!1}:{child:v[0],isFunction:!1}}),j(wr(i),"getValue",function(s){var p=i.props.fieldContext.getFieldsValue,v=i.getNamePath();return Qc(s||p(!0),v)}),j(wr(i),"getControlled",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=i.props,v=p.name,x=p.trigger,S=p.validateTrigger,M=p.getValueFromEvent,P=p.normalize,R=p.valuePropName,D=p.getValueProps,B=p.fieldContext,O=S!==void 0?S:B.validateTrigger,k=i.getNamePath(),$=B.getInternalHooks,H=B.getFieldsValue,U=$(Wh),X=U.dispatch,J=i.getValue(),K=D||function(ve){return j({},R,ve)},Q=s[x],ce=v!==void 0?K(J):{},ge=Ye(Ye({},s),ce);ge[x]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var ve,Fe=arguments.length,Ae=new Array(Fe),pe=0;pe<Fe;pe++)Ae[pe]=arguments[pe];M?ve=M.apply(void 0,Ae):ve=Ghe.apply(void 0,[R].concat(Ae)),P&&(ve=P(ve,J,H(!0))),X({type:"updateValue",namePath:k,value:ve}),Q&&Q.apply(void 0,Ae)};var ae=tL(O||[]);return ae.forEach(function(ve){var Fe=ge[ve];ge[ve]=function(){Fe&&Fe.apply(void 0,arguments);var Ae=i.props.rules;Ae&&Ae.length&&X({type:"validateField",namePath:k,triggerName:ve})}}),ge}),r.fieldContext){var o=r.fieldContext.getInternalHooks,l=o(Wh),f=l.initEntityValue;f(wr(i))}return i}return ki(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.shouldUpdate,l=i.fieldContext;if(this.mounted=!0,l){var f=l.getInternalHooks,s=f(Wh),p=s.registerField;this.cancelRegisterFunc=p(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,o=this.props.children,l=this.getOnlyChild(o),f=l.child,s=l.isFunction,p;return s?p=f:E.isValidElement(f)?p=E.cloneElement(f,this.getControlled(f.props)):(vs(!f,"`children` of Field is not validate ReactElement."),p=f),E.createElement(E.Fragment,{key:i},p)}}]),n}(E.Component);j(s3,"contextType",gp);j(s3,"defaultProps",{trigger:"onChange",valuePropName:"value"});function a3(t){var e=t.name,n=Hr(t,Hhe),r=E.useContext(gp),i=E.useContext(nb),o=e!==void 0?Bo(e):void 0,l="keep";return n.isListField||(l="_".concat((o||[]).join("_"))),E.createElement(s3,Mn({key:l,name:o,isListField:!!i},n,{fieldContext:r}))}function b7(t){var e=t.name,n=t.initialValue,r=t.children,i=t.rules,o=t.validateTrigger,l=t.isListField,f=E.useContext(gp),s=E.useContext(nb),p=E.useRef({keys:[],id:0}),v=p.current,x=E.useMemo(function(){var R=Bo(f.prefixName)||[];return[].concat(sn(R),sn(Bo(e)))},[f.prefixName,e]),S=E.useMemo(function(){return Ye(Ye({},f),{},{prefixName:x})},[f,x]),M=E.useMemo(function(){return{getKey:function(D){var B=x.length,O=D[B];return[v.keys[O],D.slice(B+1)]}}},[x]);if(typeof r!="function")return vs(!1,"Form.List only accepts function as children."),null;var P=function(D,B,O){var k=O.source;return k==="internal"?!1:D!==B};return E.createElement(nb.Provider,{value:M},E.createElement(gp.Provider,{value:S},E.createElement(a3,{name:[],shouldUpdate:P,rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:l??!!s},function(R,D){var B=R.value,O=B===void 0?[]:B,k=R.onChange,$=f.getFieldValue,H=function(){var K=$(x||[]);return K||[]},U={add:function(K,Q){var ce=H();Q>=0&&Q<=ce.length?(v.keys=[].concat(sn(v.keys.slice(0,Q)),[v.id],sn(v.keys.slice(Q))),k([].concat(sn(ce.slice(0,Q)),[K],sn(ce.slice(Q))))):(v.keys=[].concat(sn(v.keys),[v.id]),k([].concat(sn(ce),[K]))),v.id+=1},remove:function(K){var Q=H(),ce=new Set(Array.isArray(K)?K:[K]);ce.size<=0||(v.keys=v.keys.filter(function(ge,ae){return!ce.has(ae)}),k(Q.filter(function(ge,ae){return!ce.has(ae)})))},move:function(K,Q){if(K!==Q){var ce=H();K<0||K>=ce.length||Q<0||Q>=ce.length||(v.keys=N$(v.keys,K,Q),k(N$(ce,K,Q)))}}},X=O||[];return Array.isArray(X)||(X=[]),r(X.map(function(J,K){var Q=v.keys[K];return Q===void 0&&(v.keys[K]=v.id,Q=v.keys[K],v.id+=1),{name:K,key:Q,isListField:!0}}),U,D)})))}function Whe(t){var e=!1,n=t.length,r=[];return t.length?new Promise(function(i,o){t.forEach(function(l,f){l.catch(function(s){return e=!0,s}).then(function(s){n-=1,r[f]=s,!(n>0)&&(e&&o(r),i(r))})})}):Promise.resolve([])}var x7="__@field_split__";function jP(t){return t.map(function(e){return"".concat(Kn(e),":").concat(e)}).join(x7)}var km=function(){function t(){Di(this,t),j(this,"kvs",new Map)}return ki(t,[{key:"set",value:function(n,r){this.kvs.set(jP(n),r)}},{key:"get",value:function(n){return this.kvs.get(jP(n))}},{key:"update",value:function(n,r){var i=this.get(n),o=r(i);o?this.set(n,o):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(jP(n))}},{key:"map",value:function(n){return sn(this.kvs.entries()).map(function(r){var i=ct(r,2),o=i[0],l=i[1],f=o.split(x7);return n({key:f.map(function(s){var p=s.match(/^([^:]*):(.*)$/),v=ct(p,3),x=v[1],S=v[2];return x==="number"?Number(S):S}),value:l})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var i=r.key,o=r.value;return n[i.join(".")]=o,null}),n}}]),t}(),Xhe=["name"],qhe=ki(function t(e){var n=this;Di(this,t),j(this,"formHooked",!1),j(this,"forceRootUpdate",void 0),j(this,"subscribable",!0),j(this,"store",{}),j(this,"fieldEntities",[]),j(this,"initialValues",{}),j(this,"callbacks",{}),j(this,"validateMessages",null),j(this,"preserve",null),j(this,"lastValidatePromise",null),j(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),j(this,"getInternalHooks",function(r){return r===Wh?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(vs(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),j(this,"useSubscribe",function(r){n.subscribable=r}),j(this,"prevWithoutPreserves",null),j(this,"setInitialValues",function(r,i){if(n.initialValues=r||{},i){var o,l=_g(r,n.store);(o=n.prevWithoutPreserves)===null||o===void 0||o.map(function(f){var s=f.key;l=ec(l,s,Qc(r,s))}),n.prevWithoutPreserves=null,n.updateStore(l)}}),j(this,"destroyForm",function(r){if(r)n.updateStore({});else{var i=new km;n.getFieldEntities(!0).forEach(function(o){n.isMergedPreserve(o.isPreserve())||i.set(o.getNamePath(),!0)}),n.prevWithoutPreserves=i}}),j(this,"getInitialValue",function(r){var i=Qc(n.initialValues,r);return r.length?_g(i):i}),j(this,"setCallbacks",function(r){n.callbacks=r}),j(this,"setValidateMessages",function(r){n.validateMessages=r}),j(this,"setPreserve",function(r){n.preserve=r}),j(this,"watchList",[]),j(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(i){return i!==r})}}),j(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var i=n.getFieldsValue(),o=n.getFieldsValue(!0);n.watchList.forEach(function(l){l(i,o,r)})}}),j(this,"timeoutId",null),j(this,"warningUnhooked",function(){}),j(this,"updateStore",function(r){n.store=r}),j(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(i){return i.getNamePath().length}):n.fieldEntities}),j(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new km;return n.getFieldEntities(r).forEach(function(o){var l=o.getNamePath();i.set(l,o)}),i}),j(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var i=n.getFieldsMap(!0);return r.map(function(o){var l=Bo(o);return i.get(l)||{INVALIDATE_NAME_PATH:Bo(o)}})}),j(this,"getFieldsValue",function(r,i){n.warningUnhooked();var o,l,f;if(r===!0||Array.isArray(r)?(o=r,l=i):r&&Kn(r)==="object"&&(f=r.strict,l=r.filter),o===!0&&!l)return n.store;var s=n.getFieldEntitiesForNamePathList(Array.isArray(o)?o:null),p=[];return s.forEach(function(v){var x,S,M="INVALIDATE_NAME_PATH"in v?v.INVALIDATE_NAME_PATH:v.getNamePath();if(f){var P,R;if((P=(R=v).isList)!==null&&P!==void 0&&P.call(R))return}else if(!o&&(x=(S=v).isListField)!==null&&x!==void 0&&x.call(S))return;if(!l)p.push(M);else{var D="getMeta"in v?v.getMeta():null;l(D)&&p.push(M)}}),z$(n.store,p.map(Bo))}),j(this,"getFieldValue",function(r){n.warningUnhooked();var i=Bo(r);return Qc(n.store,i)}),j(this,"getFieldsError",function(r){n.warningUnhooked();var i=n.getFieldEntitiesForNamePathList(r);return i.map(function(o,l){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:Bo(r[l]),errors:[],warnings:[]}})}),j(this,"getFieldError",function(r){n.warningUnhooked();var i=Bo(r),o=n.getFieldsError([i])[0];return o.errors}),j(this,"getFieldWarning",function(r){n.warningUnhooked();var i=Bo(r),o=n.getFieldsError([i])[0];return o.warnings}),j(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var l=i[0],f=i[1],s,p=!1;i.length===0?s=null:i.length===1?Array.isArray(l)?(s=l.map(Bo),p=!1):(s=null,p=l):(s=l.map(Bo),p=f);var v=n.getFieldEntities(!0),x=function(D){return D.isFieldTouched()};if(!s)return p?v.every(function(R){return x(R)||R.isList()}):v.some(x);var S=new km;s.forEach(function(R){S.set(R,[])}),v.forEach(function(R){var D=R.getNamePath();s.forEach(function(B){B.every(function(O,k){return D[k]===O})&&S.update(B,function(O){return[].concat(sn(O),[R])})})});var M=function(D){return D.some(x)},P=S.map(function(R){var D=R.value;return D});return p?P.every(M):P.some(M)}),j(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),j(this,"isFieldsValidating",function(r){n.warningUnhooked();var i=n.getFieldEntities();if(!r)return i.some(function(l){return l.isFieldValidating()});var o=r.map(Bo);return i.some(function(l){var f=l.getNamePath();return kg(o,f)&&l.isFieldValidating()})}),j(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),j(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new km,o=n.getFieldEntities(!0);o.forEach(function(s){var p=s.props.initialValue,v=s.getNamePath();if(p!==void 0){var x=i.get(v)||new Set;x.add({entity:s,value:p}),i.set(v,x)}});var l=function(p){p.forEach(function(v){var x=v.props.initialValue;if(x!==void 0){var S=v.getNamePath(),M=n.getInitialValue(S);if(M!==void 0)vs(!1,"Form already set 'initialValues' with path '".concat(S.join("."),"'. Field can not overwrite it."));else{var P=i.get(S);if(P&&P.size>1)vs(!1,"Multiple Field with path '".concat(S.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(P){var R=n.getFieldValue(S),D=v.isListField();!D&&(!r.skipExist||R===void 0)&&n.updateStore(ec(n.store,S,sn(P)[0].value))}}}})},f;r.entities?f=r.entities:r.namePathList?(f=[],r.namePathList.forEach(function(s){var p=i.get(s);if(p){var v;(v=f).push.apply(v,sn(sn(p).map(function(x){return x.entity})))}})):f=o,l(f)}),j(this,"resetFields",function(r){n.warningUnhooked();var i=n.store;if(!r){n.updateStore(_g(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(i,null,{type:"reset"}),n.notifyWatch();return}var o=r.map(Bo);o.forEach(function(l){var f=n.getInitialValue(l);n.updateStore(ec(n.store,l,f))}),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(i,o,{type:"reset"}),n.notifyWatch(o)}),j(this,"setFields",function(r){n.warningUnhooked();var i=n.store,o=[];r.forEach(function(l){var f=l.name,s=Hr(l,Xhe),p=Bo(f);o.push(p),"value"in s&&n.updateStore(ec(n.store,p,s.value)),n.notifyObservers(i,[p],{type:"setField",data:l})}),n.notifyWatch(o)}),j(this,"getFields",function(){var r=n.getFieldEntities(!0),i=r.map(function(o){var l=o.getNamePath(),f=o.getMeta(),s=Ye(Ye({},f),{},{name:l,value:n.getFieldValue(l)});return Object.defineProperty(s,"originRCField",{value:!0}),s});return i}),j(this,"initEntityValue",function(r){var i=r.props.initialValue;if(i!==void 0){var o=r.getNamePath(),l=Qc(n.store,o);l===void 0&&n.updateStore(ec(n.store,o,i))}}),j(this,"isMergedPreserve",function(r){var i=r!==void 0?r:n.preserve;return i??!0}),j(this,"registerField",function(r){n.fieldEntities.push(r);var i=r.getNamePath();if(n.notifyWatch([i]),r.props.initialValue!==void 0){var o=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(o,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(l,f){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(x){return x!==r}),!n.isMergedPreserve(f)&&(!l||s.length>1)){var p=l?void 0:n.getInitialValue(i);if(i.length&&n.getFieldValue(i)!==p&&n.fieldEntities.every(function(x){return!_7(x.getNamePath(),i)})){var v=n.store;n.updateStore(ec(v,i,p,!0)),n.notifyObservers(v,[i],{type:"remove"}),n.triggerDependenciesUpdate(v,i)}}n.notifyWatch([i])}}),j(this,"dispatch",function(r){switch(r.type){case"updateValue":{var i=r.namePath,o=r.value;n.updateValue(i,o);break}case"validateField":{var l=r.namePath,f=r.triggerName;n.validateFields([l],{triggerName:f});break}}}),j(this,"notifyObservers",function(r,i,o){if(n.subscribable){var l=Ye(Ye({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(f){var s=f.onStoreChange;s(r,i,l)})}else n.forceRootUpdate()}),j(this,"triggerDependenciesUpdate",function(r,i){var o=n.getDependencyChildrenFields(i);return o.length&&n.validateFields(o),n.notifyObservers(r,o,{type:"dependenciesUpdate",relatedFields:[i].concat(sn(o))}),o}),j(this,"updateValue",function(r,i){var o=Bo(r),l=n.store;n.updateStore(ec(n.store,o,i)),n.notifyObservers(l,[o],{type:"valueUpdate",source:"internal"}),n.notifyWatch([o]);var f=n.triggerDependenciesUpdate(l,o),s=n.callbacks.onValuesChange;if(s){var p=z$(n.store,[o]);s(p,n.getFieldsValue())}n.triggerOnFieldsChange([o].concat(sn(f)))}),j(this,"setFieldsValue",function(r){n.warningUnhooked();var i=n.store;if(r){var o=_g(n.store,r);n.updateStore(o)}n.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),j(this,"setFieldValue",function(r,i){n.setFields([{name:r,value:i}])}),j(this,"getDependencyChildrenFields",function(r){var i=new Set,o=[],l=new km;n.getFieldEntities().forEach(function(s){var p=s.props.dependencies;(p||[]).forEach(function(v){var x=Bo(v);l.update(x,function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return S.add(s),S})})});var f=function s(p){var v=l.get(p)||new Set;v.forEach(function(x){if(!i.has(x)){i.add(x);var S=x.getNamePath();x.isFieldDirty()&&S.length&&(o.push(S),s(S))}})};return f(r),o}),j(this,"triggerOnFieldsChange",function(r,i){var o=n.callbacks.onFieldsChange;if(o){var l=n.getFields();if(i){var f=new km;i.forEach(function(p){var v=p.name,x=p.errors;f.set(v,x)}),l.forEach(function(p){p.errors=f.get(p.name)||p.errors})}var s=l.filter(function(p){var v=p.name;return kg(r,v)});s.length&&o(s,l)}}),j(this,"validateFields",function(r,i){n.warningUnhooked();var o,l;Array.isArray(r)||typeof r=="string"||typeof i=="string"?(o=r,l=i):l=r;var f=!!o,s=f?o.map(Bo):[],p=[],v=String(Date.now()),x=new Set,S=l||{},M=S.recursive,P=S.dirty;n.getFieldEntities(!0).forEach(function(O){if(f||s.push(O.getNamePath()),!(!O.props.rules||!O.props.rules.length)&&!(P&&!O.isFieldDirty())){var k=O.getNamePath();if(x.add(k.join(v)),!f||kg(s,k,M)){var $=O.validateRules(Ye({validateMessages:Ye(Ye({},y7),n.validateMessages)},l));p.push($.then(function(){return{name:k,errors:[],warnings:[]}}).catch(function(H){var U,X=[],J=[];return(U=H.forEach)===null||U===void 0||U.call(H,function(K){var Q=K.rule.warningOnly,ce=K.errors;Q?J.push.apply(J,sn(ce)):X.push.apply(X,sn(ce))}),X.length?Promise.reject({name:k,errors:X,warnings:J}):{name:k,errors:X,warnings:J}}))}}});var R=Whe(p);n.lastValidatePromise=R,R.catch(function(O){return O}).then(function(O){var k=O.map(function($){var H=$.name;return H});n.notifyObservers(n.store,k,{type:"validateFinish"}),n.triggerOnFieldsChange(k,O)});var D=R.then(function(){return n.lastValidatePromise===R?Promise.resolve(n.getFieldsValue(s)):Promise.reject([])}).catch(function(O){var k=O.filter(function($){return $&&$.errors.length});return Promise.reject({values:n.getFieldsValue(s),errorFields:k,outOfDate:n.lastValidatePromise!==R})});D.catch(function(O){return O});var B=s.filter(function(O){return x.has(O.join(v))});return n.triggerOnFieldsChange(B),D}),j(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var i=n.callbacks.onFinish;if(i)try{i(r)}catch(o){console.error(o)}}).catch(function(r){var i=n.callbacks.onFinishFailed;i&&i(r)})}),this.forceRootUpdate=e});function l3(t){var e=E.useRef(),n=E.useState({}),r=ct(n,2),i=r[1];if(!e.current)if(t)e.current=t;else{var o=function(){i({})},l=new qhe(o);e.current=l.getForm()}return[e.current]}var uL=E.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),w7=function(e){var n=e.validateMessages,r=e.onFormChange,i=e.onFormFinish,o=e.children,l=E.useContext(uL),f=E.useRef({});return E.createElement(uL.Provider,{value:Ye(Ye({},l),{},{validateMessages:Ye(Ye({},l.validateMessages),n),triggerFormChange:function(p,v){r&&r(p,{changedFields:v,forms:f.current}),l.triggerFormChange(p,v)},triggerFormFinish:function(p,v){i&&i(p,{values:v,forms:f.current}),l.triggerFormFinish(p,v)},registerForm:function(p,v){p&&(f.current=Ye(Ye({},f.current),{},j({},p,v))),l.registerForm(p,v)},unregisterForm:function(p){var v=Ye({},f.current);delete v[p],f.current=v,l.unregisterForm(p)}})},o)},Yhe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Zhe=function(e,n){var r=e.name,i=e.initialValues,o=e.fields,l=e.form,f=e.preserve,s=e.children,p=e.component,v=p===void 0?"form":p,x=e.validateMessages,S=e.validateTrigger,M=S===void 0?"onChange":S,P=e.onValuesChange,R=e.onFieldsChange,D=e.onFinish,B=e.onFinishFailed,O=e.clearOnDestroy,k=Hr(e,Yhe),$=E.useRef(null),H=E.useContext(uL),U=l3(l),X=ct(U,1),J=X[0],K=J.getInternalHooks(Wh),Q=K.useSubscribe,ce=K.setInitialValues,ge=K.setCallbacks,ae=K.setValidateMessages,ve=K.setPreserve,Fe=K.destroyForm;E.useImperativeHandle(n,function(){return Ye(Ye({},J),{},{nativeElement:$.current})}),E.useEffect(function(){return H.registerForm(r,J),function(){H.unregisterForm(r)}},[H,J,r]),ae(Ye(Ye({},H.validateMessages),x)),ge({onValuesChange:P,onFieldsChange:function(Ne){if(H.triggerFormChange(r,Ne),R){for(var Qe=arguments.length,pt=new Array(Qe>1?Qe-1:0),Ke=1;Ke<Qe;Ke++)pt[Ke-1]=arguments[Ke];R.apply(void 0,[Ne].concat(pt))}},onFinish:function(Ne){H.triggerFormFinish(r,Ne),D&&D(Ne)},onFinishFailed:B}),ve(f);var Ae=E.useRef(null);ce(i,!Ae.current),Ae.current||(Ae.current=!0),E.useEffect(function(){return function(){return Fe(O)}},[]);var pe,fe=typeof s=="function";if(fe){var xe=J.getFieldsValue(!0);pe=s(xe,J)}else pe=s;Q(!fe);var Re=E.useRef();E.useEffect(function(){Vhe(Re.current||[],o||[])||J.setFields(o||[]),Re.current=o},[o,J]);var ke=E.useMemo(function(){return Ye(Ye({},J),{},{validateTrigger:M})},[J,M]),ze=E.createElement(nb.Provider,{value:null},E.createElement(gp.Provider,{value:ke},pe));return v===!1?ze:E.createElement(v,Mn({},k,{ref:$,onSubmit:function(Ne){Ne.preventDefault(),Ne.stopPropagation(),J.submit()},onReset:function(Ne){var Qe;Ne.preventDefault(),J.resetFields(),(Qe=k.onReset)===null||Qe===void 0||Qe.call(k,Ne)}}),ze)};function $$(t){try{return JSON.stringify(t)}catch{return Math.random()}}function S7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=i===void 0?{}:i,l=ahe(o)?{form:o}:o,f=l.form,s=E.useState(),p=ct(s,2),v=p[0],x=p[1],S=E.useMemo(function(){return $$(v)},[v]),M=E.useRef(S);M.current=S;var P=E.useContext(gp),R=f||P,D=R&&R._init,B=Bo(r),O=E.useRef(B);return O.current=B,E.useEffect(function(){if(D){var k=R.getFieldsValue,$=R.getInternalHooks,H=$(Wh),U=H.registerWatch,X=function(ce,ge){var ae=l.preserve?ge:ce;return typeof r=="function"?r(ae):Qc(ae,O.current)},J=U(function(Q,ce){var ge=X(Q,ce),ae=$$(ge);M.current!==ae&&(M.current=ae,x(ge))}),K=X(k(),k(!0));return v!==K&&x(K),J}},[D]),v}var Khe=E.forwardRef(Zhe),Tv=Khe;Tv.FormProvider=w7;Tv.Field=a3;Tv.List=b7;Tv.useForm=l3;Tv.useWatch=S7;const od=E.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),E7=E.createContext(null),C7=t=>{const e=Ml(t,["prefixCls"]);return E.createElement(w7,Object.assign({},e))},c3=E.createContext({prefixCls:""}),Ys=E.createContext({}),Jhe=t=>{let{children:e,status:n,override:r}=t;const i=E.useContext(Ys),o=E.useMemo(()=>{const l=Object.assign({},i);return r&&delete l.isFormItemInput,n&&(delete l.status,delete l.hasFeedback,delete l.feedbackIcon),l},[n,r,i]);return E.createElement(Ys.Provider,{value:o},e)},T7=E.createContext(void 0),Qhe=t=>{const{space:e,form:n,children:r}=t;if(r==null)return null;let i=r;return n&&(i=Tt.createElement(Jhe,{override:!0,status:!0},i)),e&&(i=Tt.createElement(bde,null,i)),i},sv=Qhe;function j$(t){if(t)return{closable:t.closable,closeIcon:t.closeIcon}}function U$(t){const{closable:e,closeIcon:n}=t||{};return Tt.useMemo(()=>{if(!e&&(e===!1||n===!1||n===null))return!1;if(e===void 0&&n===void 0)return null;let r={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return e&&typeof e=="object"&&(r=Object.assign(Object.assign({},r),e)),r},[e,n])}function V$(){const t={};for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(i=>{i&&Object.keys(i).forEach(o=>{i[o]!==void 0&&(t[o]=i[o])})}),t}const epe={};function tpe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:epe;const r=U$(t),i=U$(e),o=typeof r!="boolean"?!!(r!=null&&r.disabled):!1,l=Tt.useMemo(()=>Object.assign({closeIcon:Tt.createElement(jb,null)},n),[n]),f=Tt.useMemo(()=>r===!1?!1:r?V$(l,i,r):i===!1?!1:i?V$(l,i):l.closable?l:!1,[r,i,l]);return Tt.useMemo(()=>{if(f===!1)return[!1,null,o];const{closeIconRender:s}=l,{closeIcon:p}=f;let v=p;if(v!=null){s&&(v=s(p));const x=id(f,!0);Object.keys(x).length&&(v=Tt.isValidElement(v)?Tt.cloneElement(v,x):Tt.createElement("span",Object.assign({},x),v))}return[!0,v,o]},[f,l])}const npe=()=>Xs()&&window.document.documentElement,rpe=t=>{const{prefixCls:e,className:n,style:r,size:i,shape:o}=t,l=At({[`${e}-lg`]:i==="large",[`${e}-sm`]:i==="small"}),f=At({[`${e}-circle`]:o==="circle",[`${e}-square`]:o==="square",[`${e}-round`]:o==="round"}),s=E.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return E.createElement("span",{className:At(e,l,f,n),style:Object.assign(Object.assign({},s),r)})},gT=rpe,ipe=new ai("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),vT=t=>({height:t,lineHeight:Kt(t)}),Fg=t=>Object.assign({width:t},vT(t)),ope=t=>({background:t.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:ipe,animationDuration:t.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),UP=(t,e)=>Object.assign({width:e(t).mul(5).equal(),minWidth:e(t).mul(5).equal()},vT(t)),spe=t=>{const{skeletonAvatarCls:e,gradientFromColor:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o}=t;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},Fg(r)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},Fg(i)),[`${e}${e}-sm`]:Object.assign({},Fg(o))}},ape=t=>{const{controlHeight:e,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:l,calc:f}=t;return{[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:n},UP(e,f)),[`${r}-lg`]:Object.assign({},UP(i,f)),[`${r}-sm`]:Object.assign({},UP(o,f))}},G$=t=>Object.assign({width:t},vT(t)),lpe=t=>{const{skeletonImageCls:e,imageSizeBase:n,gradientFromColor:r,borderRadiusSM:i,calc:o}=t;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:r,borderRadius:i},G$(o(n).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},G$(n)),{maxWidth:o(n).mul(4).equal(),maxHeight:o(n).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},VP=(t,e,n)=>{const{skeletonButtonCls:r}=t;return{[`${n}${r}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:e}}},GP=(t,e)=>Object.assign({width:e(t).mul(2).equal(),minWidth:e(t).mul(2).equal()},vT(t)),cpe=t=>{const{borderRadiusSM:e,skeletonButtonCls:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:l,calc:f}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:e,width:f(r).mul(2).equal(),minWidth:f(r).mul(2).equal()},GP(r,f))},VP(t,r,n)),{[`${n}-lg`]:Object.assign({},GP(i,f))}),VP(t,i,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},GP(o,f))}),VP(t,o,`${n}-sm`))},upe=t=>{const{componentCls:e,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:i,skeletonButtonCls:o,skeletonInputCls:l,skeletonImageCls:f,controlHeight:s,controlHeightLG:p,controlHeightSM:v,gradientFromColor:x,padding:S,marginSM:M,borderRadius:P,titleHeight:R,blockRadius:D,paragraphLiHeight:B,controlHeightXS:O,paragraphMarginTop:k}=t;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:S,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:x},Fg(s)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},Fg(p)),[`${n}-sm`]:Object.assign({},Fg(v))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:R,background:x,borderRadius:D,[`+ ${i}`]:{marginBlockStart:v}},[i]:{padding:0,"> li":{width:"100%",height:B,listStyle:"none",background:x,borderRadius:D,"+ li":{marginBlockStart:O}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${r}, ${i} > li`]:{borderRadius:P}}},[`${e}-with-avatar ${e}-content`]:{[r]:{marginBlockStart:M,[`+ ${i}`]:{marginBlockStart:k}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},cpe(t)),spe(t)),ape(t)),lpe(t)),[`${e}${e}-block`]:{width:"100%",[o]:{width:"100%"},[l]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${r},
        ${i} > li,
        ${n},
        ${o},
        ${l},
        ${f}
      `]:Object.assign({},ope(t))}}},dpe=t=>{const{colorFillContent:e,colorFill:n}=t,r=e,i=n;return{color:r,colorGradientEnd:i,gradientFromColor:r,gradientToColor:i,titleHeight:t.controlHeight/2,blockRadius:t.borderRadiusSM,paragraphMarginTop:t.marginLG+t.marginXXS,paragraphLiHeight:t.controlHeight/2}},Av=Ss("Skeleton",t=>{const{componentCls:e,calc:n}=t,r=$i(t,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:n(t.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${t.gradientFromColor} 25%, ${t.gradientToColor} 37%, ${t.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[upe(r)]},dpe,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),fpe=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,shape:o="circle",size:l="default"}=t,{getPrefixCls:f}=E.useContext(Sr),s=f("skeleton",e),[p,v,x]=Av(s),S=Ml(t,["prefixCls","className"]),M=At(s,`${s}-element`,{[`${s}-active`]:i},n,r,v,x);return p(E.createElement("div",{className:M},E.createElement(gT,Object.assign({prefixCls:`${s}-avatar`,shape:o,size:l},S))))},hpe=fpe,ppe=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,block:o=!1,size:l="default"}=t,{getPrefixCls:f}=E.useContext(Sr),s=f("skeleton",e),[p,v,x]=Av(s),S=Ml(t,["prefixCls"]),M=At(s,`${s}-element`,{[`${s}-active`]:i,[`${s}-block`]:o},n,r,v,x);return p(E.createElement("div",{className:M},E.createElement(gT,Object.assign({prefixCls:`${s}-button`,size:l},S))))},mpe=ppe,gpe="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",vpe=t=>{const{prefixCls:e,className:n,rootClassName:r,style:i,active:o}=t,{getPrefixCls:l}=E.useContext(Sr),f=l("skeleton",e),[s,p,v]=Av(f),x=At(f,`${f}-element`,{[`${f}-active`]:o},n,r,p,v);return s(E.createElement("div",{className:x},E.createElement("div",{className:At(`${f}-image`,n),style:i},E.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${f}-image-svg`},E.createElement("title",null,"Image placeholder"),E.createElement("path",{d:gpe,className:`${f}-image-path`})))))},ype=vpe,_pe=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,block:o,size:l="default"}=t,{getPrefixCls:f}=E.useContext(Sr),s=f("skeleton",e),[p,v,x]=Av(s),S=Ml(t,["prefixCls"]),M=At(s,`${s}-element`,{[`${s}-active`]:i,[`${s}-block`]:o},n,r,v,x);return p(E.createElement("div",{className:M},E.createElement(gT,Object.assign({prefixCls:`${s}-input`,size:l},S))))},bpe=_pe,xpe=t=>{const{prefixCls:e,className:n,rootClassName:r,style:i,active:o,children:l}=t,{getPrefixCls:f}=E.useContext(Sr),s=f("skeleton",e),[p,v,x]=Av(s),S=At(s,`${s}-element`,{[`${s}-active`]:o},v,n,r,x);return p(E.createElement("div",{className:S},E.createElement("div",{className:At(`${s}-image`,n),style:i},l)))},wpe=xpe,Spe=(t,e)=>{const{width:n,rows:r=2}=e;if(Array.isArray(n))return n[t];if(r-1===t)return n},Epe=t=>{const{prefixCls:e,className:n,style:r,rows:i}=t,o=sn(new Array(i)).map((l,f)=>E.createElement("li",{key:f,style:{width:Spe(f,t)}}));return E.createElement("ul",{className:At(e,n),style:r},o)},Cpe=Epe,Tpe=t=>{let{prefixCls:e,className:n,width:r,style:i}=t;return E.createElement("h3",{className:At(e,n),style:Object.assign({width:r},i)})},Ape=Tpe;function HP(t){return t&&typeof t=="object"?t:{}}function Mpe(t,e){return t&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Ppe(t,e){return!t&&e?{width:"38%"}:t&&e?{width:"50%"}:{}}function Ipe(t,e){const n={};return(!t||!e)&&(n.width="61%"),!t&&e?n.rows=3:n.rows=2,n}const Mv=t=>{const{prefixCls:e,loading:n,className:r,rootClassName:i,style:o,children:l,avatar:f=!1,title:s=!0,paragraph:p=!0,active:v,round:x}=t,{getPrefixCls:S,direction:M,skeleton:P}=E.useContext(Sr),R=S("skeleton",e),[D,B,O]=Av(R);if(n||!("loading"in t)){const k=!!f,$=!!s,H=!!p;let U;if(k){const K=Object.assign(Object.assign({prefixCls:`${R}-avatar`},Mpe($,H)),HP(f));U=E.createElement("div",{className:`${R}-header`},E.createElement(gT,Object.assign({},K)))}let X;if($||H){let K;if($){const ce=Object.assign(Object.assign({prefixCls:`${R}-title`},Ppe(k,H)),HP(s));K=E.createElement(Ape,Object.assign({},ce))}let Q;if(H){const ce=Object.assign(Object.assign({prefixCls:`${R}-paragraph`},Ipe(k,$)),HP(p));Q=E.createElement(Cpe,Object.assign({},ce))}X=E.createElement("div",{className:`${R}-content`},K,Q)}const J=At(R,{[`${R}-with-avatar`]:k,[`${R}-active`]:v,[`${R}-rtl`]:M==="rtl",[`${R}-round`]:x},P==null?void 0:P.className,r,i,B,O);return D(E.createElement("div",{className:J,style:Object.assign(Object.assign({},P==null?void 0:P.style),o)},U,X))}return l??null};Mv.Button=mpe;Mv.Avatar=hpe;Mv.Input=bpe;Mv.Image=ype;Mv.Node=wpe;const Rpe=Mv;function H$(){}const Ope=E.createContext({add:H$,remove:H$});function Lpe(t){const e=E.useContext(Ope),n=E.useRef();return xo(i=>{if(i){const o=t?i.querySelector(t):i;e.add(o),n.current=o}else e.remove(n.current)})}const Bpe=()=>{const{cancelButtonProps:t,cancelTextLocale:e,onCancel:n}=E.useContext(Wb);return Tt.createElement(os,Object.assign({onClick:n},t),e)},W$=Bpe,Dpe=()=>{const{confirmLoading:t,okButtonProps:e,okType:n,okTextLocale:r,onOk:i}=E.useContext(Wb);return Tt.createElement(os,Object.assign({},QW(n),{loading:t,onClick:i},e),r)},X$=Dpe;function A7(t,e){return Tt.createElement("span",{className:`${t}-close-x`},e||Tt.createElement(jb,{className:`${t}-close-icon`}))}const M7=t=>{const{okText:e,okType:n="primary",cancelText:r,confirmLoading:i,onOk:o,onCancel:l,okButtonProps:f,cancelButtonProps:s,footer:p}=t,[v]=Ub("Modal",dW()),x=e||(v==null?void 0:v.okText),S=r||(v==null?void 0:v.cancelText),M={confirmLoading:i,okButtonProps:f,cancelButtonProps:s,okTextLocale:x,cancelTextLocale:S,okType:n,onOk:o,onCancel:l},P=Tt.useMemo(()=>M,sn(Object.values(M)));let R;return typeof p=="function"||typeof p>"u"?(R=Tt.createElement(Tt.Fragment,null,Tt.createElement(W$,null),Tt.createElement(X$,null)),typeof p=="function"&&(R=p(R,{OkBtn:X$,CancelBtn:W$})),R=Tt.createElement(u7,{value:P},R)):R=p,Tt.createElement(UD,{disabled:!1},R)};function q$(t){return{position:t,inset:0}}const kpe=t=>{const{componentCls:e,antCls:n}=t;return[{[`${e}-root`]:{[`${e}${n}-zoom-enter, ${e}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:t.motionDurationSlow,userSelect:"none"},[`${e}${n}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},q$("fixed")),{zIndex:t.zIndexPopupBase,height:"100%",backgroundColor:t.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},q$("fixed")),{zIndex:t.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:Hde(t)}]},Fpe=t=>{const{componentCls:e}=t;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${t.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${Kt(t.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},ys(t)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Kt(t.calc(t.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:t.paddingLG,[`${e}-title`]:{margin:0,color:t.titleColor,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:t.contentBg,backgroundClip:"padding-box",border:0,borderRadius:t.borderRadiusLG,boxShadow:t.boxShadow,pointerEvents:"auto",padding:t.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),insetInlineEnd:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),zIndex:t.calc(t.zIndexPopupBase).add(10).equal(),padding:0,color:t.modalCloseIconColor,fontWeight:t.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:t.borderRadiusSM,width:t.modalCloseBtnSize,height:t.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${t.motionDurationMid}, background-color ${t.motionDurationMid}`,"&-x":{display:"flex",fontSize:t.fontSizeLG,fontStyle:"normal",lineHeight:Kt(t.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:t.modalCloseIconHoverColor,backgroundColor:t.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:t.colorBgTextActive}},SW(t)),[`${e}-header`]:{color:t.colorText,background:t.headerBg,borderRadius:`${Kt(t.borderRadiusLG)} ${Kt(t.borderRadiusLG)} 0 0`,marginBottom:t.headerMarginBottom,padding:t.headerPadding,borderBottom:t.headerBorderBottom},[`${e}-body`]:{fontSize:t.fontSize,lineHeight:t.lineHeight,wordWrap:"break-word",padding:t.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${Kt(t.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:t.footerBg,marginTop:t.footerMarginTop,padding:t.footerPadding,borderTop:t.footerBorderTop,borderRadius:t.footerBorderRadius,[`> ${t.antCls}-btn + ${t.antCls}-btn`]:{marginInlineStart:t.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},zpe=t=>{const{componentCls:e}=t;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},P7=t=>{const e=t.padding,n=t.fontSizeHeading5,r=t.lineHeightHeading5;return $i(t,{modalHeaderHeight:t.calc(t.calc(r).mul(n).equal()).add(t.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:t.colorSplit,modalFooterBorderStyle:t.lineType,modalFooterBorderWidth:t.lineWidth,modalCloseIconColor:t.colorIcon,modalCloseIconHoverColor:t.colorIconHover,modalCloseBtnSize:t.controlHeight,modalConfirmIconSize:t.fontHeight,modalTitleHeight:t.calc(t.titleFontSize).mul(t.titleLineHeight).equal()})},I7=t=>({footerBg:"transparent",headerBg:t.colorBgElevated,titleLineHeight:t.lineHeightHeading5,titleFontSize:t.fontSizeHeading5,contentBg:t.colorBgElevated,titleColor:t.colorTextHeading,contentPadding:t.wireframe?0:`${Kt(t.paddingMD)} ${Kt(t.paddingContentHorizontalLG)}`,headerPadding:t.wireframe?`${Kt(t.padding)} ${Kt(t.paddingLG)}`:0,headerBorderBottom:t.wireframe?`${Kt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",headerMarginBottom:t.wireframe?0:t.marginXS,bodyPadding:t.wireframe?t.paddingLG:0,footerPadding:t.wireframe?`${Kt(t.paddingXS)} ${Kt(t.padding)}`:0,footerBorderTop:t.wireframe?`${Kt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",footerBorderRadius:t.wireframe?`0 0 ${Kt(t.borderRadiusLG)} ${Kt(t.borderRadiusLG)}`:0,footerMarginTop:t.wireframe?0:t.marginSM,confirmBodyPadding:t.wireframe?`${Kt(t.padding*2)} ${Kt(t.padding*2)} ${Kt(t.paddingLG)}`:0,confirmIconMarginInlineEnd:t.wireframe?t.margin:t.marginSM,confirmBtnsMarginTop:t.wireframe?t.marginLG:t.marginSM}),R7=Ss("Modal",t=>{const e=P7(t);return[Fpe(e),zpe(e),kpe(e),o7(e,"zoom")]},I7,{unitless:{titleLineHeight:!0}});var Npe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};let dL;const $pe=t=>{dL={x:t.pageX,y:t.pageY},setTimeout(()=>{dL=null},100)};npe()&&document.documentElement.addEventListener("click",$pe,!0);const jpe=t=>{var e;const{getPopupContainer:n,getPrefixCls:r,direction:i,modal:o}=E.useContext(Sr),l=Xe=>{const{onCancel:Ne}=t;Ne==null||Ne(Xe)},f=Xe=>{const{onOk:Ne}=t;Ne==null||Ne(Xe)},{prefixCls:s,className:p,rootClassName:v,open:x,wrapClassName:S,centered:M,getContainer:P,focusTriggerAfterClose:R=!0,style:D,visible:B,width:O=520,footer:k,classNames:$,styles:H,children:U,loading:X}=t,J=Npe(t,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),K=r("modal",s),Q=r(),ce=_a(K),[ge,ae,ve]=R7(K,ce),Fe=At(S,{[`${K}-centered`]:!!M,[`${K}-wrap-rtl`]:i==="rtl"}),Ae=k!==null&&!X?E.createElement(M7,Object.assign({},t,{onOk:f,onCancel:l})):null,[pe,fe,xe]=tpe(j$(t),j$(o),{closable:!0,closeIcon:E.createElement(jb,{className:`${K}-close-icon`}),closeIconRender:Xe=>A7(K,Xe)}),Re=Lpe(`.${K}-content`),[ke,ze]=WD("Modal",J.zIndex);return ge(E.createElement(sv,{form:!0,space:!0},E.createElement(HD.Provider,{value:ze},E.createElement(g7,Object.assign({width:O},J,{zIndex:ke,getContainer:P===void 0?n:P,prefixCls:K,rootClassName:At(ae,v,ve,ce),footer:Ae,visible:x??B,mousePosition:(e=J.mousePosition)!==null&&e!==void 0?e:dL,onClose:l,closable:pe&&{disabled:xe,closeIcon:fe},closeIcon:fe,focusTriggerAfterClose:R,transitionName:iv(Q,"zoom",t.transitionName),maskTransitionName:iv(Q,"fade",t.maskTransitionName),className:At(ae,p,o==null?void 0:o.className),style:Object.assign(Object.assign({},o==null?void 0:o.style),D),classNames:Object.assign(Object.assign(Object.assign({},o==null?void 0:o.classNames),$),{wrapper:At(Fe,$==null?void 0:$.wrapper)}),styles:Object.assign(Object.assign({},o==null?void 0:o.styles),H),panelRef:Re}),X?E.createElement(Rpe,{active:!0,title:!1,paragraph:{rows:4},className:`${K}-body-skeleton`}):U))))},O7=jpe,Upe=t=>{const{componentCls:e,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:i,fontSize:o,lineHeight:l,modalTitleHeight:f,fontHeight:s,confirmBodyPadding:p}=t,v=`${e}-confirm`;return{[v]:{"&-rtl":{direction:"rtl"},[`${t.antCls}-modal-header`]:{display:"none"},[`${v}-body-wrapper`]:Object.assign({},xW()),[`&${e} ${e}-body`]:{padding:p},[`${v}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t.iconCls}`]:{flex:"none",fontSize:i,marginInlineEnd:t.confirmIconMarginInlineEnd,marginTop:t.calc(t.calc(s).sub(i).equal()).div(2).equal()},[`&-has-title > ${t.iconCls}`]:{marginTop:t.calc(t.calc(f).sub(i).equal()).div(2).equal()}},[`${v}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:t.marginXS},[`${t.iconCls} + ${v}-paragraph`]:{maxWidth:`calc(100% - ${Kt(t.calc(t.modalConfirmIconSize).add(t.marginSM).equal())})`},[`${v}-title`]:{color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:n,lineHeight:r},[`${v}-content`]:{color:t.colorText,fontSize:o,lineHeight:l},[`${v}-btns`]:{textAlign:"end",marginTop:t.confirmBtnsMarginTop,[`${t.antCls}-btn + ${t.antCls}-btn`]:{marginBottom:0,marginInlineStart:t.marginXS}}},[`${v}-error ${v}-body > ${t.iconCls}`]:{color:t.colorError},[`${v}-warning ${v}-body > ${t.iconCls},
        ${v}-confirm ${v}-body > ${t.iconCls}`]:{color:t.colorWarning},[`${v}-info ${v}-body > ${t.iconCls}`]:{color:t.colorInfo},[`${v}-success ${v}-body > ${t.iconCls}`]:{color:t.colorSuccess}}},Vpe=VD(["Modal","confirm"],t=>{const e=P7(t);return[Upe(e)]},I7,{order:-1e3});var Gpe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function L7(t){const{prefixCls:e,icon:n,okText:r,cancelText:i,confirmPrefixCls:o,type:l,okCancel:f,footer:s,locale:p}=t,v=Gpe(t,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let x=n;if(!n&&n!==null)switch(l){case"info":x=E.createElement(MH,null);break;case"success":x=E.createElement(PD,null);break;case"error":x=E.createElement($b,null);break;default:x=E.createElement(ID,null)}const S=f??l==="confirm",M=t.autoFocusButton===null?!1:t.autoFocusButton||"ok",[P]=Ub("Modal"),R=p||P,D=r||(S?R==null?void 0:R.okText:R==null?void 0:R.justOkText),B=i||(R==null?void 0:R.cancelText),O=Object.assign({autoFocusButton:M,cancelTextLocale:B,okTextLocale:D,mergedOkCancel:S},v),k=E.useMemo(()=>O,sn(Object.values(O))),$=E.createElement(E.Fragment,null,E.createElement(x$,null),E.createElement(w$,null)),H=t.title!==void 0&&t.title!==null,U=`${o}-body`;return E.createElement("div",{className:`${o}-body-wrapper`},E.createElement("div",{className:At(U,{[`${U}-has-title`]:H})},x,E.createElement("div",{className:`${o}-paragraph`},H&&E.createElement("span",{className:`${o}-title`},t.title),E.createElement("div",{className:`${o}-content`},t.content))),s===void 0||typeof s=="function"?E.createElement(u7,{value:k},E.createElement("div",{className:`${o}-btns`},typeof s=="function"?s($,{OkBtn:w$,CancelBtn:x$}):$)):s,E.createElement(Vpe,{prefixCls:e}))}const Hpe=t=>{const{close:e,zIndex:n,afterClose:r,open:i,keyboard:o,centered:l,getContainer:f,maskStyle:s,direction:p,prefixCls:v,wrapClassName:x,rootPrefixCls:S,bodyStyle:M,closable:P=!1,closeIcon:R,modalRender:D,focusTriggerAfterClose:B,onConfirm:O,styles:k}=t,$=`${v}-confirm`,H=t.width||416,U=t.style||{},X=t.mask===void 0?!0:t.mask,J=t.maskClosable===void 0?!1:t.maskClosable,K=At($,`${$}-${t.type}`,{[`${$}-rtl`]:p==="rtl"},t.className),[,Q]=Ja(),ce=E.useMemo(()=>n!==void 0?n:Q.zIndexPopupBase+VW,[n,Q]);return E.createElement(O7,{prefixCls:v,className:K,wrapClassName:At({[`${$}-centered`]:!!t.centered},x),onCancel:()=>{e==null||e({triggerCancel:!0}),O==null||O(!1)},open:i,title:"",footer:null,transitionName:iv(S||"","zoom",t.transitionName),maskTransitionName:iv(S||"","fade",t.maskTransitionName),mask:X,maskClosable:J,style:U,styles:Object.assign({body:M,mask:s},k),width:H,zIndex:ce,afterClose:r,keyboard:o,centered:l,getContainer:f,closable:P,closeIcon:R,modalRender:D,focusTriggerAfterClose:B},E.createElement(L7,Object.assign({},t,{confirmPrefixCls:$})))},Wpe=t=>{const{rootPrefixCls:e,iconPrefixCls:n,direction:r,theme:i}=t;return E.createElement(Cv,{prefixCls:e,iconPrefixCls:n,direction:r,theme:i},E.createElement(Hpe,Object.assign({},t)))},B7=Wpe,Xh=[];let D7="";function k7(){return D7}const Xpe=t=>{var e,n;const{prefixCls:r,getContainer:i,direction:o}=t,l=dW(),f=E.useContext(Sr),s=k7()||f.getPrefixCls(),p=r||`${s}-modal`;let v=i;return v===!1&&(v=void 0),Tt.createElement(B7,Object.assign({},t,{rootPrefixCls:s,prefixCls:p,iconPrefixCls:f.iconPrefixCls,theme:f.theme,direction:o??f.direction,locale:(n=(e=f.locale)===null||e===void 0?void 0:e.Modal)!==null&&n!==void 0?n:l,getContainer:v}))};function qb(t){const e=NW(),n=document.createDocumentFragment();let r=Object.assign(Object.assign({},t),{close:f,open:!0}),i;function o(){for(var p,v=arguments.length,x=new Array(v),S=0;S<v;S++)x[S]=arguments[S];if(x.some(R=>R==null?void 0:R.triggerCancel)){var P;(p=t.onCancel)===null||p===void 0||(P=p).call.apply(P,[t,()=>{}].concat(sn(x.slice(1))))}for(let R=0;R<Xh.length;R++)if(Xh[R]===f){Xh.splice(R,1);break}qW(n)}function l(p){clearTimeout(i),i=setTimeout(()=>{const v=e.getPrefixCls(void 0,k7()),x=e.getIconPrefixCls(),S=e.getTheme(),M=Tt.createElement(Xpe,Object.assign({},p));qD(Tt.createElement(Cv,{prefixCls:v,iconPrefixCls:x,theme:S},e.holderRender?e.holderRender(M):M),n)})}function f(){for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof t.afterClose=="function"&&t.afterClose(),o.apply(this,v)}}),r.visible&&delete r.visible,l(r)}function s(p){typeof p=="function"?r=p(r):r=Object.assign(Object.assign({},r),p),l(r)}return l(r),Xh.push(f),{destroy:f,update:s}}function F7(t){return Object.assign(Object.assign({},t),{type:"warning"})}function z7(t){return Object.assign(Object.assign({},t),{type:"info"})}function N7(t){return Object.assign(Object.assign({},t),{type:"success"})}function $7(t){return Object.assign(Object.assign({},t),{type:"error"})}function j7(t){return Object.assign(Object.assign({},t),{type:"confirm"})}function qpe(t){let{rootPrefixCls:e}=t;D7=e}var Ype=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Zpe=(t,e)=>{var n,{afterClose:r,config:i}=t,o=Ype(t,["afterClose","config"]);const[l,f]=E.useState(!0),[s,p]=E.useState(i),{direction:v,getPrefixCls:x}=E.useContext(Sr),S=x("modal"),M=x(),P=()=>{var O;r(),(O=s.afterClose)===null||O===void 0||O.call(s)},R=function(){var O;f(!1);for(var k=arguments.length,$=new Array(k),H=0;H<k;H++)$[H]=arguments[H];if($.some(J=>J==null?void 0:J.triggerCancel)){var X;(O=s.onCancel)===null||O===void 0||(X=O).call.apply(X,[s,()=>{}].concat(sn($.slice(1))))}};E.useImperativeHandle(e,()=>({destroy:R,update:O=>{p(k=>Object.assign(Object.assign({},k),O))}}));const D=(n=s.okCancel)!==null&&n!==void 0?n:s.type==="confirm",[B]=Ub("Modal",Nf.Modal);return E.createElement(B7,Object.assign({prefixCls:S,rootPrefixCls:M},s,{close:R,open:l,afterClose:P,okText:s.okText||(D?B==null?void 0:B.okText:B==null?void 0:B.justOkText),direction:s.direction||v,cancelText:s.cancelText||(B==null?void 0:B.cancelText)},o))},Kpe=E.forwardRef(Zpe);let Y$=0;const Jpe=E.memo(E.forwardRef((t,e)=>{const[n,r]=Kue();return E.useImperativeHandle(e,()=>({patchElement:r}),[]),E.createElement(E.Fragment,null,n)}));function Qpe(){const t=E.useRef(null),[e,n]=E.useState([]);E.useEffect(()=>{e.length&&(sn(e).forEach(l=>{l()}),n([]))},[e]);const r=E.useCallback(o=>function(f){var s;Y$+=1;const p=E.createRef();let v;const x=new Promise(D=>{v=D});let S=!1,M;const P=E.createElement(Kpe,{key:`modal-${Y$}`,config:o(f),ref:p,afterClose:()=>{M==null||M()},isSilent:()=>S,onConfirm:D=>{v(D)}});return M=(s=t.current)===null||s===void 0?void 0:s.patchElement(P),M&&Xh.push(M),{destroy:()=>{function D(){var B;(B=p.current)===null||B===void 0||B.destroy()}p.current?D():n(B=>[].concat(sn(B),[D]))},update:D=>{function B(){var O;(O=p.current)===null||O===void 0||O.update(D)}p.current?B():n(O=>[].concat(sn(O),[B]))},then:D=>(S=!0,x.then(D))}},[]);return[E.useMemo(()=>({info:r(z7),success:r(N7),error:r($7),warning:r(F7),confirm:r(j7)}),[]),E.createElement(Jpe,{key:"modal-holder",ref:t})]}const eme=Tt.createContext({});function U7(t){return e=>E.createElement(Cv,{theme:{token:{motion:!1,zIndexPopupBase:0}}},E.createElement(t,Object.assign({},e)))}const tme=(t,e,n,r)=>U7(o=>{const{prefixCls:l,style:f}=o,s=E.useRef(null),[p,v]=E.useState(0),[x,S]=E.useState(0),[M,P]=au(!1,{value:o.open}),{getPrefixCls:R}=E.useContext(Sr),D=R(e||"select",l);E.useEffect(()=>{if(P(!0),typeof ResizeObserver<"u"){const k=new ResizeObserver(H=>{const U=H[0].target;v(U.offsetHeight+8),S(U.offsetWidth)}),$=setInterval(()=>{var H;const U=n?`.${n(D)}`:`.${D}-dropdown`,X=(H=s.current)===null||H===void 0?void 0:H.querySelector(U);X&&(clearInterval($),k.observe(X))},10);return()=>{clearInterval($),k.disconnect()}}},[]);let B=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},f),{margin:0}),open:M,visible:M,getPopupContainer:()=>s.current});r&&(B=r(B));const O={paddingBottom:p,position:"relative",minWidth:x};return E.createElement("div",{ref:s,style:O},E.createElement(t,Object.assign({},B)))}),u3=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var yT=function(e){var n=e.className,r=e.customizeIcon,i=e.customizeIconProps,o=e.children,l=e.onMouseDown,f=e.onClick,s=typeof r=="function"?r(i):r;return E.createElement("span",{className:n,onMouseDown:function(v){v.preventDefault(),l==null||l(v)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:f,"aria-hidden":!0},s!==void 0?s:E.createElement("span",{className:At(n.split(/\s+/).map(function(p){return"".concat(p,"-icon")}))},o))},nme=function(e,n,r,i,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,f=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,p=Tt.useMemo(function(){if(Kn(i)==="object")return i.clearIcon;if(o)return o},[i,o]),v=Tt.useMemo(function(){return!!(!l&&i&&(r.length||f)&&!(s==="combobox"&&f===""))},[i,l,r.length,f,s]);return{allowClear:v,clearIcon:Tt.createElement(yT,{className:"".concat(e,"-clear"),onMouseDown:n,customizeIcon:p},"×")}},V7=E.createContext(null);function rme(){return E.useContext(V7)}function ime(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=E.useState(!1),n=ct(e,2),r=n[0],i=n[1],o=E.useRef(null),l=function(){window.clearTimeout(o.current)};E.useEffect(function(){return l},[]);var f=function(p,v){l(),o.current=window.setTimeout(function(){i(p),v&&v()},t)};return[r,f,l]}function G7(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=E.useRef(null),n=E.useRef(null);E.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(n.current),n.current=window.setTimeout(function(){e.current=null},t)}return[function(){return e.current},r]}function ome(t,e,n,r){var i=E.useRef(null);i.current={open:e,triggerOpen:n,customizedTrigger:r},E.useEffect(function(){function o(l){var f;if(!((f=i.current)!==null&&f!==void 0&&f.customizedTrigger)){var s=l.target;s.shadowRoot&&l.composed&&(s=l.composedPath()[0]||s),i.current.open&&t().filter(function(p){return p}).every(function(p){return!p.contains(s)&&p!==s})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}function sme(t){return![nn.ESC,nn.SHIFT,nn.BACKSPACE,nn.TAB,nn.WIN_KEY,nn.ALT,nn.META,nn.WIN_KEY_RIGHT,nn.CTRL,nn.SEMICOLON,nn.EQUALS,nn.CAPS_LOCK,nn.CONTEXT_MENU,nn.F1,nn.F2,nn.F3,nn.F4,nn.F5,nn.F6,nn.F7,nn.F8,nn.F9,nn.F10,nn.F11,nn.F12].includes(t)}var ame=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Fm=void 0;function lme(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,o=t.renderItem,l=t.responsive,f=t.responsiveDisabled,s=t.registerSize,p=t.itemKey,v=t.className,x=t.style,S=t.children,M=t.display,P=t.order,R=t.component,D=R===void 0?"div":R,B=Hr(t,ame),O=l&&!M;function k(J){s(p,J)}E.useEffect(function(){return function(){k(null)}},[]);var $=o&&i!==Fm?o(i):S,H;r||(H={opacity:O?0:1,height:O?0:Fm,overflowY:O?"hidden":Fm,order:l?P:Fm,pointerEvents:O?"none":Fm,position:O?"absolute":Fm});var U={};O&&(U["aria-hidden"]=!0);var X=E.createElement(D,Mn({className:At(!r&&n,v),style:Ye(Ye({},H),x)},U,B,{ref:e}),$);return l&&(X=E.createElement(Hf,{onResize:function(K){var Q=K.offsetWidth;k(Q)},disabled:f},X)),X}var p_=E.forwardRef(lme);p_.displayName="Item";function cme(t){if(typeof MessageChannel>"u")gi(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function ume(){var t=E.useRef(null),e=function(r){t.current||(t.current=[],cme(function(){rd.unstable_batchedUpdates(function(){t.current.forEach(function(i){i()}),t.current=null})})),t.current.push(r)};return e}function y0(t,e){var n=E.useState(e),r=ct(n,2),i=r[0],o=r[1],l=xo(function(f){t(function(){o(f)})});return[i,l]}var LE=Tt.createContext(null),dme=["component"],fme=["className"],hme=["className"],pme=function(e,n){var r=E.useContext(LE);if(!r){var i=e.component,o=i===void 0?"div":i,l=Hr(e,dme);return E.createElement(o,Mn({},l,{ref:n}))}var f=r.className,s=Hr(r,fme),p=e.className,v=Hr(e,hme);return E.createElement(LE.Provider,{value:null},E.createElement(p_,Mn({ref:n,className:At(f,p)},s,v)))},H7=E.forwardRef(pme);H7.displayName="RawItem";var mme=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],W7="responsive",X7="invalidate";function gme(t){return"+ ".concat(t.length," ...")}function vme(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,i=t.data,o=i===void 0?[]:i,l=t.renderItem,f=t.renderRawItem,s=t.itemKey,p=t.itemWidth,v=p===void 0?10:p,x=t.ssr,S=t.style,M=t.className,P=t.maxCount,R=t.renderRest,D=t.renderRawRest,B=t.suffix,O=t.component,k=O===void 0?"div":O,$=t.itemComponent,H=t.onVisibleChange,U=Hr(t,mme),X=x==="full",J=ume(),K=y0(J,null),Q=ct(K,2),ce=Q[0],ge=Q[1],ae=ce||0,ve=y0(J,new Map),Fe=ct(ve,2),Ae=Fe[0],pe=Fe[1],fe=y0(J,0),xe=ct(fe,2),Re=xe[0],ke=xe[1],ze=y0(J,0),Xe=ct(ze,2),Ne=Xe[0],Qe=Xe[1],pt=y0(J,0),Ke=ct(pt,2),ot=Ke[0],St=Ke[1],st=E.useState(null),rt=ct(st,2),lt=rt[0],Rt=rt[1],bt=E.useState(null),wt=ct(bt,2),it=wt[0],Bt=wt[1],jt=E.useMemo(function(){return it===null&&X?Number.MAX_SAFE_INTEGER:it||0},[it,ce]),cn=E.useState(!1),rn=ct(cn,2),zt=rn[0],bn=rn[1],Ot="".concat(r,"-item"),Nt=Math.max(Re,Ne),Jt=P===W7,on=o.length&&Jt,vn=P===X7,hn=on||typeof P=="number"&&o.length>P,wn=E.useMemo(function(){var Ce=o;return on?ce===null&&X?Ce=o:Ce=o.slice(0,Math.min(o.length,ae/v)):typeof P=="number"&&(Ce=o.slice(0,P)),Ce},[o,v,ce,P,on]),Rn=E.useMemo(function(){return on?o.slice(jt+1):o.slice(wn.length)},[o,wn,on,jt]),Vn=E.useCallback(function(Ce,_e){var De;return typeof s=="function"?s(Ce):(De=s&&(Ce==null?void 0:Ce[s]))!==null&&De!==void 0?De:_e},[s]),rr=E.useCallback(l||function(Ce){return Ce},[l]);function Pn(Ce,_e,De){it===Ce&&(_e===void 0||_e===lt)||(Bt(Ce),De||(bn(Ce<o.length-1),H==null||H(Ce)),_e!==void 0&&Rt(_e))}function Sn(Ce,_e){ge(_e.clientWidth)}function fr(Ce,_e){pe(function(De){var et=new Map(De);return _e===null?et.delete(Ce):et.set(Ce,_e),et})}function cr(Ce,_e){Qe(_e),ke(Ne)}function ur(Ce,_e){St(_e)}function tr(Ce){return Ae.get(Vn(wn[Ce],Ce))}Ji(function(){if(ae&&typeof Nt=="number"&&wn){var Ce=ot,_e=wn.length,De=_e-1;if(!_e){Pn(0,null);return}for(var et=0;et<_e;et+=1){var nt=tr(et);if(X&&(nt=nt||0),nt===void 0){Pn(et-1,void 0,!0);break}if(Ce+=nt,De===0&&Ce<=ae||et===De-1&&Ce+tr(De)<=ae){Pn(De,null);break}else if(Ce+Nt>ae){Pn(et-1,Ce-nt-ot+Ne);break}}B&&tr(0)+ot>ae&&Rt(null)}},[ae,Ae,Ne,ot,Vn,wn]);var oi=zt&&!!Rn.length,Oe={};lt!==null&&on&&(Oe={position:"absolute",left:lt,top:0});var se={prefixCls:Ot,responsive:on,component:$,invalidate:vn},oe=f?function(Ce,_e){var De=Vn(Ce,_e);return E.createElement(LE.Provider,{key:De,value:Ye(Ye({},se),{},{order:_e,item:Ce,itemKey:De,registerSize:fr,display:_e<=jt})},f(Ce,_e))}:function(Ce,_e){var De=Vn(Ce,_e);return E.createElement(p_,Mn({},se,{order:_e,key:De,item:Ce,renderItem:rr,itemKey:De,registerSize:fr,display:_e<=jt}))},te,le={order:oi?jt:Number.MAX_SAFE_INTEGER,className:"".concat(Ot,"-rest"),registerSize:cr,display:oi};if(D)D&&(te=E.createElement(LE.Provider,{value:Ye(Ye({},se),le)},D(Rn)));else{var ue=R||gme;te=E.createElement(p_,Mn({},se,le),typeof ue=="function"?ue(Rn):ue)}var Me=E.createElement(k,Mn({className:At(!vn&&r,M),style:S,ref:e},U),wn.map(oe),hn?te:null,B&&E.createElement(p_,Mn({},se,{responsive:Jt,responsiveDisabled:!on,order:jt,className:"".concat(Ot,"-suffix"),registerSize:ur,display:!0,style:Oe}),B));return Jt&&(Me=E.createElement(Hf,{onResize:Sn,disabled:!on},Me)),Me}var Yb=E.forwardRef(vme);Yb.displayName="Overflow";Yb.Item=H7;Yb.RESPONSIVE=W7;Yb.INVALIDATE=X7;var yme=function(e,n){var r,i=e.prefixCls,o=e.id,l=e.inputElement,f=e.disabled,s=e.tabIndex,p=e.autoFocus,v=e.autoComplete,x=e.editable,S=e.activeDescendantId,M=e.value,P=e.maxLength,R=e.onKeyDown,D=e.onMouseDown,B=e.onChange,O=e.onPaste,k=e.onCompositionStart,$=e.onCompositionEnd,H=e.open,U=e.attrs,X=l||E.createElement("input",null),J=X,K=J.ref,Q=J.props,ce=Q.onKeyDown,ge=Q.onChange,ae=Q.onMouseDown,ve=Q.onCompositionStart,Fe=Q.onCompositionEnd,Ae=Q.style;return"maxLength"in X.props,X=E.cloneElement(X,Ye(Ye(Ye({type:"search"},Q),{},{id:o,ref:Al(n,K),disabled:f,tabIndex:s,autoComplete:v||"off",autoFocus:p,className:At("".concat(i,"-selection-search-input"),(r=X)===null||r===void 0||(r=r.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":H||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":H?S:void 0},U),{},{value:x?M:"",maxLength:P,readOnly:!x,unselectable:x?null:"on",style:Ye(Ye({},Ae),{},{opacity:x?null:0}),onKeyDown:function(fe){R(fe),ce&&ce(fe)},onMouseDown:function(fe){D(fe),ae&&ae(fe)},onChange:function(fe){B(fe),ge&&ge(fe)},onCompositionStart:function(fe){k(fe),ve&&ve(fe)},onCompositionEnd:function(fe){$(fe),Fe&&Fe(fe)},onPaste:O})),X},q7=E.forwardRef(yme);function Y7(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}var _me=typeof window<"u"&&window.document&&window.document.documentElement,bme=_me;function xme(t){return t!=null}function wme(t){return!t&&t!==0}function Z$(t){return["string","number"].includes(Kn(t))}function Z7(t){var e=void 0;return t&&(Z$(t.title)?e=t.title.toString():Z$(t.label)&&(e=t.label.toString())),e}function Sme(t,e){bme?E.useLayoutEffect(t,e):E.useEffect(t,e)}function Eme(t){var e;return(e=t.key)!==null&&e!==void 0?e:t.value}var K$=function(e){e.preventDefault(),e.stopPropagation()},Cme=function(e){var n=e.id,r=e.prefixCls,i=e.values,o=e.open,l=e.searchValue,f=e.autoClearSearchValue,s=e.inputRef,p=e.placeholder,v=e.disabled,x=e.mode,S=e.showSearch,M=e.autoFocus,P=e.autoComplete,R=e.activeDescendantId,D=e.tabIndex,B=e.removeIcon,O=e.maxTagCount,k=e.maxTagTextLength,$=e.maxTagPlaceholder,H=$===void 0?function(Rt){return"+ ".concat(Rt.length," ...")}:$,U=e.tagRender,X=e.onToggleOpen,J=e.onRemove,K=e.onInputChange,Q=e.onInputPaste,ce=e.onInputKeyDown,ge=e.onInputMouseDown,ae=e.onInputCompositionStart,ve=e.onInputCompositionEnd,Fe=E.useRef(null),Ae=E.useState(0),pe=ct(Ae,2),fe=pe[0],xe=pe[1],Re=E.useState(!1),ke=ct(Re,2),ze=ke[0],Xe=ke[1],Ne="".concat(r,"-selection"),Qe=o||x==="multiple"&&f===!1||x==="tags"?l:"",pt=x==="tags"||x==="multiple"&&f===!1||S&&(o||ze);Sme(function(){xe(Fe.current.scrollWidth)},[Qe]);var Ke=function(bt,wt,it,Bt,jt){return E.createElement("span",{title:Z7(bt),className:At("".concat(Ne,"-item"),j({},"".concat(Ne,"-item-disabled"),it))},E.createElement("span",{className:"".concat(Ne,"-item-content")},wt),Bt&&E.createElement(yT,{className:"".concat(Ne,"-item-remove"),onMouseDown:K$,onClick:jt,customizeIcon:B},"×"))},ot=function(bt,wt,it,Bt,jt,cn){var rn=function(bn){K$(bn),X(!o)};return E.createElement("span",{onMouseDown:rn},U({label:wt,value:bt,disabled:it,closable:Bt,onClose:jt,isMaxTag:!!cn}))},St=function(bt){var wt=bt.disabled,it=bt.label,Bt=bt.value,jt=!v&&!wt,cn=it;if(typeof k=="number"&&(typeof it=="string"||typeof it=="number")){var rn=String(cn);rn.length>k&&(cn="".concat(rn.slice(0,k),"..."))}var zt=function(Ot){Ot&&Ot.stopPropagation(),J(bt)};return typeof U=="function"?ot(Bt,cn,wt,jt,zt):Ke(bt,cn,wt,jt,zt)},st=function(bt){var wt=typeof H=="function"?H(bt):H;return typeof U=="function"?ot(void 0,wt,!1,!1,void 0,!0):Ke({title:wt},wt,!1)},rt=E.createElement("div",{className:"".concat(Ne,"-search"),style:{width:fe},onFocus:function(){Xe(!0)},onBlur:function(){Xe(!1)}},E.createElement(q7,{ref:s,open:o,prefixCls:r,id:n,inputElement:null,disabled:v,autoFocus:M,autoComplete:P,editable:pt,activeDescendantId:R,value:Qe,onKeyDown:ce,onMouseDown:ge,onChange:K,onPaste:Q,onCompositionStart:ae,onCompositionEnd:ve,tabIndex:D,attrs:id(e,!0)}),E.createElement("span",{ref:Fe,className:"".concat(Ne,"-search-mirror"),"aria-hidden":!0},Qe," ")),lt=E.createElement(Yb,{prefixCls:"".concat(Ne,"-overflow"),data:i,renderItem:St,renderRest:st,suffix:rt,itemKey:Eme,maxCount:O});return E.createElement(E.Fragment,null,lt,!i.length&&!Qe&&E.createElement("span",{className:"".concat(Ne,"-placeholder")},p))},Tme=function(e){var n=e.inputElement,r=e.prefixCls,i=e.id,o=e.inputRef,l=e.disabled,f=e.autoFocus,s=e.autoComplete,p=e.activeDescendantId,v=e.mode,x=e.open,S=e.values,M=e.placeholder,P=e.tabIndex,R=e.showSearch,D=e.searchValue,B=e.activeValue,O=e.maxLength,k=e.onInputKeyDown,$=e.onInputMouseDown,H=e.onInputChange,U=e.onInputPaste,X=e.onInputCompositionStart,J=e.onInputCompositionEnd,K=e.title,Q=E.useState(!1),ce=ct(Q,2),ge=ce[0],ae=ce[1],ve=v==="combobox",Fe=ve||R,Ae=S[0],pe=D||"";ve&&B&&!ge&&(pe=B),E.useEffect(function(){ve&&ae(!1)},[ve,B]);var fe=v!=="combobox"&&!x&&!R?!1:!!pe,xe=K===void 0?Z7(Ae):K,Re=E.useMemo(function(){return Ae?null:E.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:fe?{visibility:"hidden"}:void 0},M)},[Ae,fe,M,r]);return E.createElement(E.Fragment,null,E.createElement("span",{className:"".concat(r,"-selection-search")},E.createElement(q7,{ref:o,prefixCls:r,id:i,open:x,inputElement:n,disabled:l,autoFocus:f,autoComplete:s,editable:Fe,activeDescendantId:p,value:pe,onKeyDown:k,onMouseDown:$,onChange:function(ze){ae(!0),H(ze)},onPaste:U,onCompositionStart:X,onCompositionEnd:J,tabIndex:P,attrs:id(e,!0),maxLength:ve?O:void 0})),!ve&&Ae?E.createElement("span",{className:"".concat(r,"-selection-item"),title:xe,style:fe?{visibility:"hidden"}:void 0},Ae.label):null,Re)},Ame=function(e,n){var r=E.useRef(null),i=E.useRef(!1),o=e.prefixCls,l=e.open,f=e.mode,s=e.showSearch,p=e.tokenWithEnter,v=e.disabled,x=e.autoClearSearchValue,S=e.onSearch,M=e.onSearchSubmit,P=e.onToggleOpen,R=e.onInputKeyDown,D=e.domRef;E.useImperativeHandle(n,function(){return{focus:function(fe){r.current.focus(fe)},blur:function(){r.current.blur()}}});var B=G7(0),O=ct(B,2),k=O[0],$=O[1],H=function(fe){var xe=fe.which;(xe===nn.UP||xe===nn.DOWN)&&fe.preventDefault(),R&&R(fe),xe===nn.ENTER&&f==="tags"&&!i.current&&!l&&(M==null||M(fe.target.value)),sme(xe)&&P(!0)},U=function(){$(!0)},X=E.useRef(null),J=function(fe){S(fe,!0,i.current)!==!1&&P(!0)},K=function(){i.current=!0},Q=function(fe){i.current=!1,f!=="combobox"&&J(fe.target.value)},ce=function(fe){var xe=fe.target.value;if(p&&X.current&&/[\r\n]/.test(X.current)){var Re=X.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");xe=xe.replace(Re,X.current)}X.current=null,J(xe)},ge=function(fe){var xe=fe.clipboardData,Re=xe==null?void 0:xe.getData("text");X.current=Re||""},ae=function(fe){var xe=fe.target;if(xe!==r.current){var Re=document.body.style.msTouchAction!==void 0;Re?setTimeout(function(){r.current.focus()}):r.current.focus()}},ve=function(fe){var xe=k();fe.target!==r.current&&!xe&&!(f==="combobox"&&v)&&fe.preventDefault(),(f!=="combobox"&&(!s||!xe)||!l)&&(l&&x!==!1&&S("",!0,!1),P())},Fe={inputRef:r,onInputKeyDown:H,onInputMouseDown:U,onInputChange:ce,onInputPaste:ge,onInputCompositionStart:K,onInputCompositionEnd:Q},Ae=f==="multiple"||f==="tags"?E.createElement(Cme,Mn({},e,Fe)):E.createElement(Tme,Mn({},e,Fe));return E.createElement("div",{ref:D,className:"".concat(o,"-selector"),onClick:ae,onMouseDown:ve},Ae)},Mme=E.forwardRef(Ame);function Pme(t){var e=t.prefixCls,n=t.align,r=t.arrow,i=t.arrowPos,o=r||{},l=o.className,f=o.content,s=i.x,p=s===void 0?0:s,v=i.y,x=v===void 0?0:v,S=E.useRef();if(!n||!n.points)return null;var M={position:"absolute"};if(n.autoArrow!==!1){var P=n.points[0],R=n.points[1],D=P[0],B=P[1],O=R[0],k=R[1];D===O||!["t","b"].includes(D)?M.top=x:D==="t"?M.top=0:M.bottom=0,B===k||!["l","r"].includes(B)?M.left=p:B==="l"?M.left=0:M.right=0}return E.createElement("div",{ref:S,className:At("".concat(e,"-arrow"),l),style:M},f)}function Ime(t){var e=t.prefixCls,n=t.open,r=t.zIndex,i=t.mask,o=t.motion;return i?E.createElement(Wf,Mn({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(l){var f=l.className;return E.createElement("div",{style:{zIndex:r},className:At("".concat(e,"-mask"),f)})}):null}var Rme=E.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),Ome=E.forwardRef(function(t,e){var n=t.popup,r=t.className,i=t.prefixCls,o=t.style,l=t.target,f=t.onVisibleChanged,s=t.open,p=t.keepDom,v=t.fresh,x=t.onClick,S=t.mask,M=t.arrow,P=t.arrowPos,R=t.align,D=t.motion,B=t.maskMotion,O=t.forceRender,k=t.getPopupContainer,$=t.autoDestroy,H=t.portal,U=t.zIndex,X=t.onMouseEnter,J=t.onMouseLeave,K=t.onPointerEnter,Q=t.ready,ce=t.offsetX,ge=t.offsetY,ae=t.offsetR,ve=t.offsetB,Fe=t.onAlign,Ae=t.onPrepare,pe=t.stretch,fe=t.targetWidth,xe=t.targetHeight,Re=typeof n=="function"?n():n,ke=s||p,ze=(k==null?void 0:k.length)>0,Xe=E.useState(!k||!ze),Ne=ct(Xe,2),Qe=Ne[0],pt=Ne[1];if(Ji(function(){!Qe&&ze&&l&&pt(!0)},[Qe,ze,l]),!Qe)return null;var Ke="auto",ot={left:"-1000vw",top:"-1000vh",right:Ke,bottom:Ke};if(Q||!s){var St,st=R.points,rt=R.dynamicInset||((St=R._experimental)===null||St===void 0?void 0:St.dynamicInset),lt=rt&&st[0][1]==="r",Rt=rt&&st[0][0]==="b";lt?(ot.right=ae,ot.left=Ke):(ot.left=ce,ot.right=Ke),Rt?(ot.bottom=ve,ot.top=Ke):(ot.top=ge,ot.bottom=Ke)}var bt={};return pe&&(pe.includes("height")&&xe?bt.height=xe:pe.includes("minHeight")&&xe&&(bt.minHeight=xe),pe.includes("width")&&fe?bt.width=fe:pe.includes("minWidth")&&fe&&(bt.minWidth=fe)),s||(bt.pointerEvents="none"),E.createElement(H,{open:O||ke,getContainer:k&&function(){return k(l)},autoDestroy:$},E.createElement(Ime,{prefixCls:i,open:s,zIndex:U,mask:S,motion:B}),E.createElement(Hf,{onResize:Fe,disabled:!s},function(wt){return E.createElement(Wf,Mn({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:O,leavedClassName:"".concat(i,"-hidden")},D,{onAppearPrepare:Ae,onEnterPrepare:Ae,visible:s,onVisibleChanged:function(Bt){var jt;D==null||(jt=D.onVisibleChanged)===null||jt===void 0||jt.call(D,Bt),f(Bt)}}),function(it,Bt){var jt=it.className,cn=it.style,rn=At(i,jt,r);return E.createElement("div",{ref:Al(wt,e,Bt),className:rn,style:Ye(Ye(Ye(Ye({"--arrow-x":"".concat(P.x||0,"px"),"--arrow-y":"".concat(P.y||0,"px")},ot),bt),cn),{},{boxSizing:"border-box",zIndex:U},o),onMouseEnter:X,onMouseLeave:J,onPointerEnter:K,onClick:x},M&&E.createElement(Pme,{prefixCls:i,arrow:M,arrowPos:P,align:R}),E.createElement(Rme,{cache:!s&&!v},Re))})}))}),Lme=E.forwardRef(function(t,e){var n=t.children,r=t.getTriggerDOMNode,i=wv(n),o=E.useCallback(function(f){LD(e,r?r(f):f)},[r]),l=xv(o,n.ref);return i?E.cloneElement(n,{ref:l}):n}),J$=E.createContext(null);function Q$(t){return t?Array.isArray(t)?t:[t]:[]}function Bme(t,e,n,r){return E.useMemo(function(){var i=Q$(n??e),o=Q$(r??e),l=new Set(i),f=new Set(o);return t&&(l.has("hover")&&(l.delete("hover"),l.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[l,f]},[t,e,n,r])}function Dme(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function kme(t,e,n,r){for(var i=n.points,o=Object.keys(t),l=0;l<o.length;l+=1){var f,s=o[l];if(Dme((f=t[s])===null||f===void 0?void 0:f.points,i,r))return"".concat(e,"-placement-").concat(s)}return""}function e5(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function Zb(t){return t.ownerDocument.defaultView}function fL(t){for(var e=[],n=t==null?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Zb(n).getComputedStyle(n),o=i.overflowX,l=i.overflowY,f=i.overflow;[o,l,f].some(function(s){return r.includes(s)})&&e.push(n),n=n.parentElement}return e}function rb(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function _0(t){return rb(parseFloat(t),0)}function t5(t,e){var n=Ye({},t);return(e||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var i=Zb(r).getComputedStyle(r),o=i.overflow,l=i.overflowClipMargin,f=i.borderTopWidth,s=i.borderBottomWidth,p=i.borderLeftWidth,v=i.borderRightWidth,x=r.getBoundingClientRect(),S=r.offsetHeight,M=r.clientHeight,P=r.offsetWidth,R=r.clientWidth,D=_0(f),B=_0(s),O=_0(p),k=_0(v),$=rb(Math.round(x.width/P*1e3)/1e3),H=rb(Math.round(x.height/S*1e3)/1e3),U=(P-R-O-k)*$,X=(S-M-D-B)*H,J=D*H,K=B*H,Q=O*$,ce=k*$,ge=0,ae=0;if(o==="clip"){var ve=_0(l);ge=ve*$,ae=ve*H}var Fe=x.x+Q-ge,Ae=x.y+J-ae,pe=Fe+x.width+2*ge-Q-ce-U,fe=Ae+x.height+2*ae-J-K-X;n.left=Math.max(n.left,Fe),n.top=Math.max(n.top,Ae),n.right=Math.min(n.right,pe),n.bottom=Math.min(n.bottom,fe)}}),n}function n5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(e),r=n.match(/^(.*)\%$/);return r?t*(parseFloat(r[1])/100):parseFloat(n)}function r5(t,e){var n=e||[],r=ct(n,2),i=r[0],o=r[1];return[n5(t.width,i),n5(t.height,o)]}function i5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function zm(t,e){var n=e[0],r=e[1],i,o;return n==="t"?o=t.y:n==="b"?o=t.y+t.height:o=t.y+t.height/2,r==="l"?i=t.x:r==="r"?i=t.x+t.width:i=t.x+t.width/2,{x:i,y:o}}function qd(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map(function(r,i){return i===e?n[r]||"c":r}).join("")}function Fme(t,e,n,r,i,o,l){var f=E.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),s=ct(f,2),p=s[0],v=s[1],x=E.useRef(0),S=E.useMemo(function(){return e?fL(e):[]},[e]),M=E.useRef({}),P=function(){M.current={}};t||P();var R=xo(function(){if(e&&n&&t){let ei=function(xa,ta){var Ns=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nt,Oo=Ne.x+xa,Mi=Ne.y+ta,Fn=Oo+Rt,ar=Mi+lt,Pr=Math.max(Oo,Ns.left),Yr=Math.max(Mi,Ns.top),Pi=Math.min(Fn,Ns.right),na=Math.min(ar,Ns.bottom);return Math.max(0,(Pi-Pr)*(na-Yr))},Xi=function(){dr=Ne.y+De,gr=dr+lt,Yn=Ne.x+_e,ri=Yn+Rt};var Ai=ei,Fi=Xi,O,k,$,H,U=e,X=U.ownerDocument,J=Zb(U),K=J.getComputedStyle(U),Q=K.width,ce=K.height,ge=K.position,ae=U.style.left,ve=U.style.top,Fe=U.style.right,Ae=U.style.bottom,pe=U.style.overflow,fe=Ye(Ye({},i[r]),o),xe=X.createElement("div");(O=U.parentElement)===null||O===void 0||O.appendChild(xe),xe.style.left="".concat(U.offsetLeft,"px"),xe.style.top="".concat(U.offsetTop,"px"),xe.style.position=ge,xe.style.height="".concat(U.offsetHeight,"px"),xe.style.width="".concat(U.offsetWidth,"px"),U.style.left="0",U.style.top="0",U.style.right="auto",U.style.bottom="auto",U.style.overflow="hidden";var Re;if(Array.isArray(n))Re={x:n[0],y:n[1],width:0,height:0};else{var ke,ze,Xe=n.getBoundingClientRect();Xe.x=(ke=Xe.x)!==null&&ke!==void 0?ke:Xe.left,Xe.y=(ze=Xe.y)!==null&&ze!==void 0?ze:Xe.top,Re={x:Xe.x,y:Xe.y,width:Xe.width,height:Xe.height}}var Ne=U.getBoundingClientRect();Ne.x=(k=Ne.x)!==null&&k!==void 0?k:Ne.left,Ne.y=($=Ne.y)!==null&&$!==void 0?$:Ne.top;var Qe=X.documentElement,pt=Qe.clientWidth,Ke=Qe.clientHeight,ot=Qe.scrollWidth,St=Qe.scrollHeight,st=Qe.scrollTop,rt=Qe.scrollLeft,lt=Ne.height,Rt=Ne.width,bt=Re.height,wt=Re.width,it={left:0,top:0,right:pt,bottom:Ke},Bt={left:-rt,top:-st,right:ot-rt,bottom:St-st},jt=fe.htmlRegion,cn="visible",rn="visibleFirst";jt!=="scroll"&&jt!==rn&&(jt=cn);var zt=jt===rn,bn=t5(Bt,S),Ot=t5(it,S),Nt=jt===cn?Ot:bn,Jt=zt?Ot:Nt;U.style.left="auto",U.style.top="auto",U.style.right="0",U.style.bottom="0";var on=U.getBoundingClientRect();U.style.left=ae,U.style.top=ve,U.style.right=Fe,U.style.bottom=Ae,U.style.overflow=pe,(H=U.parentElement)===null||H===void 0||H.removeChild(xe);var vn=rb(Math.round(Rt/parseFloat(Q)*1e3)/1e3),hn=rb(Math.round(lt/parseFloat(ce)*1e3)/1e3);if(vn===0||hn===0||q_(n)&&!YD(n))return;var wn=fe.offset,Rn=fe.targetOffset,Vn=r5(Ne,wn),rr=ct(Vn,2),Pn=rr[0],Sn=rr[1],fr=r5(Re,Rn),cr=ct(fr,2),ur=cr[0],tr=cr[1];Re.x-=ur,Re.y-=tr;var oi=fe.points||[],Oe=ct(oi,2),se=Oe[0],oe=Oe[1],te=i5(oe),le=i5(se),ue=zm(Re,te),Me=zm(Ne,le),Ce=Ye({},fe),_e=ue.x-Me.x+Pn,De=ue.y-Me.y+Sn,et=ei(_e,De),nt=ei(_e,De,Ot),Ze=zm(Re,["t","l"]),Et=zm(Ne,["t","l"]),vt=zm(Re,["b","r"]),Ct=zm(Ne,["b","r"]),Vt=fe.overflow||{},ln=Vt.adjustX,kn=Vt.adjustY,Jn=Vt.shiftX,_r=Vt.shiftY,Wn=function(ta){return typeof ta=="boolean"?ta:ta>=0},dr,gr,Yn,ri;Xi();var Cn=Wn(kn),yn=le[0]===te[0];if(Cn&&le[0]==="t"&&(gr>Jt.bottom||M.current.bt)){var Ft=De;yn?Ft-=lt-bt:Ft=Ze.y-Ct.y-Sn;var Gt=ei(_e,Ft),xn=ei(_e,Ft,Ot);Gt>et||Gt===et&&(!zt||xn>=nt)?(M.current.bt=!0,De=Ft,Sn=-Sn,Ce.points=[qd(le,0),qd(te,0)]):M.current.bt=!1}if(Cn&&le[0]==="b"&&(dr<Jt.top||M.current.tb)){var nr=De;yn?nr+=lt-bt:nr=vt.y-Et.y-Sn;var or=ei(_e,nr),Fr=ei(_e,nr,Ot);or>et||or===et&&(!zt||Fr>=nt)?(M.current.tb=!0,De=nr,Sn=-Sn,Ce.points=[qd(le,0),qd(te,0)]):M.current.tb=!1}var Or=Wn(ln),Xr=le[1]===te[1];if(Or&&le[1]==="l"&&(ri>Jt.right||M.current.rl)){var Qr=_e;Xr?Qr-=Rt-wt:Qr=Ze.x-Ct.x-Pn;var qr=ei(Qr,De),zr=ei(Qr,De,Ot);qr>et||qr===et&&(!zt||zr>=nt)?(M.current.rl=!0,_e=Qr,Pn=-Pn,Ce.points=[qd(le,1),qd(te,1)]):M.current.rl=!1}if(Or&&le[1]==="r"&&(Yn<Jt.left||M.current.lr)){var _i=_e;Xr?_i+=Rt-wt:_i=vt.x-Et.x-Pn;var xt=ei(_i,De),Hi=ei(_i,De,Ot);xt>et||xt===et&&(!zt||Hi>=nt)?(M.current.lr=!0,_e=_i,Pn=-Pn,Ce.points=[qd(le,1),qd(te,1)]):M.current.lr=!1}Xi();var xr=Jn===!0?0:Jn;typeof xr=="number"&&(Yn<Ot.left&&(_e-=Yn-Ot.left-Pn,Re.x+wt<Ot.left+xr&&(_e+=Re.x-Ot.left+wt-xr)),ri>Ot.right&&(_e-=ri-Ot.right-Pn,Re.x>Ot.right-xr&&(_e+=Re.x-Ot.right+xr)));var Lr=_r===!0?0:_r;typeof Lr=="number"&&(dr<Ot.top&&(De-=dr-Ot.top-Sn,Re.y+bt<Ot.top+Lr&&(De+=Re.y-Ot.top+bt-Lr)),gr>Ot.bottom&&(De-=gr-Ot.bottom-Sn,Re.y>Ot.bottom-Lr&&(De+=Re.y-Ot.bottom+Lr)));var cs=Ne.x+_e,Wi=cs+Rt,ao=Ne.y+De,Er=ao+lt,Qn=Re.x,Ht=Qn+wt,jn=Re.y,Bn=jn+bt,Rr=Math.max(cs,Qn),Ei=Math.min(Wi,Ht),Xn=(Rr+Ei)/2,Ti=Xn-cs,he=Math.max(ao,jn),Ee=Math.min(Er,Bn),Ue=(he+Ee)/2,at=Ue-ao;l==null||l(e,Ce);var Qt=on.right-Ne.x-(_e+Ne.width),pn=on.bottom-Ne.y-(De+Ne.height);vn===1&&(_e=Math.round(_e),Qt=Math.round(Qt)),hn===1&&(De=Math.round(De),pn=Math.round(pn));var br={ready:!0,offsetX:_e/vn,offsetY:De/hn,offsetR:Qt/vn,offsetB:pn/hn,arrowX:Ti/vn,arrowY:at/hn,scaleX:vn,scaleY:hn,align:Ce};v(br)}}),D=function(){x.current+=1;var k=x.current;Promise.resolve().then(function(){x.current===k&&R()})},B=function(){v(function(k){return Ye(Ye({},k),{},{ready:!1})})};return Ji(B,[r]),Ji(function(){t||B()},[t]),[p.ready,p.offsetX,p.offsetY,p.offsetR,p.offsetB,p.arrowX,p.arrowY,p.scaleX,p.scaleY,p.align,D]}function zme(t,e,n,r,i){Ji(function(){if(t&&e&&n){let S=function(){r(),i()};var x=S,o=e,l=n,f=fL(o),s=fL(l),p=Zb(l),v=new Set([p].concat(sn(f),sn(s)));return v.forEach(function(M){M.addEventListener("scroll",S,{passive:!0})}),p.addEventListener("resize",S,{passive:!0}),r(),function(){v.forEach(function(M){M.removeEventListener("scroll",S),p.removeEventListener("resize",S)})}}},[t,e,n])}function Nme(t,e,n,r,i,o,l,f){var s=E.useRef(t);s.current=t,E.useEffect(function(){if(e&&r&&(!i||o)){var p=function(M){var P;s.current&&!l(((P=M.composedPath)===null||P===void 0||(P=P.call(M))===null||P===void 0?void 0:P[0])||M.target)&&f(!1)},v=Zb(r);v.addEventListener("mousedown",p,!0),v.addEventListener("contextmenu",p,!0);var x=EE(n);return x&&(x.addEventListener("mousedown",p,!0),x.addEventListener("contextmenu",p,!0)),function(){v.removeEventListener("mousedown",p,!0),v.removeEventListener("contextmenu",p,!0),x&&(x.removeEventListener("mousedown",p,!0),x.removeEventListener("contextmenu",p,!0))}}},[e,n,r,i,o])}var $me=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function jme(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o3,e=E.forwardRef(function(n,r){var i=n.prefixCls,o=i===void 0?"rc-trigger-popup":i,l=n.children,f=n.action,s=f===void 0?"hover":f,p=n.showAction,v=n.hideAction,x=n.popupVisible,S=n.defaultPopupVisible,M=n.onPopupVisibleChange,P=n.afterPopupVisibleChange,R=n.mouseEnterDelay,D=n.mouseLeaveDelay,B=D===void 0?.1:D,O=n.focusDelay,k=n.blurDelay,$=n.mask,H=n.maskClosable,U=H===void 0?!0:H,X=n.getPopupContainer,J=n.forceRender,K=n.autoDestroy,Q=n.destroyPopupOnHide,ce=n.popup,ge=n.popupClassName,ae=n.popupStyle,ve=n.popupPlacement,Fe=n.builtinPlacements,Ae=Fe===void 0?{}:Fe,pe=n.popupAlign,fe=n.zIndex,xe=n.stretch,Re=n.getPopupClassNameFromAlign,ke=n.fresh,ze=n.alignPoint,Xe=n.onPopupClick,Ne=n.onPopupAlign,Qe=n.arrow,pt=n.popupMotion,Ke=n.maskMotion,ot=n.popupTransitionName,St=n.popupAnimation,st=n.maskTransitionName,rt=n.maskAnimation,lt=n.className,Rt=n.getTriggerDOMNode,bt=Hr(n,$me),wt=K||Q||!1,it=E.useState(!1),Bt=ct(it,2),jt=Bt[0],cn=Bt[1];Ji(function(){cn(u3())},[]);var rn=E.useRef({}),zt=E.useContext(J$),bn=E.useMemo(function(){return{registerSubPopup:function(ar,Pr){rn.current[ar]=Pr,zt==null||zt.registerSubPopup(ar,Pr)}}},[zt]),Ot=h7(),Nt=E.useState(null),Jt=ct(Nt,2),on=Jt[0],vn=Jt[1],hn=E.useRef(null),wn=xo(function(Fn){hn.current=Fn,q_(Fn)&&on!==Fn&&vn(Fn),zt==null||zt.registerSubPopup(Ot,Fn)}),Rn=E.useState(null),Vn=ct(Rn,2),rr=Vn[0],Pn=Vn[1],Sn=E.useRef(null),fr=xo(function(Fn){q_(Fn)&&rr!==Fn&&(Pn(Fn),Sn.current=Fn)}),cr=E.Children.only(l),ur=(cr==null?void 0:cr.props)||{},tr={},oi=xo(function(Fn){var ar,Pr,Yr=rr;return(Yr==null?void 0:Yr.contains(Fn))||((ar=EE(Yr))===null||ar===void 0?void 0:ar.host)===Fn||Fn===Yr||(on==null?void 0:on.contains(Fn))||((Pr=EE(on))===null||Pr===void 0?void 0:Pr.host)===Fn||Fn===on||Object.values(rn.current).some(function(Pi){return(Pi==null?void 0:Pi.contains(Fn))||Fn===Pi})}),Oe=e5(o,pt,St,ot),se=e5(o,Ke,rt,st),oe=E.useState(S||!1),te=ct(oe,2),le=te[0],ue=te[1],Me=x??le,Ce=xo(function(Fn){x===void 0&&ue(Fn)});Ji(function(){ue(x||!1)},[x]);var _e=E.useRef(Me);_e.current=Me;var De=E.useRef([]);De.current=[];var et=xo(function(Fn){var ar;Ce(Fn),((ar=De.current[De.current.length-1])!==null&&ar!==void 0?ar:Me)!==Fn&&(De.current.push(Fn),M==null||M(Fn))}),nt=E.useRef(),Ze=function(){clearTimeout(nt.current)},Et=function(ar){var Pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ze(),Pr===0?et(ar):nt.current=setTimeout(function(){et(ar)},Pr*1e3)};E.useEffect(function(){return Ze},[]);var vt=E.useState(!1),Ct=ct(vt,2),Vt=Ct[0],ln=Ct[1];Ji(function(Fn){(!Fn||Me)&&ln(!0)},[Me]);var kn=E.useState(null),Jn=ct(kn,2),_r=Jn[0],Wn=Jn[1],dr=E.useState(null),gr=ct(dr,2),Yn=gr[0],ri=gr[1],Cn=function(ar){ri([ar.clientX,ar.clientY])},yn=Fme(Me,on,ze&&Yn!==null?Yn:rr,ve,Ae,pe,Ne),Ft=ct(yn,11),Gt=Ft[0],xn=Ft[1],nr=Ft[2],or=Ft[3],Fr=Ft[4],Or=Ft[5],Xr=Ft[6],Qr=Ft[7],qr=Ft[8],zr=Ft[9],_i=Ft[10],xt=Bme(jt,s,p,v),Hi=ct(xt,2),xr=Hi[0],Lr=Hi[1],cs=xr.has("click"),Wi=Lr.has("click")||Lr.has("contextMenu"),ao=xo(function(){Vt||_i()}),Er=function(){_e.current&&ze&&Wi&&Et(!1)};zme(Me,rr,on,ao,Er),Ji(function(){ao()},[Yn,ve]),Ji(function(){Me&&!(Ae!=null&&Ae[ve])&&ao()},[JSON.stringify(pe)]);var Qn=E.useMemo(function(){var Fn=kme(Ae,o,zr,ze);return At(Fn,Re==null?void 0:Re(zr))},[zr,Re,Ae,o,ze]);E.useImperativeHandle(r,function(){return{nativeElement:Sn.current,popupElement:hn.current,forceAlign:ao}});var Ht=E.useState(0),jn=ct(Ht,2),Bn=jn[0],Rr=jn[1],Ei=E.useState(0),Xn=ct(Ei,2),Ti=Xn[0],he=Xn[1],Ee=function(){if(xe&&rr){var ar=rr.getBoundingClientRect();Rr(ar.width),he(ar.height)}},Ue=function(){Ee(),ao()},at=function(ar){ln(!1),_i(),P==null||P(ar)},Qt=function(){return new Promise(function(ar){Ee(),Wn(function(){return ar})})};Ji(function(){_r&&(_i(),_r(),Wn(null))},[_r]);function pn(Fn,ar,Pr,Yr){tr[Fn]=function(Pi){var na;Yr==null||Yr(Pi),Et(ar,Pr);for(var Ii=arguments.length,Mc=new Array(Ii>1?Ii-1:0),Pc=1;Pc<Ii;Pc++)Mc[Pc-1]=arguments[Pc];(na=ur[Fn])===null||na===void 0||na.call.apply(na,[ur,Pi].concat(Mc))}}(cs||Wi)&&(tr.onClick=function(Fn){var ar;_e.current&&Wi?Et(!1):!_e.current&&cs&&(Cn(Fn),Et(!0));for(var Pr=arguments.length,Yr=new Array(Pr>1?Pr-1:0),Pi=1;Pi<Pr;Pi++)Yr[Pi-1]=arguments[Pi];(ar=ur.onClick)===null||ar===void 0||ar.call.apply(ar,[ur,Fn].concat(Yr))}),Nme(Me,Wi,rr,on,$,U,oi,Et);var br=xr.has("hover"),Ai=Lr.has("hover"),Fi,ei;br&&(pn("onMouseEnter",!0,R,function(Fn){Cn(Fn)}),pn("onPointerEnter",!0,R,function(Fn){Cn(Fn)}),Fi=function(ar){(Me||Vt)&&on!==null&&on!==void 0&&on.contains(ar.target)&&Et(!0,R)},ze&&(tr.onMouseMove=function(Fn){var ar;(ar=ur.onMouseMove)===null||ar===void 0||ar.call(ur,Fn)})),Ai&&(pn("onMouseLeave",!1,B),pn("onPointerLeave",!1,B),ei=function(){Et(!1,B)}),xr.has("focus")&&pn("onFocus",!0,O),Lr.has("focus")&&pn("onBlur",!1,k),xr.has("contextMenu")&&(tr.onContextMenu=function(Fn){var ar;_e.current&&Lr.has("contextMenu")?Et(!1):(Cn(Fn),Et(!0)),Fn.preventDefault();for(var Pr=arguments.length,Yr=new Array(Pr>1?Pr-1:0),Pi=1;Pi<Pr;Pi++)Yr[Pi-1]=arguments[Pi];(ar=ur.onContextMenu)===null||ar===void 0||ar.call.apply(ar,[ur,Fn].concat(Yr))}),lt&&(tr.className=At(ur.className,lt));var Xi=Ye(Ye({},ur),tr),xa={},ta=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ta.forEach(function(Fn){bt[Fn]&&(xa[Fn]=function(){for(var ar,Pr=arguments.length,Yr=new Array(Pr),Pi=0;Pi<Pr;Pi++)Yr[Pi]=arguments[Pi];(ar=Xi[Fn])===null||ar===void 0||ar.call.apply(ar,[Xi].concat(Yr)),bt[Fn].apply(bt,Yr)})});var Ns=E.cloneElement(cr,Ye(Ye({},Xi),xa)),Oo={x:Or,y:Xr},Mi=Qe?Ye({},Qe!==!0?Qe:{}):null;return E.createElement(E.Fragment,null,E.createElement(Hf,{disabled:!Me,ref:fr,onResize:Ue},E.createElement(Lme,{getTriggerDOMNode:Rt},Ns)),E.createElement(J$.Provider,{value:bn},E.createElement(Ome,{portal:t,ref:wn,prefixCls:o,popup:ce,className:At(ge,Qn),style:ae,target:rr,onMouseEnter:Fi,onMouseLeave:ei,onPointerEnter:Fi,zIndex:fe,open:Me,keepDom:Vt,fresh:ke,onClick:Xe,mask:$,motion:Oe,maskMotion:se,onVisibleChanged:at,onPrepare:Qt,forceRender:J,autoDestroy:wt,getPopupContainer:X,align:zr,arrow:Mi,arrowPos:Oo,ready:Gt,offsetX:xn,offsetY:nr,offsetR:or,offsetB:Fr,onAlign:ao,stretch:xe,targetWidth:Bn/Qr,targetHeight:Ti/qr})))});return e}const K7=jme(o3);var Ume=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Vme=function(e){var n=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},Gme=function(e,n){var r=e.prefixCls;e.disabled;var i=e.visible,o=e.children,l=e.popupElement,f=e.animation,s=e.transitionName,p=e.dropdownStyle,v=e.dropdownClassName,x=e.direction,S=x===void 0?"ltr":x,M=e.placement,P=e.builtinPlacements,R=e.dropdownMatchSelectWidth,D=e.dropdownRender,B=e.dropdownAlign,O=e.getPopupContainer,k=e.empty,$=e.getTriggerDOMNode,H=e.onPopupVisibleChange,U=e.onPopupMouseEnter,X=Hr(e,Ume),J="".concat(r,"-dropdown"),K=l;D&&(K=D(l));var Q=E.useMemo(function(){return P||Vme(R)},[P,R]),ce=f?"".concat(J,"-").concat(f):s,ge=typeof R=="number",ae=E.useMemo(function(){return ge?null:R===!1?"minWidth":"width"},[R,ge]),ve=p;ge&&(ve=Ye(Ye({},ve),{},{width:R}));var Fe=E.useRef(null);return E.useImperativeHandle(n,function(){return{getPopupElement:function(){var pe;return(pe=Fe.current)===null||pe===void 0?void 0:pe.popupElement}}}),E.createElement(K7,Mn({},X,{showAction:H?["click"]:[],hideAction:H?["click"]:[],popupPlacement:M||(S==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:Q,prefixCls:J,popupTransitionName:ce,popup:E.createElement("div",{onMouseEnter:U},K),ref:Fe,stretch:ae,popupAlign:B,popupVisible:i,getPopupContainer:O,popupClassName:At(v,j({},"".concat(J,"-empty"),k)),popupStyle:ve,getTriggerDOMNode:$,onPopupVisibleChange:H}),o)},Hme=E.forwardRef(Gme);function o5(t,e){var n=t.key,r;return"value"in t&&(r=t.value),n??(r!==void 0?r:"rc-index-key-".concat(e))}function hL(t){return typeof t<"u"&&!Number.isNaN(t)}function J7(t,e){var n=t||{},r=n.label,i=n.value,o=n.options,l=n.groupLabel,f=r||(e?"children":"label");return{label:f,value:i||"value",options:o||"options",groupLabel:l||f}}function Wme(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.fieldNames,r=e.childrenAsData,i=[],o=J7(n,!1),l=o.label,f=o.value,s=o.options,p=o.groupLabel;function v(x,S){Array.isArray(x)&&x.forEach(function(M){if(S||!(s in M)){var P=M[f];i.push({key:o5(M,i.length),groupOption:S,data:M,label:M[l],value:P})}else{var R=M[p];R===void 0&&r&&(R=M.label),i.push({key:o5(M,i.length),group:!0,data:M,label:R}),v(M[s],!0)}})}return v(t,!1),i}function pL(t){var e=Ye({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return vs(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var Xme=function(e,n,r){if(!n||!n.length)return null;var i=!1,o=function f(s,p){var v=aW(p),x=v[0],S=v.slice(1);if(!x)return[s];var M=s.split(x);return i=i||M.length>1,M.reduce(function(P,R){return[].concat(sn(P),sn(f(R,S)))},[]).filter(Boolean)},l=o(e,n);return i?typeof r<"u"?l.slice(0,r):l:null},d3=E.createContext(null);function qme(t){var e=t.visible,n=t.values;if(!e)return null;var r=50;return E.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(i){var o=i.label,l=i.value;return["number","string"].includes(Kn(o))?o:l}).join(", ")),n.length>r?", ...":null)}var Yme=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Zme=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],mL=function(e){return e==="tags"||e==="multiple"},Kme=E.forwardRef(function(t,e){var n,r=t.id,i=t.prefixCls,o=t.className,l=t.showSearch,f=t.tagRender,s=t.direction,p=t.omitDomProps,v=t.displayValues,x=t.onDisplayValuesChange,S=t.emptyOptions,M=t.notFoundContent,P=M===void 0?"Not Found":M,R=t.onClear,D=t.mode,B=t.disabled,O=t.loading,k=t.getInputElement,$=t.getRawInputElement,H=t.open,U=t.defaultOpen,X=t.onDropdownVisibleChange,J=t.activeValue,K=t.onActiveValueChange,Q=t.activeDescendantId,ce=t.searchValue,ge=t.autoClearSearchValue,ae=t.onSearch,ve=t.onSearchSplit,Fe=t.tokenSeparators,Ae=t.allowClear,pe=t.suffixIcon,fe=t.clearIcon,xe=t.OptionList,Re=t.animation,ke=t.transitionName,ze=t.dropdownStyle,Xe=t.dropdownClassName,Ne=t.dropdownMatchSelectWidth,Qe=t.dropdownRender,pt=t.dropdownAlign,Ke=t.placement,ot=t.builtinPlacements,St=t.getPopupContainer,st=t.showAction,rt=st===void 0?[]:st,lt=t.onFocus,Rt=t.onBlur,bt=t.onKeyUp,wt=t.onKeyDown,it=t.onMouseDown,Bt=Hr(t,Yme),jt=mL(D),cn=(l!==void 0?l:jt)||D==="combobox",rn=Ye({},Bt);Zme.forEach(function(Er){delete rn[Er]}),p==null||p.forEach(function(Er){delete rn[Er]});var zt=E.useState(!1),bn=ct(zt,2),Ot=bn[0],Nt=bn[1];E.useEffect(function(){Nt(u3())},[]);var Jt=E.useRef(null),on=E.useRef(null),vn=E.useRef(null),hn=E.useRef(null),wn=E.useRef(null),Rn=E.useRef(!1),Vn=ime(),rr=ct(Vn,3),Pn=rr[0],Sn=rr[1],fr=rr[2];E.useImperativeHandle(e,function(){var Er,Qn;return{focus:(Er=hn.current)===null||Er===void 0?void 0:Er.focus,blur:(Qn=hn.current)===null||Qn===void 0?void 0:Qn.blur,scrollTo:function(jn){var Bn;return(Bn=wn.current)===null||Bn===void 0?void 0:Bn.scrollTo(jn)},nativeElement:Jt.current||on.current}});var cr=E.useMemo(function(){var Er;if(D!=="combobox")return ce;var Qn=(Er=v[0])===null||Er===void 0?void 0:Er.value;return typeof Qn=="string"||typeof Qn=="number"?String(Qn):""},[ce,D,v]),ur=D==="combobox"&&typeof k=="function"&&k()||null,tr=typeof $=="function"&&$(),oi=xv(on,tr==null||(n=tr.props)===null||n===void 0?void 0:n.ref),Oe=E.useState(!1),se=ct(Oe,2),oe=se[0],te=se[1];Ji(function(){te(!0)},[]);var le=au(!1,{defaultValue:U,value:H}),ue=ct(le,2),Me=ue[0],Ce=ue[1],_e=oe?Me:!1,De=!P&&S;(B||De&&_e&&D==="combobox")&&(_e=!1);var et=De?!1:_e,nt=E.useCallback(function(Er){var Qn=Er!==void 0?Er:!_e;B||(Ce(Qn),_e!==Qn&&(X==null||X(Qn)))},[B,_e,Ce,X]),Ze=E.useMemo(function(){return(Fe||[]).some(function(Er){return[`
`,`\r
`].includes(Er)})},[Fe]),Et=E.useContext(d3)||{},vt=Et.maxCount,Ct=Et.rawValues,Vt=function(Qn,Ht,jn){if(!(jt&&hL(vt)&&(Ct==null?void 0:Ct.size)>=vt)){var Bn=!0,Rr=Qn;K==null||K(null);var Ei=Xme(Qn,Fe,hL(vt)?vt-Ct.size:void 0),Xn=jn?null:Ei;return D!=="combobox"&&Xn&&(Rr="",ve==null||ve(Xn),nt(!1),Bn=!1),ae&&cr!==Rr&&ae(Rr,{source:Ht?"typing":"effect"}),Bn}},ln=function(Qn){!Qn||!Qn.trim()||ae(Qn,{source:"submit"})};E.useEffect(function(){!_e&&!jt&&D!=="combobox"&&Vt("",!1,!1)},[_e]),E.useEffect(function(){Me&&B&&Ce(!1),B&&!Rn.current&&Sn(!1)},[B]);var kn=G7(),Jn=ct(kn,2),_r=Jn[0],Wn=Jn[1],dr=E.useRef(!1),gr=function(Qn){var Ht=_r(),jn=Qn.key,Bn=jn==="Enter";if(Bn&&(D!=="combobox"&&Qn.preventDefault(),_e||nt(!0)),Wn(!!cr),jn==="Backspace"&&!Ht&&jt&&!cr&&v.length){for(var Rr=sn(v),Ei=null,Xn=Rr.length-1;Xn>=0;Xn-=1){var Ti=Rr[Xn];if(!Ti.disabled){Rr.splice(Xn,1),Ei=Ti;break}}Ei&&x(Rr,{type:"remove",values:[Ei]})}for(var he=arguments.length,Ee=new Array(he>1?he-1:0),Ue=1;Ue<he;Ue++)Ee[Ue-1]=arguments[Ue];if(_e&&(!Bn||!dr.current)){var at;(at=wn.current)===null||at===void 0||at.onKeyDown.apply(at,[Qn].concat(Ee))}Bn&&(dr.current=!0),wt==null||wt.apply(void 0,[Qn].concat(Ee))},Yn=function(Qn){for(var Ht=arguments.length,jn=new Array(Ht>1?Ht-1:0),Bn=1;Bn<Ht;Bn++)jn[Bn-1]=arguments[Bn];if(_e){var Rr;(Rr=wn.current)===null||Rr===void 0||Rr.onKeyUp.apply(Rr,[Qn].concat(jn))}Qn.key==="Enter"&&(dr.current=!1),bt==null||bt.apply(void 0,[Qn].concat(jn))},ri=function(Qn){var Ht=v.filter(function(jn){return jn!==Qn});x(Ht,{type:"remove",values:[Qn]})},Cn=E.useRef(!1),yn=function(){Sn(!0),B||(lt&&!Cn.current&&lt.apply(void 0,arguments),rt.includes("focus")&&nt(!0)),Cn.current=!0},Ft=function(){Rn.current=!0,Sn(!1,function(){Cn.current=!1,Rn.current=!1,nt(!1)}),!B&&(cr&&(D==="tags"?ae(cr,{source:"submit"}):D==="multiple"&&ae("",{source:"blur"})),Rt&&Rt.apply(void 0,arguments))},Gt=[];E.useEffect(function(){return function(){Gt.forEach(function(Er){return clearTimeout(Er)}),Gt.splice(0,Gt.length)}},[]);var xn=function(Qn){var Ht,jn=Qn.target,Bn=(Ht=vn.current)===null||Ht===void 0?void 0:Ht.getPopupElement();if(Bn&&Bn.contains(jn)){var Rr=setTimeout(function(){var he=Gt.indexOf(Rr);if(he!==-1&&Gt.splice(he,1),fr(),!Ot&&!Bn.contains(document.activeElement)){var Ee;(Ee=hn.current)===null||Ee===void 0||Ee.focus()}});Gt.push(Rr)}for(var Ei=arguments.length,Xn=new Array(Ei>1?Ei-1:0),Ti=1;Ti<Ei;Ti++)Xn[Ti-1]=arguments[Ti];it==null||it.apply(void 0,[Qn].concat(Xn))},nr=E.useState({}),or=ct(nr,2),Fr=or[1];function Or(){Fr({})}var Xr;tr&&(Xr=function(Qn){nt(Qn)}),ome(function(){var Er;return[Jt.current,(Er=vn.current)===null||Er===void 0?void 0:Er.getPopupElement()]},et,nt,!!tr);var Qr=E.useMemo(function(){return Ye(Ye({},t),{},{notFoundContent:P,open:_e,triggerOpen:et,id:r,showSearch:cn,multiple:jt,toggleOpen:nt})},[t,P,et,_e,r,cn,jt,nt]),qr=!!pe||O,zr;qr&&(zr=E.createElement(yT,{className:At("".concat(i,"-arrow"),j({},"".concat(i,"-arrow-loading"),O)),customizeIcon:pe,customizeIconProps:{loading:O,searchValue:cr,open:_e,focused:Pn,showSearch:cn}}));var _i=function(){var Qn;R==null||R(),(Qn=hn.current)===null||Qn===void 0||Qn.focus(),x([],{type:"clear",values:v}),Vt("",!1,!1)},xt=nme(i,_i,v,Ae,fe,B,cr,D),Hi=xt.allowClear,xr=xt.clearIcon,Lr=E.createElement(xe,{ref:wn}),cs=At(i,o,j(j(j(j(j(j(j(j(j(j({},"".concat(i,"-focused"),Pn),"".concat(i,"-multiple"),jt),"".concat(i,"-single"),!jt),"".concat(i,"-allow-clear"),Ae),"".concat(i,"-show-arrow"),qr),"".concat(i,"-disabled"),B),"".concat(i,"-loading"),O),"".concat(i,"-open"),_e),"".concat(i,"-customize-input"),ur),"".concat(i,"-show-search"),cn)),Wi=E.createElement(Hme,{ref:vn,disabled:B,prefixCls:i,visible:et,popupElement:Lr,animation:Re,transitionName:ke,dropdownStyle:ze,dropdownClassName:Xe,direction:s,dropdownMatchSelectWidth:Ne,dropdownRender:Qe,dropdownAlign:pt,placement:Ke,builtinPlacements:ot,getPopupContainer:St,empty:S,getTriggerDOMNode:function(Qn){return on.current||Qn},onPopupVisibleChange:Xr,onPopupMouseEnter:Or},tr?E.cloneElement(tr,{ref:oi}):E.createElement(Mme,Mn({},t,{domRef:on,prefixCls:i,inputElement:ur,ref:hn,id:r,showSearch:cn,autoClearSearchValue:ge,mode:D,activeDescendantId:Q,tagRender:f,values:v,open:_e,onToggleOpen:nt,activeValue:J,searchValue:cr,onSearch:Vt,onSearchSubmit:ln,onRemove:ri,tokenWithEnter:Ze}))),ao;return tr?ao=Wi:ao=E.createElement("div",Mn({className:cs},rn,{ref:Jt,onMouseDown:xn,onKeyDown:gr,onKeyUp:Yn,onFocus:yn,onBlur:Ft}),E.createElement(qme,{visible:Pn&&!_e,values:v}),Wi,zr,Hi&&xr),E.createElement(V7.Provider,{value:Qr},ao)}),f3=function(){return null};f3.isSelectOptGroup=!0;var h3=function(){return null};h3.isSelectOption=!0;var Q7=E.forwardRef(function(t,e){var n=t.height,r=t.offsetY,i=t.offsetX,o=t.children,l=t.prefixCls,f=t.onInnerResize,s=t.innerProps,p=t.rtl,v=t.extra,x={},S={display:"flex",flexDirection:"column"};return r!==void 0&&(x={height:n,position:"relative",overflow:"hidden"},S=Ye(Ye({},S),{},j(j(j(j(j({transform:"translateY(".concat(r,"px)")},p?"marginRight":"marginLeft",-i),"position","absolute"),"left",0),"right",0),"top",0))),E.createElement("div",{style:x},E.createElement(Hf,{onResize:function(P){var R=P.offsetHeight;R&&f&&f()}},E.createElement("div",Mn({style:S,className:At(j({},"".concat(l,"-holder-inner"),l)),ref:e},s),o,v)))});Q7.displayName="Filler";function Jme(t){var e=t.children,n=t.setRef,r=E.useCallback(function(i){n(i)},[]);return E.cloneElement(e,{ref:r})}function Qme(t,e,n,r,i,o,l,f){var s=f.getKey;return t.slice(e,n+1).map(function(p,v){var x=e+v,S=l(p,x,{style:{width:r},offsetX:i}),M=s(p);return E.createElement(Jme,{key:M,setRef:function(R){return o(p,R)}},S)})}function ege(t,e,n){var r=t.length,i=e.length,o,l;if(r===0&&i===0)return null;r<i?(o=t,l=e):(o=e,l=t);var f={__EMPTY_ITEM__:!0};function s(P){return P!==void 0?n(P):f}for(var p=null,v=Math.abs(r-i)!==1,x=0;x<l.length;x+=1){var S=s(o[x]),M=s(l[x]);if(S!==M){p=x,v=v||S!==s(l[x+1]);break}}return p===null?null:{index:p,multiple:v}}function tge(t,e,n){var r=E.useState(t),i=ct(r,2),o=i[0],l=i[1],f=E.useState(null),s=ct(f,2),p=s[0],v=s[1];return E.useEffect(function(){var x=ege(o||[],t||[],e);(x==null?void 0:x.index)!==void 0&&(n==null||n(x.index),v(t[x.index])),l(t)},[t]),[p]}var s5=(typeof navigator>"u"?"undefined":Kn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const eX=function(t,e,n,r){var i=E.useRef(!1),o=E.useRef(null);function l(){clearTimeout(o.current),i.current=!0,o.current=setTimeout(function(){i.current=!1},50)}var f=E.useRef({top:t,bottom:e,left:n,right:r});return f.current.top=t,f.current.bottom=e,f.current.left=n,f.current.right=r,function(s,p){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,x=s?p<0&&f.current.left||p>0&&f.current.right:p<0&&f.current.top||p>0&&f.current.bottom;return v&&x?(clearTimeout(o.current),i.current=!1):(!x||i.current)&&l(),!i.current&&x}};function nge(t,e,n,r,i,o,l){var f=E.useRef(0),s=E.useRef(null),p=E.useRef(null),v=E.useRef(!1),x=eX(e,n,r,i);function S(O,k){if(gi.cancel(s.current),!x(!1,k)){var $=O;if(!$._virtualHandled)$._virtualHandled=!0;else return;f.current+=k,p.current=k,s5||$.preventDefault(),s.current=gi(function(){var H=v.current?10:1;l(f.current*H,!1),f.current=0})}}function M(O,k){l(k,!0),s5||O.preventDefault()}var P=E.useRef(null),R=E.useRef(null);function D(O){if(t){gi.cancel(R.current),R.current=gi(function(){P.current=null},2);var k=O.deltaX,$=O.deltaY,H=O.shiftKey,U=k,X=$;(P.current==="sx"||!P.current&&H&&$&&!k)&&(U=$,X=0,P.current="sx");var J=Math.abs(U),K=Math.abs(X);P.current===null&&(P.current=o&&J>K?"x":"y"),P.current==="y"?S(O,X):M(O,U)}}function B(O){t&&(v.current=O.detail===p.current)}return[D,B]}function rge(t,e,n,r){var i=E.useMemo(function(){return[new Map,[]]},[t,n.id,r]),o=ct(i,2),l=o[0],f=o[1],s=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,S=l.get(v),M=l.get(x);if(S===void 0||M===void 0)for(var P=t.length,R=f.length;R<P;R+=1){var D,B=t[R],O=e(B);l.set(O,R);var k=(D=n.get(O))!==null&&D!==void 0?D:r;if(f[R]=(f[R-1]||0)+k,O===v&&(S=R),O===x&&(M=R),S!==void 0&&M!==void 0)break}return{top:f[S-1]||0,bottom:f[M]}};return s}var ige=function(){function t(){Di(this,t),j(this,"maps",void 0),j(this,"id",0),this.maps=Object.create(null)}return ki(t,[{key:"set",value:function(n,r){this.maps[n]=r,this.id+=1}},{key:"get",value:function(n){return this.maps[n]}}]),t}();function oge(t,e,n){var r=E.useState(0),i=ct(r,2),o=i[0],l=i[1],f=E.useRef(new Map),s=E.useRef(new ige),p=E.useRef();function v(){gi.cancel(p.current)}function x(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;v();var P=function(){f.current.forEach(function(D,B){if(D&&D.offsetParent){var O=u_(D),k=O.offsetHeight;s.current.get(B)!==k&&s.current.set(B,O.offsetHeight)}}),l(function(D){return D+1})};M?P():p.current=gi(P)}function S(M,P){var R=t(M),D=f.current.get(R);P?(f.current.set(R,P),x()):f.current.delete(R),!D!=!P&&(P?e==null||e(M):n==null||n(M))}return E.useEffect(function(){return v},[]),[S,x,s.current,o]}var a5=14/15;function sge(t,e,n){var r=E.useRef(!1),i=E.useRef(0),o=E.useRef(0),l=E.useRef(null),f=E.useRef(null),s,p=function(M){if(r.current){var P=Math.ceil(M.touches[0].pageX),R=Math.ceil(M.touches[0].pageY),D=i.current-P,B=o.current-R,O=Math.abs(D)>Math.abs(B);O?i.current=P:o.current=R;var k=n(O,O?D:B,!1,M);k&&M.preventDefault(),clearInterval(f.current),k&&(f.current=setInterval(function(){O?D*=a5:B*=a5;var $=Math.floor(O?D:B);(!n(O,$,!0)||Math.abs($)<=.1)&&clearInterval(f.current)},16))}},v=function(){r.current=!1,s()},x=function(M){s(),M.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(M.touches[0].pageX),o.current=Math.ceil(M.touches[0].pageY),l.current=M.target,l.current.addEventListener("touchmove",p,{passive:!1}),l.current.addEventListener("touchend",v,{passive:!0}))};s=function(){l.current&&(l.current.removeEventListener("touchmove",p),l.current.removeEventListener("touchend",v))},Ji(function(){return t&&e.current.addEventListener("touchstart",x,{passive:!0}),function(){var S;(S=e.current)===null||S===void 0||S.removeEventListener("touchstart",x),s(),clearInterval(f.current)}},[t])}var age=10;function lge(t,e,n,r,i,o,l,f){var s=E.useRef(),p=E.useState(null),v=ct(p,2),x=v[0],S=v[1];return Ji(function(){if(x&&x.times<age){if(!t.current){S(function(xe){return Ye({},xe)});return}o();var M=x.targetAlign,P=x.originAlign,R=x.index,D=x.offset,B=t.current.clientHeight,O=!1,k=M,$=null;if(B){for(var H=M||P,U=0,X=0,J=0,K=Math.min(e.length-1,R),Q=0;Q<=K;Q+=1){var ce=i(e[Q]);X=U;var ge=n.get(ce);J=X+(ge===void 0?r:ge),U=J}for(var ae=H==="top"?D:B-D,ve=K;ve>=0;ve-=1){var Fe=i(e[ve]),Ae=n.get(Fe);if(Ae===void 0){O=!0;break}if(ae-=Ae,ae<=0)break}switch(H){case"top":$=X-D;break;case"bottom":$=J-B+D;break;default:{var pe=t.current.scrollTop,fe=pe+B;X<pe?k="top":J>fe&&(k="bottom")}}$!==null&&l($),$!==x.lastTop&&(O=!0)}O&&S(Ye(Ye({},x),{},{times:x.times+1,targetAlign:k,lastTop:$}))}},[x,t.current]),function(M){if(M==null){f();return}if(gi.cancel(s.current),typeof M=="number")l(M);else if(M&&Kn(M)==="object"){var P,R=M.align;"index"in M?P=M.index:P=e.findIndex(function(O){return i(O)===M.key});var D=M.offset,B=D===void 0?0:D;S({times:0,index:P,offset:B,originAlign:R})}}}function l5(t,e){var n="touches"in t?t.touches[0]:t;return n[e?"pageX":"pageY"]}var c5=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.rtl,i=t.scrollOffset,o=t.scrollRange,l=t.onStartMove,f=t.onStopMove,s=t.onScroll,p=t.horizontal,v=t.spinSize,x=t.containerSize,S=t.style,M=t.thumbStyle,P=E.useState(!1),R=ct(P,2),D=R[0],B=R[1],O=E.useState(null),k=ct(O,2),$=k[0],H=k[1],U=E.useState(null),X=ct(U,2),J=X[0],K=X[1],Q=!r,ce=E.useRef(),ge=E.useRef(),ae=E.useState(!1),ve=ct(ae,2),Fe=ve[0],Ae=ve[1],pe=E.useRef(),fe=function(){clearTimeout(pe.current),Ae(!0),pe.current=setTimeout(function(){Ae(!1)},3e3)},xe=o-x||0,Re=x-v||0,ke=E.useMemo(function(){if(i===0||xe===0)return 0;var st=i/xe;return st*Re},[i,xe,Re]),ze=function(rt){rt.stopPropagation(),rt.preventDefault()},Xe=E.useRef({top:ke,dragging:D,pageY:$,startTop:J});Xe.current={top:ke,dragging:D,pageY:$,startTop:J};var Ne=function(rt){B(!0),H(l5(rt,p)),K(Xe.current.top),l(),rt.stopPropagation(),rt.preventDefault()};E.useEffect(function(){var st=function(bt){bt.preventDefault()},rt=ce.current,lt=ge.current;return rt.addEventListener("touchstart",st,{passive:!1}),lt.addEventListener("touchstart",Ne,{passive:!1}),function(){rt.removeEventListener("touchstart",st),lt.removeEventListener("touchstart",Ne)}},[]);var Qe=E.useRef();Qe.current=xe;var pt=E.useRef();pt.current=Re,E.useEffect(function(){if(D){var st,rt=function(bt){var wt=Xe.current,it=wt.dragging,Bt=wt.pageY,jt=wt.startTop;gi.cancel(st);var cn=ce.current.getBoundingClientRect(),rn=x/(p?cn.width:cn.height);if(it){var zt=(l5(bt,p)-Bt)*rn,bn=jt;!Q&&p?bn-=zt:bn+=zt;var Ot=Qe.current,Nt=pt.current,Jt=Nt?bn/Nt:0,on=Math.ceil(Jt*Ot);on=Math.max(on,0),on=Math.min(on,Ot),st=gi(function(){s(on,p)})}},lt=function(){B(!1),f()};return window.addEventListener("mousemove",rt,{passive:!0}),window.addEventListener("touchmove",rt,{passive:!0}),window.addEventListener("mouseup",lt,{passive:!0}),window.addEventListener("touchend",lt,{passive:!0}),function(){window.removeEventListener("mousemove",rt),window.removeEventListener("touchmove",rt),window.removeEventListener("mouseup",lt),window.removeEventListener("touchend",lt),gi.cancel(st)}}},[D]),E.useEffect(function(){return fe(),function(){clearTimeout(pe.current)}},[i]),E.useImperativeHandle(e,function(){return{delayHidden:fe}});var Ke="".concat(n,"-scrollbar"),ot={position:"absolute",visibility:Fe?null:"hidden"},St={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return p?(ot.height=8,ot.left=0,ot.right=0,ot.bottom=0,St.height="100%",St.width=v,Q?St.left=ke:St.right=ke):(ot.width=8,ot.top=0,ot.bottom=0,Q?ot.right=0:ot.left=0,St.width="100%",St.height=v,St.top=ke),E.createElement("div",{ref:ce,className:At(Ke,j(j(j({},"".concat(Ke,"-horizontal"),p),"".concat(Ke,"-vertical"),!p),"".concat(Ke,"-visible"),Fe)),style:Ye(Ye({},ot),S),onMouseDown:ze,onMouseMove:fe},E.createElement("div",{ref:ge,className:At("".concat(Ke,"-thumb"),j({},"".concat(Ke,"-thumb-moving"),D)),style:Ye(Ye({},St),M),onMouseDown:Ne}))}),cge=20;function u5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t/e*t;return isNaN(n)&&(n=0),n=Math.max(n,cge),Math.floor(n)}var uge=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],dge=[],fge={overflowY:"auto",overflowAnchor:"none"};function hge(t,e){var n=t.prefixCls,r=n===void 0?"rc-virtual-list":n,i=t.className,o=t.height,l=t.itemHeight,f=t.fullHeight,s=f===void 0?!0:f,p=t.style,v=t.data,x=t.children,S=t.itemKey,M=t.virtual,P=t.direction,R=t.scrollWidth,D=t.component,B=D===void 0?"div":D,O=t.onScroll,k=t.onVirtualScroll,$=t.onVisibleChange,H=t.innerProps,U=t.extraRender,X=t.styles,J=Hr(t,uge),K=E.useCallback(function(Cn){return typeof S=="function"?S(Cn):Cn==null?void 0:Cn[S]},[S]),Q=oge(K,null,null),ce=ct(Q,4),ge=ce[0],ae=ce[1],ve=ce[2],Fe=ce[3],Ae=!!(M!==!1&&o&&l),pe=E.useMemo(function(){return Object.values(ve.maps).reduce(function(Cn,yn){return Cn+yn},0)},[ve.id,ve.maps]),fe=Ae&&v&&(Math.max(l*v.length,pe)>o||!!R),xe=P==="rtl",Re=At(r,j({},"".concat(r,"-rtl"),xe),i),ke=v||dge,ze=E.useRef(),Xe=E.useRef(),Ne=E.useRef(),Qe=E.useState(0),pt=ct(Qe,2),Ke=pt[0],ot=pt[1],St=E.useState(0),st=ct(St,2),rt=st[0],lt=st[1],Rt=E.useState(!1),bt=ct(Rt,2),wt=bt[0],it=bt[1],Bt=function(){it(!0)},jt=function(){it(!1)},cn={getKey:K};function rn(Cn){ot(function(yn){var Ft;typeof Cn=="function"?Ft=Cn(yn):Ft=Cn;var Gt=oe(Ft);return ze.current.scrollTop=Gt,Gt})}var zt=E.useRef({start:0,end:ke.length}),bn=E.useRef(),Ot=tge(ke,K),Nt=ct(Ot,1),Jt=Nt[0];bn.current=Jt;var on=E.useMemo(function(){if(!Ae)return{scrollHeight:void 0,start:0,end:ke.length-1,offset:void 0};if(!fe){var Cn;return{scrollHeight:((Cn=Xe.current)===null||Cn===void 0?void 0:Cn.offsetHeight)||0,start:0,end:ke.length-1,offset:void 0}}for(var yn=0,Ft,Gt,xn,nr=ke.length,or=0;or<nr;or+=1){var Fr=ke[or],Or=K(Fr),Xr=ve.get(Or),Qr=yn+(Xr===void 0?l:Xr);Qr>=Ke&&Ft===void 0&&(Ft=or,Gt=yn),Qr>Ke+o&&xn===void 0&&(xn=or),yn=Qr}return Ft===void 0&&(Ft=0,Gt=0,xn=Math.ceil(o/l)),xn===void 0&&(xn=ke.length-1),xn=Math.min(xn+1,ke.length-1),{scrollHeight:yn,start:Ft,end:xn,offset:Gt}},[fe,Ae,Ke,ke,Fe,o]),vn=on.scrollHeight,hn=on.start,wn=on.end,Rn=on.offset;zt.current.start=hn,zt.current.end=wn;var Vn=E.useState({width:0,height:o}),rr=ct(Vn,2),Pn=rr[0],Sn=rr[1],fr=function(yn){Sn({width:yn.offsetWidth,height:yn.offsetHeight})},cr=E.useRef(),ur=E.useRef(),tr=E.useMemo(function(){return u5(Pn.width,R)},[Pn.width,R]),oi=E.useMemo(function(){return u5(Pn.height,vn)},[Pn.height,vn]),Oe=vn-o,se=E.useRef(Oe);se.current=Oe;function oe(Cn){var yn=Cn;return Number.isNaN(se.current)||(yn=Math.min(yn,se.current)),yn=Math.max(yn,0),yn}var te=Ke<=0,le=Ke>=Oe,ue=rt<=0,Me=rt>=R,Ce=eX(te,le,ue,Me),_e=function(){return{x:xe?-rt:rt,y:Ke}},De=E.useRef(_e()),et=xo(function(Cn){if(k){var yn=Ye(Ye({},_e()),Cn);(De.current.x!==yn.x||De.current.y!==yn.y)&&(k(yn),De.current=yn)}});function nt(Cn,yn){var Ft=Cn;yn?(rd.flushSync(function(){lt(Ft)}),et()):rn(Ft)}function Ze(Cn){var yn=Cn.currentTarget.scrollTop;yn!==Ke&&rn(yn),O==null||O(Cn),et()}var Et=function(yn){var Ft=yn,Gt=R?R-Pn.width:0;return Ft=Math.max(Ft,0),Ft=Math.min(Ft,Gt),Ft},vt=xo(function(Cn,yn){yn?(rd.flushSync(function(){lt(function(Ft){var Gt=Ft+(xe?-Cn:Cn);return Et(Gt)})}),et()):rn(function(Ft){var Gt=Ft+Cn;return Gt})}),Ct=nge(Ae,te,le,ue,Me,!!R,vt),Vt=ct(Ct,2),ln=Vt[0],kn=Vt[1];sge(Ae,ze,function(Cn,yn,Ft,Gt){var xn=Gt;return Ce(Cn,yn,Ft)?!1:!xn||!xn._virtualHandled?(xn&&(xn._virtualHandled=!0),ln({preventDefault:function(){},deltaX:Cn?yn:0,deltaY:Cn?0:yn}),!0):!1}),Ji(function(){function Cn(Ft){Ae&&Ft.preventDefault()}var yn=ze.current;return yn.addEventListener("wheel",ln,{passive:!1}),yn.addEventListener("DOMMouseScroll",kn,{passive:!0}),yn.addEventListener("MozMousePixelScroll",Cn,{passive:!1}),function(){yn.removeEventListener("wheel",ln),yn.removeEventListener("DOMMouseScroll",kn),yn.removeEventListener("MozMousePixelScroll",Cn)}},[Ae]),Ji(function(){if(R){var Cn=Et(rt);lt(Cn),et({x:Cn})}},[Pn.width,R]);var Jn=function(){var yn,Ft;(yn=cr.current)===null||yn===void 0||yn.delayHidden(),(Ft=ur.current)===null||Ft===void 0||Ft.delayHidden()},_r=lge(ze,ke,ve,l,K,function(){return ae(!0)},rn,Jn);E.useImperativeHandle(e,function(){return{nativeElement:Ne.current,getScrollInfo:_e,scrollTo:function(yn){function Ft(Gt){return Gt&&Kn(Gt)==="object"&&("left"in Gt||"top"in Gt)}Ft(yn)?(yn.left!==void 0&&lt(Et(yn.left)),_r(yn.top)):_r(yn)}}}),Ji(function(){if($){var Cn=ke.slice(hn,wn+1);$(Cn,ke)}},[hn,wn,ke]);var Wn=rge(ke,K,ve,l),dr=U==null?void 0:U({start:hn,end:wn,virtual:fe,offsetX:rt,offsetY:Rn,rtl:xe,getSize:Wn}),gr=Qme(ke,hn,wn,R,rt,ge,x,cn),Yn=null;o&&(Yn=Ye(j({},s?"height":"maxHeight",o),fge),Ae&&(Yn.overflowY="hidden",R&&(Yn.overflowX="hidden"),wt&&(Yn.pointerEvents="none")));var ri={};return xe&&(ri.dir="rtl"),E.createElement("div",Mn({ref:Ne,style:Ye(Ye({},p),{},{position:"relative"}),className:Re},ri,J),E.createElement(Hf,{onResize:fr},E.createElement(B,{className:"".concat(r,"-holder"),style:Yn,ref:ze,onScroll:Ze,onMouseEnter:Jn},E.createElement(Q7,{prefixCls:r,height:vn,offsetX:rt,offsetY:Rn,scrollWidth:R,onInnerResize:ae,ref:Xe,innerProps:H,rtl:xe,extra:dr},gr))),fe&&vn>o&&E.createElement(c5,{ref:cr,prefixCls:r,scrollOffset:Ke,scrollRange:vn,rtl:xe,onScroll:nt,onStartMove:Bt,onStopMove:jt,spinSize:oi,containerSize:Pn.height,style:X==null?void 0:X.verticalScrollBar,thumbStyle:X==null?void 0:X.verticalScrollBarThumb}),fe&&R>Pn.width&&E.createElement(c5,{ref:ur,prefixCls:r,scrollOffset:rt,scrollRange:R,rtl:xe,onScroll:nt,onStartMove:Bt,onStopMove:jt,spinSize:tr,containerSize:Pn.width,horizontal:!0,style:X==null?void 0:X.horizontalScrollBar,thumbStyle:X==null?void 0:X.horizontalScrollBarThumb}))}var tX=E.forwardRef(hge);tX.displayName="List";function pge(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var mge=["disabled","title","children","style","className"];function d5(t){return typeof t=="string"||typeof t=="number"}var gge=function(e,n){var r=rme(),i=r.prefixCls,o=r.id,l=r.open,f=r.multiple,s=r.mode,p=r.searchValue,v=r.toggleOpen,x=r.notFoundContent,S=r.onPopupScroll,M=E.useContext(d3),P=M.maxCount,R=M.flattenOptions,D=M.onActiveValue,B=M.defaultActiveFirstOption,O=M.onSelect,k=M.menuItemSelectedIcon,$=M.rawValues,H=M.fieldNames,U=M.virtual,X=M.direction,J=M.listHeight,K=M.listItemHeight,Q=M.optionRender,ce="".concat(i,"-item"),ge=nT(function(){return R},[l,R],function(st,rt){return rt[0]&&st[1]!==rt[1]}),ae=E.useRef(null),ve=E.useMemo(function(){return f&&hL(P)&&($==null?void 0:$.size)>=P},[f,P,$==null?void 0:$.size]),Fe=function(rt){rt.preventDefault()},Ae=function(rt){var lt;(lt=ae.current)===null||lt===void 0||lt.scrollTo(typeof rt=="number"?{index:rt}:rt)},pe=function(rt){for(var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Rt=ge.length,bt=0;bt<Rt;bt+=1){var wt=(rt+bt*lt+Rt)%Rt,it=ge[wt]||{},Bt=it.group,jt=it.data;if(!Bt&&!(jt!=null&&jt.disabled)&&!ve)return wt}return-1},fe=E.useState(function(){return pe(0)}),xe=ct(fe,2),Re=xe[0],ke=xe[1],ze=function(rt){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ke(rt);var Rt={source:lt?"keyboard":"mouse"},bt=ge[rt];if(!bt){D(null,-1,Rt);return}D(bt.value,rt,Rt)};E.useEffect(function(){ze(B!==!1?pe(0):-1)},[ge.length,p]);var Xe=E.useCallback(function(st){return $.has(st)&&s!=="combobox"},[s,sn($).toString(),$.size]);E.useEffect(function(){var st=setTimeout(function(){if(!f&&l&&$.size===1){var lt=Array.from($)[0],Rt=ge.findIndex(function(bt){var wt=bt.data;return wt.value===lt});Rt!==-1&&(ze(Rt),Ae(Rt))}});if(l){var rt;(rt=ae.current)===null||rt===void 0||rt.scrollTo(void 0)}return function(){return clearTimeout(st)}},[l,p]);var Ne=function(rt){rt!==void 0&&O(rt,{selected:!$.has(rt)}),f||v(!1)};if(E.useImperativeHandle(n,function(){return{onKeyDown:function(rt){var lt=rt.which,Rt=rt.ctrlKey;switch(lt){case nn.N:case nn.P:case nn.UP:case nn.DOWN:{var bt=0;if(lt===nn.UP?bt=-1:lt===nn.DOWN?bt=1:pge()&&Rt&&(lt===nn.N?bt=1:lt===nn.P&&(bt=-1)),bt!==0){var wt=pe(Re+bt,bt);Ae(wt),ze(wt,!0)}break}case nn.ENTER:{var it,Bt=ge[Re];Bt&&!(Bt!=null&&(it=Bt.data)!==null&&it!==void 0&&it.disabled)&&!ve?Ne(Bt.value):Ne(void 0),l&&rt.preventDefault();break}case nn.ESC:v(!1),l&&rt.stopPropagation()}},onKeyUp:function(){},scrollTo:function(rt){Ae(rt)}}}),ge.length===0)return E.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(ce,"-empty"),onMouseDown:Fe},x);var Qe=Object.keys(H).map(function(st){return H[st]}),pt=function(rt){return rt.label};function Ke(st,rt){var lt=st.group;return{role:lt?"presentation":"option",id:"".concat(o,"_list_").concat(rt)}}var ot=function(rt){var lt=ge[rt];if(!lt)return null;var Rt=lt.data||{},bt=Rt.value,wt=lt.group,it=id(Rt,!0),Bt=pt(lt);return lt?E.createElement("div",Mn({"aria-label":typeof Bt=="string"&&!wt?Bt:null},it,{key:rt},Ke(lt,rt),{"aria-selected":Xe(bt)}),bt):null},St={role:"listbox",id:"".concat(o,"_list")};return E.createElement(E.Fragment,null,U&&E.createElement("div",Mn({},St,{style:{height:0,width:0,overflow:"hidden"}}),ot(Re-1),ot(Re),ot(Re+1)),E.createElement(tX,{itemKey:"key",ref:ae,data:ge,height:J,itemHeight:K,fullHeight:!1,onMouseDown:Fe,onScroll:S,virtual:U,direction:X,innerProps:U?null:St},function(st,rt){var lt=st.group,Rt=st.groupOption,bt=st.data,wt=st.label,it=st.value,Bt=bt.key;if(lt){var jt,cn=(jt=bt.title)!==null&&jt!==void 0?jt:d5(wt)?wt.toString():void 0;return E.createElement("div",{className:At(ce,"".concat(ce,"-group"),bt.className),title:cn},wt!==void 0?wt:Bt)}var rn=bt.disabled,zt=bt.title;bt.children;var bn=bt.style,Ot=bt.className,Nt=Hr(bt,mge),Jt=Ml(Nt,Qe),on=Xe(it),vn=rn||!on&&ve,hn="".concat(ce,"-option"),wn=At(ce,hn,Ot,j(j(j(j({},"".concat(hn,"-grouped"),Rt),"".concat(hn,"-active"),Re===rt&&!vn),"".concat(hn,"-disabled"),vn),"".concat(hn,"-selected"),on)),Rn=pt(st),Vn=!k||typeof k=="function"||on,rr=typeof Rn=="number"?Rn:Rn||it,Pn=d5(rr)?rr.toString():void 0;return zt!==void 0&&(Pn=zt),E.createElement("div",Mn({},id(Jt),U?{}:Ke(st,rt),{"aria-selected":on,className:wn,title:Pn,onMouseMove:function(){Re===rt||vn||ze(rt)},onClick:function(){vn||Ne(it)},style:bn}),E.createElement("div",{className:"".concat(hn,"-content")},typeof Q=="function"?Q(st,{index:rt}):rr),E.isValidElement(k)||on,Vn&&E.createElement(yT,{className:"".concat(ce,"-option-state"),customizeIcon:k,customizeIconProps:{value:it,disabled:vn,isSelected:on}},on?"✓":null))}))},vge=E.forwardRef(gge);const yge=function(t,e){var n=E.useRef({values:new Map,options:new Map}),r=E.useMemo(function(){var o=n.current,l=o.values,f=o.options,s=t.map(function(x){if(x.label===void 0){var S;return Ye(Ye({},x),{},{label:(S=l.get(x.value))===null||S===void 0?void 0:S.label})}return x}),p=new Map,v=new Map;return s.forEach(function(x){p.set(x.value,x),v.set(x.value,e.get(x.value)||f.get(x.value))}),n.current.values=p,n.current.options=v,s},[t,e]),i=E.useCallback(function(o){return e.get(o)||n.current.options.get(o)},[e]);return[r,i]};function WP(t,e){return Y7(t).join("").toUpperCase().includes(e)}const _ge=function(t,e,n,r,i){return E.useMemo(function(){if(!n||r===!1)return t;var o=e.options,l=e.label,f=e.value,s=[],p=typeof r=="function",v=n.toUpperCase(),x=p?r:function(M,P){return i?WP(P[i],v):P[o]?WP(P[l!=="children"?l:"label"],v):WP(P[f],v)},S=p?function(M){return pL(M)}:function(M){return M};return t.forEach(function(M){if(M[o]){var P=x(n,S(M));if(P)s.push(M);else{var R=M[o].filter(function(D){return x(n,S(D))});R.length&&s.push(Ye(Ye({},M),{},j({},o,R)))}return}x(n,S(M))&&s.push(M)}),s},[t,r,i,n,e])};var f5=0,bge=Xs();function xge(){var t;return bge?(t=f5,f5+=1):t="TEST_OR_SSR",t}function wge(t){var e=E.useState(),n=ct(e,2),r=n[0],i=n[1];return E.useEffect(function(){i("rc_select_".concat(xge()))},[]),t||r}var Sge=["children","value"],Ege=["children"];function Cge(t){var e=t,n=e.key,r=e.props,i=r.children,o=r.value,l=Hr(r,Sge);return Ye({key:n,value:o!==void 0?o:n,children:i},l)}function nX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return zf(t).map(function(n,r){if(!E.isValidElement(n)||!n.type)return null;var i=n,o=i.type.isSelectOptGroup,l=i.key,f=i.props,s=f.children,p=Hr(f,Ege);return e||!o?Cge(n):Ye(Ye({key:"__RC_SELECT_GRP__".concat(l===null?r:l,"__"),label:l},p),{},{options:nX(s)})}).filter(function(n){return n})}var Tge=function(e,n,r,i,o){return E.useMemo(function(){var l=e,f=!e;f&&(l=nX(n));var s=new Map,p=new Map,v=function(M,P,R){R&&typeof R=="string"&&M.set(P[R],P)},x=function S(M){for(var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=0;R<M.length;R+=1){var D=M[R];!D[r.options]||P?(s.set(D[r.value],D),v(p,D,r.label),v(p,D,i),v(p,D,o)):S(D[r.options],!0)}};return x(l),{options:l,valueOptions:s,labelOptions:p}},[e,n,r,i,o])};function h5(t){var e=E.useRef();e.current=t;var n=E.useCallback(function(){return e.current.apply(e,arguments)},[]);return n}var Age=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Mge=["inputValue"];function Pge(t){return!t||Kn(t)!=="object"}var Ige=E.forwardRef(function(t,e){var n=t.id,r=t.mode,i=t.prefixCls,o=i===void 0?"rc-select":i,l=t.backfill,f=t.fieldNames,s=t.inputValue,p=t.searchValue,v=t.onSearch,x=t.autoClearSearchValue,S=x===void 0?!0:x,M=t.onSelect,P=t.onDeselect,R=t.dropdownMatchSelectWidth,D=R===void 0?!0:R,B=t.filterOption,O=t.filterSort,k=t.optionFilterProp,$=t.optionLabelProp,H=t.options,U=t.optionRender,X=t.children,J=t.defaultActiveFirstOption,K=t.menuItemSelectedIcon,Q=t.virtual,ce=t.direction,ge=t.listHeight,ae=ge===void 0?200:ge,ve=t.listItemHeight,Fe=ve===void 0?20:ve,Ae=t.labelRender,pe=t.value,fe=t.defaultValue,xe=t.labelInValue,Re=t.onChange,ke=t.maxCount,ze=Hr(t,Age),Xe=wge(n),Ne=mL(r),Qe=!!(!H&&X),pt=E.useMemo(function(){return B===void 0&&r==="combobox"?!1:B},[B,r]),Ke=E.useMemo(function(){return J7(f,Qe)},[JSON.stringify(f),Qe]),ot=au("",{value:p!==void 0?p:s,postState:function(Et){return Et||""}}),St=ct(ot,2),st=St[0],rt=St[1],lt=Tge(H,X,Ke,k,$),Rt=lt.valueOptions,bt=lt.labelOptions,wt=lt.options,it=E.useCallback(function(Ze){var Et=Y7(Ze);return Et.map(function(vt){var Ct,Vt,ln,kn,Jn;if(Pge(vt))Ct=vt;else{var _r;ln=vt.key,Vt=vt.label,Ct=(_r=vt.value)!==null&&_r!==void 0?_r:ln}var Wn=Rt.get(Ct);if(Wn){var dr;Vt===void 0&&(Vt=Wn==null?void 0:Wn[$||Ke.label]),ln===void 0&&(ln=(dr=Wn==null?void 0:Wn.key)!==null&&dr!==void 0?dr:Ct),kn=Wn==null?void 0:Wn.disabled,Jn=Wn==null?void 0:Wn.title}return{label:Vt,value:Ct,key:ln,disabled:kn,title:Jn}})},[Ke,$,Rt]),Bt=au(fe,{value:pe}),jt=ct(Bt,2),cn=jt[0],rn=jt[1],zt=E.useMemo(function(){var Ze,Et=Ne&&cn===null?[]:cn,vt=it(Et);return r==="combobox"&&wme((Ze=vt[0])===null||Ze===void 0?void 0:Ze.value)?[]:vt},[cn,it,r,Ne]),bn=yge(zt,Rt),Ot=ct(bn,2),Nt=Ot[0],Jt=Ot[1],on=E.useMemo(function(){if(!r&&Nt.length===1){var Ze=Nt[0];if(Ze.value===null&&(Ze.label===null||Ze.label===void 0))return[]}return Nt.map(function(Et){var vt;return Ye(Ye({},Et),{},{label:(vt=typeof Ae=="function"?Ae(Et):Et.label)!==null&&vt!==void 0?vt:Et.value})})},[r,Nt,Ae]),vn=E.useMemo(function(){return new Set(Nt.map(function(Ze){return Ze.value}))},[Nt]);E.useEffect(function(){if(r==="combobox"){var Ze,Et=(Ze=Nt[0])===null||Ze===void 0?void 0:Ze.value;rt(xme(Et)?String(Et):"")}},[Nt]);var hn=h5(function(Ze,Et){var vt=Et??Ze;return j(j({},Ke.value,Ze),Ke.label,vt)}),wn=E.useMemo(function(){if(r!=="tags")return wt;var Ze=sn(wt),Et=function(Ct){return Rt.has(Ct)};return sn(Nt).sort(function(vt,Ct){return vt.value<Ct.value?-1:1}).forEach(function(vt){var Ct=vt.value;Et(Ct)||Ze.push(hn(Ct,vt.label))}),Ze},[hn,wt,Rt,Nt,r]),Rn=_ge(wn,Ke,st,pt,k),Vn=E.useMemo(function(){return r!=="tags"||!st||Rn.some(function(Ze){return Ze[k||"value"]===st})||Rn.some(function(Ze){return Ze[Ke.value]===st})?Rn:[hn(st)].concat(sn(Rn))},[hn,k,r,Rn,st,Ke]),rr=function Ze(Et){var vt=sn(Et).sort(function(Ct,Vt){return O(Ct,Vt,{searchValue:st})});return vt.map(function(Ct){return Array.isArray(Ct.options)?Ye(Ye({},Ct),{},{options:Ct.options.length>0?Ze(Ct.options):Ct.options}):Ct})},Pn=E.useMemo(function(){return O?rr(Vn):Vn},[Vn,O,st]),Sn=E.useMemo(function(){return Wme(Pn,{fieldNames:Ke,childrenAsData:Qe})},[Pn,Ke,Qe]),fr=function(Et){var vt=it(Et);if(rn(vt),Re&&(vt.length!==Nt.length||vt.some(function(ln,kn){var Jn;return((Jn=Nt[kn])===null||Jn===void 0?void 0:Jn.value)!==(ln==null?void 0:ln.value)}))){var Ct=xe?vt:vt.map(function(ln){return ln.value}),Vt=vt.map(function(ln){return pL(Jt(ln.value))});Re(Ne?Ct:Ct[0],Ne?Vt:Vt[0])}},cr=E.useState(null),ur=ct(cr,2),tr=ur[0],oi=ur[1],Oe=E.useState(0),se=ct(Oe,2),oe=se[0],te=se[1],le=J!==void 0?J:r!=="combobox",ue=E.useCallback(function(Ze,Et){var vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ct=vt.source,Vt=Ct===void 0?"keyboard":Ct;te(Et),l&&r==="combobox"&&Ze!==null&&Vt==="keyboard"&&oi(String(Ze))},[l,r]),Me=function(Et,vt,Ct){var Vt=function(){var Cn,yn=Jt(Et);return[xe?{label:yn==null?void 0:yn[Ke.label],value:Et,key:(Cn=yn==null?void 0:yn.key)!==null&&Cn!==void 0?Cn:Et}:Et,pL(yn)]};if(vt&&M){var ln=Vt(),kn=ct(ln,2),Jn=kn[0],_r=kn[1];M(Jn,_r)}else if(!vt&&P&&Ct!=="clear"){var Wn=Vt(),dr=ct(Wn,2),gr=dr[0],Yn=dr[1];P(gr,Yn)}},Ce=h5(function(Ze,Et){var vt,Ct=Ne?Et.selected:!0;Ct?vt=Ne?[].concat(sn(Nt),[Ze]):[Ze]:vt=Nt.filter(function(Vt){return Vt.value!==Ze}),fr(vt),Me(Ze,Ct),r==="combobox"?oi(""):(!mL||S)&&(rt(""),oi(""))}),_e=function(Et,vt){fr(Et);var Ct=vt.type,Vt=vt.values;(Ct==="remove"||Ct==="clear")&&Vt.forEach(function(ln){Me(ln.value,!1,Ct)})},De=function(Et,vt){if(rt(Et),oi(null),vt.source==="submit"){var Ct=(Et||"").trim();if(Ct){var Vt=Array.from(new Set([].concat(sn(vn),[Ct])));fr(Vt),Me(Ct,!0),rt("")}return}vt.source!=="blur"&&(r==="combobox"&&fr(Et),v==null||v(Et))},et=function(Et){var vt=Et;r!=="tags"&&(vt=Et.map(function(Vt){var ln=bt.get(Vt);return ln==null?void 0:ln.value}).filter(function(Vt){return Vt!==void 0}));var Ct=Array.from(new Set([].concat(sn(vn),sn(vt))));fr(Ct),Ct.forEach(function(Vt){Me(Vt,!0)})},nt=E.useMemo(function(){var Ze=Q!==!1&&D!==!1;return Ye(Ye({},lt),{},{flattenOptions:Sn,onActiveValue:ue,defaultActiveFirstOption:le,onSelect:Ce,menuItemSelectedIcon:K,rawValues:vn,fieldNames:Ke,virtual:Ze,direction:ce,listHeight:ae,listItemHeight:Fe,childrenAsData:Qe,maxCount:ke,optionRender:U})},[ke,lt,Sn,ue,le,Ce,K,vn,Ke,Q,D,ce,ae,Fe,Qe,U]);return E.createElement(d3.Provider,{value:nt},E.createElement(Kme,Mn({},ze,{id:Xe,prefixCls:o,ref:e,omitDomProps:Mge,mode:r,displayValues:on,onDisplayValuesChange:_e,direction:ce,searchValue:st,onSearch:De,autoClearSearchValue:S,onSearchSplit:et,dropdownMatchSelectWidth:D,OptionList:vge,emptyOptions:!Sn.length,activeValue:tr,activeDescendantId:"".concat(Xe,"_list_").concat(oe)})))}),p3=Ige;p3.Option=h3;p3.OptGroup=f3;function av(t,e,n){return At({[`${t}-status-success`]:e==="success",[`${t}-status-warning`]:e==="warning",[`${t}-status-error`]:e==="error",[`${t}-status-validating`]:e==="validating",[`${t}-has-feedback`]:n})}const Kb=(t,e)=>e||t,Rge=()=>{const[,t]=Ja(),n=new Ro(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return E.createElement("svg",{style:n,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},E.createElement("title",null,"empty image"),E.createElement("g",{fill:"none",fillRule:"evenodd"},E.createElement("g",{transform:"translate(24 31.67)"},E.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),E.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),E.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),E.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),E.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),E.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),E.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},E.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),E.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Oge=Rge,Lge=()=>{const[,t]=Ja(),{colorFill:e,colorFillTertiary:n,colorFillQuaternary:r,colorBgContainer:i}=t,{borderColor:o,shadowColor:l,contentColor:f}=E.useMemo(()=>({borderColor:new Ro(e).onBackground(i).toHexShortString(),shadowColor:new Ro(n).onBackground(i).toHexShortString(),contentColor:new Ro(r).onBackground(i).toHexShortString()}),[e,n,r,i]);return E.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},E.createElement("title",null,"Simple Empty"),E.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},E.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),E.createElement("g",{fillRule:"nonzero",stroke:o},E.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),E.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:f}))))},Bge=Lge,Dge=t=>{const{componentCls:e,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:l}=t;return{[e]:{marginInline:r,fontSize:o,lineHeight:l,textAlign:"center",[`${e}-image`]:{height:t.emptyImgHeight,marginBottom:r,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:t.colorTextDescription},[`${e}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:t.colorTextDescription,[`${e}-description`]:{color:t.colorTextDescription},[`${e}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:r,color:t.colorTextDescription,[`${e}-image`]:{height:t.emptyImgHeightSM}}}}},kge=Ss("Empty",t=>{const{componentCls:e,controlHeightLG:n,calc:r}=t,i=$i(t,{emptyImgCls:`${e}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[Dge(i)]});var Fge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const rX=E.createElement(Oge,null),iX=E.createElement(Bge,null),m3=t=>{var{className:e,rootClassName:n,prefixCls:r,image:i=rX,description:o,children:l,imageStyle:f,style:s}=t,p=Fge(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:v,direction:x,empty:S}=E.useContext(Sr),M=v("empty",r),[P,R,D]=kge(M),[B]=Ub("Empty"),O=typeof o<"u"?o:B==null?void 0:B.description,k=typeof O=="string"?O:"empty";let $=null;return typeof i=="string"?$=E.createElement("img",{alt:k,src:i}):$=i,P(E.createElement("div",Object.assign({className:At(R,D,M,S==null?void 0:S.className,{[`${M}-normal`]:i===iX,[`${M}-rtl`]:x==="rtl"},e,n),style:Object.assign(Object.assign({},S==null?void 0:S.style),s)},p),E.createElement("div",{className:`${M}-image`,style:f},$),O&&E.createElement("div",{className:`${M}-description`},O),l&&E.createElement("div",{className:`${M}-footer`},l)))};m3.PRESENTED_IMAGE_DEFAULT=rX;m3.PRESENTED_IMAGE_SIMPLE=iX;const b0=m3,zge=t=>{const{componentName:e}=t,{getPrefixCls:n}=E.useContext(Sr),r=n("empty");switch(e){case"Table":case"List":return Tt.createElement(b0,{image:b0.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Tt.createElement(b0,{image:b0.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return Tt.createElement(b0,null)}},Nge=zge,_T=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var r,i;const{variant:o,[t]:l}=E.useContext(Sr),f=E.useContext(T7),s=l==null?void 0:l.variant;let p;typeof e<"u"?p=e:n===!1?p="borderless":p=(i=(r=f??s)!==null&&r!==void 0?r:o)!==null&&i!==void 0?i:"outlined";const v=cce.includes(p);return[p,v]},$ge=t=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:t==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function jge(t,e){return t||$ge(e)}const p5=t=>{const{optionHeight:e,optionFontSize:n,optionLineHeight:r,optionPadding:i}=t;return{position:"relative",display:"block",minHeight:e,padding:i,color:t.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},Uge=t=>{const{antCls:e,componentCls:n}=t,r=`${n}-item`,i=`&${e}-slide-up-enter${e}-slide-up-enter-active`,o=`&${e}-slide-up-appear${e}-slide-up-appear-active`,l=`&${e}-slide-up-leave${e}-slide-up-leave-active`,f=`${n}-dropdown-placement-`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},ys(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`
          ${i}${f}bottomLeft,
          ${o}${f}bottomLeft
        `]:{animationName:t7},[`
          ${i}${f}topLeft,
          ${o}${f}topLeft,
          ${i}${f}topRight,
          ${o}${f}topRight
        `]:{animationName:r7},[`${l}${f}bottomLeft`]:{animationName:n7},[`
          ${l}${f}topLeft,
          ${l}${f}topRight
        `]:{animationName:i7},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},p5(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},XO),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${r}-option-state`]:{color:t.colorPrimary},[`&:has(+ ${r}-option-selected:not(${r}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${r}-option-selected:not(${r}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},p5(t)),{color:t.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},y$(t,"slide-up"),y$(t,"slide-down"),v$(t,"move-up"),v$(t,"move-down")]},Vge=t=>{const{multipleSelectItemHeight:e,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:i}=t,o=t.max(t.calc(n).sub(r).equal(),0),l=t.max(t.calc(o).sub(i).equal(),0);return{basePadding:o,containerPadding:l,itemHeight:Kt(e),itemLineHeight:Kt(t.calc(e).sub(t.calc(t.lineWidth).mul(2)).equal())}},Gge=t=>{const{multipleSelectItemHeight:e,selectHeight:n,lineWidth:r}=t;return t.calc(n).sub(e).div(2).sub(r).equal()},Hge=t=>{const{componentCls:e,iconCls:n,borderRadiusSM:r,motionDurationSlow:i,paddingXS:o,multipleItemColorDisabled:l,multipleItemBorderColorDisabled:f,colorIcon:s,colorIconHover:p,INTERNAL_FIXED_ITEM_MARGIN:v}=t;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:v,borderRadius:r,cursor:"default",transition:`font-size ${i}, line-height ${i}, height ${i}`,marginInlineEnd:t.calc(v).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:t.calc(o).div(2).equal(),[`${e}-disabled&`]:{color:l,borderColor:f,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},cT()),{display:"inline-flex",alignItems:"center",color:s,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:p}})}}}},Wge=(t,e)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=t,i=`${n}-selection-overflow`,o=t.multipleSelectItemHeight,l=Gge(t),f=e?`${n}-${e}`:"",s=Vge(t);return{[`${n}-multiple${f}`]:Object.assign(Object.assign({},Hge(t)),{[`${n}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:s.basePadding,paddingBlock:s.containerPadding,borderRadius:t.borderRadius,[`${n}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Kt(r)} 0`,lineHeight:Kt(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:s.itemHeight,lineHeight:Kt(s.itemLineHeight)},[`${i}-item + ${i}-item`]:{[`${n}-selection-search`]:{marginInlineStart:0}},[`${i}-item-suffix`]:{height:"100%"},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(l).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:t.fontFamily,lineHeight:Kt(o),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.inputPaddingHorizontalBase,insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}})}};function XP(t,e){const{componentCls:n}=t,r=e?`${n}-${e}`:"",i={[`${n}-multiple${r}`]:{fontSize:t.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()}}};return[Wge(t,e),i]}const Xge=t=>{const{componentCls:e}=t,n=$i(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.multipleItemHeightSM,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),r=$i(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[XP(t),XP(n,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},XP(r,"lg")]};function qP(t,e){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i,fontSizeIcon:o}=t,l=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),f=t.calc(r).add(o).equal(),s=e?`${n}-${e}`:"";return{[`${n}-single${s}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},ys(t,!0)),{display:"flex",borderRadius:i,[`${n}-selection-search`]:{position:"absolute",top:0,insetInlineStart:r,insetInlineEnd:Kt(f),bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{padding:0,lineHeight:Kt(l),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",padding:`0 ${Kt(r)}`,[`${n}-selection-search-input`]:{height:l},"&:after":{lineHeight:Kt(l)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Kt(r)}`,"&:after":{display:"none"}}}}}}}function qge(t){const{componentCls:e}=t,n=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[qP(t),qP($i(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selection-search`]:{insetInlineStart:n,insetInlineEnd:n},[`${e}-selector`]:{padding:`0 ${Kt(n)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:t.calc(n).add(t.calc(t.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},qP($i(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const Yge=t=>{const{fontSize:e,lineHeight:n,lineWidth:r,controlHeight:i,controlHeightSM:o,controlHeightLG:l,paddingXXS:f,controlPaddingHorizontal:s,zIndexPopupBase:p,colorText:v,fontWeightStrong:x,controlItemBgActive:S,controlItemBgHover:M,colorBgContainer:P,colorFillSecondary:R,colorBgContainerDisabled:D,colorTextDisabled:B,colorPrimaryHover:O,colorPrimary:k,controlOutline:$}=t,H=f*2,U=r*2,X=Math.min(i-H,i-U),J=Math.min(o-H,o-U),K=Math.min(l-H,l-U);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(f/2),zIndexPopup:p+50,optionSelectedColor:v,optionSelectedFontWeight:x,optionSelectedBg:S,optionActiveBg:M,optionPadding:`${(i-e*n)/2}px ${s}px`,optionFontSize:e,optionLineHeight:n,optionHeight:i,selectorBg:P,clearBg:P,singleItemHeightLG:l,multipleItemBg:R,multipleItemBorderColor:"transparent",multipleItemHeight:X,multipleItemHeightSM:J,multipleItemHeightLG:K,multipleSelectorBgDisabled:D,multipleItemColorDisabled:B,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(t.fontSize*1.25),hoverBorderColor:O,activeBorderColor:k,activeOutlineColor:$}},oX=(t,e)=>{const{componentCls:n,antCls:r,controlOutlineWidth:i}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${Kt(t.lineWidth)} ${t.lineType} ${e.borderColor}`,background:t.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${Kt(i)} ${e.activeOutlineColor}`,outline:0}}}},m5=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},oX(t,e))}),Zge=t=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},oX(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor})),m5(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline})),m5(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Kt(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),sX=(t,e)=>{const{componentCls:n,antCls:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:e.bg,border:`${Kt(t.lineWidth)} ${t.lineType} transparent`,color:e.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:e.hoverBg},[`${n}-focused& ${n}-selector`]:{background:t.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},g5=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},sX(t,e))}),Kge=t=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},sX(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.colorPrimary,color:t.colorText})),g5(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,color:t.colorError})),g5(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{borderColor:t.colorBorder,background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.colorBgContainer,border:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}})}),Jge=t=>({"&-borderless":{[`${t.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Kt(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`},[`&${t.componentCls}-status-error`]:{[`${t.componentCls}-selection-item`]:{color:t.colorError}},[`&${t.componentCls}-status-warning`]:{[`${t.componentCls}-selection-item`]:{color:t.colorWarning}}}}),Qge=t=>({[t.componentCls]:Object.assign(Object.assign(Object.assign({},Zge(t)),Kge(t)),Jge(t))}),eve=t=>{const{componentCls:e}=t;return{position:"relative",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},tve=t=>{const{componentCls:e}=t;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},nve=t=>{const{antCls:e,componentCls:n,inputPaddingHorizontalBase:r,iconCls:i}=t;return{[n]:Object.assign(Object.assign({},ys(t)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},eve(t)),tve(t)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},XO),{[`> ${e}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},XO),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},cT()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${t.motionDurationSlow} ease`,[i]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:t.colorBgBase,borderRadius:"50%"}}),[`${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:t.calc(r).add(t.fontSize).add(t.paddingXS).equal()}}}},rve=t=>{const{componentCls:e}=t;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},nve(t),qge(t),Xge(t),Uge(t),{[`${e}-rtl`]:{direction:"rtl"}},mT(t,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},ive=Ss("Select",(t,e)=>{let{rootPrefixCls:n}=e;const r=$i(t,{rootPrefixCls:n,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[rve(r),Qge(r)]},Yge,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});function ove(t){let{suffixIcon:e,clearIcon:n,menuItemSelectedIcon:r,removeIcon:i,loading:o,multiple:l,hasFeedback:f,prefixCls:s,showSuffixIcon:p,feedbackIcon:v,showArrow:x,componentName:S}=t;const M=n??E.createElement($b,null),P=O=>e===null&&!f&&!x?null:E.createElement(E.Fragment,null,p!==!1&&O,f&&v);let R=null;if(e!==void 0)R=P(e);else if(o)R=P(E.createElement(HC,{spin:!0}));else{const O=`${s}-suffix`;R=k=>{let{open:$,showSearch:H}=k;return P($&&H?E.createElement(PH,{className:O}):E.createElement(AH,{className:O}))}}let D=null;r!==void 0?D=r:l?D=E.createElement(Roe,null):D=null;let B=null;return i!==void 0?B=i:B=E.createElement(jb,null),{clearIcon:M,suffixIcon:R,itemIcon:D,removeIcon:B}}function sve(t,e){return e!==void 0?e:t!==null}var ave=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const aX="SECRET_COMBOBOX_MODE_DO_NOT_USE",lve=(t,e)=>{var n;const{prefixCls:r,bordered:i,className:o,rootClassName:l,getPopupContainer:f,popupClassName:s,dropdownClassName:p,listHeight:v=256,placement:x,listItemHeight:S,size:M,disabled:P,notFoundContent:R,status:D,builtinPlacements:B,dropdownMatchSelectWidth:O,popupMatchSelectWidth:k,direction:$,style:H,allowClear:U,variant:X,dropdownStyle:J,transitionName:K,tagRender:Q,maxCount:ce}=t,ge=ave(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:ae,getPrefixCls:ve,renderEmpty:Fe,direction:Ae,virtual:pe,popupMatchSelectWidth:fe,popupOverflow:xe,select:Re}=E.useContext(Sr),[,ke]=Ja(),ze=S??(ke==null?void 0:ke.controlHeight),Xe=ve("select",r),Ne=ve(),Qe=$??Ae,{compactSize:pt,compactItemClassnames:Ke}=Hb(Xe,Qe),[ot,St]=_T("select",X,i),st=_a(Xe),[rt,lt,Rt]=ive(Xe,st),bt=E.useMemo(()=>{const{mode:ur}=t;if(ur!=="combobox")return ur===aX?"combobox":ur},[t.mode]),wt=bt==="multiple"||bt==="tags",it=sve(t.suffixIcon,t.showArrow),Bt=(n=k??O)!==null&&n!==void 0?n:fe,{status:jt,hasFeedback:cn,isFormItemInput:rn,feedbackIcon:zt}=E.useContext(Ys),bn=Kb(jt,D);let Ot;R!==void 0?Ot=R:bt==="combobox"?Ot=null:Ot=(Fe==null?void 0:Fe("Select"))||E.createElement(Nge,{componentName:"Select"});const{suffixIcon:Nt,itemIcon:Jt,removeIcon:on,clearIcon:vn}=ove(Object.assign(Object.assign({},ge),{multiple:wt,hasFeedback:cn,feedbackIcon:zt,showSuffixIcon:it,prefixCls:Xe,componentName:"Select"})),hn=U===!0?{clearIcon:vn}:U,wn=Ml(ge,["suffixIcon","itemIcon"]),Rn=At(s||p,{[`${Xe}-dropdown-${Qe}`]:Qe==="rtl"},l,Rt,st,lt),Vn=hd(ur=>{var tr;return(tr=M??pt)!==null&&tr!==void 0?tr:ur}),rr=E.useContext(du),Pn=P??rr,Sn=At({[`${Xe}-lg`]:Vn==="large",[`${Xe}-sm`]:Vn==="small",[`${Xe}-rtl`]:Qe==="rtl",[`${Xe}-${ot}`]:St,[`${Xe}-in-form-item`]:rn},av(Xe,bn,cn),Ke,Re==null?void 0:Re.className,o,l,Rt,st,lt),fr=E.useMemo(()=>x!==void 0?x:Qe==="rtl"?"bottomRight":"bottomLeft",[x,Qe]),[cr]=WD("SelectLike",J==null?void 0:J.zIndex);return rt(E.createElement(p3,Object.assign({ref:e,virtual:pe,showSearch:Re==null?void 0:Re.showSearch},wn,{style:Object.assign(Object.assign({},Re==null?void 0:Re.style),H),dropdownMatchSelectWidth:Bt,transitionName:iv(Ne,"slide-up",K),builtinPlacements:jge(B,xe),listHeight:v,listItemHeight:ze,mode:bt,prefixCls:Xe,placement:fr,direction:Qe,suffixIcon:Nt,menuItemSelectedIcon:Jt,removeIcon:on,allowClear:hn,notFoundContent:Ot,className:Sn,getPopupContainer:f||ae,dropdownClassName:Rn,disabled:Pn,dropdownStyle:Object.assign(Object.assign({},J),{zIndex:cr}),maxCount:wt?ce:void 0,tagRender:wt?Q:void 0})))},Pv=E.forwardRef(lve),cve=tme(Pv);Pv.SECRET_COMBOBOX_MODE_DO_NOT_USE=aX;Pv.Option=h3;Pv.OptGroup=f3;Pv._InternalPanelDoNotUseOrYouWillBeFired=cve;const uve=Pv,ib=["xxl","xl","lg","md","sm","xs"],dve=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),fve=t=>{const e=t,n=[].concat(ib).reverse();return n.forEach((r,i)=>{const o=r.toUpperCase(),l=`screen${o}Min`,f=`screen${o}`;if(!(e[l]<=e[f]))throw new Error(`${l}<=${f} fails : !(${e[l]}<=${e[f]})`);if(i<n.length-1){const s=`screen${o}Max`;if(!(e[f]<=e[s]))throw new Error(`${f}<=${s} fails : !(${e[f]}<=${e[s]})`);const v=`screen${n[i+1].toUpperCase()}Min`;if(!(e[s]<=e[v]))throw new Error(`${s}<=${v} fails : !(${e[s]}<=${e[v]})`)}}),t};function hve(){const[,t]=Ja(),e=dve(fve(t));return Tt.useMemo(()=>{const n=new Map;let r=-1,i={};return{matchHandlers:{},dispatch(o){return i=o,n.forEach(l=>l(i)),n.size>=1},subscribe(o){return n.size||this.register(),r+=1,n.set(r,o),o(i),r},unsubscribe(o){n.delete(o),n.size||this.unregister()},unregister(){Object.keys(e).forEach(o=>{const l=e[o],f=this.matchHandlers[l];f==null||f.mql.removeListener(f==null?void 0:f.listener)}),n.clear()},register(){Object.keys(e).forEach(o=>{const l=e[o],f=p=>{let{matches:v}=p;this.dispatch(Object.assign(Object.assign({},i),{[o]:v}))},s=window.matchMedia(l);s.addListener(f),this.matchHandlers[l]={mql:s,listener:f},f(s)})},responsiveMap:e}},[t])}function lX(t){var e=t.children,n=t.prefixCls,r=t.id,i=t.overlayInnerStyle,o=t.className,l=t.style;return E.createElement("div",{className:At("".concat(n,"-content"),o),style:l},E.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},typeof e=="function"?e():e))}var Nm={shiftX:64,adjustY:1},$m={adjustX:1,shiftY:!0},ul=[0,0],pve={left:{points:["cr","cl"],overflow:$m,offset:[-4,0],targetOffset:ul},right:{points:["cl","cr"],overflow:$m,offset:[4,0],targetOffset:ul},top:{points:["bc","tc"],overflow:Nm,offset:[0,-4],targetOffset:ul},bottom:{points:["tc","bc"],overflow:Nm,offset:[0,4],targetOffset:ul},topLeft:{points:["bl","tl"],overflow:Nm,offset:[0,-4],targetOffset:ul},leftTop:{points:["tr","tl"],overflow:$m,offset:[-4,0],targetOffset:ul},topRight:{points:["br","tr"],overflow:Nm,offset:[0,-4],targetOffset:ul},rightTop:{points:["tl","tr"],overflow:$m,offset:[4,0],targetOffset:ul},bottomRight:{points:["tr","br"],overflow:Nm,offset:[0,4],targetOffset:ul},rightBottom:{points:["bl","br"],overflow:$m,offset:[4,0],targetOffset:ul},bottomLeft:{points:["tl","bl"],overflow:Nm,offset:[0,4],targetOffset:ul},leftBottom:{points:["br","bl"],overflow:$m,offset:[-4,0],targetOffset:ul}},mve=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],gve=function(e,n){var r=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,l=e.mouseEnterDelay,f=l===void 0?0:l,s=e.mouseLeaveDelay,p=s===void 0?.1:s,v=e.overlayStyle,x=e.prefixCls,S=x===void 0?"rc-tooltip":x,M=e.children,P=e.onVisibleChange,R=e.afterVisibleChange,D=e.transitionName,B=e.animation,O=e.motion,k=e.placement,$=k===void 0?"right":k,H=e.align,U=H===void 0?{}:H,X=e.destroyTooltipOnHide,J=X===void 0?!1:X,K=e.defaultVisible,Q=e.getTooltipContainer,ce=e.overlayInnerStyle;e.arrowContent;var ge=e.overlay,ae=e.id,ve=e.showArrow,Fe=ve===void 0?!0:ve,Ae=Hr(e,mve),pe=E.useRef(null);E.useImperativeHandle(n,function(){return pe.current});var fe=Ye({},Ae);"visible"in e&&(fe.popupVisible=e.visible);var xe=function(){return E.createElement(lX,{key:"content",prefixCls:S,id:ae,overlayInnerStyle:ce},ge)};return E.createElement(K7,Mn({popupClassName:r,prefixCls:S,popup:xe,action:o,builtinPlacements:pve,popupPlacement:$,ref:pe,popupAlign:U,getPopupContainer:Q,onPopupVisibleChange:P,afterPopupVisibleChange:R,popupTransitionName:D,popupAnimation:B,popupMotion:O,defaultPopupVisible:K,autoDestroy:J,mouseLeaveDelay:p,popupStyle:v,mouseEnterDelay:f,arrow:Fe},fe),M)};const vve=E.forwardRef(gve);function yve(t){const{sizePopupArrow:e,borderRadiusXS:n,borderRadiusOuter:r}=t,i=e/2,o=0,l=i,f=r*1/Math.sqrt(2),s=i-r*(1-1/Math.sqrt(2)),p=i-n*(1/Math.sqrt(2)),v=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),x=2*i-p,S=v,M=2*i-f,P=s,R=2*i-o,D=l,B=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),O=r*(Math.sqrt(2)-1),k=`polygon(${O}px 100%, 50% ${O}px, ${2*i-O}px 100%, ${O}px 100%)`,$=`path('M ${o} ${l} A ${r} ${r} 0 0 0 ${f} ${s} L ${p} ${v} A ${n} ${n} 0 0 1 ${x} ${S} L ${M} ${P} A ${r} ${r} 0 0 0 ${R} ${D} Z')`;return{arrowShadowWidth:B,arrowPath:$,arrowPolygon:k}}const _ve=(t,e,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:o,arrowShadowWidth:l,borderRadiusXS:f,calc:s}=t;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:s(r).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:l,height:l,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Kt(f)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},cX=8;function uX(t){const{contentRadius:e,limitVerticalRadius:n}=t,r=e>12?e+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?cX:r}}function mw(t,e){return t?e:{}}function bve(t,e,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:l}=t,{arrowDistance:f=0,arrowPlacement:s={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},_ve(t,e,i)),{"&:before":{background:e}})]},mw(!!s.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:f,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":l,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Kt(l)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:l}}}})),mw(!!s.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:f,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":l,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:l}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Kt(l)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:l}}}})),mw(!!s.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:f},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:o},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:o}})),mw(!!s.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:f},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:o},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:o}}))}}function xve(t,e,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const i=r&&typeof r=="object"?r:{},o={};switch(t){case"top":case"bottom":o.shiftX=e.arrowOffsetHorizontal*2+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=e.arrowOffsetVertical*2+n,o.shiftX=!0,o.adjustX=!0;break}const l=Object.assign(Object.assign({},o),i);return l.shiftX||(l.adjustX=!0),l.shiftY||(l.adjustY=!0),l}const v5={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},wve={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Sve=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Eve(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o,visibleFirst:l}=t,f=e/2,s={};return Object.keys(v5).forEach(p=>{const v=r&&wve[p]||v5[p],x=Object.assign(Object.assign({},v),{offset:[0,0],dynamicInset:!0});switch(s[p]=x,Sve.has(p)&&(x.autoArrow=!1),p){case"top":case"topLeft":case"topRight":x.offset[1]=-f-i;break;case"bottom":case"bottomLeft":case"bottomRight":x.offset[1]=f+i;break;case"left":case"leftTop":case"leftBottom":x.offset[0]=-f-i;break;case"right":case"rightTop":case"rightBottom":x.offset[0]=f+i;break}const S=uX({contentRadius:o,limitVerticalRadius:!0});if(r)switch(p){case"topLeft":case"bottomLeft":x.offset[0]=-S.arrowOffsetHorizontal-f;break;case"topRight":case"bottomRight":x.offset[0]=S.arrowOffsetHorizontal+f;break;case"leftTop":case"rightTop":x.offset[1]=-S.arrowOffsetHorizontal*2+f;break;case"leftBottom":case"rightBottom":x.offset[1]=S.arrowOffsetHorizontal*2-f;break}x.overflow=xve(p,S,e,n),l&&(x.htmlRegion="visibleFirst")}),s}const Cve=t=>{const{componentCls:e,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:i,tooltipBorderRadius:o,zIndexPopup:l,controlHeight:f,boxShadowSecondary:s,paddingSM:p,paddingXS:v}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},ys(t)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:n,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${e}-inner`]:{minWidth:"1em",minHeight:f,padding:`${Kt(t.calc(p).div(2).equal())} ${Kt(v)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:o,boxShadow:s,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${e}-inner`]:{borderRadius:t.min(o,cX)}},[`${e}-content`]:{position:"relative"}}),Dce(t,(x,S)=>{let{darkColor:M}=S;return{[`&${e}-${x}`]:{[`${e}-inner`]:{backgroundColor:M},[`${e}-arrow`]:{"--antd-arrow-background-color":M}}}})),{"&-rtl":{direction:"rtl"}})},bve(t,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},Tve=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},uX({contentRadius:t.borderRadius,limitVerticalRadius:!0})),yve($i(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),dX=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ss("Tooltip",r=>{const{borderRadius:i,colorTextLightSolid:o,colorBgSpotlight:l}=r,f=$i(r,{tooltipMaxWidth:250,tooltipColor:o,tooltipBorderRadius:i,tooltipBg:l});return[Cve(f),o7(r,"zoom-big-fast")]},Tve,{resetStyle:!1,injectStyle:e})(t)},Ave=IE.map(t=>`${t}-inverse`);function Mve(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(sn(Ave),sn(IE)).includes(t):IE.includes(t)}function fX(t,e){const n=Mve(e),r=At({[`${t}-${e}`]:e&&n}),i={},o={};return e&&!n&&(i.background=e,o["--antd-arrow-background-color"]=e),{className:r,overlayStyle:i,arrowStyle:o}}const Pve=t=>{const{prefixCls:e,className:n,placement:r="top",title:i,color:o,overlayInnerStyle:l}=t,{getPrefixCls:f}=E.useContext(Sr),s=f("tooltip",e),[p,v,x]=dX(s),S=fX(s,o),M=S.arrowStyle,P=Object.assign(Object.assign({},l),S.overlayStyle),R=At(v,x,s,`${s}-pure`,`${s}-placement-${r}`,n,S.className);return p(E.createElement("div",{className:R,style:M},E.createElement("div",{className:`${s}-arrow`}),E.createElement(lX,Object.assign({},t,{className:v,prefixCls:s,overlayInnerStyle:P}),i)))},Ive=Pve;var Rve=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ove=E.forwardRef((t,e)=>{var n,r;const{prefixCls:i,openClassName:o,getTooltipContainer:l,overlayClassName:f,color:s,overlayInnerStyle:p,children:v,afterOpenChange:x,afterVisibleChange:S,destroyTooltipOnHide:M,arrow:P=!0,title:R,overlay:D,builtinPlacements:B,arrowPointAtCenter:O=!1,autoAdjustOverflow:k=!0}=t,$=!!P,[,H]=Ja(),{getPopupContainer:U,getPrefixCls:X,direction:J}=E.useContext(Sr),K=lT(),Q=E.useRef(null),ce=()=>{var Ot;(Ot=Q.current)===null||Ot===void 0||Ot.forceAlign()};E.useImperativeHandle(e,()=>{var Ot;return{forceAlign:ce,forcePopupAlign:()=>{K.deprecated(!1,"forcePopupAlign","forceAlign"),ce()},nativeElement:(Ot=Q.current)===null||Ot===void 0?void 0:Ot.nativeElement}});const[ge,ae]=au(!1,{value:(n=t.open)!==null&&n!==void 0?n:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),ve=!R&&!D&&R!==0,Fe=Ot=>{var Nt,Jt;ae(ve?!1:Ot),ve||((Nt=t.onOpenChange)===null||Nt===void 0||Nt.call(t,Ot),(Jt=t.onVisibleChange)===null||Jt===void 0||Jt.call(t,Ot))},Ae=E.useMemo(()=>{var Ot,Nt;let Jt=O;return typeof P=="object"&&(Jt=(Nt=(Ot=P.pointAtCenter)!==null&&Ot!==void 0?Ot:P.arrowPointAtCenter)!==null&&Nt!==void 0?Nt:O),B||Eve({arrowPointAtCenter:Jt,autoAdjustOverflow:k,arrowWidth:$?H.sizePopupArrow:0,borderRadius:H.borderRadius,offset:H.marginXXS,visibleFirst:!0})},[O,P,B,H]),pe=E.useMemo(()=>R===0?R:D||R||"",[D,R]),fe=E.createElement(sv,{space:!0},typeof pe=="function"?pe():pe),{getPopupContainer:xe,placement:Re="top",mouseEnterDelay:ke=.1,mouseLeaveDelay:ze=.1,overlayStyle:Xe,rootClassName:Ne}=t,Qe=Rve(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),pt=X("tooltip",i),Ke=X(),ot=t["data-popover-inject"];let St=ge;!("open"in t)&&!("visible"in t)&&ve&&(St=!1);const st=E.isValidElement(v)&&!$W(v)?v:E.createElement("span",null,v),rt=st.props,lt=!rt.className||typeof rt.className=="string"?At(rt.className,o||`${pt}-open`):rt.className,[Rt,bt,wt]=dX(pt,!ot),it=fX(pt,s),Bt=it.arrowStyle,jt=Object.assign(Object.assign({},p),it.overlayStyle),cn=At(f,{[`${pt}-rtl`]:J==="rtl"},it.className,Ne,bt,wt),[rn,zt]=WD("Tooltip",Qe.zIndex),bn=E.createElement(vve,Object.assign({},Qe,{zIndex:rn,showArrow:$,placement:Re,mouseEnterDelay:ke,mouseLeaveDelay:ze,prefixCls:pt,overlayClassName:cn,overlayStyle:Object.assign(Object.assign({},Bt),Xe),getTooltipContainer:xe||l||U,ref:Q,builtinPlacements:Ae,overlay:fe,visible:St,onVisibleChange:Fe,afterVisibleChange:x??S,overlayInnerStyle:jt,arrowContent:E.createElement("span",{className:`${pt}-arrow-content`}),motion:{motionName:iv(Ke,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!M}),St?rv(st,{className:lt}):st);return Rt(E.createElement(HD.Provider,{value:zt},bn))}),hX=Ove;hX._InternalPanelDoNotUseOrYouWillBeFired=Ive;const gf=hX;var Lve=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Bve=E.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-checkbox":n,i=t.className,o=t.style,l=t.checked,f=t.disabled,s=t.defaultChecked,p=s===void 0?!1:s,v=t.type,x=v===void 0?"checkbox":v,S=t.title,M=t.onChange,P=Hr(t,Lve),R=E.useRef(null),D=E.useRef(null),B=au(p,{value:l}),O=ct(B,2),k=O[0],$=O[1];E.useImperativeHandle(e,function(){return{focus:function(J){var K;(K=R.current)===null||K===void 0||K.focus(J)},blur:function(){var J;(J=R.current)===null||J===void 0||J.blur()},input:R.current,nativeElement:D.current}});var H=At(r,i,j(j({},"".concat(r,"-checked"),k),"".concat(r,"-disabled"),f)),U=function(J){f||("checked"in t||$(J.target.checked),M==null||M({target:Ye(Ye({},t),{},{type:x,checked:J.target.checked}),stopPropagation:function(){J.stopPropagation()},preventDefault:function(){J.preventDefault()},nativeEvent:J.nativeEvent}))};return E.createElement("span",{className:H,title:S,style:o,ref:D},E.createElement("input",Mn({},P,{className:"".concat(r,"-input"),ref:R,onChange:U,disabled:f,checked:!!k,type:x})),E.createElement("span",{className:"".concat(r,"-inner")}))});function g3(t){return $i(t,{inputAffixPadding:t.paddingXXS})}const v3=t=>{const{controlHeight:e,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:o,controlHeightLG:l,fontSizeLG:f,lineHeightLG:s,paddingSM:p,controlPaddingHorizontalSM:v,controlPaddingHorizontal:x,colorFillAlter:S,colorPrimaryHover:M,colorPrimary:P,controlOutlineWidth:R,controlOutline:D,colorErrorOutline:B,colorWarningOutline:O,colorBgContainer:k}=t;return{paddingBlock:Math.max(Math.round((e-n*r)/2*10)/10-i,0),paddingBlockSM:Math.max(Math.round((o-n*r)/2*10)/10-i,0),paddingBlockLG:Math.ceil((l-f*s)/2*10)/10-i,paddingInline:p-i,paddingInlineSM:v-i,paddingInlineLG:x-i,addonBg:S,activeBorderColor:P,hoverBorderColor:M,activeShadow:`0 0 0 ${R}px ${D}`,errorActiveShadow:`0 0 0 ${R}px ${B}`,warningActiveShadow:`0 0 0 ${R}px ${O}`,hoverBg:k,activeBg:k,inputFontSize:n,inputFontSizeLG:f,inputFontSizeSM:n}},Dve=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),y3=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Dve($i(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),pX=(t,e)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:t.activeBg}}),y5=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},pX(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:e.borderColor}}),mX=(t,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pX(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},y3(t))}),y5(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),y5(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),_5=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),gX=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},_5(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),_5(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},y3(t))}})}),vX=(t,e)=>{const{componentCls:n}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:t.colorTextDisabled},[`&${n}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},e)}},yX=(t,e)=>({background:e.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:e==null?void 0:e.inputColor},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:t.activeBg}}),b5=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},yX(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}})}),_X=(t,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},yX(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},y3(t))}),b5(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),b5(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),e)}),x5=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),bX=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary},[`${t.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}}},x5(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),x5(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),xX=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),wX=t=>{const{paddingBlockLG:e,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=t;return{padding:`${Kt(e)} ${Kt(i)}`,fontSize:t.inputFontSizeLG,lineHeight:n,borderRadius:r}},SX=t=>({padding:`${Kt(t.paddingBlockSM)} ${Kt(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),bT=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Kt(t.paddingBlock)} ${Kt(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},xX(t.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},wX(t)),"&-sm":Object.assign({},SX(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),EX=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},wX(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},SX(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Kt(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${Kt(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${Kt(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${Kt(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${Kt(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},xW()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[e]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${e},
      & > ${n}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${e},
      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${e},
      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},kve=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:r,calc:i}=t,l=i(n).sub(i(r).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ys(t)),bT(t)),mX(t)),_X(t)),vX(t)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:l,paddingBottom:l}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Fve=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Kt(t.inputAffixPadding)}`}}}},zve=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:l,iconCls:f}=t,s=`${e}-affix-wrapper`,p=`${e}-affix-wrapper-disabled`;return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},bT(t)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),Fve(t)),{[`${f}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:l}}}),[p]:{[`${f}${e}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},Nve=t=>{const{componentCls:e,borderRadiusLG:n,borderRadiusSM:r}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},ys(t)),EX(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:n,fontSize:t.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:r}}},gX(t)),bX(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},$ve=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-search`;return{[r]:{[e]:{"&:hover, &:focus":{borderColor:t.colorPrimaryHover,[`+ ${e}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{borderRadius:0},[`${e}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${r}-button`]:{height:t.controlHeightLG},[`&-small ${r}-button`]:{height:t.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},jve=t=>{const{componentCls:e,paddingLG:n}=t,r=`${e}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${e}`]:{height:"100%"},[`${e}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${r}-has-feedback ${e}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}},Uve=t=>{const{componentCls:e}=t;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:t.colorError}}}},_3=Ss("Input",t=>{const e=$i(t,g3(t));return[kve(e),jve(e),zve(e),Nve(e),$ve(e),Uve(e),mT(e)]},v3,{resetFont:!1}),Vve=t=>{const{checkboxCls:e}=t,n=`${e}-wrapper`;return[{[`${e}-group`]:Object.assign(Object.assign({},ys(t)),{display:"inline-flex",flexWrap:"wrap",columnGap:t.marginXS,[`> ${t.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},ys(t)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[e]:Object.assign(Object.assign({},ys(t)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:t.borderRadiusSM,alignSelf:"center",[`${e}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${e}-inner`]:Object.assign({},wW(t))},[`${e}-inner`]:{boxSizing:"border-box",display:"block",width:t.checkboxSize,height:t.checkboxSize,direction:"ltr",backgroundColor:t.colorBgContainer,border:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,borderCollapse:"separate",transition:`all ${t.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:t.calc(t.checkboxSize).div(14).mul(5).equal(),height:t.calc(t.checkboxSize).div(14).mul(8).equal(),border:`${Kt(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`}},"& + span":{paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS}})},{[`
        ${n}:not(${n}-disabled),
        ${e}:not(${e}-disabled)
      `]:{[`&:hover ${e}-inner`]:{borderColor:t.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${e}-checked:not(${e}-disabled) ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${e}-checked:not(${e}-disabled):after`]:{borderColor:t.colorPrimaryHover}}},{[`${e}-checked`]:{[`${e}-inner`]:{backgroundColor:t.colorPrimary,borderColor:t.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`}}},[`
        ${n}-checked:not(${n}-disabled),
        ${e}-checked:not(${e}-disabled)
      `]:{[`&:hover ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"}}},{[e]:{"&-indeterminate":{[`${e}-inner`]:{backgroundColor:`${t.colorBgContainer} !important`,borderColor:`${t.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:t.calc(t.fontSizeLG).div(2).equal(),height:t.calc(t.fontSizeLG).div(2).equal(),backgroundColor:t.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${e}-inner`]:{backgroundColor:`${t.colorBgContainer} !important`,borderColor:`${t.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${e}-disabled`]:{[`&, ${e}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${e}-inner`]:{background:t.colorBgContainerDisabled,borderColor:t.colorBorder,"&:after":{borderColor:t.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:t.colorTextDisabled},[`&${e}-indeterminate ${e}-inner::after`]:{background:t.colorTextDisabled}}}]};function Gve(t,e){const n=$i(e,{checkboxCls:`.${t}`,checkboxSize:e.controlInteractiveSize});return[Vve(n)]}const CX=Ss("Checkbox",(t,e)=>{let{prefixCls:n}=e;return[Gve(n,t)]}),Hve=Tt.createContext(null),TX=Hve;var Wve=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Xve=(t,e)=>{var n;const{prefixCls:r,className:i,rootClassName:o,children:l,indeterminate:f=!1,style:s,onMouseEnter:p,onMouseLeave:v,skipGroup:x=!1,disabled:S}=t,M=Wve(t,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:P,direction:R,checkbox:D}=E.useContext(Sr),B=E.useContext(TX),{isFormItemInput:O}=E.useContext(Ys),k=E.useContext(du),$=(n=(B==null?void 0:B.disabled)||S)!==null&&n!==void 0?n:k,H=E.useRef(M.value);E.useEffect(()=>{B==null||B.registerValue(M.value)},[]),E.useEffect(()=>{if(!x)return M.value!==H.current&&(B==null||B.cancelValue(H.current),B==null||B.registerValue(M.value),H.current=M.value),()=>B==null?void 0:B.cancelValue(M.value)},[M.value]);const U=P("checkbox",r),X=_a(U),[J,K,Q]=CX(U,X),ce=Object.assign({},M);B&&!x&&(ce.onChange=function(){M.onChange&&M.onChange.apply(M,arguments),B.toggleOption&&B.toggleOption({label:l,value:M.value})},ce.name=B.name,ce.checked=B.value.includes(M.value));const ge=At(`${U}-wrapper`,{[`${U}-rtl`]:R==="rtl",[`${U}-wrapper-checked`]:ce.checked,[`${U}-wrapper-disabled`]:$,[`${U}-wrapper-in-form-item`]:O},D==null?void 0:D.className,i,o,Q,X,K),ae=At({[`${U}-indeterminate`]:f},ZD,K),ve=f?"mixed":void 0;return J(E.createElement(YW,{component:"Checkbox",disabled:$},E.createElement("label",{className:ge,style:Object.assign(Object.assign({},D==null?void 0:D.style),s),onMouseEnter:p,onMouseLeave:v},E.createElement(Bve,Object.assign({"aria-checked":ve},ce,{prefixCls:U,className:ae,disabled:$,ref:e})),l!==void 0&&E.createElement("span",null,l))))},qve=E.forwardRef(Xve),AX=qve;var Yve=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Zve=E.forwardRef((t,e)=>{const{defaultValue:n,children:r,options:i=[],prefixCls:o,className:l,rootClassName:f,style:s,onChange:p}=t,v=Yve(t,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:x,direction:S}=E.useContext(Sr),[M,P]=E.useState(v.value||n||[]),[R,D]=E.useState([]);E.useEffect(()=>{"value"in v&&P(v.value||[])},[v.value]);const B=E.useMemo(()=>i.map(Fe=>typeof Fe=="string"||typeof Fe=="number"?{label:Fe,value:Fe}:Fe),[i]),O=Fe=>{D(Ae=>Ae.filter(pe=>pe!==Fe))},k=Fe=>{D(Ae=>[].concat(sn(Ae),[Fe]))},$=Fe=>{const Ae=M.indexOf(Fe.value),pe=sn(M);Ae===-1?pe.push(Fe.value):pe.splice(Ae,1),"value"in v||P(pe),p==null||p(pe.filter(fe=>R.includes(fe)).sort((fe,xe)=>{const Re=B.findIndex(ze=>ze.value===fe),ke=B.findIndex(ze=>ze.value===xe);return Re-ke}))},H=x("checkbox",o),U=`${H}-group`,X=_a(H),[J,K,Q]=CX(H,X),ce=Ml(v,["value","disabled"]),ge=i.length?B.map(Fe=>E.createElement(AX,{prefixCls:H,key:Fe.value.toString(),disabled:"disabled"in Fe?Fe.disabled:v.disabled,value:Fe.value,checked:M.includes(Fe.value),onChange:Fe.onChange,className:`${U}-item`,style:Fe.style,title:Fe.title,id:Fe.id,required:Fe.required},Fe.label)):r,ae={toggleOption:$,value:M,disabled:v.disabled,name:v.name,registerValue:k,cancelValue:O},ve=At(U,{[`${U}-rtl`]:S==="rtl"},l,f,Q,X,K);return J(E.createElement("div",Object.assign({className:ve,style:s},ce,{ref:e}),E.createElement(TX.Provider,{value:ae},ge)))}),Kve=Zve,b3=AX;b3.Group=Kve;b3.__ANT_CHECKBOX=!0;const w5=b3,Jve=E.createContext({}),MX=Jve,Qve=t=>{const{componentCls:e}=t;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},eye=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},tye=(t,e)=>{const{prefixCls:n,componentCls:r,gridColumns:i}=t,o={};for(let l=i;l>=0;l--)l===0?(o[`${r}${e}-${l}`]={display:"none"},o[`${r}-push-${l}`]={insetInlineStart:"auto"},o[`${r}-pull-${l}`]={insetInlineEnd:"auto"},o[`${r}${e}-push-${l}`]={insetInlineStart:"auto"},o[`${r}${e}-pull-${l}`]={insetInlineEnd:"auto"},o[`${r}${e}-offset-${l}`]={marginInlineStart:0},o[`${r}${e}-order-${l}`]={order:0}):(o[`${r}${e}-${l}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${l/i*100}%`,maxWidth:`${l/i*100}%`}],o[`${r}${e}-push-${l}`]={insetInlineStart:`${l/i*100}%`},o[`${r}${e}-pull-${l}`]={insetInlineEnd:`${l/i*100}%`},o[`${r}${e}-offset-${l}`]={marginInlineStart:`${l/i*100}%`},o[`${r}${e}-order-${l}`]={order:l});return o[`${r}${e}-flex`]={flex:`var(--${n}${e}-flex)`},o},gL=(t,e)=>tye(t,e),nye=(t,e,n)=>({[`@media (min-width: ${Kt(e)})`]:Object.assign({},gL(t,n))}),rye=()=>({}),iye=()=>({}),oye=Ss("Grid",Qve,rye),sye=Ss("Grid",t=>{const e=$i(t,{gridColumns:24}),n={"-sm":e.screenSMMin,"-md":e.screenMDMin,"-lg":e.screenLGMin,"-xl":e.screenXLMin,"-xxl":e.screenXXLMin};return[eye(e),gL(e,""),gL(e,"-xs"),Object.keys(n).map(r=>nye(e,n[r],r)).reduce((r,i)=>Object.assign(Object.assign({},r),i),{})]},iye);var aye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function S5(t){return typeof t=="number"?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}const lye=["xs","sm","md","lg","xl","xxl"],cye=E.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r}=E.useContext(Sr),{gutter:i,wrap:o}=E.useContext(MX),{prefixCls:l,span:f,order:s,offset:p,push:v,pull:x,className:S,children:M,flex:P,style:R}=t,D=aye(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),B=n("col",l),[O,k,$]=sye(B),H={};let U={};lye.forEach(K=>{let Q={};const ce=t[K];typeof ce=="number"?Q.span=ce:typeof ce=="object"&&(Q=ce||{}),delete D[K],U=Object.assign(Object.assign({},U),{[`${B}-${K}-${Q.span}`]:Q.span!==void 0,[`${B}-${K}-order-${Q.order}`]:Q.order||Q.order===0,[`${B}-${K}-offset-${Q.offset}`]:Q.offset||Q.offset===0,[`${B}-${K}-push-${Q.push}`]:Q.push||Q.push===0,[`${B}-${K}-pull-${Q.pull}`]:Q.pull||Q.pull===0,[`${B}-rtl`]:r==="rtl"}),Q.flex&&(U[`${B}-${K}-flex`]=!0,H[`--${B}-${K}-flex`]=S5(Q.flex))});const X=At(B,{[`${B}-${f}`]:f!==void 0,[`${B}-order-${s}`]:s,[`${B}-offset-${p}`]:p,[`${B}-push-${v}`]:v,[`${B}-pull-${x}`]:x},S,U,k,$),J={};if(i&&i[0]>0){const K=i[0]/2;J.paddingLeft=K,J.paddingRight=K}return P&&(J.flex=S5(P),o===!1&&!J.minWidth&&(J.minWidth=0)),O(E.createElement("div",Object.assign({},D,{style:Object.assign(Object.assign(Object.assign({},J),R),H),className:X,ref:e}),M))}),Fh=cye;var uye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function E5(t,e){const[n,r]=E.useState(typeof t=="string"?t:""),i=()=>{if(typeof t=="string"&&r(t),typeof t=="object")for(let o=0;o<ib.length;o++){const l=ib[o];if(!e[l])continue;const f=t[l];if(f!==void 0){r(f);return}}};return E.useEffect(()=>{i()},[JSON.stringify(t),e]),n}const dye=E.forwardRef((t,e)=>{const{prefixCls:n,justify:r,align:i,className:o,style:l,children:f,gutter:s=0,wrap:p}=t,v=uye(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:x,direction:S}=E.useContext(Sr),[M,P]=E.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[R,D]=E.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),B=E5(i,R),O=E5(r,R),k=E.useRef(s),$=hve();E.useEffect(()=>{const pe=$.subscribe(fe=>{D(fe);const xe=k.current||0;(!Array.isArray(xe)&&typeof xe=="object"||Array.isArray(xe)&&(typeof xe[0]=="object"||typeof xe[1]=="object"))&&P(fe)});return()=>$.unsubscribe(pe)},[]);const H=()=>{const pe=[void 0,void 0];return(Array.isArray(s)?s:[s,void 0]).forEach((xe,Re)=>{if(typeof xe=="object")for(let ke=0;ke<ib.length;ke++){const ze=ib[ke];if(M[ze]&&xe[ze]!==void 0){pe[Re]=xe[ze];break}}else pe[Re]=xe}),pe},U=x("row",n),[X,J,K]=oye(U),Q=H(),ce=At(U,{[`${U}-no-wrap`]:p===!1,[`${U}-${O}`]:O,[`${U}-${B}`]:B,[`${U}-rtl`]:S==="rtl"},o,J,K),ge={},ae=Q[0]!=null&&Q[0]>0?Q[0]/-2:void 0;ae&&(ge.marginLeft=ae,ge.marginRight=ae);const[ve,Fe]=Q;ge.rowGap=Fe;const Ae=E.useMemo(()=>({gutter:[ve,Fe],wrap:p}),[ve,Fe,p]);return X(E.createElement(MX.Provider,{value:Ae},E.createElement("div",Object.assign({},v,{className:ce,style:Object.assign(Object.assign({},ge),l),ref:e}),f)))}),ng=dye;function vL(){return typeof BigInt=="function"}function PX(t){return!t&&t!==0&&!Number.isNaN(t)||!String(t).trim()}function ap(t){var e=t.trim(),n=e.startsWith("-");n&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var r=e||"0",i=r.split("."),o=i[0]||"0",l=i[1]||"0";o==="0"&&l==="0"&&(n=!1);var f=n?"-":"";return{negative:n,negativeStr:f,trimStr:r,integerStr:o,decimalStr:l,fullStr:"".concat(f).concat(r)}}function x3(t){var e=String(t);return!Number.isNaN(Number(e))&&e.includes("e")}function qh(t){var e=String(t);if(x3(t)){var n=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return r!=null&&r[1]&&(n+=r[1].length),n}return e.includes(".")&&w3(e)?e.length-e.indexOf(".")-1:0}function xT(t){var e=String(t);if(x3(t)){if(t>Number.MAX_SAFE_INTEGER)return String(vL()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(vL()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);e=t.toFixed(qh(e))}return ap(e).fullStr}function w3(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var fye=function(){function t(e){if(Di(this,t),j(this,"origin",""),j(this,"negative",void 0),j(this,"integer",void 0),j(this,"decimal",void 0),j(this,"decimalLen",void 0),j(this,"empty",void 0),j(this,"nan",void 0),PX(e)){this.empty=!0;return}if(this.origin=String(e),e==="-"||Number.isNaN(e)){this.nan=!0;return}var n=e;if(x3(n)&&(n=Number(n)),n=typeof n=="string"?n:xT(n),w3(n)){var r=ap(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return ki(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(r)}},{key:"negate",value:function(){var n=new t(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,r,i){var o=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),l=this.alignDecimal(o),f=n.alignDecimal(o),s=r(l,f).toString(),p=i(o),v=ap(s),x=v.negativeStr,S=v.trimStr,M="".concat(x).concat(S.padStart(p+1,"0"));return new t("".concat(M.slice(0,-p),".").concat(M.slice(-p)))}},{key:"add",value:function(n){if(this.isInvalidate())return new t(n);var r=new t(n);return r.isInvalidate()?this:this.cal(r,function(i,o){return i+o},function(i){return i})}},{key:"multi",value:function(n){var r=new t(n);return this.isInvalidate()||r.isInvalidate()?new t(NaN):this.cal(r,function(i,o){return i*o},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===(n==null?void 0:n.toString())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":ap("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),hye=function(){function t(e){if(Di(this,t),j(this,"origin",""),j(this,"number",void 0),j(this,"empty",void 0),PX(e)){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return ki(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new t(n);var r=Number(n);if(Number.isNaN(r))return this;var i=this.number+r;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(qh(this.number),qh(r));return new t(i.toFixed(o))}},{key:"multi",value:function(n){var r=Number(n);if(this.isInvalidate()||Number.isNaN(r))return new t(NaN);var i=this.number*r;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(qh(this.number),qh(r));return new t(i.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===(n==null?void 0:n.toNumber())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":xT(this.number):this.origin}}]),t}();function Zl(t){return vL()?new fye(t):new hye(t)}function xS(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t==="")return"";var i=ap(t),o=i.negativeStr,l=i.integerStr,f=i.decimalStr,s="".concat(e).concat(f),p="".concat(o).concat(l);if(n>=0){var v=Number(f[n]);if(v>=5&&!r){var x=Zl(t).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-v));return xS(x.toString(),e,n,r)}return n===0?p:"".concat(p).concat(e).concat(f.padEnd(n,"0").slice(0,n))}return s===".0"?p:"".concat(p).concat(s)}function pye(t){return!!(t.addonBefore||t.addonAfter)}function mye(t){return!!(t.prefix||t.suffix||t.allowClear)}function C5(t,e,n){var r=e.cloneNode(!0),i=Object.create(t,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(r.selectionStart=e.selectionStart,r.selectionEnd=e.selectionEnd),r.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},i}function BE(t,e,n,r){if(n){var i=e;if(e.type==="click"){i=C5(e,t,""),n(i);return}if(t.type!=="file"&&r!==void 0){i=C5(e,t,r),n(i);return}n(i)}}function IX(t,e){if(t){t.focus(e);var n=e||{},r=n.cursor;if(r){var i=t.value.length;switch(r){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(i,i);break;default:t.setSelectionRange(0,i)}}}}var S3=Tt.forwardRef(function(t,e){var n,r,i=t.inputElement,o=t.children,l=t.prefixCls,f=t.prefix,s=t.suffix,p=t.addonBefore,v=t.addonAfter,x=t.className,S=t.style,M=t.disabled,P=t.readOnly,R=t.focused,D=t.triggerFocus,B=t.allowClear,O=t.value,k=t.handleReset,$=t.hidden,H=t.classes,U=t.classNames,X=t.dataAttrs,J=t.styles,K=t.components,Q=t.onClear,ce=o??i,ge=(K==null?void 0:K.affixWrapper)||"span",ae=(K==null?void 0:K.groupWrapper)||"span",ve=(K==null?void 0:K.wrapper)||"span",Fe=(K==null?void 0:K.groupAddon)||"span",Ae=E.useRef(null),pe=function(bt){var wt;(wt=Ae.current)!==null&&wt!==void 0&&wt.contains(bt.target)&&(D==null||D())},fe=mye(t),xe=E.cloneElement(ce,{value:O,className:At(ce.props.className,!fe&&(U==null?void 0:U.variant))||null}),Re=E.useRef(null);if(Tt.useImperativeHandle(e,function(){return{nativeElement:Re.current||Ae.current}}),fe){var ke=null;if(B){var ze=!M&&!P&&O,Xe="".concat(l,"-clear-icon"),Ne=Kn(B)==="object"&&B!==null&&B!==void 0&&B.clearIcon?B.clearIcon:"✖";ke=Tt.createElement("span",{onClick:function(bt){k==null||k(bt),Q==null||Q()},onMouseDown:function(bt){return bt.preventDefault()},className:At(Xe,j(j({},"".concat(Xe,"-hidden"),!ze),"".concat(Xe,"-has-suffix"),!!s)),role:"button",tabIndex:-1},Ne)}var Qe="".concat(l,"-affix-wrapper"),pt=At(Qe,j(j(j(j(j({},"".concat(l,"-disabled"),M),"".concat(Qe,"-disabled"),M),"".concat(Qe,"-focused"),R),"".concat(Qe,"-readonly"),P),"".concat(Qe,"-input-with-clear-btn"),s&&B&&O),H==null?void 0:H.affixWrapper,U==null?void 0:U.affixWrapper,U==null?void 0:U.variant),Ke=(s||B)&&Tt.createElement("span",{className:At("".concat(l,"-suffix"),U==null?void 0:U.suffix),style:J==null?void 0:J.suffix},ke,s);xe=Tt.createElement(ge,Mn({className:pt,style:J==null?void 0:J.affixWrapper,onClick:pe},X==null?void 0:X.affixWrapper,{ref:Ae}),f&&Tt.createElement("span",{className:At("".concat(l,"-prefix"),U==null?void 0:U.prefix),style:J==null?void 0:J.prefix},f),xe,Ke)}if(pye(t)){var ot="".concat(l,"-group"),St="".concat(ot,"-addon"),st="".concat(ot,"-wrapper"),rt=At("".concat(l,"-wrapper"),ot,H==null?void 0:H.wrapper,U==null?void 0:U.wrapper),lt=At(st,j({},"".concat(st,"-disabled"),M),H==null?void 0:H.group,U==null?void 0:U.groupWrapper);xe=Tt.createElement(ae,{className:lt,ref:Re},Tt.createElement(ve,{className:rt},p&&Tt.createElement(Fe,{className:St},p),xe,v&&Tt.createElement(Fe,{className:St},v)))}return Tt.cloneElement(xe,{className:At((n=xe.props)===null||n===void 0?void 0:n.className,x)||null,style:Ye(Ye({},(r=xe.props)===null||r===void 0?void 0:r.style),S),hidden:$})}),gye=["show"];function RX(t,e){return E.useMemo(function(){var n={};e&&(n.show=Kn(e)==="object"&&e.formatter?e.formatter:!!e),n=Ye(Ye({},n),t);var r=n,i=r.show,o=Hr(r,gye);return Ye(Ye({},o),{},{show:!!i,showFormatter:typeof i=="function"?i:void 0,strategy:o.strategy||function(l){return l.length}})},[t,e])}var vye=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],yye=E.forwardRef(function(t,e){var n=t.autoComplete,r=t.onChange,i=t.onFocus,o=t.onBlur,l=t.onPressEnter,f=t.onKeyDown,s=t.onKeyUp,p=t.prefixCls,v=p===void 0?"rc-input":p,x=t.disabled,S=t.htmlSize,M=t.className,P=t.maxLength,R=t.suffix,D=t.showCount,B=t.count,O=t.type,k=O===void 0?"text":O,$=t.classes,H=t.classNames,U=t.styles,X=t.onCompositionStart,J=t.onCompositionEnd,K=Hr(t,vye),Q=E.useState(!1),ce=ct(Q,2),ge=ce[0],ae=ce[1],ve=E.useRef(!1),Fe=E.useRef(!1),Ae=E.useRef(null),pe=E.useRef(null),fe=function(Nt){Ae.current&&IX(Ae.current,Nt)},xe=au(t.defaultValue,{value:t.value}),Re=ct(xe,2),ke=Re[0],ze=Re[1],Xe=ke==null?"":String(ke),Ne=E.useState(null),Qe=ct(Ne,2),pt=Qe[0],Ke=Qe[1],ot=RX(B,D),St=ot.max||P,st=ot.strategy(Xe),rt=!!St&&st>St;E.useImperativeHandle(e,function(){var Ot;return{focus:fe,blur:function(){var Jt;(Jt=Ae.current)===null||Jt===void 0||Jt.blur()},setSelectionRange:function(Jt,on,vn){var hn;(hn=Ae.current)===null||hn===void 0||hn.setSelectionRange(Jt,on,vn)},select:function(){var Jt;(Jt=Ae.current)===null||Jt===void 0||Jt.select()},input:Ae.current,nativeElement:((Ot=pe.current)===null||Ot===void 0?void 0:Ot.nativeElement)||Ae.current}}),E.useEffect(function(){ae(function(Ot){return Ot&&x?!1:Ot})},[x]);var lt=function(Nt,Jt,on){var vn=Jt;if(!ve.current&&ot.exceedFormatter&&ot.max&&ot.strategy(Jt)>ot.max){if(vn=ot.exceedFormatter(Jt,{max:ot.max}),Jt!==vn){var hn,wn;Ke([((hn=Ae.current)===null||hn===void 0?void 0:hn.selectionStart)||0,((wn=Ae.current)===null||wn===void 0?void 0:wn.selectionEnd)||0])}}else if(on.source==="compositionEnd")return;ze(vn),Ae.current&&BE(Ae.current,Nt,r,vn)};E.useEffect(function(){if(pt){var Ot;(Ot=Ae.current)===null||Ot===void 0||Ot.setSelectionRange.apply(Ot,sn(pt))}},[pt]);var Rt=function(Nt){lt(Nt,Nt.target.value,{source:"change"})},bt=function(Nt){ve.current=!1,lt(Nt,Nt.currentTarget.value,{source:"compositionEnd"}),J==null||J(Nt)},wt=function(Nt){l&&Nt.key==="Enter"&&!Fe.current&&(Fe.current=!0,l(Nt)),f==null||f(Nt)},it=function(Nt){Nt.key==="Enter"&&(Fe.current=!1),s==null||s(Nt)},Bt=function(Nt){ae(!0),i==null||i(Nt)},jt=function(Nt){ae(!1),o==null||o(Nt)},cn=function(Nt){ze(""),fe(),Ae.current&&BE(Ae.current,Nt,r)},rn=rt&&"".concat(v,"-out-of-range"),zt=function(){var Nt=Ml(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Tt.createElement("input",Mn({autoComplete:n},Nt,{onChange:Rt,onFocus:Bt,onBlur:jt,onKeyDown:wt,onKeyUp:it,className:At(v,j({},"".concat(v,"-disabled"),x),H==null?void 0:H.input),style:U==null?void 0:U.input,ref:Ae,size:S,type:k,onCompositionStart:function(on){ve.current=!0,X==null||X(on)},onCompositionEnd:bt}))},bn=function(){var Nt=Number(St)>0;if(R||ot.show){var Jt=ot.showFormatter?ot.showFormatter({value:Xe,count:st,maxLength:St}):"".concat(st).concat(Nt?" / ".concat(St):"");return Tt.createElement(Tt.Fragment,null,ot.show&&Tt.createElement("span",{className:At("".concat(v,"-show-count-suffix"),j({},"".concat(v,"-show-count-has-suffix"),!!R),H==null?void 0:H.count),style:Ye({},U==null?void 0:U.count)},Jt),R)}return null};return Tt.createElement(S3,Mn({},K,{prefixCls:v,className:At(M,rn),handleReset:cn,value:Xe,focused:ge,triggerFocus:fe,suffix:bn(),disabled:x,classes:$,classNames:H,styles:U}),zt())});function _ye(t,e){return typeof Proxy<"u"&&t?new Proxy(t,{get:function(r,i){if(e[i])return e[i];var o=r[i];return typeof o=="function"?o.bind(r):o}}):t}function bye(t,e){var n=E.useRef(null);function r(){try{var o=t.selectionStart,l=t.selectionEnd,f=t.value,s=f.substring(0,o),p=f.substring(l);n.current={start:o,end:l,value:f,beforeTxt:s,afterTxt:p}}catch{}}function i(){if(t&&n.current&&e)try{var o=t.value,l=n.current,f=l.beforeTxt,s=l.afterTxt,p=l.start,v=o.length;if(o.startsWith(f))v=f.length;else if(o.endsWith(s))v=o.length-n.current.afterTxt.length;else{var x=f[p-1],S=o.indexOf(x,p-1);S!==-1&&(v=S+1)}t.setSelectionRange(v,v)}catch(M){vs(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(M.message))}}return[r,i]}var xye=function(){var e=E.useState(!1),n=ct(e,2),r=n[0],i=n[1];return Ji(function(){i(u3())},[]),r},wye=200,Sye=600;function Eye(t){var e=t.prefixCls,n=t.upNode,r=t.downNode,i=t.upDisabled,o=t.downDisabled,l=t.onStep,f=E.useRef(),s=E.useRef([]),p=E.useRef();p.current=l;var v=function(){clearTimeout(f.current)},x=function(k,$){k.preventDefault(),v(),p.current($);function H(){p.current($),f.current=setTimeout(H,wye)}f.current=setTimeout(H,Sye)};E.useEffect(function(){return function(){v(),s.current.forEach(function(O){return gi.cancel(O)})}},[]);var S=xye();if(S)return null;var M="".concat(e,"-handler"),P=At(M,"".concat(M,"-up"),j({},"".concat(M,"-up-disabled"),i)),R=At(M,"".concat(M,"-down"),j({},"".concat(M,"-down-disabled"),o)),D=function(){return s.current.push(gi(v))},B={unselectable:"on",role:"button",onMouseUp:D,onMouseLeave:D};return E.createElement("div",{className:"".concat(M,"-wrap")},E.createElement("span",Mn({},B,{onMouseDown:function(k){x(k,!0)},"aria-label":"Increase Value","aria-disabled":i,className:P}),n||E.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),E.createElement("span",Mn({},B,{onMouseDown:function(k){x(k,!1)},"aria-label":"Decrease Value","aria-disabled":o,className:R}),r||E.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function T5(t){var e=typeof t=="number"?xT(t):ap(t).fullStr,n=e.includes(".");return n?ap(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:t+"0"}const Cye=function(){var t=E.useRef(0),e=function(){gi.cancel(t.current)};return E.useEffect(function(){return e},[]),function(n){e(),t.current=gi(function(){n()})}};var Tye=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Aye=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],A5=function(e,n){return e||n.isEmpty()?n.toString():n.toNumber()},M5=function(e){var n=Zl(e);return n.isInvalidate()?null:n},Mye=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,i=t.style,o=t.min,l=t.max,f=t.step,s=f===void 0?1:f,p=t.defaultValue,v=t.value,x=t.disabled,S=t.readOnly,M=t.upHandler,P=t.downHandler,R=t.keyboard,D=t.changeOnWheel,B=D===void 0?!1:D,O=t.controls,k=O===void 0?!0:O;t.classNames;var $=t.stringMode,H=t.parser,U=t.formatter,X=t.precision,J=t.decimalSeparator,K=t.onChange,Q=t.onInput,ce=t.onPressEnter,ge=t.onStep,ae=t.changeOnBlur,ve=ae===void 0?!0:ae,Fe=t.domRef,Ae=Hr(t,Tye),pe="".concat(n,"-input"),fe=E.useRef(null),xe=E.useState(!1),Re=ct(xe,2),ke=Re[0],ze=Re[1],Xe=E.useRef(!1),Ne=E.useRef(!1),Qe=E.useRef(!1),pt=E.useState(function(){return Zl(v??p)}),Ke=ct(pt,2),ot=Ke[0],St=Ke[1];function st(oe){v===void 0&&St(oe)}var rt=E.useCallback(function(oe,te){if(!te)return X>=0?X:Math.max(qh(oe),qh(s))},[X,s]),lt=E.useCallback(function(oe){var te=String(oe);if(H)return H(te);var le=te;return J&&(le=le.replace(J,".")),le.replace(/[^\w.-]+/g,"")},[H,J]),Rt=E.useRef(""),bt=E.useCallback(function(oe,te){if(U)return U(oe,{userTyping:te,input:String(Rt.current)});var le=typeof oe=="number"?xT(oe):oe;if(!te){var ue=rt(le,te);if(w3(le)&&(J||ue>=0)){var Me=J||".";le=xS(le,Me,ue)}}return le},[U,rt,J]),wt=E.useState(function(){var oe=p??v;return ot.isInvalidate()&&["string","number"].includes(Kn(oe))?Number.isNaN(oe)?"":oe:bt(ot.toString(),!1)}),it=ct(wt,2),Bt=it[0],jt=it[1];Rt.current=Bt;function cn(oe,te){jt(bt(oe.isInvalidate()?oe.toString(!1):oe.toString(!te),te))}var rn=E.useMemo(function(){return M5(l)},[l,X]),zt=E.useMemo(function(){return M5(o)},[o,X]),bn=E.useMemo(function(){return!rn||!ot||ot.isInvalidate()?!1:rn.lessEquals(ot)},[rn,ot]),Ot=E.useMemo(function(){return!zt||!ot||ot.isInvalidate()?!1:ot.lessEquals(zt)},[zt,ot]),Nt=bye(fe.current,ke),Jt=ct(Nt,2),on=Jt[0],vn=Jt[1],hn=function(te){return rn&&!te.lessEquals(rn)?rn:zt&&!zt.lessEquals(te)?zt:null},wn=function(te){return!hn(te)},Rn=function(te,le){var ue=te,Me=wn(ue)||ue.isEmpty();if(!ue.isEmpty()&&!le&&(ue=hn(ue)||ue,Me=!0),!S&&!x&&Me){var Ce=ue.toString(),_e=rt(Ce,le);return _e>=0&&(ue=Zl(xS(Ce,".",_e)),wn(ue)||(ue=Zl(xS(Ce,".",_e,!0)))),ue.equals(ot)||(st(ue),K==null||K(ue.isEmpty()?null:A5($,ue)),v===void 0&&cn(ue,le)),ue}return ot},Vn=Cye(),rr=function oe(te){if(on(),Rt.current=te,jt(te),!Ne.current){var le=lt(te),ue=Zl(le);ue.isNaN()||Rn(ue,!0)}Q==null||Q(te),Vn(function(){var Me=te;H||(Me=te.replace(/。/g,".")),Me!==te&&oe(Me)})},Pn=function(){Ne.current=!0},Sn=function(){Ne.current=!1,rr(fe.current.value)},fr=function(te){rr(te.target.value)},cr=function(te){var le;if(!(te&&bn||!te&&Ot)){Xe.current=!1;var ue=Zl(Qe.current?T5(s):s);te||(ue=ue.negate());var Me=(ot||Zl(0)).add(ue.toString()),Ce=Rn(Me,!1);ge==null||ge(A5($,Ce),{offset:Qe.current?T5(s):s,type:te?"up":"down"}),(le=fe.current)===null||le===void 0||le.focus()}},ur=function(te){var le=Zl(lt(Bt)),ue;le.isNaN()?ue=Rn(ot,te):ue=Rn(le,te),v!==void 0?cn(ot,!1):ue.isNaN()||cn(ue,!1)},tr=function(){Xe.current=!0},oi=function(te){var le=te.key,ue=te.shiftKey;Xe.current=!0,Qe.current=ue,le==="Enter"&&(Ne.current||(Xe.current=!1),ur(!1),ce==null||ce(te)),R!==!1&&!Ne.current&&["Up","ArrowUp","Down","ArrowDown"].includes(le)&&(cr(le==="Up"||le==="ArrowUp"),te.preventDefault())},Oe=function(){Xe.current=!1,Qe.current=!1};E.useEffect(function(){if(B&&ke){var oe=function(ue){cr(ue.deltaY<0),ue.preventDefault()},te=fe.current;if(te)return te.addEventListener("wheel",oe,{passive:!1}),function(){return te.removeEventListener("wheel",oe)}}});var se=function(){ve&&ur(!1),ze(!1),Xe.current=!1};return f_(function(){ot.isInvalidate()||cn(ot,!1)},[X,U]),f_(function(){var oe=Zl(v);St(oe);var te=Zl(lt(Bt));(!oe.equals(te)||!Xe.current||U)&&cn(oe,Xe.current)},[v]),f_(function(){U&&vn()},[Bt]),E.createElement("div",{ref:Fe,className:At(n,r,j(j(j(j(j({},"".concat(n,"-focused"),ke),"".concat(n,"-disabled"),x),"".concat(n,"-readonly"),S),"".concat(n,"-not-a-number"),ot.isNaN()),"".concat(n,"-out-of-range"),!ot.isInvalidate()&&!wn(ot))),style:i,onFocus:function(){ze(!0)},onBlur:se,onKeyDown:oi,onKeyUp:Oe,onCompositionStart:Pn,onCompositionEnd:Sn,onBeforeInput:tr},k&&E.createElement(Eye,{prefixCls:n,upNode:M,downNode:P,upDisabled:bn,downDisabled:Ot,onStep:cr}),E.createElement("div",{className:"".concat(pe,"-wrap")},E.createElement("input",Mn({autoComplete:"off",role:"spinbutton","aria-valuemin":o,"aria-valuemax":l,"aria-valuenow":ot.isInvalidate()?null:ot.toString(),step:s},Ae,{ref:Al(fe,e),className:pe,value:Bt,onChange:fr,disabled:x,readOnly:S}))))}),Pye=E.forwardRef(function(t,e){var n=t.disabled,r=t.style,i=t.prefixCls,o=i===void 0?"rc-input-number":i,l=t.value,f=t.prefix,s=t.suffix,p=t.addonBefore,v=t.addonAfter,x=t.className,S=t.classNames,M=Hr(t,Aye),P=E.useRef(null),R=E.useRef(null),D=E.useRef(null),B=function(k){D.current&&IX(D.current,k)};return E.useImperativeHandle(e,function(){return _ye(D.current,{nativeElement:P.current.nativeElement||R.current})}),E.createElement(S3,{className:x,triggerFocus:B,prefixCls:o,value:l,disabled:n,style:r,prefix:f,suffix:s,addonAfter:v,addonBefore:p,classNames:S,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:P},E.createElement(Mye,Mn({prefixCls:o,disabled:n,ref:D,domRef:R,className:S==null?void 0:S.input},M)))});const Iye=t=>{var e;const n=(e=t.handleVisible)!==null&&e!==void 0?e:"auto";return Object.assign(Object.assign({},v3(t)),{controlWidth:90,handleWidth:t.controlHeightSM-t.lineWidth*2,handleFontSize:t.fontSize/2,handleVisible:n,handleActiveBg:t.colorFillAlter,handleBg:t.colorBgContainer,filledHandleBg:new Ro(t.colorFillSecondary).onBackground(t.colorBgContainer).toHexString(),handleHoverColor:t.colorPrimary,handleBorderColor:t.colorBorder,handleOpacity:n===!0?1:0})},P5=(t,e)=>{let{componentCls:n,borderRadiusSM:r,borderRadiusLG:i}=t;const o=e==="lg"?i:r;return{[`&-${e}`]:{[`${n}-handler-wrap`]:{borderStartEndRadius:o,borderEndEndRadius:o},[`${n}-handler-up`]:{borderStartEndRadius:o},[`${n}-handler-down`]:{borderEndEndRadius:o}}}},Rye=t=>{const{componentCls:e,lineWidth:n,lineType:r,borderRadius:i,inputFontSizeSM:o,inputFontSizeLG:l,controlHeightLG:f,controlHeightSM:s,colorError:p,paddingInlineSM:v,paddingBlockSM:x,paddingBlockLG:S,paddingInlineLG:M,colorTextDescription:P,motionDurationMid:R,handleHoverColor:D,handleOpacity:B,paddingInline:O,paddingBlock:k,handleBg:$,handleActiveBg:H,colorTextDisabled:U,borderRadiusSM:X,borderRadiusLG:J,controlWidth:K,handleBorderColor:Q,filledHandleBg:ce,lineHeightLG:ge,calc:ae}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ys(t)),bT(t)),{display:"inline-block",width:K,margin:0,padding:0,borderRadius:i}),mX(t,{[`${e}-handler-wrap`]:{background:$,[`${e}-handler-down`]:{borderBlockStart:`${Kt(n)} ${r} ${Q}`}}})),_X(t,{[`${e}-handler-wrap`]:{background:ce,[`${e}-handler-down`]:{borderBlockStart:`${Kt(n)} ${r} ${Q}`}},"&:focus-within":{[`${e}-handler-wrap`]:{background:$}}})),vX(t)),{"&-rtl":{direction:"rtl",[`${e}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:ge,borderRadius:J,[`input${e}-input`]:{height:ae(f).sub(ae(n).mul(2)).equal(),padding:`${Kt(S)} ${Kt(M)}`}},"&-sm":{padding:0,fontSize:o,borderRadius:X,[`input${e}-input`]:{height:ae(s).sub(ae(n).mul(2)).equal(),padding:`${Kt(x)} ${Kt(v)}`}},"&-out-of-range":{[`${e}-input-wrap`]:{input:{color:p}}},"&-group":Object.assign(Object.assign(Object.assign({},ys(t)),EX(t)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${e}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${e}-group-addon`]:{borderRadius:J,fontSize:t.fontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:X}}},gX(t)),bX(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${e}-input`]:{cursor:"not-allowed"},[e]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},ys(t)),{width:"100%",padding:`${Kt(k)} ${Kt(O)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${R} linear`,appearance:"textfield",fontSize:"inherit"}),xX(t.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:t.handleWidth,opacity:1}})},{[e]:Object.assign(Object.assign(Object.assign({[`${e}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:B,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${R}`,overflow:"hidden",[`${e}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:t.handleFontSize}}},[`${e}-handler`]:{height:"50%",overflow:"hidden",color:P,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${Kt(n)} ${r} ${Q}`,transition:`all ${R} linear`,"&:active":{background:H},"&:hover":{height:"60%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{color:D}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},cT()),{color:P,transition:`all ${R} linear`,userSelect:"none"})},[`${e}-handler-up`]:{borderStartEndRadius:i},[`${e}-handler-down`]:{borderEndEndRadius:i}},P5(t,"lg")),P5(t,"sm")),{"&-disabled, &-readonly":{[`${e}-handler-wrap`]:{display:"none"},[`${e}-input`]:{color:"inherit"}},[`
          ${e}-handler-up-disabled,
          ${e}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${e}-handler-up-disabled:hover &-handler-up-inner,
          ${e}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:U}})}]},Oye=t=>{const{componentCls:e,paddingBlock:n,paddingInline:r,inputAffixPadding:i,controlWidth:o,borderRadiusLG:l,borderRadiusSM:f,paddingInlineLG:s,paddingInlineSM:p,paddingBlockLG:v,paddingBlockSM:x,motionDurationMid:S}=t;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign({[`input${e}-input`]:{padding:`${Kt(n)} 0`}},bT(t)),{position:"relative",display:"inline-flex",alignItems:"center",width:o,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:l,paddingInlineStart:s,[`input${e}-input`]:{padding:`${Kt(v)} 0`}},"&-sm":{borderRadius:f,paddingInlineStart:p,[`input${e}-input`]:{padding:`${Kt(x)} 0`}},[`&:not(${e}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${e}-disabled`]:{background:"transparent"},[`> div${e}`]:{width:"100%",border:"none",outline:"none",[`&${e}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${e}-handler-wrap`]:{zIndex:2},[e]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:i,transition:`margin ${S}`}},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:t.handleWidth,opacity:1},[`&:not(${e}-affix-wrapper-without-controls):hover ${e}-suffix`]:{marginInlineEnd:t.calc(t.handleWidth).add(r).equal()}})}},Lye=Ss("InputNumber",t=>{const e=$i(t,g3(t));return[Rye(e),Oye(e),mT(e)]},Iye,{unitless:{handleOpacity:!0}});var Bye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const OX=E.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r}=E.useContext(Sr),i=E.useRef(null);E.useImperativeHandle(e,()=>i.current);const{className:o,rootClassName:l,size:f,disabled:s,prefixCls:p,addonBefore:v,addonAfter:x,prefix:S,suffix:M,bordered:P,readOnly:R,status:D,controls:B,variant:O}=t,k=Bye(t,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),$=n("input-number",p),H=_a($),[U,X,J]=Lye($,H),{compactSize:K,compactItemClassnames:Q}=Hb($,r);let ce=E.createElement(oae,{className:`${$}-handler-up-inner`}),ge=E.createElement(AH,{className:`${$}-handler-down-inner`});const ae=typeof B=="boolean"?B:void 0;typeof B=="object"&&(ce=typeof B.upIcon>"u"?ce:E.createElement("span",{className:`${$}-handler-up-inner`},B.upIcon),ge=typeof B.downIcon>"u"?ge:E.createElement("span",{className:`${$}-handler-down-inner`},B.downIcon));const{hasFeedback:ve,status:Fe,isFormItemInput:Ae,feedbackIcon:pe}=E.useContext(Ys),fe=Kb(Fe,D),xe=hd(ot=>{var St;return(St=f??K)!==null&&St!==void 0?St:ot}),Re=E.useContext(du),ke=s??Re,[ze,Xe]=_T("inputNumber",O,P),Ne=ve&&E.createElement(E.Fragment,null,pe),Qe=At({[`${$}-lg`]:xe==="large",[`${$}-sm`]:xe==="small",[`${$}-rtl`]:r==="rtl",[`${$}-in-form-item`]:Ae},X),pt=`${$}-group`,Ke=E.createElement(Pye,Object.assign({ref:i,disabled:ke,className:At(J,H,o,l,Q),upHandler:ce,downHandler:ge,prefixCls:$,readOnly:R,controls:ae,prefix:S,suffix:Ne||M,addonBefore:v&&E.createElement(sv,{form:!0,space:!0},v),addonAfter:x&&E.createElement(sv,{form:!0,space:!0},x),classNames:{input:Qe,variant:At({[`${$}-${ze}`]:Xe},av($,fe,ve)),affixWrapper:At({[`${$}-affix-wrapper-sm`]:xe==="small",[`${$}-affix-wrapper-lg`]:xe==="large",[`${$}-affix-wrapper-rtl`]:r==="rtl",[`${$}-affix-wrapper-without-controls`]:B===!1},X),wrapper:At({[`${pt}-rtl`]:r==="rtl"},X),groupWrapper:At({[`${$}-group-wrapper-sm`]:xe==="small",[`${$}-group-wrapper-lg`]:xe==="large",[`${$}-group-wrapper-rtl`]:r==="rtl",[`${$}-group-wrapper-${ze}`]:Xe},av(`${$}-group-wrapper`,fe,ve),X)}},k));return U(Ke)}),LX=OX,Dye=t=>E.createElement(Cv,{theme:{components:{InputNumber:{handleVisible:!0}}}},E.createElement(OX,Object.assign({},t)));LX._InternalPanelDoNotUseOrYouWillBeFired=Dye;const kye=LX,Fye=t=>{const{getPrefixCls:e,direction:n}=E.useContext(Sr),{prefixCls:r,className:i}=t,o=e("input-group",r),l=e("input"),[f,s]=_3(l),p=At(o,{[`${o}-lg`]:t.size==="large",[`${o}-sm`]:t.size==="small",[`${o}-compact`]:t.compact,[`${o}-rtl`]:n==="rtl"},s,i),v=E.useContext(Ys),x=E.useMemo(()=>Object.assign(Object.assign({},v),{isFormItemInput:!1}),[v]);return f(E.createElement("span",{className:p,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},E.createElement(Ys.Provider,{value:x},t.children)))},zye=Fye,Nye=t=>{let e;return typeof t=="object"&&(t!=null&&t.clearIcon)?e=t:t&&(e={clearIcon:Tt.createElement($b,null)}),e},BX=Nye;function DX(t,e){const n=E.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var i,o,l,f;!((i=t.current)===null||i===void 0)&&i.input&&((o=t.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((l=t.current)===null||l===void 0)&&l.input.hasAttribute("value"))&&((f=t.current)===null||f===void 0||f.input.removeAttribute("value"))}))};return E.useEffect(()=>(e&&r(),()=>n.current.forEach(i=>{i&&clearTimeout(i)})),[]),r}function $ye(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}var jye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Uye(t,e){if(!t)return;t.focus(e);const{cursor:n}=e||{};if(n){const r=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(r,r);break;default:t.setSelectionRange(0,r)}}}const Vye=E.forwardRef((t,e)=>{var n;const{prefixCls:r,bordered:i=!0,status:o,size:l,disabled:f,onBlur:s,onFocus:p,suffix:v,allowClear:x,addonAfter:S,addonBefore:M,className:P,style:R,styles:D,rootClassName:B,onChange:O,classNames:k,variant:$}=t,H=jye(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:U,direction:X,input:J}=Tt.useContext(Sr),K=U("input",r),Q=E.useRef(null),ce=_a(K),[ge,ae,ve]=_3(K,ce),{compactSize:Fe,compactItemClassnames:Ae}=Hb(K,X),pe=hd(Rt=>{var bt;return(bt=l??Fe)!==null&&bt!==void 0?bt:Rt}),fe=Tt.useContext(du),xe=f??fe,{status:Re,hasFeedback:ke,feedbackIcon:ze}=E.useContext(Ys),Xe=Kb(Re,o),Ne=$ye(t)||!!ke;E.useRef(Ne);const Qe=DX(Q,!0),pt=Rt=>{Qe(),s==null||s(Rt)},Ke=Rt=>{Qe(),p==null||p(Rt)},ot=Rt=>{Qe(),O==null||O(Rt)},St=(ke||v)&&Tt.createElement(Tt.Fragment,null,v,ke&&ze),st=BX(x??(J==null?void 0:J.allowClear)),[rt,lt]=_T("input",$,i);return ge(Tt.createElement(yye,Object.assign({ref:Al(e,Q),prefixCls:K,autoComplete:J==null?void 0:J.autoComplete},H,{disabled:xe,onBlur:pt,onFocus:Ke,style:Object.assign(Object.assign({},J==null?void 0:J.style),R),styles:Object.assign(Object.assign({},J==null?void 0:J.styles),D),suffix:St,allowClear:st,className:At(P,B,ve,ce,Ae,J==null?void 0:J.className),onChange:ot,addonBefore:M&&Tt.createElement(sv,{form:!0,space:!0},M),addonAfter:S&&Tt.createElement(sv,{form:!0,space:!0},S),classNames:Object.assign(Object.assign(Object.assign({},k),J==null?void 0:J.classNames),{input:At({[`${K}-sm`]:pe==="small",[`${K}-lg`]:pe==="large",[`${K}-rtl`]:X==="rtl"},k==null?void 0:k.input,(n=J==null?void 0:J.classNames)===null||n===void 0?void 0:n.input,ae),variant:At({[`${K}-${rt}`]:lt},av(K,Xe)),affixWrapper:At({[`${K}-affix-wrapper-sm`]:pe==="small",[`${K}-affix-wrapper-lg`]:pe==="large",[`${K}-affix-wrapper-rtl`]:X==="rtl"},ae),wrapper:At({[`${K}-group-rtl`]:X==="rtl"},ae),groupWrapper:At({[`${K}-group-wrapper-sm`]:pe==="small",[`${K}-group-wrapper-lg`]:pe==="large",[`${K}-group-wrapper-rtl`]:X==="rtl",[`${K}-group-wrapper-${rt}`]:lt},av(`${K}-group-wrapper`,Xe,ke),ae)})})))}),wT=Vye,Gye=t=>{const{componentCls:e,paddingXS:n}=t;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:t.paddingXS}}}},Hye=Ss(["Input","OTP"],t=>{const e=$i(t,g3(t));return[Gye(e)]},v3);var Wye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Xye=E.forwardRef((t,e)=>{const{value:n,onChange:r,onActiveChange:i,index:o,mask:l}=t,f=Wye(t,["value","onChange","onActiveChange","index","mask"]),s=n&&typeof l=="string"?l:n,p=P=>{r(o,P.target.value)},v=E.useRef(null);E.useImperativeHandle(e,()=>v.current);const x=()=>{gi(()=>{var P;const R=(P=v.current)===null||P===void 0?void 0:P.input;document.activeElement===R&&R&&R.select()})},S=P=>{let{key:R}=P;R==="ArrowLeft"?i(o-1):R==="ArrowRight"&&i(o+1),x()},M=P=>{P.key==="Backspace"&&!n&&i(o-1),x()};return E.createElement(wT,Object.assign({type:l===!0?"password":"text"},f,{ref:v,value:s,onInput:p,onFocus:x,onKeyDown:S,onKeyUp:M,onMouseDown:x,onMouseUp:x}))}),qye=Xye;var Yye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function gw(t){return(t||"").split("")}const Zye=E.forwardRef((t,e)=>{const{prefixCls:n,length:r=6,size:i,defaultValue:o,value:l,onChange:f,formatter:s,variant:p,disabled:v,status:x,autoFocus:S,mask:M,type:P}=t,R=Yye(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type"]),{getPrefixCls:D,direction:B}=E.useContext(Sr),O=D("otp",n),k=id(R,{aria:!0,data:!0,attr:!0}),$=_a(O),[H,U,X]=Hye(O,$),J=hd(ze=>i??ze),K=E.useContext(Ys),Q=Kb(K.status,x),ce=E.useMemo(()=>Object.assign(Object.assign({},K),{status:Q,hasFeedback:!1,feedbackIcon:null}),[K,Q]),ge=E.useRef(null),ae=E.useRef({});E.useImperativeHandle(e,()=>({focus:()=>{var ze;(ze=ae.current[0])===null||ze===void 0||ze.focus()},blur:()=>{var ze;for(let Xe=0;Xe<r;Xe+=1)(ze=ae.current[Xe])===null||ze===void 0||ze.blur()},nativeElement:ge.current}));const ve=ze=>s?s(ze):ze,[Fe,Ae]=E.useState(gw(ve(o||"")));E.useEffect(()=>{l!==void 0&&Ae(gw(l))},[l]);const pe=xo(ze=>{Ae(ze),f&&ze.length===r&&ze.every(Xe=>Xe)&&ze.some((Xe,Ne)=>Fe[Ne]!==Xe)&&f(ze.join(""))}),fe=xo((ze,Xe)=>{let Ne=sn(Fe);for(let pt=0;pt<ze;pt+=1)Ne[pt]||(Ne[pt]="");Xe.length<=1?Ne[ze]=Xe:Ne=Ne.slice(0,ze).concat(gw(Xe)),Ne=Ne.slice(0,r);for(let pt=Ne.length-1;pt>=0&&!Ne[pt];pt-=1)Ne.pop();const Qe=ve(Ne.map(pt=>pt||" ").join(""));return Ne=gw(Qe).map((pt,Ke)=>pt===" "&&!Ne[Ke]?Ne[Ke]:pt),Ne}),xe=(ze,Xe)=>{var Ne;const Qe=fe(ze,Xe),pt=Math.min(ze+Xe.length,r-1);pt!==ze&&((Ne=ae.current[pt])===null||Ne===void 0||Ne.focus()),pe(Qe)},Re=ze=>{var Xe;(Xe=ae.current[ze])===null||Xe===void 0||Xe.focus()},ke={variant:p,disabled:v,status:Q,mask:M,type:P};return H(E.createElement("div",Object.assign({},k,{ref:ge,className:At(O,{[`${O}-sm`]:J==="small",[`${O}-lg`]:J==="large",[`${O}-rtl`]:B==="rtl"},X,U)}),E.createElement(Ys.Provider,{value:ce},Array.from({length:r}).map((ze,Xe)=>{const Ne=`otp-${Xe}`,Qe=Fe[Xe]||"";return E.createElement(qye,Object.assign({ref:pt=>{ae.current[Xe]=pt},key:Ne,index:Xe,size:J,htmlSize:1,className:`${O}-input`,onChange:xe,value:Qe,onActiveChange:Re,autoFocus:Xe===0&&S},ke))}))))}),Kye=Zye;var Jye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Qye=t=>t?E.createElement(fse,null):E.createElement(ase,null),e0e={click:"onClick",hover:"onMouseOver"},t0e=E.forwardRef((t,e)=>{const{disabled:n,action:r="click",visibilityToggle:i=!0,iconRender:o=Qye}=t,l=E.useContext(du),f=n??l,s=typeof i=="object"&&i.visible!==void 0,[p,v]=E.useState(()=>s?i.visible:!1),x=E.useRef(null);E.useEffect(()=>{s&&v(i.visible)},[s,i]);const S=DX(x),M=()=>{f||(p&&S(),v(Q=>{var ce;const ge=!Q;return typeof i=="object"&&((ce=i.onVisibleChange)===null||ce===void 0||ce.call(i,ge)),ge}))},P=Q=>{const ce=e0e[r]||"",ge=o(p),ae={[ce]:M,className:`${Q}-icon`,key:"passwordIcon",onMouseDown:ve=>{ve.preventDefault()},onMouseUp:ve=>{ve.preventDefault()}};return E.cloneElement(E.isValidElement(ge)?ge:E.createElement("span",null,ge),ae)},{className:R,prefixCls:D,inputPrefixCls:B,size:O}=t,k=Jye(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:$}=E.useContext(Sr),H=$("input",B),U=$("input-password",D),X=i&&P(U),J=At(U,R,{[`${U}-${O}`]:!!O}),K=Object.assign(Object.assign({},Ml(k,["suffix","iconRender","visibilityToggle"])),{type:p?"text":"password",className:J,prefixCls:H,suffix:X});return O&&(K.size=O),E.createElement(wT,Object.assign({ref:Al(e,x)},K))}),n0e=t0e;var r0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const i0e=E.forwardRef((t,e)=>{const{prefixCls:n,inputPrefixCls:r,className:i,size:o,suffix:l,enterButton:f=!1,addonAfter:s,loading:p,disabled:v,onSearch:x,onChange:S,onCompositionStart:M,onCompositionEnd:P}=t,R=r0e(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:D,direction:B}=E.useContext(Sr),O=E.useRef(!1),k=D("input-search",n),$=D("input",r),{compactSize:H}=Hb(k,B),U=hd(Re=>{var ke;return(ke=o??H)!==null&&ke!==void 0?ke:Re}),X=E.useRef(null),J=Re=>{Re!=null&&Re.target&&Re.type==="click"&&x&&x(Re.target.value,Re,{source:"clear"}),S==null||S(Re)},K=Re=>{var ke;document.activeElement===((ke=X.current)===null||ke===void 0?void 0:ke.input)&&Re.preventDefault()},Q=Re=>{var ke,ze;x&&x((ze=(ke=X.current)===null||ke===void 0?void 0:ke.input)===null||ze===void 0?void 0:ze.value,Re,{source:"input"})},ce=Re=>{O.current||p||Q(Re)},ge=typeof f=="boolean"?E.createElement(PH,null):null,ae=`${k}-button`;let ve;const Fe=f||{},Ae=Fe.type&&Fe.type.__ANT_BUTTON===!0;Ae||Fe.type==="button"?ve=rv(Fe,Object.assign({onMouseDown:K,onClick:Re=>{var ke,ze;(ze=(ke=Fe==null?void 0:Fe.props)===null||ke===void 0?void 0:ke.onClick)===null||ze===void 0||ze.call(ke,Re),Q(Re)},key:"enterButton"},Ae?{className:ae,size:U}:{})):ve=E.createElement(os,{className:ae,type:f?"primary":void 0,size:U,disabled:v,key:"enterButton",onMouseDown:K,onClick:Q,loading:p,icon:ge},f),s&&(ve=[ve,rv(s,{key:"addonAfter"})]);const pe=At(k,{[`${k}-rtl`]:B==="rtl",[`${k}-${U}`]:!!U,[`${k}-with-button`]:!!f},i),fe=Re=>{O.current=!0,M==null||M(Re)},xe=Re=>{O.current=!1,P==null||P(Re)};return E.createElement(wT,Object.assign({ref:Al(X,e),onPressEnter:ce},R,{size:U,onCompositionStart:fe,onCompositionEnd:xe,prefixCls:$,addonAfter:ve,suffix:l,onChange:J,className:pe,disabled:v}))}),o0e=i0e;var s0e=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,a0e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],YP={},Pa;function l0e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&YP[n])return YP[n];var r=window.getComputedStyle(t),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),l=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),f=a0e.map(function(p){return"".concat(p,":").concat(r.getPropertyValue(p))}).join(";"),s={sizingStyle:f,paddingSize:o,borderSize:l,boxSizing:i};return e&&n&&(YP[n]=s),s}function c0e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Pa||(Pa=document.createElement("textarea"),Pa.setAttribute("tab-index","-1"),Pa.setAttribute("aria-hidden","true"),Pa.setAttribute("name","hiddenTextarea"),document.body.appendChild(Pa)),t.getAttribute("wrap")?Pa.setAttribute("wrap",t.getAttribute("wrap")):Pa.removeAttribute("wrap");var i=l0e(t,e),o=i.paddingSize,l=i.borderSize,f=i.boxSizing,s=i.sizingStyle;Pa.setAttribute("style","".concat(s,";").concat(s0e)),Pa.value=t.value||t.placeholder||"";var p=void 0,v=void 0,x,S=Pa.scrollHeight;if(f==="border-box"?S+=l:f==="content-box"&&(S-=o),n!==null||r!==null){Pa.value=" ";var M=Pa.scrollHeight-o;n!==null&&(p=M*n,f==="border-box"&&(p=p+o+l),S=Math.max(p,S)),r!==null&&(v=M*r,f==="border-box"&&(v=v+o+l),x=S>v?"":"hidden",S=Math.min(v,S))}var P={height:S,overflowY:x,resize:"none"};return p&&(P.minHeight=p),v&&(P.maxHeight=v),P}var u0e=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],ZP=0,KP=1,JP=2,d0e=E.forwardRef(function(t,e){var n=t,r=n.prefixCls,i=n.defaultValue,o=n.value,l=n.autoSize,f=n.onResize,s=n.className,p=n.style,v=n.disabled,x=n.onChange;n.onInternalAutoSize;var S=Hr(n,u0e),M=au(i,{value:o,postState:function(Ne){return Ne??""}}),P=ct(M,2),R=P[0],D=P[1],B=function(Ne){D(Ne.target.value),x==null||x(Ne)},O=E.useRef();E.useImperativeHandle(e,function(){return{textArea:O.current}});var k=E.useMemo(function(){return l&&Kn(l)==="object"?[l.minRows,l.maxRows]:[]},[l]),$=ct(k,2),H=$[0],U=$[1],X=!!l,J=function(){try{if(document.activeElement===O.current){var Ne=O.current,Qe=Ne.selectionStart,pt=Ne.selectionEnd,Ke=Ne.scrollTop;O.current.setSelectionRange(Qe,pt),O.current.scrollTop=Ke}}catch{}},K=E.useState(JP),Q=ct(K,2),ce=Q[0],ge=Q[1],ae=E.useState(),ve=ct(ae,2),Fe=ve[0],Ae=ve[1],pe=function(){ge(ZP)};Ji(function(){X&&pe()},[o,H,U,X]),Ji(function(){if(ce===ZP)ge(KP);else if(ce===KP){var Xe=c0e(O.current,!1,H,U);ge(JP),Ae(Xe)}else J()},[ce]);var fe=E.useRef(),xe=function(){gi.cancel(fe.current)},Re=function(Ne){ce===JP&&(f==null||f(Ne),l&&(xe(),fe.current=gi(function(){pe()})))};E.useEffect(function(){return xe},[]);var ke=X?Fe:null,ze=Ye(Ye({},p),ke);return(ce===ZP||ce===KP)&&(ze.overflowY="hidden",ze.overflowX="hidden"),E.createElement(Hf,{onResize:Re,disabled:!(l||f)},E.createElement("textarea",Mn({},S,{ref:O,style:ze,className:At(r,s,j({},"".concat(r,"-disabled"),v)),disabled:v,value:R,onChange:B})))}),f0e=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],h0e=Tt.forwardRef(function(t,e){var n,r=t.defaultValue,i=t.value,o=t.onFocus,l=t.onBlur,f=t.onChange,s=t.allowClear,p=t.maxLength,v=t.onCompositionStart,x=t.onCompositionEnd,S=t.suffix,M=t.prefixCls,P=M===void 0?"rc-textarea":M,R=t.showCount,D=t.count,B=t.className,O=t.style,k=t.disabled,$=t.hidden,H=t.classNames,U=t.styles,X=t.onResize,J=t.onClear,K=t.onPressEnter,Q=t.readOnly,ce=t.autoSize,ge=t.onKeyDown,ae=Hr(t,f0e),ve=au(r,{value:i,defaultValue:r}),Fe=ct(ve,2),Ae=Fe[0],pe=Fe[1],fe=Ae==null?"":String(Ae),xe=Tt.useState(!1),Re=ct(xe,2),ke=Re[0],ze=Re[1],Xe=Tt.useRef(!1),Ne=Tt.useState(null),Qe=ct(Ne,2),pt=Qe[0],Ke=Qe[1],ot=E.useRef(null),St=E.useRef(null),st=function(){var Sn;return(Sn=St.current)===null||Sn===void 0?void 0:Sn.textArea},rt=function(){st().focus()};E.useImperativeHandle(e,function(){var Pn;return{resizableTextArea:St.current,focus:rt,blur:function(){st().blur()},nativeElement:((Pn=ot.current)===null||Pn===void 0?void 0:Pn.nativeElement)||st()}}),E.useEffect(function(){ze(function(Pn){return!k&&Pn})},[k]);var lt=Tt.useState(null),Rt=ct(lt,2),bt=Rt[0],wt=Rt[1];Tt.useEffect(function(){if(bt){var Pn;(Pn=st()).setSelectionRange.apply(Pn,sn(bt))}},[bt]);var it=RX(D,R),Bt=(n=it.max)!==null&&n!==void 0?n:p,jt=Number(Bt)>0,cn=it.strategy(fe),rn=!!Bt&&cn>Bt,zt=function(Sn,fr){var cr=fr;!Xe.current&&it.exceedFormatter&&it.max&&it.strategy(fr)>it.max&&(cr=it.exceedFormatter(fr,{max:it.max}),fr!==cr&&wt([st().selectionStart||0,st().selectionEnd||0])),pe(cr),BE(Sn.currentTarget,Sn,f,cr)},bn=function(Sn){Xe.current=!0,v==null||v(Sn)},Ot=function(Sn){Xe.current=!1,zt(Sn,Sn.currentTarget.value),x==null||x(Sn)},Nt=function(Sn){zt(Sn,Sn.target.value)},Jt=function(Sn){Sn.key==="Enter"&&K&&K(Sn),ge==null||ge(Sn)},on=function(Sn){ze(!0),o==null||o(Sn)},vn=function(Sn){ze(!1),l==null||l(Sn)},hn=function(Sn){pe(""),rt(),BE(st(),Sn,f)},wn=S,Rn;it.show&&(it.showFormatter?Rn=it.showFormatter({value:fe,count:cn,maxLength:Bt}):Rn="".concat(cn).concat(jt?" / ".concat(Bt):""),wn=Tt.createElement(Tt.Fragment,null,wn,Tt.createElement("span",{className:At("".concat(P,"-data-count"),H==null?void 0:H.count),style:U==null?void 0:U.count},Rn)));var Vn=function(Sn){var fr;X==null||X(Sn),(fr=st())!==null&&fr!==void 0&&fr.style.height&&Ke(!0)},rr=!ce&&!R&&!s;return Tt.createElement(S3,{ref:ot,value:fe,allowClear:s,handleReset:hn,suffix:wn,prefixCls:P,classNames:Ye(Ye({},H),{},{affixWrapper:At(H==null?void 0:H.affixWrapper,j(j({},"".concat(P,"-show-count"),R),"".concat(P,"-textarea-allow-clear"),s))}),disabled:k,focused:ke,className:At(B,rn&&"".concat(P,"-out-of-range")),style:Ye(Ye({},O),pt&&!rr?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Rn=="string"?Rn:void 0}},hidden:$,readOnly:Q,onClear:J},Tt.createElement(d0e,Mn({},ae,{autoSize:ce,maxLength:p,onKeyDown:Jt,onChange:Nt,onFocus:on,onBlur:vn,onCompositionStart:bn,onCompositionEnd:Ot,className:At(H==null?void 0:H.textarea),style:Ye(Ye({},U==null?void 0:U.textarea),{},{resize:O==null?void 0:O.resize}),disabled:k,prefixCls:P,onResize:Vn,ref:St,readOnly:Q})))}),p0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const m0e=E.forwardRef((t,e)=>{var n,r;const{prefixCls:i,bordered:o=!0,size:l,disabled:f,status:s,allowClear:p,classNames:v,rootClassName:x,className:S,style:M,styles:P,variant:R}=t,D=p0e(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:B,direction:O,textArea:k}=E.useContext(Sr),$=hd(l),H=E.useContext(du),U=f??H,{status:X,hasFeedback:J,feedbackIcon:K}=E.useContext(Ys),Q=Kb(X,s),ce=E.useRef(null);E.useImperativeHandle(e,()=>{var Re;return{resizableTextArea:(Re=ce.current)===null||Re===void 0?void 0:Re.resizableTextArea,focus:ke=>{var ze,Xe;Uye((Xe=(ze=ce.current)===null||ze===void 0?void 0:ze.resizableTextArea)===null||Xe===void 0?void 0:Xe.textArea,ke)},blur:()=>{var ke;return(ke=ce.current)===null||ke===void 0?void 0:ke.blur()}}});const ge=B("input",i),ae=_a(ge),[ve,Fe,Ae]=_3(ge,ae),[pe,fe]=_T("textArea",R,o),xe=BX(p??(k==null?void 0:k.allowClear));return ve(E.createElement(h0e,Object.assign({autoComplete:k==null?void 0:k.autoComplete},D,{style:Object.assign(Object.assign({},k==null?void 0:k.style),M),styles:Object.assign(Object.assign({},k==null?void 0:k.styles),P),disabled:U,allowClear:xe,className:At(Ae,ae,S,x,k==null?void 0:k.className),classNames:Object.assign(Object.assign(Object.assign({},v),k==null?void 0:k.classNames),{textarea:At({[`${ge}-sm`]:$==="small",[`${ge}-lg`]:$==="large"},Fe,v==null?void 0:v.textarea,(n=k==null?void 0:k.classNames)===null||n===void 0?void 0:n.textarea),variant:At({[`${ge}-${pe}`]:fe},av(ge,Q)),affixWrapper:At(`${ge}-textarea-affix-wrapper`,{[`${ge}-affix-wrapper-rtl`]:O==="rtl",[`${ge}-affix-wrapper-sm`]:$==="small",[`${ge}-affix-wrapper-lg`]:$==="large",[`${ge}-textarea-show-count`]:t.showCount||((r=t.count)===null||r===void 0?void 0:r.show)},Fe)}),prefixCls:ge,suffix:J&&E.createElement("span",{className:`${ge}-textarea-suffix`},K),ref:ce})))}),g0e=m0e,Iv=wT;Iv.Group=zye;Iv.Search=o0e;Iv.TextArea=g0e;Iv.Password=n0e;Iv.OTP=Kye;const wS=Iv;function yL(t,e,n){return(t-e)/(n-e)}function E3(t,e,n,r){var i=yL(e,n,r),o={};switch(t){case"rtl":o.right="".concat(i*100,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(i*100,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(i*100,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(i*100,"%"),o.transform="translateX(-50%)";break}return o}function wg(t,e){return Array.isArray(t)?t[e]:t}var Mp=E.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),v0e=E.createContext({}),y0e=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],I5=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.value,i=t.valueIndex,o=t.onStartMove,l=t.onDelete,f=t.style,s=t.render,p=t.dragging,v=t.draggingDelete,x=t.onOffsetChange,S=t.onChangeComplete,M=t.onFocus,P=t.onMouseEnter,R=Hr(t,y0e),D=E.useContext(Mp),B=D.min,O=D.max,k=D.direction,$=D.disabled,H=D.keyboard,U=D.range,X=D.tabIndex,J=D.ariaLabelForHandle,K=D.ariaLabelledByForHandle,Q=D.ariaValueTextFormatterForHandle,ce=D.styles,ge=D.classNames,ae="".concat(n,"-handle"),ve=function(Ne){$||o(Ne,i)},Fe=function(Ne){M==null||M(Ne,i)},Ae=function(Ne){P(Ne,i)},pe=function(Ne){if(!$&&H){var Qe=null;switch(Ne.which||Ne.keyCode){case nn.LEFT:Qe=k==="ltr"||k==="btt"?-1:1;break;case nn.RIGHT:Qe=k==="ltr"||k==="btt"?1:-1;break;case nn.UP:Qe=k!=="ttb"?1:-1;break;case nn.DOWN:Qe=k!=="ttb"?-1:1;break;case nn.HOME:Qe="min";break;case nn.END:Qe="max";break;case nn.PAGE_UP:Qe=2;break;case nn.PAGE_DOWN:Qe=-2;break;case nn.BACKSPACE:case nn.DELETE:l(i);break}Qe!==null&&(Ne.preventDefault(),x(Qe,i))}},fe=function(Ne){switch(Ne.which||Ne.keyCode){case nn.LEFT:case nn.RIGHT:case nn.UP:case nn.DOWN:case nn.HOME:case nn.END:case nn.PAGE_UP:case nn.PAGE_DOWN:S==null||S();break}},xe=E3(k,r,B,O),Re={};if(i!==null){var ke;Re={tabIndex:$?null:wg(X,i),role:"slider","aria-valuemin":B,"aria-valuemax":O,"aria-valuenow":r,"aria-disabled":$,"aria-label":wg(J,i),"aria-labelledby":wg(K,i),"aria-valuetext":(ke=wg(Q,i))===null||ke===void 0?void 0:ke(r),"aria-orientation":k==="ltr"||k==="rtl"?"horizontal":"vertical",onMouseDown:ve,onTouchStart:ve,onFocus:Fe,onMouseEnter:Ae,onKeyDown:pe,onKeyUp:fe}}var ze=E.createElement("div",Mn({ref:e,className:At(ae,j(j(j({},"".concat(ae,"-").concat(i+1),i!==null&&U),"".concat(ae,"-dragging"),p),"".concat(ae,"-dragging-delete"),v),ge.handle),style:Ye(Ye(Ye({},xe),f),ce.handle)},Re,R));return s&&(ze=s(ze,{index:i,prefixCls:n,value:r,dragging:p,draggingDelete:v})),ze}),_0e=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],b0e=E.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,i=t.onStartMove,o=t.onOffsetChange,l=t.values,f=t.handleRender,s=t.activeHandleRender,p=t.draggingIndex,v=t.draggingDelete,x=t.onFocus,S=Hr(t,_0e),M=E.useRef({}),P=E.useState(!1),R=ct(P,2),D=R[0],B=R[1],O=E.useState(-1),k=ct(O,2),$=k[0],H=k[1],U=function(ce){H(ce),B(!0)},X=function(ce,ge){U(ge),x==null||x(ce)},J=function(ce,ge){U(ge)};E.useImperativeHandle(e,function(){return{focus:function(ce){var ge;(ge=M.current[ce])===null||ge===void 0||ge.focus()},hideHelp:function(){rd.flushSync(function(){B(!1)})}}});var K=Ye({prefixCls:n,onStartMove:i,onOffsetChange:o,render:f,onFocus:X,onMouseEnter:J},S);return E.createElement(E.Fragment,null,l.map(function(Q,ce){var ge=p===ce;return E.createElement(I5,Mn({ref:function(ve){ve?M.current[ce]=ve:delete M.current[ce]},dragging:ge,draggingDelete:ge&&v,style:wg(r,ce),key:ce,value:Q,valueIndex:ce},K))}),s&&D&&E.createElement(I5,Mn({key:"a11y"},K,{value:l[$],valueIndex:null,dragging:p!==-1,draggingDelete:v,render:s,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),x0e=function(e){var n=e.prefixCls,r=e.style,i=e.children,o=e.value,l=e.onClick,f=E.useContext(Mp),s=f.min,p=f.max,v=f.direction,x=f.includedStart,S=f.includedEnd,M=f.included,P="".concat(n,"-text"),R=E3(v,o,s,p);return E.createElement("span",{className:At(P,j({},"".concat(P,"-active"),M&&x<=o&&o<=S)),style:Ye(Ye({},R),r),onMouseDown:function(B){B.stopPropagation()},onClick:function(){l(o)}},i)},w0e=function(e){var n=e.prefixCls,r=e.marks,i=e.onClick,o="".concat(n,"-mark");return r.length?E.createElement("div",{className:o},r.map(function(l){var f=l.value,s=l.style,p=l.label;return E.createElement(x0e,{key:f,prefixCls:o,style:s,value:f,onClick:i},p)})):null},S0e=function(e){var n=e.prefixCls,r=e.value,i=e.style,o=e.activeStyle,l=E.useContext(Mp),f=l.min,s=l.max,p=l.direction,v=l.included,x=l.includedStart,S=l.includedEnd,M="".concat(n,"-dot"),P=v&&x<=r&&r<=S,R=Ye(Ye({},E3(p,r,f,s)),typeof i=="function"?i(r):i);return P&&(R=Ye(Ye({},R),typeof o=="function"?o(r):o)),E.createElement("span",{className:At(M,j({},"".concat(M,"-active"),P)),style:R})},E0e=function(e){var n=e.prefixCls,r=e.marks,i=e.dots,o=e.style,l=e.activeStyle,f=E.useContext(Mp),s=f.min,p=f.max,v=f.step,x=E.useMemo(function(){var S=new Set;if(r.forEach(function(P){S.add(P.value)}),i&&v!==null)for(var M=s;M<=p;)S.add(M),M+=v;return Array.from(S)},[s,p,v,i,r]);return E.createElement("div",{className:"".concat(n,"-step")},x.map(function(S){return E.createElement(S0e,{prefixCls:n,key:S,value:S,style:o,activeStyle:l})}))},R5=function(e){var n=e.prefixCls,r=e.style,i=e.start,o=e.end,l=e.index,f=e.onStartMove,s=e.replaceCls,p=E.useContext(Mp),v=p.direction,x=p.min,S=p.max,M=p.disabled,P=p.range,R=p.classNames,D="".concat(n,"-track"),B=yL(i,x,S),O=yL(o,x,S),k=function(X){!M&&f&&f(X,-1)},$={};switch(v){case"rtl":$.right="".concat(B*100,"%"),$.width="".concat(O*100-B*100,"%");break;case"btt":$.bottom="".concat(B*100,"%"),$.height="".concat(O*100-B*100,"%");break;case"ttb":$.top="".concat(B*100,"%"),$.height="".concat(O*100-B*100,"%");break;default:$.left="".concat(B*100,"%"),$.width="".concat(O*100-B*100,"%")}var H=s||At(D,j(j({},"".concat(D,"-").concat(l+1),l!==null&&P),"".concat(n,"-track-draggable"),f),R.track);return E.createElement("div",{className:H,style:Ye(Ye({},$),r),onMouseDown:k,onTouchStart:k})},C0e=function(e){var n=e.prefixCls,r=e.style,i=e.values,o=e.startPoint,l=e.onStartMove,f=E.useContext(Mp),s=f.included,p=f.range,v=f.min,x=f.styles,S=f.classNames,M=E.useMemo(function(){if(!p){if(i.length===0)return[];var R=o??v,D=i[0];return[{start:Math.min(R,D),end:Math.max(R,D)}]}for(var B=[],O=0;O<i.length-1;O+=1)B.push({start:i[O],end:i[O+1]});return B},[i,p,o,v]);if(!s)return null;var P=S.tracks||x.tracks?E.createElement(R5,{index:null,prefixCls:n,start:M[0].start,end:M[M.length-1].end,replaceCls:At(S.tracks,"".concat(n,"-tracks")),style:x.tracks}):null;return E.createElement(E.Fragment,null,P,M.map(function(R,D){var B=R.start,O=R.end;return E.createElement(R5,{index:D,prefixCls:n,style:Ye(Ye({},wg(r,D)),x.track),start:B,end:O,key:D,onStartMove:l})}))},T0e=130;function O5(t){var e="targetTouches"in t?t.targetTouches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}function A0e(t,e,n,r,i,o,l,f,s,p,v){var x=E.useState(null),S=ct(x,2),M=S[0],P=S[1],R=E.useState(-1),D=ct(R,2),B=D[0],O=D[1],k=E.useState(!1),$=ct(k,2),H=$[0],U=$[1],X=E.useState(n),J=ct(X,2),K=J[0],Q=J[1],ce=E.useState(n),ge=ct(ce,2),ae=ge[0],ve=ge[1],Fe=E.useRef(null),Ae=E.useRef(null),pe=E.useRef(null),fe=E.useContext(v0e),xe=fe.onDragStart,Re=fe.onDragChange;E.useLayoutEffect(function(){B===-1&&Q(n)},[n,B]),E.useEffect(function(){return function(){document.removeEventListener("mousemove",Fe.current),document.removeEventListener("mouseup",Ae.current),pe.current&&(pe.current.removeEventListener("touchmove",Fe.current),pe.current.removeEventListener("touchend",Ae.current))}},[]);var ke=function(pt,Ke,ot){Ke!==void 0&&P(Ke),Q(pt);var St=pt;ot&&(St=pt.filter(function(st,rt){return rt!==B})),l(St),Re&&Re({rawValues:pt,deleteIndex:ot?B:-1,draggingIndex:B,draggingValue:Ke})},ze=xo(function(Qe,pt,Ke){if(Qe===-1){var ot=ae[0],St=ae[ae.length-1],st=r-ot,rt=i-St,lt=pt*(i-r);lt=Math.max(lt,st),lt=Math.min(lt,rt);var Rt=o(ot+lt);lt=Rt-ot;var bt=ae.map(function(jt){return jt+lt});ke(bt)}else{var wt=(i-r)*pt,it=sn(K);it[Qe]=ae[Qe];var Bt=s(it,wt,Qe,"dist");ke(Bt.values,Bt.value,Ke)}}),Xe=function(pt,Ke,ot){pt.stopPropagation();var St=ot||n,st=St[Ke];O(Ke),P(st),ve(St),Q(St),U(!1);var rt=O5(pt),lt=rt.pageX,Rt=rt.pageY,bt=!1;xe&&xe({rawValues:St,draggingIndex:Ke,draggingValue:st});var wt=function(jt){jt.preventDefault();var cn=O5(jt),rn=cn.pageX,zt=cn.pageY,bn=rn-lt,Ot=zt-Rt,Nt=t.current.getBoundingClientRect(),Jt=Nt.width,on=Nt.height,vn,hn;switch(e){case"btt":vn=-Ot/on,hn=bn;break;case"ttb":vn=Ot/on,hn=bn;break;case"rtl":vn=-bn/Jt,hn=Ot;break;default:vn=bn/Jt,hn=Ot}bt=p?Math.abs(hn)>T0e&&v<K.length:!1,U(bt),ze(Ke,vn,bt)},it=function Bt(jt){jt.preventDefault(),document.removeEventListener("mouseup",Bt),document.removeEventListener("mousemove",wt),pe.current&&(pe.current.removeEventListener("touchmove",Fe.current),pe.current.removeEventListener("touchend",Ae.current)),Fe.current=null,Ae.current=null,pe.current=null,f(bt),O(-1),U(!1)};document.addEventListener("mouseup",it),document.addEventListener("mousemove",wt),pt.currentTarget.addEventListener("touchend",it),pt.currentTarget.addEventListener("touchmove",wt),Fe.current=wt,Ae.current=it,pe.current=pt.currentTarget},Ne=E.useMemo(function(){var Qe=sn(n).sort(function(st,rt){return st-rt}),pt=sn(K).sort(function(st,rt){return st-rt}),Ke={};pt.forEach(function(st){Ke[st]=(Ke[st]||0)+1}),Qe.forEach(function(st){Ke[st]=(Ke[st]||0)-1});var ot=p?1:0,St=Object.values(Ke).reduce(function(st,rt){return st+Math.abs(rt)},0);return St<=ot?K:n},[n,K,p]);return[B,M,H,Ne,Xe]}function M0e(t,e,n,r,i,o){var l=E.useCallback(function(M){return Math.max(t,Math.min(e,M))},[t,e]),f=E.useCallback(function(M){if(n!==null){var P=t+Math.round((l(M)-t)/n)*n,R=function(k){return(String(k).split(".")[1]||"").length},D=Math.max(R(n),R(e),R(t)),B=Number(P.toFixed(D));return t<=B&&B<=e?B:null}return null},[n,t,e,l]),s=E.useCallback(function(M){var P=l(M),R=r.map(function(O){return O.value});n!==null&&R.push(f(M)),R.push(t,e);var D=R[0],B=e-t;return R.forEach(function(O){var k=Math.abs(P-O);k<=B&&(D=O,B=k)}),D},[t,e,r,n,l,f]),p=function M(P,R,D){var B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof R=="number"){var O,k=P[D],$=k+R,H=[];r.forEach(function(Q){H.push(Q.value)}),H.push(t,e),H.push(f(k));var U=R>0?1:-1;B==="unit"?H.push(f(k+U*n)):H.push(f($)),H=H.filter(function(Q){return Q!==null}).filter(function(Q){return R<0?Q<=k:Q>=k}),B==="unit"&&(H=H.filter(function(Q){return Q!==k}));var X=B==="unit"?k:$;O=H[0];var J=Math.abs(O-X);if(H.forEach(function(Q){var ce=Math.abs(Q-X);ce<J&&(O=Q,J=ce)}),O===void 0)return R<0?t:e;if(B==="dist")return O;if(Math.abs(R)>1){var K=sn(P);return K[D]=O,M(K,R-U,D,B)}return O}else{if(R==="min")return t;if(R==="max")return e}},v=function(P,R,D){var B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",O=P[D],k=p(P,R,D,B);return{value:k,changed:k!==O}},x=function(P){return o===null&&P===0||typeof o=="number"&&P<o},S=function(P,R,D){var B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",O=P.map(s),k=O[D],$=p(O,R,D,B);if(O[D]=$,i===!1){var H=o||0;D>0&&O[D-1]!==k&&(O[D]=Math.max(O[D],O[D-1]+H)),D<O.length-1&&O[D+1]!==k&&(O[D]=Math.min(O[D],O[D+1]-H))}else if(typeof o=="number"||o===null){for(var U=D+1;U<O.length;U+=1)for(var X=!0;x(O[U]-O[U-1])&&X;){var J=v(O,1,U);O[U]=J.value,X=J.changed}for(var K=D;K>0;K-=1)for(var Q=!0;x(O[K]-O[K-1])&&Q;){var ce=v(O,-1,K-1);O[K-1]=ce.value,Q=ce.changed}for(var ge=O.length-1;ge>0;ge-=1)for(var ae=!0;x(O[ge]-O[ge-1])&&ae;){var ve=v(O,-1,ge-1);O[ge-1]=ve.value,ae=ve.changed}for(var Fe=0;Fe<O.length-1;Fe+=1)for(var Ae=!0;x(O[Fe+1]-O[Fe])&&Ae;){var pe=v(O,1,Fe+1);O[Fe+1]=pe.value,Ae=pe.changed}}return{value:O[D],values:O}};return[s,S]}function P0e(t){return E.useMemo(function(){if(t===!0||!t)return[!!t,!1,!1,0];var e=t.editable,n=t.draggableTrack,r=t.minCount,i=t.maxCount;return[!0,e,!e&&n,r||0,i]},[t])}var I0e=E.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-slider":n,i=t.className,o=t.style,l=t.classNames,f=t.styles,s=t.disabled,p=s===void 0?!1:s,v=t.keyboard,x=v===void 0?!0:v,S=t.autoFocus,M=t.onFocus,P=t.onBlur,R=t.min,D=R===void 0?0:R,B=t.max,O=B===void 0?100:B,k=t.step,$=k===void 0?1:k,H=t.value,U=t.defaultValue,X=t.range,J=t.count,K=t.onChange,Q=t.onBeforeChange,ce=t.onAfterChange,ge=t.onChangeComplete,ae=t.allowCross,ve=ae===void 0?!0:ae,Fe=t.pushable,Ae=Fe===void 0?!1:Fe,pe=t.reverse,fe=t.vertical,xe=t.included,Re=xe===void 0?!0:xe,ke=t.startPoint,ze=t.trackStyle,Xe=t.handleStyle,Ne=t.railStyle,Qe=t.dotStyle,pt=t.activeDotStyle,Ke=t.marks,ot=t.dots,St=t.handleRender,st=t.activeHandleRender,rt=t.track,lt=t.tabIndex,Rt=lt===void 0?0:lt,bt=t.ariaLabelForHandle,wt=t.ariaLabelledByForHandle,it=t.ariaValueTextFormatterForHandle,Bt=E.useRef(null),jt=E.useRef(null),cn=E.useMemo(function(){return fe?pe?"ttb":"btt":pe?"rtl":"ltr"},[pe,fe]),rn=P0e(X),zt=ct(rn,5),bn=zt[0],Ot=zt[1],Nt=zt[2],Jt=zt[3],on=zt[4],vn=E.useMemo(function(){return isFinite(D)?D:0},[D]),hn=E.useMemo(function(){return isFinite(O)?O:100},[O]),wn=E.useMemo(function(){return $!==null&&$<=0?1:$},[$]),Rn=E.useMemo(function(){return typeof Ae=="boolean"?Ae?wn:!1:Ae>=0?Ae:!1},[Ae,wn]),Vn=E.useMemo(function(){return Object.keys(Ke||{}).map(function(Ft){var Gt=Ke[Ft],xn={value:Number(Ft)};return Gt&&Kn(Gt)==="object"&&!E.isValidElement(Gt)&&("label"in Gt||"style"in Gt)?(xn.style=Gt.style,xn.label=Gt.label):xn.label=Gt,xn}).filter(function(Ft){var Gt=Ft.label;return Gt||typeof Gt=="number"}).sort(function(Ft,Gt){return Ft.value-Gt.value})},[Ke]),rr=M0e(vn,hn,wn,Vn,ve,Rn),Pn=ct(rr,2),Sn=Pn[0],fr=Pn[1],cr=au(U,{value:H}),ur=ct(cr,2),tr=ur[0],oi=ur[1],Oe=E.useMemo(function(){var Ft=tr==null?[]:Array.isArray(tr)?tr:[tr],Gt=ct(Ft,1),xn=Gt[0],nr=xn===void 0?vn:xn,or=tr===null?[]:[nr];if(bn){if(or=sn(Ft),J||tr===void 0){var Fr=J>=0?J+1:2;for(or=or.slice(0,Fr);or.length<Fr;){var Or;or.push((Or=or[or.length-1])!==null&&Or!==void 0?Or:vn)}}or.sort(function(Xr,Qr){return Xr-Qr})}return or.forEach(function(Xr,Qr){or[Qr]=Sn(Xr)}),or},[tr,bn,vn,J,Sn]),se=function(Gt){return bn?Gt:Gt[0]},oe=xo(function(Ft){var Gt=sn(Ft).sort(function(xn,nr){return xn-nr});K&&!ME(Gt,Oe,!0)&&K(se(Gt)),oi(Gt)}),te=xo(function(Ft){Ft&&Bt.current.hideHelp();var Gt=se(Oe);ce==null||ce(Gt),vs(!ce,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),ge==null||ge(Gt)}),le=function(Gt){if(!(p||!Ot||Oe.length<=Jt)){var xn=sn(Oe);xn.splice(Gt,1),Q==null||Q(se(xn)),oe(xn);var nr=Math.max(0,Gt-1);Bt.current.hideHelp(),Bt.current.focus(nr)}},ue=A0e(jt,cn,Oe,vn,hn,Sn,oe,te,fr,Ot,Jt),Me=ct(ue,5),Ce=Me[0],_e=Me[1],De=Me[2],et=Me[3],nt=Me[4],Ze=function(Gt,xn){if(!p){var nr=sn(Oe),or=0,Fr=0,Or=hn-vn;Oe.forEach(function(_i,xt){var Hi=Math.abs(Gt-_i);Hi<=Or&&(Or=Hi,or=xt),_i<Gt&&(Fr=xt)});var Xr=or;Ot&&Or!==0&&(!on||Oe.length<on)?(nr.splice(Fr+1,0,Gt),Xr=Fr+1):nr[or]=Gt,bn&&!Oe.length&&J===void 0&&nr.push(Gt);var Qr=se(nr);if(Q==null||Q(Qr),oe(nr),xn){var qr,zr;(qr=document.activeElement)===null||qr===void 0||(zr=qr.blur)===null||zr===void 0||zr.call(qr),Bt.current.focus(Xr),nt(xn,Xr,nr)}else ce==null||ce(Qr),vs(!ce,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),ge==null||ge(Qr)}},Et=function(Gt){Gt.preventDefault();var xn=jt.current.getBoundingClientRect(),nr=xn.width,or=xn.height,Fr=xn.left,Or=xn.top,Xr=xn.bottom,Qr=xn.right,qr=Gt.clientX,zr=Gt.clientY,_i;switch(cn){case"btt":_i=(Xr-zr)/or;break;case"ttb":_i=(zr-Or)/or;break;case"rtl":_i=(Qr-qr)/nr;break;default:_i=(qr-Fr)/nr}var xt=vn+_i*(hn-vn);Ze(Sn(xt),Gt)},vt=E.useState(null),Ct=ct(vt,2),Vt=Ct[0],ln=Ct[1],kn=function(Gt,xn){if(!p){var nr=fr(Oe,Gt,xn);Q==null||Q(se(Oe)),oe(nr.values),ln(nr.value)}};E.useEffect(function(){if(Vt!==null){var Ft=Oe.indexOf(Vt);Ft>=0&&Bt.current.focus(Ft)}ln(null)},[Vt]);var Jn=E.useMemo(function(){return Nt&&wn===null?!1:Nt},[Nt,wn]),_r=xo(function(Ft,Gt){nt(Ft,Gt),Q==null||Q(se(Oe))}),Wn=Ce!==-1;E.useEffect(function(){if(!Wn){var Ft=Oe.lastIndexOf(_e);Bt.current.focus(Ft)}},[Wn]);var dr=E.useMemo(function(){return sn(et).sort(function(Ft,Gt){return Ft-Gt})},[et]),gr=E.useMemo(function(){return bn?[dr[0],dr[dr.length-1]]:[vn,dr[0]]},[dr,bn,vn]),Yn=ct(gr,2),ri=Yn[0],Cn=Yn[1];E.useImperativeHandle(e,function(){return{focus:function(){Bt.current.focus(0)},blur:function(){var Gt,xn=document,nr=xn.activeElement;(Gt=jt.current)!==null&&Gt!==void 0&&Gt.contains(nr)&&(nr==null||nr.blur())}}}),E.useEffect(function(){S&&Bt.current.focus(0)},[]);var yn=E.useMemo(function(){return{min:vn,max:hn,direction:cn,disabled:p,keyboard:x,step:wn,included:Re,includedStart:ri,includedEnd:Cn,range:bn,tabIndex:Rt,ariaLabelForHandle:bt,ariaLabelledByForHandle:wt,ariaValueTextFormatterForHandle:it,styles:f||{},classNames:l||{}}},[vn,hn,cn,p,x,wn,Re,ri,Cn,bn,Rt,bt,wt,it,f,l]);return E.createElement(Mp.Provider,{value:yn},E.createElement("div",{ref:jt,className:At(r,i,j(j(j(j({},"".concat(r,"-disabled"),p),"".concat(r,"-vertical"),fe),"".concat(r,"-horizontal"),!fe),"".concat(r,"-with-marks"),Vn.length)),style:o,onMouseDown:Et},E.createElement("div",{className:At("".concat(r,"-rail"),l==null?void 0:l.rail),style:Ye(Ye({},Ne),f==null?void 0:f.rail)}),rt!==!1&&E.createElement(C0e,{prefixCls:r,style:ze,values:Oe,startPoint:ke,onStartMove:Jn?_r:void 0}),E.createElement(E0e,{prefixCls:r,marks:Vn,dots:ot,style:Qe,activeStyle:pt}),E.createElement(b0e,{ref:Bt,prefixCls:r,style:Xe,values:et,draggingIndex:Ce,draggingDelete:De,onStartMove:_r,onOffsetChange:kn,onFocus:M,onBlur:P,handleRender:St,activeHandleRender:st,onChangeComplete:te,onDelete:Ot?le:void 0}),E.createElement(w0e,{prefixCls:r,marks:Vn,onClick:Ze})))});const R0e=E.forwardRef((t,e)=>{const{open:n,draggingDelete:r}=t,i=E.useRef(null),o=n&&!r,l=E.useRef(null);function f(){gi.cancel(l.current),l.current=null}function s(){l.current=gi(()=>{var p;(p=i.current)===null||p===void 0||p.forceAlign(),l.current=null})}return E.useEffect(()=>(o?s():f(),f),[o,t.title]),E.createElement(gf,Object.assign({ref:Al(i,e)},t,{open:o}))}),L5=R0e,O0e=t=>{const{componentCls:e,antCls:n,controlSize:r,dotSize:i,marginFull:o,marginPart:l,colorFillContentHover:f,handleColorDisabled:s,calc:p,handleSize:v,handleSizeHover:x,handleActiveColor:S,handleActiveOutlineColor:M,handleLineWidth:P,handleLineWidthHover:R,motionDurationMid:D}=t;return{[e]:Object.assign(Object.assign({},ys(t)),{position:"relative",height:r,margin:`${Kt(l)} ${Kt(o)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${Kt(o)} ${Kt(l)}`},[`${e}-rail`]:{position:"absolute",backgroundColor:t.railBg,borderRadius:t.borderRadiusXS,transition:`background-color ${D}`},[`${e}-track,${e}-tracks`]:{position:"absolute",transition:`background-color ${D}`},[`${e}-track`]:{backgroundColor:t.trackBg,borderRadius:t.borderRadiusXS},[`${e}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${e}-rail`]:{backgroundColor:t.railHoverBg},[`${e}-track`]:{backgroundColor:t.trackHoverBg},[`${e}-dot`]:{borderColor:f},[`${e}-handle::after`]:{boxShadow:`0 0 0 ${Kt(P)} ${t.colorPrimaryBorderHover}`},[`${e}-dot-active`]:{borderColor:t.dotActiveBorderColor}},[`${e}-handle`]:{position:"absolute",width:v,height:v,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:p(P).mul(-1).equal(),insetBlockStart:p(P).mul(-1).equal(),width:p(v).add(p(P).mul(2)).equal(),height:p(v).add(p(P).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:v,height:v,backgroundColor:t.colorBgElevated,boxShadow:`0 0 0 ${Kt(P)} ${t.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${D},
            inset-block-start ${D},
            width ${D},
            height ${D},
            box-shadow ${D},
            outline ${D}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:p(x).sub(v).div(2).add(R).mul(-1).equal(),insetBlockStart:p(x).sub(v).div(2).add(R).mul(-1).equal(),width:p(x).add(p(R).mul(2)).equal(),height:p(x).add(p(R).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${Kt(R)} ${S}`,outline:`6px solid ${M}`,width:x,height:x,insetInlineStart:t.calc(v).sub(x).div(2).equal(),insetBlockStart:t.calc(v).sub(x).div(2).equal()}}},[`&-lock ${e}-handle`]:{"&::before, &::after":{transition:"none"}},[`${e}-mark`]:{position:"absolute",fontSize:t.fontSize},[`${e}-mark-text`]:{position:"absolute",display:"inline-block",color:t.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:t.colorText}},[`${e}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${e}-dot`]:{position:"absolute",width:i,height:i,backgroundColor:t.colorBgElevated,border:`${Kt(P)} solid ${t.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:t.dotActiveBorderColor}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-rail`]:{backgroundColor:`${t.railBg} !important`},[`${e}-track`]:{backgroundColor:`${t.trackBgDisabled} !important`},[`
          ${e}-dot
        `]:{backgroundColor:t.colorBgElevated,borderColor:t.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${e}-handle::after`]:{backgroundColor:t.colorBgElevated,cursor:"not-allowed",width:v,height:v,boxShadow:`0 0 0 ${Kt(P)} ${s}`,insetInlineStart:0,insetBlockStart:0},[`
          ${e}-mark-text,
          ${e}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-inner`]:{minWidth:"unset"}})}},kX=(t,e)=>{const{componentCls:n,railSize:r,handleSize:i,dotSize:o,marginFull:l,calc:f}=t,s=e?"paddingBlock":"paddingInline",p=e?"width":"height",v=e?"height":"width",x=e?"insetBlockStart":"insetInlineStart",S=e?"top":"insetInlineStart",M=f(r).mul(3).sub(i).div(2).equal(),P=f(i).sub(r).div(2).equal(),R=e?{borderWidth:`${Kt(P)} 0`,transform:`translateY(${Kt(f(P).mul(-1).equal())})`}:{borderWidth:`0 ${Kt(P)}`,transform:`translateX(${Kt(t.calc(P).mul(-1).equal())})`};return{[s]:r,[v]:f(r).mul(3).equal(),[`${n}-rail`]:{[p]:"100%",[v]:r},[`${n}-track,${n}-tracks`]:{[v]:r},[`${n}-track-draggable`]:Object.assign({},R),[`${n}-handle`]:{[x]:M},[`${n}-mark`]:{insetInlineStart:0,top:0,[S]:f(r).mul(3).add(e?0:l).equal(),[p]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[S]:r,[p]:"100%",[v]:r},[`${n}-dot`]:{position:"absolute",[x]:f(r).sub(o).div(2).equal()}}},L0e=t=>{const{componentCls:e,marginPartWithMark:n}=t;return{[`${e}-horizontal`]:Object.assign(Object.assign({},kX(t,!0)),{[`&${e}-with-marks`]:{marginBottom:n}})}},B0e=t=>{const{componentCls:e}=t;return{[`${e}-vertical`]:Object.assign(Object.assign({},kX(t,!1)),{height:"100%"})}},D0e=t=>{const n=t.controlHeightLG/4,r=t.controlHeightSM/2,i=t.lineWidth+1,o=t.lineWidth+1*1.5,l=t.colorPrimary,f=new Ro(l).setAlpha(.2).toRgbString();return{controlSize:n,railSize:4,handleSize:n,handleSizeHover:r,dotSize:8,handleLineWidth:i,handleLineWidthHover:o,railBg:t.colorFillTertiary,railHoverBg:t.colorFillSecondary,trackBg:t.colorPrimaryBorder,trackHoverBg:t.colorPrimaryBorderHover,handleColor:t.colorPrimaryBorder,handleActiveColor:l,handleActiveOutlineColor:f,handleColorDisabled:new Ro(t.colorTextDisabled).onBackground(t.colorBgContainer).toHexShortString(),dotBorderColor:t.colorBorderSecondary,dotActiveBorderColor:t.colorPrimaryBorder,trackBgDisabled:t.colorBgContainerDisabled}},k0e=Ss("Slider",t=>{const e=$i(t,{marginPart:t.calc(t.controlHeight).sub(t.controlSize).div(2).equal(),marginFull:t.calc(t.controlSize).div(2).equal(),marginPartWithMark:t.calc(t.controlHeightLG).sub(t.controlSize).equal()});return[O0e(e),L0e(e),B0e(e)]},D0e),F0e=E.createContext({}),z0e=F0e;function QP(){const[t,e]=E.useState(!1),n=E.useRef(),r=()=>{gi.cancel(n.current)},i=o=>{r(),o?e(o):n.current=gi(()=>{e(o)})};return E.useEffect(()=>r,[]),[t,i]}var N0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $0e(t,e){return t||t===null?t:e||e===null?e:n=>typeof n=="number"?n.toString():""}const j0e=Tt.forwardRef((t,e)=>{const{prefixCls:n,range:r,className:i,rootClassName:o,style:l,disabled:f,tooltipPrefixCls:s,tipFormatter:p,tooltipVisible:v,getTooltipPopupContainer:x,tooltipPlacement:S,tooltip:M={},onChangeComplete:P}=t,R=N0e(t,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:D}=t,{direction:B,slider:O,getPrefixCls:k,getPopupContainer:$}=Tt.useContext(Sr),H=Tt.useContext(du),U=f??H,{handleRender:X,direction:J}=Tt.useContext(z0e),Q=(J||B)==="rtl",[ce,ge]=QP(),[ae,ve]=QP(),Fe=Object.assign({},M),{open:Ae,placement:pe,getPopupContainer:fe,prefixCls:xe,formatter:Re}=Fe,ke=Ae??v,ze=(ce||ae)&&ke!==!1,Xe=$0e(Re,p),[Ne,Qe]=QP(),pt=Bt=>{P==null||P(Bt),Qe(!1)},Ke=(Bt,jt)=>Bt||(jt?Q?"left":"right":"top"),ot=k("slider",n),[St,st,rt]=k0e(ot),lt=At(i,O==null?void 0:O.className,o,{[`${ot}-rtl`]:Q,[`${ot}-lock`]:Ne},st,rt);Q&&!R.vertical&&(R.reverse=!R.reverse),Tt.useEffect(()=>{const Bt=()=>{gi(()=>{ve(!1)},1)};return document.addEventListener("mouseup",Bt),()=>{document.removeEventListener("mouseup",Bt)}},[]);const Rt=r&&!ke,bt=X||((Bt,jt)=>{const{index:cn}=jt,rn=Bt.props;function zt(Jt,on,vn){var hn,wn,Rn,Vn;vn&&((wn=(hn=R)[Jt])===null||wn===void 0||wn.call(hn,on)),(Vn=(Rn=rn)[Jt])===null||Vn===void 0||Vn.call(Rn,on)}const bn=Object.assign(Object.assign({},rn),{onMouseEnter:Jt=>{ge(!0),zt("onMouseEnter",Jt)},onMouseLeave:Jt=>{ge(!1),zt("onMouseLeave",Jt)},onMouseDown:Jt=>{ve(!0),Qe(!0),zt("onMouseDown",Jt)},onFocus:Jt=>{var on;ve(!0),(on=R.onFocus)===null||on===void 0||on.call(R,Jt),zt("onFocus",Jt,!0)},onBlur:Jt=>{var on;ve(!1),(on=R.onBlur)===null||on===void 0||on.call(R,Jt),zt("onBlur",Jt,!0)}}),Ot=Tt.cloneElement(Bt,bn),Nt=(!!ke||ze)&&Xe!==null;return Rt?Ot:Tt.createElement(L5,Object.assign({},Fe,{prefixCls:k("tooltip",xe??s),title:Xe?Xe(jt.value):"",open:Nt,placement:Ke(pe??S,D),key:cn,overlayClassName:`${ot}-tooltip`,getPopupContainer:fe||x||$}),Ot)}),wt=Rt?(Bt,jt)=>{const cn=Tt.cloneElement(Bt,{style:Object.assign(Object.assign({},Bt.props.style),{visibility:"hidden"})});return Tt.createElement(L5,Object.assign({},Fe,{prefixCls:k("tooltip",xe??s),title:Xe?Xe(jt.value):"",open:Xe!==null&&ze,placement:Ke(pe??S,D),key:"tooltip",overlayClassName:`${ot}-tooltip`,getPopupContainer:fe||x||$,draggingDelete:jt.draggingDelete}),cn)}:void 0,it=Object.assign(Object.assign({},O==null?void 0:O.style),l);return St(Tt.createElement(I0e,Object.assign({},R,{step:R.step,range:r,className:lt,style:it,disabled:U,ref:e,prefixCls:ot,handleRender:bt,activeHandleRender:wt,onChangeComplete:pt})))}),B5=j0e;function DE(t){return["small","middle","large"].includes(t)}function D5(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const FX=Tt.createContext({latestIndex:0}),U0e=FX.Provider,V0e=t=>{let{className:e,index:n,children:r,split:i,style:o}=t;const{latestIndex:l}=E.useContext(FX);return r==null?null:E.createElement(E.Fragment,null,E.createElement("div",{className:e,style:o},r),n<l&&i&&E.createElement("span",{className:`${e}-split`},i))},G0e=V0e;var H0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const W0e=E.forwardRef((t,e)=>{var n,r,i;const{getPrefixCls:o,space:l,direction:f}=E.useContext(Sr),{size:s=(n=l==null?void 0:l.size)!==null&&n!==void 0?n:"small",align:p,className:v,rootClassName:x,children:S,direction:M="horizontal",prefixCls:P,split:R,style:D,wrap:B=!1,classNames:O,styles:k}=t,$=H0e(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[H,U]=Array.isArray(s)?s:[s,s],X=DE(U),J=DE(H),K=D5(U),Q=D5(H),ce=zf(S,{keepEmpty:!0}),ge=p===void 0&&M==="horizontal"?"center":p,ae=o("space",P),[ve,Fe,Ae]=ZW(ae),pe=At(ae,l==null?void 0:l.className,Fe,`${ae}-${M}`,{[`${ae}-rtl`]:f==="rtl",[`${ae}-align-${ge}`]:ge,[`${ae}-gap-row-${U}`]:X,[`${ae}-gap-col-${H}`]:J},v,x,Ae),fe=At(`${ae}-item`,(r=O==null?void 0:O.item)!==null&&r!==void 0?r:(i=l==null?void 0:l.classNames)===null||i===void 0?void 0:i.item);let xe=0;const Re=ce.map((Xe,Ne)=>{var Qe,pt;Xe!=null&&(xe=Ne);const Ke=(Xe==null?void 0:Xe.key)||`${fe}-${Ne}`;return E.createElement(G0e,{className:fe,key:Ke,index:Ne,split:R,style:(Qe=k==null?void 0:k.item)!==null&&Qe!==void 0?Qe:(pt=l==null?void 0:l.styles)===null||pt===void 0?void 0:pt.item},Xe)}),ke=E.useMemo(()=>({latestIndex:xe}),[xe]);if(ce.length===0)return null;const ze={};return B&&(ze.flexWrap="wrap"),!J&&Q&&(ze.columnGap=H),!X&&K&&(ze.rowGap=U),ve(E.createElement("div",Object.assign({ref:e,className:pe,style:Object.assign(Object.assign(Object.assign({},ze),l==null?void 0:l.style),D)},$),E.createElement(U0e,{value:ke},Re)))}),zX=W0e;zX.Compact=Sde;const zh=zX,NX=["wrap","nowrap","wrap-reverse"],$X=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],jX=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],X0e=(t,e)=>{const n=e.wrap===!0?"wrap":e.wrap;return{[`${t}-wrap-${n}`]:n&&NX.includes(n)}},q0e=(t,e)=>{const n={};return jX.forEach(r=>{n[`${t}-align-${r}`]=e.align===r}),n[`${t}-align-stretch`]=!e.align&&!!e.vertical,n},Y0e=(t,e)=>{const n={};return $X.forEach(r=>{n[`${t}-justify-${r}`]=e.justify===r}),n};function Z0e(t,e){return At(Object.assign(Object.assign(Object.assign({},X0e(t,e)),q0e(t,e)),Y0e(t,e)))}const K0e=t=>{const{componentCls:e}=t;return{[e]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},J0e=t=>{const{componentCls:e}=t;return{[e]:{"&-gap-small":{gap:t.flexGapSM},"&-gap-middle":{gap:t.flexGap},"&-gap-large":{gap:t.flexGapLG}}}},Q0e=t=>{const{componentCls:e}=t,n={};return NX.forEach(r=>{n[`${e}-wrap-${r}`]={flexWrap:r}}),n},e_e=t=>{const{componentCls:e}=t,n={};return jX.forEach(r=>{n[`${e}-align-${r}`]={alignItems:r}}),n},t_e=t=>{const{componentCls:e}=t,n={};return $X.forEach(r=>{n[`${e}-justify-${r}`]={justifyContent:r}}),n},n_e=()=>({}),r_e=Ss("Flex",t=>{const{paddingXS:e,padding:n,paddingLG:r}=t,i=$i(t,{flexGapSM:e,flexGap:n,flexGapLG:r});return[K0e(i),J0e(i),Q0e(i),e_e(i),t_e(i)]},n_e,{resetStyle:!1});var i_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const o_e=Tt.forwardRef((t,e)=>{const{prefixCls:n,rootClassName:r,className:i,style:o,flex:l,gap:f,children:s,vertical:p=!1,component:v="div"}=t,x=i_e(t,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:S,direction:M,getPrefixCls:P}=Tt.useContext(Sr),R=P("flex",n),[D,B,O]=r_e(R),k=p??(S==null?void 0:S.vertical),$=At(i,r,S==null?void 0:S.className,R,B,O,Z0e(R,t),{[`${R}-rtl`]:M==="rtl",[`${R}-gap-${f}`]:DE(f),[`${R}-vertical`]:k}),H=Object.assign(Object.assign({},S==null?void 0:S.style),o);return l&&(H.flex=l),f&&!DE(f)&&(H.gap=f),D(Tt.createElement(v,Object.assign({ref:e,className:$,style:H},Ml(x,["justify","wrap","align"])),s))}),k5=o_e;function kE(t){const[e,n]=E.useState(t);return E.useEffect(()=>{const r=setTimeout(()=>{n(t)},t.length?0:10);return()=>{clearTimeout(r)}},[t]),e}const s_e=t=>{const{componentCls:e}=t,n=`${e}-show-help`,r=`${e}-show-help-item`;return{[n]:{transition:`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[r]:{overflow:"hidden",transition:`height ${t.motionDurationSlow} ${t.motionEaseInOut},
                     opacity ${t.motionDurationSlow} ${t.motionEaseInOut},
                     transform ${t.motionDurationSlow} ${t.motionEaseInOut} !important`,[`&${r}-appear, &${r}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${r}-leave-active`]:{transform:"translateY(-5px)"}}}}},a_e=t=>({legend:{display:"block",width:"100%",marginBottom:t.marginLG,padding:0,color:t.colorTextDescription,fontSize:t.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Kt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Kt(t.controlOutlineWidth)} ${t.controlOutline}`},output:{display:"block",paddingTop:15,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight}}),F5=(t,e)=>{const{formItemCls:n}=t;return{[n]:{[`${n}-label > label`]:{height:e},[`${n}-control-input`]:{minHeight:e}}}},l_e=t=>{const{componentCls:e}=t;return{[t.componentCls]:Object.assign(Object.assign(Object.assign({},ys(t)),a_e(t)),{[`${e}-text`]:{display:"inline-block",paddingInlineEnd:t.paddingSM},"&-small":Object.assign({},F5(t,t.controlHeightSM)),"&-large":Object.assign({},F5(t,t.controlHeightLG))})}},c_e=t=>{const{formItemCls:e,iconCls:n,componentCls:r,rootPrefixCls:i,antCls:o,labelRequiredMarkColor:l,labelColor:f,labelFontSize:s,labelHeight:p,labelColonMarginInlineStart:v,labelColonMarginInlineEnd:x,itemMarginBottom:S}=t;return{[e]:Object.assign(Object.assign({},ys(t)),{marginBottom:S,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${o}-row`]:{display:"none"},"&-has-warning":{[`${e}-split`]:{color:t.colorError}},"&-has-error":{[`${e}-split`]:{color:t.colorWarning}},[`${e}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:t.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:p,color:f,fontSize:s,[`> ${n}`]:{fontSize:t.fontSize,verticalAlign:"top"},[`&${e}-required:not(${e}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:t.marginXXS,color:l,fontSize:t.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${r}-hide-required-mark &`]:{display:"none"}},[`${e}-optional`]:{display:"inline-block",marginInlineStart:t.marginXXS,color:t.colorTextDescription,[`${r}-hide-required-mark &`]:{display:"none"}},[`${e}-tooltip`]:{color:t.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:t.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:v,marginInlineEnd:x},[`&${e}-no-colon::after`]:{content:'"\\a0"'}}},[`${e}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${i}-col-'"]):not([class*="' ${i}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:t.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[e]:{"&-explain, &-extra":{clear:"both",color:t.colorTextDescription,fontSize:t.fontSize,lineHeight:t.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:t.controlHeightSM,transition:`color ${t.motionDurationMid} ${t.motionEaseOut}`},"&-explain":{"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning}}},[`&-with-help ${e}-explain`]:{height:"auto",opacity:1},[`${e}-feedback-icon`]:{fontSize:t.fontSize,textAlign:"center",visibility:"visible",animationName:KD,animationDuration:t.motionDurationMid,animationTimingFunction:t.motionEaseOutBack,pointerEvents:"none","&-success":{color:t.colorSuccess},"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning},"&-validating":{color:t.colorPrimary}}})}},z5=(t,e)=>{const{formItemCls:n}=t;return{[`${e}-horizontal`]:{[`${n}-label`]:{flexGrow:0},[`${n}-control`]:{flex:"1 1 0",minWidth:0},[`${n}-label[class$='-24'], ${n}-label[class*='-24 ']`]:{[`& + ${n}-control`]:{minWidth:"unset"}}}}},u_e=t=>{const{componentCls:e,formItemCls:n,inlineItemMarginBottom:r}=t;return{[`${e}-inline`]:{display:"flex",flexWrap:"wrap",[n]:{flex:"none",marginInlineEnd:t.margin,marginBottom:r,"&-row":{flexWrap:"nowrap"},[`> ${n}-label,
        > ${n}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${n}-label`]:{flex:"none"},[`${e}-text`]:{display:"inline-block"},[`${n}-has-feedback`]:{display:"inline-block"}}}}},sc=t=>({padding:t.verticalLabelPadding,margin:t.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),UX=t=>{const{componentCls:e,formItemCls:n,rootPrefixCls:r}=t;return{[`${n} ${n}-label`]:sc(t),[`${e}:not(${e}-inline)`]:{[n]:{flexWrap:"wrap",[`${n}-label, ${n}-control`]:{[`&:not([class*=" ${r}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},d_e=t=>{const{componentCls:e,formItemCls:n,antCls:r}=t;return{[`${e}-vertical`]:{[`${n}:not(${n}-horizontal)`]:{[`${n}-row`]:{flexDirection:"column"},[`${n}-label > label`]:{height:"auto"},[`${n}-control`]:{width:"100%"},[`${n}-label,
        ${r}-col-24${n}-label,
        ${r}-col-xl-24${n}-label`]:sc(t)}},[`@media (max-width: ${Kt(t.screenXSMax)})`]:[UX(t),{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-xs-24${n}-label`]:sc(t)}}}],[`@media (max-width: ${Kt(t.screenSMMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-sm-24${n}-label`]:sc(t)}}},[`@media (max-width: ${Kt(t.screenMDMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-md-24${n}-label`]:sc(t)}}},[`@media (max-width: ${Kt(t.screenLGMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-lg-24${n}-label`]:sc(t)}}}}},f_e=t=>{const{formItemCls:e,antCls:n}=t;return{[`${e}-vertical`]:{[`${e}-row`]:{flexDirection:"column"},[`${e}-label > label`]:{height:"auto"},[`${e}-control`]:{width:"100%"}},[`${e}-vertical ${e}-label,
      ${n}-col-24${e}-label,
      ${n}-col-xl-24${e}-label`]:sc(t),[`@media (max-width: ${Kt(t.screenXSMax)})`]:[UX(t),{[e]:{[`${n}-col-xs-24${e}-label`]:sc(t)}}],[`@media (max-width: ${Kt(t.screenSMMax)})`]:{[e]:{[`${n}-col-sm-24${e}-label`]:sc(t)}},[`@media (max-width: ${Kt(t.screenMDMax)})`]:{[e]:{[`${n}-col-md-24${e}-label`]:sc(t)}},[`@media (max-width: ${Kt(t.screenLGMax)})`]:{[e]:{[`${n}-col-lg-24${e}-label`]:sc(t)}}}},h_e=t=>({labelRequiredMarkColor:t.colorError,labelColor:t.colorTextHeading,labelFontSize:t.fontSize,labelHeight:t.controlHeight,labelColonMarginInlineStart:t.marginXXS/2,labelColonMarginInlineEnd:t.marginXS,itemMarginBottom:t.marginLG,verticalLabelPadding:`0 0 ${t.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),VX=(t,e)=>$i(t,{formItemCls:`${t.componentCls}-item`,rootPrefixCls:e}),C3=Ss("Form",(t,e)=>{let{rootPrefixCls:n}=e;const r=VX(t,n);return[l_e(r),c_e(r),s_e(r),z5(r,r.componentCls),z5(r,r.formItemCls),u_e(r),d_e(r),f_e(r),$de(r),KD]},h_e,{order:-1e3}),N5=[];function eI(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof t=="string"?t:`${e}-${r}`,error:t,errorStatus:n}}const p_e=t=>{let{help:e,helpStatus:n,errors:r=N5,warnings:i=N5,className:o,fieldId:l,onVisibleChanged:f}=t;const{prefixCls:s}=E.useContext(c3),p=`${s}-item-explain`,v=_a(s),[x,S,M]=C3(s,v),P=E.useMemo(()=>d$(s),[s]),R=kE(r),D=kE(i),B=E.useMemo(()=>e!=null?[eI(e,"help",n)]:[].concat(sn(R.map((k,$)=>eI(k,"error","error",$))),sn(D.map((k,$)=>eI(k,"warning","warning",$)))),[e,n,R,D]),O={};return l&&(O.id=`${l}_help`),x(E.createElement(Wf,{motionDeadline:P.motionDeadline,motionName:`${s}-show-help`,visible:!!B.length,onVisibleChanged:f},k=>{const{className:$,style:H}=k;return E.createElement("div",Object.assign({},O,{className:At(p,$,M,v,o,S),style:H,role:"alert"}),E.createElement(DW,Object.assign({keys:B},d$(s),{motionName:`${s}-show-help-item`,component:!1}),U=>{const{key:X,error:J,errorStatus:K,className:Q,style:ce}=U;return E.createElement("div",{key:X,className:At(Q,{[`${p}-${K}`]:K}),style:ce},J)}))}))},GX=p_e,m_e=["parentNode"],g_e="form_item";function m_(t){return t===void 0||t===!1?[]:Array.isArray(t)?t:[t]}function HX(t,e){if(!t.length)return;const n=t.join("_");return e?`${e}_${n}`:m_e.includes(n)?`${g_e}_${n}`:n}function WX(t,e,n,r,i,o){let l=r;return o!==void 0?l=o:n.validating?l="validating":t.length?l="error":e.length?l="warning":(n.touched||i&&n.validated)&&(l="success"),l}function $5(t){return m_(t).join("_")}function v_e(t,e){const n=e.getFieldInstance(t),r=BH(n);if(r)return r;const i=HX(m_(t),e.__INTERNAL__.name);if(i)return document.getElementById(i)}function XX(t){const[e]=l3(),n=E.useRef({}),r=E.useMemo(()=>t??Object.assign(Object.assign({},e),{__INTERNAL__:{itemRef:i=>o=>{const l=$5(i);o?n.current[l]=o:delete n.current[l]}},scrollToField:function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=v_e(i,r);l&&Sue(l,Object.assign({scrollMode:"if-needed",block:"nearest"},o))},getFieldInstance:i=>{const o=$5(i);return n.current[o]}}),[t,e]);return[r]}var y_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const __e=(t,e)=>{const n=E.useContext(du),{getPrefixCls:r,direction:i,form:o}=E.useContext(Sr),{prefixCls:l,className:f,rootClassName:s,size:p,disabled:v=n,form:x,colon:S,labelAlign:M,labelWrap:P,labelCol:R,wrapperCol:D,hideRequiredMark:B,layout:O="horizontal",scrollToFirstError:k,requiredMark:$,onFinishFailed:H,name:U,style:X,feedbackIcons:J,variant:K}=t,Q=y_e(t,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),ce=hd(p),ge=E.useContext(cW),ae=E.useMemo(()=>$!==void 0?$:B?!1:o&&o.requiredMark!==void 0?o.requiredMark:!0,[B,$,o]),ve=S??(o==null?void 0:o.colon),Fe=r("form",l),Ae=_a(Fe),[pe,fe,xe]=C3(Fe,Ae),Re=At(Fe,`${Fe}-${O}`,{[`${Fe}-hide-required-mark`]:ae===!1,[`${Fe}-rtl`]:i==="rtl",[`${Fe}-${ce}`]:ce},xe,Ae,fe,o==null?void 0:o.className,f,s),[ke]=XX(x),{__INTERNAL__:ze}=ke;ze.name=U;const Xe=E.useMemo(()=>({name:U,labelAlign:M,labelCol:R,labelWrap:P,wrapperCol:D,vertical:O==="vertical",colon:ve,requiredMark:ae,itemRef:ze.itemRef,form:ke,feedbackIcons:J}),[U,M,R,D,O,ve,ae,ke,J]),Ne=E.useRef(null);E.useImperativeHandle(e,()=>{var Ke;return Object.assign(Object.assign({},ke),{nativeElement:(Ke=Ne.current)===null||Ke===void 0?void 0:Ke.nativeElement})});const Qe=(Ke,ot)=>{if(Ke){let St={block:"nearest"};typeof Ke=="object"&&(St=Ke),ke.scrollToField(ot,St)}},pt=Ke=>{if(H==null||H(Ke),Ke.errorFields.length){const ot=Ke.errorFields[0].name;if(k!==void 0){Qe(k,ot);return}o&&o.scrollToFirstError!==void 0&&Qe(o.scrollToFirstError,ot)}};return pe(E.createElement(T7.Provider,{value:K},E.createElement(UD,{disabled:v},E.createElement(Vb.Provider,{value:ce},E.createElement(C7,{validateMessages:ge},E.createElement(od.Provider,{value:Xe},E.createElement(Tv,Object.assign({id:U},Q,{name:U,onFinishFailed:pt,form:ke,ref:Ne,style:Object.assign(Object.assign({},o==null?void 0:o.style),X),className:Re}))))))))},b_e=E.forwardRef(__e),x_e=b_e;function w_e(t){if(typeof t=="function")return t;const e=zf(t);return e.length<=1?e[0]:e}const qX=()=>{const{status:t,errors:e=[],warnings:n=[]}=E.useContext(Ys);return{status:t,errors:e,warnings:n}};qX.Context=Ys;const S_e=qX;function E_e(t){const[e,n]=E.useState(t),r=E.useRef(null),i=E.useRef([]),o=E.useRef(!1);E.useEffect(()=>(o.current=!1,()=>{o.current=!0,gi.cancel(r.current),r.current=null}),[]);function l(f){o.current||(r.current===null&&(i.current=[],r.current=gi(()=>{r.current=null,n(s=>{let p=s;return i.current.forEach(v=>{p=v(p)}),p})})),i.current.push(f))}return[e,l]}function C_e(){const{itemRef:t}=E.useContext(od),e=E.useRef({});function n(r,i){const o=i&&typeof i=="object"&&i.ref,l=r.join("_");return(e.current.name!==l||e.current.originRef!==o)&&(e.current.name=l,e.current.originRef=o,e.current.ref=Al(t(r),o)),e.current.ref}return n}const T_e=t=>{const{formItemCls:e}=t;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${e}-control`]:{display:"flex"}}}},A_e=VD(["Form","item-item"],(t,e)=>{let{rootPrefixCls:n}=e;const r=VX(t,n);return[T_e(r)]}),M_e=t=>{const{prefixCls:e,status:n,wrapperCol:r,children:i,errors:o,warnings:l,_internalItemRender:f,extra:s,help:p,fieldId:v,marginBottom:x,onErrorVisibleChanged:S}=t,M=`${e}-item`,P=E.useContext(od),R=r||P.wrapperCol||{},D=At(`${M}-control`,R.className),B=E.useMemo(()=>Object.assign({},P),[P]);delete B.labelCol,delete B.wrapperCol;const O=E.createElement("div",{className:`${M}-control-input`},E.createElement("div",{className:`${M}-control-input-content`},i)),k=E.useMemo(()=>({prefixCls:e,status:n}),[e,n]),$=x!==null||o.length||l.length?E.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},E.createElement(c3.Provider,{value:k},E.createElement(GX,{fieldId:v,errors:o,warnings:l,help:p,helpStatus:n,className:`${M}-explain-connected`,onVisibleChanged:S})),!!x&&E.createElement("div",{style:{width:0,height:x}})):null,H={};v&&(H.id=`${v}_extra`);const U=s?E.createElement("div",Object.assign({},H,{className:`${M}-extra`}),s):null,X=f&&f.mark==="pro_table_render"&&f.render?f.render(t,{input:O,errorList:$,extra:U}):E.createElement(E.Fragment,null,O,$,U);return E.createElement(od.Provider,{value:B},E.createElement(Fh,Object.assign({},R,{className:D}),X),E.createElement(A_e,{prefixCls:e}))},P_e=M_e;var I_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function R_e(t){return t?typeof t=="object"&&!E.isValidElement(t)?t:{title:t}:null}const O_e=t=>{let{prefixCls:e,label:n,htmlFor:r,labelCol:i,labelAlign:o,colon:l,required:f,requiredMark:s,tooltip:p,vertical:v}=t;var x;const[S]=Ub("Form"),{labelAlign:M,labelCol:P,labelWrap:R,colon:D}=E.useContext(od);if(!n)return null;const B=i||P||{},O=o||M,k=`${e}-item-label`,$=At(k,O==="left"&&`${k}-left`,B.className,{[`${k}-wrap`]:!!R});let H=n;const U=l===!0||D!==!1&&l!==!1;U&&!v&&typeof n=="string"&&n.trim()&&(H=n.replace(/[:|：]\s*$/,""));const J=R_e(p);if(J){const{icon:ge=E.createElement(Dse,null)}=J,ae=I_e(J,["icon"]),ve=E.createElement(gf,Object.assign({},ae),E.cloneElement(ge,{className:`${e}-item-tooltip`,title:"",onClick:Fe=>{Fe.preventDefault()},tabIndex:null}));H=E.createElement(E.Fragment,null,H,ve)}const K=s==="optional",Q=typeof s=="function";Q?H=s(H,{required:!!f}):K&&!f&&(H=E.createElement(E.Fragment,null,H,E.createElement("span",{className:`${e}-item-optional`,title:""},(S==null?void 0:S.optional)||((x=Nf.Form)===null||x===void 0?void 0:x.optional))));const ce=At({[`${e}-item-required`]:f,[`${e}-item-required-mark-optional`]:K||Q,[`${e}-item-no-colon`]:!U});return E.createElement(Fh,Object.assign({},B,{className:$}),E.createElement("label",{htmlFor:r,className:ce,title:typeof n=="string"?n:""},H))},L_e=O_e,B_e={success:PD,warning:ID,error:$b,validating:HC};function YX(t){let{children:e,errors:n,warnings:r,hasFeedback:i,validateStatus:o,prefixCls:l,meta:f,noStyle:s}=t;const p=`${l}-item`,{feedbackIcons:v}=E.useContext(od),x=WX(n,r,f,null,!!i,o),{isFormItemInput:S,status:M,hasFeedback:P,feedbackIcon:R}=E.useContext(Ys),D=E.useMemo(()=>{var B;let O;if(i){const $=i!==!0&&i.icons||v,H=x&&((B=$==null?void 0:$({status:x,errors:n,warnings:r}))===null||B===void 0?void 0:B[x]),U=x&&B_e[x];O=H!==!1&&U?E.createElement("span",{className:At(`${p}-feedback-icon`,`${p}-feedback-icon-${x}`)},H||E.createElement(U,null)):null}const k={status:x||"",errors:n,warnings:r,hasFeedback:!!i,feedbackIcon:O,isFormItemInput:!0};return s&&(k.status=(x??M)||"",k.isFormItemInput=S,k.hasFeedback=!!(i??P),k.feedbackIcon=i!==void 0?k.feedbackIcon:R),k},[x,i,s,S,M]);return E.createElement(Ys.Provider,{value:D},e)}var D_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function k_e(t){const{prefixCls:e,className:n,rootClassName:r,style:i,help:o,errors:l,warnings:f,validateStatus:s,meta:p,hasFeedback:v,hidden:x,children:S,fieldId:M,required:P,isRequired:R,onSubItemMetaChange:D,layout:B}=t,O=D_e(t,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),k=`${e}-item`,{requiredMark:$,vertical:H}=E.useContext(od),U=H||B==="vertical",X=E.useRef(null),J=kE(l),K=kE(f),Q=o!=null,ce=!!(Q||l.length||f.length),ge=!!X.current&&YD(X.current),[ae,ve]=E.useState(null);Ji(()=>{if(ce&&X.current){const xe=getComputedStyle(X.current);ve(parseInt(xe.marginBottom,10))}},[ce,ge]);const Fe=xe=>{xe||ve(null)},pe=function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Re=xe?J:p.errors,ke=xe?K:p.warnings;return WX(Re,ke,p,"",!!v,s)}(),fe=At(k,n,r,{[`${k}-with-help`]:Q||J.length||K.length,[`${k}-has-feedback`]:pe&&v,[`${k}-has-success`]:pe==="success",[`${k}-has-warning`]:pe==="warning",[`${k}-has-error`]:pe==="error",[`${k}-is-validating`]:pe==="validating",[`${k}-hidden`]:x,[`${k}-${B}`]:B});return E.createElement("div",{className:fe,style:i,ref:X},E.createElement(ng,Object.assign({className:`${k}-row`},Ml(O,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),E.createElement(L_e,Object.assign({htmlFor:M},t,{requiredMark:$,required:P??R,prefixCls:e,vertical:U})),E.createElement(P_e,Object.assign({},t,p,{errors:J,warnings:K,prefixCls:e,status:pe,help:o,marginBottom:ae,onErrorVisibleChanged:Fe}),E.createElement(E7.Provider,{value:D},E.createElement(YX,{prefixCls:e,meta:p,errors:p.errors,warnings:p.warnings,hasFeedback:v,validateStatus:pe},S)))),!!ae&&E.createElement("div",{className:`${k}-margin-offset`,style:{marginBottom:-ae}}))}const F_e="__SPLIT__";function z_e(t,e){const n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(i=>{const o=t[i],l=e[i];return o===l||typeof o=="function"||typeof l=="function"})}const N_e=E.memo(t=>{let{children:e}=t;return e},(t,e)=>z_e(t.control,e.control)&&t.update===e.update&&t.childProps.length===e.childProps.length&&t.childProps.every((n,r)=>n===e.childProps[r]));function j5(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function $_e(t){const{name:e,noStyle:n,className:r,dependencies:i,prefixCls:o,shouldUpdate:l,rules:f,children:s,required:p,label:v,messageVariables:x,trigger:S="onChange",validateTrigger:M,hidden:P,help:R,layout:D}=t,{getPrefixCls:B}=E.useContext(Sr),{name:O}=E.useContext(od),k=w_e(s),$=typeof k=="function",H=E.useContext(E7),{validateTrigger:U}=E.useContext(gp),X=M!==void 0?M:U,J=e!=null,K=B("form",o),Q=_a(K),[ce,ge,ae]=C3(K,Q);lT();const ve=E.useContext(nb),Fe=E.useRef(),[Ae,pe]=E_e({}),[fe,xe]=mp(()=>j5()),Re=Ke=>{const ot=ve==null?void 0:ve.getKey(Ke.name);if(xe(Ke.destroy?j5():Ke,!0),n&&R!==!1&&H){let St=Ke.name;if(Ke.destroy)St=Fe.current||St;else if(ot!==void 0){const[st,rt]=ot;St=[st].concat(sn(rt)),Fe.current=St}H(Ke,St)}},ke=(Ke,ot)=>{pe(St=>{const st=Object.assign({},St),lt=[].concat(sn(Ke.name.slice(0,-1)),sn(ot)).join(F_e);return Ke.destroy?delete st[lt]:st[lt]=Ke,st})},[ze,Xe]=E.useMemo(()=>{const Ke=sn(fe.errors),ot=sn(fe.warnings);return Object.values(Ae).forEach(St=>{Ke.push.apply(Ke,sn(St.errors||[])),ot.push.apply(ot,sn(St.warnings||[]))}),[Ke,ot]},[Ae,fe.errors,fe.warnings]),Ne=C_e();function Qe(Ke,ot,St){return n&&!P?E.createElement(YX,{prefixCls:K,hasFeedback:t.hasFeedback,validateStatus:t.validateStatus,meta:fe,errors:ze,warnings:Xe,noStyle:!0},Ke):E.createElement(k_e,Object.assign({key:"row"},t,{className:At(r,ae,Q,ge),prefixCls:K,fieldId:ot,isRequired:St,errors:ze,warnings:Xe,meta:fe,onSubItemMetaChange:ke,layout:D}),Ke)}if(!J&&!$&&!i)return ce(Qe(k));let pt={};return typeof v=="string"?pt.label=v:e&&(pt.label=String(e)),x&&(pt=Object.assign(Object.assign({},pt),x)),ce(E.createElement(a3,Object.assign({},t,{messageVariables:pt,trigger:S,validateTrigger:X,onMetaChange:Re}),(Ke,ot,St)=>{const st=m_(e).length&&ot?ot.name:[],rt=HX(st,O),lt=p!==void 0?p:!!(f!=null&&f.some(wt=>{if(wt&&typeof wt=="object"&&wt.required&&!wt.warningOnly)return!0;if(typeof wt=="function"){const it=wt(St);return(it==null?void 0:it.required)&&!(it!=null&&it.warningOnly)}return!1})),Rt=Object.assign({},Ke);let bt=null;if(Array.isArray(k)&&J)bt=k;else if(!($&&(!(l||i)||J))){if(!(i&&!$&&!J))if(E.isValidElement(k)){const wt=Object.assign(Object.assign({},k.props),Rt);if(wt.id||(wt.id=rt),R||ze.length>0||Xe.length>0||t.extra){const jt=[];(R||ze.length>0)&&jt.push(`${rt}_help`),t.extra&&jt.push(`${rt}_extra`),wt["aria-describedby"]=jt.join(" ")}ze.length>0&&(wt["aria-invalid"]="true"),lt&&(wt["aria-required"]="true"),wv(k)&&(wt.ref=Ne(st,k)),new Set([].concat(sn(m_(S)),sn(m_(X)))).forEach(jt=>{wt[jt]=function(){for(var cn,rn,zt,bn,Ot,Nt=arguments.length,Jt=new Array(Nt),on=0;on<Nt;on++)Jt[on]=arguments[on];(zt=Rt[jt])===null||zt===void 0||(cn=zt).call.apply(cn,[Rt].concat(Jt)),(Ot=(bn=k.props)[jt])===null||Ot===void 0||(rn=Ot).call.apply(rn,[bn].concat(Jt))}});const Bt=[wt["aria-required"],wt["aria-invalid"],wt["aria-describedby"]];bt=E.createElement(N_e,{control:Rt,update:k,childProps:Bt},rv(k,wt))}else $&&(l||i)&&!J?bt=k(St):bt=k}return Qe(bt,rt,lt)}))}const ZX=$_e;ZX.useStatus=S_e;const j_e=ZX;var U_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const V_e=t=>{var{prefixCls:e,children:n}=t,r=U_e(t,["prefixCls","children"]);const{getPrefixCls:i}=E.useContext(Sr),o=i("form",e),l=E.useMemo(()=>({prefixCls:o,status:"error"}),[o]);return E.createElement(b7,Object.assign({},r),(f,s,p)=>E.createElement(c3.Provider,{value:l},n(f.map(v=>Object.assign(Object.assign({},v),{fieldKey:v.key})),s,{errors:p.errors,warnings:p.warnings})))},G_e=V_e;function H_e(){const{form:t}=E.useContext(od);return t}const pd=x_e;pd.Item=j_e;pd.List=G_e;pd.ErrorList=GX;pd.useForm=XX;pd.useFormInstance=H_e;pd.useWatch=S7;pd.Provider=C7;pd.create=()=>{};const ac=pd;let dl=null,Yh=t=>t(),ob=[],sb={};function U5(){const{getContainer:t,duration:e,rtl:n,maxCount:r,top:i}=sb,o=(t==null?void 0:t())||document.body;return{getContainer:()=>o,duration:e,rtl:n,maxCount:r,top:i}}const W_e=Tt.forwardRef((t,e)=>{const{messageConfig:n,sync:r}=t,{getPrefixCls:i}=E.useContext(Sr),o=sb.prefixCls||i("message"),l=E.useContext(eme),[f,s]=XW(Object.assign(Object.assign(Object.assign({},n),{prefixCls:o}),l.message));return Tt.useImperativeHandle(e,()=>{const p=Object.assign({},f);return Object.keys(p).forEach(v=>{p[v]=function(){return r(),f[v].apply(f,arguments)}}),{instance:p,sync:r}}),s}),X_e=Tt.forwardRef((t,e)=>{const[n,r]=Tt.useState(U5),i=()=>{r(U5)};Tt.useEffect(i,[]);const o=NW(),l=o.getRootPrefixCls(),f=o.getIconPrefixCls(),s=o.getTheme(),p=Tt.createElement(W_e,{ref:e,sync:i,messageConfig:n});return Tt.createElement(Cv,{prefixCls:l,iconPrefixCls:f,theme:s},o.holderRender?o.holderRender(p):p)});function ST(){if(!dl){const t=document.createDocumentFragment(),e={fragment:t};dl=e,Yh(()=>{qD(Tt.createElement(X_e,{ref:n=>{const{instance:r,sync:i}=n||{};Promise.resolve().then(()=>{!e.instance&&r&&(e.instance=r,e.sync=i,ST())})}}),t)});return}dl.instance&&(ob.forEach(t=>{const{type:e,skipped:n}=t;if(!n)switch(e){case"open":{Yh(()=>{const r=dl.instance.open(Object.assign(Object.assign({},sb),t.config));r==null||r.then(t.resolve),t.setCloseFn(r)});break}case"destroy":Yh(()=>{dl==null||dl.instance.destroy(t.key)});break;default:Yh(()=>{var r;const i=(r=dl.instance)[e].apply(r,sn(t.args));i==null||i.then(t.resolve),t.setCloseFn(i)})}}),ob=[])}function q_e(t){sb=Object.assign(Object.assign({},sb),t),Yh(()=>{var e;(e=dl==null?void 0:dl.sync)===null||e===void 0||e.call(dl)})}function Y_e(t){const e=XD(n=>{let r;const i={type:"open",config:t,resolve:n,setCloseFn:o=>{r=o}};return ob.push(i),()=>{r?Yh(()=>{r()}):i.skipped=!0}});return ST(),e}function Z_e(t,e){const n=XD(r=>{let i;const o={type:t,args:e,resolve:r,setCloseFn:l=>{i=l}};return ob.push(o),()=>{i?Yh(()=>{i()}):o.skipped=!0}});return ST(),n}const K_e=t=>{ob.push({type:"destroy",key:t}),ST()},J_e=["success","info","warning","error","loading"],Q_e={open:Y_e,destroy:K_e,config:q_e,useMessage:Zue,_InternalPanelDoNotUseOrYouWillBeFired:Uue},$u=Q_e;J_e.forEach(t=>{$u[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Z_e(t,n)}});var ebe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const tbe=t=>{const{prefixCls:e,className:n,closeIcon:r,closable:i,type:o,title:l,children:f,footer:s}=t,p=ebe(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:v}=E.useContext(Sr),x=v(),S=e||v("modal"),M=_a(x),[P,R,D]=R7(S,M),B=`${S}-confirm`;let O={};return o?O={closable:i??!1,title:"",footer:"",children:E.createElement(L7,Object.assign({},t,{prefixCls:S,confirmPrefixCls:B,rootPrefixCls:x,content:f}))}:O={closable:i??!0,title:l,footer:s!==null&&E.createElement(M7,Object.assign({},t)),children:f},P(E.createElement(p7,Object.assign({prefixCls:S,className:At(R,`${S}-pure-panel`,o&&B,o&&`${B}-${o}`,n,D,M)},p,{closeIcon:A7(S,r),closable:i},O)))},nbe=U7(tbe);function KX(t){return qb(F7(t))}const Ec=O7;Ec.useModal=Qpe;Ec.info=function(e){return qb(z7(e))};Ec.success=function(e){return qb(N7(e))};Ec.error=function(e){return qb($7(e))};Ec.warning=KX;Ec.warn=KX;Ec.confirm=function(e){return qb(j7(e))};Ec.destroyAll=function(){for(;Xh.length;){const e=Xh.pop();e&&e()}};Ec.config=qpe;Ec._InternalPanelDoNotUseOrYouWillBeFired=nbe;const rbe=Ec,ibe={lng:116.39124329043085,lat:39.906120097057055,zoom:12};var $f={},Rv={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JX=E;function Ar(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=Object.prototype.hasOwnProperty,obe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V5={},G5={};function QX(t){return da.call(G5,t)?!0:da.call(V5,t)?!1:obe.test(t)?G5[t]=!0:(V5[t]=!0,!1)}function Qs(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var xs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xs[t]=new Qs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xs[e]=new Qs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xs[t]=new Qs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xs[t]=new Qs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xs[t]=new Qs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xs[t]=new Qs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xs[t]=new Qs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xs[t]=new Qs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xs[t]=new Qs(t,5,!1,t.toLowerCase(),null,!1,!1)});var T3=/[\-:]([a-z])/g;function A3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(T3,A3);xs[e]=new Qs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(T3,A3);xs[e]=new Qs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(T3,A3);xs[e]=new Qs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xs[t]=new Qs(t,1,!1,t.toLowerCase(),null,!1,!1)});xs.xlinkHref=new Qs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xs[t]=new Qs(t,1,!1,t.toLowerCase(),null,!0,!0)});var SS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sbe=["Webkit","ms","Moz","O"];Object.keys(SS).forEach(function(t){sbe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),SS[e]=SS[t]})});var abe=/["'&<>]/;function Gs(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=abe.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var lbe=/([A-Z])/g,cbe=/^ms-/,_L=Array.isArray;function Ru(t,e){return{insertionMode:t,selectedValue:e}}function ube(t,e,n){switch(e){case"select":return Ru(1,n.value!=null?n.value:n.defaultValue);case"svg":return Ru(2,null);case"math":return Ru(3,null);case"foreignObject":return Ru(1,null);case"table":return Ru(4,null);case"thead":case"tbody":case"tfoot":return Ru(5,null);case"colgroup":return Ru(7,null);case"tr":return Ru(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Ru(1,null):t}var H5=new Map;function eq(t,e,n){if(typeof n!="object")throw Error(Ar(62));e=!0;for(var r in n)if(da.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Gs(r);i=Gs((""+i).trim())}else{o=r;var l=H5.get(o);l!==void 0||(l=Gs(o.replace(lbe,"-$1").toLowerCase().replace(cbe,"-ms-")),H5.set(o,l)),o=l,i=typeof i=="number"?i===0||da.call(SS,r)?""+i:i+"px":Gs((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function Da(t,e,n,r){switch(n){case"style":eq(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=xs.hasOwnProperty(n)?xs[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',Gs(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',Gs(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',Gs(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',Gs(r),'"')}}else if(QX(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',Gs(r),'"')}}}function ES(t,e,n){if(e!=null){if(n!=null)throw Error(Ar(60));if(typeof e!="object"||!("__html"in e))throw Error(Ar(61));e=e.__html,e!=null&&t.push(""+e)}}function dbe(t){var e="";return JX.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function tI(t,e,n,r){t.push(Hc(n));var i=n=null,o;for(o in e)if(da.call(e,o)){var l=e[o];if(l!=null)switch(o){case"children":n=l;break;case"dangerouslySetInnerHTML":i=l;break;default:Da(t,r,o,l)}}return t.push(">"),ES(t,i,n),typeof n=="string"?(t.push(Gs(n)),null):n}var fbe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,W5=new Map;function Hc(t){var e=W5.get(t);if(e===void 0){if(!fbe.test(t))throw Error(Ar(65,t));e="<"+t,W5.set(t,e)}return e}function hbe(t,e,n,r,i){switch(e){case"select":t.push(Hc("select"));var o=null,l=null;for(v in n)if(da.call(n,v)){var f=n[v];if(f!=null)switch(v){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;case"defaultValue":case"value":break;default:Da(t,r,v,f)}}return t.push(">"),ES(t,l,o),o;case"option":l=i.selectedValue,t.push(Hc("option"));var s=f=null,p=null,v=null;for(o in n)if(da.call(n,o)){var x=n[o];if(x!=null)switch(o){case"children":f=x;break;case"selected":p=x;break;case"dangerouslySetInnerHTML":v=x;break;case"value":s=x;default:Da(t,r,o,x)}}if(l!=null)if(n=s!==null?""+s:dbe(f),_L(l)){for(r=0;r<l.length;r++)if(""+l[r]===n){t.push(' selected=""');break}}else""+l===n&&t.push(' selected=""');else p&&t.push(' selected=""');return t.push(">"),ES(t,v,f),f;case"textarea":t.push(Hc("textarea")),v=l=o=null;for(f in n)if(da.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":v=s;break;case"value":o=s;break;case"defaultValue":l=s;break;case"dangerouslySetInnerHTML":throw Error(Ar(91));default:Da(t,r,f,s)}if(o===null&&l!==null&&(o=l),t.push(">"),v!=null){if(o!=null)throw Error(Ar(92));if(_L(v)&&1<v.length)throw Error(Ar(93));o=""+v}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(Gs(""+o)),null;case"input":t.push(Hc("input")),s=v=f=o=null;for(l in n)if(da.call(n,l)&&(p=n[l],p!=null))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(Ar(399,"input"));case"defaultChecked":s=p;break;case"defaultValue":f=p;break;case"checked":v=p;break;case"value":o=p;break;default:Da(t,r,l,p)}return v!==null?Da(t,r,"checked",v):s!==null&&Da(t,r,"checked",s),o!==null?Da(t,r,"value",o):f!==null&&Da(t,r,"value",f),t.push("/>"),null;case"menuitem":t.push(Hc("menuitem"));for(var S in n)if(da.call(n,S)&&(o=n[S],o!=null))switch(S){case"children":case"dangerouslySetInnerHTML":throw Error(Ar(400));default:Da(t,r,S,o)}return t.push(">"),null;case"title":t.push(Hc("title")),o=null;for(x in n)if(da.call(n,x)&&(l=n[x],l!=null))switch(x){case"children":o=l;break;case"dangerouslySetInnerHTML":throw Error(Ar(434));default:Da(t,r,x,l)}return t.push(">"),o;case"listing":case"pre":t.push(Hc(e)),l=o=null;for(s in n)if(da.call(n,s)&&(f=n[s],f!=null))switch(s){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;default:Da(t,r,s,f)}if(t.push(">"),l!=null){if(o!=null)throw Error(Ar(60));if(typeof l!="object"||!("__html"in l))throw Error(Ar(61));n=l.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Hc(e));for(var M in n)if(da.call(n,M)&&(o=n[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(Ar(399,e));default:Da(t,r,M,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return tI(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),tI(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return tI(t,n,e,r);t.push(Hc(e)),l=o=null;for(p in n)if(da.call(n,p)&&(f=n[p],f!=null))switch(p){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;case"style":eq(t,r,f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:QX(p)&&typeof f!="function"&&typeof f!="symbol"&&t.push(" ",p,'="',Gs(f),'"')}return t.push(">"),ES(t,l,o),o}}function X5(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Ar(395));return t.push(n),t.push('"></template>')}function pbe(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Ar(397))}}function mbe(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Ar(397))}}var gbe=/[<\u2028\u2029]/g;function nI(t){return JSON.stringify(t).replace(gbe,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function vbe(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function q5(t,e,n,r){return n.generateStaticMarkup?(t.push(Gs(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(Gs(e)),t=!0),t)}var g_=Object.assign,ybe=Symbol.for("react.element"),tq=Symbol.for("react.portal"),nq=Symbol.for("react.fragment"),rq=Symbol.for("react.strict_mode"),iq=Symbol.for("react.profiler"),oq=Symbol.for("react.provider"),sq=Symbol.for("react.context"),aq=Symbol.for("react.forward_ref"),lq=Symbol.for("react.suspense"),cq=Symbol.for("react.suspense_list"),uq=Symbol.for("react.memo"),M3=Symbol.for("react.lazy"),_be=Symbol.for("react.scope"),bbe=Symbol.for("react.debug_trace_mode"),xbe=Symbol.for("react.legacy_hidden"),wbe=Symbol.for("react.default_value"),Y5=Symbol.iterator;function bL(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nq:return"Fragment";case tq:return"Portal";case iq:return"Profiler";case rq:return"StrictMode";case lq:return"Suspense";case cq:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sq:return(t.displayName||"Context")+".Consumer";case oq:return(t._context.displayName||"Context")+".Provider";case aq:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uq:return e=t.displayName||null,e!==null?e:bL(t.type)||"Memo";case M3:e=t._payload,t=t._init;try{return bL(t(e))}catch{}}return null}var dq={};function Z5(t,e){if(t=t.contextTypes,!t)return dq;var n={},r;for(r in t)n[r]=e[r];return n}var Zh=null;function ET(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Ar(401))}else{if(n===null)throw Error(Ar(401));ET(t,n)}e.context._currentValue2=e.value}}function fq(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&fq(t)}function hq(t){var e=t.parent;e!==null&&hq(e),t.context._currentValue2=t.value}function pq(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Ar(402));t.depth===e.depth?ET(t,e):pq(t,e)}function mq(t,e){var n=e.parent;if(n===null)throw Error(Ar(402));t.depth===n.depth?ET(t,n):mq(t,n),e.context._currentValue2=e.value}function FE(t){var e=Zh;e!==t&&(e===null?hq(t):t===null?fq(e):e.depth===t.depth?ET(e,t):e.depth>t.depth?pq(e,t):mq(e,t),Zh=t)}var K5={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function J5(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=K5,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var l=e.contextType;if(t.context=typeof l=="object"&&l!==null?l._currentValue2:r,l=e.getDerivedStateFromProps,typeof l=="function"&&(l=l(n,i),i=l==null?i:g_({},i,l),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&K5.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,l=o.replace,o.queue=null,o.replace=!1,l&&e.length===1)t.state=e[0];else{for(o=l?e[0]:t.state,i=!0,l=l?1:0;l<e.length;l++){var f=e[l];f=typeof f=="function"?f.call(t,o,n,r):f,f!=null&&(i?(i=!1,o=g_({},o,f)):g_(o,f))}t.state=o}else o.queue=null}var Sbe={id:1,overflow:""};function xL(t,e,n){var r=t.id;t=t.overflow;var i=32-CS(r)-1;r&=~(1<<i),n+=1;var o=32-CS(e)+i;if(30<o){var l=i-i%5;return o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,{id:1<<32-CS(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var CS=Math.clz32?Math.clz32:Tbe,Ebe=Math.log,Cbe=Math.LN2;function Tbe(t){return t>>>=0,t===0?32:31-(Ebe(t)/Cbe|0)|0}function Abe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mbe=typeof Object.is=="function"?Object.is:Abe,sd=null,P3=null,TS=null,Zi=null,G0=!1,zE=!1,ab=0,vf=null,CT=0;function Nh(){if(sd===null)throw Error(Ar(321));return sd}function Q5(){if(0<CT)throw Error(Ar(312));return{memoizedState:null,queue:null,next:null}}function I3(){return Zi===null?TS===null?(G0=!1,TS=Zi=Q5()):(G0=!0,Zi=TS):Zi.next===null?(G0=!1,Zi=Zi.next=Q5()):(G0=!0,Zi=Zi.next),Zi}function R3(){P3=sd=null,zE=!1,TS=null,CT=0,Zi=vf=null}function gq(t,e){return typeof e=="function"?e(t):e}function ej(t,e,n){if(sd=Nh(),Zi=I3(),G0){var r=Zi.queue;if(e=r.dispatch,vf!==null&&(n=vf.get(r),n!==void 0)){vf.delete(r),r=Zi.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Zi.memoizedState=r,[r,e]}return[Zi.memoizedState,e]}return t=t===gq?typeof e=="function"?e():e:n!==void 0?n(e):e,Zi.memoizedState=t,t=Zi.queue={last:null,dispatch:null},t=t.dispatch=Pbe.bind(null,sd,t),[Zi.memoizedState,t]}function tj(t,e){if(sd=Nh(),Zi=I3(),e=e===void 0?null:e,Zi!==null){var n=Zi.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!Mbe(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Zi.memoizedState=[t,e],t}function Pbe(t,e,n){if(25<=CT)throw Error(Ar(301));if(t===sd)if(zE=!0,t={action:n,next:null},vf===null&&(vf=new Map),n=vf.get(e),n===void 0)vf.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function Ibe(){throw Error(Ar(394))}function vw(){}var nj={readContext:function(t){return t._currentValue2},useContext:function(t){return Nh(),t._currentValue2},useMemo:tj,useReducer:ej,useRef:function(t){sd=Nh(),Zi=I3();var e=Zi.memoizedState;return e===null?(t={current:t},Zi.memoizedState=t):e},useState:function(t){return ej(gq,t)},useInsertionEffect:vw,useLayoutEffect:function(){},useCallback:function(t,e){return tj(function(){return t},e)},useImperativeHandle:vw,useEffect:vw,useDebugValue:vw,useDeferredValue:function(t){return Nh(),t},useTransition:function(){return Nh(),[!1,Ibe]},useId:function(){var t=P3.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-CS(t)-1)).toString(32)+e;var n=AS;if(n===null)throw Error(Ar(404));return e=ab++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Nh(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Ar(407));return n()}},AS=null,rI=JX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Rbe(t){return console.error(t),null}function H0(){}function Obe(t,e,n,r,i,o,l,f,s){var p=[],v=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:v,pingedTasks:p,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?Rbe:i,onAllReady:o===void 0?H0:o,onShellReady:l===void 0?H0:l,onShellError:f===void 0?H0:f,onFatalError:s===void 0?H0:s},n=NE(e,0,null,n,!1,!1),n.parentFlushed=!0,t=O3(e,t,null,n,v,dq,null,Sbe),p.push(t),e}function O3(t,e,n,r,i,o,l,f){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var s={node:e,ping:function(){var p=t.pingedTasks;p.push(s),p.length===1&&_q(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:l,treeContext:f};return i.add(s),s}function NE(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function lb(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function $E(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function rj(t,e,n,r,i){for(sd={},P3=e,ab=0,t=n(r,i);zE;)zE=!1,ab=0,CT+=1,Zi=null,t=n(r,i);return R3(),t}function ij(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var l=e.legacyContext;if(typeof n.getChildContext!="function")r=l;else{n=n.getChildContext();for(var f in n)if(!(f in o))throw Error(Ar(108,bL(r)||"Unknown",f));r=g_({},l,n)}e.legacyContext=r,$a(t,e,i),e.legacyContext=l}else $a(t,e,i)}function oj(t,e){if(t&&t.defaultProps){e=g_({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wL(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Z5(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),J5(o,n,r,i),ij(t,e,o,n)}else{o=Z5(n,e.legacyContext),i=rj(t,e,n,r,o);var l=ab!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)J5(i,n,r,o),ij(t,e,i,n);else if(l){r=e.treeContext,e.treeContext=xL(r,1,0);try{$a(t,e,i)}finally{e.treeContext=r}}else $a(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=hbe(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,l=i.formatContext,i.formatContext=ube(l,n,r),SL(t,e,o),i.formatContext=l,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case xbe:case bbe:case rq:case iq:case nq:$a(t,e,r.children);return;case cq:$a(t,e,r.children);return;case _be:throw Error(Ar(343));case lq:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,l=new Set;var f={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:l,errorDigest:null},s=NE(t,i.chunks.length,f,i.formatContext,!1,!1);i.children.push(s),i.lastPushedText=!1;var p=NE(t,0,null,i.formatContext,!1,!1);p.parentFlushed=!0,e.blockedBoundary=f,e.blockedSegment=p;try{if(SL(t,e,r),t.responseState.generateStaticMarkup||p.lastPushedText&&p.textEmbedded&&p.chunks.push("<!-- -->"),p.status=1,jE(f,p),f.pendingTasks===0)break e}catch(v){p.status=4,f.forceClientRender=!0,f.errorDigest=lb(t,v)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=O3(t,o,n,s,l,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case aq:if(r=rj(t,e,n.render,r,i),ab!==0){n=e.treeContext,e.treeContext=xL(n,1,0);try{$a(t,e,r)}finally{e.treeContext=n}}else $a(t,e,r);return;case uq:n=n.type,r=oj(n,r),wL(t,e,n,r,i);return;case oq:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,l=Zh,Zh=r={parent:l,depth:l===null?0:l.depth+1,context:n,parentValue:o,value:r},e.context=r,$a(t,e,i),t=Zh,t===null)throw Error(Ar(403));r=t.parentValue,t.context._currentValue2=r===wbe?t.context._defaultValue:r,t=Zh=t.parent,e.context=t;return;case sq:r=r.children,r=r(n._currentValue2),$a(t,e,r);return;case M3:i=n._init,n=i(n._payload),r=oj(n,r),wL(t,e,n,r,void 0);return}throw Error(Ar(130,n==null?n:typeof n,""))}}function $a(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case ybe:wL(t,e,n.type,n.props,n.ref);return;case tq:throw Error(Ar(257));case M3:var r=n._init;n=r(n._payload),$a(t,e,n);return}if(_L(n)){sj(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=Y5&&n[Y5]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);sj(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Ar(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=q5(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=q5(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function sj(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=xL(o,r,i);try{SL(t,e,n[i])}finally{e.treeContext=o}}}function SL(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return $a(t,e,n)}catch(s){if(R3(),typeof s=="object"&&s!==null&&typeof s.then=="function"){n=s;var l=e.blockedSegment,f=NE(t,l.chunks.length,null,l.formatContext,l.lastPushedText,!0);l.children.push(f),l.lastPushedText=!1,t=O3(t,e.node,e.blockedBoundary,f,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,FE(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,FE(o),s}}function Lbe(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,yq(this,e,t)}function vq(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Ar(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return vq(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function jE(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&jE(t,n)}else t.completedSegments.push(e)}function yq(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Ar(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=H0,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&jE(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(Lbe,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(jE(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function _q(t){if(t.status!==2){var e=Zh,n=rI.current;rI.current=nj;var r=AS;AS=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var l=i[o],f=t,s=l.blockedSegment;if(s.status===0){FE(l.context);try{$a(f,l,l.node),f.responseState.generateStaticMarkup||s.lastPushedText&&s.textEmbedded&&s.chunks.push("<!-- -->"),l.abortSet.delete(l),s.status=1,yq(f,l.blockedBoundary,s)}catch(P){if(R3(),typeof P=="object"&&P!==null&&typeof P.then=="function"){var p=l.ping;P.then(p,p)}else{l.abortSet.delete(l),s.status=4;var v=l.blockedBoundary,x=P,S=lb(f,x);if(v===null?$E(f,x):(v.pendingTasks--,v.forceClientRender||(v.forceClientRender=!0,v.errorDigest=S,v.parentFlushed&&f.clientRenderedBoundaries.push(v))),f.allPendingTasks--,f.allPendingTasks===0){var M=f.onAllReady;M()}}}finally{}}}i.splice(0,o),t.destination!==null&&L3(t,t.destination)}catch(P){lb(t,P),$E(t,P)}finally{AS=r,rI.current=n,n===nj&&FE(e)}}}function yw(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var l=0;l<n.length;l++){for(i=n[l];o<i.index;o++)e.push(r[o]);i=TT(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(Ar(390))}}function TT(t,e,n){var r=n.boundary;if(r===null)return yw(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=Gs(r),e.push(r),e.push('"')),e.push("></template>")),yw(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,X5(e,t.responseState,r),yw(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),X5(e,t.responseState,r.id),yw(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Ar(391));return TT(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function aj(t,e,n){return pbe(e,t.responseState,n.formatContext,n.id),TT(t,e,n),mbe(e,n.formatContext)}function lj(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)bq(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Ar(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function bq(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Ar(392));return aj(t,e,r)}return aj(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function L3(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){TT(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var l=i[o];r=e;var f=t.responseState,s=l.id,p=l.errorDigest,v=l.errorMessage,x=l.errorComponentStack;if(r.push(f.startInlineScript),f.sentClientRenderFunction?r.push('$RX("'):(f.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),s===null)throw Error(Ar(395));if(r.push(s),r.push('"'),p||v||x){r.push(",");var S=nI(p||"");r.push(S)}if(v||x){r.push(",");var M=nI(v||"");r.push(M)}if(x){r.push(",");var P=nI(x);r.push(P)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var R=t.completedBoundaries;for(o=0;o<R.length;o++)if(!lj(t,e,R[o])){t.destination=null,o++,R.splice(0,o);return}R.splice(0,o);var D=t.partialBoundaries;for(o=0;o<D.length;o++){var B=D[o];e:{i=t,l=e;var O=B.completedSegments;for(f=0;f<O.length;f++)if(!bq(i,l,B,O[f])){f++,O.splice(0,f);var k=!1;break e}O.splice(0,f),k=!0}if(!k){t.destination=null,o++,D.splice(0,o);return}}D.splice(0,o);var $=t.completedBoundaries;for(o=0;o<$.length;o++)if(!lj(t,e,$[o])){t.destination=null,o++,$.splice(0,o);return}$.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function Bbe(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return vq(r,t,e)}),n.clear(),t.destination!==null&&L3(t,t.destination)}catch(r){lb(t,r),$E(t,r)}}function Dbe(){}function xq(t,e,n,r){var i=!1,o=null,l="",f={push:function(p){return p!==null&&(l+=p),!0},destroy:function(p){i=!0,o=p}},s=!1;if(t=Obe(t,vbe(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Dbe,void 0,function(){s=!0},void 0,void 0),_q(t),Bbe(t,r),t.status===1)t.status=2,f.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=f;try{L3(t,f)}catch(p){lb(t,p),$E(t,p)}}if(i)throw o;if(!s)throw Error(Ar(426));return l}Rv.renderToNodeStream=function(){throw Error(Ar(207))};Rv.renderToStaticMarkup=function(t,e){return xq(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Rv.renderToStaticNodeStream=function(){throw Error(Ar(208))};Rv.renderToString=function(t,e){return xq(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Rv.version="18.3.1";var B3={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wq=E;function Dr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ja=null,Ua=0;function er(t,e){if(e.length!==0)if(512<e.length)0<Ua&&(t.enqueue(new Uint8Array(ja.buffer,0,Ua)),ja=new Uint8Array(512),Ua=0),t.enqueue(e);else{var n=ja.length-Ua;n<e.length&&(n===0?t.enqueue(ja):(ja.set(e.subarray(0,n),Ua),t.enqueue(ja),e=e.subarray(n)),ja=new Uint8Array(512),Ua=0),ja.set(e,Ua),Ua+=e.length}}function ro(t,e){return er(t,e),!0}function cj(t){ja&&0<Ua&&(t.enqueue(new Uint8Array(ja.buffer,0,Ua)),ja=null,Ua=0)}var Sq=new TextEncoder;function jr(t){return Sq.encode(t)}function Ln(t){return Sq.encode(t)}function Eq(t,e){typeof t.error=="function"?t.error(e):t.close()}var fa=Object.prototype.hasOwnProperty,kbe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uj={},dj={};function Cq(t){return fa.call(dj,t)?!0:fa.call(uj,t)?!1:kbe.test(t)?dj[t]=!0:(uj[t]=!0,!1)}function ea(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ws[t]=new ea(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ws[e]=new ea(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ws[t]=new ea(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ws[t]=new ea(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ws[t]=new ea(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ws[t]=new ea(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ws[t]=new ea(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ws[t]=new ea(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ws[t]=new ea(t,5,!1,t.toLowerCase(),null,!1,!1)});var D3=/[\-:]([a-z])/g;function k3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D3,k3);ws[e]=new ea(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D3,k3);ws[e]=new ea(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D3,k3);ws[e]=new ea(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ws[t]=new ea(t,1,!1,t.toLowerCase(),null,!1,!1)});ws.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ws[t]=new ea(t,1,!1,t.toLowerCase(),null,!0,!0)});var MS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fbe=["Webkit","ms","Moz","O"];Object.keys(MS).forEach(function(t){Fbe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),MS[e]=MS[t]})});var zbe=/["'&<>]/;function ps(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=zbe.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var Nbe=/([A-Z])/g,$be=/^ms-/,EL=Array.isArray,jbe=Ln("<script>"),Ube=Ln("<\/script>"),Vbe=Ln('<script src="'),Gbe=Ln('<script type="module" src="'),fj=Ln('" async=""><\/script>'),Hbe=/(<\/|<)(s)(cript)/gi;function Wbe(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function Xbe(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?jbe:Ln('<script nonce="'+ps(e)+'">');var o=[];if(n!==void 0&&o.push(e,jr((""+n).replace(Hbe,Wbe)),Ube),r!==void 0)for(n=0;n<r.length;n++)o.push(Vbe,jr(ps(r[n])),fj);if(i!==void 0)for(r=0;r<i.length;r++)o.push(Gbe,jr(ps(i[r])),fj);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:Ln(t+"P:"),segmentPrefix:Ln(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Wc(t,e){return{insertionMode:t,selectedValue:e}}function qbe(t){return Wc(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function Ybe(t,e,n){switch(e){case"select":return Wc(1,n.value!=null?n.value:n.defaultValue);case"svg":return Wc(2,null);case"math":return Wc(3,null);case"foreignObject":return Wc(1,null);case"table":return Wc(4,null);case"thead":case"tbody":case"tfoot":return Wc(5,null);case"colgroup":return Wc(7,null);case"tr":return Wc(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Wc(1,null):t}var F3=Ln("<!-- -->");function hj(t,e,n,r){return e===""?r:(r&&t.push(F3),t.push(jr(ps(e))),!0)}var pj=new Map,Zbe=Ln(' style="'),mj=Ln(":"),Kbe=Ln(";");function Tq(t,e,n){if(typeof n!="object")throw Error(Dr(62));e=!0;for(var r in n)if(fa.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=jr(ps(r));i=jr(ps((""+i).trim()))}else{o=r;var l=pj.get(o);l!==void 0||(l=Ln(ps(o.replace(Nbe,"-$1").toLowerCase().replace($be,"-ms-"))),pj.set(o,l)),o=l,i=typeof i=="number"?i===0||fa.call(MS,r)?jr(""+i):jr(i+"px"):jr(ps((""+i).trim()))}e?(e=!1,t.push(Zbe,o,mj,i)):t.push(Kbe,o,mj,i)}}e||t.push($h)}var nf=Ln(" "),rg=Ln('="'),$h=Ln('"'),gj=Ln('=""');function ka(t,e,n,r){switch(n){case"style":Tq(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=ws.hasOwnProperty(n)?ws[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=jr(e.attributeName),e.type){case 3:r&&t.push(nf,n,gj);break;case 4:r===!0?t.push(nf,n,gj):r!==!1&&t.push(nf,n,rg,jr(ps(r)),$h);break;case 5:isNaN(r)||t.push(nf,n,rg,jr(ps(r)),$h);break;case 6:!isNaN(r)&&1<=r&&t.push(nf,n,rg,jr(ps(r)),$h);break;default:e.sanitizeURL&&(r=""+r),t.push(nf,n,rg,jr(ps(r)),$h)}}else if(Cq(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(nf,jr(n),rg,jr(ps(r)),$h)}}}var rf=Ln(">"),vj=Ln("/>");function PS(t,e,n){if(e!=null){if(n!=null)throw Error(Dr(60));if(typeof e!="object"||!("__html"in e))throw Error(Dr(61));e=e.__html,e!=null&&t.push(jr(""+e))}}function Jbe(t){var e="";return wq.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var iI=Ln(' selected=""');function oI(t,e,n,r){t.push(Xc(n));var i=n=null,o;for(o in e)if(fa.call(e,o)){var l=e[o];if(l!=null)switch(o){case"children":n=l;break;case"dangerouslySetInnerHTML":i=l;break;default:ka(t,r,o,l)}}return t.push(rf),PS(t,i,n),typeof n=="string"?(t.push(jr(ps(n))),null):n}var sI=Ln(`
`),Qbe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yj=new Map;function Xc(t){var e=yj.get(t);if(e===void 0){if(!Qbe.test(t))throw Error(Dr(65,t));e=Ln("<"+t),yj.set(t,e)}return e}var exe=Ln("<!DOCTYPE html>");function txe(t,e,n,r,i){switch(e){case"select":t.push(Xc("select"));var o=null,l=null;for(v in n)if(fa.call(n,v)){var f=n[v];if(f!=null)switch(v){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;case"defaultValue":case"value":break;default:ka(t,r,v,f)}}return t.push(rf),PS(t,l,o),o;case"option":l=i.selectedValue,t.push(Xc("option"));var s=f=null,p=null,v=null;for(o in n)if(fa.call(n,o)){var x=n[o];if(x!=null)switch(o){case"children":f=x;break;case"selected":p=x;break;case"dangerouslySetInnerHTML":v=x;break;case"value":s=x;default:ka(t,r,o,x)}}if(l!=null)if(n=s!==null?""+s:Jbe(f),EL(l)){for(r=0;r<l.length;r++)if(""+l[r]===n){t.push(iI);break}}else""+l===n&&t.push(iI);else p&&t.push(iI);return t.push(rf),PS(t,v,f),f;case"textarea":t.push(Xc("textarea")),v=l=o=null;for(f in n)if(fa.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":v=s;break;case"value":o=s;break;case"defaultValue":l=s;break;case"dangerouslySetInnerHTML":throw Error(Dr(91));default:ka(t,r,f,s)}if(o===null&&l!==null&&(o=l),t.push(rf),v!=null){if(o!=null)throw Error(Dr(92));if(EL(v)&&1<v.length)throw Error(Dr(93));o=""+v}return typeof o=="string"&&o[0]===`
`&&t.push(sI),o!==null&&t.push(jr(ps(""+o))),null;case"input":t.push(Xc("input")),s=v=f=o=null;for(l in n)if(fa.call(n,l)&&(p=n[l],p!=null))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(Dr(399,"input"));case"defaultChecked":s=p;break;case"defaultValue":f=p;break;case"checked":v=p;break;case"value":o=p;break;default:ka(t,r,l,p)}return v!==null?ka(t,r,"checked",v):s!==null&&ka(t,r,"checked",s),o!==null?ka(t,r,"value",o):f!==null&&ka(t,r,"value",f),t.push(vj),null;case"menuitem":t.push(Xc("menuitem"));for(var S in n)if(fa.call(n,S)&&(o=n[S],o!=null))switch(S){case"children":case"dangerouslySetInnerHTML":throw Error(Dr(400));default:ka(t,r,S,o)}return t.push(rf),null;case"title":t.push(Xc("title")),o=null;for(x in n)if(fa.call(n,x)&&(l=n[x],l!=null))switch(x){case"children":o=l;break;case"dangerouslySetInnerHTML":throw Error(Dr(434));default:ka(t,r,x,l)}return t.push(rf),o;case"listing":case"pre":t.push(Xc(e)),l=o=null;for(s in n)if(fa.call(n,s)&&(f=n[s],f!=null))switch(s){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;default:ka(t,r,s,f)}if(t.push(rf),l!=null){if(o!=null)throw Error(Dr(60));if(typeof l!="object"||!("__html"in l))throw Error(Dr(61));n=l.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(sI,jr(n)):t.push(jr(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(sI),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Xc(e));for(var M in n)if(fa.call(n,M)&&(o=n[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(Dr(399,e));default:ka(t,r,M,o)}return t.push(vj),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return oI(t,n,e,r);case"html":return i.insertionMode===0&&t.push(exe),oI(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return oI(t,n,e,r);t.push(Xc(e)),l=o=null;for(p in n)if(fa.call(n,p)&&(f=n[p],f!=null))switch(p){case"children":o=f;break;case"dangerouslySetInnerHTML":l=f;break;case"style":Tq(t,r,f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Cq(p)&&typeof f!="function"&&typeof f!="symbol"&&t.push(nf,jr(p),rg,jr(ps(f)),$h)}return t.push(rf),PS(t,l,o),o}}var nxe=Ln("</"),rxe=Ln(">"),ixe=Ln('<template id="'),oxe=Ln('"></template>'),sxe=Ln("<!--$-->"),axe=Ln('<!--$?--><template id="'),lxe=Ln('"></template>'),cxe=Ln("<!--$!-->"),uxe=Ln("<!--/$-->"),dxe=Ln("<template"),fxe=Ln('"'),hxe=Ln(' data-dgst="');Ln(' data-msg="');Ln(' data-stck="');var pxe=Ln("></template>");function _j(t,e,n){if(er(t,axe),n===null)throw Error(Dr(395));return er(t,n),ro(t,lxe)}var mxe=Ln('<div hidden id="'),gxe=Ln('">'),vxe=Ln("</div>"),yxe=Ln('<svg aria-hidden="true" style="display:none" id="'),_xe=Ln('">'),bxe=Ln("</svg>"),xxe=Ln('<math aria-hidden="true" style="display:none" id="'),wxe=Ln('">'),Sxe=Ln("</math>"),Exe=Ln('<table hidden id="'),Cxe=Ln('">'),Txe=Ln("</table>"),Axe=Ln('<table hidden><tbody id="'),Mxe=Ln('">'),Pxe=Ln("</tbody></table>"),Ixe=Ln('<table hidden><tr id="'),Rxe=Ln('">'),Oxe=Ln("</tr></table>"),Lxe=Ln('<table hidden><colgroup id="'),Bxe=Ln('">'),Dxe=Ln("</colgroup></table>");function kxe(t,e,n,r){switch(n.insertionMode){case 0:case 1:return er(t,mxe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,gxe);case 2:return er(t,yxe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,_xe);case 3:return er(t,xxe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,wxe);case 4:return er(t,Exe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,Cxe);case 5:return er(t,Axe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,Mxe);case 6:return er(t,Ixe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,Rxe);case 7:return er(t,Lxe),er(t,e.segmentPrefix),er(t,jr(r.toString(16))),ro(t,Bxe);default:throw Error(Dr(397))}}function Fxe(t,e){switch(e.insertionMode){case 0:case 1:return ro(t,vxe);case 2:return ro(t,bxe);case 3:return ro(t,Sxe);case 4:return ro(t,Txe);case 5:return ro(t,Pxe);case 6:return ro(t,Oxe);case 7:return ro(t,Dxe);default:throw Error(Dr(397))}}var zxe=Ln('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Nxe=Ln('$RS("'),$xe=Ln('","'),jxe=Ln('")<\/script>'),Uxe=Ln('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Vxe=Ln('$RC("'),Gxe=Ln('","'),Hxe=Ln('")<\/script>'),Wxe=Ln('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Xxe=Ln('$RX("'),qxe=Ln('"'),Yxe=Ln(")<\/script>"),aI=Ln(","),Zxe=/[<\u2028\u2029]/g;function lI(t){return JSON.stringify(t).replace(Zxe,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var v_=Object.assign,Kxe=Symbol.for("react.element"),Aq=Symbol.for("react.portal"),Mq=Symbol.for("react.fragment"),Pq=Symbol.for("react.strict_mode"),Iq=Symbol.for("react.profiler"),Rq=Symbol.for("react.provider"),Oq=Symbol.for("react.context"),Lq=Symbol.for("react.forward_ref"),Bq=Symbol.for("react.suspense"),Dq=Symbol.for("react.suspense_list"),kq=Symbol.for("react.memo"),z3=Symbol.for("react.lazy"),Jxe=Symbol.for("react.scope"),Qxe=Symbol.for("react.debug_trace_mode"),e1e=Symbol.for("react.legacy_hidden"),t1e=Symbol.for("react.default_value"),bj=Symbol.iterator;function CL(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mq:return"Fragment";case Aq:return"Portal";case Iq:return"Profiler";case Pq:return"StrictMode";case Bq:return"Suspense";case Dq:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oq:return(t.displayName||"Context")+".Consumer";case Rq:return(t._context.displayName||"Context")+".Provider";case Lq:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kq:return e=t.displayName||null,e!==null?e:CL(t.type)||"Memo";case z3:e=t._payload,t=t._init;try{return CL(t(e))}catch{}}return null}var Fq={};function xj(t,e){if(t=t.contextTypes,!t)return Fq;var n={},r;for(r in t)n[r]=e[r];return n}var Kh=null;function AT(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Dr(401))}else{if(n===null)throw Error(Dr(401));AT(t,n)}e.context._currentValue=e.value}}function zq(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&zq(t)}function Nq(t){var e=t.parent;e!==null&&Nq(e),t.context._currentValue=t.value}function $q(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(Dr(402));t.depth===e.depth?AT(t,e):$q(t,e)}function jq(t,e){var n=e.parent;if(n===null)throw Error(Dr(402));t.depth===n.depth?AT(t,n):jq(t,n),e.context._currentValue=e.value}function UE(t){var e=Kh;e!==t&&(e===null?Nq(t):t===null?zq(e):e.depth===t.depth?AT(e,t):e.depth>t.depth?$q(e,t):jq(e,t),Kh=t)}var wj={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function Sj(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=wj,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var l=e.contextType;if(t.context=typeof l=="object"&&l!==null?l._currentValue:r,l=e.getDerivedStateFromProps,typeof l=="function"&&(l=l(n,i),i=l==null?i:v_({},i,l),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&wj.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,l=o.replace,o.queue=null,o.replace=!1,l&&e.length===1)t.state=e[0];else{for(o=l?e[0]:t.state,i=!0,l=l?1:0;l<e.length;l++){var f=e[l];f=typeof f=="function"?f.call(t,o,n,r):f,f!=null&&(i?(i=!1,o=v_({},o,f)):v_(o,f))}t.state=o}else o.queue=null}var n1e={id:1,overflow:""};function TL(t,e,n){var r=t.id;t=t.overflow;var i=32-IS(r)-1;r&=~(1<<i),n+=1;var o=32-IS(e)+i;if(30<o){var l=i-i%5;return o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,{id:1<<32-IS(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var IS=Math.clz32?Math.clz32:o1e,r1e=Math.log,i1e=Math.LN2;function o1e(t){return t>>>=0,t===0?32:31-(r1e(t)/i1e|0)|0}function s1e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var a1e=typeof Object.is=="function"?Object.is:s1e,ad=null,N3=null,RS=null,Ki=null,W0=!1,VE=!1,cb=0,yf=null,MT=0;function jh(){if(ad===null)throw Error(Dr(321));return ad}function Ej(){if(0<MT)throw Error(Dr(312));return{memoizedState:null,queue:null,next:null}}function $3(){return Ki===null?RS===null?(W0=!1,RS=Ki=Ej()):(W0=!0,Ki=RS):Ki.next===null?(W0=!1,Ki=Ki.next=Ej()):(W0=!0,Ki=Ki.next),Ki}function j3(){N3=ad=null,VE=!1,RS=null,MT=0,Ki=yf=null}function Uq(t,e){return typeof e=="function"?e(t):e}function Cj(t,e,n){if(ad=jh(),Ki=$3(),W0){var r=Ki.queue;if(e=r.dispatch,yf!==null&&(n=yf.get(r),n!==void 0)){yf.delete(r),r=Ki.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Ki.memoizedState=r,[r,e]}return[Ki.memoizedState,e]}return t=t===Uq?typeof e=="function"?e():e:n!==void 0?n(e):e,Ki.memoizedState=t,t=Ki.queue={last:null,dispatch:null},t=t.dispatch=l1e.bind(null,ad,t),[Ki.memoizedState,t]}function Tj(t,e){if(ad=jh(),Ki=$3(),e=e===void 0?null:e,Ki!==null){var n=Ki.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!a1e(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Ki.memoizedState=[t,e],t}function l1e(t,e,n){if(25<=MT)throw Error(Dr(301));if(t===ad)if(VE=!0,t={action:n,next:null},yf===null&&(yf=new Map),n=yf.get(e),n===void 0)yf.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function c1e(){throw Error(Dr(394))}function _w(){}var Aj={readContext:function(t){return t._currentValue},useContext:function(t){return jh(),t._currentValue},useMemo:Tj,useReducer:Cj,useRef:function(t){ad=jh(),Ki=$3();var e=Ki.memoizedState;return e===null?(t={current:t},Ki.memoizedState=t):e},useState:function(t){return Cj(Uq,t)},useInsertionEffect:_w,useLayoutEffect:function(){},useCallback:function(t,e){return Tj(function(){return t},e)},useImperativeHandle:_w,useEffect:_w,useDebugValue:_w,useDeferredValue:function(t){return jh(),t},useTransition:function(){return jh(),[!1,c1e]},useId:function(){var t=N3.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-IS(t)-1)).toString(32)+e;var n=OS;if(n===null)throw Error(Dr(404));return e=cb++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return jh(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Dr(407));return n()}},OS=null,cI=wq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function u1e(t){return console.error(t),null}function X0(){}function d1e(t,e,n,r,i,o,l,f,s){var p=[],v=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:v,pingedTasks:p,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?u1e:i,onAllReady:o===void 0?X0:o,onShellReady:l===void 0?X0:l,onShellError:f===void 0?X0:f,onFatalError:s===void 0?X0:s},n=GE(e,0,null,n,!1,!1),n.parentFlushed=!0,t=U3(e,t,null,n,v,Fq,null,n1e),p.push(t),e}function U3(t,e,n,r,i,o,l,f){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var s={node:e,ping:function(){var p=t.pingedTasks;p.push(s),p.length===1&&Hq(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:l,treeContext:f};return i.add(s),s}function GE(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function ub(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function HE(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,Eq(t.destination,e)):(t.status=1,t.fatalError=e)}function Mj(t,e,n,r,i){for(ad={},N3=e,cb=0,t=n(r,i);VE;)VE=!1,cb=0,MT+=1,Ki=null,t=n(r,i);return j3(),t}function Pj(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var l=e.legacyContext;if(typeof n.getChildContext!="function")r=l;else{n=n.getChildContext();for(var f in n)if(!(f in o))throw Error(Dr(108,CL(r)||"Unknown",f));r=v_({},l,n)}e.legacyContext=r,Va(t,e,i),e.legacyContext=l}else Va(t,e,i)}function Ij(t,e){if(t&&t.defaultProps){e=v_({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function AL(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=xj(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),Sj(o,n,r,i),Pj(t,e,o,n)}else{o=xj(n,e.legacyContext),i=Mj(t,e,n,r,o);var l=cb!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Sj(i,n,r,o),Pj(t,e,i,n);else if(l){r=e.treeContext,e.treeContext=TL(r,1,0);try{Va(t,e,i)}finally{e.treeContext=r}}else Va(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=txe(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,l=i.formatContext,i.formatContext=Ybe(l,n,r),ML(t,e,o),i.formatContext=l,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(nxe,jr(n),rxe)}i.lastPushedText=!1}else{switch(n){case e1e:case Qxe:case Pq:case Iq:case Mq:Va(t,e,r.children);return;case Dq:Va(t,e,r.children);return;case Jxe:throw Error(Dr(343));case Bq:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,l=new Set;var f={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:l,errorDigest:null},s=GE(t,i.chunks.length,f,i.formatContext,!1,!1);i.children.push(s),i.lastPushedText=!1;var p=GE(t,0,null,i.formatContext,!1,!1);p.parentFlushed=!0,e.blockedBoundary=f,e.blockedSegment=p;try{if(ML(t,e,r),p.lastPushedText&&p.textEmbedded&&p.chunks.push(F3),p.status=1,WE(f,p),f.pendingTasks===0)break e}catch(v){p.status=4,f.forceClientRender=!0,f.errorDigest=ub(t,v)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=U3(t,o,n,s,l,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Lq:if(r=Mj(t,e,n.render,r,i),cb!==0){n=e.treeContext,e.treeContext=TL(n,1,0);try{Va(t,e,r)}finally{e.treeContext=n}}else Va(t,e,r);return;case kq:n=n.type,r=Ij(n,r),AL(t,e,n,r,i);return;case Rq:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,l=Kh,Kh=r={parent:l,depth:l===null?0:l.depth+1,context:n,parentValue:o,value:r},e.context=r,Va(t,e,i),t=Kh,t===null)throw Error(Dr(403));r=t.parentValue,t.context._currentValue=r===t1e?t.context._defaultValue:r,t=Kh=t.parent,e.context=t;return;case Oq:r=r.children,r=r(n._currentValue),Va(t,e,r);return;case z3:i=n._init,n=i(n._payload),r=Ij(n,r),AL(t,e,n,r,void 0);return}throw Error(Dr(130,n==null?n:typeof n,""))}}function Va(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Kxe:AL(t,e,n.type,n.props,n.ref);return;case Aq:throw Error(Dr(257));case z3:var r=n._init;n=r(n._payload),Va(t,e,n);return}if(EL(n)){Rj(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=bj&&n[bj]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Rj(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Dr(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=hj(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=hj(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function Rj(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=TL(o,r,i);try{ML(t,e,n[i])}finally{e.treeContext=o}}}function ML(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Va(t,e,n)}catch(s){if(j3(),typeof s=="object"&&s!==null&&typeof s.then=="function"){n=s;var l=e.blockedSegment,f=GE(t,l.chunks.length,null,l.formatContext,l.lastPushedText,!0);l.children.push(f),l.lastPushedText=!1,t=U3(t,e.node,e.blockedBoundary,f,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,UE(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,UE(o),s}}function f1e(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,Gq(this,e,t)}function Vq(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Dr(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return Vq(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function WE(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&WE(t,n)}else t.completedSegments.push(e)}function Gq(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Dr(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=X0,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&WE(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(f1e,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(WE(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function Hq(t){if(t.status!==2){var e=Kh,n=cI.current;cI.current=Aj;var r=OS;OS=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var l=i[o],f=t,s=l.blockedSegment;if(s.status===0){UE(l.context);try{Va(f,l,l.node),s.lastPushedText&&s.textEmbedded&&s.chunks.push(F3),l.abortSet.delete(l),s.status=1,Gq(f,l.blockedBoundary,s)}catch(P){if(j3(),typeof P=="object"&&P!==null&&typeof P.then=="function"){var p=l.ping;P.then(p,p)}else{l.abortSet.delete(l),s.status=4;var v=l.blockedBoundary,x=P,S=ub(f,x);if(v===null?HE(f,x):(v.pendingTasks--,v.forceClientRender||(v.forceClientRender=!0,v.errorDigest=S,v.parentFlushed&&f.clientRenderedBoundaries.push(v))),f.allPendingTasks--,f.allPendingTasks===0){var M=f.onAllReady;M()}}}finally{}}}i.splice(0,o),t.destination!==null&&V3(t,t.destination)}catch(P){ub(t,P),HE(t,P)}finally{OS=r,cI.current=n,n===Aj&&UE(e)}}}function bw(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,er(e,ixe),er(e,t.placeholderPrefix),t=jr(r.toString(16)),er(e,t),ro(e,oxe);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var l=0;l<n.length;l++){for(i=n[l];o<i.index;o++)er(e,r[o]);i=PT(t,e,i)}for(;o<r.length-1;o++)er(e,r[o]);return o<r.length&&(i=ro(e,r[o])),i;default:throw Error(Dr(390))}}function PT(t,e,n){var r=n.boundary;if(r===null)return bw(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,ro(e,cxe),er(e,dxe),r&&(er(e,hxe),er(e,jr(ps(r))),er(e,fxe)),ro(e,pxe),bw(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=Ln(i.boundaryPrefix+o.toString(16)),r=r.id=i,_j(e,t.responseState,r),bw(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),_j(e,t.responseState,r.id),bw(t,e,n);else{if(ro(e,sxe),n=r.completedSegments,n.length!==1)throw Error(Dr(391));PT(t,e,n[0])}return ro(e,uxe)}function Oj(t,e,n){return kxe(e,t.responseState,n.formatContext,n.id),PT(t,e,n),Fxe(e,n.formatContext)}function Lj(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)Wq(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,er(e,t.startInlineScript),t.sentCompleteBoundaryFunction?er(e,Vxe):(t.sentCompleteBoundaryFunction=!0,er(e,Uxe)),r===null)throw Error(Dr(395));return n=jr(n.toString(16)),er(e,r),er(e,Gxe),er(e,t.segmentPrefix),er(e,n),ro(e,Hxe)}function Wq(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Dr(392));return Oj(t,e,r)}return Oj(t,e,r),t=t.responseState,er(e,t.startInlineScript),t.sentCompleteSegmentFunction?er(e,Nxe):(t.sentCompleteSegmentFunction=!0,er(e,zxe)),er(e,t.segmentPrefix),i=jr(i.toString(16)),er(e,i),er(e,$xe),er(e,t.placeholderPrefix),er(e,i),ro(e,jxe)}function V3(t,e){ja=new Uint8Array(512),Ua=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){PT(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)er(e,r[n]);n<r.length&&ro(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var l=i[o];r=e;var f=t.responseState,s=l.id,p=l.errorDigest,v=l.errorMessage,x=l.errorComponentStack;if(er(r,f.startInlineScript),f.sentClientRenderFunction?er(r,Xxe):(f.sentClientRenderFunction=!0,er(r,Wxe)),s===null)throw Error(Dr(395));er(r,s),er(r,qxe),(p||v||x)&&(er(r,aI),er(r,jr(lI(p||"")))),(v||x)&&(er(r,aI),er(r,jr(lI(v||"")))),x&&(er(r,aI),er(r,jr(lI(x)))),ro(r,Yxe)}i.splice(0,o);var S=t.completedBoundaries;for(o=0;o<S.length;o++)Lj(t,e,S[o]);S.splice(0,o),cj(e),ja=new Uint8Array(512),Ua=0;var M=t.partialBoundaries;for(o=0;o<M.length;o++){var P=M[o];e:{i=t,l=e;var R=P.completedSegments;for(f=0;f<R.length;f++)if(!Wq(i,l,P,R[f])){f++,R.splice(0,f);var D=!1;break e}R.splice(0,f),D=!0}if(!D){t.destination=null,o++,M.splice(0,o);return}}M.splice(0,o);var B=t.completedBoundaries;for(o=0;o<B.length;o++)Lj(t,e,B[o]);B.splice(0,o)}finally{cj(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function Bj(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return Vq(r,t,e)}),n.clear(),t.destination!==null&&V3(t,t.destination)}catch(r){ub(t,r),HE(t,r)}}B3.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,l=new Promise(function(v,x){o=v,i=x}),f=d1e(t,Xbe(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),qbe(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var v=new ReadableStream({type:"bytes",pull:function(x){if(f.status===1)f.status=2,Eq(x,f.fatalError);else if(f.status!==2&&f.destination===null){f.destination=x;try{V3(f,x)}catch(S){ub(f,S),HE(f,S)}}},cancel:function(){Bj(f)}},{highWaterMark:0});v.allReady=l,n(v)},function(v){l.catch(function(){}),r(v)},i);if(e&&e.signal){var s=e.signal,p=function(){Bj(f,s.reason),s.removeEventListener("abort",p)};s.addEventListener("abort",p)}Hq(f)})};B3.version="18.3.1";var Ov,Xq;Ov=Rv,Xq=B3;$f.version=Ov.version;$f.renderToString=Ov.renderToString;$f.renderToStaticMarkup=Ov.renderToStaticMarkup;$f.renderToNodeStream=Ov.renderToNodeStream;$f.renderToStaticNodeStream=Ov.renderToStaticNodeStream;$f.renderToReadableStream=Xq.renderToReadableStream;function Dj(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const qq=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),kj=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);kj&&parseFloat(kj[1]);const h1e="3.4.14";function ld(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const LS=typeof process!="object"||String(process)!=="[object process]"||process.browser,p1e=typeof window<"u"&&typeof window.orientation<"u",Fj=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Fj&&parseFloat(Fj[1]);class m1e{constructor(e,n){j(this,"name",void 0),j(this,"workerThread",void 0),j(this,"isRunning",!0),j(this,"result",void 0),j(this,"_resolve",()=>{}),j(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ld(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ld(this.isRunning),this.isRunning=!1,this._reject(e)}}let uI=class{terminate(){}};const dI=new Map;function g1e(t){ld(t.source&&!t.url||!t.source&&t.url);let e=dI.get(t.source||t.url);return e||(t.url&&(e=v1e(t.url),dI.set(t.url,e)),t.source&&(e=Yq(t.source),dI.set(t.source,e))),ld(e),e}function v1e(t){if(!t.startsWith("http"))return t;const e=y1e(t);return Yq(e)}function Yq(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function y1e(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Zq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(zj(t))r.add(t);else if(zj(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)Zq(t[i],e,r)}}return n===void 0?Array.from(r):[]}function zj(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const fI=()=>{};class PL{static isSupported(){return typeof Worker<"u"&&LS||typeof uI<"u"&&!LS}constructor(e){j(this,"name",void 0),j(this,"source",void 0),j(this,"url",void 0),j(this,"terminated",!1),j(this,"worker",void 0),j(this,"onMessage",void 0),j(this,"onError",void 0),j(this,"_loadableURL","");const{name:n,source:r,url:i}=e;ld(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=fI,this.onError=o=>console.log(o),this.worker=LS?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=fI,this.onError=fI,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||Zq(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=g1e({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new uI(r,{eval:!1})}else if(this.source)e=new uI(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class _1e{static isSupported(){return PL.isSupported()}constructor(e){j(this,"name","unnamed"),j(this,"source",void 0),j(this,"url",void 0),j(this,"maxConcurrency",1),j(this,"maxMobileConcurrency",1),j(this,"onDebug",()=>{}),j(this,"reuseWorkers",!0),j(this,"props",{}),j(this,"jobQueue",[]),j(this,"idleQueue",[]),j(this,"count",0),j(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(o,l,f)=>o.done(f),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(o,l)=>o.error(l);const i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new m1e(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new PL({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return p1e?this.maxMobileConcurrency:this.maxConcurrency}}const b1e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ju{static isSupported(){return PL.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ju._workerFarm=ju._workerFarm||new ju({}),ju._workerFarm.setProps(e),ju._workerFarm}constructor(e){j(this,"props",void 0),j(this,"workerPools",new Map),this.props={...b1e},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let o=this.workerPools.get(n);return o||(o=new _1e({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}j(ju,"_workerFarm",void 0);const x1e="latest";function w1e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let o=t.version;o==="latest"&&(o=x1e);const l=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(l,"/dist/").concat(r)}return ld(i),i}function S1e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h1e;ld(t,"no worker provided");const n=t.version;return!(!e||!n)}function E1e(t,e){return!ju.isSupported()||!LS&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function C1e(t,e,n,r,i){const o=t.id,l=w1e(t,n),s=ju.getWorkerFarm(n).getWorkerPool({name:o,url:l});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const p=await s.startJob("process-on-worker",T1e.bind(null,i));return p.postMessage("process",{input:e,options:n,context:r}),await(await p.result).result}async function T1e(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:l}=r;try{const f=await t(o,l);e.postMessage("done",{id:i,result:f})}catch(f){const s=f instanceof Error?f.message:"unknown error";e.postMessage("error",{id:i,error:s})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function A1e(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function M1e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(f=>f instanceof ArrayBuffer?new Uint8Array(f):f),i=r.reduce((f,s)=>f+s.byteLength,0),o=new Uint8Array(i);let l=0;for(const f of r)o.set(f,l),l+=f.byteLength;return o.buffer}async function P1e(t){const e=[];for await(const n of t)e.push(n);return M1e(...e)}let I1e="";const Nj={};function R1e(t){for(const e in Nj)if(t.startsWith(e)){const n=Nj[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(I1e).concat(t)),t}function O1e(t){return t&&typeof t=="object"&&t.isBuffer}function Kq(t){if(O1e(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Jq(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function L1e(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const B1e=t=>typeof t=="boolean",y_=t=>typeof t=="function",Jb=t=>t!==null&&typeof t=="object",$j=t=>Jb(t)&&t.constructor==={}.constructor,D1e=t=>t&&typeof t[Symbol.iterator]=="function",k1e=t=>t&&typeof t[Symbol.asyncIterator]=="function",Pp=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Ip=t=>typeof Blob<"u"&&t instanceof Blob,F1e=t=>t&&typeof t=="object"&&t.isBuffer,z1e=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Jb(t)&&y_(t.tee)&&y_(t.cancel)&&y_(t.getReader),N1e=t=>Jb(t)&&y_(t.read)&&y_(t.pipe)&&B1e(t.readable),Qq=t=>z1e(t)||N1e(t),$1e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,j1e=/^([-\w.]+\/[-\w.+]+)/;function U1e(t){const e=j1e.exec(t);return e?e[1]:t}function jj(t){const e=$1e.exec(t);return e?e[1]:""}const eY=/\?.*/;function V1e(t){const e=t.match(eY);return e&&e[0]}function G3(t){return t.replace(eY,"")}function IT(t){return Pp(t)?t.url:Ip(t)?t.name||"":typeof t=="string"?t:""}function H3(t){if(Pp(t)){const e=t,n=e.headers.get("content-type")||"",r=G3(e.url);return U1e(n)||jj(r)}return Ip(t)?t.type||"":typeof t=="string"?jj(t):""}function G1e(t){return Pp(t)?t.headers["content-length"]||-1:Ip(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function tY(t){if(Pp(t))return t;const e={},n=G1e(t);n>=0&&(e["content-length"]=String(n));const r=IT(t),i=H3(t);i&&(e["content-type"]=i);const o=await X1e(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));const l=new Response(t,{headers:e});return Object.defineProperty(l,"url",{value:r}),l}async function H1e(t){if(!t.ok){const e=await W1e(t);throw new Error(e)}}async function W1e(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function X1e(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var l;return r(o==null||(l=o.target)===null||l===void 0?void 0:l.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=q1e(n);return"data:base64,".concat(r)}return null}function q1e(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function Uj(t,e){if(typeof t=="string"){t=R1e(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await tY(t)}function Y1e(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Qb(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Y1e()}const xw=globalThis.window||globalThis.self||globalThis.global,x0=globalThis.process||{},nY=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Qb();function Z1e(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let K1e=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=Z1e(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function J1e(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function Q1e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}function hI(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,l=t.height*n,f=["font-size:1px;",`padding:${Math.floor(l/2)}px ${Math.floor(o/2)}px;`,`line-height:${l}px;`,`background:url(${i});`,`background-size:${o}px ${l}px;`,"color:transparent;"].join("");return[`${e} %c+`,f]}let XE;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(XE||(XE={}));const ewe=10;function Vj(t){return typeof t!="string"?t:(t=t.toUpperCase(),XE[t]||XE.WHITE)}function twe(t,e,n){return!Qb&&typeof t=="string"&&(e&&(t=`\x1B[${Vj(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${Vj(n)+ewe}m${t}\x1B[49m`)),t}function nwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const o of r){const l=i[o];typeof l=="function"&&(e.find(f=>o===f)||(i[o]=l.bind(t)))}}function qE(t,e){if(!t)throw new Error(e||"Assertion failed")}function jm(){let t;if(Qb()&&xw.performance){var e,n;t=xw==null||(e=xw.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in x0){var r;const i=x0==null||(r=x0.hrtime)===null||r===void 0?void 0:r.call(x0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Um={debug:Qb()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},rwe={enabled:!0,level:0};function pl(){}const Gj={},Hj={once:!0};let W3=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=nY,this._startTs=jm(),this._deltaTs=jm(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new K1e(`__probe-${this.id}__`,rwe),this.timeStamp(`${this.id} started`),nwe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((jm()-this._startTs).toPrecision(10))}getDelta(){return Number((jm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){qE(e,n)}warn(e){return this._getLogFunction(0,e,Um.warn,arguments,Hj)}error(e){return this._getLogFunction(0,e,Um.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,Um.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Um.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Um.debug||Um.info,arguments,Hj)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||pl,r&&[r],{tag:awe(n)}):pl}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:l=1}=e;return this._shouldLog(n||r)?Qb()?swe({image:i,message:o,scale:l}):owe():pl}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||pl)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Wj({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||pl)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=rY(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=Wj({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,qE(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=jm();const l=o.tag||o.message;if(o.once&&l)if(!Gj[l])Gj[l]=jm();else return pl;return n=iwe(this.id,o.message,o),r.bind(console,n,...o.args)}return pl}};W3.VERSION=nY;function rY(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return qE(Number.isFinite(e)&&e>=0),e}function Wj(t){const{logLevel:e,message:n}=t;t.logLevel=rY(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return qE(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function iwe(t,e,n){if(typeof e=="string"){const r=n.time?Q1e(J1e(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=twe(e,n.color,n.background)}return e}function owe(t){return console.warn("removed"),pl}function swe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const l=hI(o,n,r);console.log(...l)},o.src=e,pl}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...hI(e,n,r)),pl;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...hI(o,n,r)),o.src=e.toDataURL(),pl}return pl}function awe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Xj=new W3({id:"loaders.gl"});class lwe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class cwe{constructor(){j(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const iY={fetch:null,mimeType:void 0,nothrow:!1,log:new cwe,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:qq,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},uwe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function oY(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const sY=()=>{const t=oY();return t.globalOptions=t.globalOptions||{...iY},t.globalOptions};function dwe(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],fwe(t,n),pwe(e,t,r)}function fwe(t,e){qj(t,null,iY,uwe,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};qj(r,n.id,i,o,e)}}function qj(t,e,n,r,i){const o=e||"Top level",l=e?"".concat(e,"."):"";for(const f in t){const s=!e&&Jb(t[f]),p=f==="baseUri"&&!e,v=f==="workerUrl"&&e;if(!(f in n)&&!p&&!v){if(f in r)Xj.warn("".concat(o," loader option '").concat(l).concat(f,"' no longer supported, use '").concat(r[f],"'"))();else if(!s){const x=hwe(f,i);Xj.warn("".concat(o," loader option '").concat(l).concat(f,"' not recognized. ").concat(x))()}}}}function hwe(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const o in i.options){if(t===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const l=o.toLowerCase();(n.startsWith(l)||l.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return r}function pwe(t,e,n){const i={...t.options||{}};return mwe(i,n),i.log===null&&(i.log=new lwe),Yj(i,sY()),Yj(i,e),i}function Yj(t,e){for(const n in e)if(n in e){const r=e[n];$j(r)&&$j(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function mwe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function X3(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function q3(t){var e,n;Dj(t,"null loader"),Dj(X3(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const aY=()=>{const t=oY();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function gwe(t){const e=aY();t=Array.isArray(t)?t:[t];for(const n of t){const r=q3(n);e.find(i=>r===i)||e.unshift(r)}}function vwe(){return aY()}const ywe=new W3({id:"loaders.gl"}),_we=/\.([^.]+)$/;async function bwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!lY(t))return null;let i=Zj(t,e,{...n,nothrow:!0},r);if(i)return i;if(Ip(t)&&(t=await t.slice(0,10).arrayBuffer(),i=Zj(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(cY(t));return i}function Zj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!lY(t))return null;if(e&&!Array.isArray(e))return q3(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...vwe()),wwe(i);const o=xwe(t,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(cY(t));return o}function xwe(t,e,n,r){const i=IT(t),o=H3(t),l=G3(i)||(r==null?void 0:r.url);let f=null,s="";if(n!=null&&n.mimeType&&(f=pI(e,n==null?void 0:n.mimeType),s="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),f=f||Swe(e,l),s=s||(f?"matched url ".concat(l):""),f=f||pI(e,o),s=s||(f?"matched MIME type ".concat(o):""),f=f||Cwe(e,t),s=s||(f?"matched initial data ".concat(uY(t)):""),f=f||pI(e,n==null?void 0:n.fallbackMimeType),s=s||(f?"matched fallback MIME type ".concat(o):""),s){var p;ywe.log(1,"selectLoader selected ".concat((p=f)===null||p===void 0?void 0:p.name,": ").concat(s,"."))}return f}function lY(t){return!(t instanceof Response&&t.status===204)}function cY(t){const e=IT(t),n=H3(t);let r="No valid loader found (";r+=e?"".concat(Jq(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?uY(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function wwe(t){for(const e of t)q3(e)}function Swe(t,e){const n=e&&_we.exec(e),r=n&&n[1];return r?Ewe(t,r):null}function Ewe(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function pI(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Cwe(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(Twe(e,n))return n}else if(ArrayBuffer.isView(e)){if(Kj(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Kj(e,0,n))return n;return null}function Twe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function Kj(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>Awe(t,e,n,i))}function Awe(t,e,n,r){if(r instanceof ArrayBuffer)return A1e(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=IL(t,e,r.length);return r===i;default:return!1}}function uY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?IL(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?IL(t,0,e):""}function IL(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}const Mwe=256*1024;function*Pwe(t,e){const n=(e==null?void 0:e.chunkSize)||Mwe;let r=0;const i=new TextEncoder;for(;r<t.length;){const o=Math.min(t.length-r,n),l=t.slice(r,r+o);r+=o,yield i.encode(l)}}const Iwe=256*1024;function Rwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=Iwe}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),o=new ArrayBuffer(i),l=new Uint8Array(t,r,i);new Uint8Array(o).set(l),r+=i,yield o}}()}const Owe=1024*1024;async function*Lwe(t,e){const n=(e==null?void 0:e.chunkSize)||Owe;let r=0;for(;r<t.size;){const i=r+n,o=await t.slice(r,i).arrayBuffer();r=i,yield o}}function Jj(t,e){return qq?Bwe(t,e):Dwe(t)}async function*Bwe(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:o,value:l}=await i;if(o)return;yield Kq(l)}}catch{n.releaseLock()}}async function*Dwe(t,e){for await(const n of t)yield Kq(n)}function kwe(t,e){if(typeof t=="string")return Pwe(t,e);if(t instanceof ArrayBuffer)return Rwe(t,e);if(Ip(t))return Lwe(t,e);if(Qq(t))return Jj(t,e);if(Pp(t))return Jj(t.body,e);throw new Error("makeIterator")}const dY="Cannot convert supplied data type";function Fwe(t,e,n){if(e.text&&typeof t=="string")return t;if(F1e(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(dY)}async function zwe(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return Fwe(t,e);if(Ip(t)&&(t=await tY(t)),Pp(t)){const i=t;return await H1e(i),e.binary?await i.arrayBuffer():await i.text()}if(Qq(t)&&(t=kwe(t,n)),D1e(t)||k1e(t))return P1e(t);throw new Error(dY)}function fY(t,e){const n=sY(),r=t||n;return typeof r.fetch=="function"?r.fetch:Jb(r.fetch)?i=>Uj(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:Uj}function Nwe(t,e,n){if(n)return n;const r={fetch:fY(e,t),...t};if(r.url){const i=G3(r.url);r.baseUrl=i,r.queryString=V1e(r.url),r.filename=Jq(i),r.baseUrl=L1e(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function $we(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function Y3(t,e,n,r){ld(!r||typeof r=="object"),e&&!Array.isArray(e)&&!X3(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=IT(t),l=$we(e,r),f=await bwe(t,l,n);return f?(n=dwe(n,f,l,i),r=Nwe({url:i,parse:Y3,loaders:l},n,r||null),await jwe(f,t,n,r)):null}async function jwe(t,e,n,r){if(S1e(t),Pp(e)){const i=e,{ok:o,redirected:l,status:f,statusText:s,type:p,url:v}=i,x=Object.fromEntries(i.headers.entries());r.response={headers:x,ok:o,redirected:l,status:f,statusText:s,type:p,url:v}}if(e=await zwe(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(E1e(t,n))return await C1e(t,e,n,r,Y3);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw ld(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function YE(t,e,n,r){!Array.isArray(e)&&!X3(e)&&(n=e,e=void 0);const i=fY(n);let o=t;return typeof t=="string"&&(o=await i(t)),Ip(t)&&(o=await i(t)),await Y3(o,e,n)}const Uwe="3.4.15";function hY(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const pY=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Qj=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Qj&&parseFloat(Qj[1]);const{_parseImageNode:Vwe}=globalThis,RL=typeof Image<"u",OL=typeof ImageBitmap<"u",Gwe=!!Vwe,LL=pY?!0:Gwe;function Hwe(t){switch(t){case"auto":return OL||RL||LL;case"imagebitmap":return OL;case"image":return RL;case"data":return LL;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function Wwe(){if(OL)return"imagebitmap";if(RL)return"image";if(LL)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Xwe(t){const e=Ywe(t);if(!e)throw new Error("Not an image");return e}function qwe(t){switch(Xwe(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Ywe(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const Zwe=/^data:image\/svg\+xml/,Kwe=/\.svg((\?|#).*)?$/;function Z3(t){return t&&(Zwe.test(t)||Kwe.test(t))}function Jwe(t,e){if(Z3(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return mY(t,e)}function mY(t,e){if(Z3(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function gY(t,e,n){const r=Jwe(t,n),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return await Qwe(o||r,e)}finally{o&&i.revokeObjectURL(o)}}async function Qwe(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=o=>i(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){i(o)}})}const eSe={};let e6=!0;async function tSe(t,e,n){let r;Z3(n)?r=await gY(t,e,n):r=mY(t,n);const i=e&&e.imagebitmap;return await nSe(r,i)}async function nSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((rSe(e)||!e6)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),e6=!1}return await createImageBitmap(t)}function rSe(t){for(const e in t||eSe)return!1;return!0}function iSe(t){return!lSe(t,"ftyp",4)||!(t[8]&96)?null:oSe(t)}function oSe(t){switch(sSe(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function sSe(t,e,n){return String.fromCharCode(...t.slice(e,n))}function aSe(t){return[...t].map(e=>e.charCodeAt(0))}function lSe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=aSe(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const Kc=!1,__=!0;function K3(t){const e=ex(t);return uSe(e)||hSe(e)||dSe(e)||fSe(e)||cSe(e)}function cSe(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=iSe(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function uSe(t){const e=ex(t);return e.byteLength>=24&&e.getUint32(0,Kc)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Kc),height:e.getUint32(20,Kc)}:null}function dSe(t){const e=ex(t);return e.byteLength>=10&&e.getUint32(0,Kc)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,__),height:e.getUint16(8,__)}:null}function fSe(t){const e=ex(t);return e.byteLength>=14&&e.getUint16(0,Kc)===16973&&e.getUint32(2,__)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,__),height:e.getUint32(22,__)}:null}function hSe(t){const e=ex(t);if(!(e.byteLength>=3&&e.getUint16(0,Kc)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=pSe();let o=2;for(;o+9<e.byteLength;){const l=e.getUint16(o,Kc);if(i.has(l))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Kc),width:e.getUint16(o+7,Kc)};if(!r.has(l))return null;o+=2,o+=e.getUint16(o,Kc)}return null}function pSe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function ex(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function mSe(t,e){const{mimeType:n}=K3(t)||{},r=globalThis._parseImageNode;return hY(r),await r(t,n)}async function gSe(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:o}=n||{},l=vSe(i);let f;switch(l){case"imagebitmap":f=await tSe(t,e,o);break;case"image":f=await gY(t,e,o);break;case"data":f=await mSe(t);break;default:hY(!1)}return i==="data"&&(f=qwe(f)),f}function vSe(t){switch(t){case"auto":case"data":return Wwe();default:return Hwe(t),t}}const ySe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],_Se=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],bSe={image:{type:"auto",decode:!0}},vY={id:"image",module:"images",name:"Images",version:Uwe,mimeTypes:_Se,extensions:ySe,parse:gSe,tests:[t=>!!K3(new DataView(t))],options:bSe},mI={};function xSe(t){if(mI[t]===void 0){const e=pY?SSe(t):wSe(t);mI[t]=e}return mI[t]}function wSe(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:r=e}=globalThis;return!!n&&r.includes(t)}function SSe(t){switch(t){case"image/avif":case"image/webp":return ESe(t);default:return!0}}function ESe(t){try{return document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))===0}catch{return!1}}function yY(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Lv(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||yY()}const BS={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},ww=BS.window||BS.self||BS.global,w0=BS.process||{},_Y=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Lv();const gI=globalThis;function CSe(t){if(!t&&!Lv())return"Node";if(yY(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":gI.chrome?"Chrome":gI.safari?"Safari":gI.mozInnerScreenX?"Firefox":"Unknown"}function TSe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let ASe=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";j(this,"storage",void 0),j(this,"id",void 0),j(this,"config",void 0),this.storage=TSe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function MSe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function PSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function vI(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,l=t.height*n,f=["font-size:1px;","padding:".concat(Math.floor(l/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(l,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(l,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),f]}let ZE;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(ZE||(ZE={}));function t6(t){return typeof t=="string"?ZE[t.toUpperCase()]||ZE.WHITE:t}function ISe(t,e,n){return!Lv&&typeof t=="string"&&(e&&(e=t6(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=t6(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function RSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(o=>i===o)||(t[i]=t[i].bind(t)))}function KE(t,e){if(!t)throw new Error(e||"Assertion failed")}function Vm(){let t;if(Lv&&"performance"in ww){var e,n;t=ww==null||(e=ww.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in w0){var r;const i=w0==null||(r=w0.hrtime)===null||r===void 0?void 0:r.call(w0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Gm={debug:Lv&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},OSe={enabled:!0,level:0};function ml(){}const n6={},r6={once:!0};let bY=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};j(this,"id",void 0),j(this,"VERSION",_Y),j(this,"_startTs",Vm()),j(this,"_deltaTs",Vm()),j(this,"_storage",void 0),j(this,"userData",{}),j(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new ASe("__probe-".concat(this.id,"__"),OSe),this.timeStamp("".concat(this.id," started")),RSe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Vm()-this._startTs).toPrecision(10))}getDelta(){return Number((Vm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){KE(e,n)}warn(e){return this._getLogFunction(0,e,Gm.warn,arguments,r6)}error(e){return this._getLogFunction(0,e,Gm.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Gm.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Gm.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,Gm.debug||Gm.info,arguments,r6)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||ml,r&&[r],{tag:kSe(n)}):ml}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:l=1}=e;return this._shouldLog(n||r)?Lv?DSe({image:i,message:o,scale:l}):BSe():ml}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ml)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=i6({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ml)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=xY(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=i6({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,KE(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Vm();const l=o.tag||o.message;if(o.once)if(!n6[l])n6[l]=Vm();else return ml;return n=LSe(this.id,o.message,o),r.bind(console,n,...o.args)}return ml}};j(bY,"VERSION",_Y);function xY(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return KE(Number.isFinite(e)&&e>=0),e}function i6(t){const{logLevel:e,message:n}=t;t.logLevel=xY(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return KE(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function LSe(t,e,n){if(typeof e=="string"){const r=n.time?PSe(MSe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=ISe(e,n.color,n.background)}return e}function BSe(t){return console.warn("removed"),ml}function DSe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const l=vI(o,n,r);console.log(...l)},o.src=e,ml}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...vI(e,n,r)),ml;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...vI(o,n,r)),o.src=e.toDataURL(),ml}return ml}function kSe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Mr=new bY({id:"deck"});let BL={};function FSe(t){BL=t}function Ls(t,e,n,r){Mr.level>0&&BL[t]&&BL[t].call(null,e,n,r)}function zSe(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const NSe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:zSe,parseTextSync:JSON.parse};function $Se(){const t="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Mr.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Mr,_registerLoggers:FSe},gwe([NSe,[vY,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const jSe=$Se(),ni={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ni,"IDENTITY",{get:()=>(Mr.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const eu={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},vp={common:0,meters:1,pixels:2},o6={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function USe(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Bv(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||USe()}const DS={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Sw=DS.window||DS.self||DS.global,S0=DS.process||{},wY=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Bv();function VSe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class GSe{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";j(this,"storage",void 0),j(this,"id",void 0),j(this,"config",void 0),this.storage=VSe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function HSe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function WSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function yI(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,l=t.height*n,f=["font-size:1px;","padding:".concat(Math.floor(l/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(l,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(l,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),f]}let JE;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(JE||(JE={}));function s6(t){return typeof t=="string"?JE[t.toUpperCase()]||JE.WHITE:t}function XSe(t,e,n){return!Bv&&typeof t=="string"&&(e&&(e=s6(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=s6(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function qSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(o=>i===o)||(t[i]=t[i].bind(t)))}function QE(t,e){if(!t)throw new Error(e||"Assertion failed")}function Hm(){let t;if(Bv&&"performance"in Sw){var e,n;t=Sw==null||(e=Sw.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in S0){var r;const i=S0==null||(r=S0.hrtime)===null||r===void 0?void 0:r.call(S0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Wm={debug:Bv&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},YSe={enabled:!0,level:0};function gl(){}const a6={},l6={once:!0};class SY{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};j(this,"id",void 0),j(this,"VERSION",wY),j(this,"_startTs",Hm()),j(this,"_deltaTs",Hm()),j(this,"_storage",void 0),j(this,"userData",{}),j(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new GSe("__probe-".concat(this.id,"__"),YSe),this.timeStamp("".concat(this.id," started")),qSe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Hm()-this._startTs).toPrecision(10))}getDelta(){return Number((Hm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){QE(e,n)}warn(e){return this._getLogFunction(0,e,Wm.warn,arguments,l6)}error(e){return this._getLogFunction(0,e,Wm.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Wm.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Wm.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,Wm.debug||Wm.info,arguments,l6)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||gl,r&&[r],{tag:QSe(n)}):gl}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:l=1}=e;return this._shouldLog(n||r)?Bv?JSe({image:i,message:o,scale:l}):KSe():gl}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||gl)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=c6({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||gl)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=EY(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=c6({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,QE(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Hm();const l=o.tag||o.message;if(o.once)if(!a6[l])a6[l]=Hm();else return gl;return n=ZSe(this.id,o.message,o),r.bind(console,n,...o.args)}return gl}}j(SY,"VERSION",wY);function EY(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return QE(Number.isFinite(e)&&e>=0),e}function c6(t){const{logLevel:e,message:n}=t;t.logLevel=EY(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return QE(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function ZSe(t,e,n){if(typeof e=="string"){const r=n.time?WSe(HSe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=XSe(e,n.color,n.background)}return e}function KSe(t){return console.warn("removed"),gl}function JSe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const l=yI(o,n,r);console.log(...l)},o.src=e,gl}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...yI(e,n,r)),gl;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...yI(o,n,r)),o.src=e.toDataURL(),gl}return gl}function QSe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Hn=new SY({id:"luma.gl"});function Vs(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const eEe="Invalid WebGLRenderingContext",tEe="Requires WebGL2";function RT(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function kr(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function nEe(t){return kr(t)?t:null}function OT(t){return Vs(RT(t),eEe),t}function Ds(t){return Vs(kr(t),tEe),t}const q0={};function rEe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function iEe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function oEe(t,e){q0[t]=!0,e!==void 0&&rEe(e)}function sEe(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(q0[r]=!0);while(r!==0);for(r in q0)if(q0[r])return delete q0[r],parseInt(r,10);return 0}}const tx=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};tx.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};tx.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Rp=function(e){const n=this;this.gl=e,sEe(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const l=n.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,o);const f=l.attribs[o];return f.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const l=n.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,o);const f=l.attribs[o];return f.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,l){switch(o){case 34962:n.currentArrayBuffer=l;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=l;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,l){const s=n.currentVertexArrayObject.attribs[o];switch(l){case 34975:return s.buffer;case 34338:return s.enabled;case 34339:return s.size;case 34340:return s.stride;case 34341:return s.type;case 34922:return s.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,l,f,s,p,v){const x=n.currentVertexArrayObject;x.maxAttrib=Math.max(x.maxAttrib,o);const S=x.attribs[o];return S.buffer=n.currentArrayBuffer,S.size=l,S.type=f,S.normalized=s,S.stride=p,S.offset=v,S.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{iEe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Rp.prototype.VERTEX_ARRAY_BINDING_OES=34229;Rp.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new tx(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Rp.prototype.createVertexArrayOES=function(){const e=new tx(this);return this.vertexArrayObjects.push(e),e};Rp.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Rp.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof tx&&e.hasBeenBound&&e.ext===this)};Rp.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){oEe(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,o.elementArrayBuffer);let l=this.currentArrayBuffer;const f=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let s=0;s<=f;s++){const p=o.attribs[s],v=i?i.attribs[s]:null;if((!i||p.enabled!==v.enabled)&&(p.enabled?r.enableVertexAttribArray.call(n,s):r.disableVertexAttribArray.call(n,s)),p.enabled){let x=!1;(!i||p.buffer!==v.buffer)&&(l!==p.buffer&&(r.bindBuffer.call(n,34962,p.buffer),l=p.buffer),x=!0),(x||p.cached!==v.cached)&&r.vertexAttribPointer.call(n,s,p.size,p.type,p.normalized,p.stride,p.offset)}}this.currentArrayBuffer!==l&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function aEe(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const o=n.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Rp(this)),this.__OESVertexArrayObject))}}const u6="OES_element_index",d6="WEBGL_draw_buffers",lEe="EXT_disjoint_timer_query",cEe="EXT_disjoint_timer_query_webgl2",uEe="EXT_texture_filter_anisotropic",f6="WEBGL_debug_renderer_info",dEe=35723,fEe=4352,hEe=36795,pEe=34047,mEe=37445,gEe=37446,Yi=t=>kr(t)?void 0:0,vEe={3074:t=>kr(t)?void 0:36064,[dEe]:t=>kr(t)?void 0:fEe,35977:Yi,32937:Yi,[hEe]:(t,e)=>{const n=kr(t)?t.getExtension(cEe):t.getExtension(lEe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[mEe]:(t,e)=>{const n=t.getExtension(f6);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[gEe]:(t,e)=>{const n=t.getExtension(f6);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[pEe]:(t,e)=>{const n=t.luma.extensions[uEe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Yi,35071:Yi,37447:Yi,36063:(t,e)=>{if(!kr(t)){const n=t.getExtension(d6);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Yi,35374:Yi,35377:Yi,34852:t=>{if(!kr(t)){const e=t.getExtension(d6);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(u6)?2147483647:65535,33001:t=>t.getExtension(u6)?16777216:65535,33e3:t=>16777216,37157:Yi,35373:Yi,35657:Yi,36183:Yi,37137:Yi,34045:Yi,35978:Yi,35979:Yi,35968:Yi,35376:Yi,35375:Yi,35659:Yi,37154:Yi,35371:Yi,35658:Yi,35076:Yi,35077:Yi,35380:Yi};function yEe(t,e,n){const r=vEe[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const _Ee="OES_vertex_array_object",CY="ANGLE_instanced_arrays",bEe="WEBGL_draw_buffers",xEe="EXT_disjoint_timer_query",wEe="EXT_texture_filter_anisotropic",SEe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function EEe(t,e){return{webgl2:kr(t),ext:t.getExtension(e)}}const TY={[_Ee]:{meta:{suffix:"OES"},createVertexArray:()=>{Vs(!1,SEe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[CY]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Vs(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[bEe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Vs(!1)}},[xEe]:{meta:{suffix:"EXT"},createQuery:()=>{Vs(!1)},deleteQuery:()=>{Vs(!1)},beginQuery:()=>{Vs(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},_I={readBuffer:(t,e,n)=>{kr(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=EEe(t,CY);let l;switch(r){case 35069:l=i?void 0:!1;break;case 35070:l=!i&&!o?0:void 0;break}return l!==void 0?l:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!kr(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!kr(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,o=i[wEe];r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:yEe,hint(t,e,n,r){return e(n,r)}};function CEe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(aEe(t),TEe(t),MEe(t,TY),AEe(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=CEe;function TEe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function AEe(t,e){let{target:n,target2:r}=e;Object.keys(_I).forEach(i=>{if(typeof _I[i]=="function"){const o=t[i]?t[i].bind(t):()=>{},l=_I[i].bind(null,t,o);n[i]=l,r[i]=l}})}function MEe(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&PEe(t,{extension:n,target:t.luma,target2:t})}function PEe(t,e){let{extension:n,target:r,target2:i}=e;const o=TY[n];Vs(o);const{meta:l={}}=o,{suffix:f=""}=l,s=t.getExtension(n);for(const p of Object.keys(o)){const v="".concat(p).concat(f);let x=null;p==="meta"||typeof t[p]=="function"||(s&&typeof s[v]=="function"?x=function(){return s[v](...arguments)}:typeof o[p]=="function"&&(x=o[p].bind(r))),x&&(r[p]=x,i[p]=x)}}const J3={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Yd=(t,e,n)=>e?t.enable(n):t.disable(n),h6=(t,e,n)=>t.hint(n,e),Ia=(t,e,n)=>t.pixelStorei(n,e),IEe=(t,e)=>{const n=kr(t)?36009:36160;return t.bindFramebuffer(n,e)},REe=(t,e)=>t.bindFramebuffer(36008,e);function E0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const OEe={3042:Yd,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Yd,2885:(t,e)=>t.cullFace(e),2929:Yd,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Yd,35723:h6,36006:IEe,2886:(t,e)=>t.frontFace(e),33170:h6,2849:(t,e)=>t.lineWidth(e),32823:Yd,32824:"polygonOffset",10752:"polygonOffset",35977:Yd,32938:"sampleCoverage",32939:"sampleCoverage",3089:Yd,3088:(t,e)=>t.scissor(...e),2960:Yd,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Ia,3317:Ia,37440:Ia,37441:Ia,37443:Ia,3330:Ia,3332:Ia,3331:Ia,36010:REe,3314:Ia,32878:Ia,3316:Ia,3315:Ia,32877:Ia,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=E0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=E0(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=E0(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=E0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,l,f]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,l,f)},stencilOp:(t,e)=>{e=E0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,l,f]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,l,f)},viewport:(t,e)=>t.viewport(...e)};function To(t,e,n){return e[t]!==void 0?e[t]:n[t]}const LEe={blendEquation:(t,e,n)=>t.blendEquationSeparate(To(32777,e,n),To(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(To(32969,e,n),To(32968,e,n),To(32971,e,n),To(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(To(32824,e,n),To(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(To(32938,e,n),To(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,To(2962,e,n),To(2967,e,n),To(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,To(34816,e,n),To(36003,e,n),To(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,To(2964,e,n),To(2965,e,n),To(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,To(34817,e,n),To(34818,e,n),To(34819,e,n))},p6={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Uc=(t,e)=>t.isEnabled(e),m6={3042:Uc,2884:Uc,2929:Uc,3024:Uc,32823:Uc,32926:Uc,32928:Uc,3089:Uc,2960:Uc,35977:Uc};function AY(t){for(const e in t)return!1;return!0}function BEe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function g6(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function DEe(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var o=arguments.length,l=new Array(o),f=0;f<o;f++)l[f]=arguments[f];const{valueChanged:s,oldValue:p}=n(t.state._updateCache,...l);return s&&r(...l),p},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function kEe(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class FEe{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?NEe(e):Object.assign({},J3),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Vs(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];cd(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Vs(o!==void 0);const l=e[o],f=this.cache[o];BEe(l,f)||(n=!0,r=f,i&&!(o in i)&&(i[o]=f),this.cache[o]=l)}return{valueChanged:n,oldValue:r}}}function MY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Vs(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new FEe(t,{copyState:r}),kEe(t);for(const o in p6){const l=p6[o];DEe(t,o,l)}g6(t,"getParameter"),g6(t,"isEnabled")}return t.state.enable=n,t}function zEe(t){t.state||MY(t,{copyState:!1}),t.state.push()}function v6(t){Vs(t.state),t.state.pop()}function cd(t,e){if(Vs(RT(t),"setParameters requires a WebGL context"),AY(e))return;const n={};for(const i in e){const o=Number(i),l=OEe[i];l&&(typeof l=="string"?n[l]=!0:l(t,e[i],o))}const r=t.state&&t.state.cache;if(r)for(const i in n){const o=LEe[i];o(t,e,r)}}function NEe(t,e){if(e=e||J3,typeof e=="number"){const i=e,o=m6[i];return o?o(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const o=m6[i];r[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return r}function $Ee(t){cd(t,J3)}function gc(t,e,n){if(AY(e))return n(t);const{nocatch:r=!0}=e;zEe(t),cd(t,e);let i;if(r)i=n(t),v6(t);else try{i=n(t)}finally{v6(t)}return i}function lv(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function bI(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=lv(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return UEe(e,r,i,o,n)}function jEe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function UEe(t,e,n,r,i){const o=y6(t[0],e,n);let l=_6(t[1],e,r,i),f=y6(t[0]+1,e,n);const s=f===n-1?f:f-1;f=_6(t[1]+1,e,r,i);let p;return i?(f=f===0?f:f+1,p=l,l=f):p=f===r-1?f:f-1,{x:o,y:l,width:Math.max(s-o+1,1),height:Math.max(p-l+1,1)}}function y6(t,e,n){return Math.min(Math.round(t*e),n-1)}function _6(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Q3=Bv(),VEe=Q3&&typeof document<"u",PY={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function IY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vs(Q3,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},PY,t);const{width:e,height:n}=t;function r(f){if(t.throwOnError)throw new Error(f);return console.error(f),null}t.onError=r;let i;const{canvas:o}=t,l=XEe({canvas:o,width:e,height:n,onError:r});return i=WEe(l,t),i?(i=ek(i,t),qEe(i),i):null}function ek(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||YEe(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},PY,e);const{manageState:n,debug:r}=e;return n&&MY(t,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return Hn.log(1,...o)()}}),Q3&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Hn.level=Math.max(Hn.level,1)):Hn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function GEe(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function HEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=jEe(e.useDevicePixels);ZEe(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function WEe(t,e){const{onError:n}=e;let r=null;const i=s=>r=s.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:l=!0}=e;let f=null;return l&&(f=f||t.getContext("webgl2",e),f=f||t.getContext("experimental-webgl2",e)),o&&(f=f||t.getContext("webgl",e),f=f||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),f?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),f):n("Failed to create ".concat(l&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function XEe(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,o;return typeof e=="string"?(VEe&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function qEe(t){const e=kr(t)?"WebGL2":"WebGL1",n=GEe(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Hn.info(1,"".concat(e).concat(i," context ").concat(r))()}function YEe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function ZEe(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Hn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let l=e;const f=Math.floor(r*l),s=Math.floor(i*l);t.canvas.width=f,t.canvas.height=s,(t.drawingBufferWidth!==f||t.drawingBufferHeight!==s)&&(Hn.warn("Device pixel ratio clamped")(),l=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*l),t.canvas.height=Math.floor(i*l)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function b6(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}let x6=class{constructor(e,n){j(this,"name",void 0),j(this,"type",void 0),j(this,"sampleSize",1),j(this,"time",void 0),j(this,"count",void 0),j(this,"samples",void 0),j(this,"lastTiming",void 0),j(this,"lastSampleTime",void 0),j(this,"lastSampleCount",void 0),j(this,"_count",0),j(this,"_time",0),j(this,"_samples",0),j(this,"_startTime",0),j(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=b6(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(b6()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}},KEe=class{constructor(e){j(this,"id",void 0),j(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof x6?this.stats[n]=e:this.stats[n]=new x6(n,r)),this.stats[n]}};function RY(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function OY(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||RY()}const xI=globalThis;function JEe(t){if(!t&&!OY())return"Node";if(RY(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":xI.chrome?"Chrome":xI.safari?"Safari":xI.mozInnerScreenX?"Firefox":"Unknown"}const b_="8.5.21",QEe="set luma.log.level=1 (or higher) to trace rendering";class eCe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new KEe({id:e})),this.stats.get(e)}}const Jh=new eCe;if(globalThis.luma&&globalThis.luma.VERSION!==b_)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(b_));globalThis.luma||(OY()&&Hn.log(1,"luma.gl ".concat(b_," - ").concat(QEe))(),globalThis.luma=globalThis.luma||{VERSION:b_,version:b_,log:Hn,stats:Jh,globals:{modules:{},nodeIO:{}}});function tCe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function nCe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function In(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function wI(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return In(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Of(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const SI={};function _c(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";SI[t]=SI[t]||1;const e=SI[t]++;return"".concat(t,"-").concat(e)}function w6(t){return In(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function cv(t){let e=!0;for(const n in t){e=!1;break}return e}function LY(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(l=>{o.methodName||(o[l]=()=>{throw Hn.removed("Calling removed method ".concat(e,".").concat(l,": "),i)(),new Error(l)})})}const Xm="Resource subclass must define virtual methods";let md=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};OT(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||_c(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=wI(this.gl,e),In(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=kr(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const f=i.webgl1,s="webgl2"in i?i.webgl2:i.webgl1;return o?s:f}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},o=kr(this.gl),l={},f=n||Object.keys(i);for(const s of f){const p=i[s];if(p&&(!("webgl2"in p)||o)&&(!("extension"in p)||this.gl.getExtension(p.extension))){const x=r?Of(this.gl,s):s;l[x]=this.getParameter(s,e),r&&p.type==="GLenum"&&(l[x]=Of(this.gl,l[x]))}}return l}setParameter(e,n){e=wI(this.gl,e),In(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=kr(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=wI(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return LY(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Xm)}_deleteHandle(){throw new Error(Xm)}_bindHandle(e){throw new Error(Xm)}_getOptsFromHandle(){throw new Error(Xm)}_getParameter(e,n){throw new Error(Xm)}_setParameter(e,n){throw new Error(Xm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Jh.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Jh.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=Jh.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Jh.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const rCe="Failed to deduce GL constant from typed array";function DL(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(rCe)}}function db(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function iCe(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const l=n*i;o=o||new Uint8Array(l);for(let f=0;f<r/2;++f){const s=f*l,p=(r-f-1)*l;o.set(e.subarray(s,s+l)),e.copyWithin(s,p,p+l),e.set(o,p)}}function oCe(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),l=new Uint8Array(i*o*4);for(let f=0;f<o;f++)for(let s=0;s<i;s++)for(let p=0;p<4;p++)l[(f*i+s)*4+p]=e[(f*2*n+s*2)*4+p];return{data:l,width:i,height:o}}function kL(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const f in r)if(f in e){const p=r[f]?"".concat(t,".").concat(r[f]):"N/A";Hn.removed("".concat(t,".").concat(f),p)()}for(const f in i)if(f in e){const s=i[f];Hn.deprecated("".concat(t,".").concat(f),"".concat(t,".").concat(s))()}let l=null;for(const f in o)if(f in e){const s=o[f];Hn.deprecated("".concat(t,".").concat(f),"".concat(t,".").concat(s))(),l=l||Object.assign({},e),l[s]=e[f],delete l[f]}return l||e}const sCe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},aCe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class pa{static getBytesPerElement(e){return db(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return In(e.size),db(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new pa(sCe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return pa.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return pa.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=kL("Accessor",e,aCe),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const S6=10,BY={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},lCe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:BY},cCe={removedProps:BY};class Oi extends md{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/pa.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/pa.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=kL("Buffer",e,lCe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=kL("Buffer",e,cCe),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new pa(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,o=e.byteLength||e.length;In(n);const l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),i!==0||o!==void 0?(Ds(this.gl),this.gl.bufferSubData(this.target,r,n,i,o)):this.gl.bufferSubData(l,r,n),this.gl.bindBuffer(l,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:o}=e;const{gl:l}=this;return Ds(l),l.bindBuffer(36662,n.handle),l.bindBuffer(36663,this.handle),l.copyBufferSubData(36662,36663,r,i,o),l.bindBuffer(36662,null),l.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ds(this.gl);const o=db(this.accessor.type||5126,{clamped:!1}),l=this._getAvailableElementCount(n),f=r;let s,p;e?(p=e.length,s=p-f):(s=Math.min(l,i||l),p=f+s);const v=Math.min(l,s);return i=i||v,In(i<=v),e=e||new o(p),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(In(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(S6,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;In(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,S6),this.bytesUsed=r,this._trackAllocatedMemory(r);const o=DL(e);return In(o),this.setAccessor(new pa(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;In(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=db(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new pa(this.accessor,{type:DL(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Hn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Hn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Hn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Hn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new pa(this.accessor,e),this}}const tk={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},DY={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},kY={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function uCe(t,e){const n=tk[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=kr(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function dCe(t,e){const n=tk[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const fCe=[9729,9728],E6=globalThis.WebGLBuffer||function(){};class yp extends md{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let o=!0;return r&&(o=o&&uCe(e,r),o=o&&(!i||dCe(e,r))),o}constructor(e,n){const{id:r=_c("texture"),handle:i,target:o}=n;super(e,{id:r,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(O=>this.initialize(Object.assign({},e,{pixels:O,data:O}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:o=6408,border:l=0,recreate:f=!1,parameters:s={},pixelStore:p={},textureUnit:v=void 0}=e;n||(n=i);let{width:x,height:S,dataFormat:M,type:P,compressed:R=!1,mipmaps:D=!0}=e;const{depth:B=0}=e;return{width:x,height:S,compressed:R,dataFormat:M,type:P}=this._deduceParameters({format:o,type:P,dataFormat:M,compressed:R,data:n,width:x,height:S}),this.width=x,this.height=S,this.depth=B,this.format=o,this.type=P,this.dataFormat=M,this.border=l,this.textureUnit=v,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),D&&this._isNPOT()&&(Hn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),D=!1,this._updateForNPOT(s)),this.mipmaps=D,this.setImageData({data:n,width:x,height:S,depth:B,format:o,type:P,dataFormat:M,border:l,mipmaps:D,parameters:p,compressed:R}),D&&this.generateMipmap(),this.setParameters(s),f&&(this.data=n),r&&(this._video={video:n,parameters:s,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Hn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),gc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:o=this.format,border:l=this.border,offset:f=0,parameters:s={}}=e;let{data:p=null,type:v=this.type,width:x=this.width,height:S=this.height,dataFormat:M=this.dataFormat,compressed:P=!1}=e;p||(p=r),{type:v,dataFormat:M,compressed:P,width:x,height:S}=this._deduceParameters({format:o,type:v,dataFormat:M,compressed:P,data:p,width:x,height:S});const{gl:R}=this;R.bindTexture(this.target,this.handle);let D=null;({data:p,dataType:D}=this._getDataType({data:p,compressed:P}));let B,O=0;if(gc(this.gl,s,()=>{switch(D){case"null":R.texImage2D(n,i,o,x,S,l,M,v,p);break;case"typed-array":R.texImage2D(n,i,o,x,S,l,M,v,p,f);break;case"buffer":B=Ds(R),B.bindBuffer(35052,p.handle||p),B.texImage2D(n,i,o,x,S,l,M,v,f),B.bindBuffer(35052,null);break;case"browser-object":kr(R)?R.texImage2D(n,i,o,x,S,l,M,v,p):R.texImage2D(n,i,o,M,v,p);break;case"compressed":for(const[k,$]of p.entries())R.compressedTexImage2D(n,k,$.format,$.width,$.height,l,$.data),O+=$.levelSize;break;default:In(!1,"Unknown image data type")}}),D==="compressed")this._trackAllocatedMemory(O,"Texture");else if(p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{const k=DY[this.dataFormat]||4,$=kY[this.type]||1;this._trackAllocatedMemory(this.width*this.height*k*$,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:o=0,y:l=0,width:f=this.width,height:s=this.height,level:p=0,format:v=this.format,type:x=this.type,dataFormat:S=this.dataFormat,compressed:M=!1,offset:P=0,border:R=this.border,parameters:D={}}=e;if({type:x,dataFormat:S,compressed:M,width:f,height:s}=this._deduceParameters({format:v,type:x,dataFormat:S,compressed:M,data:i,width:f,height:s}),In(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const B=i;i=B.data,f=B.shape[0],s=B.shape[1]}i instanceof Oi&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),gc(this.gl,D,()=>{if(M)this.gl.compressedTexSubImage2D(n,p,o,l,f,s,v,i);else if(i===null)this.gl.texSubImage2D(n,p,o,l,f,s,S,x,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,p,o,l,f,s,S,x,i,P);else if(i instanceof E6){const B=Ds(this.gl);B.bindBuffer(35052,i),B.texSubImage2D(n,p,o,l,f,s,S,x,P),B.bindBuffer(35052,null)}else kr(this.gl)?Ds(this.gl).texSubImage2D(n,p,o,l,f,s,S,x,i):this.gl.texSubImage2D(n,p,o,l,S,x,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Hn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Oi?{data:n.handle,dataType:"buffer"}:n instanceof E6?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:o,dataFormat:l,type:f,compressed:s}=e;const p=tk[n];return l=l||p&&p.dataFormat,f=f||p&&p.types[0],s=s||p&&p.compressed,{width:i,height:o}=this._deduceImageSize(r,i,o),{dataFormat:l,type:f,compressed:s,width:i,height:o,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},In(i,"Could not deduced texture size"),In(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),In(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:In(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return kr(this.gl)||!this.width||!this.height?!1:!w6(this.width)||!w6(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:fCe.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let hCe="";function pCe(t,e){return In(typeof t=="string"),t=hCe+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class Zs extends yp{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return yp.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};OT(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:pCe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const FL=[34069,34070,34071,34072,34073,34074];class FY extends yp{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};OT(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:o=0,mipmapLevel:l=0}=e;return this._subImage({target:n,data:r,x:i,y:o,mipmapLevel:l})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:o,border:l=0,format:f=6408,type:s=5121}=e;const{gl:p}=this,v=i||o,x=await Promise.all(FL.map(S=>{const M=v[S];return Promise.all(Array.isArray(M)?M:[M])}));this.bind(),FL.forEach((S,M)=>{x[M].length>1&&this.opts.mipmaps!==!1&&Hn.warn("".concat(this.id," has mipmap and multiple LODs."))(),x[M].forEach((P,R)=>{n&&r?p.texImage2D(S,R,f,n,r,l,f,s,P):p.texImage2D(S,R,f,f,s,P)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:o,data:l,border:f=0,format:s=6408,type:p=5121}=e,{gl:v}=this,x=o||l;return this.bind(),x instanceof Promise?x.then(S=>this.setImageDataForFace(Object.assign({},e,{face:n,data:S,pixels:S}))):this.width||this.height?v.texImage2D(n,0,s,r,i,f,s,p,x):v.texImage2D(n,0,s,s,p,x),this}}FY.FACES=FL;class mCe extends yp{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return kr(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ds(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:o,depth:l=1,border:f=0,format:s,type:p=5121,offset:v=0,data:x,parameters:S={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),gc(this.gl,S,()=>{ArrayBuffer.isView(x)&&this.gl.texImage3D(this.target,n,r,i,o,l,f,s,p,x),x instanceof Oi&&(this.gl.bindBuffer(35052,x.handle),this.gl.texImage3D(this.target,n,r,i,o,l,f,s,p,v))}),x&&x.byteLength)this._trackAllocatedMemory(x.byteLength,"Texture");else{const M=DY[this.dataFormat]||4,P=kY[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*M*P,"Texture")}return this.loaded=!0,this}}const Ah="EXT_color_buffer_float",C6={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ah,bpp:2},33327:{gl2:Ah,bpp:4},34842:{gl2:Ah,bpp:8},33326:{gl2:Ah,bpp:4},33328:{gl2:Ah,bpp:8},34836:{gl2:Ah,bpp:16},35898:{gl2:Ah,bpp:4}};function gCe(t,e,n){const r=n[e];if(!r)return!1;const i=kr(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class Sg extends md{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||gCe(e,n,C6)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:o=0}=e;return In(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&kr(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*C6[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const vCe=256,yCe=1024,_Ce=16384,T6=6144,A6=6145,M6=6146,P6=34041,zY="clear: bad arguments";function nk(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};e&&(o.framebuffer=e);let l=0;n&&(l|=_Ce,n!==!0&&(o.clearColor=n)),r&&(l|=vCe,r!==!0&&(o.clearDepth=r)),i&&(l|=yCe,r!==!0&&(o.clearStencil=r)),In(l!==0,zY),gc(t,o,()=>{t.clear(l)})}function bCe(t){let{framebuffer:e=null,buffer:n=T6,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ds(t),gc(t,{framebuffer:e},()=>{switch(n){case T6:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case A6:t.clearBufferfv(A6,0,[i]);break;case M6:t.clearBufferiv(M6,0,[i]);break;case P6:const[o,l]=i;t.clearBufferfi(P6,0,o,l);break;default:In(!1,zY)}})}function xCe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return In(!1),0}}function LT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:l=null,sourceWidth:f,sourceHeight:s,sourceType:p}=e;const{framebuffer:v,deleteFramebuffer:x}=NY(t);In(v);const{gl:S,handle:M,attachments:P}=v;f=f||v.width,s=s||v.height,o===36064&&M===null&&(o=1028),In(P[o]),p=p||P[o].type,l=SCe(l,p,i,f,s),p=p||DL(l);const R=S.bindFramebuffer(36160,M);return S.readPixels(n,r,f,s,i,p,l),S.bindFramebuffer(36160,R||null),x&&v.delete(),l}function I6(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=LT(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=oCe({data:r,width:i,height:o}));iCe({data:r,width:i,height:o});const l=document.createElement("canvas");l.width=i,l.height=o;const f=l.getContext("2d"),s=f.createImageData(i,o);return s.data.set(r),f.putImageData(s,0,0),l.toDataURL()}function wCe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:l=6408}=n;let{targetX:f,targetY:s,targetZ:p,width:v,height:x}=n;const{framebuffer:S,deleteFramebuffer:M}=NY(t);In(S);const{gl:P,handle:R}=S,D=typeof f<"u"||typeof s<"u"||typeof p<"u";f=f||0,s=s||0,p=p||0;const B=P.bindFramebuffer(36160,R);In(e);let O=null;if(e instanceof yp&&(O=e,v=Number.isFinite(v)?v:O.width,x=Number.isFinite(x)?x:O.height,O.bind(0),e=O.target),!D)P.copyTexImage2D(e,o,l,r,i,v,x,0);else switch(e){case 3553:case 34067:P.copyTexSubImage2D(e,o,f,s,r,i,v,x);break;case 35866:case 32879:Ds(P).copyTexSubImage3D(e,o,f,s,p,r,i,v,x);break}return O&&O.unbind(),P.bindFramebuffer(36160,B||null),M&&S.delete(),O}function NY(t){return t instanceof Jo?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:OCe(t),deleteFramebuffer:!0}}function SCe(t,e,n,r,i){if(t)return t;e=e||5121;const o=db(e,{clamped:!1}),l=xCe(n);return new o(r*i*l)}const Vi={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function ECe(t){const e=new Zs(t,{format:6408,type:5126,dataFormat:6408}),n=new Jo(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const $Y={[Vi.WEBGL2]:[!1,!0],[Vi.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Vi.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Vi.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Vi.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Vi.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Vi.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Vi.FLOAT_BLEND]:["EXT_float_blend"],[Vi.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Vi.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Vi.TEXTURE_FLOAT]:["OES_texture_float",!0],[Vi.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Vi.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Vi.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Vi.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Vi.COLOR_ATTACHMENT_RGBA32F]:[ECe,"EXT_color_buffer_float"],[Vi.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Vi.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Vi.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Vi.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Vi.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Vi.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},CCe=2;function rk(t,e){return ik(t,e)}function ik(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>jY(t,n))}function TCe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in $Y)t.luma.caps[e]===void 0&&(t.luma.caps[e]=jY(t,e));return t.luma.caps}function jY(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=ACe(t,e)),t.luma.caps[e]||Hn.log(CCe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function ACe(t,e){const n=$Y[e];In(n,e);let r;const i=kr(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const o of i)r=r&&!!t.getExtension(o)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:In(!1);return r}const R6="Multiple render targets not supported";class Jo extends md{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let o=!0;return r&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(o=o&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Jo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ds(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ds(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:o=!0,depth:l=!0,stencil:f=!1,check:s=!0,readBuffer:p=void 0,drawBuffers:v=void 0}=e;if(In(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const x in i){const S=i[x];(Array.isArray(S)?S[0]:S).resize({width:n,height:r})}else i=this._createDefaultAttachments(o,l,f,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:p,drawBuffers:v}),i&&s&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:l=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:l});const{gl:f}=this,s=f.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),f.bindFramebuffer(36160,s||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return In(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Hn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(l=>{i[l]=null}),Object.assign(i,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const l in i){In(l!==void 0,"Misspelled framebuffer binding point?");const f=Number(l),s=i[f];let p=s;if(!p)this._unattach(f);else if(p instanceof Sg)this._attachRenderbuffer({attachment:f,renderbuffer:p});else if(Array.isArray(s)){const[v,x=0,S=0]=s;p=v,this._attachTexture({attachment:f,texture:v,layer:x,level:S})}else this._attachTexture({attachment:f,texture:p,layer:0,level:0});r&&p&&p.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(l=>!this.attachments[l]).forEach(l=>{delete this.attachments[l]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(PCe(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:o=[]}=e,l=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&nk(this.gl,{color:n,depth:r,stencil:i}),o.forEach((f,s)=>{bCe(this.gl,{drawBuffer:s,value:f})}),this.gl.bindFramebuffer(36160,l||null),this}readPixels(){return Hn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Hn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Hn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Hn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Hn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Hn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:o,height:l}=e;const f=Ds(this.gl),s=f.bindFramebuffer(36008,this.handle);return r===0&&i===0&&o===void 0&&l===void 0?f.invalidateFramebuffer(36008,n):f.invalidateFramebuffer(36008,n,r,i,o,l),f.bindFramebuffer(36008,s),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Of(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of r){const l=n?Of(this.gl,o):o;i[l]=this.getAttachmentParameter(e,o,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const o=Number(i),l=e?Of(this.gl,o):o;r[l]=this.getAttachmentParameters(o,e)}return r}show(){return typeof window<"u"&&window.open(I6(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Hn.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=I6(this,{targetMaxHeight:100});return Hn.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,o){let l=null;return e&&(l=l||{},l[36064]=new Zs(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(l[36064])),n&&r?(l=l||{},l[33306]=new Sg(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(l[33306])):n?(l=l||{},l[36096]=new Sg(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(l[36096])):r&&In(!1),l}_unattach(e){const n=this.attachments[e];n&&(n instanceof Sg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:o}=e;const{gl:l}=this;switch(l.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Ds(l).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:const s=MCe(i);l.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:l.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:In(!1,"Illegal texture type")}l.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=nEe(this.gl);n?n.readBuffer(e):In(e===36064||e===1029,R6),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Ds(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):In(e.length===1&&(e[0]===36064||e[0]===1029),R6)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=TCe(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function MCe(t){return t<34069?t+34069:t}function PCe(t){return(Jo.STATUS||{})[t]||"Framebuffer error ".concat(t)}const ICe=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Jo.ATTACHMENT_PARAMETERS=ICe;function RCe(t,e){In(t instanceof Zs||t instanceof FY||t instanceof mCe);const n=t.constructor,{gl:r,width:i,height:o,format:l,type:f,dataFormat:s,border:p,mipmaps:v}=t,x=Object.assign({width:i,height:o,format:l,type:f,dataFormat:s,border:p,mipmaps:v},e);return new n(r,x)}function OCe(t,e){const{gl:n,width:r,height:i,id:o}=t;return new Jo(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function kS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const LCe=35632,BCe=35633;function DCe(t){switch(t){case LCe:return"fragment";case BCe:return"vertex";default:return"unknown type"}}function kCe(t,e,n,r){const i=t.split(/\r?\n/),o={},l={},f=r||kS(e)||"(unnamed)",s="".concat(DCe(n)," shader ").concat(f);for(let v=0;v<i.length;v++){const x=i[v];if(x.length<=1)continue;const S=x.split(":"),M=S[0],P=parseInt(S[2],10);if(isNaN(P))throw new Error("GLSL compilation error in ".concat(s,": ").concat(t));M!=="WARNING"?o[P]=x:l[P]=x}const p=FCe(e);return{shaderName:s,errors:O6(o,p),warnings:O6(l,p)}}function O6(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const o=t[r+1],l=o.split(":",3),f=l[0],s=parseInt(l[1],10)||0,p=o.substring(l.join(":").length+1).trim();n+=UY("^^^ ".concat(f,": ").concat(p,`

`),s)}}return n}function FCe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((o,l)=>{const f=String(l+e),s=f.length;return UY(f,i-s)+n+o})}function UY(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function VY(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const zCe="Shader: GLSL source code must be a JavaScript string";class fb extends md{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return In(!1),"unknown"}}constructor(e,n){OT(e),In(typeof n.source=="string",zCe);const r=kS(n.source,null)||n.id||_c("unnamed ".concat(fb.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=kS(n,null);r&&(this.id=_c(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(fb.getTypeName(this.shaderType),":").concat(this.id)}getName(){return kS(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:l}=kCe(r,this.source,this.shaderType,this.id);throw Hn.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Hn.warn("GLSL compilation warnings in ".concat(i,`
`).concat(l))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class EI extends fb{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class CI extends fb{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const NCe={5126:to.bind(null,"uniform1fv",Ra,1,Os),35664:to.bind(null,"uniform2fv",Ra,2,Os),35665:to.bind(null,"uniform3fv",Ra,3,Os),35666:to.bind(null,"uniform4fv",Ra,4,Os),5124:to.bind(null,"uniform1iv",Zd,1,Os),35667:to.bind(null,"uniform2iv",Zd,2,Os),35668:to.bind(null,"uniform3iv",Zd,3,Os),35669:to.bind(null,"uniform4iv",Zd,4,Os),35670:to.bind(null,"uniform1iv",Zd,1,Os),35671:to.bind(null,"uniform2iv",Zd,2,Os),35672:to.bind(null,"uniform3iv",Zd,3,Os),35673:to.bind(null,"uniform4iv",Zd,4,Os),35674:to.bind(null,"uniformMatrix2fv",Ra,4,Ou),35675:to.bind(null,"uniformMatrix3fv",Ra,9,Ou),35676:to.bind(null,"uniformMatrix4fv",Ra,16,Ou),35678:fs,35680:fs,5125:to.bind(null,"uniform1uiv",Ew,1,Os),36294:to.bind(null,"uniform2uiv",Ew,2,Os),36295:to.bind(null,"uniform3uiv",Ew,3,Os),36296:to.bind(null,"uniform4uiv",Ew,4,Os),35685:to.bind(null,"uniformMatrix2x3fv",Ra,6,Ou),35686:to.bind(null,"uniformMatrix2x4fv",Ra,8,Ou),35687:to.bind(null,"uniformMatrix3x2fv",Ra,6,Ou),35688:to.bind(null,"uniformMatrix3x4fv",Ra,12,Ou),35689:to.bind(null,"uniformMatrix4x2fv",Ra,8,Ou),35690:to.bind(null,"uniformMatrix4x3fv",Ra,12,Ou),35678:fs,35680:fs,35679:fs,35682:fs,36289:fs,36292:fs,36293:fs,36298:fs,36299:fs,36300:fs,36303:fs,36306:fs,36307:fs,36308:fs,36311:fs},$Ce={},jCe={},UCe={},L6=[0];function ok(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(L6[0]=t,t=L6);const i=t.length;if(i%e&&Hn.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let l=0;l<i;l++)o[l]=t[l];return o}function Ra(t,e){return ok(t,e,Float32Array,$Ce)}function Zd(t,e){return ok(t,e,Int32Array,jCe)}function Ew(t,e){return ok(t,e,Uint32Array,UCe)}function B6(t,e,n){const r=NCe[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function VCe(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function GCe(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!HCe(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function HCe(t){return Array.isArray(t)||ArrayBuffer.isView(t)?XCe(t):isFinite(t)||t===!0||t===!1||t instanceof yp||t instanceof Sg?!0:t instanceof Jo?!!t.texture:!1}function WCe(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,o=n.length;i<o;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function XCe(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function fs(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function to(t,e,n,r){let i=null,o=null;return(l,f,s)=>{const p=e(s,n),v=p.length;let x=!1;if(i===null)i=new Float32Array(v),o=v,x=!0;else{In(o===v,"Uniform length cannot change.");for(let S=0;S<v;++S)if(p[S]!==i[S]){x=!0;break}}return x&&(r(l,t,f,p),i.set(p)),x}}function Os(t,e,n,r){t[e](n,r)}function Ou(t,e,n,r){t[e](n,!1,r)}const qCe=5120,YCe=5121,ZCe=5122,KCe=5123,D6=0,Cw=1,JCe=2,QCe=3,Tw=4,eTe=5,tTe=6,qo=5126,nTe=35664,rTe=35665,iTe=35666,C0=5124,oTe=35667,sTe=35668,aTe=35669,T0=5125,lTe=36294,cTe=36295,uTe=36296,dTe=35670,fTe=35671,hTe=35672,pTe=35673,mTe=35674,gTe=35675,vTe=35676,yTe=35685,_Te=35686,bTe=35687,xTe=35688,wTe=35689,STe=35690,zL={[qo]:[qo,1,"float"],[nTe]:[qo,2,"vec2"],[rTe]:[qo,3,"vec3"],[iTe]:[qo,4,"vec4"],[C0]:[C0,1,"int"],[oTe]:[C0,2,"ivec2"],[sTe]:[C0,3,"ivec3"],[aTe]:[C0,4,"ivec4"],[T0]:[T0,1,"uint"],[lTe]:[T0,2,"uvec2"],[cTe]:[T0,3,"uvec3"],[uTe]:[T0,4,"uvec4"],[dTe]:[qo,1,"bool"],[fTe]:[qo,2,"bvec2"],[hTe]:[qo,3,"bvec3"],[pTe]:[qo,4,"bvec4"],[mTe]:[qo,8,"mat2"],[yTe]:[qo,8,"mat2x3"],[_Te]:[qo,8,"mat2x4"],[gTe]:[qo,12,"mat3"],[bTe]:[qo,12,"mat3x2"],[xTe]:[qo,12,"mat3x4"],[vTe]:[qo,16,"mat4"],[wTe]:[qo,16,"mat4x2"],[STe]:[qo,16,"mat4x3"]};function ETe(t){switch(t){case D6:return D6;case Cw:return Cw;case QCe:return Cw;case JCe:return Cw;case Tw:return Tw;case eTe:return Tw;case tTe:return Tw;default:return In(!1),0}}function k6(t){const e=zL[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function GY(t,e){switch(t){case qCe:case YCe:case ZCe:case KCe:t=qo;break}for(const n in zL){const[r,i,o]=zL[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class CTe{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:o,type:l,size:f}=n.getActiveAttrib(e.handle,i),s=n.getAttribLocation(e.handle,o);s>=0&&this._addAttribute(s,o,l,f)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!kr(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:o,type:l,size:f}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,o,l,f)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(e,n,r,i){const{type:o,components:l}=k6(r),f={type:o,size:i*l};this._inferProperties(e,n,f);const s={location:e,name:n,accessor:new pa(f)};this.attributeInfos.push(s),this.attributeInfosByLocation[e]=s,this.attributeInfosByName[s.name]=s}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:o,components:l}=k6(r),f=new pa({type:o,size:i*l}),s={location:e,name:n,accessor:f};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const F6=4,TTe=35981,ATe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class HY extends md{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",ATe),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:o,bufferMode:l=TTe}=e;return this.hash=n||"",this.vs=typeof r=="string"?new EI(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new CI(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,In(this.vs instanceof EI),In(this.fs instanceof CI),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Ds(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,l)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new CTe(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:o=0,start:l,end:f,isIndexed:s=!1,indexType:p=5123,instanceCount:v=0,isInstanced:x=v>0,vertexArray:S=null,transformFeedback:M,framebuffer:P,parameters:R={},uniforms:D,samplers:B}=e;if((D||B)&&(Hn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(D||{})),Hn.priority>=n){const O=P?P.id:"default",k="mode=".concat(Of(this.gl,r)," verts=").concat(i," ")+"instances=".concat(v," indexType=").concat(Of(this.gl,p)," ")+"isInstanced=".concat(x," isIndexed=").concat(s," ")+"Framebuffer=".concat(O);Hn.log(n,k)()}return In(S),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||x&&v===0?!1:(S.bindForDraw(i,v,()=>{if(P!==void 0&&(R=Object.assign({},R,{framebuffer:P})),M){const O=ETe(r);M.begin(O)}this._bindTextures(),gc(this.gl,R,()=>{s&&x?this.gl2.drawElementsInstanced(r,i,p,o,v):s&&kr(this.gl)&&!isNaN(l)&&!isNaN(f)?this.gl2.drawRangeElements(r,l,f,i,p,o):s?this.gl.drawElements(r,i,p,o):x?this.gl2.drawArraysInstanced(r,o,i,v):this.gl.drawArrays(r,o,i)}),M&&M.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hn.priority>=2&&GCe(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let o=r,l=!1;if(o instanceof Jo&&(o=o.texture),o instanceof yp)if(l=this.uniforms[n]!==r,l){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const f=o,{textureIndex:s}=i;f.bind(s),o=s,this._textureUniforms[n]=f}else o=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(o)||l)&&WCe(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new EI({handle:i});break;case 35632:r.fs=new CI({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=_c(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Hn.time(F6,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Hn.timeEnd(F6,"linkProgram for ".concat(this._getName()))(),e.debug||Hn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=VCe(r.name);let o=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=B6(e,o,r),r.size>1)for(let l=0;l<r.size;l++)o=e.getUniformLocation(this.handle,"".concat(i,"[").concat(l,"]")),this._uniformSetters["".concat(i,"[").concat(l,"]")]=B6(e,o,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const MTe=34918,PTe=34919,ITe=35007,RTe=36795,OTe=35976,LTe=35887,BTe=36202;class eC extends md{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=kr(e),i=ik(e,Vi.TIMER_QUERY);let o=r||i;for(const l of n)switch(l){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:In(!1)}return o}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(ITe)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?BTe:LTe)}beginTransformFeedbackQuery(){return this.begin(OTe)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,PTe);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(RTe)}getResult(){return this.gl2.getQueryParameter(this.handle,MTe)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const o=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return eC.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class WY extends md{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return kr(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ds(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,cv(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:o,byteOffset:l}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Hn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,l,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof Oi?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Aw=null;function DTe(t){return(!Aw||Aw.byteLength<t)&&(Aw=new ArrayBuffer(t)),Aw}function kTe(t,e){const n=DTe(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function FTe(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,l=i*o;let f=0;for(let s=r;f<o;f++)e[s++]=n[f];for(;f<l;)f<l-f?(e.copyWithin(r+f,r,r+f),f*=2):(e.copyWithin(r+f,r,r+l-f),f=l);return e}const zTe="elements must be GL.ELEMENT_ARRAY_BUFFER";class za extends md{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?kr(e)||JEe()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new za(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return za.MAX_ATTRIBUTES=za.MAX_ATTRIBUTES||e.getParameter(34921),za.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:za._setConstantFloatArray(e,n,r);break;case Int32Array:za._setConstantIntArray(e,n,r);break;case Uint32Array:za._setConstantUintArray(e,n,r);break;default:In(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return za.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return In(!e||e.target===34963,zTe),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:o,stride:l,offset:f,normalized:s,integer:p,divisor:v}=r,{gl:x,gl2:S}=this;return e=Number(e),this.bind(()=>{x.bindBuffer(34962,n.handle),p?(In(kr(x)),S.vertexAttribIPointer(e,i,o,l,f)):x.vertexAttribPointer(e,i,o,s,l,f),x.enableVertexAttribArray(e),S.vertexAttribDivisor(e,v||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!za.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,o=r.length*e;let l=!this.buffer;if(this.buffer=this.buffer||new Oi(this.gl,i),l=l||this.buffer.reallocate(i),l=l||!this._compareConstantArrayValues(r,this.bufferValue),l){const f=kTe(n.constructor,o);FTe({target:f,source:r,start:0,count:o}),this.buffer.subData(f),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:In(!1)}}static _setConstantIntArray(e,n,r){switch(In(kr(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:In(!1)}}static _setConstantUintArray(e,n,r){switch(In(kr(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:In(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return In(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const NTe="VertexArray: attributes must be Buffers or constants (i.e. typed array)",$Te=/^(.+)__LOCATION_([0-9]+)$/,jTe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class UTe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new za(e),LY(this,"VertexArray","v6.0",jTe),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,o)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Oi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Oi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Oi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const o={location:-1,accessor:null},{location:l,name:f}=this._getAttributeIndex(e);if(!Number.isFinite(l)||l<0)return this.unused[e]=n,Hn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const s=this._getAttributeInfo(f||l);if(!s)return o;const p=this.accessors[l]||{},v=pa.resolve(s.accessor,p,r,i),{size:x,type:S}=v;return In(Number.isFinite(x)&&Number.isFinite(S)),{location:l,accessor:v}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=$Te.exec(e),i=r?r[1]:e,o=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof Oi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Oi){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof Oi){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(NTe)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(e,n){if(za.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){za.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:o}=i,l=o>0;if(e.isInstanced=e.isInstanced||l,r instanceof Oi){const f=r;if(l){const s=f.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,s)}else{const s=f.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,s)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Hn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function VTe(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let l=0;l<t.length&&l<n;++l)l>0&&(i+=",".concat(l%r===0?" ":"")),i+=hb(t[l],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}function hb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return VTe(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function z6(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;In(n);const o=".*_.*",l=".*Matrix",f=n._uniformSetters,s={},p=Object.keys(f).sort();let v=0;for(const M of p)!M.match(o)&&!M.match(l)&&TI({table:s,header:e,uniforms:r,uniformName:M,undefinedOnly:i})&&v++;for(const M of p)M.match(l)&&TI({table:s,header:e,uniforms:r,uniformName:M,undefinedOnly:i})&&v++;for(const M of p)s[M]||TI({table:s,header:e,uniforms:r,uniformName:M,undefinedOnly:i})&&v++;let x=0;const S={};if(!i)for(const M in r){const P=r[M];s[M]||(x++,S[M]={Type:"NOT USED: ".concat(P),[e]:hb(P)})}return{table:s,count:v,unusedTable:S,unusedCount:x}}function TI(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const l=r[i],f=GTe(l);return!o||!f?(e[i]={[n]:f?hb(l):"N/A","Uniform Type":f?l:"NOT PROVIDED"},!0):!1}function GTe(t){return t!=null}function HTe(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=N6(e,e.elements,null,n));const i=e.values;for(const o in i){const l=e._getAttributeInfo(o);if(l){let f="".concat(o,": ").concat(l.name);const s=e.accessors[l.location];s&&(f="".concat(o,": ").concat(WTe(l.name,s))),r[f]=N6(e,i[o],s,n)}}return r}function N6(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o="NOT PROVIDED",l=1,f=0,s=0,p,v,x;if(n&&(o=n.type,l=n.size,o=String(o).replace("Array",""),p=o.indexOf("nt")!==-1),e instanceof Oi){const S=e,{data:M,changed:P}=S.getDebugData();v=P?"*":"",x=M,s=S.byteLength,f=s/M.BYTES_PER_ELEMENT/l;let R;if(n){const D=n.divisor>0;R="".concat(D?"I ":"P "," ").concat(f," (x").concat(l,"=").concat(s," bytes ").concat(Of(i,o),")")}else p=!0,R="".concat(s," bytes");return{[r]:"".concat(v).concat(hb(x,{size:l,isInteger:p})),"Format ":R}}return x=e,l=e.length,o=String(e.constructor.name).replace("Array",""),p=o.indexOf("nt")!==-1,{[r]:"".concat(hb(x,{size:l,isInteger:p})," (constant)"),"Format ":"".concat(l,"x").concat(o," (constant)")}}function WTe(t,e){const{type:n,size:r}=e,i=GY(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function XTe(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=$6(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=$6(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function $6(t){const{type:e,size:n}=t.accessor,r=GY(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}function qTe(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function YTe(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||qTe()}const j6=YTe()&&typeof document<"u";let ZTe=0;class KTe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=D=>IY(D),onAddHTML:r=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:l=()=>{},onError:f,gl:s=null,glOptions:p={},debug:v=!1,createFramebuffer:x=!1,autoResizeViewport:S=!0,autoResizeDrawingBuffer:M=!0,stats:P=Jh.get("animation-loop-".concat(ZTe++))}=e;let{useDevicePixels:R=!0}=e;"useDevicePixelRatio"in e&&(Hn.deprecated("useDevicePixelRatio","useDevicePixels")(),R=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:o,onFinalize:l,onError:f,gl:s,glOptions:p,debug:v,createFramebuffer:x},this.gl=s,this.needsRedraw=null,this.timeline=null,this.stats=P,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:S,autoResizeDrawingBuffer:M,useDevicePixels:R}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return In(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=eC.isSupported(this.gl,["timers"])?new eC(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Hn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=j6?new Promise((e,n)=>{if(j6&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):nCe(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):tCe(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?ek(this.props.gl,e):this.onCreateContext(e),!RT(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");$Ee(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&HEe(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Jo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const nx="vs",sk="fs";function qa(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const AI={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function JTe(t){const e={};for(const n in t){const r=t[n],i=QTe(r);e[n]=i}return e}function QTe(t){let e=U6(t);return e==="object"?t?"type"in t?Object.assign({},t,AI[t.type]):"value"in t?(e=U6(t.value),Object.assign({type:e},t,AI[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},AI[e])}function U6(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const eAe="vs",tAe="fs";class V6{constructor(e){let{name:n,vs:r,fs:i,dependencies:o=[],uniforms:l,getUniforms:f,deprecations:s=[],defines:p={},inject:v={},vertexShader:x,fragmentShader:S}=e;qa(typeof n=="string"),this.name=n,this.vs=r||x,this.fs=i||S,this.getModuleUniforms=f,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(s),this.defines=p,this.injections=nAe(v),l&&(this.uniforms=JTe(l))}getModuleSource(e){let n;switch(e){case eAe:n=this.vs||"";break;case tAe:n=this.fs||"";break;default:qa(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const o=r[i];i in e&&!o.private?(o.validate&&qa(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=o.value}return n}}function nAe(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function rAe(t){return iAe(qY(t))}function iAe(t){const e={},n={};return XY({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function XY(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(i[o.name]===void 0||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&XY({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function qY(t,e){return t.map(n=>(n instanceof V6||(qa(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),qa(n.name,"shader module has no name"),n=new V6(n),n.dependencies=qY(n.dependencies)),n))}function oAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const sAe=7936,aAe=7937,lAe=7938,cAe=35724,ak={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Dh={};Object.keys(ak).forEach(t=>{Dh[t]=t});function uAe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function dAe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||sAe),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||aAe);return{gpuVendor:fAe(n,r),vendor:n,renderer:r,version:t.getParameter(lAe),shadingLanguageVersion:t.getParameter(cAe)}}function fAe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const MI={};function G6(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=ak[e];if(qa(r,e),!oAe(n))return!0;if(e in MI)return MI[e];const i=r[0],o=n.behavior||"enable",l="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),f=t.createShader(35633);t.shaderSource(f,l),t.compileShader(f);const s=t.getShaderParameter(f,35713);return t.deleteShader(f),MI[e]=s,s}function hAe(t,e){const n=ak[e];qa(n,e);const r=uAe(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return qa(i===!1||i===!0),i}function Mw(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>hAe(t,n))}function pAe(t){switch(dAe(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function mAe(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Mw(t,Dh.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Mw(t,Dh.GLSL_DERIVATIVES)&&G6(t,Dh.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Mw(t,Dh.GLSL_FRAG_DATA)&&G6(t,Dh.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Mw(t,Dh.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const gAe=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,vAe=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,yAe={[nx]:gAe,[sk]:vAe},FS="__LUMA_INJECT_DECLARATIONS__",H6=/void\s+main\s*\([^)]*\)\s*\{\n?/,W6=/}\n?[^{}]*$/,PI=[];function X6(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===nx;for(const o in n){const l=n[o];l.sort((s,p)=>s.order-p.order),PI.length=l.length;for(let s=0,p=l.length;s<p;++s)PI[s]=l[s].injection;const f="".concat(PI.join(`
`),`
`);switch(o){case"vs:#decl":i&&(t=t.replace(FS,f));break;case"vs:#main-start":i&&(t=t.replace(H6,s=>s+f));break;case"vs:#main-end":i&&(t=t.replace(W6,s=>f+s));break;case"fs:#decl":i||(t=t.replace(FS,f));break;case"fs:#main-start":i||(t=t.replace(H6,s=>s+f));break;case"fs:#main-end":i||(t=t.replace(W6,s=>f+s));break;default:t=t.replace(o,s=>s+f)}}return t=t.replace(FS,""),r&&(t=t.replace(/\}\s*$/,o=>o+yAe[e])),t}function NL(t){const e={};return qa(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function uv(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const YY=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],_Ae=[...YY,[uv("attribute"),"in $1"],[uv("varying"),"out $1"]],bAe=[...YY,[uv("varying"),"in $1"]],ZY=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],xAe=[...ZY,[uv("in"),"attribute $1"],[uv("out"),"varying $1"]],wAe=[...ZY,[uv("in"),"varying $1"]],$L="gl_FragColor",jL=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,SAe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function EAe(t,e,n){switch(e){case 300:return n?tC(t,_Ae):CAe(t);case 100:return n?tC(t,xAe):TAe(t);default:throw new Error("unknown GLSL version ".concat(e))}}function tC(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function CAe(t){t=tC(t,bAe);const e=t.match(jL);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat($L,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(SAe,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat($L,"\\b"),"g"),n)}return t}function TAe(t){t=tC(t,wAe);const e=t.match(jL);if(e){const n=e[1];t=t.replace(jL,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),$L)}return t}const AAe=`

`.concat(FS,`

`),KY={[nx]:"vertex",[sk]:"fragment"},MAe=`precision highp float;

`;function PAe(t,e){const{vs:n,fs:r}=e,i=rAe(e.modules||[]);return{gl:t,vs:q6(t,Object.assign({},e,{source:n,type:nx,modules:i})),fs:q6(t,Object.assign({},e,{source:r,type:sk,modules:i})),getUniforms:IAe(i)}}function q6(t,e){let{id:n,source:r,type:i,modules:o,defines:l={},hookFunctions:f=[],inject:s={},transpileToGLSL100:p=!1,prologue:v=!0,log:x}=e;qa(typeof r=="string","shader source must be a string");const S=i===nx,M=r.split(`
`);let P=100,R="",D=r;M[0].indexOf("#version ")===0?(P=300,R=M[0],D=M.slice(1).join(`
`)):R="#version ".concat(P);const B={};o.forEach(X=>{Object.assign(B,X.getDefines())}),Object.assign(B,l);let O=v?"".concat(R,`
`).concat(OAe({id:n,source:r,type:i}),`
`).concat(RAe({type:i}),`
`).concat(pAe(t),`
`).concat(mAe(t),`
`).concat(LAe(B),`
`).concat(S?"":MAe,`
`):"".concat(R,`
`);const k=DAe(f),$={},H={},U={};for(const X in s){const J=typeof s[X]=="string"?{injection:s[X],order:0}:s[X],K=X.match(/^(v|f)s:(#)?([\w-]+)$/);if(K){const Q=K[2],ce=K[3];Q?ce==="decl"?H[X]=[J]:U[X]=[J]:$[X]=[J]}else U[X]=[J]}for(const X of o){x&&X.checkDeprecations(D,x);const J=X.getModuleSource(i,P);O+=J;const K=X.injections[i];for(const Q in K){const ce=Q.match(/^(v|f)s:#([\w-]+)$/);if(ce){const ae=ce[2]==="decl"?H:U;ae[Q]=ae[Q]||[],ae[Q].push(K[Q])}else $[Q]=$[Q]||[],$[Q].push(K[Q])}}return O+=AAe,O=X6(O,i,H),O+=BAe(k[i],$),O+=D,O=X6(O,i,U),O=EAe(O,p?100:P,S),O}function IAe(t){return function(n){const r={};for(const i of t){const o=i.getUniforms(n,r);Object.assign(r,o)}return r}}function RAe(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(KY[e].toUpperCase(),`
`)}function OAe(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(KY[r],`

`):""}function LAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function BAe(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const o=e[r];o.sort((l,f)=>l.order-f.order);for(const l of o)n+="  ".concat(l.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function DAe(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,o]=n.split(":"),l=n.replace(/\(.+/,"");e[i][l]=Object.assign(r,{signature:o})}),e}const kAe="void main() {gl_FragColor = vec4(0);}",JY=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,FAe=`#version 300 es
`.concat(JY);function QY(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;const l=o.split(";")[0];return{qualifier:r,type:i,name:l}}function eZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?FAe:e>300?"#version ".concat(e,`
`).concat(JY):kAe;const o=$Ae(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function zAe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return qa(!1),null}}function NAe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return qa(!1),null}}function $Ae(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return qa(!1),null}}const jAe=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,UAe={name:"fp32",vs:jAe,fs:null};function Y6(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Hs={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function VAe(t,{precision:e=Hs.precision}={}){return t=GAe(t),"".concat(parseFloat(t.toPrecision(e)))}function _p(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _f(t,e,n){return WAe(t,r=>Math.max(e,Math.min(n,r)))}function pb(t,e,n){return _p(t)?t.map((r,i)=>pb(r,e[i],n)):n*e+(1-n)*t}function mb(t,e,n){const r=Hs.EPSILON;n&&(Hs.EPSILON=n);try{if(t===e)return!0;if(_p(t)&&_p(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!mb(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Hs.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Hs.EPSILON=r}}function GAe(t){return Math.round(t/Hs.EPSILON)*Hs.EPSILON}function HAe(t){return t.clone?t.clone():new Array(t.length)}function WAe(t,e,n){if(_p(t)){const r=t;n=n||HAe(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function XAe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class lk extends XAe(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:_p(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Hs)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+VAe(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!mb(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const o=e[i];this[i]=o+r*(n[i]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Hs.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function qAe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Gi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function x_(t,e,n=""){if(Hs.debug&&!qAe(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class tZ extends lk{get x(){return this[0]}set x(e){this[0]=Gi(e)}get y(){return this[1]}set y(e){this[1]=Gi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Gi(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Gi(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Y6(e>=0&&e<this.ELEMENTS,"index is out of range"),Gi(this[e])}setComponent(e,n){return Y6(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Lo=1e-6,bc=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function YAe(){var t=new bc(2);return bc!=Float32Array&&(t[0]=0,t[1]=0),t}function gb(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ZAe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function KAe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function JAe(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function nZ(t,e){return t[0]=-e[0],t[1]=-e[1],t}function rZ(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function QAe(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function eMe(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var tMe=ZAe;(function(){var t=YAe();return function(e,n,r,i,o,l){var f,s;for(n||(n=2),r||(r=0),i?s=Math.min(i*n+r,e.length):s=e.length,f=r;f<s;f+=n)t[0]=e[f],t[1]=e[f+1],o(t,t,l),e[f]=t[0],e[f+1]=t[1];return e}})();function nMe(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function iZ(t,e,n){const r=e[0],i=e[1],o=e[2],l=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/l,t[1]=(n[1]*r+n[5]*i+n[9]*o)/l,t[2]=(n[2]*r+n[6]*i+n[10]*o)/l,t}function rMe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function iMe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function oZ(t,e,n){const r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}function sZ(){var t=new bc(3);return bc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function oMe(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Z6(t,e,n){var r=new bc(3);return r[0]=t,r[1]=e,r[2]=n,r}function sMe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function aMe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function lMe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function cMe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function uMe(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function aZ(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zS(t,e,n){var r=e[0],i=e[1],o=e[2],l=n[0],f=n[1],s=n[2];return t[0]=i*s-o*f,t[1]=o*l-r*s,t[2]=r*f-i*l,t}function ck(t,e,n){var r=e[0],i=e[1],o=e[2],l=n[3]*r+n[7]*i+n[11]*o+n[15];return l=l||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/l,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/l,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/l,t}function lZ(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function cZ(t,e,n){var r=n[0],i=n[1],o=n[2],l=n[3],f=e[0],s=e[1],p=e[2],v=i*p-o*s,x=o*f-r*p,S=r*s-i*f,M=i*S-o*x,P=o*v-r*S,R=r*x-i*v,D=l*2;return v*=D,x*=D,S*=D,M*=2,P*=2,R*=2,t[0]=f+v+M,t[1]=s+x+P,t[2]=p+S+R,t}function dMe(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function fMe(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function hMe(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function pMe(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],l=e[1],f=e[2],s=Math.sqrt(n*n+r*r+i*i),p=Math.sqrt(o*o+l*l+f*f),v=s*p,x=v&&aZ(t,e)/v;return Math.acos(Math.min(Math.max(x,-1),1))}var mMe=aMe,gMe=lMe,vMe=oMe;(function(){var t=sZ();return function(e,n,r,i,o,l){var f,s;for(n||(n=3),r||(r=0),i?s=Math.min(i*n+r,e.length):s=e.length,f=r;f<s;f+=n)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],o(t,t,l),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2];return e}})();const II=[0,0,0];let Pw;class _s extends tZ{static get ZERO(){return Pw||(Pw=new _s(0,0,0),Object.freeze(Pw)),Pw}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&_p(e)?this.copy(e):(Hs.debug&&(Gi(e),Gi(n),Gi(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Hs.debug&&(Gi(e.x),Gi(e.y),Gi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Gi(e)}angle(e){return pMe(this,e)}cross(e){return zS(this,this,e),this.check()}rotateX({radians:e,origin:n=II}){return dMe(this,this,n,e),this.check()}rotateY({radians:e,origin:n=II}){return fMe(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=II}){return hMe(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return ck(this,this,e),this.check()}transformAsVector(e){return iZ(this,this,e),this.check()}transformByMatrix3(e){return lZ(this,this,e),this.check()}transformByMatrix2(e){return rMe(this,this,e),this.check()}transformByQuaternion(e){return cZ(this,this,e),this.check()}}let Iw;class uk extends tZ{static get ZERO(){return Iw||(Iw=new uk(0,0,0,0),Object.freeze(Iw)),Iw}constructor(e=0,n=0,r=0,i=0){super(-0,-0,-0,-0),_p(e)&&arguments.length===1?this.copy(e):(Hs.debug&&(Gi(e),Gi(n),Gi(r),Gi(i)),this[0]=e,this[1]=n,this[2]=r,this[3]=i)}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Hs.debug&&(Gi(e.x),Gi(e.y),Gi(e.z),Gi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Gi(e)}get w(){return this[3]}set w(e){this[3]=Gi(e)}transform(e){return ck(this,this,e),this.check()}transformByMatrix3(e){return oZ(this,this,e),this.check()}transformByMatrix2(e){return iMe(this,this,e),this.check()}transformByQuaternion(e){return cZ(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class uZ extends lk{toString(){let e="[";if(Hs.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Gi(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function yMe(){var t=new bc(9);return bc!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function _Me(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function bMe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],f=e[5],s=e[6],p=e[7],v=e[8],x=v*l-f*p,S=-v*o+f*s,M=p*o-l*s,P=n*x+r*S+i*M;return P?(P=1/P,t[0]=x*P,t[1]=(-v*r+i*p)*P,t[2]=(f*r-i*l)*P,t[3]=S*P,t[4]=(v*n-i*s)*P,t[5]=(-f*n+i*o)*P,t[6]=M*P,t[7]=(-p*n+r*s)*P,t[8]=(l*n-r*o)*P,t):null}function xMe(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],l=t[5],f=t[6],s=t[7],p=t[8];return e*(p*o-l*s)+n*(-p*i+l*f)+r*(s*i-o*f)}function K6(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3],f=e[4],s=e[5],p=e[6],v=e[7],x=e[8],S=n[0],M=n[1],P=n[2],R=n[3],D=n[4],B=n[5],O=n[6],k=n[7],$=n[8];return t[0]=S*r+M*l+P*p,t[1]=S*i+M*f+P*v,t[2]=S*o+M*s+P*x,t[3]=R*r+D*l+B*p,t[4]=R*i+D*f+B*v,t[5]=R*o+D*s+B*x,t[6]=O*r+k*l+$*p,t[7]=O*i+k*f+$*v,t[8]=O*o+k*s+$*x,t}function wMe(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3],f=e[4],s=e[5],p=e[6],v=e[7],x=e[8],S=n[0],M=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=l,t[4]=f,t[5]=s,t[6]=S*r+M*l+p,t[7]=S*i+M*f+v,t[8]=S*o+M*s+x,t}function SMe(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3],f=e[4],s=e[5],p=e[6],v=e[7],x=e[8],S=Math.sin(n),M=Math.cos(n);return t[0]=M*r+S*l,t[1]=M*i+S*f,t[2]=M*o+S*s,t[3]=M*l-S*r,t[4]=M*f-S*i,t[5]=M*s-S*o,t[6]=p,t[7]=v,t[8]=x,t}function J6(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function EMe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=n+n,f=r+r,s=i+i,p=n*l,v=r*l,x=r*f,S=i*l,M=i*f,P=i*s,R=o*l,D=o*f,B=o*s;return t[0]=1-x-P,t[3]=v-B,t[6]=S+D,t[1]=v+B,t[4]=1-p-P,t[7]=M-R,t[2]=S-D,t[5]=M+R,t[8]=1-p-x,t}var UL;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(UL||(UL={}));const CMe=Object.freeze([1,0,0,0,1,0,0,0,1]);class rx extends uZ{static get IDENTITY(){return AMe()}static get ZERO(){return TMe()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return UL}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(CMe)}fromObject(e){return this.check()}fromQuaternion(e){return EMe(this,e),this.check()}set(e,n,r,i,o,l,f,s,p){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=o,this[5]=l,this[6]=f,this[7]=s,this[8]=p,this.check()}setRowMajor(e,n,r,i,o,l,f,s,p){return this[0]=e,this[1]=i,this[2]=f,this[3]=n,this[4]=o,this[5]=s,this[6]=r,this[7]=l,this[8]=p,this.check()}determinant(){return xMe(this)}transpose(){return _Me(this,this),this.check()}invert(){return bMe(this,this),this.check()}multiplyLeft(e){return K6(this,e,this),this.check()}multiplyRight(e){return K6(this,this,e),this.check()}rotate(e){return SMe(this,this,e),this.check()}scale(e){return Array.isArray(e)?J6(this,this,e):J6(this,this,[e,e]),this.check()}translate(e){return wMe(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=QAe(n||[-0,-0],e,this);break;case 3:r=lZ(n||[-0,-0,-0],e,this);break;case 4:r=oZ(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return x_(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let Rw,Ow;function TMe(){return Rw||(Rw=new rx([0,0,0,0,0,0,0,0,0]),Object.freeze(Rw)),Rw}function AMe(){return Ow||(Ow=new rx,Object.freeze(Ow)),Ow}function MMe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function PMe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],l=e[7],f=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=l,t[14]=f}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function nC(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=e[4],f=e[5],s=e[6],p=e[7],v=e[8],x=e[9],S=e[10],M=e[11],P=e[12],R=e[13],D=e[14],B=e[15],O=n*f-r*l,k=n*s-i*l,$=n*p-o*l,H=r*s-i*f,U=r*p-o*f,X=i*p-o*s,J=v*R-x*P,K=v*D-S*P,Q=v*B-M*P,ce=x*D-S*R,ge=x*B-M*R,ae=S*B-M*D,ve=O*ae-k*ge+$*ce+H*Q-U*K+X*J;return ve?(ve=1/ve,t[0]=(f*ae-s*ge+p*ce)*ve,t[1]=(i*ge-r*ae-o*ce)*ve,t[2]=(R*X-D*U+B*H)*ve,t[3]=(S*U-x*X-M*H)*ve,t[4]=(s*Q-l*ae-p*K)*ve,t[5]=(n*ae-i*Q+o*K)*ve,t[6]=(D*$-P*X-B*k)*ve,t[7]=(v*X-S*$+M*k)*ve,t[8]=(l*ge-f*Q+p*J)*ve,t[9]=(r*Q-n*ge-o*J)*ve,t[10]=(P*U-R*$+B*O)*ve,t[11]=(x*$-v*U-M*O)*ve,t[12]=(f*K-l*ce-s*J)*ve,t[13]=(n*ce-r*K+i*J)*ve,t[14]=(R*k-P*H-D*O)*ve,t[15]=(v*H-x*k+S*O)*ve,t):null}function IMe(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],l=t[5],f=t[6],s=t[7],p=t[8],v=t[9],x=t[10],S=t[11],M=t[12],P=t[13],R=t[14],D=t[15],B=e*l-n*o,O=e*f-r*o,k=e*s-i*o,$=n*f-r*l,H=n*s-i*l,U=r*s-i*f,X=p*P-v*M,J=p*R-x*M,K=p*D-S*M,Q=v*R-x*P,ce=v*D-S*P,ge=x*D-S*R;return B*ge-O*ce+k*Q+$*K-H*J+U*X}function ou(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3],f=e[4],s=e[5],p=e[6],v=e[7],x=e[8],S=e[9],M=e[10],P=e[11],R=e[12],D=e[13],B=e[14],O=e[15],k=n[0],$=n[1],H=n[2],U=n[3];return t[0]=k*r+$*f+H*x+U*R,t[1]=k*i+$*s+H*S+U*D,t[2]=k*o+$*p+H*M+U*B,t[3]=k*l+$*v+H*P+U*O,k=n[4],$=n[5],H=n[6],U=n[7],t[4]=k*r+$*f+H*x+U*R,t[5]=k*i+$*s+H*S+U*D,t[6]=k*o+$*p+H*M+U*B,t[7]=k*l+$*v+H*P+U*O,k=n[8],$=n[9],H=n[10],U=n[11],t[8]=k*r+$*f+H*x+U*R,t[9]=k*i+$*s+H*S+U*D,t[10]=k*o+$*p+H*M+U*B,t[11]=k*l+$*v+H*P+U*O,k=n[12],$=n[13],H=n[14],U=n[15],t[12]=k*r+$*f+H*x+U*R,t[13]=k*i+$*s+H*S+U*D,t[14]=k*o+$*p+H*M+U*B,t[15]=k*l+$*v+H*P+U*O,t}function vb(t,e,n){var r=n[0],i=n[1],o=n[2],l,f,s,p,v,x,S,M,P,R,D,B;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(l=e[0],f=e[1],s=e[2],p=e[3],v=e[4],x=e[5],S=e[6],M=e[7],P=e[8],R=e[9],D=e[10],B=e[11],t[0]=l,t[1]=f,t[2]=s,t[3]=p,t[4]=v,t[5]=x,t[6]=S,t[7]=M,t[8]=P,t[9]=R,t[10]=D,t[11]=B,t[12]=l*r+v*i+P*o+e[12],t[13]=f*r+x*i+R*o+e[13],t[14]=s*r+S*i+D*o+e[14],t[15]=p*r+M*i+B*o+e[15]),t}function BT(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function RMe(t,e,n,r){var i=r[0],o=r[1],l=r[2],f=Math.hypot(i,o,l),s,p,v,x,S,M,P,R,D,B,O,k,$,H,U,X,J,K,Q,ce,ge,ae,ve,Fe;return f<Lo?null:(f=1/f,i*=f,o*=f,l*=f,s=Math.sin(n),p=Math.cos(n),v=1-p,x=e[0],S=e[1],M=e[2],P=e[3],R=e[4],D=e[5],B=e[6],O=e[7],k=e[8],$=e[9],H=e[10],U=e[11],X=i*i*v+p,J=o*i*v+l*s,K=l*i*v-o*s,Q=i*o*v-l*s,ce=o*o*v+p,ge=l*o*v+i*s,ae=i*l*v+o*s,ve=o*l*v-i*s,Fe=l*l*v+p,t[0]=x*X+R*J+k*K,t[1]=S*X+D*J+$*K,t[2]=M*X+B*J+H*K,t[3]=P*X+O*J+U*K,t[4]=x*Q+R*ce+k*ge,t[5]=S*Q+D*ce+$*ge,t[6]=M*Q+B*ce+H*ge,t[7]=P*Q+O*ce+U*ge,t[8]=x*ae+R*ve+k*Fe,t[9]=S*ae+D*ve+$*Fe,t[10]=M*ae+B*ve+H*Fe,t[11]=P*ae+O*ve+U*Fe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function dZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],l=e[5],f=e[6],s=e[7],p=e[8],v=e[9],x=e[10],S=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+p*r,t[5]=l*i+v*r,t[6]=f*i+x*r,t[7]=s*i+S*r,t[8]=p*i-o*r,t[9]=v*i-l*r,t[10]=x*i-f*r,t[11]=S*i-s*r,t}function OMe(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],l=e[1],f=e[2],s=e[3],p=e[8],v=e[9],x=e[10],S=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-p*r,t[1]=l*i-v*r,t[2]=f*i-x*r,t[3]=s*i-S*r,t[8]=o*r+p*i,t[9]=l*r+v*i,t[10]=f*r+x*i,t[11]=s*r+S*i,t}function fZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],l=e[1],f=e[2],s=e[3],p=e[4],v=e[5],x=e[6],S=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+p*r,t[1]=l*i+v*r,t[2]=f*i+x*r,t[3]=s*i+S*r,t[4]=p*i-o*r,t[5]=v*i-l*r,t[6]=x*i-f*r,t[7]=S*i-s*r,t}function LMe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=n+n,f=r+r,s=i+i,p=n*l,v=r*l,x=r*f,S=i*l,M=i*f,P=i*s,R=o*l,D=o*f,B=o*s;return t[0]=1-x-P,t[1]=v+B,t[2]=S-D,t[3]=0,t[4]=v-B,t[5]=1-p-P,t[6]=M+R,t[7]=0,t[8]=S+D,t[9]=M-R,t[10]=1-p-x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function BMe(t,e,n,r,i,o,l){var f=1/(n-e),s=1/(i-r),p=1/(o-l);return t[0]=o*2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*s,t[6]=0,t[7]=0,t[8]=(n+e)*f,t[9]=(i+r)*s,t[10]=(l+o)*p,t[11]=-1,t[12]=0,t[13]=0,t[14]=l*o*2*p,t[15]=0,t}function DMe(t,e,n,r,i){var o=1/Math.tan(e/2),l;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(l=1/(r-i),t[10]=(i+r)*l,t[14]=2*i*r*l):(t[10]=-1,t[14]=-2*r),t}var hZ=DMe;function kMe(t,e,n,r,i,o,l){var f=1/(e-n),s=1/(r-i),p=1/(o-l);return t[0]=-2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*p,t[11]=0,t[12]=(e+n)*f,t[13]=(i+r)*s,t[14]=(l+o)*p,t[15]=1,t}var FMe=kMe;function zMe(t,e,n,r){var i,o,l,f,s,p,v,x,S,M,P=e[0],R=e[1],D=e[2],B=r[0],O=r[1],k=r[2],$=n[0],H=n[1],U=n[2];return Math.abs(P-$)<Lo&&Math.abs(R-H)<Lo&&Math.abs(D-U)<Lo?MMe(t):(v=P-$,x=R-H,S=D-U,M=1/Math.hypot(v,x,S),v*=M,x*=M,S*=M,i=O*S-k*x,o=k*v-B*S,l=B*x-O*v,M=Math.hypot(i,o,l),M?(M=1/M,i*=M,o*=M,l*=M):(i=0,o=0,l=0),f=x*l-S*o,s=S*i-v*l,p=v*o-x*i,M=Math.hypot(f,s,p),M?(M=1/M,f*=M,s*=M,p*=M):(f=0,s=0,p=0),t[0]=i,t[1]=f,t[2]=v,t[3]=0,t[4]=o,t[5]=s,t[6]=x,t[7]=0,t[8]=l,t[9]=p,t[10]=S,t[11]=0,t[12]=-(i*P+o*R+l*D),t[13]=-(f*P+s*R+p*D),t[14]=-(v*P+x*R+S*D),t[15]=1,t)}function Q6(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],f=t[5],s=t[6],p=t[7],v=t[8],x=t[9],S=t[10],M=t[11],P=t[12],R=t[13],D=t[14],B=t[15],O=e[0],k=e[1],$=e[2],H=e[3],U=e[4],X=e[5],J=e[6],K=e[7],Q=e[8],ce=e[9],ge=e[10],ae=e[11],ve=e[12],Fe=e[13],Ae=e[14],pe=e[15];return Math.abs(n-O)<=Lo*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(r-k)<=Lo*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(i-$)<=Lo*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(o-H)<=Lo*Math.max(1,Math.abs(o),Math.abs(H))&&Math.abs(l-U)<=Lo*Math.max(1,Math.abs(l),Math.abs(U))&&Math.abs(f-X)<=Lo*Math.max(1,Math.abs(f),Math.abs(X))&&Math.abs(s-J)<=Lo*Math.max(1,Math.abs(s),Math.abs(J))&&Math.abs(p-K)<=Lo*Math.max(1,Math.abs(p),Math.abs(K))&&Math.abs(v-Q)<=Lo*Math.max(1,Math.abs(v),Math.abs(Q))&&Math.abs(x-ce)<=Lo*Math.max(1,Math.abs(x),Math.abs(ce))&&Math.abs(S-ge)<=Lo*Math.max(1,Math.abs(S),Math.abs(ge))&&Math.abs(M-ae)<=Lo*Math.max(1,Math.abs(M),Math.abs(ae))&&Math.abs(P-ve)<=Lo*Math.max(1,Math.abs(P),Math.abs(ve))&&Math.abs(R-Fe)<=Lo*Math.max(1,Math.abs(R),Math.abs(Fe))&&Math.abs(D-Ae)<=Lo*Math.max(1,Math.abs(D),Math.abs(Ae))&&Math.abs(B-pe)<=Lo*Math.max(1,Math.abs(B),Math.abs(pe))}function NMe(){var t=new bc(4);return bc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function $Me(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function pZ(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function jMe(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function UMe(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function VMe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=n*n+r*r+i*i+o*o;return l>0&&(l=1/Math.sqrt(l)),t[0]=n*l,t[1]=r*l,t[2]=i*l,t[3]=o*l,t}function GMe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function HMe(t,e,n,r){var i=e[0],o=e[1],l=e[2],f=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=l+r*(n[2]-l),t[3]=f+r*(n[3]-f),t}function ix(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*l,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*l,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*l,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*l,t}function WMe(t,e,n){var r=e[0],i=e[1],o=e[2],l=n[0],f=n[1],s=n[2],p=n[3],v=p*r+f*o-s*i,x=p*i+s*r-l*o,S=p*o+l*i-f*r,M=-l*r-f*i-s*o;return t[0]=v*p+M*-l+x*-s-S*-f,t[1]=x*p+M*-f+S*-l-v*-s,t[2]=S*p+M*-s+v*-f-x*-l,t[3]=e[3],t}(function(){var t=NMe();return function(e,n,r,i,o,l){var f,s;for(n||(n=4),r||(r=0),i?s=Math.min(i*n+r,e.length):s=e.length,f=r;f<s;f+=n)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],t[3]=e[f+3],o(t,t,l),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2],e[f+3]=t[3];return e}})();var VL;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(VL||(VL={}));const XMe=45*Math.PI/180,qMe=1,RI=.1,OI=500,YMe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class zs extends uZ{static get IDENTITY(){return KMe()}static get ZERO(){return ZMe()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return VL}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,o,l,f,s,p,v,x,S,M,P,R,D){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=o,this[5]=l,this[6]=f,this[7]=s,this[8]=p,this[9]=v,this[10]=x,this[11]=S,this[12]=M,this[13]=P,this[14]=R,this[15]=D,this.check()}setRowMajor(e,n,r,i,o,l,f,s,p,v,x,S,M,P,R,D){return this[0]=e,this[1]=o,this[2]=p,this[3]=M,this[4]=n,this[5]=l,this[6]=v,this[7]=P,this[8]=r,this[9]=f,this[10]=x,this[11]=R,this[12]=i,this[13]=s,this[14]=S,this[15]=D,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(YMe)}fromObject(e){return this.check()}fromQuaternion(e){return LMe(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:o,near:l=RI,far:f=OI}=e;return f===1/0?JMe(this,n,r,i,o,l):BMe(this,n,r,i,o,l,f),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return zMe(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:o,near:l=RI,far:f=OI}=e;return FMe(this,n,r,i,o,l,f),this.check()}orthographic(e){const{fovy:n=XMe,aspect:r=qMe,focalDistance:i=1,near:o=RI,far:l=OI}=e;eU(n);const f=n/2,s=i*Math.tan(f),p=s*r;return this.ortho({left:-p,right:p,bottom:-s,top:s,near:o,far:l})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:o=500}=e;return eU(n),hZ(this,n,r,i,o),this.check()}determinant(){return IMe(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],l=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*l,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*l,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],l=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*l,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*l,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*l,e}transpose(){return PMe(this,this),this.check()}invert(){return nC(this,this),this.check()}multiplyLeft(e){return ou(this,e,this),this.check()}multiplyRight(e){return ou(this,this,e),this.check()}rotateX(e){return dZ(this,this,e),this.check()}rotateY(e){return OMe(this,this,e),this.check()}rotateZ(e){return fZ(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return RMe(this,this,e,n),this.check()}scale(e){return BT(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return vb(this,this,e),this.check()}transform(e,n){return e.length===4?(n=ix(n||[-0,-0,-0,-0],e,this),x_(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=eMe(n||[-0,-0],e,this);break;case 3:i=ck(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return x_(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=nMe(n||[-0,-0],e,this);break;case 3:r=iZ(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return x_(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Lw,Bw;function ZMe(){return Lw||(Lw=new zs([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Lw)),Lw}function KMe(){return Bw||(Bw=new zs,Object.freeze(Bw)),Bw}function eU(t){if(t>Math.PI*2)throw Error("expected radians")}function JMe(t,e,n,r,i,o){const l=2*o/(n-e),f=2*o/(i-r),s=(n+e)/(n-e),p=(i+r)/(i-r),v=-1,x=-1,S=-2*o;return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=s,t[9]=p,t[10]=v,t[11]=x,t[12]=0,t[13]=0,t[14]=S,t[15]=0,t}function tU(){var t=new bc(4);return bc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function QMe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function mZ(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function nU(t,e,n){var r=e[0],i=e[1],o=e[2],l=e[3],f=n[0],s=n[1],p=n[2],v=n[3];return t[0]=r*v+l*f+i*p-o*s,t[1]=i*v+l*s+o*f-r*p,t[2]=o*v+l*p+r*s-i*f,t[3]=l*v-r*f-i*s-o*p,t}function ePe(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],l=e[3],f=Math.sin(n),s=Math.cos(n);return t[0]=r*s+l*f,t[1]=i*s+o*f,t[2]=o*s-i*f,t[3]=l*s-r*f,t}function tPe(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],l=e[3],f=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*f,t[1]=i*s+l*f,t[2]=o*s+r*f,t[3]=l*s-i*f,t}function nPe(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],l=e[3],f=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*f,t[1]=i*s-r*f,t[2]=o*s+l*f,t[3]=l*s-o*f,t}function rPe(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function NS(t,e,n,r){var i=e[0],o=e[1],l=e[2],f=e[3],s=n[0],p=n[1],v=n[2],x=n[3],S,M,P,R,D;return M=i*s+o*p+l*v+f*x,M<0&&(M=-M,s=-s,p=-p,v=-v,x=-x),1-M>Lo?(S=Math.acos(M),P=Math.sin(S),R=Math.sin((1-r)*S)/P,D=Math.sin(r*S)/P):(R=1-r,D=r),t[0]=R*i+D*s,t[1]=R*o+D*p,t[2]=R*l+D*v,t[3]=R*f+D*x,t}function iPe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],l=n*n+r*r+i*i+o*o,f=l?1/l:0;return t[0]=-n*f,t[1]=-r*f,t[2]=-i*f,t[3]=o*f,t}function oPe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function gZ(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var o=(i+1)%3,l=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[o*3+o]-e[l*3+l]+1),t[i]=.5*r,r=.5/r,t[3]=(e[o*3+l]-e[l*3+o])*r,t[o]=(e[o*3+i]+e[i*3+o])*r,t[l]=(e[l*3+i]+e[i*3+l])*r}return t}var sPe=$Me,aPe=pZ,lPe=GMe,cPe=HMe,uPe=jMe,dPe=UMe,vZ=VMe,fPe=function(){var t=sZ(),e=Z6(1,0,0),n=Z6(0,1,0);return function(r,i,o){var l=aZ(i,o);return l<-.999999?(zS(t,e,i),vMe(t)<1e-6&&zS(t,n,i),uMe(t,t),mZ(r,t,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(zS(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+l,vZ(r,r))}}();(function(){var t=tU(),e=tU();return function(n,r,i,o,l,f){return NS(t,r,l,f),NS(e,i,o,f),NS(n,t,e,2*f*(1-f)),n}})();(function(){var t=yMe();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],vZ(e,gZ(e,t))}})();const hPe=[0,0,0,1];class pPe extends lk{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return gZ(this,e),this.check()}fromAxisRotation(e,n){return mZ(this,e,n),this.check()}identity(){return QMe(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Gi(e)}get y(){return this[1]}set y(e){this[1]=Gi(e)}get z(){return this[2]}set z(e){this[2]=Gi(e)}get w(){return this[3]}set w(e){this[3]=Gi(e)}len(){return uPe(this)}lengthSquared(){return dPe(this)}dot(e){return lPe(this,e)}rotationTo(e,n){return fPe(this,e,n),this.check()}add(e){return sPe(this,this,e),this.check()}calculateW(){return rPe(this,this),this.check()}conjugate(){return oPe(this,this),this.check()}invert(){return iPe(this,this),this.check()}lerp(e,n,r){return r===void 0?this.lerp(this,e,n):(cPe(this,e,n,r),this.check())}multiplyRight(e){return nU(this,this,e),this.check()}multiplyLeft(e){return nU(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return ePe(this,this,e),this.check()}rotateY(e){return tPe(this,this,e),this.check()}rotateZ(e){return nPe(this,this,e),this.check()}scale(e){return aPe(this,this,e),this.check()}slerp(e,n,r){let i,o,l;switch(arguments.length){case 1:({start:i=hPe,target:o,ratio:l}=e);break;case 2:i=this,o=e,l=n;break;default:i=e,o=n,l=r}return NS(this,i,o,l),this.check()}transformVector4(e,n=new uk){return WMe(n,e,this),x_(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const rU=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,mPe={lightSources:{}};function LI(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function gPe(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=LI(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((o,l)=>{i["lighting_uPointLight[".concat(l,"].color")]=LI(o),i["lighting_uPointLight[".concat(l,"].position")]=o.position,i["lighting_uPointLight[".concat(l,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((o,l)=>{i["lighting_uDirectionalLight[".concat(l,"].color")]=LI(o),i["lighting_uDirectionalLight[".concat(l,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=r.length,i}function yZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mPe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},gPe({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return yZ({lightSources:e})}return{}}const dk={name:"lights",vs:rU,fs:rU,getUniforms:yZ,defines:{MAX_LIGHTS:3}},vPe=new Uint8Array([0,255,255,255]),yPe={pickingSelectedColor:null,pickingHighlightColor:vPe,pickingActive:!1,pickingAttribute:!1};function _Pe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yPe;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const bPe=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,xPe=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,wPe={name:"picking",vs:bPe,fs:xPe,getUniforms:_Pe},_Z=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,SPe={};function EPe(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(o=>o/255)}}function bZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SPe;if(!("material"in t))return{};const{material:e}=t;return e?EPe(e):{lighting_uEnabled:!1}}const CPe={name:"gouraud-lighting",dependencies:[dk],vs:_Z,defines:{LIGHTING_VERTEX:1},getUniforms:bZ},TPe={name:"phong-lighting",dependencies:[dk],fs:_Z,defines:{LIGHTING_FRAGMENT:1},getUniforms:bZ},APe=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`,MPe=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`,xZ={name:"pbr",vs:APe,fs:MPe,defines:{LIGHTING_FRAGMENT:1},dependencies:[dk]},PPe=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,IPe={name:"transform",vs:PPe,fs:null};class ox{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new ox(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:o={},varyings:l=[],bufferMode:f=35981,transpileToGLSL100:s=!1}=e,p=this._getModuleList(e.modules),v=this._getHash(n),x=this._getHash(r),S=p.map(k=>this._getHash(k.name)).sort(),M=l.map(k=>this._getHash(k)),P=Object.keys(i).sort(),R=Object.keys(o).sort(),D=[],B=[];for(const k of P)D.push(this._getHash(k)),D.push(this._getHash(i[k]));for(const k of R)B.push(this._getHash(k)),B.push(this._getHash(o[k]));const O="".concat(v,"/").concat(x,"D").concat(D.join("/"),"M").concat(S.join("/"),"I").concat(B.join("/"),"V").concat(M.join("/"),"H").concat(this.stateHash,"B").concat(f).concat(s?"T":"");if(!this._programCache[O]){const k=PAe(this.gl,{vs:n,fs:r,modules:p,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:s});this._programCache[O]=new HY(this.gl,{hash:O,vs:k.vs,fs:k.fs,varyings:l,bufferMode:f}),this._getUniforms[O]=k.getUniforms||($=>{}),this._useCounts[O]=0}return this._useCounts[O]++,this._programCache[O]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let o=0,l=this._defaultModules.length;o<l;++o){const f=this._defaultModules[o],s=f.name;n[i++]=f,r[s]=!0}for(let o=0,l=e.length;o<l;++o){const f=e[o],s=f.name;r[s]||(n[i++]=f,r[s]=!0)}return n.length=i,n}}const RPe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function OPe(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const l=e.attributes[o],f=LPe(o,n);if(o==="indices")i=l;else if(l.constant)r[f]=l.value;else{const s=l.value,p={...l};delete p.value,r[f]=[new Oi(t,s),p],BPe(o,p)}}if(i){const o=i.value||i;In(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const l={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new Oi(t,{data:o,target:34963}),l]}return r}function LPe(t,e){const{attributeMap:n=RPe}=e||{};return n&&n[t]||t}function BPe(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}In(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const qm=2,DPe=1e4,kPe="Model needs drawMode and vertexCount",iU=()=>{},FPe={};class lu{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=_c("model")}=n;In(RT(e)),this.id=r,this.gl=e,this.id=n.id||_c("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||ox.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:o,defines:l,inject:f,varyings:s,bufferMode:p,transpileToGLSL100:v}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:l,inject:f,varyings:s,bufferMode:p,transpileToGLSL100:v},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},In(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),kPe)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:o,defines:l,inject:f,varyings:s,bufferMode:p,transpileToGLSL100:v}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:l,inject:f,varyings:s,bufferMode:p,transpileToGLSL100:v},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return In(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return In(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=OPe(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(cv(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return nk(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:l=this.transformFeedback,parameters:f={},vertexArray:s=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(i);let p;Hn.priority>=qm&&(p=this._logDrawCallStart(qm));const v=this.vertexArray.getDrawParams(),{isIndexed:x=v.isIndexed,indexType:S=v.indexType,indexOffset:M=v.indexOffset,vertexArrayInstanced:P=v.isInstanced}=this.props;P&&!this.isInstanced&&Hn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:R,instanceCount:D}=this,{onBeforeRender:B=iU,onAfterRender:O=iU}=this.props;B(),this.program.setUniforms(this.uniforms);const k=this.program.draw(Object.assign(FPe,e,{logPriority:p,uniforms:null,framebuffer:r,parameters:f,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:s,transformFeedback:l,isIndexed:x,indexType:S,isInstanced:R,instanceCount:D,offset:x?M:0}));return O(),Hn.priority>=qm&&this._logDrawCallEnd(p,s,r),k}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:o}=e;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,{35977:n})),i.forEach(l=>l.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{i.forEach(l=>l.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Hn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:o,inject:l,defines:f,varyings:s,bufferMode:p,transpileToGLSL100:v}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:o,inject:l,defines:f,varyings:s,bufferMode:p,transpileToGLSL100:v}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}In(n instanceof HY,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new UTe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Oi&&n.delete()}}_setAnimationProps(e){this.animated&&In(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(cv(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new WY(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:DPe;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Hn.group(qm,">>> DRAWING MODEL ".concat(this.id),{collapsed:Hn.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const o=HTe({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:l,unusedTable:f,unusedCount:s}=z6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:p,count:v}=z6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});v>0&&Hn.log("MISSING UNIFORMS",Object.keys(p))(),s>0&&Hn.log("UNUSED UNIFORMS",Object.keys(f))();const x=XTe(this.vertexArray.configuration);Hn.table(e,o)(),Hn.table(e,l)(),Hn.table(e+1,x)(),i&&i.log({logLevel:qm,message:"Rendered to ".concat(i.id)}),Hn.groupEnd(qm)()}}class zPe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof Oi?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&In(kr(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in n&&(r[o]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const o=r[i];if(typeof o=="string"){const l=n[o],{byteLength:f,usage:s,accessor:p}=l;r[i]=this._createNewBuffer(i,{byteLength:f,usage:s,accessor:p})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new WY(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];n[i]=e.feedbackBuffers[o],r[o]=e.sourceBuffers[i],In(r[o]instanceof Oi)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new Oi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const NPe="transform_uSampler_",rC="transform_uSize_",oU="transform_position";function $Pe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,l=Object.keys(n).length,f=null;const s={};let p=e,v={};if(l>0||r){const x=p.split(`
`),S=x.slice();if(x.forEach((M,P,R)=>{if(l>0){const D=HPe(M,n);if(D){const{updatedLine:B,inject:O}=D;S[P]=B,v=NL([v,O]),Object.assign(s,D.samplerTextureMap),l--}}r&&!f&&(f=GPe(M,r))}),r){In(i);const M="".concat(rC).concat(r),P="uniform vec2 ".concat(M,`;
`),R="     vec2 ".concat(oU," = transform_getPos(").concat(M,`);
     gl_Position = vec4(`).concat(oU,`, 0, 1.);
`);v=NL([v,{"vs:#decl":P,"vs:#main-start":R}])}p=S.join(`
`)}return{vs:p,targetTextureType:f,inject:v,samplerTextureMap:s}}function jPe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,l;n&&({width:o,height:l}=r,i["".concat(rC).concat(n)]=[o,l]);for(const f in e)({width:o,height:l}=e[f]),i["".concat(rC).concat(f)]=[o,l];return i}function UPe(t){return QY(t,["attribute","in"])}function VPe(t){const e="".concat(NPe).concat(t),n="".concat(rC).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function GPe(t,e){const n=QY(t,["varying","out"]);return n&&n.name===e?n.type:null}function HPe(t,e){const n={},r=UPe(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const l="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:f,sizeName:s,uniformDeclerations:p}=VPe(o),v=zAe(i),x="  ".concat(i," ").concat(o," = transform_getInput(").concat(f,", ").concat(s,").").concat(v,`;
`);return n[f]=o,{updatedLine:l,inject:{"vs:#decl":p,"vs:#main-start":x},samplerTextureMap:n}}return null}const WPe={10241:9728,10240:9728,10242:33071,10243:33071},XPe="transform_output";class qPe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],l=Object.assign({},n,e.attributes),f=Object.assign({},e.uniforms),s=Object.assign({},e.parameters);let p=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){l.transform_elementID=this.elementIDBuffer;for(const x in this.samplerTextureMap){const S=this.samplerTextureMap[x];f[x]=r[S]}this._setSourceTextureParameters();const v=jPe({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(f,v)}return this.hasTargetTexture&&(p=!1,s.viewport=[0,0,i.width,i.height]),{attributes:l,framebuffer:i,uniforms:f,discard:p,parameters:s}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=LT(n);if(!e)return r;const i=r.constructor,o=NAe(this.targetTextureType),l=new i(r.length*o/4);let f=0;for(let s=0;s<r.length;s+=4)for(let p=0;p<o;p++)l[f++]=r[s+p];return l}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof Zs)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Oi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),o){e.targetTexture=o;const{width:l,height:f}=o,{framebuffer:s}=e;s?(s.update({attachments:{36064:o},resizeAttachments:!1}),s.resize({width:l,height:f})):e.framebuffer=new Jo(this.gl,{id:"transform-framebuffer",width:l,height:f,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(WPe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=RCe(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:l,inject:f,samplerTextureMap:s}=$Pe({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),p=NL([e.inject||{},f]);this.targetTextureType=l,this.samplerTextureMap=s;const v=e._fs||eZ({version:VY(i),input:this.targetTextureVarying,inputType:l,output:XPe}),x=this.hasSourceTextures||this.targetTextureVarying?[IPe].concat(e.modules||[]):e.modules;return{vs:i,fs:v,modules:x,uniforms:o,inject:p}}}class fk{static isSupported(e){return kr(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();In(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new lu(n,Object.assign({},e,{fs:e.fs||eZ({version:VY(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){YPe(n)&&(this.bufferTransform=new zPe(e,n)),ZPe(n)&&(this.textureTransform=new qPe(e,n)),In(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function YPe(t){return!!(!cv(t.feedbackBuffers)||!cv(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function ZPe(t){return!!(!cv(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const sU={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Zu{static get DRAW_MODE(){return sU}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=_c("geometry"),drawMode:r=sU.TRIANGLES,attributes:i={},indices:o=null,vertexCount:l=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=l||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,In(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(In(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const o=e[i],{value:l,size:f,constant:s}=o;!s&&l&&f>=1&&(r=Math.min(r,l.length/f))}return In(Number.isFinite(r)),r}}const KPe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class JPe extends Zu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=_c("truncated-code-geometry")}=e,{indices:r,attributes:i}=QPe(e);super({...e,id:n,indices:r,attributes:{...i,...e.attributes}})}}function QPe(t){const{bottomRadius:e=0,topRadius:n=0,height:r=1,nradial:i=10,nvertical:o=10,verticalAxis:l="y",topCap:f=!1,bottomCap:s=!1}=t,p=(f?2:0)+(s?2:0),v=(i+1)*(o+1+p),x=Math.atan2(e-n,r),S=Math.sin,M=Math.cos,P=Math.PI,R=M(x),D=S(x),B=f?-2:0,O=o+(s?2:0),k=i+1,$=new Uint16Array(i*(o+p)*6),H=KPe[l],U=new Float32Array(v*3),X=new Float32Array(v*3),J=new Float32Array(v*2);let K=0,Q=0;for(let ce=B;ce<=O;ce++){let ge=ce/o,ae=r*ge,ve;ce<0?(ae=0,ge=1,ve=e):ce>o?(ae=r,ge=1,ve=n):ve=e+(n-e)*(ce/o),(ce===-2||ce===o+2)&&(ve=0,ge=0),ae-=r/2;for(let Fe=0;Fe<k;Fe++){const Ae=S(Fe*P*2/i),pe=M(Fe*P*2/i);U[K+H[0]]=Ae*ve,U[K+H[1]]=ae,U[K+H[2]]=pe*ve,X[K+H[0]]=ce<0||ce>o?0:Ae*R,X[K+H[1]]=ce<0?-1:ce>o?1:D,X[K+H[2]]=ce<0||ce>o?0:pe*R,J[Q+0]=Fe/i,J[Q+1]=ge,Q+=2,K+=3}}for(let ce=0;ce<o+p;ce++)for(let ge=0;ge<i;ge++){const ae=(ce*i+ge)*6;$[ae+0]=k*(ce+0)+0+ge,$[ae+1]=k*(ce+0)+1+ge,$[ae+2]=k*(ce+1)+1+ge,$[ae+3]=k*(ce+0)+0+ge,$[ae+4]=k*(ce+1)+1+ge,$[ae+5]=k*(ce+1)+0+ge}return{indices:$,attributes:{POSITION:{size:3,value:U},NORMAL:{size:3,value:X},TEXCOORD_0:{size:2,value:J}}}}class eIe extends JPe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=_c("cylinder-geometry"),radius:r=1}=e;super({...e,id:n,bottomRadius:r,topRadius:r})}}let tIe=1,nIe=1;class wZ{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,l=tIe++,f={time:0,delay:n,duration:r,rate:i,repeat:o};return this._setChannelTime(f,this.time),this.channels.set(l,f),l}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:o,channel:l}=i;o.setTime(this.getTime(l))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=nIe++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const rIe=[255,255,255],iIe=1;let oIe=0;class sIe{constructor(e={}){j(this,"id",void 0),j(this,"color",void 0),j(this,"intensity",void 0),j(this,"type","ambient");const{color:n=rIe}=e,{intensity:r=iIe}=e;this.id=e.id||"ambient-".concat(oIe++),this.color=n,this.intensity=r}}const aIe=[255,255,255],lIe=1,cIe=[0,0,-1];let uIe=0;class aU{constructor(e={}){j(this,"id",void 0),j(this,"color",void 0),j(this,"intensity",void 0),j(this,"type","directional"),j(this,"direction",void 0),j(this,"shadow",void 0);const{color:n=aIe}=e,{intensity:r=lIe}=e,{direction:i=cIe}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(uIe++),this.color=n,this.intensity=r,this.type="directional",this.direction=new _s(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class dIe{constructor(e,n={id:"pass"}){j(this,"id",void 0),j(this,"gl",void 0),j(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class hk extends dIe{constructor(...e){super(...e),j(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return cd(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:o,onViewportActive:l,clearStack:f=!0,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const p=this.gl;s&&hIe(p,n),f&&(this._lastRenderIndex=-1);const v=[];for(const x of i){const S=o&&o[x.id];l==null||l(x);const M=this._getDrawLayerParams(x,e),P=x.subViewports||[x];for(const R of P){const D=this._drawLayersInViewport(p,{target:n,moduleParameters:r,viewport:R,view:S,pass:e.pass,layers:e.layers},M);v.push(D)}}return v}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:l,effects:f,moduleParameters:s},p=!1){const v=[],x=SZ(this._lastRenderIndex+1),S={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:l},M={};for(let P=0;P<n.length;P++){const R=n[P],D=this._shouldDrawLayer(R,S,o,M),B={shouldDrawLayer:D};D&&!p&&(B.layerRenderIndex=x(R,D),B.moduleParameters=this._getModuleParameters(R,f,r,s),B.layerParameters=this.getLayerParameters(R,P,e)),v[P]=B}return v}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:o,viewport:l,view:f},s){const p=fIe(e,{moduleParameters:r,target:o,viewport:l});if(f&&f.props.clear){const x=f.props.clear===!0?{color:!0,depth:!0}:f.props.clear;gc(e,{scissorTest:!0,scissor:p},()=>nk(e,x))}const v={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};cd(e,{viewport:p});for(let x=0;x<n.length;x++){const S=n[x],{shouldDrawLayer:M,layerRenderIndex:P,moduleParameters:R,layerParameters:D}=s[x];if(M&&S.props.pickable&&v.pickableCount++,S.isComposite)v.compositeCount++;else if(M){v.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,P),R.viewport=l;try{S._drawLayer({moduleParameters:R,uniforms:{layerIndex:P},parameters:D})}catch(B){S.raiseError(B,"drawing ".concat(S," to ").concat(i))}}}return v}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let l=e.parent;for(;l;){if(!l.props.visible||!l.filterSubLayer(n))return!1;n.layer=l,l=l.parent}if(r){const f=n.layer.id;if(f in i||(i[f]=r(n)),!i[f])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var o;const l=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:lv(this.gl)});if(n)for(const s of n){var f;Object.assign(l,(f=s.getModuleParameters)===null||f===void 0?void 0:f.call(s,e))}return Object.assign(l,this.getModuleParameters(e,n),i)}}function SZ(t=0,e={}){const n={},r=(i,o)=>{const l=i.props._offset,f=i.id,s=i.parent&&i.parent.id;let p;if(s&&!(s in e)&&r(i.parent,!1),s in n){const v=n[s]=n[s]||SZ(e[s],e);p=v(i,o),n[f]=v}else Number.isFinite(l)?(p=l+(e[s]||0),n[f]=null):p=t;return o&&p>=t&&(t=p+1),e[f]=p,p};return r}function fIe(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||lv(t),l=i?n.height:t.drawingBufferHeight,f=r;return[f.x*o,l-(f.y+f.height)*o,f.width*o,f.height*o]}function hIe(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;cd(t,{viewport:[0,0,n,r]}),t.clear(16640)}class pIe extends hk{constructor(e,n){super(e,n),j(this,"shadowMap",void 0),j(this,"depthBuffer",void 0),j(this,"fbo",void 0),this.shadowMap=new Zs(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Sg(e,{format:33189,width:1,height:1}),this.fbo=new Jo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;gc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=lv(this.gl),o=r.width*i,l=r.height*i;(o!==n.width||l!==n.height)&&n.resize({width:o,height:l}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const EZ="#define SMOOTH_EDGE_RADIUS 0.5",mIe=`
`.concat(EZ,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),gIe=`
`.concat(EZ,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),vIe={name:"geometry",vs:mIe,fs:gIe},yIe=Object.keys(ni).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ni[t],";")).join(""),_Ie=Object.keys(eu).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(eu[t],";")).join(""),bIe=Object.keys(vp).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(vp[t],";")).join(""),xIe="".concat(yIe,`
`).concat(_Ie,`
`).concat(bIe,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function wIe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function sx(t){let e={},n;return r=>{for(const i in r)if(!wIe(r[i],e[i])){n=t(r),e=r;break}return n}}const lU=[0,0,0,0],SIe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],CZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],EIe=[0,0,0],TZ=[0,0,0],CIe=sx(MIe);function AZ(t,e,n=TZ){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,o=!0;switch(e===ni.LNGLAT_OFFSETS||e===ni.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case eu.WEB_MERCATOR:(e===ni.LNGLAT||e===ni.CARTESIAN)&&(i=[0,0,0],o=!1);break;case eu.WEB_MERCATOR_AUTO_OFFSET:e===ni.LNGLAT?r=i:e===ni.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case eu.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case eu.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}function TIe(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:l}=t,f=lU,s=lU,p=t.cameraPosition;const{geospatialOrigin:v,shaderCoordinateOrigin:x,offsetMode:S}=AZ(t,e,n);return S&&(s=t.projectPosition(v||x),p=[p[0]-s[0],p[1]-s[1],p[2]-s[2]],s[3]=1,f=ix([],s,l),o=r||o,l=ou([],i,o),l=ou([],l,SIe)),{viewMatrix:o,viewProjectionMatrix:l,projectionCenter:f,originCommon:s,cameraPosCommon:p,shaderCoordinateOrigin:x,geospatialOrigin:v}}function AIe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ni.DEFAULT,coordinateOrigin:i=TZ,autoWrapLongitude:o=!1}){r===ni.DEFAULT&&(r=t.isGeospatial?ni.LNGLAT:ni.CARTESIAN);const l=CIe({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return l.project_uWrapLongitude=o,l.project_uModelMatrix=n||CZ,l}function MIe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:l,cameraPosCommon:f,shaderCoordinateOrigin:s,geospatialOrigin:p}=TIe(t,n,r),v=t.getDistanceScales(),x=[t.width*e,t.height*e],S=ix([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,M={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:s,project_uCommonOrigin:l.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:x,project_uDevicePixelRatio:e,project_uFocalDistance:S,project_uCommonUnitsPerMeter:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:EIe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:CZ,project_uCameraPosition:f};if(p){const P=t.getDistanceScales(p);switch(n){case ni.METER_OFFSETS:M.project_uCommonUnitsPerWorldUnit=P.unitsPerMeter,M.project_uCommonUnitsPerWorldUnit2=P.unitsPerMeter2;break;case ni.LNGLAT:case ni.LNGLAT_OFFSETS:t._pseudoMeters||(M.project_uCommonUnitsPerMeter=P.unitsPerMeter),M.project_uCommonUnitsPerWorldUnit=P.unitsPerDegree,M.project_uCommonUnitsPerWorldUnit2=P.unitsPerDegree2;break;case ni.CARTESIAN:M.project_uCommonUnitsPerWorldUnit=[1,1,P.unitsPerMeter[2]],M.project_uCommonUnitsPerWorldUnit2=[0,0,P.unitsPerMeter2[2]];break}}return M}const PIe={};function IIe(t=PIe){return"viewport"in t?AIe(t):{}}const pk={name:"project",dependencies:[UAe,vIe],vs:xIe,getUniforms:IIe};function $S(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zg(t,e){const n=ix([],e,t);return pZ(n,n,1/n[3]),n}function cU(t,e){const n=t%e;return n<0?e+n:n}function RIe(t,e,n){return n*e+(1-n)*t}function GL(t,e,n){return t<e?e:t>n?n:t}function OIe(t){return Math.log(t)*Math.LOG2E}const mk=Math.log2||OIe;function ud(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const lc=Math.PI,MZ=lc/4,wl=lc/180,HL=180/lc,dv=512,iC=4003e4,Dw=85.051129,PZ=1.5;function WL(t){return Math.pow(2,t)}function IZ(t){return mk(t)}function tu(t){const[e,n]=t;ud(Number.isFinite(e)),ud(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*wl,i=n*wl,o=dv*(r+lc)/(2*lc),l=dv*(lc+Math.log(Math.tan(MZ+i*.5)))/(2*lc);return[o,l]}function su(t){const[e,n]=t,r=e/dv*(2*lc)-lc,i=2*(Math.atan(Math.exp(n/dv*(2*lc)-lc))-MZ);return[r*HL,i*HL]}function LIe(t){const{latitude:e}=t;ud(Number.isFinite(e));const n=Math.cos(e*wl);return IZ(iC*n)-9}function BI(t){const e=Math.cos(t*wl);return dv/iC/e}function oC(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;ud(Number.isFinite(e)&&Number.isFinite(n));const i=dv,o=Math.cos(e*wl),l=i/360,f=l/o,s=i/iC/o,p={unitsPerMeter:[s,s,s],metersPerUnit:[1/s,1/s,1/s],unitsPerDegree:[l,f,s],degreesPerUnit:[1/l,1/f,1/s]};if(r){const v=wl*Math.tan(e*wl)/o,x=l*v/2,S=i/iC*v,M=S/f*s;p.unitsPerDegree2=[0,x,S],p.unitsPerMeter2=[M,0,M]}return p}function RZ(t,e){const[n,r,i]=t,[o,l,f]=e,{unitsPerMeter:s,unitsPerMeter2:p}=oC({longitude:n,latitude:r,highPrecision:!0}),v=tu(t);v[0]+=o*(s[0]+p[0]*l),v[1]+=l*(s[1]+p[1]*l);const x=su(v),S=(i||0)+(f||0);return Number.isFinite(i)||Number.isFinite(f)?[x[0],x[1],S]:x}function OZ(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:l}=t,f=$S();vb(f,f,[0,0,-i]),dZ(f,f,-n*wl),fZ(f,f,r*wl);const s=o/e;return BT(f,f,[s,s,s]),l&&vb(f,f,cMe([],l)),f}function LZ(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:l,scale:f,nearZMultiplier:s=1,farZMultiplier:p=1}=t;let{fovy:v=fv(PZ)}=t;r!==void 0&&(v=fv(r));const x=v*wl,S=i*wl,M=gk(v);let P=M;l&&(P+=l[2]*f/Math.cos(S)/n);const R=x*(.5+(o?o[1]:0)/n),D=Math.sin(R)*P/Math.sin(GL(Math.PI/2-S-R,.01,Math.PI-.01)),B=Math.sin(S)*D+P,O=P*10,k=Math.min(B*p,O);return{fov:x,aspect:e/n,focalDistance:M,near:s,far:k}}function BIe(t){const{fov:e,aspect:n,near:r,far:i}=LZ(t);return hZ([],e,n,r,i)}function fv(t){return 2*Math.atan(.5/t)*HL}function gk(t){return .5/Math.tan(.5*t*wl)}function vk(t,e){const[n,r,i=0]=t;return ud(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),zg(e,[n,r,i,1])}function yb(t,e,n=0){const[r,i,o]=t;if(ud(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return zg(e,[r,i,o,1]);const l=zg(e,[r,i,0,1]),f=zg(e,[r,i,1,1]),s=l[2],p=f[2],v=s===p?0:((n||0)-s)/(p-s);return rZ([],l,f,v)}function BZ(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:l=[0,0]}=t,[[f,s],[p,v]]=r,x=DIe(t.padding),S=tu([f,GL(v,-Dw,Dw)]),M=tu([p,GL(s,-Dw,Dw)]),P=[Math.max(Math.abs(M[0]-S[0]),i),Math.max(Math.abs(M[1]-S[1]),i)],R=[e-x.left-x.right-Math.abs(l[0])*2,n-x.top-x.bottom-Math.abs(l[1])*2];ud(R[0]>0&&R[1]>0);const D=R[0]/P[0],B=R[1]/P[1],O=(x.right-x.left)/2/D,k=(x.top-x.bottom)/2/B,$=[(M[0]+S[0])/2+O,(M[1]+S[1])/2+k],H=su($),U=Math.min(o,mk(Math.abs(Math.min(D,B))));return ud(Number.isFinite(U)),{longitude:H[0],latitude:H[1],zoom:U}}function DIe(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(ud(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const uU=Math.PI/180;function DZ(t,e=0){const{width:n,height:r,unproject:i}=t,o={targetZ:e},l=i([0,r],o),f=i([n,r],o);let s,p;const v=t.fovy?.5*t.fovy*uU:Math.atan(.5/t.altitude),x=(90-t.pitch)*uU;return v>x-.01?(s=dU(t,0,e),p=dU(t,n,e)):(s=i([0,0],o),p=i([n,0],o)),[l,f,p,s]}function dU(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=zg(r,[e,0,1,1]),o=zg(r,[e,t.height,1,1]),f=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),s=rZ([],i,o,f),p=su(s);return p.push(n),p}let lp=class XL{constructor(e={width:1,height:1}){j(this,"latitude",void 0),j(this,"longitude",void 0),j(this,"zoom",void 0),j(this,"pitch",void 0),j(this,"bearing",void 0),j(this,"altitude",void 0),j(this,"fovy",void 0),j(this,"meterOffset",void 0),j(this,"center",void 0),j(this,"width",void 0),j(this,"height",void 0),j(this,"scale",void 0),j(this,"distanceScales",void 0),j(this,"viewMatrix",void 0),j(this,"projectionMatrix",void 0),j(this,"viewProjectionMatrix",void 0),j(this,"pixelProjectionMatrix",void 0),j(this,"pixelUnprojectionMatrix",void 0),j(this,"equals",B=>B instanceof XL?B.width===this.width&&B.height===this.height&&Q6(B.projectionMatrix,this.projectionMatrix)&&Q6(B.viewMatrix,this.viewMatrix):!1),j(this,"project",(B,O={})=>{const{topLeft:k=!0}=O,$=this.projectPosition(B),H=vk($,this.pixelProjectionMatrix),[U,X]=H,J=k?X:this.height-X;return B.length===2?[U,J]:[U,J,H[2]]}),j(this,"unproject",(B,O={})=>{const{topLeft:k=!0,targetZ:$=void 0}=O,[H,U,X]=B,J=k?U:this.height-U,K=$&&$*this.distanceScales.unitsPerMeter[2],Q=yb([H,J,X],this.pixelUnprojectionMatrix,K),[ce,ge,ae]=this.unprojectPosition(Q);return Number.isFinite(X)?[ce,ge,ae]:Number.isFinite($)?[ce,ge,$]:[ce,ge]}),j(this,"projectPosition",B=>{const[O,k]=tu(B),$=(B[2]||0)*this.distanceScales.unitsPerMeter[2];return[O,k,$]}),j(this,"unprojectPosition",B=>{const[O,k]=su(B),$=(B[2]||0)*this.distanceScales.metersPerUnit[2];return[O,k,$]});let{width:n,height:r,altitude:i=null,fovy:o=null}=e;const{latitude:l=0,longitude:f=0,zoom:s=0,pitch:p=0,bearing:v=0,position:x=null,nearZMultiplier:S=.02,farZMultiplier:M=1.01}=e;n=n||1,r=r||1,o===null&&i===null?(i=PZ,o=fv(i)):o===null?o=fv(i):i===null&&(i=gk(o));const P=WL(s);i=Math.max(.75,i);const R=oC({longitude:f,latitude:l}),D=tu([f,l]);D.push(0),x&&sMe(D,D,gMe([],x,R.unitsPerMeter)),this.projectionMatrix=BIe({width:n,height:r,scale:P,center:D,pitch:p,fovy:o,nearZMultiplier:S,farZMultiplier:M}),this.viewMatrix=OZ({height:r,scale:P,center:D,pitch:p,bearing:v,altitude:i}),this.width=n,this.height=r,this.scale=P,this.latitude=l,this.longitude=f,this.zoom=s,this.pitch=p,this.bearing=v,this.altitude=i,this.fovy=o,this.center=D,this.meterOffset=x||[0,0,0],this.distanceScales=R,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:e,height:n,projectionMatrix:r,viewMatrix:i}=this,o=$S();ou(o,o,r),ou(o,o,i),this.viewProjectionMatrix=o;const l=$S();BT(l,l,[e/2,-n/2,1]),vb(l,l,[1,-1,0]),ou(l,l,o);const f=nC($S(),l);if(!f)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=l,this.pixelUnprojectionMatrix=f}projectFlat(e){return tu(e)}unprojectFlat(e){return su(e)}getMapCenterByLngLatPosition({lngLat:e,pos:n}){const r=yb(n,this.pixelUnprojectionMatrix),i=tu(e),o=gb([],i,nZ([],r)),l=gb([],this.center,o);return su(l)}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:o,latitude:l,zoom:f}=BZ(Object.assign({width:r,height:i,bounds:e},n));return new XL({width:r,height:i,longitude:o,latitude:l,zoom:f})}getBounds(e){const n=this.getBoundingRegion(e),r=Math.min(...n.map(f=>f[0])),i=Math.max(...n.map(f=>f[0])),o=Math.min(...n.map(f=>f[1])),l=Math.max(...n.map(f=>f[1]));return[[r,o],[i,l]]}getBoundingRegion(e={}){return DZ(this,e.z||0)}getLocationAtPoint({lngLat:e,pos:n}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}};const fU=512;function kZ(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:l,bearing:f=0}=t;(i<-180||i>180)&&(i=cU(i+180,360)-180),(f<-180||f>180)&&(f=cU(f+180,360)-180);const s=mk(n/fU);if(l<=s)l=s,o=0;else{const p=n/2/Math.pow(2,l),v=su([0,p])[1];if(o<v)o=v;else{const x=su([0,fU-p])[1];o>x&&(o=x)}}return{width:e,height:n,longitude:i,latitude:o,zoom:l,pitch:r,bearing:f}}const FZ=.01,kIe=["longitude","latitude","zoom"],zZ={curve:1.414,speed:1.2};function NZ(t,e,n,r){const{startZoom:i,startCenterXY:o,uDelta:l,w0:f,u1:s,S:p,rho:v,rho2:x,r0:S}=jZ(t,e,r);if(s<FZ){const $={};for(const H of kIe){const U=t[H],X=e[H];$[H]=RIe(U,X,n)}return $}const M=n*p,P=Math.cosh(S)/Math.cosh(S+v*M),R=f*((Math.cosh(S)*Math.tanh(S+v*M)-Math.sinh(S))/x)/s,D=1/P,B=i+IZ(D),O=KAe([],l,R);gb(O,O,o);const k=su(O);return{longitude:k[0],latitude:k[1],zoom:B}}function $Z(t,e,n){const r={...zZ,...n},{screenSpeed:i,speed:o,maxDuration:l}=r,{S:f,rho:s}=jZ(t,e,r),p=1e3*f;let v;return Number.isFinite(i)?v=p/(i/s):v=p/o,Number.isFinite(l)&&v>l?0:v}function jZ(t,e,n){n=Object.assign({},zZ,n);const r=n.curve,i=t.zoom,o=[t.longitude,t.latitude],l=WL(i),f=e.zoom,s=[e.longitude,e.latitude],p=WL(f-i),v=tu(o),x=tu(s),S=tMe([],x,v),M=Math.max(t.width,t.height),P=M/p,R=JAe(S)*l,D=Math.max(R,FZ),B=r*r,O=(P*P-M*M+B*B*D*D)/(2*M*B*D),k=(P*P-M*M-B*B*D*D)/(2*P*B*D),$=Math.log(Math.sqrt(O*O+1)-O),H=Math.log(Math.sqrt(k*k+1)-k),U=(H-$)/r;return{startZoom:i,startCenterXY:v,uDelta:S,w0:M,u1:R,S:U,rho:r,rho2:B,r0:$,r1:H}}const FIe=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,zIe=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,NIe=sx(GIe),$Ie=sx(HIe),jIe=[0,0,0,1],UIe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function VIe(t,e){const[n,r,i]=t,o=yb([n,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function GIe({viewport:t,center:e}){return new zs(t.viewProjectionMatrix).invert().transform(e)}function HIe({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(l=>VIe(l,r));for(const l of e){const f=l.clone().translate(new _s(t.center).negate()),s=o.map(v=>f.transform(v)),p=new zs().ortho({left:Math.min(...s.map(v=>v[0])),right:Math.max(...s.map(v=>v[0])),bottom:Math.min(...s.map(v=>v[1])),top:Math.max(...s.map(v=>v[1])),near:Math.min(...s.map(v=>-v[2])),far:Math.max(...s.map(v=>-v[2]))});n.push(p.multiplyRight(l))}return n}function WIe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||jIe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=NIe({viewport:t.viewport,center:e.project_uCenter}),o=[],l=$Ie({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let f=0;f<t.shadowMatrices.length;f++){const s=l[f],p=s.clone().translate(new _s(t.viewport.center).negate());e.project_uCoordinateSystem===ni.LNGLAT&&e.project_uProjectionMode===eu.WEB_MERCATOR?(l[f]=p,o[f]=i):(l[f]=s.clone().multiplyRight(UIe),o[f]=p.transform(i))}for(let f=0;f<l.length;f++)r["shadow_uViewProjectionMatrices[".concat(f,"]")]=l[f],r["shadow_uProjectCenters[".concat(f,"]")]=o[f],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(f)]=t.shadowMaps[f]:r["shadow_uShadowMap".concat(f)]=t.dummyShadowMap;return r}const DI={name:"shadow",dependencies:[pk],vs:FIe,fs:zIe,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?WIe(t,e):{}},XIe={color:[255,255,255],intensity:1},hU=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],qIe=[0,0,0,200/255];class UZ{constructor(e={}){j(this,"id","lighting-effect"),j(this,"props",void 0),j(this,"shadowColor",qIe),j(this,"shadow",void 0),j(this,"ambientLight",void 0),j(this,"directionalLights",void 0),j(this,"pointLights",void 0),j(this,"shadowPasses",[]),j(this,"shadowMaps",[]),j(this,"dummyShadowMap",null),j(this,"programManager",void 0),j(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:l}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=ox.getDefaultProgramManager(e),DI&&this.programManager.addDefaultModule(DI)),this.dummyShadowMap||(this.dummyShadowMap=new Zs(e,{width:1,height:1}));for(let f=0;f<this.shadowPasses.length;f++)this.shadowPasses[f].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:l,moduleParameters:{shadowLightId:f,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(DI),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new zs().lookAt({eye:new _s(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new pIe(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new sIe(XIe),this.directionalLights.push(new aU(hU[0]),new aU(hU[1])))}}class YIe{constructor(e={}){j(this,"_pool",[]),j(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:o=0,copy:l=!1,initialize:f=!1,maxCount:s}){const p=i||e&&e.constructor||Float32Array,v=n*r+o;if(ArrayBuffer.isView(e)){if(v<=e.length)return e;if(v*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new p(e.buffer,0,v)}let x=1/0;s&&(x=s*r+o);const S=this._allocate(p,v,f,x);return e&&l?S.set(e):f||S.fill(0,0,4),this._release(e),S}release(e){this._release(e)}_allocate(e,n,r,i){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>i&&(o=i);const l=this._pool,f=e.BYTES_PER_ELEMENT*o,s=l.findIndex(p=>p.byteLength>=f);if(s>=0){const p=new e(l.splice(s,1)[0],0,o);return r&&p.fill(0),p}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,o=n.findIndex(l=>l.byteLength>=i);o<0?n.push(r):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,r),n.length>this.opts.poolSize&&n.shift()}}const hv=new YIe;function Y0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ZIe(t){return[t[12],t[13],t[14]]}function KIe(t){return{left:Ym(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ym(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ym(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ym(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ym(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ym(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const pU=new _s;function Ym(t,e,n,r){pU.set(t,e,n);const i=pU.len();return{distance:r/i,normal:new _s(-t/i,-e/i,-n/i)}}function JIe(t){return t-Math.fround(t)}let A0;function kI(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-r)/n;A0=hv.allocate(A0,o,{type:Float32Array,size:n*2});let l=r,f=0;for(;l<i;){for(let s=0;s<n;s++){const p=t[l++];A0[f+s]=p,A0[f+s+n]=JIe(p)}f+=n*2}return A0.subarray(0,o*n*2)}function QIe(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const eRe=Math.PI/180,tRe=Y0(),mU=[0,0,0],nRe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function rRe({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:l,far:f}){const s=t/e,p=n?new zs().orthographic({fovy:r,aspect:s,focalDistance:i,near:l,far:f}):new zs().perspective({fovy:r,aspect:s,near:l,far:f});if(o){const{left:v=0,right:x=0,top:S=0,bottom:M=0}=o,P=_f((v+t-x)/2,0,t)-t/2,R=_f((S+e-M)/2,0,e)-e/2;p[8]-=P*2/t,p[9]+=R*2/e}return p}class Dv{constructor(e={}){j(this,"id",void 0),j(this,"x",void 0),j(this,"y",void 0),j(this,"width",void 0),j(this,"height",void 0),j(this,"padding",void 0),j(this,"isGeospatial",void 0),j(this,"zoom",void 0),j(this,"focalDistance",void 0),j(this,"position",void 0),j(this,"modelMatrix",void 0),j(this,"distanceScales",void 0),j(this,"scale",void 0),j(this,"center",void 0),j(this,"cameraPosition",void 0),j(this,"projectionMatrix",void 0),j(this,"viewMatrix",void 0),j(this,"viewMatrixUncentered",void 0),j(this,"viewMatrixInverse",void 0),j(this,"viewProjectionMatrix",void 0),j(this,"pixelProjectionMatrix",void 0),j(this,"pixelUnprojectionMatrix",void 0),j(this,"resolution",void 0),j(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||nRe,this.focalDistance=e.focalDistance||1,this.position=e.position||mU,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?eu.WEB_MERCATOR:eu.WEB_MERCATOR_AUTO_OFFSET:eu.IDENTITY}equals(e){return e instanceof Dv?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&mb(e.projectionMatrix,this.projectionMatrix)&&mb(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=vk(r,this.pixelProjectionMatrix),[o,l]=i,f=n?l:this.height-l;return e.length===2?[o,f]:[o,f,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,o,l]=e,f=n?o:this.height-o,s=r&&r*this.distanceScales.unitsPerMeter[2],p=yb([i,f,l],this.pixelUnprojectionMatrix,s),[v,x,S]=this.unprojectPosition(p);return Number.isFinite(l)?[v,x,S]:Number.isFinite(r)?[v,x,r]:[v,x]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=tu(e);return n[1]=_f(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?su(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),l=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],o[0],l[0]),Math.min(r[1],i[1],o[1],l[1]),Math.max(r[0],i[0],o[0],l[0]),Math.max(r[1],i[1],o[1],l[1])]}getDistanceScales(e){return e?oC({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,KIe(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=LIe({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||oC({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:l}=e;let f=mU;if(o&&(f=l?new zs(l).transformAsVector(o,[]):o),this.isGeospatial){const s=this.projectPosition([n,r,0]);this.center=new _s(f).scale(this.distanceScales.unitsPerMeter).add(s)}else this.center=this.projectPosition(f)}_initMatrices(e){const{viewMatrix:n=tRe,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:o,fovy:l=75,near:f=.1,far:s=1e3,padding:p=null,focalDistance:v=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new zs().multiplyRight(n).translate(new _s(this.center).negate()),this.projectionMatrix=r||rRe({width:this.width,height:this.height,orthographic:i,fovyRadians:o||l*eRe,focalDistance:v,padding:p,near:f,far:s});const x=Y0();ou(x,x,this.projectionMatrix),ou(x,x,this.viewMatrix),this.viewProjectionMatrix=x,this.viewMatrixInverse=nC([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=ZIe(this.viewMatrixInverse);const S=Y0(),M=Y0();BT(S,S,[this.width/2,-this.height/2,1]),vb(S,S,[1,-1,0]),ou(M,S,this.viewProjectionMatrix),this.pixelProjectionMatrix=M,this.pixelUnprojectionMatrix=nC(Y0(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Mr.warn("Pixel project matrix not invertible")()}}j(Dv,"displayName","Viewport");class bp extends Dv{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:l=0,nearZMultiplier:f=.1,farZMultiplier:s=1.01,nearZ:p,farZ:v,orthographic:x=!1,projectionMatrix:S,repeat:M=!1,worldOffset:P=0,position:R,padding:D,legacyMeterSizes:B=!1}=e;let{width:O,height:k,altitude:$=1.5}=e;const H=Math.pow(2,i);O=O||1,k=k||1;let U,X=null;if(S)$=S[5]/2,U=fv($);else{e.fovy?(U=e.fovy,$=gk(U)):U=fv($);let K;if(D){const{top:Q=0,bottom:ce=0}=D;K=[0,_f((Q+k-ce)/2,0,k)-k/2]}X=LZ({width:O,height:k,scale:H,center:R&&[0,0,R[2]*BI(n)],offset:K,pitch:o,fovy:U,nearZMultiplier:f,farZMultiplier:s}),Number.isFinite(p)&&(X.near=p),Number.isFinite(v)&&(X.far=v)}let J=OZ({height:k,pitch:o,bearing:l,scale:H,altitude:$});P&&(J=new zs().translate([512*P,0,0]).multiplyLeft(J)),super({...e,width:O,height:k,viewMatrix:J,longitude:r,latitude:n,zoom:i,...X,fovy:U,focalDistance:$}),j(this,"longitude",void 0),j(this,"latitude",void 0),j(this,"pitch",void 0),j(this,"bearing",void 0),j(this,"altitude",void 0),j(this,"fovy",void 0),j(this,"orthographic",void 0),j(this,"_subViewports",void 0),j(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=l,this.altitude=$,this.fovy=U,this.orthographic=x,this._subViewports=M?[]:null,this._pseudoMeters=B,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const o=i?new bp({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*BI(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/BI(r);return[n,r,i]}addMetersToLngLat(e,n){return RZ(e,n)}panByPosition(e,n){const r=yb(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=gb([],i,nZ([],r)),l=gb([],this.center,o),[f,s]=this.unprojectFlat(l);return{longitude:f,latitude:s}}getBounds(e={}){const n=DZ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:o,latitude:l,zoom:f}=BZ({width:r,height:i,bounds:e,...n});return new bp({width:r,height:i,longitude:o,latitude:l,zoom:f})}}j(bp,"displayName","WebMercatorViewport");const gU=[0,0,0];function FI(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof bp){const[i,o,l=0]=t,f=e.getDistanceScales([i,o]);r[2]=l*f.unitsPerMeter[2]}return r}function iRe(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:l}=t;return i===ni.DEFAULT&&(i=e.isGeospatial?ni.LNGLAT:ni.CARTESIAN),o===void 0&&(o=i),l===void 0&&(l=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:l}}function VZ(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[l,f,s=0]=t;switch(n&&([l,f,s]=ix([],[l,f,s,1],n)),r){case ni.LNGLAT:return FI([l,f,s],e,o);case ni.LNGLAT_OFFSETS:return FI([l+i[0],f+i[1],s+(i[2]||0)],e,o);case ni.METER_OFFSETS:return FI(RZ(i,[l,f,s]),e,o);case ni.CARTESIAN:default:return e.isGeospatial?[l+i[0],f+i[1],s+i[2]]:e.projectPosition([l,f,s])}}function oRe(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:l,fromCoordinateOrigin:f}=iRe(e),{autoOffset:s=!0}=e,{geospatialOrigin:p=gU,shaderCoordinateOrigin:v=gU,offsetMode:x=!1}=s?AZ(n,r,i):{},S=VZ(t,{viewport:n,modelMatrix:o,coordinateSystem:l,coordinateOrigin:f,offsetMode:x});if(x){const M=n.projectPosition(p||v);mMe(S,S,M)}return S}const vU={blendFunc:[1,0,32771,0],blendEquation:32774};class GZ extends hk{constructor(...e){super(...e),j(this,"pickZ",void 0),j(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:l,deviceRect:{x:f,y:s,width:p,height:v},cullRect:x,effects:S,pass:M="picking",pickZ:P,moduleParameters:R}){const D=this.gl;this.pickZ=P;const B=this._resetColorEncoder(P),O=gc(D,{scissorTest:!0,scissor:[f,s,p,v],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...vU,blend:!P},()=>super.render({target:l,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:x,effects:S==null?void 0:S.filter($=>$.useInPicking),pass:M,isPicking:!0,moduleParameters:R}));return this._colorEncoderState=null,{decodePickingColor:B&&aRe.bind(null,B),stats:O}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:o,operation:l}=e.props;return this._colorEncoderState?o&&l.includes("draw")&&(Object.assign(i,vU),i.blend=!0,i.blendColor=sRe(this._colorEncoderState,e,r)):i.blend=!1,l.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function sRe(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,l=r.get(e);return l?(l.viewports.push(n),o=l.a):(o=r.size+1,o<=255?(l={a:o,layer:e,viewports:[n]},r.set(e,l),i[o]=l):(Mr.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function aRe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const ig={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},sC=Symbol.for("component"),Lf=Symbol.for("propTypes"),zI=Symbol.for("deprecatedProps"),Ng=Symbol.for("asyncPropDefaults"),xp=Symbol.for("asyncPropOriginal"),bf=Symbol.for("asyncPropResolved");function yk(t,e=()=>!0){return Array.isArray(t)?HZ(t,e,[]):e(t)?[t]:[]}function HZ(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?HZ(i,e,n):e(i)&&n.push(i)}return n}function lRe({target:t,source:e,start:n=0,count:r=1}){const i=e.length,o=r*i;let l=0;for(let f=n;l<i;l++)t[f++]=e[l];for(;l<o;)l<o-l?(t.copyWithin(n+l,n,n+l),l*=2):(t.copyWithin(n+l,n,n+o-l),l=o);return t}function yU(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class _U{constructor(e,n){j(this,"name",void 0),j(this,"type",void 0),j(this,"sampleSize",1),j(this,"time",void 0),j(this,"count",void 0),j(this,"samples",void 0),j(this,"lastTiming",void 0),j(this,"lastSampleTime",void 0),j(this,"lastSampleCount",void 0),j(this,"_count",0),j(this,"_time",0),j(this,"_samples",0),j(this,"_startTime",0),j(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=yU(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(yU()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class WZ{constructor(e){j(this,"id",void 0),j(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof _U?this.stats[n]=e:this.stats[n]=new _U(n,r)),this.stats[n]}}class cRe{constructor(e,n,r){j(this,"id",void 0),j(this,"context",void 0),j(this,"isLoaded",void 0),j(this,"persistent",void 0),j(this,"_loadCount",0),j(this,"_subscribers",new Set),j(this,"_data",void 0),j(this,"_loader",void 0),j(this,"_error",void 0),j(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=YE(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class uRe{constructor({gl:e,protocol:n}){j(this,"protocol",void 0),j(this,"_context",void 0),j(this,"_resources",void 0),j(this,"_consumers",void 0),j(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(n,r):(o=new cRe(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:o,protocol:l}=this;e.startsWith(l)&&(e=e.replace(l,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const f=o[e];if(this._track(r,i,f,n),f)return f.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const o=this._consumers,l=o[e]=o[e]||{},f=l[n]||{},s=f.resourceId&&this._resources[f.resourceId];s&&(s.unsubscribe(f),this.prune()),r&&(l[n]=f,f.onChange=i,f.resourceId=r.id,r.subscribe(f))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const dRe=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Op={name:"project32",dependencies:[pk],vs:dRe},Lp={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...wPe},fRe=[pk],hRe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function pRe(t){const e=ox.getDefaultProgramManager(t);for(const n of fRe)e.addDefaultModule(n);for(const n of hRe)e.addShaderHook(n);return e}const mRe="layerManager.setLayers",gRe="layerManager.activateViewport";class vRe{constructor(e,{deck:n,stats:r,viewport:i,timeline:o}={}){j(this,"layers",void 0),j(this,"context",void 0),j(this,"resourceManager",void 0),j(this,"_lastRenderedLayers",[]),j(this,"_needsRedraw",!1),j(this,"_needsUpdate",!1),j(this,"_nextLayers",null),j(this,"_debug",!1),j(this,"activateViewport",l=>{Ls(gRe,this,l),l&&(this.context.viewport=l)}),this.layers=[],this.resourceManager=new uRe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&pRe(e),stats:r||new WZ({id:"deck.gl"}),viewport:i||new Dv({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new wZ,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Ls(mRe,this,n,e),this._lastRenderedLayers=e;const r=yk(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const l of e)r[l.id]?Mr.warn("Multiple old layers with same id ".concat(l.id))():r[l.id]=l;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let o=!1;for(const l of i)if(l.hasUniformTransition()){o="Uniform transition in ".concat(l);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const o=n[i.id];o===null&&Mr.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let l=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),l=i.isComposite?i.getSubLayers():null}catch(f){this._handleError("matching",f,i)}l&&this._updateSublayersRecursively(l,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=ig.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=ig.MATCHED,n!==e&&(e.lifecycle=ig.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=ig.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=ig.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function nu(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!nu(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o of r)if(!e.hasOwnProperty(o)||!nu(t[o],e[o],n-1))return!1;return!0}return!1}class yRe{constructor(e){j(this,"width",void 0),j(this,"height",void 0),j(this,"views",void 0),j(this,"viewState",void 0),j(this,"controllers",void 0),j(this,"timeline",void 0),j(this,"_viewports",void 0),j(this,"_viewportMap",void 0),j(this,"_isUpdating",void 0),j(this,"_needsRedraw",void 0),j(this,"_needsUpdate",void 0),j(this,"_eventManager",void 0),j(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let o=r.length-1;o>=0;--o){const l=r[o];if(l.containsPixel(i)){const f=e.slice();return f[0]-=l.x,f[1]-=l.y,l.unproject(f,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=yk(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!nu(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Mr.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var l;return(l=this.getView(e.id))===null||l===void 0?void 0:l.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const o=e.controller;if(o&&r){const l={...n,...o,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==o.type)&&(i=this._createController(e,l)),i&&i.setProps(l),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const o=e[i],l=this.getViewState(o),f=o.makeViewport({viewState:l,width:this.width,height:this.height});let s=n[o.id];const p=!!o.controller;p&&!s&&(r=!0),(r||!p)&&s&&(s.finalize(),s=null),this.controllers[o.id]=this._updateController(o,l,f,s),f&&this._viewports.unshift(f)}for(const i in n){const o=n[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const _Re=/([0-9]+\.?[0-9]*)(%|px)/;function Kd(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=_Re.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Jd(t,e){return t.relative?Math.round(t.position*e):t.position}function as(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class pv{constructor(e){j(this,"id",void 0),j(this,"viewportInstance",void 0),j(this,"_x",void 0),j(this,"_y",void 0),j(this,"_width",void 0),j(this,"_height",void 0),j(this,"_padding",void 0),j(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:o="100%",height:l="100%",padding:f=null,viewportInstance:s}=e||{};as(!s||s instanceof Dv),this.viewportInstance=s,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Kd(r),this._y=Kd(i),this._width=Kd(o),this._height=Kd(l),this._padding=f&&{left:Kd(f.left||0),right:Kd(f.right||0),top:Kd(f.top||0),bottom:Kd(f.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&nu(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Jd(this._x,e),y:Jd(this._y,n),width:Jd(this._width,e),height:Jd(this._height,n)};return this._padding&&(r.padding={left:Jd(this._padding.left,e),top:Jd(this._padding.top,n),right:Jd(this._padding.right,e),bottom:Jd(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class ax{constructor(e){j(this,"_inProgress",void 0),j(this,"_handle",void 0),j(this,"_timeline",void 0),j(this,"time",void 0),j(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const bU=()=>{},qL={BREAK:1,SNAP_TO_END:2,IGNORE:3},bRe=t=>t,xRe=qL.BREAK;let wRe=class{constructor(e){j(this,"getControllerState",void 0),j(this,"props",void 0),j(this,"propsInTransition",void 0),j(this,"transition",void 0),j(this,"onViewStateChange",void 0),j(this,"onStateChange",void 0),j(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:o,endProps:l,duration:f,easing:s}}=n,p=s(r/f),v=i.interpolateProps(o,l,p);this.propsInTransition=this.getControllerState({...this.props,...v}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new ax(e.timeline),this.onViewStateChange=e.onViewStateChange||bU,this.onStateChange=e.onStateChange||bU}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:o,endProps:l}=this.transition.settings;i={...r,...o===qL.SNAP_TO_END?l:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===qL.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),o=n.transitionInterpolator,l=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(l===0)return;const f=o.initializeProps(e,i);this.propsInTransition={};const s={duration:l,easing:n.transitionEasing||bRe,interpolator:o,interruption:n.transitionInterruption||xRe,startProps:f.start,endProps:f.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(s),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}},XZ=class{constructor(e){j(this,"_propsToCompare",void 0),j(this,"_propsToExtract",void 0),j(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!mb(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const o of this._propsToExtract)(o in e||o in n)&&(r[o]=e[o],i[o]=n[o]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];as(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}};const SRe=["longitude","latitude","zoom","bearing","pitch"],ERe=["longitude","latitude","zoom"];let qZ=class extends XZ{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:SRe,required:ERe},super(r.transitionProps),j(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:o}=this.opts;if(i&&o){const l=i(e),f=i(n),s=l.unproject(o);r.start.around=o,Object.assign(r.end,{around:f.project(s),aroundPosition:s,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const o of this._propsToExtract)i[o]=pb(e[o]||0,n[o]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...i});Object.assign(i,o.panByPosition(n.aroundPosition,pb(e.around,n.around,r)))}return i}};const Qd={transitionDuration:0},CRe=300,kw=t=>1-(1-t)*(1-t),Zm={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Mh={};class TRe{constructor(e){j(this,"props",void 0),j(this,"state",{}),j(this,"transitionManager",void 0),j(this,"eventManager",void 0),j(this,"onViewStateChange",void 0),j(this,"onStateChange",void 0),j(this,"makeViewport",void 0),j(this,"_controllerState",void 0),j(this,"_events",{}),j(this,"_interactionState",{isDragging:!1}),j(this,"_customEvents",[]),j(this,"_eventStartBlocked",null),j(this,"_panMove",!1),j(this,"invertPan",!1),j(this,"dragMode","rotate"),j(this,"inertia",0),j(this,"scrollZoom",!0),j(this,"dragPan",!0),j(this,"dragRotate",!0),j(this,"doubleClickZoom",!0),j(this,"touchZoom",!0),j(this,"touchRotate",!1),j(this,"keyboard",!0),this.transitionManager=new wRe({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?CRe:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:l=!0,touchZoom:f=!0,touchRotate:s=!1,keyboard:p=!0}=e,v=!!this.onViewStateChange;this.toggleEvents(Zm.WHEEL,v&&r),this.toggleEvents(Zm.PAN,v),this.toggleEvents(Zm.PINCH,v&&(f||s)),this.toggleEvents(Zm.TRIPLE_PAN,v&&s),this.toggleEvents(Zm.DOUBLE_TAP,v&&l),this.toggleEvents(Zm.KEYBOARD,v&&p),this.scrollZoom=r,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=l,this.touchZoom=f,this.touchRotate=s,this.keyboard=p}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),o){const l=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:l})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Qd,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Qd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:kw},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Qd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:kw},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e;let l=2/(1+Math.exp(-Math.abs(o*r)));o<0&&l!==0&&(l=1/l);const f=this.controllerState.zoom({pos:n,scale:l});return this.updateViewport(f,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Qd,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Qd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:kw},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Mh._startPinchRotation=e.rotation,Mh._lastPinchEvent=e,this.updateViewport(r,Qd,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Mh._startPinchRotation-r})}return this.updateViewport(n,Qd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Mh._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Mh;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let o=this.controllerState.rotateEnd();const l=Math.log2(e.scale),f=(l-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),s=Math.pow(2,l+f*n/2);o=o.zoom({pos:i,scale:s}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:kw},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Mh._startPinchRotation=null,Mh._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:l}=this.keyboard===!0?{}:this.keyboard,{controllerState:f}=this;let s;const p={};switch(e.srcEvent.code){case"Minus":s=n?f.zoomOut(r).zoomOut(r):f.zoomOut(r),p.isZooming=!0;break;case"Equal":s=n?f.zoomIn(r).zoomIn(r):f.zoomIn(r),p.isZooming=!0;break;case"ArrowLeft":n?(s=f.rotateLeft(o),p.isRotating=!0):(s=f.moveLeft(i),p.isPanning=!0);break;case"ArrowRight":n?(s=f.rotateRight(o),p.isRotating=!0):(s=f.moveRight(i),p.isPanning=!0);break;case"ArrowUp":n?(s=f.rotateUp(l),p.isRotating=!0):(s=f.moveUp(i),p.isPanning=!0);break;case"ArrowDown":n?(s=f.rotateDown(l),p.isRotating=!0):(s=f.moveDown(i),p.isPanning=!0);break;default:return!1}return this.updateViewport(s,this._getTransitionProps(),p),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Qd:e?{...n,transitionInterpolator:new qZ({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class ARe{constructor(e,n){j(this,"_viewportProps",void 0),j(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const xU=5,MRe=1.2;let PRe=class extends ARe{constructor(e){const{width:n,height:r,latitude:i,longitude:o,zoom:l,bearing:f=0,pitch:s=0,altitude:p=1.5,position:v=[0,0,0],maxZoom:x=20,minZoom:S=0,maxPitch:M=60,minPitch:P=0,startPanLngLat:R,startZoomLngLat:D,startRotatePos:B,startBearing:O,startPitch:k,startZoom:$,normalize:H=!0}=e;as(Number.isFinite(o)),as(Number.isFinite(i)),as(Number.isFinite(l)),super({width:n,height:r,latitude:i,longitude:o,zoom:l,bearing:f,pitch:s,altitude:p,maxZoom:x,minZoom:S,maxPitch:M,minPitch:P,normalize:H,position:v},{startPanLngLat:R,startZoomLngLat:D,startRotatePos:B,startBearing:O,startPitch:k,startZoom:$}),j(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:o,startPitch:l}=this.getState();if(!i||o===void 0||l===void 0)return this;let f;return e?f=this._getNewRotation(e,i,l,o):f={bearing:o+n,pitch:l+r},this._getUpdatedState(f)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:l,minZoom:f}=this.getViewportProps();let s=i+Math.log2(r);s=_f(s,f,l);const p=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...p.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:o}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(o-n.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=_f(i,r,n);const{maxPitch:o,minPitch:l,pitch:f}=e;e.pitch=_f(f,l,o);const{normalize:s=!0}=e;return s&&Object.assign(e,kZ(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const o=e[0]-n[0],l=e[1]-n[1],f=e[1],s=n[1],{width:p,height:v}=this.getViewportProps(),x=o/p;let S=0;l>0?Math.abs(v-s)>xU&&(S=l/(s-v)*MRe):l<0&&s>xU&&(S=1-f/s),S=_f(S,-1,1);const{minPitch:M,maxPitch:P}=this.getViewportProps(),R=i+180*x;let D=r;return S>0?D=r+S*(P-r):S<0&&(D=r-S*(M-r)),{pitch:D,bearing:R}}},IRe=class extends TRe{constructor(...e){super(...e),j(this,"ControllerState",PRe),j(this,"transition",{transitionDuration:300,transitionInterpolator:new qZ({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),j(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}};class YZ extends pv{get ViewportType(){return bp}get ControllerType(){return IRe}}j(YZ,"displayName","MapView");const RRe=new UZ;function ORe(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,o=(r=e.order)!==null&&r!==void 0?r:1/0;return i-o}class LRe{constructor(){j(this,"effects",void 0),j(this,"_resolvedEffects",[]),j(this,"_defaultEffects",[]),j(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>ORe(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(nu(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const o=n[i.id];o&&o!==i?o.setProps?(o.setProps(i.props),r.push(o)):(o.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof UZ)||this._resolvedEffects.push(RRe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class BRe extends hk{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const DRe="deckRenderer.renderLayers";class kRe{constructor(e){j(this,"gl",void 0),j(this,"layerFilter",void 0),j(this,"drawPickingColors",void 0),j(this,"drawLayersPass",void 0),j(this,"pickLayersPass",void 0),j(this,"renderCount",void 0),j(this,"_needsRedraw",void 0),j(this,"renderBuffers",void 0),j(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new BRe(e),this.pickLayersPass=new GZ(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||Jo.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,o=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Ls(DRe,this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new Jo(this.gl),new Jo(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){i.target=n.target,o.postRender(this.gl,i);break}const l=o.postRender(this.gl,i);i.inputBuffer=l,i.swapBuffer=l===r[0]?r[1]:r[0]}}}const FRe={pickedColor:null,pickedObjectIndex:-1};function zRe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){const{x:l,y:f,width:s,height:p}=o;let v=i*i,x=-1,S=0;for(let M=0;M<p;M++){const P=M+f-r,R=P*P;if(R>v)S+=4*s;else for(let D=0;D<s;D++){if(t[S+3]-1>=0){const O=D+l-n,k=O*O+R;k<=v&&(v=k,x=S)}S+=4}}if(x>=0){const M=t.slice(x,x+4),P=e(M);if(P){const R=Math.floor(x/4/s),D=x/4-R*s;return{...P,pickedColor:M,pickedX:l+D,pickedY:f+R}}Mr.error("Picked non-existent layer. Is picking buffer corrupt?")()}return FRe}function NRe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const o=t.slice(r,r+4),l=o.join(",");if(!n.has(l)){const f=e(o);f?n.set(l,{...f,color:o}):Mr.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function ZZ({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let l=e[0];e.length>1&&(l=jRe((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let f;if(l){const s=[r-l.x,i-l.y];o!==void 0&&(s[2]=o),f=l.unproject(s)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:f,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function $Re(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:l,pickedObjectIndex:f}=e,s=l?[l]:[];if(r==="hover"){const x=n.index,S=n.layerId,M=l?l.props.id:null;if(M!==S||f!==x){if(M!==S){const P=i.find(R=>R.props.id===S);P&&s.unshift(P)}n.layerId=M,n.index=f,n.info=null}}const p=ZZ(t),v=new Map;return v.set(null,p),s.forEach(x=>{let S={...p};x===l&&(S.color=o,S.index=f,S.picked=!0),S=KZ({layer:x,info:S,mode:r});const M=S.layer;x===l&&r==="hover"&&(n.info=S),v.set(M.id,S),r==="hover"&&M.updateAutoHighlight(S)}),v}function KZ({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function jRe(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class URe{constructor(e){j(this,"gl",void 0),j(this,"pickingFBO",void 0),j(this,"depthFBO",void 0),j(this,"pickLayersPass",void 0),j(this,"layerFilter",void 0),j(this,"lastPickedInfo",void 0),j(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new GZ(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},o=this.lastPickedInfo.info){const l=o&&o.layer&&o.layer.id,f=o&&o.viewport&&o.viewport.id,s=l?r.find(S=>S.id===l):null,p=f&&i.find(S=>S.id===f)||i[0],v=p&&p.unproject([e-p.x,n-p.y]);return{...o,...{x:e,y:n,viewport:p,coordinate:v,layer:s}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Jo(r),Jo.isSupported(r,{colorBufferFloat:!0}))){const i=new Jo(r);i.attach({36064:new Zs(r,{format:kr(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:o,radius:l=0,depth:f=1,mode:s="query",unproject3D:p,onViewportActive:v,effects:x}){const S=this._getPickable(e),M=lv(this.gl);if(!S)return{result:[],emptyInfo:ZZ({viewports:r,x:i,y:o,pixelRatio:M})};this._resizeBuffer();const P=bI(this.gl,[i,o],!0),R=[P.x+Math.floor(P.width/2),P.y+Math.floor(P.height/2)],D=Math.round(l*M),{width:B,height:O}=this.pickingFBO,k=this._getPickingRect({deviceX:R[0],deviceY:R[1],deviceRadius:D,deviceWidth:B,deviceHeight:O}),$={x:i-l,y:o-l,width:l*2+1,height:l*2+1};let H;const U=[],X=new Set;for(let J=0;J<f;J++){let K;if(k){const ce=this._drawAndSample({layers:S,views:n,viewports:r,onViewportActive:v,deviceRect:k,cullRect:$,effects:x,pass:"picking:".concat(s)});K=zRe({...ce,deviceX:R[0],deviceY:R[1],deviceRadius:D,deviceRect:k})}else K={pickedColor:null,pickedObjectIndex:-1};let Q;if(K.pickedLayer&&p&&this.depthFBO){const{pickedColors:ce}=this._drawAndSample({layers:[K.pickedLayer],views:n,viewports:r,onViewportActive:v,deviceRect:{x:K.pickedX,y:K.pickedY,width:1,height:1},cullRect:$,effects:x,pass:"picking:".concat(s,":z")},!0);ce[3]&&(Q=ce[0])}K.pickedLayer&&J+1<f&&(X.add(K.pickedLayer),K.pickedLayer.disablePickingIndex(K.pickedObjectIndex)),H=$Re({pickInfo:K,lastPickedInfo:this.lastPickedInfo,mode:s,layers:S,viewports:r,x:i,y:o,z:Q,pixelRatio:M});for(const ce of H.values())ce.layer&&U.push(ce);if(!K.pickedColor)break}for(const J of X)J.restorePickingColors();return{result:U,emptyInfo:H.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:o,width:l=1,height:f=1,mode:s="query",maxObjects:p=null,onViewportActive:v,effects:x}){const S=this._getPickable(e);if(!S)return[];this._resizeBuffer();const M=lv(this.gl),P=bI(this.gl,[i,o],!0),R=P.x,D=P.y+P.height,B=bI(this.gl,[i+l,o+f],!0),O=B.x+B.width,k=B.y,$={x:R,y:k,width:O-R,height:D-k},H=this._drawAndSample({layers:S,views:n,viewports:r,onViewportActive:v,deviceRect:$,cullRect:{x:i,y:o,width:l,height:f},effects:x,pass:"picking:".concat(s)}),U=NRe(H),X=new Map,J=Number.isFinite(p);for(let Q=0;Q<U.length;Q++){var K;if(J&&p&&X.size>=p)break;const ce=U[Q];let ge={color:ce.pickedColor,layer:null,index:ce.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:M};ge=KZ({layer:ce.pickedLayer,info:ge,mode:s});const ae=(K=ge.object)!==null&&K!==void 0?K:"".concat(ge.layer.id,"[").concat(ge.index,"]");X.has(ae)||X.set(ae,ge)}return Array.from(X.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:l,effects:f,pass:s},p=!1){const v=p?this.depthFBO:this.pickingFBO,x={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:v,deviceRect:o,cullRect:l,effects:f,pass:s,pickZ:p,preRenderStats:{}};for(const O of f)O.useInPicking&&(x.preRenderStats[O.id]=O.preRender(this.gl,x));const{decodePickingColor:S}=this.pickLayersPass.render(x),{x:M,y:P,width:R,height:D}=o,B=new(p?Float32Array:Uint8Array)(R*D*4);return LT(v,{sourceX:M,sourceY:P,sourceWidth:R,sourceHeight:D,target:B}),{pickedColors:B,decodePickingColor:S}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}){const l=Math.max(0,e-r),f=Math.max(0,n-r),s=Math.min(i,e+r+1)-l,p=Math.min(o,n+r+1)-f;return s<=0||p<=0?null:{x:l,y:f,width:s,height:p}}}const VRe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class GRe{constructor(e){j(this,"el",null),j(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,VRe),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var JZ={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var o=["","webkit","Moz","MS","ms","o"],l=n.createElement("div"),f="function",s=Math.round,p=Math.abs,v=Date.now;function x(he,Ee,Ue){return setTimeout(k(he,Ue),Ee)}function S(he,Ee,Ue){return Array.isArray(he)?(M(he,Ue[Ee],Ue),!0):!1}function M(he,Ee,Ue){var at;if(he)if(he.forEach)he.forEach(Ee,Ue);else if(he.length!==i)for(at=0;at<he.length;)Ee.call(Ue,he[at],at,he),at++;else for(at in he)he.hasOwnProperty(at)&&Ee.call(Ue,he[at],at,he)}function P(he,Ee,Ue){var at="DEPRECATED METHOD: "+Ee+`
`+Ue+` AT 
`;return function(){var Qt=new Error("get-stack-trace"),pn=Qt&&Qt.stack?Qt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",br=e.console&&(e.console.warn||e.console.log);return br&&br.call(e.console,at,pn),he.apply(this,arguments)}}var R;typeof Object.assign!="function"?R=function(Ee){if(Ee===i||Ee===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ue=Object(Ee),at=1;at<arguments.length;at++){var Qt=arguments[at];if(Qt!==i&&Qt!==null)for(var pn in Qt)Qt.hasOwnProperty(pn)&&(Ue[pn]=Qt[pn])}return Ue}:R=Object.assign;var D=P(function(Ee,Ue,at){for(var Qt=Object.keys(Ue),pn=0;pn<Qt.length;)(!at||at&&Ee[Qt[pn]]===i)&&(Ee[Qt[pn]]=Ue[Qt[pn]]),pn++;return Ee},"extend","Use `assign`."),B=P(function(Ee,Ue){return D(Ee,Ue,!0)},"merge","Use `assign`.");function O(he,Ee,Ue){var at=Ee.prototype,Qt;Qt=he.prototype=Object.create(at),Qt.constructor=he,Qt._super=at,Ue&&R(Qt,Ue)}function k(he,Ee){return function(){return he.apply(Ee,arguments)}}function $(he,Ee){return typeof he==f?he.apply(Ee&&Ee[0]||i,Ee):he}function H(he,Ee){return he===i?Ee:he}function U(he,Ee,Ue){M(Q(Ee),function(at){he.addEventListener(at,Ue,!1)})}function X(he,Ee,Ue){M(Q(Ee),function(at){he.removeEventListener(at,Ue,!1)})}function J(he,Ee){for(;he;){if(he==Ee)return!0;he=he.parentNode}return!1}function K(he,Ee){return he.indexOf(Ee)>-1}function Q(he){return he.trim().split(/\s+/g)}function ce(he,Ee,Ue){if(he.indexOf&&!Ue)return he.indexOf(Ee);for(var at=0;at<he.length;){if(Ue&&he[at][Ue]==Ee||!Ue&&he[at]===Ee)return at;at++}return-1}function ge(he){return Array.prototype.slice.call(he,0)}function ae(he,Ee,Ue){for(var at=[],Qt=[],pn=0;pn<he.length;){var br=Ee?he[pn][Ee]:he[pn];ce(Qt,br)<0&&at.push(he[pn]),Qt[pn]=br,pn++}return Ue&&(Ee?at=at.sort(function(Fi,ei){return Fi[Ee]>ei[Ee]}):at=at.sort()),at}function ve(he,Ee){for(var Ue,at,Qt=Ee[0].toUpperCase()+Ee.slice(1),pn=0;pn<o.length;){if(Ue=o[pn],at=Ue?Ue+Qt:Ee,at in he)return at;pn++}return i}var Fe=1;function Ae(){return Fe++}function pe(he){var Ee=he.ownerDocument||he;return Ee.defaultView||Ee.parentWindow||e}var fe=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in e,Re=ve(e,"PointerEvent")!==i,ke=xe&&fe.test(navigator.userAgent),ze="touch",Xe="pen",Ne="mouse",Qe="kinect",pt=25,Ke=1,ot=2,St=4,st=8,rt=1,lt=2,Rt=4,bt=8,wt=16,it=lt|Rt,Bt=bt|wt,jt=it|Bt,cn=["x","y"],rn=["clientX","clientY"];function zt(he,Ee){var Ue=this;this.manager=he,this.callback=Ee,this.element=he.element,this.target=he.options.inputTarget,this.domHandler=function(at){$(he.options.enable,[he])&&Ue.handler(at)},this.init()}zt.prototype={handler:function(){},init:function(){this.evEl&&U(this.element,this.evEl,this.domHandler),this.evTarget&&U(this.target,this.evTarget,this.domHandler),this.evWin&&U(pe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&X(this.element,this.evEl,this.domHandler),this.evTarget&&X(this.target,this.evTarget,this.domHandler),this.evWin&&X(pe(this.element),this.evWin,this.domHandler)}};function bn(he){var Ee,Ue=he.options.inputClass;return Ue?Ee=Ue:Re?Ee=te:ke?Ee=nt:xe?Ee=Ct:Ee=tr,new Ee(he,Ot)}function Ot(he,Ee,Ue){var at=Ue.pointers.length,Qt=Ue.changedPointers.length,pn=Ee&Ke&&at-Qt===0,br=Ee&(St|st)&&at-Qt===0;Ue.isFirst=!!pn,Ue.isFinal=!!br,pn&&(he.session={}),Ue.eventType=Ee,Nt(he,Ue),he.emit("hammer.input",Ue),he.recognize(Ue),he.session.prevInput=Ue}function Nt(he,Ee){var Ue=he.session,at=Ee.pointers,Qt=at.length;Ue.firstInput||(Ue.firstInput=vn(Ee)),Qt>1&&!Ue.firstMultiple?Ue.firstMultiple=vn(Ee):Qt===1&&(Ue.firstMultiple=!1);var pn=Ue.firstInput,br=Ue.firstMultiple,Ai=br?br.center:pn.center,Fi=Ee.center=hn(at);Ee.timeStamp=v(),Ee.deltaTime=Ee.timeStamp-pn.timeStamp,Ee.angle=rr(Ai,Fi),Ee.distance=Vn(Ai,Fi),Jt(Ue,Ee),Ee.offsetDirection=Rn(Ee.deltaX,Ee.deltaY);var ei=wn(Ee.deltaTime,Ee.deltaX,Ee.deltaY);Ee.overallVelocityX=ei.x,Ee.overallVelocityY=ei.y,Ee.overallVelocity=p(ei.x)>p(ei.y)?ei.x:ei.y,Ee.scale=br?Sn(br.pointers,at):1,Ee.rotation=br?Pn(br.pointers,at):0,Ee.maxPointers=Ue.prevInput?Ee.pointers.length>Ue.prevInput.maxPointers?Ee.pointers.length:Ue.prevInput.maxPointers:Ee.pointers.length,on(Ue,Ee);var Xi=he.element;J(Ee.srcEvent.target,Xi)&&(Xi=Ee.srcEvent.target),Ee.target=Xi}function Jt(he,Ee){var Ue=Ee.center,at=he.offsetDelta||{},Qt=he.prevDelta||{},pn=he.prevInput||{};(Ee.eventType===Ke||pn.eventType===St)&&(Qt=he.prevDelta={x:pn.deltaX||0,y:pn.deltaY||0},at=he.offsetDelta={x:Ue.x,y:Ue.y}),Ee.deltaX=Qt.x+(Ue.x-at.x),Ee.deltaY=Qt.y+(Ue.y-at.y)}function on(he,Ee){var Ue=he.lastInterval||Ee,at=Ee.timeStamp-Ue.timeStamp,Qt,pn,br,Ai;if(Ee.eventType!=st&&(at>pt||Ue.velocity===i)){var Fi=Ee.deltaX-Ue.deltaX,ei=Ee.deltaY-Ue.deltaY,Xi=wn(at,Fi,ei);pn=Xi.x,br=Xi.y,Qt=p(Xi.x)>p(Xi.y)?Xi.x:Xi.y,Ai=Rn(Fi,ei),he.lastInterval=Ee}else Qt=Ue.velocity,pn=Ue.velocityX,br=Ue.velocityY,Ai=Ue.direction;Ee.velocity=Qt,Ee.velocityX=pn,Ee.velocityY=br,Ee.direction=Ai}function vn(he){for(var Ee=[],Ue=0;Ue<he.pointers.length;)Ee[Ue]={clientX:s(he.pointers[Ue].clientX),clientY:s(he.pointers[Ue].clientY)},Ue++;return{timeStamp:v(),pointers:Ee,center:hn(Ee),deltaX:he.deltaX,deltaY:he.deltaY}}function hn(he){var Ee=he.length;if(Ee===1)return{x:s(he[0].clientX),y:s(he[0].clientY)};for(var Ue=0,at=0,Qt=0;Qt<Ee;)Ue+=he[Qt].clientX,at+=he[Qt].clientY,Qt++;return{x:s(Ue/Ee),y:s(at/Ee)}}function wn(he,Ee,Ue){return{x:Ee/he||0,y:Ue/he||0}}function Rn(he,Ee){return he===Ee?rt:p(he)>=p(Ee)?he<0?lt:Rt:Ee<0?bt:wt}function Vn(he,Ee,Ue){Ue||(Ue=cn);var at=Ee[Ue[0]]-he[Ue[0]],Qt=Ee[Ue[1]]-he[Ue[1]];return Math.sqrt(at*at+Qt*Qt)}function rr(he,Ee,Ue){Ue||(Ue=cn);var at=Ee[Ue[0]]-he[Ue[0]],Qt=Ee[Ue[1]]-he[Ue[1]];return Math.atan2(Qt,at)*180/Math.PI}function Pn(he,Ee){return rr(Ee[1],Ee[0],rn)+rr(he[1],he[0],rn)}function Sn(he,Ee){return Vn(Ee[0],Ee[1],rn)/Vn(he[0],he[1],rn)}var fr={mousedown:Ke,mousemove:ot,mouseup:St},cr="mousedown",ur="mousemove mouseup";function tr(){this.evEl=cr,this.evWin=ur,this.pressed=!1,zt.apply(this,arguments)}O(tr,zt,{handler:function(Ee){var Ue=fr[Ee.type];Ue&Ke&&Ee.button===0&&(this.pressed=!0),Ue&ot&&Ee.which!==1&&(Ue=St),this.pressed&&(Ue&St&&(this.pressed=!1),this.callback(this.manager,Ue,{pointers:[Ee],changedPointers:[Ee],pointerType:Ne,srcEvent:Ee}))}});var oi={pointerdown:Ke,pointermove:ot,pointerup:St,pointercancel:st,pointerout:st},Oe={2:ze,3:Xe,4:Ne,5:Qe},se="pointerdown",oe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(se="MSPointerDown",oe="MSPointerMove MSPointerUp MSPointerCancel");function te(){this.evEl=se,this.evWin=oe,zt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}O(te,zt,{handler:function(Ee){var Ue=this.store,at=!1,Qt=Ee.type.toLowerCase().replace("ms",""),pn=oi[Qt],br=Oe[Ee.pointerType]||Ee.pointerType,Ai=br==ze,Fi=ce(Ue,Ee.pointerId,"pointerId");pn&Ke&&(Ee.button===0||Ai)?Fi<0&&(Ue.push(Ee),Fi=Ue.length-1):pn&(St|st)&&(at=!0),!(Fi<0)&&(Ue[Fi]=Ee,this.callback(this.manager,pn,{pointers:Ue,changedPointers:[Ee],pointerType:br,srcEvent:Ee}),at&&Ue.splice(Fi,1))}});var le={touchstart:Ke,touchmove:ot,touchend:St,touchcancel:st},ue="touchstart",Me="touchstart touchmove touchend touchcancel";function Ce(){this.evTarget=ue,this.evWin=Me,this.started=!1,zt.apply(this,arguments)}O(Ce,zt,{handler:function(Ee){var Ue=le[Ee.type];if(Ue===Ke&&(this.started=!0),!!this.started){var at=_e.call(this,Ee,Ue);Ue&(St|st)&&at[0].length-at[1].length===0&&(this.started=!1),this.callback(this.manager,Ue,{pointers:at[0],changedPointers:at[1],pointerType:ze,srcEvent:Ee})}}});function _e(he,Ee){var Ue=ge(he.touches),at=ge(he.changedTouches);return Ee&(St|st)&&(Ue=ae(Ue.concat(at),"identifier",!0)),[Ue,at]}var De={touchstart:Ke,touchmove:ot,touchend:St,touchcancel:st},et="touchstart touchmove touchend touchcancel";function nt(){this.evTarget=et,this.targetIds={},zt.apply(this,arguments)}O(nt,zt,{handler:function(Ee){var Ue=De[Ee.type],at=Ze.call(this,Ee,Ue);at&&this.callback(this.manager,Ue,{pointers:at[0],changedPointers:at[1],pointerType:ze,srcEvent:Ee})}});function Ze(he,Ee){var Ue=ge(he.touches),at=this.targetIds;if(Ee&(Ke|ot)&&Ue.length===1)return at[Ue[0].identifier]=!0,[Ue,Ue];var Qt,pn,br=ge(he.changedTouches),Ai=[],Fi=this.target;if(pn=Ue.filter(function(ei){return J(ei.target,Fi)}),Ee===Ke)for(Qt=0;Qt<pn.length;)at[pn[Qt].identifier]=!0,Qt++;for(Qt=0;Qt<br.length;)at[br[Qt].identifier]&&Ai.push(br[Qt]),Ee&(St|st)&&delete at[br[Qt].identifier],Qt++;if(Ai.length)return[ae(pn.concat(Ai),"identifier",!0),Ai]}var Et=2500,vt=25;function Ct(){zt.apply(this,arguments);var he=k(this.handler,this);this.touch=new nt(this.manager,he),this.mouse=new tr(this.manager,he),this.primaryTouch=null,this.lastTouches=[]}O(Ct,zt,{handler:function(Ee,Ue,at){var Qt=at.pointerType==ze,pn=at.pointerType==Ne;if(!(pn&&at.sourceCapabilities&&at.sourceCapabilities.firesTouchEvents)){if(Qt)Vt.call(this,Ue,at);else if(pn&&kn.call(this,at))return;this.callback(Ee,Ue,at)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Vt(he,Ee){he&Ke?(this.primaryTouch=Ee.changedPointers[0].identifier,ln.call(this,Ee)):he&(St|st)&&ln.call(this,Ee)}function ln(he){var Ee=he.changedPointers[0];if(Ee.identifier===this.primaryTouch){var Ue={x:Ee.clientX,y:Ee.clientY};this.lastTouches.push(Ue);var at=this.lastTouches,Qt=function(){var pn=at.indexOf(Ue);pn>-1&&at.splice(pn,1)};setTimeout(Qt,Et)}}function kn(he){for(var Ee=he.srcEvent.clientX,Ue=he.srcEvent.clientY,at=0;at<this.lastTouches.length;at++){var Qt=this.lastTouches[at],pn=Math.abs(Ee-Qt.x),br=Math.abs(Ue-Qt.y);if(pn<=vt&&br<=vt)return!0}return!1}var Jn=ve(l.style,"touchAction"),_r=Jn!==i,Wn="compute",dr="auto",gr="manipulation",Yn="none",ri="pan-x",Cn="pan-y",yn=xn();function Ft(he,Ee){this.manager=he,this.set(Ee)}Ft.prototype={set:function(he){he==Wn&&(he=this.compute()),_r&&this.manager.element.style&&yn[he]&&(this.manager.element.style[Jn]=he),this.actions=he.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var he=[];return M(this.manager.recognizers,function(Ee){$(Ee.options.enable,[Ee])&&(he=he.concat(Ee.getTouchAction()))}),Gt(he.join(" "))},preventDefaults:function(he){var Ee=he.srcEvent,Ue=he.offsetDirection;if(this.manager.session.prevented){Ee.preventDefault();return}var at=this.actions,Qt=K(at,Yn)&&!yn[Yn],pn=K(at,Cn)&&!yn[Cn],br=K(at,ri)&&!yn[ri];if(Qt){var Ai=he.pointers.length===1,Fi=he.distance<2,ei=he.deltaTime<250;if(Ai&&Fi&&ei)return}if(!(br&&pn)&&(Qt||pn&&Ue&it||br&&Ue&Bt))return this.preventSrc(Ee)},preventSrc:function(he){this.manager.session.prevented=!0,he.preventDefault()}};function Gt(he){if(K(he,Yn))return Yn;var Ee=K(he,ri),Ue=K(he,Cn);return Ee&&Ue?Yn:Ee||Ue?Ee?ri:Cn:K(he,gr)?gr:dr}function xn(){if(!_r)return!1;var he={},Ee=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ue){he[Ue]=Ee?e.CSS.supports("touch-action",Ue):!0}),he}var nr=1,or=2,Fr=4,Or=8,Xr=Or,Qr=16,qr=32;function zr(he){this.options=R({},this.defaults,he||{}),this.id=Ae(),this.manager=null,this.options.enable=H(this.options.enable,!0),this.state=nr,this.simultaneous={},this.requireFail=[]}zr.prototype={defaults:{},set:function(he){return R(this.options,he),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(he){if(S(he,"recognizeWith",this))return this;var Ee=this.simultaneous;return he=Hi(he,this),Ee[he.id]||(Ee[he.id]=he,he.recognizeWith(this)),this},dropRecognizeWith:function(he){return S(he,"dropRecognizeWith",this)?this:(he=Hi(he,this),delete this.simultaneous[he.id],this)},requireFailure:function(he){if(S(he,"requireFailure",this))return this;var Ee=this.requireFail;return he=Hi(he,this),ce(Ee,he)===-1&&(Ee.push(he),he.requireFailure(this)),this},dropRequireFailure:function(he){if(S(he,"dropRequireFailure",this))return this;he=Hi(he,this);var Ee=ce(this.requireFail,he);return Ee>-1&&this.requireFail.splice(Ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(he){return!!this.simultaneous[he.id]},emit:function(he){var Ee=this,Ue=this.state;function at(Qt){Ee.manager.emit(Qt,he)}Ue<Or&&at(Ee.options.event+_i(Ue)),at(Ee.options.event),he.additionalEvent&&at(he.additionalEvent),Ue>=Or&&at(Ee.options.event+_i(Ue))},tryEmit:function(he){if(this.canEmit())return this.emit(he);this.state=qr},canEmit:function(){for(var he=0;he<this.requireFail.length;){if(!(this.requireFail[he].state&(qr|nr)))return!1;he++}return!0},recognize:function(he){var Ee=R({},he);if(!$(this.options.enable,[this,Ee])){this.reset(),this.state=qr;return}this.state&(Xr|Qr|qr)&&(this.state=nr),this.state=this.process(Ee),this.state&(or|Fr|Or|Qr)&&this.tryEmit(Ee)},process:function(he){},getTouchAction:function(){},reset:function(){}};function _i(he){return he&Qr?"cancel":he&Or?"end":he&Fr?"move":he&or?"start":""}function xt(he){return he==wt?"down":he==bt?"up":he==lt?"left":he==Rt?"right":""}function Hi(he,Ee){var Ue=Ee.manager;return Ue?Ue.get(he):he}function xr(){zr.apply(this,arguments)}O(xr,zr,{defaults:{pointers:1},attrTest:function(he){var Ee=this.options.pointers;return Ee===0||he.pointers.length===Ee},process:function(he){var Ee=this.state,Ue=he.eventType,at=Ee&(or|Fr),Qt=this.attrTest(he);return at&&(Ue&st||!Qt)?Ee|Qr:at||Qt?Ue&St?Ee|Or:Ee&or?Ee|Fr:or:qr}});function Lr(){xr.apply(this,arguments),this.pX=null,this.pY=null}O(Lr,xr,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var he=this.options.direction,Ee=[];return he&it&&Ee.push(Cn),he&Bt&&Ee.push(ri),Ee},directionTest:function(he){var Ee=this.options,Ue=!0,at=he.distance,Qt=he.direction,pn=he.deltaX,br=he.deltaY;return Qt&Ee.direction||(Ee.direction&it?(Qt=pn===0?rt:pn<0?lt:Rt,Ue=pn!=this.pX,at=Math.abs(he.deltaX)):(Qt=br===0?rt:br<0?bt:wt,Ue=br!=this.pY,at=Math.abs(he.deltaY))),he.direction=Qt,Ue&&at>Ee.threshold&&Qt&Ee.direction},attrTest:function(he){return xr.prototype.attrTest.call(this,he)&&(this.state&or||!(this.state&or)&&this.directionTest(he))},emit:function(he){this.pX=he.deltaX,this.pY=he.deltaY;var Ee=xt(he.direction);Ee&&(he.additionalEvent=this.options.event+Ee),this._super.emit.call(this,he)}});function cs(){xr.apply(this,arguments)}O(cs,xr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yn]},attrTest:function(he){return this._super.attrTest.call(this,he)&&(Math.abs(he.scale-1)>this.options.threshold||this.state&or)},emit:function(he){if(he.scale!==1){var Ee=he.scale<1?"in":"out";he.additionalEvent=this.options.event+Ee}this._super.emit.call(this,he)}});function Wi(){zr.apply(this,arguments),this._timer=null,this._input=null}O(Wi,zr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[dr]},process:function(he){var Ee=this.options,Ue=he.pointers.length===Ee.pointers,at=he.distance<Ee.threshold,Qt=he.deltaTime>Ee.time;if(this._input=he,!at||!Ue||he.eventType&(St|st)&&!Qt)this.reset();else if(he.eventType&Ke)this.reset(),this._timer=x(function(){this.state=Xr,this.tryEmit()},Ee.time,this);else if(he.eventType&St)return Xr;return qr},reset:function(){clearTimeout(this._timer)},emit:function(he){this.state===Xr&&(he&&he.eventType&St?this.manager.emit(this.options.event+"up",he):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}});function ao(){xr.apply(this,arguments)}O(ao,xr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yn]},attrTest:function(he){return this._super.attrTest.call(this,he)&&(Math.abs(he.rotation)>this.options.threshold||this.state&or)}});function Er(){xr.apply(this,arguments)}O(Er,xr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:it|Bt,pointers:1},getTouchAction:function(){return Lr.prototype.getTouchAction.call(this)},attrTest:function(he){var Ee=this.options.direction,Ue;return Ee&(it|Bt)?Ue=he.overallVelocity:Ee&it?Ue=he.overallVelocityX:Ee&Bt&&(Ue=he.overallVelocityY),this._super.attrTest.call(this,he)&&Ee&he.offsetDirection&&he.distance>this.options.threshold&&he.maxPointers==this.options.pointers&&p(Ue)>this.options.velocity&&he.eventType&St},emit:function(he){var Ee=xt(he.offsetDirection);Ee&&this.manager.emit(this.options.event+Ee,he),this.manager.emit(this.options.event,he)}});function Qn(){zr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}O(Qn,zr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[gr]},process:function(he){var Ee=this.options,Ue=he.pointers.length===Ee.pointers,at=he.distance<Ee.threshold,Qt=he.deltaTime<Ee.time;if(this.reset(),he.eventType&Ke&&this.count===0)return this.failTimeout();if(at&&Qt&&Ue){if(he.eventType!=St)return this.failTimeout();var pn=this.pTime?he.timeStamp-this.pTime<Ee.interval:!0,br=!this.pCenter||Vn(this.pCenter,he.center)<Ee.posThreshold;this.pTime=he.timeStamp,this.pCenter=he.center,!br||!pn?this.count=1:this.count+=1,this._input=he;var Ai=this.count%Ee.taps;if(Ai===0)return this.hasRequireFailures()?(this._timer=x(function(){this.state=Xr,this.tryEmit()},Ee.interval,this),or):Xr}return qr},failTimeout:function(){return this._timer=x(function(){this.state=qr},this.options.interval,this),qr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Xr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ht(he,Ee){return Ee=Ee||{},Ee.recognizers=H(Ee.recognizers,Ht.defaults.preset),new Rr(he,Ee)}Ht.VERSION="2.0.7",Ht.defaults={domEvents:!1,touchAction:Wn,enable:!0,inputTarget:null,inputClass:null,preset:[[ao,{enable:!1}],[cs,{enable:!1},["rotate"]],[Er,{direction:it}],[Lr,{direction:it},["swipe"]],[Qn],[Qn,{event:"doubletap",taps:2},["tap"]],[Wi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var jn=1,Bn=2;function Rr(he,Ee){this.options=R({},Ht.defaults,Ee||{}),this.options.inputTarget=this.options.inputTarget||he,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=he,this.input=bn(this),this.touchAction=new Ft(this,this.options.touchAction),Ei(this,!0),M(this.options.recognizers,function(Ue){var at=this.add(new Ue[0](Ue[1]));Ue[2]&&at.recognizeWith(Ue[2]),Ue[3]&&at.requireFailure(Ue[3])},this)}Rr.prototype={set:function(he){return R(this.options,he),he.touchAction&&this.touchAction.update(),he.inputTarget&&(this.input.destroy(),this.input.target=he.inputTarget,this.input.init()),this},stop:function(he){this.session.stopped=he?Bn:jn},recognize:function(he){var Ee=this.session;if(!Ee.stopped){this.touchAction.preventDefaults(he);var Ue,at=this.recognizers,Qt=Ee.curRecognizer;(!Qt||Qt&&Qt.state&Xr)&&(Qt=Ee.curRecognizer=null);for(var pn=0;pn<at.length;)Ue=at[pn],Ee.stopped!==Bn&&(!Qt||Ue==Qt||Ue.canRecognizeWith(Qt))?Ue.recognize(he):Ue.reset(),!Qt&&Ue.state&(or|Fr|Or)&&(Qt=Ee.curRecognizer=Ue),pn++}},get:function(he){if(he instanceof zr)return he;for(var Ee=this.recognizers,Ue=0;Ue<Ee.length;Ue++)if(Ee[Ue].options.event==he)return Ee[Ue];return null},add:function(he){if(S(he,"add",this))return this;var Ee=this.get(he.options.event);return Ee&&this.remove(Ee),this.recognizers.push(he),he.manager=this,this.touchAction.update(),he},remove:function(he){if(S(he,"remove",this))return this;if(he=this.get(he),he){var Ee=this.recognizers,Ue=ce(Ee,he);Ue!==-1&&(Ee.splice(Ue,1),this.touchAction.update())}return this},on:function(he,Ee){if(he!==i&&Ee!==i){var Ue=this.handlers;return M(Q(he),function(at){Ue[at]=Ue[at]||[],Ue[at].push(Ee)}),this}},off:function(he,Ee){if(he!==i){var Ue=this.handlers;return M(Q(he),function(at){Ee?Ue[at]&&Ue[at].splice(ce(Ue[at],Ee),1):delete Ue[at]}),this}},emit:function(he,Ee){this.options.domEvents&&Xn(he,Ee);var Ue=this.handlers[he]&&this.handlers[he].slice();if(!(!Ue||!Ue.length)){Ee.type=he,Ee.preventDefault=function(){Ee.srcEvent.preventDefault()};for(var at=0;at<Ue.length;)Ue[at](Ee),at++}},destroy:function(){this.element&&Ei(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ei(he,Ee){var Ue=he.element;if(Ue.style){var at;M(he.options.cssProps,function(Qt,pn){at=ve(Ue.style,pn),Ee?(he.oldCssProps[at]=Ue.style[at],Ue.style[at]=Qt):Ue.style[at]=he.oldCssProps[at]||""}),Ee||(he.oldCssProps={})}}function Xn(he,Ee){var Ue=n.createEvent("Event");Ue.initEvent(he,!0,!0),Ue.gesture=Ee,Ee.target.dispatchEvent(Ue)}R(Ht,{INPUT_START:Ke,INPUT_MOVE:ot,INPUT_END:St,INPUT_CANCEL:st,STATE_POSSIBLE:nr,STATE_BEGAN:or,STATE_CHANGED:Fr,STATE_ENDED:Or,STATE_RECOGNIZED:Xr,STATE_CANCELLED:Qr,STATE_FAILED:qr,DIRECTION_NONE:rt,DIRECTION_LEFT:lt,DIRECTION_RIGHT:Rt,DIRECTION_UP:bt,DIRECTION_DOWN:wt,DIRECTION_HORIZONTAL:it,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:jt,Manager:Rr,Input:zt,TouchAction:Ft,TouchInput:nt,MouseInput:tr,PointerEventInput:te,TouchMouseInput:Ct,SingleTouchInput:Ce,Recognizer:zr,AttrRecognizer:xr,Tap:Qn,Pan:Lr,Swipe:Er,Pinch:cs,Rotate:ao,Press:Wi,on:U,off:X,each:M,merge:B,extend:D,assign:R,inherit:O,bindFn:k,prefixed:ve});var Ti=typeof e<"u"?e:typeof self<"u"?self:{};Ti.Hammer=Ht,typeof i=="function"&&i.amd?i(function(){return Ht}):t.exports?t.exports=Ht:e[r]=Ht})(window,document,"Hammer")})(JZ);var lx=JZ.exports;const HRe=Ep(lx),Vc=RB({__proto__:null,default:HRe},[lx]),QZ=1,eK=2,YL=4,WRe={mousedown:QZ,mousemove:eK,mouseup:YL};function XRe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function qRe(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(XRe(i,o=>o.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function YRe(t){t.prototype.handler=function(n){let r=WRe[n.type];r&QZ&&n.button>=0&&(this.pressed=!0),r&eK&&n.which===0&&(r=YL),this.pressed&&(r&YL&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}qRe(lx.PointerEventInput);YRe(lx.MouseInput);const ZRe=lx.Manager;class DT{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const KRe=Vc?[[Vc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Vc.Rotate,{enable:!1}],[Vc.Pinch,{enable:!1}],[Vc.Swipe,{enable:!1}],[Vc.Pan,{threshold:0,enable:!1}],[Vc.Press,{enable:!1}],[Vc.Tap,{event:"doubletap",taps:2,enable:!1}],[Vc.Tap,{event:"anytap",enable:!1}],[Vc.Tap,{enable:!1}]]:null,wU={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},JRe={doubletap:["tap"]},QRe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},_k={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},eOe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},SU={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},tOe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Eg=typeof window<"u"?window:global;let ZL=!1;try{const t={get passive(){return ZL=!0,!0}};Eg.addEventListener("test",null,t),Eg.removeEventListener("test",null)}catch{ZL=!1}const nOe=tOe.indexOf("firefox")!==-1,{WHEEL_EVENTS:rOe}=_k,EU="wheel",CU=4.000244140625,iOe=40,oOe=.25;class sOe extends DT{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;Eg.WheelEvent&&(nOe&&i.deltaMode===Eg.WheelEvent.DOM_DELTA_PIXEL&&(o/=Eg.devicePixelRatio),i.deltaMode===Eg.WheelEvent.DOM_DELTA_LINE&&(o*=iOe)),o!==0&&o%CU===0&&(o=Math.floor(o/CU)),i.shiftKey&&o&&(o=o*oOe),this.callback({type:EU,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(rOe),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,ZL?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===EU&&(this.options.enable=n)}}const{MOUSE_EVENTS:aOe}=_k,TU="pointermove",AU="pointerover",MU="pointerout",PU="pointerenter",IU="pointerleave";class lOe extends DT{constructor(e,n,r){super(e,n,r),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(aOe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===TU&&(this.enableMoveEvent=n),e===AU&&(this.enableOverEvent=n),e===MU&&(this.enableOutEvent=n),e===PU&&(this.enableEnterEvent=n),e===IU&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(AU,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(MU,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(PU,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(IU,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(TU,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:cOe}=_k,RU="keydown",OU="keyup";class uOe extends DT{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:RU,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:OU,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(cOe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===RU&&(this.enableDownEvent=n),e===OU&&(this.enableUpEvent=n)}}const LU="contextmenu";class dOe extends DT{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:LU,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===LU&&(this.options.enable=n)}}const KL=1,aC=2,JL=4,fOe={pointerdown:KL,pointermove:aC,pointerup:JL,mousedown:KL,mousemove:aC,mouseup:JL},hOe=1,pOe=2,mOe=3,gOe=0,vOe=1,yOe=2,_Oe=1,bOe=2,xOe=4;function wOe(t){const e=fOe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,l=!1,f=!1;return e===JL||e===aC&&!Number.isFinite(n)?(o=i===hOe,l=i===pOe,f=i===mOe):e===aC?(o=!!(n&_Oe),l=!!(n&xOe),f=!!(n&bOe)):e===KL&&(o=r===gOe,l=r===vOe,f=r===yOe),{leftButton:o,middleButton:l,rightButton:f}}function SOe(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,l={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o};return{center:n,offsetCenter:l}}const NI={srcElement:"root",priority:0};class EOe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,o=!1){const{handlers:l,handlersByElement:f}=this;let s=NI;typeof r=="string"||r&&r.addEventListener?s={...NI,srcElement:r}:r&&(s={...NI,...r});let p=f.get(s.srcElement);p||(p=[],f.set(s.srcElement,p));const v={type:e,handler:n,srcElement:s.srcElement,priority:s.priority};i&&(v.once=!0),o&&(v.passive=!0),l.push(v),this._active=this._active||!v.passive;let x=p.length-1;for(;x>=0&&!(p[x].priority>=v.priority);)x--;p.splice(x+1,0,v)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let o=r.length-1;o>=0;o--){const l=r[o];if(l.type===e&&l.handler===n){r.splice(o,1);const f=i.get(l.srcElement);f.splice(f.indexOf(l),1),f.length===0&&i.delete(l.srcElement)}}this._active=r.some(o=>!o.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const o=()=>{e.handled=!0},l=()=>{e.handled=!0,i=!0},f=[];for(let s=0;s<r.length;s++){const{type:p,handler:v,once:x}=r[s];if(v({...e,type:p,stopPropagation:o,stopImmediatePropagation:l}),x&&f.push(r[s]),i)break}for(let s=0;s<f.length;s++){const{type:p,handler:v}=f[s];this.remove(p,v)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...wOe(e),...SOe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const COe={events:null,recognizers:null,recognizerOptions:{},Manager:ZRe,touchAction:"none",tabIndex:0};class tK{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:o}=i,l=QRe[o.type];l&&this.manager.emit(l,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...COe,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||KRe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(wU).forEach(i=>{const o=this.manager.get(i);o&&wU[i].forEach(l=>{o.recognizeWith(l)})});for(const i in n.recognizerOptions){const o=this.manager.get(i);if(o){const l=n.recognizerOptions[i];delete l.enable,o.set(l)}}this.wheelInput=new sOe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new lOe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new uOe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new dOe(e,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const o=JRe[e];o&&!this.options.recognizers&&o.forEach(l=>{const f=r.get(l);n?(f.requireFailure(e),i.dropRequireFailure(l)):f.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,o){if(typeof e!="string"){r=n;for(const v in e)this._addEventHandler(v,e[v],r,i,o);return}const{manager:l,events:f}=this,s=SU[e]||e;let p=f.get(s);p||(p=new EOe(this),f.set(s,p),p.recognizerName=eOe[s]||s,l&&l.on(s,p.handleEvent)),p.add(e,n,r,i,o),p.isEmpty()||this._toggleRecognizer(p.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const l in e)this._removeEventHandler(l,e[l]);return}const{events:r}=this,i=SU[e]||e,o=r.get(i);if(o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:l}=o;let f=!1;for(const s of r.values())if(s.recognizerName===l&&!s.isEmpty()){f=!0;break}f||this._toggleRecognizer(l,!1)}}}function Ph(){}const TOe=({isDragging:t})=>t?"grabbing":"grab",nK={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Ph,onResize:Ph,onViewStateChange:Ph,onInteractionStateChange:Ph,onBeforeRender:Ph,onAfterRender:Ph,onLoad:Ph,onError:t=>Mr.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:TOe,getTooltip:null,debug:!1,drawPickingColors:!1};class kT{constructor(e){j(this,"props",void 0),j(this,"width",0),j(this,"height",0),j(this,"userData",{}),j(this,"canvas",null),j(this,"viewManager",null),j(this,"layerManager",null),j(this,"effectManager",null),j(this,"deckRenderer",null),j(this,"deckPicker",null),j(this,"eventManager",null),j(this,"tooltip",null),j(this,"metrics",void 0),j(this,"animationLoop",void 0),j(this,"stats",void 0),j(this,"viewState",void 0),j(this,"cursorState",void 0),j(this,"_needsRedraw",void 0),j(this,"_pickRequest",void 0),j(this,"_lastPointerDownInfo",null),j(this,"_metricsCounter",void 0),j(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),j(this,"_onEvent",n=>{const r=o6[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),l=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:f}=l,s=f&&(f[r.handler]||f.props[r.handler]),p=this.props[r.handler];let v=!1;s&&(v=s.call(f,l,n)),!v&&p&&p(l,n)}),j(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...nK,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Mr.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),CSe()==="IE"&&Mr.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new WZ({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&hv.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,o,l,f,s;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(o=this.deckRenderer)===null||o===void 0||o.finalize(),this.deckRenderer=null,(l=this.deckPicker)===null||l===void 0||l.finalize(),this.deckPicker=null,(f=this.eventManager)===null||f===void 0||f.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var p;(p=this.canvas.parentElement)===null||p===void 0||p.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Mr.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Mr.removed("onLayerClick","onClick")(),e.initialViewState&&!nu(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),l=this.deckRenderer.needsRedraw(e);return n=n||r||i||o||l,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return as(this.viewManager),this.viewManager.views}getViewports(e){return as(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){as(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),as(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(r||r===0){var i;const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,o=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||o!==this.height){var l,f;this.width=i,this.height=o,(l=this.viewManager)===null||l===void 0||l.setProps({width:i,height:o}),(f=this.layerManager)===null||f===void 0||f.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:o})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:o,debug:l,onError:f,onBeforeRender:s,onAfterRender:p,useDevicePixels:v}=e;return new KTe({width:n,height:r,useDevicePixels:v,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:x=>IY({...o,...x,canvas:this.canvas,debug:l,onContextLost:()=>this._onContextLost()}),onInitialize:x=>this._setGLContext(x.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:s,onAfterRender:p,onError:f})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new YZ({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let o=i,l=!1;for(const f of r){var n;o=f,l=((n=f.layer)===null||n===void 0?void 0:n.onHover(f,e.event))||l}if(!l&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const f=this.props.getTooltip(o);this.tooltip.setTooltip(f,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,ek(e,{enable:!0,copyState:!0})),this.tooltip=new GRe(this.canvas),cd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new wZ;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new tK(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in o6)this.eventManager.on(i,this._onEvent);this.viewManager=new yRe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new vRe(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new LRe,this.deckRenderer=new kRe(e),this.deckPicker=new URe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;cd(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Mr.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Jh.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}j(kT,"defaultProps",nK);j(kT,"VERSION",jSe);class $I{constructor(e,n){j(this,"opts",void 0),j(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let o=r;if(r&&r.length!==i){o=new Float32Array(i);const l=n.elementOffset||0;for(let f=0;f<i;++f)o[f]=r[l+f]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function AOe(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function jS(t){return t.stride||t.size*t.bytesPerElement}function rK(t,e){e.offset&&Mr.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=jS(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}function MOe(t,e){const n=rK(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class POe{constructor(e,n,r){j(this,"gl",void 0),j(this,"id",void 0),j(this,"size",void 0),j(this,"settings",void 0),j(this,"value",void 0),j(this,"doublePrecision",void 0),j(this,"_buffer",void 0),j(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,o=i===5130;let{defaultValue:l}=n;l=Number.isFinite(l)?[l]:l||new Array(this.size).fill(0);let f;o?f=5126:!i&&n.isIndexed?f=e&&rk(e,Vi.ELEMENT_INDEX_UINT32)?5125:5123:f=i||5126;let s=AOe(i||f||5126);this.doublePrecision=o,o&&n.fp64===!1&&(s=Float32Array),this.value=null,this.settings={...n,defaultType:s,defaultValue:l,logicalType:i,type:f,size:this.size,bytesPerElement:s.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Oi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*jS(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),hv.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,o=MOe(this.getAccessor(),n||{});return r[e]=new $I(this,o.high),r["".concat(e,"64Low")]=i?new $I(this,o.low):new Float32Array(this.size),r}if(n){const r=rK(this.getAccessor(),n);return{[e]:new $I(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,o=r*i;if(n&&o&&n.length>=o){const l=new Array(i).fill(1/0),f=new Array(i).fill(-1/0);for(let s=0;s<o;)for(let p=0;p<i;p++){const v=n[s++];v<l[p]&&(l[p]=v),v>f[p]&&(f[p]=v)}e=[l,f]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof Oi?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let o=r.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!n.constant||!this._areValuesEqual(o,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(r.buffer){const o=r.buffer;n.externalBuffer=o,n.constant=!1,this.value=r.value||null;const l=r.value instanceof Float64Array;i.type=r.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(l?2:1),i.stride=jS(i)}else if(r.value){this._checkExternalBuffer(r);let o=r.value;n.externalBuffer=null,n.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=jS(i);const{buffer:l,byteOffset:f}=this;this.doublePrecision&&o instanceof Float64Array&&(o=kI(o,i));const s=o.byteLength+f+i.stride*2;l.byteLength<s&&l.reallocate(s),l.setAccessor(null),l.subData({data:o,offset:f}),i.type=r.type||l.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?kI(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,o=hv.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:l,byteOffset:f}=this;return l.byteLength<o.byteLength+f&&(l.reallocate(o.byteLength+f),n&&i&&l.subData({data:i instanceof Float64Array?kI(i,this):i,offset:f})),r.allocatedValue=o,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&Mr.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let l=o;for(;--l>=0;)n[r+l]=i[l];return n}switch(o){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let l=o;for(;--l>=0;)n[r+l]=Number.isFinite(e[l])?e[l]:i[l]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const BU=[],DU=[];function cx(t,e=0,n=1/0){let r=BU;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(DU.length=t.length,r=DU):r=BU,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function iK(t){return t&&t[Symbol.asyncIterator]}function oK(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:l}=e,f=t.BYTES_PER_ELEMENT,s=r?r/f:n,p=i?i/f:0,v=Math.floor((t.length-p)/s);return(x,{index:S,target:M})=>{if(!o){const B=S*s+p;for(let O=0;O<n;O++)M[O]=t[B+O];return M}const P=o[S],R=o[S+1]||v;let D;if(l){D=new Array(R-P);for(let B=P;B<R;B++){const O=B*s+p;M=new Array(n);for(let k=0;k<n;k++)M[k]=t[O+k];D[B-P]=M}}else if(s===n)D=t.subarray(P*n+p,R*n+p);else{D=new t.constructor((R-P)*n);let B=0;for(let O=P;O<R;O++){const k=O*s+p;for(let $=0;$<n;$++)D[B++]=t[k+$]}}return D}}const IOe=[],US=[[0,1/0]];function ROe(t,e){if(t===US||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const l=t[o];l[1]<e[0]?(n.push(l),i=o+1):l[0]>e[1]?n.push(l):e=[Math.min(l[0],e[0]),Math.max(l[1],e[1])]}return n.splice(i,0,e),n}function jI(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,l=t.end||n.length,f=e.length,s=l-r;if(f>s){n.set(e.subarray(0,s),r);return}if(n.set(e,r),!o)return;let p=f;for(;p<s;){const v=o(p,e);for(let x=0;x<i;x++)n[r+p]=v[x]||0,p++}}function OOe({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return jI({source:t,target:e,size:n,getData:r}),e;let l=0,f=0;const s=r&&((v,x)=>r(v+f,x)),p=Math.min(i.length,o.length);for(let v=1;v<p;v++){const x=i[v]*n,S=o[v]*n;jI({source:t.subarray(l,x),target:e,start:f,end:S,size:n,getData:s}),l=x,f=S}return f<e.length&&jI({source:[],target:e,start:f,size:n,getData:s}),e}const LOe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function sK(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...LOe[n],...e,...t,type:n}}function aK(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function lK(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function cK(t){t.push(t.shift())}function bk(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,l=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*l}function uK({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:o=l=>l}){const l=n.doublePrecision&&n.value instanceof Float64Array?2:1,f=n.size*l,s=n.byteOffset,p=n.startIndices,v=i&&p,x=bk(n,e),S=n.isConstant;if(!v&&r>=x)return;const M=S?n.value:n.getBuffer().getData({srcByteOffset:s});if(n.settings.normalized&&!S){const B=o;o=(O,k)=>n.normalizeConstant(B(O,k))}const P=S?(B,O)=>o(M,O):(B,O)=>o(M.subarray(B,B+f),O),R=t.getData({length:r}),D=new Float32Array(x);OOe({source:R,target:D,sourceStartIndices:i,targetStartIndices:p,size:f,getData:P}),t.byteLength<D.byteLength+s&&t.reallocate(D.byteLength+s),t.subData({data:D,offset:s})}class xk extends POe{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:US}),j(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(o=>e[o])]:e[n];return sK(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=ROe(this.state.updateRanges,[r,i])}else this.state.updateRanges=US}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=IOe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==US),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:l,noAlloc:f}}=this;let s=!0;if(l){for(const[p,v]of o)l.call(i,this,{data:n,startRow:p,endRow:v,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[p,v]of o){const x=Number.isFinite(p)?this.getVertexOffset(p):0,S=Number.isFinite(v)?this.getVertexOffset(v):f||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:x,endOffset:S})}this._checkAttributeArray()}else s=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),s}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const l=e;as(ArrayBuffer.isView(l.value),"invalid ".concat(i.accessor));const f=!!l.size&&l.size!==this.size;return r.binaryAccessor=oK(l.value,{size:l.size||this.size,stride:l.stride,offset:l.offset,startIndices:n,nested:f}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:o,numInstances:l}){if(e.constant)return;const{settings:f,state:s,value:p,size:v,startIndices:x}=e,{accessor:S,transform:M}=f,P=s.binaryAccessor||(typeof S=="function"?S:o[S]);as(typeof P=="function",'accessor "'.concat(S,'" is not a function'));let R=e.getVertexOffset(r);const{iterable:D,objectInfo:B}=cx(n,r,i);for(const O of D){B.index++;let k=P(O,B);if(M&&(k=M.call(this,k)),x){const $=(B.index<x.length-1?x[B.index+1]:l)-x[B.index];if(k&&Array.isArray(k[0])){let H=R;for(const U of k)e._normalizeValue(U,p,H),H+=v}else k&&k.length>v?p.set(k,R):(e._normalizeValue(k,B.target,0),lRe({target:p,source:B.target,start:R,count:$}));R+=$*v}else e._normalizeValue(k,p,R),R+=v}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class BOe{constructor({gl:e,attribute:n,timeline:r}){j(this,"gl",void 0),j(this,"type","interpolation"),j(this,"attributeInTransition",void 0),j(this,"settings",void 0),j(this,"attribute",void 0),j(this,"transition",void 0),j(this,"currentStartIndices",void 0),j(this,"currentLength",void 0),j(this,"transform",void 0),j(this,"buffers",void 0),this.gl=e,this.transition=new ax(r),this.attribute=n,this.attributeInTransition=new xk(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=kOe(e,n);const i={byteLength:0,usage:35050};this.buffers=[new Oi(e,i),new Oi(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:o}=this;cK(i);const l={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const f of i)uK({buffer:f,...l});this.currentStartIndices=o.startIndices,this.currentLength=bk(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:aK(r,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let o=i/n;r&&(o=r(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const DOe=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function kOe(t,e){const n=lK(e.size);return new fk(t,{vs:DOe,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class FOe{constructor({gl:e,attribute:n,timeline:r}){j(this,"gl",void 0),j(this,"type","spring"),j(this,"attributeInTransition",void 0),j(this,"settings",void 0),j(this,"attribute",void 0),j(this,"transition",void 0),j(this,"currentStartIndices",void 0),j(this,"currentLength",void 0),j(this,"texture",void 0),j(this,"framebuffer",void 0),j(this,"transform",void 0),j(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new ax(r),this.attribute=n,this.attributeInTransition=new xk(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=NOe(e),this.framebuffer=$Oe(e,this.texture),this.transform=zOe(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Oi(e,i),new Oi(e,i),new Oi(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:o}=this,l={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const f of i)uK({buffer:f,...l});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=bk(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:aK(r,o)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const l=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:l.stiffness,damping:l.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),cK(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),LT(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function zOe(t,e,n){const r=lK(e.size);return new fk(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function NOe(t){return new Zs(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function $Oe(t,e){return new Jo(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const jOe={interpolation:BOe,spring:FOe};class UOe{constructor(e,{id:n,timeline:r}){j(this,"id",void 0),j(this,"isSupported",void 0),j(this,"gl",void 0),j(this,"timeline",void 0),j(this,"transitions",void 0),j(this,"needsRedraw",void 0),j(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=fk.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const o=e[i],l=o.getTransitionSetting(n);l&&this._updateAttribute(i,o,l)}for(const i in this.transitions){const o=e[i];(!o||!o.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let o=!i||i.type!==r.type;if(o){if(!this.isSupported){Mr.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const l=jOe[r.type];l?this.transitions[e]=new l({attribute:n,timeline:this.timeline,gl:this.gl}):(Mr.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const kU="attributeManager.invalidate",VOe="attributeManager.updateStart",GOe="attributeManager.updateEnd",HOe="attribute.updateStart",WOe="attribute.allocate",XOe="attribute.updateEnd";class qOe{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){j(this,"id",void 0),j(this,"gl",void 0),j(this,"attributes",void 0),j(this,"updateTriggers",void 0),j(this,"needsRedraw",void 0),j(this,"userData",void 0),j(this,"stats",void 0),j(this,"attributeTransitionManager",void 0),j(this,"mergeBoundsMemoized",sx(QIe)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new UOe(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Ls(kU,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Ls(kU,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:l={},context:f={}}){let s=!1;Ls(VOe,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const p in this.attributes){const v=this.attributes[p],x=v.settings.accessor;v.startIndices=r,v.numInstances=n,o[p]&&Mr.removed("props.".concat(p),"data.attributes.".concat(p))(),v.setExternalBuffer(l[p])||v.setBinaryValue(typeof x=="string"?l[x]:void 0,e.startIndices)||typeof x=="string"&&!l[x]&&v.setConstantValue(o[x])||v.needsUpdate()&&(s=!0,this._updateAttribute({attribute:v,numInstances:n,data:e,props:o,context:f})),this.needsRedraw=this.needsRedraw||v.needsRedraw()}s&&Ls(GOe,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const o in n){const l=n[o];l.needsRedraw(e)&&!r.hasAttribute(o)&&(i[o]=l)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new xk(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,o=i[e];return o&&o.forEach(l=>{const f=r[l];f&&f.setNeedsUpdate(f.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Ls(HOe,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Ls(WOe,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Ls(XOe,n,r))}}class YOe extends ax{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:o}}=this,l=o(e/i);this._value=pb(n,r,l)}}const FU=1e-5;function zU(t,e,n,r,i){const o=e-t,f=(n-e)*i,s=-o*r;return f+s+o+e}function ZOe(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let l=0;l<n.length;l++)o[l]=zU(t[l],e[l],n[l],r,i);return o}return zU(t,e,n,r,i)}function NU(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class KOe extends ax{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:l=e}=this;let f=ZOe(o,l,n,r,i);const s=NU(f,n),p=NU(f,l);s<FU&&p<FU&&(f=n,this.end()),this._prevValue=l,this._currValue=f}}const JOe={interpolation:YOe,spring:KOe};class QOe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:o}=this;if(o.has(e)){const s=o.get(e),{value:p=s.settings.fromValue}=s;n=p,this.remove(e)}if(i=sK(i),!i)return;const l=JOe[i.type];if(!l){Mr.error("unsupported transition type '".concat(i.type,"'"))();return}const f=new l(this.timeline);f.start({...i,fromValue:n,toValue:r}),o.set(e,f)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function eLe(t){const e=t[Lf];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function tLe(t,e){const n=dK({newProps:t,oldProps:e,propTypes:t[Lf],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=rLe(t,e);let i=!1;return r||(i=iLe(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:oLe(t,e),transitionsChanged:nLe(t,e)}}function nLe(t,e){if(!t.transitions)return!1;const n={},r=t[Lf];let i=!1;for(const o in t.transitions){const l=r[o],f=l&&l.type;(f==="number"||f==="color"||f==="array")&&QL(t[o],e[o],l)&&(n[o]=!0,i=!0)}return i?n:!1}function dK({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");const l=QL(t[o],e[o],r[o]);if(l)return"".concat(i,".").concat(o," ").concat(l)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const l=QL(t[o],e[o],r[o]);if(l)return"".concat(i,".").concat(o," ").concat(l)}}return!1}function QL(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function rLe(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function iLe(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&$U(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&$U(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function oLe(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function $U(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},dK({oldProps:i,newProps:r,triggerName:n})}const sLe="count(): argument not an object",aLe="count(): argument not a container";function lLe(t){if(!uLe(t))throw new Error(sLe);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(cLe(t))return Object.keys(t).length;throw new Error(aLe)}function cLe(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function uLe(t){return t!==null&&typeof t=="object"}function dLe(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const fLe={10241:9987,10240:9729,10242:33071,10243:33071},eB={};function hLe(t,e,n,r){if(n instanceof Zs)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new Zs(e,{...n,parameters:{...fLe,...i,...r}});return eB[o.id]=t,o}function pLe(t,e){!e||!(e instanceof Zs)||eB[e.id]===t&&(e.delete(),delete eB[e.id])}const mLe={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||tB(t)&&(t.length===3||t.length===4)},equal(t,e,n){return nu(t,e,1)}},accessor:{validate(t,e){const n=lC(t);return n==="function"||n===lC(e.value)},equal(t,e,n){return typeof e=="function"?!0:nu(t,e,1)}},array:{validate(t,e){return e.optional&&!t||tB(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?nu(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?nu(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:hLe(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{pLe(n.id,t)}}};function gLe(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const l=o==null?void 0:o.deprecatedFor;if(l)r[i]=Array.isArray(l)?l:[l];else{const f=vLe(i,o);e[i]=f,n[i]=f.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function vLe(t,e){switch(lC(e)){case"object":return M0(t,e);case"array":return M0(t,{type:"array",value:e,compare:!1});case"boolean":return M0(t,{type:"boolean",value:e});case"number":return M0(t,{type:"number",value:e});case"function":return M0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function M0(t,e){return"type"in e?{name:t,...mLe[e.type],...e}:"value"in e?{name:t,type:lC(e.value),...e}:{name:t,type:"object",value:e}}function tB(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function lC(t){return tB(t)?"array":t===null?"null":typeof t}function yLe(t,e){let n;for(let o=e.length-1;o>=0;o--){const l=e[o];"extensions"in l&&(n=l.extensions)}const r=nB(t.constructor,n),i=Object.create(r);i[sC]=t,i[xp]={},i[bf]={};for(let o=0;o<e.length;++o){const l=e[o];for(const f in l)i[f]=l[f]}return Object.freeze(i),i}const _Le="_mergedDefaultProps";function nB(t,e){let n=_Le;if(e)for(const i of e){const o=i.constructor;o&&(n+=":".concat(o.extensionName||o.name))}const r=fK(t,n);return r||(t[n]=bLe(t,e||[]))}function bLe(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=nB(r),o=fK(t,"defaultProps")||{},l=gLe(o),f=Object.assign(Object.create(null),i,l.defaultProps),s=Object.assign(Object.create(null),i==null?void 0:i[Lf],l.propTypes),p=Object.assign(Object.create(null),i==null?void 0:i[zI],l.deprecatedProps);for(const v of e){const x=nB(v.constructor);x&&(Object.assign(f,x),Object.assign(s,x[Lf]),Object.assign(p,x[zI]))}return xLe(f,t),SLe(f,s),wLe(f,p),f[Lf]=s,f[zI]=p,e.length===0&&!wk(t,"_propTypes")&&(t._propTypes=s),f}function xLe(t,e){const n=CLe(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function wLe(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const o of e[n])wk(this,o)||(this[o]=r);Mr.deprecated(i,e[n].join("/"))()}})}function SLe(t,e){const n={},r={};for(const i in e){const o=e[i],{name:l,value:f}=o;o.async&&(n[l]=f,r[l]=ELe(l))}t[Ng]=n,t[xp]={},Object.defineProperties(t,r)}function ELe(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||iK(e)?this[xp][t]=e:this[bf][t]=e},get(){if(this[bf]){if(t in this[bf])return this[bf][t]||this[Ng][t];if(t in this[xp]){const e=this[sC]&&this[sC].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ng][t]}}return this[Ng][t]}}}function wk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fK(t,e){return wk(t,e)&&t[e]}function CLe(t){const e=t.componentName;return e||Mr.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let TLe=0;class Sk{constructor(...e){j(this,"id",void 0),j(this,"props",void 0),j(this,"count",void 0),this.props=yLe(this,e),this.id=this.props.id,this.count=TLe++}clone(e){const{props:n}=this,r={};for(const i in n[Ng])i in n[bf]?r[i]=n[bf][i]:i in n[xp]&&(r[i]=n[xp][i]);return new this.constructor({...n,...r,...e})}}j(Sk,"componentName","Component");j(Sk,"defaultProps",{});const ALe=Object.freeze({});class MLe{constructor(e){j(this,"component",void 0),j(this,"onAsyncPropUpdated",void 0),j(this,"asyncProps",void 0),j(this,"oldProps",void 0),j(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||ALe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[sC]||this.component;const n=e[bf]||{},r=e[xp]||e,i=e[Ng]||{};for(const o in n){const l=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,l),n[o]=this.getAsyncProp(o)}for(const o in r){const l=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,l)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(iK(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(r,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let o=[],l=0;for await(const f of n){if(!this.component)return;const{dataTransform:s}=this.component.props;s?o=s(f,o):o=o.concat(f),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:l,endRow:o.length}]}),l=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Lf];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class PLe extends MLe{constructor({attributeManager:e,layer:n}){super(n),j(this,"attributeManager",void 0),j(this,"needsRedraw",void 0),j(this,"needsUpdate",void 0),j(this,"subLayers",void 0),j(this,"usesPickingColorCache",void 0),j(this,"hasPickingBuffer",void 0),j(this,"changeFlags",void 0),j(this,"viewport",void 0),j(this,"uniformTransitions",void 0),j(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const ILe="layer.changeFlag",RLe="layer.initialize",OLe="layer.update",LLe="layer.finalize",BLe="layer.matched",jU=2**24-1,DLe=Object.freeze([]),kLe=sx(({oldViewport:t,viewport:e})=>t.equals(e));let Gc=new Uint8ClampedArray(0);const FLe={data:{type:"data",value:DLe,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:l}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,o){var f;i={...i,fetch:{...(f=i)===null||f===void 0?void 0:f.fetch,signal:o}}}let s=l.contains(t);return!s&&!i&&(l.add({resourceId:t,data:YE(t,r),persistent:!1}),s=!0),s?l.subscribe({resourceId:t,onChange:p=>{var v;return(v=n.internalState)===null||v===void 0?void 0:v.reloadAsyncProp(e,p)},consumerId:n.id,requestId:e}):YE(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ni.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Cc extends Sk{constructor(...e){super(...e),j(this,"internalState",null),j(this,"lifecycle",ig.NO_STATE),j(this,"context",void 0),j(this,"state",void 0),j(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){as(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=VZ(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,l]=vk(r,n.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,l]}unproject(e){return as(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){as(this.internalState);const r=this.internalState.viewport||this.context.viewport;return oRe(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ni.DEFAULT||e===ni.LNGLAT||e===ni.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){as(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:lLe(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=dLe(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,o=this.internalState.hasPickingBuffer,l=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(f=>f.getNeedsPickingBuffer.call(this,f));if(o!==l){this.internalState.hasPickingBuffer=l;const{pickingColors:f,instancePickingColors:s}=n.attributes,p=f||s;p&&(l&&p.constant&&(p.constant=!1,n.invalidate(p.id)),!p.value&&!l&&(p.constant=!0,p.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var o,l;(o=this.context)===null||o===void 0||(l=o.onError)===null||l===void 0||l.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!kLe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Gc.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>jU&&Mr.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Gc=hv.allocate(Gc,n,{size:3,copy:!0,maxCount:Math.max(n,jU)});const i=Math.floor(Gc.length/3),o=[];for(let l=r;l<i;l++)this.encodePickingColor(l,o),Gc[l*3+0]=o[0],Gc[l*3+1]=o[1],Gc[l*3+2]=o[2]}e.value=Gc.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},o=r.getShaderAttributes(n,i);e.setAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,o=r||i,l=o&&n.attributes&&n.attributes[o.id];if(l&&l.value){const f=l.value,s=this.encodePickingColor(e);for(let p=0;p<n.length;p++){const v=o.getVertexOffset(p);f[v]===s[0]&&f[v+1]===s[1]&&f[v+2]===s[2]&&this._disablePickingIndex(p)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const o=i.getVertexOffset(e),l=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(l-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Gc.buffer&&(r.value=Gc.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){as(!this.internalState),as(Number.isFinite(this.props.coordinateSystem)),Ls(RLe,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new PLe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Mr.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new QOe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ls(BLe,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ls(OLe,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,o=r.viewport,l=this._updateUniformTransition();i.propsInTransition=l,r.viewport=i.viewport||o,this.props=l;try{const f=this._getUpdateParams(),s=this.getModels();if(r.gl)this.updateState(f);else try{this.updateState(f)}catch{}for(const v of this.props.extensions)v.updateState.call(this,f,v);const p=this.getModels()[0]!==s[0];this._postUpdate(f,p)}finally{r.viewport=o,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ls(LLe,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const l=this.props.opacity;n.opacity=Math.pow(l,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:f}=this.props,s=f&&f(n)||[0,0];cd(o.gl,{polygonOffset:s}),gc(o.gl,r,()=>{const p={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const v of this.props.extensions)v.draw.call(this,p,v);this.draw(p)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":const l=e[i],f=n[i];l&&Array.isArray(f)&&(n.dataChanged=Array.isArray(l)?f.concat(l):l,o=!0);default:n[i]||(n[i]=e[i],o=!0)}o&&Ls(ILe,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=tLe(e,n);if(r.updateTriggersChanged)for(const o in r.updateTriggersChanged)r.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(r.transitionsChanged)for(const o in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,n[o],e[o],(i=e.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(r)}validateProps(){eLe(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new qOe(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:l,highlightedObjectIndex:f,highlightColor:s}=r;if(n||i.autoHighlight!==l||i.highlightedObjectIndex!==f||i.highlightColor!==s){const p={};l||(p.pickingSelectedColor=null),Array.isArray(s)&&(p.pickingHighlightColor=s),(n||f!==i.highlightedObjectIndex)&&(p.pickingSelectedColor=Number.isFinite(f)&&f>=0?this.encodePickingColor(f):null),this.setModuleParameters(p)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}j(Cc,"defaultProps",FLe);j(Cc,"layerName","Layer");const zLe="compositeLayer.renderLayers";class Ek extends Cc{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:o,parameters:l,getPolygonOffset:f,highlightedObjectIndex:s,autoHighlight:p,highlightColor:v,coordinateSystem:x,coordinateOrigin:S,wrapLongitude:M,positionFormat:P,modelMatrix:R,extensions:D,fetch:B,operation:O,_subLayerProps:k}=this.props,$={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:l,getPolygonOffset:f,highlightedObjectIndex:s,autoHighlight:p,highlightColor:v,coordinateSystem:x,coordinateOrigin:S,wrapLongitude:M,positionFormat:P,modelMatrix:R,extensions:D,fetch:B,operation:O},H=k&&e.id&&k[e.id],U=H&&H.updateTriggers,X=e.id||"sublayer";if(H){const J=this.props[Lf],K=e.type?e.type._propTypes:{};for(const Q in H){const ce=K[Q]||J[Q];ce&&ce.type==="accessor"&&(H[Q]=this.getSubLayerAccessor(H[Q]))}}Object.assign($,e,H),$.id="".concat(this.props.id,"-").concat(X),$.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...U};for(const J of D){const K=J.getSubLayerProps.call(this,J);K&&Object.assign($,K,{updateTriggers:Object.assign($.updateTriggers,K.updateTriggers)})}return $}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const o=this.renderLayers();r=yk(o,Boolean),this.internalState.subLayers=r}Ls(zLe,this,i,r);for(const o of r)o.parent=this}}j(Ek,"layerName","CompositeLayer");const UI={bearing:0,pitch:0,position:[0,0,0]},NLe={speed:1.2,curve:1.414};class $Le extends XZ{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),j(this,"opts",void 0),this.opts={...NLe,...e}}interpolateProps(e,n,r){const i=NZ(e,n,r,this.opts);for(const o in UI)i[o]=pb(e[o]||UI[o],n[o]||UI[o],r);return i}getDuration(e,n){let{transitionDuration:r}=n;return r==="auto"&&(r=$Z(e,n,this.opts)),r}}class hK{constructor(e){j(this,"opts",void 0),j(this,"typedArrayManager",void 0),j(this,"indexStarts",[0]),j(this,"vertexStarts",[0]),j(this,"vertexCount",0),j(this,"instanceCount",0),j(this,"attributes",void 0),j(this,"_attributeDefs",void 0),j(this,"data",void 0),j(this,"getGeometry",void 0),j(this,"geometryBuffer",void 0),j(this,"buffers",void 0),j(this,"positionSize",void 0),j(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=hv,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:o,positionFormat:l,dataChanged:f,normalize:s=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=o&&o.size||(l==="XY"?2:3),this.buffers=r,this.normalize=s,o&&(as(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),s||(r.positions=o)),this.geometryBuffer=r.positions,Array.isArray(f))for(const p of f)this._rebuildGeometry(p);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?oK(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:o,typedArrayManager:l}=this;for(const f in o)if(f in i)l.release(r[f]),r[f]=null;else{const s=o[f];s.copy=n,r[f]=l.allocate(r[f],e,s)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:o}=this,{iterable:l,objectInfo:f}=cx(i,n,r);for(const s of l){f.index++;const p=o?o(s,f):null;e(p,f.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:o,geometryBuffer:l}=this,{startRow:f=0,endRow:s=1/0}=e||{},p={};if(e||(n=[0],r=[0]),this.normalize||!l)this._forEachGeometry((x,S)=>{const M=x&&this.normalizeGeometry(x);p[S]=M,r[S+1]=r[S]+(M?this.getGeometrySize(M):0)},f,s),i=r[r.length-1];else if(r=o.startIndices,i=r[o.length]||0,ArrayBuffer.isView(l))i=i||l.length/this.positionSize;else if(l instanceof Oi){const x=l.accessor.stride||this.positionSize*4;i=i||l.byteLength/x}else if(l.buffer){const x=l.stride||this.positionSize*4;i=i||l.buffer.byteLength/x}else if(l.value){const x=l.value,S=l.stride/x.BYTES_PER_ELEMENT||this.positionSize;i=i||x.length/S}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const v={};this._forEachGeometry((x,S)=>{const M=p[S]||x;v.vertexStart=r[S],v.indexStart=n[S];const P=S<r.length-1?r[S+1]:i;v.geometrySize=P-r[S],v.geometryIndex=S,this.updateGeometryAttributes(M,v)},f,s),this.vertexCount=n[n.length-1]}}const jLe=typeof window<"u"?E.useLayoutEffect:E.useEffect;function cC(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const ULe={position:"absolute",zIndex:-1};function pK(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>pK(n,e));if(FT(t)){if(VLe(t))return e.style=ULe,E.cloneElement(t,e);if(GLe(t))return E.cloneElement(t,e)}return t}function FT(t){return t&&typeof t=="object"&&"type"in t||!1}function VLe(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function GLe(t){const e=t.type;return e&&e.deckGLViewProps}function rB(t){if(typeof t=="function")return E.createElement(pv,{},t);if(Array.isArray(t))return t.map(rB);if(FT(t)){if(t.type===E.Fragment)return rB(t.props.children);if(cC(t.type,pv))return t}return t}function HLe({children:t,layers:e=[],views:n=null}){const r=[],i=[],o={};return E.Children.forEach(rB(t),l=>{if(FT(l)){const f=l.type;if(cC(f,Cc)){const s=WLe(f,l.props);i.push(s)}else r.push(l);if(cC(f,pv)&&f!==pv&&l.props.id){const s=new f(l.props);o[s.id]=s}}else l&&r.push(l)}),Object.keys(o).length>0&&(Array.isArray(n)?n.forEach(l=>{o[l.id]=l}):n&&(o[n.id]=n),n=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function WLe(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function XLe({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},o=r.views[0].id;for(const l of t){let f=o,s=l;FT(l)&&cC(l.type,pv)&&(f=l.props.id||o,s=l.props.children);const p=r.getViewport(f),v=r.getViewState(f);if(p){v.padding=p.padding;const{x,y:S,width:M,height:P}=p;s=pK(s,{x,y:S,width:M,height:P,viewport:p,viewState:v}),i[f]||(i[f]={viewport:p,children:[]}),i[f].children.push(s)}}return Object.keys(i).map(l=>{const{viewport:f,children:s}=i[l],{x:p,y:v,width:x,height:S}=f,M={position:"absolute",left:p,top:v,width:x,height:S},P="view-".concat(l),R=E.createElement("div",{key:P,id:P,style:M},...s);if(n){const D={viewport:f,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:B=>{B.viewId=l,e._onViewStateChange(B)}};return E.createElement(n,{key:P,value:D},R)}return R})}const qLe={mixBlendMode:null};function YLe({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const o in n)o in qLe?i[o]=n[o]:r[o]=n[o];return{containerStyle:r,canvasStyle:i}}function ZLe(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function mK(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function KLe(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const o=r.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():mK(t)}});return r}const gK=E.forwardRef((t,e)=>{const[n,r]=E.useState(0),o=E.useRef({control:null,version:n,forceUpdate:()=>r(H=>H+1)}).current,l=E.useRef(null),f=E.useRef(null),s=E.useMemo(()=>HLe(t),[t.layers,t.views,t.children]);let p=!0;const v=H=>{var U;return p&&t.viewState?(o.viewStateUpdateRequested=H,null):(o.viewStateUpdateRequested=null,(U=t.onViewStateChange)===null||U===void 0?void 0:U.call(t,H))},x=H=>{if(p)o.interactionStateUpdateRequested=H;else{var U;o.interactionStateUpdateRequested=null,(U=t.onInteractionStateChange)===null||U===void 0||U.call(t,H)}},S=E.useMemo(()=>{const H={...t,style:null,width:"100%",height:"100%",parent:l.current,canvas:f.current,layers:s.layers,views:s.views,onViewStateChange:v,onInteractionStateChange:x};return delete H._customRender,o.deck&&o.deck.setProps(H),H},[t]);E.useEffect(()=>{const H=t.Deck||kT;return o.deck=KLe(o,H,{...S,parent:l.current,canvas:f.current}),()=>{var U;return(U=o.deck)===null||U===void 0?void 0:U.finalize()}},[]),jLe(()=>{mK(o);const{viewStateUpdateRequested:H,interactionStateUpdateRequested:U}=o;H&&v(H),U&&x(U)}),E.useImperativeHandle(e,()=>ZLe(o),[]);const M=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:P,width:R,height:D,id:B,style:O}=t,{containerStyle:k,canvasStyle:$}=E.useMemo(()=>YLe({width:R,height:D,style:O}),[R,D,O]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===M||o.version!==n){o.lastRenderedViewports=M,o.version=n;const H=XLe({children:s.children,deck:o.deck,ContextProvider:P}),U=E.createElement("canvas",{key:"canvas",id:B||"deckgl-overlay",ref:f,style:$});o.control=E.createElement("div",{id:"".concat(B||"deckgl","-wrapper"),ref:l,style:k},[U,H])}return p=!1,o.control});gK.defaultProps=kT.defaultProps;const JLe=gK;var vK={exports:{}},QLe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eBe=QLe,tBe=eBe;function yK(){}function _K(){}_K.resetWarningCache=yK;var nBe=function(){function t(r,i,o,l,f,s){if(s!==tBe){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_K,resetWarningCache:yK};return n.PropTypes=n,n};vK.exports=nBe();var ht=vK.exports,Uu=typeof document<"u"?document:{};function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VU(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=rBe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,l=!1,f;return{s:function(){n=t[Symbol.iterator]()},n:function(){var p=n.next();return o=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(l)throw f}}}}function rBe(t,e){if(t){if(typeof t=="string")return GU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GU(t,e)}}function GU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var iBe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function VI(t){if(!t)return null;if(typeof t=="string")return t;t.toJS&&(t=t.toJS());var e={},n=VU(t.layers),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;e[i.id]=i}}catch(l){n.e(l)}finally{n.f()}var o=t.layers.map(function(l){var f=e[l.ref],s=null;if("interactive"in l&&(s=Fw({},l),delete s.interactive),f){s=s||Fw({},l),delete s.ref;var p=VU(iBe),v;try{for(p.s();!(v=p.n()).done;){var x=v.value;x in f&&(s[x]=f[x])}}catch(S){p.e(S)}finally{p.f()}}return s||l});return Fw(Fw({},t),{},{layers:o})}var HU={};function oBe(){}function sBe(t){t&&console.error(t.error)}var bK={container:ht.object,gl:ht.object,mapboxApiAccessToken:ht.string,mapboxApiUrl:ht.string,attributionControl:ht.bool,preserveDrawingBuffer:ht.bool,reuseMaps:ht.bool,transformRequest:ht.func,mapOptions:ht.object,mapStyle:ht.oneOfType([ht.string,ht.object]),preventStyleDiffing:ht.bool,visible:ht.bool,asyncRender:ht.bool,onLoad:ht.func,onError:ht.func,width:ht.number,height:ht.number,viewState:ht.object,longitude:ht.number,latitude:ht.number,zoom:ht.number,bearing:ht.number,pitch:ht.number,altitude:ht.number},VS={container:Uu.body,mapboxApiAccessToken:aBe(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:oBe,onError:sBe,width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function aBe(){var t=null;if(typeof window<"u"&&window.location){var e=window.location.search.match(/access_token=([^&\/]*)/);t=e&&e[1]}return!t&&typeof process<"u"&&(t=t||HU.MapboxAccessToken||HU.REACT_APP_MAPBOX_ACCESS_TOKEN),t||"no-token"}function WU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"component";t.debug&&ht.checkPropTypes(bK,t,"prop",e)}var Bp=function(){function t(e){var n=this;if(Di(this,t),j(this,"props",VS),j(this,"width",0),j(this,"height",0),j(this,"_fireLoadEvent",function(){n.props.onLoad({type:"load",target:n._map})}),j(this,"_handleError",function(r){n.props.onError(r)}),!e.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=e.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(e)}return ki(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(n){return this._update(this.props,n),this}},{key:"redraw",value:function(){var n=this._map;n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(n){this._map=t.savedMap;var r=this._map.getContainer(),i=n.container;for(i.classList.add("mapboxgl-map");r.childNodes.length>0;)i.appendChild(r.childNodes[0]);this._map._container=i,t.savedMap=null,n.mapStyle&&this._map.setStyle(VI(n.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(n){if(n.reuseMaps&&t.savedMap)this._reuse(n);else{if(n.gl){var r=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=r,n.gl}}var i={container:n.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:VI(n.mapStyle),interactive:!1,trackResize:!1,attributionControl:n.attributionControl,preserveDrawingBuffer:n.preserveDrawingBuffer};n.transformRequest&&(i.transformRequest=n.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},i,n.mapOptions)),this._map.once("load",this._fireLoadEvent),this._map.on("error",this._handleError)}return this}},{key:"_destroy",value:function(){this._map&&(this.props.reuseMaps&&!t.savedMap?(t.savedMap=this._map,this._map.off("load",this._fireLoadEvent),this._map.off("error",this._handleError),this._map.off("styledata",this._fireLoadEvent)):this._map.remove(),this._map=null)}},{key:"_initialize",value:function(n){var r=this;n=Object.assign({},VS,n),WU(n,"Mapbox"),this.mapboxgl.accessToken=n.mapboxApiAccessToken||VS.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=n.mapboxApiUrl,this._create(n);var i=n,o=i.container;Object.defineProperty(o,"offsetWidth",{configurable:!0,get:function(){return r.width}}),Object.defineProperty(o,"clientWidth",{configurable:!0,get:function(){return r.width}}),Object.defineProperty(o,"offsetHeight",{configurable:!0,get:function(){return r.height}}),Object.defineProperty(o,"clientHeight",{configurable:!0,get:function(){return r.height}});var l=this._map.getCanvas();l&&(l.style.outline="none"),this._updateMapViewport({},n),this._updateMapSize({},n),this.props=n}},{key:"_update",value:function(n,r){if(this._map){r=Object.assign({},this.props,r),WU(r,"Mapbox");var i=this._updateMapViewport(n,r),o=this._updateMapSize(n,r);this._updateMapStyle(n,r),!r.asyncRender&&(i||o)&&this.redraw(),this.props=r}}},{key:"_updateMapStyle",value:function(n,r){var i=n.mapStyle!==r.mapStyle;i&&this._map.setStyle(VI(r.mapStyle),{diff:!r.preventStyleDiffing})}},{key:"_updateMapSize",value:function(n,r){var i=n.width!==r.width||n.height!==r.height;return i&&(this.width=r.width,this.height=r.height,this._map.resize()),i}},{key:"_updateMapViewport",value:function(n,r){var i=this._getViewState(n),o=this._getViewState(r),l=o.latitude!==i.latitude||o.longitude!==i.longitude||o.zoom!==i.zoom||o.pitch!==i.pitch||o.bearing!==i.bearing||o.altitude!==i.altitude;return l&&(this._map.jumpTo(this._viewStateToMapboxProps(o)),o.altitude!==i.altitude&&(this._map.transform.altitude=o.altitude)),l}},{key:"_getViewState",value:function(n){var r=n.viewState||n,i=r.longitude,o=r.latitude,l=r.zoom,f=r.pitch,s=f===void 0?0:f,p=r.bearing,v=p===void 0?0:p,x=r.altitude,S=x===void 0?1.5:x;return{longitude:i,latitude:o,zoom:l,pitch:s,bearing:v,altitude:S}}},{key:"_checkStyleSheet",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"0.47.0";if(!(typeof Uu>"u"))try{var r=Uu.createElement("div");r.className="mapboxgl-map",r.style.display="none",Uu.body.appendChild(r);var i=window.getComputedStyle(r).position!=="static";if(!i){var o=Uu.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(n,"/mapbox-gl.css")),Uu.head.appendChild(o)}}catch{}}},{key:"_viewStateToMapboxProps",value:function(n){return{center:[n.longitude,n.latitude],zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}}}]),t}();j(Bp,"initialized",!1);j(Bp,"propTypes",bK);j(Bp,"defaultProps",VS);j(Bp,"savedMap",null);var xK={exports:{}};(function(t,e){var n={};(function(r,i){t.exports=i()})(hne,function(){var r,i,o;function l(s,p){if(!r)r=p;else if(!i)i=p;else{var v="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",x={};r(x),o=p(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(o.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}l(["exports"],function(s){var p=typeof self<"u"?self:{},v="2.15.0";let x;const S={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(x==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{x=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{x=c}}return x},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!S.API_URL)return null;try{const c=new URL(S.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},M={supported:!1,testSupport:function(c){!D&&R&&(B?O(c):P=c)}};let P,R,D=!1,B=!1;function O(c){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,R),c.isContextLost())return;M.supported=!0}catch{}c.deleteTexture(a),D=!0}p.document&&(R=p.document.createElement("img"),R.onload=function(){P&&O(P),P=null,B=!0},R.onerror=function(){D=!0,P=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const k="01";function $(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var H=U;function U(c,a,u,h){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(h-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=u,this.p2y=h}U.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,h=0;h<8;h++){var g=this.sampleCurveX(u)-c;if(Math.abs(g)<a)return u;var _=this.sampleCurveDerivativeX(u);if(Math.abs(_)<1e-6)break;u-=g/_}var w=0,T=1;for(u=c,h=0;h<20&&(g=this.sampleCurveX(u),!(Math.abs(g-c)<a));h++)c>g?w=u:T=u,u=.5*(T-w)+w;return u},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var X=$(H),J=K;function K(c,a){this.x=c,this.y=a}K.prototype={clone:function(){return new K(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,u=c.y-this.y;return a*a+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),u=Math.sin(c),h=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=h,this},_rotateAround:function(c,a){var u=Math.cos(c),h=Math.sin(c),g=a.y+h*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-h*(this.y-a.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},K.convert=function(c){return c instanceof K?c:Array.isArray(c)?new K(c[0],c[1]):c};var Q=$(J);const ce=Math.PI/180,ge=180/Math.PI;function ae(c){return c*ce}function ve(c){return c*ge}const Fe=[[0,0],[1,0],[1,1],[0,1]];function Ae(c){if(c<=0)return 0;if(c>=1)return 1;const a=c*c,u=a*c;return 4*(c<.5?u:3*(c-a)+u-.75)}function pe(c,a,u,h){const g=new X(c,a,u,h);return function(_){return g.solve(_)}}const fe=pe(.25,.1,.25,1);function xe(c,a,u){return Math.min(u,Math.max(a,c))}function Re(c,a,u){return(u=xe((u-c)/(a-c),0,1))*u*(3-2*u)}function ke(c,a,u){const h=u-a,g=((c-a)%h+h)%h+a;return g===a?u:g}function ze(c,a,u){if(!c.length)return u(null,[]);let h=c.length;const g=new Array(c.length);let _=null;c.forEach((w,T)=>{a(w,(I,L)=>{I&&(_=I),g[T]=L,--h==0&&u(_,g)})})}function Xe(c){const a=[];for(const u in c)a.push(c[u]);return a}function Ne(c,...a){for(const u of a)for(const h in u)c[h]=u[h];return c}let Qe=1;function pt(){return Qe++}function Ke(){return function c(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()}function ot(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function St(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function st(c,a){c.forEach(u=>{a[u]&&(a[u]=a[u].bind(a))})}function rt(c,a){return c.indexOf(a,c.length-a.length)!==-1}function lt(c,a,u){const h={};for(const g in c)h[g]=a.call(u||this,c[g],g,c);return h}function Rt(c,a,u){const h={};for(const g in c)a.call(u||this,c[g],g,c)&&(h[g]=c[g]);return h}function bt(c){return Array.isArray(c)?c.map(bt):typeof c=="object"&&c?lt(c,bt):c}const wt={};function it(c){wt[c]||(typeof console<"u"&&console.warn(c),wt[c]=!0)}function Bt(c,a,u){return(u.y-c.y)*(a.x-c.x)>(a.y-c.y)*(u.x-c.x)}function jt(c){let a=0;for(let u,h,g=0,_=c.length,w=_-1;g<_;w=g++)u=c[g],h=c[w],a+=(h.x-u.x)*(u.y+h.y);return a}function cn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function rn(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,h,g,_)=>{const w=g||_;return a[h]=!w||w.toLowerCase(),""}),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a}let zt=null;function bn(c){if(zt==null){const a=c.navigator?c.navigator.userAgent:null;zt=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return zt}function Ot(c){try{const a=p[c];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}function Nt(c,a){return[c[4*a],c[4*a+1],c[4*a+2],c[4*a+3]]}const Jt="mapbox-tiles";let on=500,vn=50,hn,wn;function Rn(){try{return p.caches}catch{}}function Vn(){Rn()&&!hn&&(hn=p.caches.open(Jt))}function rr(c){const a=c.indexOf("?");if(a<0)return c;const u=function(g){const _=g.indexOf("?");return _>0?g.slice(_+1).split("&"):[]}(c),h=u.filter(g=>{const _=g.split("=");return _[0]==="language"||_[0]==="worldview"});return h.length?`${c.slice(0,a)}?${h.join("&")}`:c.slice(0,a)}let Pn=1/0;const Sn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Sn);class fr extends Error{constructor(a,u,h){u===401&&Me(h)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=u,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const cr=cn()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,ur=function(c,a){if(!(/^file:/.test(u=c.url)||/^file:/.test(cr())&&!/^\w+:/.test(u))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return function(h,g){const _=new p.AbortController,w=new p.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:cr(),referrerPolicy:h.referrerPolicy,signal:_.signal});let T=!1,I=!1;const L=(N=w.url).indexOf("sku=")>0&&Me(N);var N;h.type==="json"&&w.headers.set("Accept","application/json");const G=(Z,ee,ie)=>{if(I)return;if(Z&&Z.message!=="SecurityError"&&it(Z.toString()),ee&&ie)return W(ee);const me=Date.now();p.fetch(w).then(Pe=>{if(Pe.ok){const je=L?Pe.clone():null;return W(Pe,je,me)}return g(new fr(Pe.statusText,Pe.status,h.url))}).catch(Pe=>{Pe.name!=="AbortError"&&g(new Error(`${Pe.message} ${h.url}`))})},W=(Z,ee,ie)=>{(h.type==="arrayBuffer"?Z.arrayBuffer():h.type==="json"?Z.json():Z.text()).then(me=>{I||(ee&&ie&&function(Pe,je,Ie){if(Vn(),!hn)return;const $e={status:je.status,statusText:je.statusText,headers:new p.Headers};je.headers.forEach((gt,dt)=>$e.headers.set(dt,gt));const Ge=rn(je.headers.get("Cache-Control")||"");if(Ge["no-store"])return;Ge["max-age"]&&$e.headers.set("Expires",new Date(Ie+1e3*Ge["max-age"]).toUTCString());const Ve=$e.headers.get("Expires");Ve&&(new Date(Ve).getTime()-Ie<42e4||function(gt,dt){if(wn===void 0)try{new Response(new ReadableStream),wn=!0}catch{wn=!1}wn?dt(gt.body):gt.blob().then(dt)}(je,gt=>{const dt=new p.Response(gt,$e);Vn(),hn&&hn.then(Pt=>Pt.put(rr(Pe.url),dt)).catch(Pt=>it(Pt.message))}))}(w,ee,ie),T=!0,g(null,me,Z.headers.get("Cache-Control"),Z.headers.get("Expires")))}).catch(me=>{I||g(new Error(me.message))})};return L?function(Z,ee){if(Vn(),!hn)return ee(null);const ie=rr(Z.url);hn.then(me=>{me.match(ie).then(Pe=>{const je=function(Ie){if(!Ie)return!1;const $e=new Date(Ie.headers.get("Expires")||0),Ge=rn(Ie.headers.get("Cache-Control")||"");return $e>Date.now()&&!Ge["no-cache"]}(Pe);me.delete(ie),je&&me.put(ie,Pe.clone()),ee(null,Pe,je)}).catch(ee)}).catch(ee)}(w,G):G(null,null),{cancel:()=>{I=!0,T||_.abort()}}}(c,a);if(cn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var u;return function(h,g){const _=new p.XMLHttpRequest;_.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(_.responseType="arraybuffer");for(const w in h.headers)_.setRequestHeader(w,h.headers[w]);return h.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=h.credentials==="include",_.onerror=()=>{g(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let w=_.response;if(h.type==="json")try{w=JSON.parse(_.response)}catch(T){return g(T)}g(null,w,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else g(new fr(_.statusText,_.status,h.url))},_.send(h.body),{cancel:()=>_.abort()}}(c,a)},tr=function(c,a){return ur(Ne(c,{type:"arrayBuffer"}),a)};function oi(c){const a=p.document.createElement("a");return a.href=c,a.protocol===p.document.location.protocol&&a.host===p.document.location.host}const Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let se,oe;se=[],oe=0;const te=function(c,a){if(M.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),oe>=S.MAX_PARALLEL_IMAGE_REQUESTS){const _={requestParameters:c,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return se.push(_),_}oe++;let u=!1;const h=()=>{if(!u)for(u=!0,oe--;se.length&&oe<S.MAX_PARALLEL_IMAGE_REQUESTS;){const _=se.shift(),{requestParameters:w,callback:T,cancelled:I}=_;I||(_.cancel=te(w,T).cancel)}},g=tr(c,(_,w,T,I)=>{h(),_?a(_):w&&(p.createImageBitmap?function(L,N){const G=new p.Blob([new Uint8Array(L)],{type:"image/png"});p.createImageBitmap(G).then(W=>{N(null,W)}).catch(W=>{N(new Error(`Could not load image because of ${W.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(L,N)=>a(L,N,T,I)):function(L,N){const G=new p.Image,W=p.URL;G.onload=()=>{N(null,G),W.revokeObjectURL(G.src),G.onload=null,p.requestAnimationFrame(()=>{G.src=Oe})},G.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Z=new p.Blob([new Uint8Array(L)],{type:"image/png"});G.src=L.byteLength?W.createObjectURL(Z):Oe}(w,(L,N)=>a(L,N,T,I)))});return{cancel:()=>{g.cancel(),h()}}},le="NO_ACCESS_TOKEN";function ue(c){return c.indexOf("mapbox:")===0}function Me(c){return S.API_URL_REGEX.test(c)}function Ce(c){return S.API_CDN_URL_REGEX.test(c)}function _e(c){return S.API_STYLE_REGEX.test(c)&&!De(c)}function De(c){return S.API_SPRITE_REGEX.test(c)}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nt(c){const a=c.match(et);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Ze(c){const a=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${a}`}const Et="mapbox.eventData";function vt(c){if(!c)return null;const a=c.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(a[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ct{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const u=vt(S.ACCESS_TOKEN);let h="";return h=u&&u.u?p.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(g,_)=>String.fromCharCode(+("0x"+_)))):S.ACCESS_TOKEN||"",a?`${Et}.${a}:${h}`:`${Et}:${h}`}fetchEventData(){const a=Ot("localStorage"),u=this.getStorageKey(),h=this.getStorageKey("uuid");if(a)try{const g=p.localStorage.getItem(u);g&&(this.eventData=JSON.parse(g));const _=p.localStorage.getItem(h);_&&(this.anonId=_)}catch{it("Unable to read from LocalStorage")}}saveEventData(){const a=Ot("localStorage"),u=this.getStorageKey(),h=this.getStorageKey("uuid");if(a)try{p.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{it("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,u,h,g){if(!S.EVENTS_URL)return;const _=nt(S.EVENTS_URL);_.params.push(`access_token=${g||S.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(a).toISOString()},T=u?Ne(w,u):w,I={url:Ze(_),headers:{"Content-Type":"text/plain"},body:JSON.stringify([T])};this.pendingRequest=function(L,N){return ur(Ne(L,{method:"POST"}),N)}(I,L=>{this.pendingRequest=null,h(L),this.saveEventData(),this.processRequests(g)})}queueRequest(a,u){this.queue.push(a),this.processRequests(u)}}const Vt=new class extends Ct{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,a){S.EVENTS_URL&&S.ACCESS_TOKEN&&Array.isArray(c)&&c.some(u=>ue(u)||Me(u))&&this.queueRequest(Date.now(),a)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=vt(S.ACCESS_TOKEN),u=a?a.u:S.ACCESS_TOKEN;let h=u!==this.eventData.tokenU;St(this.anonId)||(this.anonId=Ke(),h=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const _=new Date(this.eventData.lastSuccess),w=new Date(g),T=(g-this.eventData.lastSuccess)/864e5;h=h||T>=1||T<-1||_.getDate()!==w.getDate()}else h=!0;h?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:k,"enabled.telemetry":!1,userId:this.anonId},_=>{_||(this.eventData.lastSuccess=g,this.eventData.tokenU=u)},c):this.processRequests()}},ln=Vt.postTurnstileEvent.bind(Vt),kn=new class extends Ct{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,a,u,h){this.skuToken=a,this.errorCb=h,S.EVENTS_URL&&(u||S.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},u):this.errorCb(new Error(le)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),St(this.anonId)||(this.anonId=Ke()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:k,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):a&&(this.success[a]=!0)},c))}},Jn=kn.postMapLoadEvent.bind(kn),_r=new class extends Ct{constructor(){super("gljs.performance")}postPerformanceEvent(c,a){S.EVENTS_URL&&(c||S.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},c)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:u}=this.queue.shift(),h=function(g){const _=p.performance.getEntriesByType("resource"),w=p.performance.getEntriesByType("mark"),T=function(W){const Z={};if(W){for(const ee in W)if(ee!=="other")for(const ie of W[ee]){const me=`${ee}ResolveRangeMin`,Pe=`${ee}ResolveRangeMax`,je=`${ee}RequestCount`,Ie=`${ee}RequestCachedCount`;Z[me]=Math.min(Z[me]||1/0,ie.startTime),Z[Pe]=Math.max(Z[Pe]||-1/0,ie.responseEnd);const $e=Ge=>{Z[Ge]===void 0&&(Z[Ge]=0),++Z[Ge]};ie.transferSize!==void 0&&ie.transferSize===0&&$e(Ie),$e(je)}}return Z}(function(W,Z){const ee={};if(W)for(const ie of W){const me=Z(ie);ee[me]===void 0&&(ee[me]=[]),ee[me].push(ie)}return ee}(_,yn)),I=p.devicePixelRatio,L=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,N={counters:[],metadata:[],attributes:[]},G=(W,Z,ee)=>{ee!=null&&W.push({name:Z,value:ee.toString()})};for(const W in T)G(N.counters,W,T[W]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(G(N.counters,"interactionRangeMin",g.interactionRange[0]),G(N.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const W of Object.keys(ri)){const Z=ri[W],ee=w.find(ie=>ie.name===Z);ee&&G(N.counters,Z,ee.startTime)}return G(N.counters,"visibilityHidden",g.visibilityHidden),G(N.attributes,"style",function(W){if(W)for(const Z of W){const ee=Z.name.split("?")[0];if(_e(ee)){const ie=ee.split("/").slice(-2);if(ie.length===2)return`mapbox://styles/${ie[0]}/${ie[1]}`}}}(_)),G(N.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),G(N.attributes,"fogEnabled",g.fogEnabled?"true":"false"),G(N.attributes,"projection",g.projection),G(N.attributes,"zoom",g.zoom),G(N.metadata,"devicePixelRatio",I),G(N.metadata,"connectionEffectiveType",L?L.effectiveType:void 0),G(N.metadata,"navigatorUserAgent",p.navigator.userAgent),G(N.metadata,"screenWidth",p.screen.width),G(N.metadata,"screenHeight",p.screen.height),G(N.metadata,"windowWidth",p.innerWidth),G(N.metadata,"windowHeight",p.innerHeight),G(N.metadata,"mapWidth",g.width/I),G(N.metadata,"mapHeight",g.height/I),G(N.metadata,"webglRenderer",g.renderer),G(N.metadata,"webglVendor",g.vendor),G(N.metadata,"sdkVersion",v),G(N.metadata,"sdkIdentifier","mapbox-gl-js"),N}(u);for(const g of h.metadata);for(const g of h.counters);for(const g of h.attributes);this.postEvent(a,h,()=>{},c)}},Wn=_r.postPerformanceEvent.bind(_r),dr=new class extends Ct{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,a,u,h){if(!S.API_URL||!S.SESSION_PATH)return;const g=nt(S.API_URL+S.SESSION_PATH);g.params.push(`sku=${a||""}`),g.params.push(`access_token=${h||S.ACCESS_TOKEN||""}`);const _={url:Ze(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(w,T){return ur(Ne(w,{method:"GET"}),T)}(_,w=>{this.pendingRequest=null,u(w),this.saveEventData(),this.processRequests(h)})}getSessionAPI(c,a,u,h){this.skuToken=a,this.errorCb=h,S.SESSION_PATH&&S.API_URL&&(u||S.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},u):this.errorCb(new Error(le)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||this.getSession(u,this.skuToken,h=>{h?this.errorCb(h):a&&(this.success[a]=!0)},c)}},gr=dr.getSessionAPI.bind(dr),Yn=new Set,ri={create:"create",load:"load",fullLoad:"fullLoad"},Cn={mark(c){p.performance.mark(c)},measure(c,a,u){p.performance.measure(c,a,u)}};function yn(c){const a=c.name.split("?")[0];return Ce(a)&&a.includes("mapbox-gl.js")?"javascript":Ce(a)&&a.includes("mapbox-gl.css")?"css":function(u){return S.API_FONTS_REGEX.test(u)}(a)?"fontRange":De(a)?"sprite":_e(a)?"style":function(u){return S.API_TILEJSON_REGEX.test(u)}(a)?"tilejson":"other"}const Ft=p.performance;function Gt(c){const a=c?c.url.toString():void 0;return Ft.getEntriesByName(a)}let xn,nr,or,Fr;const Or={now:()=>or!==void 0?or:p.performance.now(),setNow(c){or=c},restoreNow(){or=void 0},frame(c){const a=p.requestAnimationFrame(c);return{cancel:()=>p.cancelAnimationFrame(a)}},getImageData(c,a=0){const{width:u,height:h}=c;Fr||(Fr=p.document.createElement("canvas"));const g=Fr.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>Fr.width||h>Fr.height)&&(Fr.width=u,Fr.height=h),g.clearRect(-a,-a,u+2*a,h+2*a),g.drawImage(c,0,0,u,h),g.getImageData(-a,-a,u+2*a,h+2*a)},resolveURL:c=>(xn||(xn=p.document.createElement("a")),xn.href=c,xn.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&(nr==null&&(nr=p.matchMedia("(prefers-reduced-motion: reduce)")),nr.matches)}};function Xr(c,a,u){u[c]&&u[c].indexOf(a)!==-1||(u[c]=u[c]||[],u[c].push(a))}function Qr(c,a,u){if(u&&u[c]){const h=u[c].indexOf(a);h!==-1&&u[c].splice(h,1)}}class qr{constructor(a,u={}){Ne(this,u),this.type=a}}class zr extends qr{constructor(a,u={}){super("error",Ne({error:a},u))}}class _i{on(a,u){return this._listeners=this._listeners||{},Xr(a,u,this._listeners),this}off(a,u){return Qr(a,u,this._listeners),Qr(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Xr(a,u,this._oneTimeListeners),this):new Promise(h=>this.once(a,h))}fire(a,u){typeof a=="string"&&(a=new qr(a,u||{}));const h=a.type;if(this.listens(h)){a.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of g)T.call(this,a);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of _)Qr(h,T,this._oneTimeListeners),T.call(this,a);const w=this._eventedParent;w&&(Ne(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(a))}else a instanceof zr&&console.error(a.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var xt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Hi(c,...a){for(const u of a)for(const h in u)c[h]=u[h];return c}function xr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Lr(c){if(Array.isArray(c))return c.map(Lr);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const u in c)a[u]=Lr(c[u]);return a}return xr(c)}class cs extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}var Wi=cs;class ao{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[h,g]of u)this.bindings[h]=g}concat(a){return new ao(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}var Er=ao;const Qn={kind:"null"},Ht={kind:"number"},jn={kind:"string"},Bn={kind:"boolean"},Rr={kind:"color"},Ei={kind:"object"},Xn={kind:"value"},Ti={kind:"collator"},he={kind:"formatted"},Ee={kind:"resolvedImage"};function Ue(c,a){return{kind:"array",itemType:c,N:a}}function at(c){if(c.kind==="array"){const a=at(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const Qt=[Qn,Ht,jn,Bn,Rr,he,Ei,Ue(Xn),Ee];function pn(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!pn(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const u of Qt)if(!pn(u,a))return null}}return`Expected ${at(c)} but found ${at(a)} instead.`}function br(c,a){return a.some(u=>u.kind===c.kind)}function Ai(c,a){return a.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}var Fi,ei={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Xi(c){return(c=Math.round(c))<0?0:c>255?255:c}function xa(c){return Xi(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function ta(c){return(a=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:a>1?1:a;var a}function Ns(c,a,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?c+(a-c)*u*6:2*u<1?a:3*u<2?c+(a-c)*(2/3-u)*6:c}try{Fi={}.parseCSSColor=function(c){var a,u=c.replace(/ /g,"").toLowerCase();if(u in ei)return ei[u].slice();if(u[0]==="#")return u.length===4?(a=parseInt(u.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:u.length===7&&(a=parseInt(u.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var h=u.indexOf("("),g=u.indexOf(")");if(h!==-1&&g+1===u.length){var _=u.substr(0,h),w=u.substr(h+1,g-(h+1)).split(","),T=1;switch(_){case"rgba":if(w.length!==4)return null;T=ta(w.pop());case"rgb":return w.length!==3?null:[xa(w[0]),xa(w[1]),xa(w[2]),T];case"hsla":if(w.length!==4)return null;T=ta(w.pop());case"hsl":if(w.length!==3)return null;var I=(parseFloat(w[0])%360+360)%360/360,L=ta(w[1]),N=ta(w[2]),G=N<=.5?N*(L+1):N+L-N*L,W=2*N-G;return[Xi(255*Ns(W,G,I+1/3)),Xi(255*Ns(W,G,I)),Xi(255*Ns(W,G,I-1/3)),T];default:return null}}return null}}catch{}class Oo{constructor(a,u,h,g=1){this.r=a,this.g=u,this.b=h,this.a=g}static parse(a){if(!a)return;if(a instanceof Oo)return a;if(typeof a!="string")return;const u=Fi(a);return u?new Oo(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[a,u,h,g]=this.toArray();return`rgba(${Math.round(a)},${Math.round(u)},${Math.round(h)},${g})`}toArray(){const{r:a,g:u,b:h,a:g}=this;return g===0?[0,0,0,0]:[255*a/g,255*u/g,255*h/g,g]}toArray01(){const{r:a,g:u,b:h,a:g}=this;return g===0?[0,0,0,0]:[a/g,u/g,h/g,g]}toArray01PremultipliedAlpha(){const{r:a,g:u,b:h,a:g}=this;return[a,u,h,g]}}Oo.black=new Oo(0,0,0,1),Oo.white=new Oo(1,1,1,1),Oo.transparent=new Oo(0,0,0,0),Oo.red=new Oo(1,0,0,1),Oo.blue=new Oo(0,0,1,1);var Mi=Oo;class Fn{constructor(a,u,h){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ar{constructor(a,u,h,g,_){this.text=a.normalize?a.normalize():a,this.image=u,this.scale=h,this.fontStack=g,this.textColor=_}}class Pr{constructor(a){this.sections=a}static fromString(a){return new Pr([new ar(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Pr?a:Pr.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const u of this.sections){if(u.image){a.push(["image",u.image.name]);continue}a.push(u.text);const h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toArray())),a.push(h)}return a}}class Yr{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Yr({name:a,available:!1}):null}serialize(){return["image",this.name]}}function Pi(c,a,u,h){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[c,a,u,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[c,a,u,h]:[c,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function na(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Mi||c instanceof Fn||c instanceof Pr||c instanceof Yr)return!0;if(Array.isArray(c)){for(const a of c)if(!na(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!na(c[a]))return!1;return!0}return!1}function Ii(c){if(c===null)return Qn;if(typeof c=="string")return jn;if(typeof c=="boolean")return Bn;if(typeof c=="number")return Ht;if(c instanceof Mi)return Rr;if(c instanceof Fn)return Ti;if(c instanceof Pr)return he;if(c instanceof Yr)return Ee;if(Array.isArray(c)){const a=c.length;let u;for(const h of c){const g=Ii(h);if(u){if(u===g)continue;u=Xn;break}u=g}return Ue(u||Xn,a)}return Ei}function Mc(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof Mi||c instanceof Pr||c instanceof Yr?c.toString():JSON.stringify(c)}class Pc{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!na(a[1]))return u.error("invalid value");const h=a[1];let g=Ii(h);const _=u.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Pc(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Mi?["rgba"].concat(this.value.toArray()):this.value instanceof Pr?this.value.serialize():this.value}}var pu=Pc,Ho=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const $v={string:jn,number:Ht,boolean:Bn,object:Ei};class jv{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let h,g=1;const _=a[0];if(_==="array"){let T,I;if(a.length>2){const L=a[1];if(typeof L!="string"||!(L in $v)||L==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);T=$v[L],g++}else T=Xn;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);I=a[2],g++}h=Ue(T,I)}else h=$v[_];const w=[];for(;g<a.length;g++){const T=u.parse(a[g],g,Xn);if(!T)return null;w.push(T)}return new jv(h,w)}evaluate(a){for(let u=0;u<this.args.length;u++){const h=this.args[u].evaluate(a);if(!pn(this.type,Ii(h)))return h;if(u===this.args.length-1)throw new Ho(`Expected value to be of type ${at(this.type)}, but found ${at(Ii(h))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,u=[a.kind];if(a.kind==="array"){const h=a.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){u.push(h.kind);const g=a.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(h=>h.serialize()))}}var Rl=jv;class Ic{constructor(a){this.type=he,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const h=a[1];if(!Array.isArray(h)&&typeof h=="object")return u.error("First argument must be an image or text section.");const g=[];let _=!1;for(let w=1;w<=a.length-1;++w){const T=a[w];if(_&&typeof T=="object"&&!Array.isArray(T)){_=!1;let I=null;if(T["font-scale"]&&(I=u.parse(T["font-scale"],1,Ht),!I))return null;let L=null;if(T["text-font"]&&(L=u.parse(T["text-font"],1,Ue(jn)),!L))return null;let N=null;if(T["text-color"]&&(N=u.parse(T["text-color"],1,Rr),!N))return null;const G=g[g.length-1];G.scale=I,G.font=L,G.textColor=N}else{const I=u.parse(a[w],1,Xn);if(!I)return null;const L=I.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:I,scale:null,font:null,textColor:null})}}return new Ic(g)}evaluate(a){return new Pr(this.sections.map(u=>{const h=u.content.evaluate(a);return Ii(h)===Ee?new ar("",h,null,null,null):new ar(Mc(h),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)}))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const u of this.sections){a.push(u.content.serialize());const h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),a.push(h)}return a}}class zp{constructor(a){this.type=Ee,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");const h=u.parse(a[1],1,jn);return h?new zp(h):u.error("No image name provided.")}evaluate(a){const u=this.input.evaluate(a),h=Yr.fromString(u);return h&&a.availableImages&&(h.available=a.availableImages.indexOf(u)>-1),h}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const fA={"to-boolean":Bn,"to-color":Rr,"to-number":Ht,"to-string":jn};class Uv{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const h=a[0];if((h==="to-boolean"||h==="to-string")&&a.length!==2)return u.error("Expected one argument.");const g=fA[h],_=[];for(let w=1;w<a.length;w++){const T=u.parse(a[w],w,Xn);if(!T)return null;_.push(T)}return new Uv(g,_)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let u,h;for(const g of this.args){if(u=g.evaluate(a),h=null,u instanceof Mi)return u;if(typeof u=="string"){const _=a.parseColor(u);if(_)return _}else if(Array.isArray(u)&&(h=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Pi(u[0],u[1],u[2],u[3]),!h))return new Mi(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ho(h||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const h of this.args){if(u=h.evaluate(a),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new Ho(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?Pr.fromString(Mc(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Yr.fromString(Mc(this.args[0].evaluate(a))):Mc(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ic([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new zp(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(u=>{a.push(u.serialize())}),a}}var bd=Uv;const el=["Unknown","Point","LineString","Polygon"];var Vv=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?el[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:u,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*a-c[0])+this.featureDistanceData.bearing[1]*(h*a-c[1])}return 0}parseColor(c){let a=this._parseColorCache[c];return a||(a=this._parseColorCache[c]=Mi.parse(c)),a}};class mu{constructor(a,u,h,g){this.name=a,this.type=u,this._evaluate=h,this.args=g}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,u){const h=a[0],g=mu.definitions[h];if(!g)return u.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=w.filter(([L])=>!Array.isArray(L)||L.length===a.length-1);let I=null;for(const[L,N]of T){I=new Yv(u.registry,u.path,null,u.scope);const G=[];let W=!1;for(let Z=1;Z<a.length;Z++){const ee=a[Z],ie=Array.isArray(L)?L[Z-1]:L.type,me=I.parse(ee,1+G.length,ie);if(!me){W=!0;break}G.push(me)}if(!W)if(Array.isArray(L)&&L.length!==G.length)I.error(`Expected ${L.length} arguments, but found ${G.length} instead.`);else{for(let Z=0;Z<G.length;Z++){const ee=Array.isArray(L)?L[Z]:L.type,ie=G[Z];I.concat(Z+1).checkSubtype(ee,ie.type)}if(I.errors.length===0)return new mu(h,_,N,G)}}if(T.length===1)u.errors.push(...I.errors);else{const L=(T.length?T:w).map(([G])=>{return W=G,Array.isArray(W)?`(${W.map(at).join(", ")})`:`(${at(W.type)}...)`;var W}).join(" | "),N=[];for(let G=1;G<a.length;G++){const W=u.parse(a[G],1+N.length);if(!W)return null;N.push(at(W.type))}u.error(`Expected arguments of type ${L}, but found (${N.join(", ")}) instead.`)}return null}static register(a,u){mu.definitions=u;for(const h in u)a[h]=mu}}var Ol=mu;class Yf{constructor(a,u,h){this.type=Ti,this.locale=h,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const h=a[1];if(typeof h!="object"||Array.isArray(h))return u.error("Collator options argument must be an object.");const g=u.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Bn);if(!g)return null;const _=u.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Bn);if(!_)return null;let w=null;return h.locale&&(w=u.parse(h.locale,1,jn),!w)?null:new Yf(g,_,w)}evaluate(a){return new Fn(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const Ll=8192;function Np(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function xd(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function Zf(c,a){const u=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,a.z);return[Math.round(u*g*Ll),Math.round(h*g*Ll)]}function xx(c,a,u){const h=c[0]-a[0],g=c[1]-a[1],_=c[0]-u[0],w=c[1]-u[1];return h*w-_*g==0&&h*_<=0&&g*w<=0}function $p(c,a){let u=!1;for(let w=0,T=a.length;w<T;w++){const I=a[w];for(let L=0,N=I.length;L<N-1;L++){if(xx(c,I[L],I[L+1]))return!1;(g=I[L])[1]>(h=c)[1]!=(_=I[L+1])[1]>h[1]&&h[0]<(_[0]-g[0])*(h[1]-g[1])/(_[1]-g[1])+g[0]&&(u=!u)}}var h,g,_;return u}function Gv(c,a){for(let u=0;u<a.length;u++)if($p(c,a[u]))return!0;return!1}function Hv(c,a,u,h){const g=h[0]-u[0],_=h[1]-u[1],w=(c[0]-u[0])*_-g*(c[1]-u[1]),T=(a[0]-u[0])*_-g*(a[1]-u[1]);return w>0&&T<0||w<0&&T>0}function wd(c,a,u){for(const L of u)for(let N=0;N<L.length-1;++N)if((T=[(w=L[N+1])[0]-(_=L[N])[0],w[1]-_[1]])[0]*(I=[(g=a)[0]-(h=c)[0],g[1]-h[1]])[1]-T[1]*I[0]!=0&&Hv(h,g,_,w)&&Hv(_,w,h,g))return!0;var h,g,_,w,T,I;return!1}function Zr(c,a){for(let u=0;u<c.length;++u)if(!$p(c[u],a))return!1;for(let u=0;u<c.length-1;++u)if(wd(c[u],c[u+1],a))return!1;return!0}function hA(c,a){for(let u=0;u<a.length;u++)if(Zr(c,a[u]))return!0;return!1}function Wv(c,a,u){const h=[];for(let g=0;g<c.length;g++){const _=[];for(let w=0;w<c[g].length;w++){const T=Zf(c[g][w],u);Np(a,T),_.push(T)}h.push(_)}return h}function wx(c,a,u){const h=[];for(let g=0;g<c.length;g++){const _=Wv(c[g],a,u);h.push(_)}return h}function Xv(c,a,u,h){if(c[0]<u[0]||c[0]>u[2]){const g=.5*h;let _=c[0]-u[0]>g?-h:u[0]-c[0]>g?h:0;_===0&&(_=c[0]-u[2]>g?-h:u[2]-c[0]>g?h:0),c[0]+=_}Np(a,c)}function Sx(c,a,u,h){const g=Math.pow(2,h.z)*Ll,_=[h.x*Ll,h.y*Ll],w=[];if(!c)return w;for(const T of c)for(const I of T){const L=[I.x+_[0],I.y+_[1]];Xv(L,a,u,g),w.push(L)}return w}function qv(c,a,u,h){const g=Math.pow(2,h.z)*Ll,_=[h.x*Ll,h.y*Ll],w=[];if(!c)return w;for(const I of c){const L=[];for(const N of I){const G=[N.x+_[0],N.y+_[1]];Np(a,G),L.push(G)}w.push(L)}if(a[2]-a[0]<=g/2){(T=a)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const I of w)for(const L of I)Xv(L,a,u,g)}var T;return w}class Sd{constructor(a,u){this.type=Bn,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(na(a[1])){const h=a[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const _=h.features[g].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Sd(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Sd(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Sd(h,h)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(u,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const T=Wv(h.coordinates,_,w),I=Sx(u.geometry(),g,_,w);if(!xd(g,_))return!1;for(const L of I)if(!$p(L,T))return!1}if(h.type==="MultiPolygon"){const T=wx(h.coordinates,_,w),I=Sx(u.geometry(),g,_,w);if(!xd(g,_))return!1;for(const L of I)if(!Gv(L,T))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(u,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(h.type==="Polygon"){const T=Wv(h.coordinates,_,w),I=qv(u.geometry(),g,_,w);if(!xd(g,_))return!1;for(const L of I)if(!Zr(L,T))return!1}if(h.type==="MultiPolygon"){const T=wx(h.coordinates,_,w),I=qv(u.geometry(),g,_,w);if(!xd(g,_))return!1;for(const L of I)if(!hA(L,T))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var jp=Sd;function Ed(c){if(c instanceof Ol&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof jp)return!1;let a=!0;return c.eachChild(u=>{a&&!Ed(u)&&(a=!1)}),a}function Bl(c){if(c instanceof Ol&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(u=>{a&&!Bl(u)&&(a=!1)}),a}function gu(c,a){if(c instanceof Ol&&a.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(h=>{u&&!gu(h,a)&&(u=!1)}),u}class Up{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const h=a[1];return u.scope.has(h)?new Up(h,u.scope.get(h)):u.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ex=Up;class Kf{constructor(a,u=[],h,g=new Er,_=[]){this.registry=a,this.path=u,this.key=u.map(w=>`[${w}]`).join(""),this.scope=g,this.errors=_,this.expectedType=h}parse(a,u,h,g,_={}){return u?this.concat(u,h,g)._parse(a,_):this._parse(a,_)}_parse(a,u){function h(g,_,w){return w==="assert"?new Rl(_,[g]):w==="coerce"?new bd(_,[g]):g}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=a[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let w=_.parse(a,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,I=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||I.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(T,I))return null}else w=h(w,T,u.typeAnnotation||"coerce");else w=h(w,T,u.typeAnnotation||"assert")}if(!(w instanceof pu)&&w.type.kind!=="resolvedImage"&&Zv(w)){const T=new Vv;try{w=new pu(w.type,w.evaluate(T))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,h){const g=typeof a=="number"?this.path.concat(a):this.path,_=h?this.scope.concat(h):this.scope;return new Kf(this.registry,g,u||null,_,this.errors)}error(a,...u){const h=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Wi(h,a))}checkSubtype(a,u){const h=pn(a,u);return h&&this.error(h),h}}var Yv=Kf;function Zv(c){if(c instanceof Ex)return Zv(c.boundExpression);if(c instanceof Ol&&c.name==="error"||c instanceof Yf||c instanceof jp)return!1;const a=c instanceof bd||c instanceof Rl;let u=!0;return c.eachChild(h=>{u=a?u&&Zv(h):u&&h instanceof pu}),!!u&&Ed(c)&&gu(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Vp(c,a){const u=c.length-1;let h,g,_=0,w=u,T=0;for(;_<=w;)if(T=Math.floor((_+w)/2),h=c[T],g=c[T+1],h<=a){if(T===u||a<g)return T;_=T+1}else{if(!(h>a))throw new Ho("Input is not a number.");w=T-1}return 0}class Gp{constructor(a,u,h){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const h=u.parse(a[1],1,Ht);if(!h)return null;const g=[];let _=null;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);for(let w=1;w<a.length;w+=2){const T=w===1?-1/0:a[w],I=a[w+1],L=w,N=w+1;if(typeof T!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(g.length&&g[g.length-1][0]>=T)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const G=u.parse(I,N,_);if(!G)return null;_=_||G.type,g.push([T,G])}return new Gp(_,h,g)}evaluate(a){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(a);const g=this.input.evaluate(a);if(g<=u[0])return h[0].evaluate(a);const _=u.length;return g>=u[_-1]?h[_-1].evaluate(a):h[Vp(u,g)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&a.push(this.labels[u]),a.push(this.outputs[u].serialize());return a}}var Kv=Gp;function Br(c,a,u){return c*(1-u)+a*u}var Jf=Object.freeze({__proto__:null,array:function(c,a,u){return c.map((h,g)=>Br(h,a[g],u))},color:function(c,a,u){return new Mi(Br(c.r,a.r,u),Br(c.g,a.g,u),Br(c.b,a.b,u),Br(c.a,a.a,u))},number:Br});const Cx=.95047,Jv=1.08883,Tx=4/29,vu=6/29,Qv=3*vu*vu,pA=vu*vu*vu,mA=Math.PI/180,gA=180/Math.PI;function ey(c){return c>pA?Math.pow(c,1/3):c/Qv+Tx}function ty(c){return c>vu?c*c*c:Qv*(c-Tx)}function ny(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Hp(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Ax(c){const a=Hp(c.r),u=Hp(c.g),h=Hp(c.b),g=ey((.4124564*a+.3575761*u+.1804375*h)/Cx),_=ey((.2126729*a+.7151522*u+.072175*h)/1);return{l:116*_-16,a:500*(g-_),b:200*(_-ey((.0193339*a+.119192*u+.9503041*h)/Jv)),alpha:c.a}}function Mx(c){let a=(c.l+16)/116,u=isNaN(c.a)?a:a+c.a/500,h=isNaN(c.b)?a:a-c.b/200;return a=1*ty(a),u=Cx*ty(u),h=Jv*ty(h),new Mi(ny(3.2404542*u-1.5371385*a-.4985314*h),ny(-.969266*u+1.8760108*a+.041556*h),ny(.0556434*u-.2040259*a+1.0572252*h),c.alpha)}function vA(c,a,u){const h=a-c;return c+u*(h>180||h<-180?h-360*Math.round(h/360):h)}const Qf={forward:Ax,reverse:Mx,interpolate:function(c,a,u){return{l:Br(c.l,a.l,u),a:Br(c.a,a.a,u),b:Br(c.b,a.b,u),alpha:Br(c.alpha,a.alpha,u)}}},Cd={forward:function(c){const{l:a,a:u,b:h}=Ax(c),g=Math.atan2(h,u)*gA;return{h:g<0?g+360:g,c:Math.sqrt(u*u+h*h),l:a,alpha:c.a}},reverse:function(c){const a=c.h*mA,u=c.c;return Mx({l:c.l,a:Math.cos(a)*u,b:Math.sin(a)*u,alpha:c.alpha})},interpolate:function(c,a,u){return{h:vA(c.h,a.h,u),c:Br(c.c,a.c,u),l:Br(c.l,a.l,u),alpha:Br(c.alpha,a.alpha,u)}}};var ry=Object.freeze({__proto__:null,hcl:Cd,lab:Qf});class eh{constructor(a,u,h,g,_){this.type=a,this.operator=u,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[w,T]of _)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(a,u,h,g){let _=0;if(a.name==="exponential")_=iy(u,a.base,h,g);else if(a.name==="linear")_=iy(u,1,h,g);else if(a.name==="cubic-bezier"){const w=a.controlPoints;_=new X(w[0],w[1],w[2],w[3]).solve(iy(u,1,h,g))}return _}static parse(a,u){let[h,g,_,...w]=a;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const L=g[1];if(typeof L!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:L}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const L=g.slice(1);if(L.length!==4||L.some(N=>typeof N!="number"||N<0||N>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:L}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(_=u.parse(_,2,Ht),!_)return null;const T=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=Rr:u.expectedType&&u.expectedType.kind!=="value"&&(I=u.expectedType);for(let L=0;L<w.length;L+=2){const N=w[L],G=w[L+1],W=L+3,Z=L+4;if(typeof N!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(T.length&&T[T.length-1][0]>=N)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const ee=u.parse(G,Z,I);if(!ee)return null;I=I||ee.type,T.push([N,ee])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new eh(I,h,g,_,T):u.error(`Type ${at(I)} is not interpolatable.`)}evaluate(a){const u=this.labels,h=this.outputs;if(u.length===1)return h[0].evaluate(a);const g=this.input.evaluate(a);if(g<=u[0])return h[0].evaluate(a);const _=u.length;if(g>=u[_-1])return h[_-1].evaluate(a);const w=Vp(u,g),T=eh.interpolationFactor(this.interpolation,g,u[w],u[w+1]),I=h[w].evaluate(a),L=h[w+1].evaluate(a);return this.operator==="interpolate"?Jf[this.type.kind.toLowerCase()](I,L,T):this.operator==="interpolate-hcl"?Cd.reverse(Cd.interpolate(Cd.forward(I),Cd.forward(L),T)):Qf.reverse(Qf.interpolate(Qf.forward(I),Qf.forward(L),T))}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,a,this.input.serialize()];for(let h=0;h<this.labels.length;h++)u.push(this.labels[h],this.outputs[h].serialize());return u}}function iy(c,a,u,h){const g=h-u,_=c-u;return g===0?0:a===1?_/g:(Math.pow(a,_)-1)/(Math.pow(a,g)-1)}var tl=eh;class Wp{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expectected at least one argument.");let h=null;const g=u.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const T of a.slice(1)){const I=u.parse(T,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,_.push(I)}const w=g&&_.some(T=>pn(g,T.type));return new Wp(w?Xn:h,_)}evaluate(a){let u,h=null,g=0;for(const _ of this.args){if(g++,h=_.evaluate(a),h&&h instanceof Yr&&!h.available&&(u||(u=h),h=null,g===this.args.length))return u;if(h!==null)break}return h}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(u=>{a.push(u.serialize())}),a}}var oy=Wp;class Xp{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const h=[];for(let _=1;_<a.length-1;_+=2){const w=a[_];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,_);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",_);const T=u.parse(a[_+1],_+1);if(!T)return null;h.push([w,T])}const g=u.parse(a[a.length-1],a.length-1,u.expectedType,h);return g?new Xp(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[u,h]of this.bindings)a.push(u,h.serialize());return a.push(this.result.serialize()),a}}var Px=Xp;class sy{constructor(a,u,h){this.type=a,this.index=u,this.input=h}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const h=u.parse(a[1],1,Ht),g=u.parse(a[2],2,Ue(u.expectedType||Xn));return h&&g?new sy(g.type.itemType,h,g):null}evaluate(a){const u=this.index.evaluate(a),h=this.input.evaluate(a);if(u<0)throw new Ho(`Array index out of bounds: ${u} < 0.`);if(u>=h.length)throw new Ho(`Array index out of bounds: ${u} > ${h.length-1}.`);if(u!==Math.floor(u))throw new Ho(`Array index must be an integer, but found ${u} instead.`);return h[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var yA=sy;class ay{constructor(a,u){this.type=Bn,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const h=u.parse(a[1],1,Xn),g=u.parse(a[2],2,Xn);return h&&g?br(h.type,[Bn,jn,Ht,Qn,Xn])?new ay(h,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(h.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(h==null)return!1;if(!Ai(u,["boolean","string","number","null"]))throw new Ho(`Expected first argument to be of type boolean, string, number or null, but found ${at(Ii(u))} instead.`);if(!Ai(h,["string","array"]))throw new Ho(`Expected second argument to be of type array or string, but found ${at(Ii(h))} instead.`);return h.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var qp=ay;class th{constructor(a,u,h){this.type=Ht,this.needle=a,this.haystack=u,this.fromIndex=h}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const h=u.parse(a[1],1,Xn),g=u.parse(a[2],2,Xn);if(!h||!g)return null;if(!br(h.type,[Bn,jn,Ht,Qn,Xn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(h.type)} instead`);if(a.length===4){const _=u.parse(a[3],3,Ht);return _?new th(h,g,_):null}return new th(h,g)}evaluate(a){const u=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!Ai(u,["boolean","string","number","null"]))throw new Ho(`Expected first argument to be of type boolean, string, number or null, but found ${at(Ii(u))} instead.`);if(!Ai(h,["string","array"]))throw new Ho(`Expected second argument to be of type array or string, but found ${at(Ii(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(a);return h.indexOf(u,g)}return h.indexOf(u)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Ix=th;class ly{constructor(a,u,h,g,_,w){this.inputType=a,this.type=u,this.input=h,this.cases=g,this.outputs=_,this.otherwise=w}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let h,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const _={},w=[];for(let L=2;L<a.length-1;L+=2){let N=a[L];const G=a[L+1];Array.isArray(N)||(N=[N]);const W=u.concat(L);if(N.length===0)return W.error("Expected at least one branch label.");for(const ee of N){if(typeof ee!="number"&&typeof ee!="string")return W.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return W.error("Numeric branch labels must be integer values.");if(h){if(W.checkSubtype(h,Ii(ee)))return null}else h=Ii(ee);if(_[String(ee)]!==void 0)return W.error("Branch labels must be unique.");_[String(ee)]=w.length}const Z=u.parse(G,L,g);if(!Z)return null;g=g||Z.type,w.push(Z)}const T=u.parse(a[1],1,Xn);if(!T)return null;const I=u.parse(a[a.length-1],a.length-1,g);return I?T.type.kind!=="value"&&u.concat(1).checkSubtype(h,T.type)?null:new ly(h,g,T,_,w,I):null}evaluate(a){const u=this.input.evaluate(a);return(Ii(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),h=[],g={};for(const w of u){const T=g[this.cases[w]];T===void 0?(g[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[T][1].push(w)}const _=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,T]of h)a.push(T.length===1?_(T[0]):T.map(_)),a.push(this.outputs[w].serialize());return a.push(this.otherwise.serialize()),a}}var _A=ly;class cy{constructor(a,u,h){this.type=a,this.branches=u,this.otherwise=h}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let h;u.expectedType&&u.expectedType.kind!=="value"&&(h=u.expectedType);const g=[];for(let w=1;w<a.length-1;w+=2){const T=u.parse(a[w],w,Bn);if(!T)return null;const I=u.parse(a[w+1],w+1,h);if(!I)return null;g.push([T,I]),h=h||I.type}const _=u.parse(a[a.length-1],a.length-1,h);return _?new cy(h,g,_):null}evaluate(a){for(const[u,h]of this.branches)if(u.evaluate(a))return h.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,h]of this.branches)a(u),a(h);a(this.otherwise)}outputDefined(){return this.branches.every(([a,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(u=>{a.push(u.serialize())}),a}}var Rx=cy;class nh{constructor(a,u,h,g){this.type=a,this.input=u,this.beginIndex=h,this.endIndex=g}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const h=u.parse(a[1],1,Xn),g=u.parse(a[2],2,Ht);if(!h||!g)return null;if(!br(h.type,[Ue(Xn),jn,Xn]))return u.error(`Expected first argument to be of type array or string, but found ${at(h.type)} instead`);if(a.length===4){const _=u.parse(a[3],3,Ht);return _?new nh(h.type,h,g,_):null}return new nh(h.type,h,g)}evaluate(a){const u=this.input.evaluate(a),h=this.beginIndex.evaluate(a);if(!Ai(u,["string","array"]))throw new Ho(`Expected first argument to be of type array or string, but found ${at(Ii(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(a);return u.slice(h,g)}return u.slice(h)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Ox=nh;function Yp(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Lx(c,a,u,h){return h.compare(a,u)===0}function Td(c,a,u){const h=c!=="=="&&c!=="!=";return class wK{constructor(_,w,T){this.type=Bn,this.lhs=_,this.rhs=w,this.collator=T,this.hasUntypedArgument=_.type.kind==="value"||w.type.kind==="value"}static parse(_,w){if(_.length!==3&&_.length!==4)return w.error("Expected two or three arguments.");const T=_[0];let I=w.parse(_[1],1,Xn);if(!I)return null;if(!Yp(T,I.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${at(I.type)}'.`);let L=w.parse(_[2],2,Xn);if(!L)return null;if(!Yp(T,L.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${at(L.type)}'.`);if(I.type.kind!==L.type.kind&&I.type.kind!=="value"&&L.type.kind!=="value")return w.error(`Cannot compare types '${at(I.type)}' and '${at(L.type)}'.`);h&&(I.type.kind==="value"&&L.type.kind!=="value"?I=new Rl(L.type,[I]):I.type.kind!=="value"&&L.type.kind==="value"&&(L=new Rl(I.type,[L])));let N=null;if(_.length===4){if(I.type.kind!=="string"&&L.type.kind!=="string"&&I.type.kind!=="value"&&L.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(_[3],3,Ti),!N)return null}return new wK(I,L,N)}evaluate(_){const w=this.lhs.evaluate(_),T=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const I=Ii(w),L=Ii(T);if(I.kind!==L.kind||I.kind!=="string"&&I.kind!=="number")throw new Ho(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${I.kind}, ${L.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=Ii(w),L=Ii(T);if(I.kind!=="string"||L.kind!=="string")return a(_,w,T)}return this.collator?u(_,w,T,this.collator.evaluate(_)):a(_,w,T)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}serialize(){const _=[c];return this.eachChild(w=>{_.push(w.serialize())}),_}}}const bA=Td("==",function(c,a,u){return a===u},Lx),xA=Td("!=",function(c,a,u){return a!==u},function(c,a,u,h){return!Lx(0,a,u,h)}),wA=Td("<",function(c,a,u){return a<u},function(c,a,u,h){return h.compare(a,u)<0}),SA=Td(">",function(c,a,u){return a>u},function(c,a,u,h){return h.compare(a,u)>0}),EA=Td("<=",function(c,a,u){return a<=u},function(c,a,u,h){return h.compare(a,u)<=0}),Bx=Td(">=",function(c,a,u){return a>=u},function(c,a,u,h){return h.compare(a,u)>=0});class Zp{constructor(a,u,h,g,_,w){this.type=jn,this.number=a,this.locale=u,this.currency=h,this.unit=g,this.minFractionDigits=_,this.maxFractionDigits=w}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const h=u.parse(a[1],1,Ht);if(!h)return null;const g=a[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=u.parse(g.locale,1,jn),!_))return null;let w=null;if(g.currency&&(w=u.parse(g.currency,1,jn),!w))return null;let T=null;if(g.unit&&(T=u.parse(g.unit,1,jn),!T))return null;let I=null;if(g["min-fraction-digits"]&&(I=u.parse(g["min-fraction-digits"],1,Ht),!I))return null;let L=null;return g["max-fraction-digits"]&&(L=u.parse(g["max-fraction-digits"],1,Ht),!L)?null:new Zp(h,_,w,T,I,L)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Ad{constructor(a){this.type=Ht,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const h=u.parse(a[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${at(h.type)} instead.`):new Ad(h):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Ho(`Expected value to be of type string or array, but found ${at(Ii(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(u=>{a.push(u.serialize())}),a}}const Dx={"==":bA,"!=":xA,">":SA,"<":wA,">=":Bx,"<=":EA,array:Rl,at:yA,boolean:Rl,case:Rx,coalesce:oy,collator:Yf,format:Ic,image:zp,in:qp,"index-of":Ix,interpolate:tl,"interpolate-hcl":tl,"interpolate-lab":tl,length:Ad,let:Px,literal:pu,match:_A,number:Rl,"number-format":Zp,object:Rl,slice:Ox,step:Kv,string:Rl,"to-boolean":bd,"to-color":bd,"to-number":bd,"to-string":bd,var:Ex,within:jp};function kx(c,[a,u,h,g]){a=a.evaluate(c),u=u.evaluate(c),h=h.evaluate(c);const _=g?g.evaluate(c):1,w=Pi(a,u,h,_);if(w)throw new Ho(w);return new Mi(a/255*_,u/255*_,h/255*_,_)}function Dl(c,a){return c in a}function Kp(c,a){const u=a[c];return u===void 0?null:u}function ra(c){return{type:c}}Ol.register(Dx,{error:[{kind:"error"},[jn],(c,[a])=>{throw new Ho(a.evaluate(c))}],typeof:[jn,[Xn],(c,[a])=>at(Ii(a.evaluate(c)))],"to-rgba":[Ue(Ht,4),[Rr],(c,[a])=>a.evaluate(c).toArray()],rgb:[Rr,[Ht,Ht,Ht],kx],rgba:[Rr,[Ht,Ht,Ht,Ht],kx],has:{type:Bn,overloads:[[[jn],(c,[a])=>Dl(a.evaluate(c),c.properties())],[[jn,Ei],(c,[a,u])=>Dl(a.evaluate(c),u.evaluate(c))]]},get:{type:Xn,overloads:[[[jn],(c,[a])=>Kp(a.evaluate(c),c.properties())],[[jn,Ei],(c,[a,u])=>Kp(a.evaluate(c),u.evaluate(c))]]},"feature-state":[Xn,[jn],(c,[a])=>Kp(a.evaluate(c),c.featureState||{})],properties:[Ei,[],c=>c.properties()],"geometry-type":[jn,[],c=>c.geometryType()],id:[Xn,[],c=>c.id()],zoom:[Ht,[],c=>c.globals.zoom],pitch:[Ht,[],c=>c.globals.pitch||0],"distance-from-center":[Ht,[],c=>c.distanceFromCenter()],"heatmap-density":[Ht,[],c=>c.globals.heatmapDensity||0],"line-progress":[Ht,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[Ht,[],c=>c.globals.skyRadialProgress||0],accumulated:[Xn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Ht,ra(Ht),(c,a)=>{let u=0;for(const h of a)u+=h.evaluate(c);return u}],"*":[Ht,ra(Ht),(c,a)=>{let u=1;for(const h of a)u*=h.evaluate(c);return u}],"-":{type:Ht,overloads:[[[Ht,Ht],(c,[a,u])=>a.evaluate(c)-u.evaluate(c)],[[Ht],(c,[a])=>-a.evaluate(c)]]},"/":[Ht,[Ht,Ht],(c,[a,u])=>a.evaluate(c)/u.evaluate(c)],"%":[Ht,[Ht,Ht],(c,[a,u])=>a.evaluate(c)%u.evaluate(c)],ln2:[Ht,[],()=>Math.LN2],pi:[Ht,[],()=>Math.PI],e:[Ht,[],()=>Math.E],"^":[Ht,[Ht,Ht],(c,[a,u])=>Math.pow(a.evaluate(c),u.evaluate(c))],sqrt:[Ht,[Ht],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[Ht,[Ht],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[Ht,[Ht],(c,[a])=>Math.log(a.evaluate(c))],log2:[Ht,[Ht],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[Ht,[Ht],(c,[a])=>Math.sin(a.evaluate(c))],cos:[Ht,[Ht],(c,[a])=>Math.cos(a.evaluate(c))],tan:[Ht,[Ht],(c,[a])=>Math.tan(a.evaluate(c))],asin:[Ht,[Ht],(c,[a])=>Math.asin(a.evaluate(c))],acos:[Ht,[Ht],(c,[a])=>Math.acos(a.evaluate(c))],atan:[Ht,[Ht],(c,[a])=>Math.atan(a.evaluate(c))],min:[Ht,ra(Ht),(c,a)=>Math.min(...a.map(u=>u.evaluate(c)))],max:[Ht,ra(Ht),(c,a)=>Math.max(...a.map(u=>u.evaluate(c)))],abs:[Ht,[Ht],(c,[a])=>Math.abs(a.evaluate(c))],round:[Ht,[Ht],(c,[a])=>{const u=a.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ht,[Ht],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[Ht,[Ht],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[Bn,[jn,Xn],(c,[a,u])=>c.properties()[a.value]===u.value],"filter-id-==":[Bn,[Xn],(c,[a])=>c.id()===a.value],"filter-type-==":[Bn,[jn],(c,[a])=>c.geometryType()===a.value],"filter-<":[Bn,[jn,Xn],(c,[a,u])=>{const h=c.properties()[a.value],g=u.value;return typeof h==typeof g&&h<g}],"filter-id-<":[Bn,[Xn],(c,[a])=>{const u=c.id(),h=a.value;return typeof u==typeof h&&u<h}],"filter->":[Bn,[jn,Xn],(c,[a,u])=>{const h=c.properties()[a.value],g=u.value;return typeof h==typeof g&&h>g}],"filter-id->":[Bn,[Xn],(c,[a])=>{const u=c.id(),h=a.value;return typeof u==typeof h&&u>h}],"filter-<=":[Bn,[jn,Xn],(c,[a,u])=>{const h=c.properties()[a.value],g=u.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[Bn,[Xn],(c,[a])=>{const u=c.id(),h=a.value;return typeof u==typeof h&&u<=h}],"filter->=":[Bn,[jn,Xn],(c,[a,u])=>{const h=c.properties()[a.value],g=u.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[Bn,[Xn],(c,[a])=>{const u=c.id(),h=a.value;return typeof u==typeof h&&u>=h}],"filter-has":[Bn,[Xn],(c,[a])=>a.value in c.properties()],"filter-has-id":[Bn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Bn,[Ue(jn)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[Bn,[Ue(Xn)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[Bn,[jn,Ue(Xn)],(c,[a,u])=>u.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[Bn,[jn,Ue(Xn)],(c,[a,u])=>function(h,g,_,w){for(;_<=w;){const T=_+w>>1;if(g[T]===h)return!0;g[T]>h?w=T-1:_=T+1}return!1}(c.properties()[a.value],u.value,0,u.value.length-1)],all:{type:Bn,overloads:[[[Bn,Bn],(c,[a,u])=>a.evaluate(c)&&u.evaluate(c)],[ra(Bn),(c,a)=>{for(const u of a)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Bn,overloads:[[[Bn,Bn],(c,[a,u])=>a.evaluate(c)||u.evaluate(c)],[ra(Bn),(c,a)=>{for(const u of a)if(u.evaluate(c))return!0;return!1}]]},"!":[Bn,[Bn],(c,[a])=>!a.evaluate(c)],"is-supported-script":[Bn,[jn],(c,[a])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(a.evaluate(c))}],upcase:[jn,[jn],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[jn,[jn],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[jn,ra(Xn),(c,a)=>a.map(u=>Mc(u.evaluate(c))).join("")],"resolved-locale":[jn,[Ti],(c,[a])=>a.evaluate(c).resolvedLocale()]});var rh=Dx;function Fx(c){return{result:"success",value:c}}function yu(c){return{result:"error",value:c}}function Md(c){return c["property-type"]==="data-driven"}function Jp(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Qp(c){return!!c.expression&&c.expression.interpolated}function Nr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function ih(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function zx(c){return c}function em(c,a){const u=a.type==="color",h=c.stops&&typeof c.stops[0][0]=="object",g=h||!(h||c.property!==void 0),_=c.type||(Qp(a)?"exponential":"interval");if(u&&((c=Hi({},c)).stops&&(c.stops=c.stops.map(L=>[L[0],Mi.parse(L[1])])),c.default=Mi.parse(c.default?c.default:a.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!ry[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,T,I;if(_==="exponential")w=kl;else if(_==="interval")w=tm;else if(_==="categorical"){w=Nx,T=Object.create(null);for(const L of c.stops)T[L[0]]=L[1];I=typeof c.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);w=$x}if(h){const L={},N=[];for(let Z=0;Z<c.stops.length;Z++){const ee=c.stops[Z],ie=ee[0].zoom;L[ie]===void 0&&(L[ie]={zoom:ie,type:c.type,property:c.property,default:c.default,stops:[]},N.push(ie)),L[ie].stops.push([ee[0].value,ee[1]])}const G=[];for(const Z of N)G.push([L[Z].zoom,em(L[Z],a)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:tl.interpolationFactor.bind(void 0,W),zoomStops:G.map(Z=>Z[0]),evaluate:({zoom:Z},ee)=>kl({stops:G,base:c.base},a,Z).evaluate(Z,ee)}}if(g){const L=_==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:tl.interpolationFactor.bind(void 0,L),zoomStops:c.stops.map(N=>N[0]),evaluate:({zoom:N})=>w(c,a,N,T,I)}}return{kind:"source",evaluate(L,N){const G=N&&N.properties?N.properties[c.property]:void 0;return G===void 0?Pd(c.default,a.default):w(c,a,G,T,I)}}}function Pd(c,a,u){return c!==void 0?c:a!==void 0?a:u!==void 0?u:void 0}function Nx(c,a,u,h,g){return Pd(typeof u===g?h[u]:void 0,c.default,a.default)}function tm(c,a,u){if(Nr(u)!=="number")return Pd(c.default,a.default);const h=c.stops.length;if(h===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[h-1][0])return c.stops[h-1][1];const g=Vp(c.stops.map(_=>_[0]),u);return c.stops[g][1]}function kl(c,a,u){const h=c.base!==void 0?c.base:1;if(Nr(u)!=="number")return Pd(c.default,a.default);const g=c.stops.length;if(g===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const _=Vp(c.stops.map(N=>N[0]),u),w=function(N,G,W,Z){const ee=Z-W,ie=N-W;return ee===0?0:G===1?ie/ee:(Math.pow(G,ie)-1)/(Math.pow(G,ee)-1)}(u,h,c.stops[_][0],c.stops[_+1][0]),T=c.stops[_][1],I=c.stops[_+1][1];let L=Jf[a.type]||zx;if(c.colorSpace&&c.colorSpace!=="rgb"){const N=ry[c.colorSpace];L=(G,W)=>N.reverse(N.interpolate(N.forward(G),N.forward(W),w))}return typeof T.evaluate=="function"?{evaluate(...N){const G=T.evaluate.apply(void 0,N),W=I.evaluate.apply(void 0,N);if(G!==void 0&&W!==void 0)return L(G,W,w)}}:L(T,I,w)}function $x(c,a,u){return a.type==="color"?u=Mi.parse(u):a.type==="formatted"?u=Pr.fromString(u.toString()):a.type==="resolvedImage"?u=Yr.fromString(u.toString()):Nr(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0),Pd(u,c.default,a.default)}class nm{constructor(a,u){this.expression=a,this._warningHistory={},this._evaluator=new Vv,this._defaultValue=u?function(h){return h.type==="color"&&(ih(h.default)||Array.isArray(h.default))?new Mi(0,0,0,0):h.type==="color"?Mi.parse(h.default)||null:h.default===void 0?null:h.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,h,g,_,w,T,I){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=h,this._evaluator.canonical=g||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(a,u,h,g,_,w,T,I){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=T||null,this._evaluator.featureDistanceData=I||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Ho(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function Id(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in rh}function Rd(c,a){const u=new Yv(rh,[],a?function(g){const _={color:Rr,string:jn,number:Ht,enum:jn,boolean:Bn,formatted:he,resolvedImage:Ee};return g.type==="array"?Ue(_[g.value]||Xn,g.length):_[g.type]}(a):void 0),h=u.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Fx(new nm(h,a)):yu(u.errors)}class uy{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!Bl(u.expression)}evaluateWithoutErrorHandling(a,u,h,g,_,w){return this._styleExpression.evaluateWithoutErrorHandling(a,u,h,g,_,w)}evaluate(a,u,h,g,_,w){return this._styleExpression.evaluate(a,u,h,g,_,w)}}class oh{constructor(a,u,h,g){this.kind=a,this.zoomStops=h,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!Bl(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(a,u,h,g,_,w){return this._styleExpression.evaluateWithoutErrorHandling(a,u,h,g,_,w)}evaluate(a,u,h,g,_,w){return this._styleExpression.evaluate(a,u,h,g,_,w)}interpolationFactor(a,u,h){return this.interpolationType?tl.interpolationFactor(this.interpolationType,a,u,h):0}}function sh(c,a){if((c=Rd(c,a)).result==="error")return c;const u=c.value.expression,h=Ed(u);if(!h&&!Md(a))return yu([new Wi("","data expressions not supported")]);const g=gu(u,["zoom","pitch","distance-from-center"]);if(!g&&!Jp(a))return yu([new Wi("","zoom expressions not supported")]);const _=im(u);return _||g?_ instanceof Wi?yu([_]):_ instanceof tl&&!Qp(a)?yu([new Wi("",'"interpolate" expressions cannot be used with this property')]):Fx(_?new oh(h?"camera":"composite",c.value,_.labels,_ instanceof tl?_.interpolation:void 0):new uy(h?"constant":"source",c.value)):yu([new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rm{constructor(a,u){this._parameters=a,this._specification=u,Hi(this,em(this._parameters,this._specification))}static deserialize(a){return new rm(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function im(c){let a=null;if(c instanceof Px)a=im(c.result);else if(c instanceof oy){for(const u of c.args)if(a=im(u),a)break}else(c instanceof Kv||c instanceof tl)&&c.input instanceof Ol&&c.input.name==="zoom"&&(a=c);return a instanceof Wi||c.eachChild(u=>{const h=im(u);h instanceof Wi?a=h:!a&&h?a=new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&h&&a!==h&&(a=new Wi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}class _n{constructor(a,u,h,g){this.message=(a?`${a}: `:"")+h,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function wa(c){const a=c.key,u=c.value,h=c.valueSpec||{},g=c.objectElementValidators||{},_=c.style,w=c.styleSpec;let T=[];const I=Nr(u);if(I!=="object")return[new _n(a,u,`object expected, ${I} found`)];for(const L in u){const N=L.split(".")[0];let G;g[N]?G=g[N]:h[N]?G=es:g["*"]?G=g["*"]:h["*"]&&(G=es),G?T=T.concat(G({key:(a&&`${a}.`)+L,value:u[L],valueSpec:h[N]||h["*"],style:_,styleSpec:w,object:u,objectKey:L},u)):T.push(new _n(a,u[L],`unknown property "${L}"`))}for(const L in h)g[L]||h[L].required&&h[L].default===void 0&&u[L]===void 0&&T.push(new _n(a,u,`missing required property "${L}"`));return T}function jx(c){const a=c.value,u=c.valueSpec,h=c.style,g=c.styleSpec,_=c.key,w=c.arrayElementValidator||es;if(Nr(a)!=="array")return[new _n(_,a,`array expected, ${Nr(a)} found`)];if(u.length&&a.length!==u.length)return[new _n(_,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new _n(_,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let T={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};g.$version<7&&(T.function=u.function),Nr(u.value)==="object"&&(T=u.value);let I=[];for(let L=0;L<a.length;L++)I=I.concat(w({array:a,arrayIndex:L,value:a[L],valueSpec:T,style:h,styleSpec:g,key:`${_}[${L}]`}));return I}function ah(c){const a=c.key,u=c.value,h=c.valueSpec;let g=Nr(u);if(g==="number"&&u!=u&&(g="NaN"),g!=="number")return[new _n(a,u,`number expected, ${g} found`)];if("minimum"in h){let _=h.minimum;if(Nr(h.minimum)==="array"&&(_=h.minimum[c.arrayIndex]),u<_)return[new _n(a,u,`${u} is less than the minimum value ${_}`)]}if("maximum"in h){let _=h.maximum;if(Nr(h.maximum)==="array"&&(_=h.maximum[c.arrayIndex]),u>_)return[new _n(a,u,`${u} is greater than the maximum value ${_}`)]}return[]}function lh(c){const a=c.valueSpec,u=xr(c.value.type);let h,g,_,w={};const T=u!=="categorical"&&c.value.property===void 0,I=!T,L=Nr(c.value.stops)==="array"&&Nr(c.value.stops[0])==="array"&&Nr(c.value.stops[0][0])==="object",N=wa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Z){if(u==="identity")return[new _n(Z.key,Z.value,'identity function may not have a "stops" property')];let ee=[];const ie=Z.value;return ee=ee.concat(jx({key:Z.key,value:ie,valueSpec:Z.valueSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:G})),Nr(ie)==="array"&&ie.length===0&&ee.push(new _n(Z.key,ie,"array must have at least one stop")),ee},default:function(Z){return es({key:Z.key,value:Z.value,valueSpec:a,style:Z.style,styleSpec:Z.styleSpec})}}});return u==="identity"&&T&&N.push(new _n(c.key,c.value,'missing required property "property"')),u==="identity"||c.value.stops||N.push(new _n(c.key,c.value,'missing required property "stops"')),u==="exponential"&&c.valueSpec.expression&&!Qp(c.valueSpec)&&N.push(new _n(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(I&&!Md(c.valueSpec)?N.push(new _n(c.key,c.value,"property functions not supported")):T&&!Jp(c.valueSpec)&&N.push(new _n(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!L||c.value.property!==void 0||N.push(new _n(c.key,c.value,'"property" property is required')),N;function G(Z){let ee=[];const ie=Z.value,me=Z.key;if(Nr(ie)!=="array")return[new _n(me,ie,`array expected, ${Nr(ie)} found`)];if(ie.length!==2)return[new _n(me,ie,`array length 2 expected, length ${ie.length} found`)];if(L){if(Nr(ie[0])!=="object")return[new _n(me,ie,`object expected, ${Nr(ie[0])} found`)];if(ie[0].zoom===void 0)return[new _n(me,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new _n(me,ie,"object stop key must have value")];const Pe=xr(ie[0].zoom);if(typeof Pe!="number")return[new _n(me,ie[0].zoom,"stop zoom values must be numbers")];if(_&&_>Pe)return[new _n(me,ie[0].zoom,"stop zoom values must appear in ascending order")];Pe!==_&&(_=Pe,g=void 0,w={}),ee=ee.concat(wa({key:`${me}[0]`,value:ie[0],valueSpec:{zoom:{}},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:ah,value:W}}))}else ee=ee.concat(W({key:`${me}[0]`,value:ie[0],valueSpec:{},style:Z.style,styleSpec:Z.styleSpec},ie));return Id(Lr(ie[1]))?ee.concat([new _n(`${me}[1]`,ie[1],"expressions are not allowed in function stops.")]):ee.concat(es({key:`${me}[1]`,value:ie[1],valueSpec:a,style:Z.style,styleSpec:Z.styleSpec}))}function W(Z,ee){const ie=Nr(Z.value),me=xr(Z.value),Pe=Z.value!==null?Z.value:ee;if(h){if(ie!==h)return[new _n(Z.key,Pe,`${ie} stop domain type must match previous stop domain type ${h}`)]}else h=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean"&&typeof me!="number"&&typeof me!="string"&&typeof me!="boolean")return[new _n(Z.key,Pe,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&u!=="categorical"){let je=`number expected, ${ie} found`;return Md(a)&&u===void 0&&(je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _n(Z.key,Pe,je)]}return u!=="categorical"||ie!=="number"||typeof me=="number"&&isFinite(me)&&Math.floor(me)===me?u!=="categorical"&&ie==="number"&&typeof me=="number"&&typeof g=="number"&&g!==void 0&&me<g?[new _n(Z.key,Pe,"stop domain values must appear in ascending order")]:(g=me,u==="categorical"&&me in w?[new _n(Z.key,Pe,"stop domain values must be unique")]:(w[me]=!0,[])):[new _n(Z.key,Pe,`integer expected, found ${String(me)}`)]}}function zo(c){const a=(c.expressionContext==="property"?sh:Rd)(Lr(c.value),c.valueSpec);if(a.result==="error")return a.value.map(h=>new _n(`${c.key}${h.key}`,c.value,h.message));const u=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new _n(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Bl(u))return[new _n(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return ch(u,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!gu(u,["zoom","feature-state"]))return[new _n(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ed(u))return[new _n(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ch(c,a){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const g of a.valueSpec.expression.parameters)u.delete(g);if(u.size===0)return[];const h=[];return c instanceof Ol&&u.has(c.name)?[new _n(a.key,a.value,`["${c.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(c.eachChild(g=>{h.push(...ch(g,a))}),h)}function om(c){const a=c.key,u=c.value,h=c.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(xr(u))===-1&&g.push(new _n(a,u,`expected one of [${h.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(h.values).indexOf(xr(u))===-1&&g.push(new _n(a,u,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function dy(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!dy(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function sm(c,a="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};dy(c)||(c=Ld(c));const u=c;let h=!0;try{h=function(L){if(!Od(L))return L;let N=Lr(L);return am(N),N=Ux(N),N}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(u,null,2)}
        `)}const g=xt[`filter_${a}`],_=Rd(h,g);let w=null;if(_.result==="error")throw new Error(_.value.map(L=>`${L.key}: ${L.message}`).join(", "));w=(L,N,G)=>_.value.evaluate(L,N,{},G);let T=null,I=null;if(h!==u){const L=Rd(u,g);if(L.result==="error")throw new Error(L.value.map(N=>`${N.key}: ${N.message}`).join(", "));T=(N,G,W,Z,ee)=>L.value.evaluate(N,G,{},W,void 0,void 0,Z,ee),I=!Ed(L.value.expression)}return{filter:w,dynamicFilter:T||void 0,needGeometry:Vx(h),needFeature:!!I}}function Ux(c){if(!Array.isArray(c))return c;const a=function(u){if(fy.has(u[0])){for(let h=1;h<u.length;h++)if(Od(u[h]))return!0}return u}(c);return a===!0?a:a.map(u=>Ux(u))}function am(c){let a=!1;const u=[];if(c[0]==="case"){for(let h=1;h<c.length-1;h+=2)a=a||Od(c[h]),u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="match"){a=a||Od(c[1]);for(let h=2;h<c.length-1;h+=2)u.push(c[h+1]);u.push(c[c.length-1])}else if(c[0]==="step"){a=a||Od(c[1]);for(let h=1;h<c.length-1;h+=2)u.push(c[h+1])}a&&(c.length=0,c.push("any",...u));for(let h=1;h<c.length;h++)am(c[h])}function Od(c){if(!Array.isArray(c))return!1;if((a=c[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let u=1;u<c.length;u++)if(Od(c[u]))return!0;return!1}const fy=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function CA(c,a){return c<a?-1:c>a?1:0}function Vx(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Vx(c[a]))return!0;return!1}function Ld(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?hy(c[1],c[2],"=="):a==="!="?lm(hy(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?hy(c[1],c[2],a):a==="any"?(u=c.slice(1),["any"].concat(u.map(Ld))):a==="all"?["all"].concat(c.slice(1).map(Ld)):a==="none"?["all"].concat(c.slice(1).map(Ld).map(lm)):a==="in"?py(c[1],c.slice(2)):a==="!in"?lm(py(c[1],c.slice(2))):a==="has"?my(c[1]):a==="!has"?lm(my(c[1])):a!=="within"||c;var u}function hy(c,a,u){switch(c){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,c,a]}}function py(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(u=>typeof u!=typeof a[0])?["filter-in-large",c,["literal",a.sort(CA)]]:["filter-in-small",c,["literal",a]]}}function my(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function lm(c){return["!",c]}function uh(c){return dy(Lr(c.value))?zo(Hi({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):dh(c)}function dh(c){const a=c.value,u=c.key;if(Nr(a)!=="array")return[new _n(u,a,`array expected, ${Nr(a)} found`)];const h=c.styleSpec;let g,_=[];if(a.length<1)return[new _n(u,a,"filter array must have at least 1 element")];switch(_=_.concat(om({key:`${u}[0]`,value:a[0],valueSpec:h.filter_operator,style:c.style,styleSpec:c.styleSpec})),xr(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&xr(a[1])==="$type"&&_.push(new _n(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&_.push(new _n(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(g=Nr(a[1]),g!=="string"&&_.push(new _n(`${u}[1]`,a[1],`string expected, ${g} found`)));for(let w=2;w<a.length;w++)g=Nr(a[w]),xr(a[1])==="$type"?_=_.concat(om({key:`${u}[${w}]`,value:a[w],valueSpec:h.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new _n(`${u}[${w}]`,a[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<a.length;w++)_=_.concat(dh({key:`${u}[${w}]`,value:a[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Nr(a[1]),a.length!==2?_.push(new _n(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new _n(`${u}[1]`,a[1],`string expected, ${g} found`));break;case"within":g=Nr(a[1]),a.length!==2?_.push(new _n(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new _n(`${u}[1]`,a[1],`object expected, ${g} found`))}return _}function gy(c,a){const u=c.key,h=c.style,g=c.styleSpec,_=c.value,w=c.objectKey,T=g[`${a}_${c.layerType}`];if(!T)return[];const I=w.match(/^(.*)-transition$/);if(a==="paint"&&I&&T[I[1]]&&T[I[1]].transition)return es({key:u,value:_,valueSpec:g.transition,style:h,styleSpec:g});const L=c.valueSpec||T[w];if(!L)return[new _n(u,_,`unknown property "${w}"`)];let N;if(Nr(_)==="string"&&Md(L)&&!L.tokens&&(N=/^{([^}]+)}$/.exec(_))){const W=`\`{ "type": "identity", "property": ${N?JSON.stringify(N[1]):'"_"'} }\``;return[new _n(u,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${W}.`)]}const G=[];return c.layerType==="symbol"&&(w==="text-field"&&h&&!h.glyphs&&G.push(new _n(u,_,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&ih(Lr(_))&&xr(_.type)==="identity"&&G.push(new _n(u,_,'"text-font" does not support identity functions'))),G.concat(es({key:c.key,value:_,valueSpec:L,style:h,styleSpec:g,expressionContext:"property",propertyType:a,propertyKey:w}))}function Gx(c){return gy(c,"paint")}function vy(c){return gy(c,"layout")}function Hx(c){let a=[];const u=c.value,h=c.key,g=c.style,_=c.styleSpec;u.type||u.ref||a.push(new _n(h,u,'either "type" or "ref" is required'));let w=xr(u.type);const T=xr(u.ref);if(u.id){const I=xr(u.id);for(let L=0;L<c.arrayIndex;L++){const N=g.layers[L];xr(N.id)===I&&a.push(new _n(h,u.id,`duplicate layer id "${u.id}", previously used at line ${N.id.__line__}`))}}if("ref"in u){let I;["type","source","source-layer","filter","layout"].forEach(L=>{L in u&&a.push(new _n(h,u[L],`"${L}" is prohibited for ref layers`))}),g.layers.forEach(L=>{xr(L.id)===T&&(I=L)}),I?I.ref?a.push(new _n(h,u.ref,"ref cannot reference another ref layer")):w=xr(I.type):typeof T=="string"&&a.push(new _n(h,u.ref,`ref layer "${T}" not found`))}else if(w!=="background"&&w!=="sky")if(u.source){const I=g.sources&&g.sources[u.source],L=I&&xr(I.type);I?L==="vector"&&w==="raster"?a.push(new _n(h,u.source,`layer "${u.id}" requires a raster source`)):L==="raster"&&w!=="raster"?a.push(new _n(h,u.source,`layer "${u.id}" requires a vector source`)):L!=="vector"||u["source-layer"]?L==="raster-dem"&&w!=="hillshade"?a.push(new _n(h,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||L==="geojson"&&I.lineMetrics||a.push(new _n(h,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new _n(h,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new _n(h,u.source,`source "${u.source}" not found`))}else a.push(new _n(h,u,'missing required property "source"'));return a=a.concat(wa({key:h,value:u,valueSpec:_.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>es({key:`${h}.type`,value:u.type,valueSpec:_.layer.type,style:c.style,styleSpec:c.styleSpec,object:u,objectKey:"type"}),filter:I=>uh(Hi({layerType:w},I)),layout:I=>wa({layer:u,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":L=>vy(Hi({layerType:w},L))}}),paint:I=>wa({layer:u,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":L=>Gx(Hi({layerType:w},L))}})}})),a}function Rc(c){const a=c.value,u=c.key,h=Nr(a);return h!=="string"?[new _n(u,a,`string expected, ${h} found`)]:[]}const Wx={promoteId:function({key:c,value:a}){if(Nr(a)==="string")return Rc({key:c,value:a});{const u=[];for(const h in a)u.push(...Rc({key:`${c}.${h}`,value:a[h]}));return u}}};function Xx(c){const a=c.value,u=c.key,h=c.styleSpec,g=c.style;if(!a.type)return[new _n(u,a,'"type" is required')];const _=xr(a.type);let w;switch(_){case"vector":case"raster":case"raster-dem":return w=wa({key:u,value:a,valueSpec:h[`source_${_.replace("-","_")}`],style:c.style,styleSpec:h,objectElementValidators:Wx}),w;case"geojson":if(w=wa({key:u,value:a,valueSpec:h.source_geojson,style:g,styleSpec:h,objectElementValidators:Wx}),a.cluster)for(const T in a.clusterProperties){const[I,L]=a.clusterProperties[T],N=typeof I=="string"?[I,["accumulated"],["get",T]]:I;w.push(...zo({key:`${u}.${T}.map`,value:L,expressionContext:"cluster-map"})),w.push(...zo({key:`${u}.${T}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return wa({key:u,value:a,valueSpec:h.source_video,style:g,styleSpec:h});case"image":return wa({key:u,value:a,valueSpec:h.source_image,style:g,styleSpec:h});case"canvas":return[new _n(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return om({key:`${u}.type`,value:a.type,valueSpec:{values:TA(h)},style:g,styleSpec:h})}}function TA(c){return c.source.reduce((a,u)=>{const h=c[u];return h.type.type==="enum"&&(a=a.concat(Object.keys(h.type.values))),a},[])}function qx(c){const a=c.value,u=c.styleSpec,h=u.light,g=c.style;let _=[];const w=Nr(a);if(a===void 0)return _;if(w!=="object")return _=_.concat([new _n("light",a,`object expected, ${w} found`)]),_;for(const T in a){const I=T.match(/^(.*)-transition$/);_=_.concat(I&&h[I[1]]&&h[I[1]].transition?es({key:T,value:a[T],valueSpec:u.transition,style:g,styleSpec:u}):h[T]?es({key:T,value:a[T],valueSpec:h[T],style:g,styleSpec:u}):[new _n(T,a[T],`unknown property "${T}"`)])}return _}function yy(c){const a=c.value,u=c.key,h=c.style,g=c.styleSpec,_=g.terrain;let w=[];const T=Nr(a);if(a===void 0)return w;if(T!=="object")return w=w.concat([new _n("terrain",a,`object expected, ${T} found`)]),w;for(const I in a){const L=I.match(/^(.*)-transition$/);w=w.concat(L&&_[L[1]]&&_[L[1]].transition?es({key:I,value:a[I],valueSpec:g.transition,style:h,styleSpec:g}):_[I]?es({key:I,value:a[I],valueSpec:_[I],style:h,styleSpec:g}):[new _n(I,a[I],`unknown property "${I}"`)])}if(a.source){const I=h.sources&&h.sources[a.source],L=I&&xr(I.type);I?L!=="raster-dem"&&w.push(new _n(u,a.source,`terrain cannot be used with a source of type ${String(L)}, it only be used with a "raster-dem" source type`)):w.push(new _n(u,a.source,`source "${a.source}" not found`))}else w.push(new _n(u,a,'terrain is missing required property "source"'));return w}function Yx(c){const a=c.value,u=c.style,h=c.styleSpec,g=h.fog;let _=[];const w=Nr(a);if(a===void 0)return _;if(w!=="object")return _=_.concat([new _n("fog",a,`object expected, ${w} found`)]),_;for(const T in a){const I=T.match(/^(.*)-transition$/);_=_.concat(I&&g[I[1]]&&g[I[1]].transition?es({key:T,value:a[T],valueSpec:h.transition,style:u,styleSpec:h}):g[T]?es({key:T,value:a[T],valueSpec:g[T],style:u,styleSpec:h}):[new _n(T,a[T],`unknown property "${T}"`)])}return _}const Zx={"*":()=>[],array:jx,boolean:function(c){const a=c.value,u=c.key,h=Nr(a);return h!=="boolean"?[new _n(u,a,`boolean expected, ${h} found`)]:[]},number:ah,color:function(c){const a=c.key,u=c.value,h=Nr(u);return h!=="string"?[new _n(a,u,`color expected, ${h} found`)]:Fi(u)===null?[new _n(a,u,`color expected, "${u}" found`)]:[]},enum:om,filter:uh,function:lh,layer:Hx,object:wa,source:Xx,light:qx,terrain:yy,fog:Yx,string:Rc,formatted:function(c){return Rc(c).length===0?[]:zo(c)},resolvedImage:function(c){return Rc(c).length===0?[]:zo(c)},projection:function(c){const a=c.value,u=c.styleSpec,h=u.projection,g=c.style;let _=[];const w=Nr(a);if(w==="object")for(const T in a)_=_.concat(es({key:T,value:a[T],valueSpec:h[T],style:g,styleSpec:u}));else w!=="string"&&(_=_.concat([new _n("projection",a,`object or string expected, ${w} found`)]));return _}};function es(c){const a=c.value,u=c.valueSpec,h=c.styleSpec;return u.expression&&ih(xr(a))?lh(c):u.expression&&Id(Lr(a))?zo(c):u.type&&Zx[u.type]?Zx[u.type](c):wa(Hi({},c,{valueSpec:u.type?h[u.type]:u}))}function AA(c){const a=c.value,u=c.key,h=Rc(c);return h.length||(a.indexOf("{fontstack}")===-1&&h.push(new _n(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&h.push(new _n(u,a,'"glyphs" url must include a "{range}" token'))),h}function Kx(c,a=xt){return ia(es({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,objectElementValidators:{glyphs:AA,"*":()=>[]}}))}const MA=c=>ia(Gx(c)),PA=c=>ia(vy(c));function ia(c){return c.slice().sort((a,u)=>a.line&&u.line?a.line-u.line:0)}function Jx(c,a){let u=!1;if(a&&a.length)for(const h of a)c.fire(new zr(new Error(h.message))),u=!0;return u}var IA=nl,Sa=3;function nl(c,a,u){var h=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(a=g[1])+2*(u=g[2]);for(var _=0;_<this.d*this.d;_++){var w=g[Sa+_],T=g[Sa+_+1];h.push(w===T?null:g.subarray(w,T))}var I=g[Sa+h.length+1];this.keys=g.subarray(g[Sa+h.length],I),this.bboxes=g.subarray(I),this.insert=this._insertReadonly}else{this.d=a+2*u;for(var L=0;L<this.d*this.d;L++)h.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=c,this.padding=u,this.scale=a/c,this.uid=0;var N=u/a*c;this.min=-N,this.max=c+N}nl.prototype.insert=function(c,a,u,h,g){this._forEachCell(a,u,h,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(g)},nl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nl.prototype._insertCell=function(c,a,u,h,g,_){this.cells[g].push(_)},nl.prototype.query=function(c,a,u,h,g){var _=this.min,w=this.max;if(c<=_&&a<=_&&w<=u&&w<=h&&!g)return Array.prototype.slice.call(this.keys);var T=[];return this._forEachCell(c,a,u,h,this._queryCell,T,{},g),T},nl.prototype._queryCell=function(c,a,u,h,g,_,w,T){var I=this.cells[g];if(I!==null)for(var L=this.keys,N=this.bboxes,G=0;G<I.length;G++){var W=I[G];if(w[W]===void 0){var Z=4*W;(T?T(N[Z+0],N[Z+1],N[Z+2],N[Z+3]):c<=N[Z+2]&&a<=N[Z+3]&&u>=N[Z+0]&&h>=N[Z+1])?(w[W]=!0,_.push(L[W])):w[W]=!1}}},nl.prototype._forEachCell=function(c,a,u,h,g,_,w,T){for(var I=this._convertToCellCoord(c),L=this._convertToCellCoord(a),N=this._convertToCellCoord(u),G=this._convertToCellCoord(h),W=I;W<=N;W++)for(var Z=L;Z<=G;Z++){var ee=this.d*Z+W;if((!T||T(this._convertFromCellCoord(W),this._convertFromCellCoord(Z),this._convertFromCellCoord(W+1),this._convertFromCellCoord(Z+1)))&&g.call(this,c,a,u,h,ee,_,w,T))return}},nl.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},nl.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},nl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,a=Sa+this.cells.length+1+1,u=0,h=0;h<this.cells.length;h++)u+=this.cells[h].length;var g=new Int32Array(a+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var _=a,w=0;w<c.length;w++){var T=c[w];g[Sa+w]=_,g.set(T,_),_+=T.length}return g[Sa+c.length]=_,g.set(this.keys,_),g[Sa+c.length+1]=_+=this.keys.length,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer};var _u=$(IA);const cm={};function En(c,a,u={}){Object.defineProperty(c,"_classRegistryKey",{value:a,writeable:!1}),cm[a]={klass:c,omit:u.omit||[]}}En(Object,"Object"),_u.serialize=function(c,a){const u=c.toArrayBuffer();return a&&a.push(u),{buffer:u}},_u.deserialize=function(c){return new _u(c.buffer)},Object.defineProperty(_u,"name",{value:"Grid"}),En(_u,"Grid"),En(Mi,"Color"),En(Error,"Error"),En(fr,"AJAXError"),En(Yr,"ResolvedImage"),En(rm,"StylePropertyFunction"),En(nm,"StyleExpression",{omit:["_evaluator"]}),En(oh,"ZoomDependentExpression"),En(uy,"ZoomConstantExpression"),En(Ol,"CompoundExpression",{omit:["_evaluate"]});for(const c in rh)cm[rh[c]._classRegistryKey]||En(rh[c],`Expression${c}`);function _y(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function by(c){return p.ImageBitmap&&c instanceof p.ImageBitmap}function Bd(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(_y(c)||by(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const u=c;return a&&a.push(u.buffer),u}if(c instanceof p.ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const h of c)u.push(Bd(h,a));return u}if(typeof c=="object"){const u=c.constructor,h=u._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const g=u.serialize?u.serialize(c,a):{};if(!u.serialize){for(const _ in c)c.hasOwnProperty(_)&&(cm[h].omit.indexOf(_)>=0||(g[_]=Bd(c[_],a)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof c)}function bu(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||_y(c)||by(c)||ArrayBuffer.isView(c)||c instanceof p.ImageData)return c;if(Array.isArray(c))return c.map(bu);if(typeof c=="object"){const a=c.$name||"Object",{klass:u}=cm[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(c);const h=Object.create(u.prototype);for(const g of Object.keys(c))g!=="$name"&&(h[g]=bu(c[g]));return h}throw new Error("can't deserialize object of type "+typeof c)}const gn={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function xy(c){for(const a of c)if(wy(a.charCodeAt(0)))return!0;return!1}function RA(c){for(const a of c)if(!Qx(a.charCodeAt(0)))return!1;return!0}function Qx(c){return!(gn.Arabic(c)||gn["Arabic Supplement"](c)||gn["Arabic Extended-A"](c)||gn["Arabic Presentation Forms-A"](c)||gn["Arabic Presentation Forms-B"](c))}function wy(c){return!(c!==746&&c!==747&&(c<4352||!(gn["Bopomofo Extended"](c)||gn.Bopomofo(c)||gn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||gn["CJK Compatibility Ideographs"](c)||gn["CJK Compatibility"](c)||gn["CJK Radicals Supplement"](c)||gn["CJK Strokes"](c)||!(!gn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||gn["CJK Unified Ideographs Extension A"](c)||gn["CJK Unified Ideographs"](c)||gn["Enclosed CJK Letters and Months"](c)||gn["Hangul Compatibility Jamo"](c)||gn["Hangul Jamo Extended-A"](c)||gn["Hangul Jamo Extended-B"](c)||gn["Hangul Jamo"](c)||gn["Hangul Syllables"](c)||gn.Hiragana(c)||gn["Ideographic Description Characters"](c)||gn.Kanbun(c)||gn["Kangxi Radicals"](c)||gn["Katakana Phonetic Extensions"](c)||gn.Katakana(c)&&c!==12540||!(!gn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!gn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||gn["Unified Canadian Aboriginal Syllabics"](c)||gn["Unified Canadian Aboriginal Syllabics Extended"](c)||gn["Vertical Forms"](c)||gn["Yijing Hexagram Symbols"](c)||gn["Yi Syllables"](c)||gn["Yi Radicals"](c))))}function e1(c){return!(wy(c)||function(a){return!!(gn["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||gn["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||gn["Letterlike Symbols"](a)||gn["Number Forms"](a)||gn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||gn["Control Pictures"](a)&&a!==9251||gn["Optical Character Recognition"](a)||gn["Enclosed Alphanumerics"](a)||gn["Geometric Shapes"](a)||gn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||gn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||gn["CJK Symbols and Punctuation"](a)||gn.Katakana(a)||gn["Private Use Area"](a)||gn["CJK Compatibility Forms"](a)||gn["Small Form Variants"](a)||gn["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function t1(c){return c>=1424&&c<=2303||gn["Arabic Presentation Forms-A"](c)||gn["Arabic Presentation Forms-B"](c)}function OA(c,a){return!(!a&&t1(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||gn.Khmer(c))}function LA(c){for(const a of c)if(t1(a.charCodeAt(0)))return!0;return!1}const Sy="deferred",Ey="loading",Cy="loaded";let Dd=null,y="unavailable",d=null;const m=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(y="error"),Dd&&Dd(c)};function b(){C.fire(new qr("pluginStateChange",{pluginStatus:y,pluginURL:d}))}const C=new _i,A=function(){return y},F=function(){if(y!==Sy||!d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");y=Ey,b(),d&&tr({url:d},c=>{c?m(c):(y=Cy,b())})},z={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>y===Cy||z.applyArabicShaping!=null,isLoading:()=>y===Ey,setState(c){y=c.pluginStatus,d=c.pluginURL},isParsed:()=>z.applyArabicShaping!=null&&z.processBidirectionalText!=null&&z.processStyledBidirectionalText!=null,getPluginURL:()=>d};class V{constructor(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(a){return function(u,h){for(const g of u)if(!OA(g.charCodeAt(0),h))return!1;return!0}(a,z.isLoaded())}}class Y{constructor(a,u){this.property=a,this.value=u,this.expression=function(h,g){if(ih(h))return new rm(h,g);if(Id(h)){const _=sh(h,g);if(_.result==="error")throw new Error(_.value.map(w=>`${w.key}: ${w.message}`).join(", "));return _.value}{let _=h;return typeof h=="string"&&g.type==="color"&&(_=Mi.parse(h)),{kind:"constant",evaluate:()=>_}}}(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,u,h){return this.property.possiblyEvaluate(this,a,u,h)}}class q{constructor(a){this.property=a,this.value=new Y(a,void 0)}transitioned(a,u){return new de(this.property,this.value,u,Ne({},a.transition,this.transition),a.now)}untransitioned(){return new de(this.property,this.value,null,{},0)}}class ne{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return bt(this._values[a].value.value)}setValue(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new q(this._values[a].property)),this._values[a].value=new Y(this._values[a].property,u===null?void 0:bt(u))}getTransition(a){return bt(this._values[a].transition)}setTransition(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new q(this._values[a].property)),this._values[a].transition=bt(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(a[u]=h);const g=this.getTransition(u);g!==void 0&&(a[`${u}-transition`]=g)}return a}transitioned(a,u){const h=new be(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(a,u._values[g]);return h}untransitioned(){const a=new be(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class de{constructor(a,u,h,g,_){const w=g.delay||0,T=g.duration||0;_=_||0,this.property=a,this.value=u,this.begin=_+w,this.end=this.begin+T,a.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(a,u,h){const g=a.now||0,_=this.value.possiblyEvaluate(a,u,h),w=this.prior;if(w){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return w.possiblyEvaluate(a,u,h);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(a,u,h),_,Ae(T))}}return _}}class be{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,h){const g=new Te(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(a,u,h);return g}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Se{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return bt(this._values[a].value)}setValue(a,u){this._values[a]=new Y(this._values[a].property,u===null?void 0:bt(u))}serialize(){const a={};for(const u of Object.keys(this._values)){const h=this.getValue(u);h!==void 0&&(a[u]=h)}return a}possiblyEvaluate(a,u,h){const g=new Te(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(a,u,h);return g}}class we{constructor(a,u,h){this.property=a,this.value=u,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,h,g){return this.property.evaluate(this.value,this.parameters,a,u,h,g)}}class Te{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class re{constructor(a){this.specification=a}possiblyEvaluate(a,u){return a.expression.evaluate(u)}interpolate(a,u,h){const g=Jf[this.specification.type];return g?g(a,u,h):a}}class ye{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,h,g){return new we(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},h,g)}:a.expression,u)}interpolate(a,u,h){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new we(this,{kind:"constant",value:void 0},a.parameters);const g=Jf[this.specification.type];return g?new we(this,{kind:"constant",value:g(a.value.value,u.value.value,h)},a.parameters):a}evaluate(a,u,h,g,_,w){return a.kind==="constant"?a.value:a.evaluate(u,h,g,_,w)}}class Le{constructor(a){this.specification=a}possiblyEvaluate(a,u,h,g){return!!a.expression.evaluate(u,null,{},h,g)}interpolate(){return!1}}class Be{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new V(0,{});for(const h in a){const g=a[h];g.specification.overridable&&this.overridableProperties.push(h);const _=this.defaultPropertyValues[h]=new Y(g,void 0),w=this.defaultTransitionablePropertyValues[h]=new q(g);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=_.possiblyEvaluate(u)}}}function He(c,a){return 256*(c=xe(Math.floor(c),0,255))+xe(Math.floor(a),0,255)}En(ye,"DataDrivenProperty"),En(re,"DataConstantProperty"),En(Le,"ColorRampProperty");const qe={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class We{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Je(c,a=1){let u=0,h=0;return{members:c.map(g=>{const _=qe[g.type].BYTES_PER_ELEMENT,w=u=mt(u,Math.max(a,_)),T=g.components||1;return h=Math.max(h,_),u+=_*T,{name:g.name,type:g.type,components:T,offset:w}}),size:mt(u,Math.max(h,a)),alignment:a}}function mt(c,a){return Math.ceil(c/a)*a}class Xt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,u)}emplace(a,u,h){const g=2*a;return this.int16[g+0]=u,this.int16[g+1]=h,a}}Xt.prototype.bytesPerElement=4,En(Xt,"StructArrayLayout2i4");class ut extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,u,h)}emplace(a,u,h,g){const _=3*a;return this.int16[_+0]=u,this.int16[_+1]=h,this.int16[_+2]=g,a}}ut.prototype.bytesPerElement=6,En(ut,"StructArrayLayout3i6");class Lt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,h,g)}emplace(a,u,h,g,_){const w=4*a;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=_,a}}Lt.prototype.bytesPerElement=8,En(Lt,"StructArrayLayout4i8");class yt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,h,g,_,w,T)}emplace(a,u,h,g,_,w,T,I){const L=6*a,N=12*a,G=3*a;return this.int16[L+0]=u,this.int16[L+1]=h,this.uint8[N+4]=g,this.uint8[N+5]=_,this.uint8[N+6]=w,this.uint8[N+7]=T,this.float32[G+2]=I,a}}yt.prototype.bytesPerElement=12,En(yt,"StructArrayLayout2i4ub1f12");class Wt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,h,g)}emplace(a,u,h,g,_){const w=4*a;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=_,a}}Wt.prototype.bytesPerElement=16,En(Wt,"StructArrayLayout4f16");class ft extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,a,u,h,g,_)}emplace(a,u,h,g,_,w){const T=6*a,I=3*a;return this.uint16[T+0]=u,this.uint16[T+1]=h,this.uint16[T+2]=g,this.uint16[T+3]=_,this.float32[I+2]=w,a}}ft.prototype.bytesPerElement=12,En(ft,"StructArrayLayout4ui1f12");class It extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,h,g)}emplace(a,u,h,g,_){const w=4*a;return this.uint16[w+0]=u,this.uint16[w+1]=h,this.uint16[w+2]=g,this.uint16[w+3]=_,a}}It.prototype.bytesPerElement=8,En(It,"StructArrayLayout4ui8");class Yt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w){const T=this.length;return this.resize(T+1),this.emplace(T,a,u,h,g,_,w)}emplace(a,u,h,g,_,w,T){const I=6*a;return this.int16[I+0]=u,this.int16[I+1]=h,this.int16[I+2]=g,this.int16[I+3]=_,this.int16[I+4]=w,this.int16[I+5]=T,a}}Yt.prototype.bytesPerElement=12,En(Yt,"StructArrayLayout6i12");class $t extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T,I,L,N,G,W){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,u,h,g,_,w,T,I,L,N,G,W)}emplace(a,u,h,g,_,w,T,I,L,N,G,W,Z){const ee=12*a;return this.int16[ee+0]=u,this.int16[ee+1]=h,this.int16[ee+2]=g,this.int16[ee+3]=_,this.uint16[ee+4]=w,this.uint16[ee+5]=T,this.uint16[ee+6]=I,this.uint16[ee+7]=L,this.int16[ee+8]=N,this.int16[ee+9]=G,this.int16[ee+10]=W,this.int16[ee+11]=Z,a}}$t.prototype.bytesPerElement=24,En($t,"StructArrayLayout4i4ui4i24");class Zt extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w){const T=this.length;return this.resize(T+1),this.emplace(T,a,u,h,g,_,w)}emplace(a,u,h,g,_,w,T){const I=10*a,L=5*a;return this.int16[I+0]=u,this.int16[I+1]=h,this.int16[I+2]=g,this.float32[L+2]=_,this.float32[L+3]=w,this.float32[L+4]=T,a}}Zt.prototype.bytesPerElement=20,En(Zt,"StructArrayLayout3i3f20");class zn extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}zn.prototype.bytesPerElement=4,En(zn,"StructArrayLayout1ul4");class lr extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T,I,L,N,G,W,Z){const ee=this.length;return this.resize(ee+1),this.emplace(ee,a,u,h,g,_,w,T,I,L,N,G,W,Z)}emplace(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee){const ie=20*a,me=10*a;return this.int16[ie+0]=u,this.int16[ie+1]=h,this.int16[ie+2]=g,this.int16[ie+3]=_,this.int16[ie+4]=w,this.float32[me+3]=T,this.float32[me+4]=I,this.float32[me+5]=L,this.float32[me+6]=N,this.int16[ie+14]=G,this.uint32[me+8]=W,this.uint16[ie+18]=Z,this.uint16[ie+19]=ee,a}}lr.prototype.bytesPerElement=40,En(lr,"StructArrayLayout5i4f1i1ul2ui40");class Tn extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,h,g,_,w,T)}emplace(a,u,h,g,_,w,T,I){const L=8*a;return this.int16[L+0]=u,this.int16[L+1]=h,this.int16[L+2]=g,this.int16[L+4]=_,this.int16[L+5]=w,this.int16[L+6]=T,this.int16[L+7]=I,a}}Tn.prototype.bytesPerElement=16,En(Tn,"StructArrayLayout3i2i2i16");class qn extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,a,u,h,g,_)}emplace(a,u,h,g,_,w){const T=4*a,I=8*a;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=g,this.int16[I+6]=_,this.int16[I+7]=w,a}}qn.prototype.bytesPerElement=16,En(qn,"StructArrayLayout2f1f2i16");class Tr extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,h,g)}emplace(a,u,h,g,_){const w=12*a,T=3*a;return this.uint8[w+0]=u,this.uint8[w+1]=h,this.float32[T+1]=g,this.float32[T+2]=_,a}}Tr.prototype.bytesPerElement=12,En(Tr,"StructArrayLayout2ub2f12");class Cr extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,u,h)}emplace(a,u,h,g){const _=3*a;return this.float32[_+0]=u,this.float32[_+1]=h,this.float32[_+2]=g,a}}Cr.prototype.bytesPerElement=12,En(Cr,"StructArrayLayout3f12");class Dn extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,u,h)}emplace(a,u,h,g){const _=3*a;return this.uint16[_+0]=u,this.uint16[_+1]=h,this.uint16[_+2]=g,a}}Dn.prototype.bytesPerElement=6,En(Dn,"StructArrayLayout3ui6");class ti extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge)}emplace(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge,Ve){const gt=30*a,dt=15*a,Pt=60*a;return this.int16[gt+0]=u,this.int16[gt+1]=h,this.int16[gt+2]=g,this.float32[dt+2]=_,this.float32[dt+3]=w,this.uint16[gt+8]=T,this.uint16[gt+9]=I,this.uint32[dt+5]=L,this.uint32[dt+6]=N,this.uint32[dt+7]=G,this.uint16[gt+16]=W,this.uint16[gt+17]=Z,this.uint16[gt+18]=ee,this.float32[dt+10]=ie,this.float32[dt+11]=me,this.uint8[Pt+48]=Pe,this.uint8[Pt+49]=je,this.uint8[Pt+50]=Ie,this.uint32[dt+13]=$e,this.int16[gt+28]=Ge,this.uint8[Pt+58]=Ve,a}}ti.prototype.bytesPerElement=60,En(ti,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class li extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut){const en=this.length;return this.resize(en+1),this.emplace(en,a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut)}emplace(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me,Pe,je,Ie,$e,Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut,en){const Mt=38*a,dn=19*a;return this.int16[Mt+0]=u,this.int16[Mt+1]=h,this.int16[Mt+2]=g,this.float32[dn+2]=_,this.float32[dn+3]=w,this.int16[Mt+8]=T,this.int16[Mt+9]=I,this.int16[Mt+10]=L,this.int16[Mt+11]=N,this.int16[Mt+12]=G,this.int16[Mt+13]=W,this.uint16[Mt+14]=Z,this.uint16[Mt+15]=ee,this.uint16[Mt+16]=ie,this.uint16[Mt+17]=me,this.uint16[Mt+18]=Pe,this.uint16[Mt+19]=je,this.uint16[Mt+20]=Ie,this.uint16[Mt+21]=$e,this.uint16[Mt+22]=Ge,this.uint16[Mt+23]=Ve,this.uint16[Mt+24]=gt,this.uint16[Mt+25]=dt,this.uint16[Mt+26]=Pt,this.uint16[Mt+27]=qt,this.uint16[Mt+28]=_t,this.uint32[dn+15]=Dt,this.float32[dn+16]=kt,this.float32[dn+17]=Ut,this.float32[dn+18]=en,a}}li.prototype.bytesPerElement=76,En(li,"StructArrayLayout3i2f6i15ui1ul3f76");class ci extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}ci.prototype.bytesPerElement=4,En(ci,"StructArrayLayout1f4");class ui extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,h,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,a,u,h,g,_)}emplace(a,u,h,g,_,w){const T=5*a;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=g,this.float32[T+3]=_,this.float32[T+4]=w,a}}ui.prototype.bytesPerElement=20,En(ui,"StructArrayLayout5f20");class ts extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,h,g)}emplace(a,u,h,g,_){const w=6*a;return this.uint32[3*a+0]=u,this.uint16[w+2]=h,this.uint16[w+3]=g,this.uint16[w+4]=_,a}}ts.prototype.bytesPerElement=12,En(ts,"StructArrayLayout1ul3ui12");class No extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,u)}emplace(a,u,h){const g=2*a;return this.uint16[g+0]=u,this.uint16[g+1]=h,a}}No.prototype.bytesPerElement=4,En(No,"StructArrayLayout2ui4");class oa extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}oa.prototype.bytesPerElement=2,En(oa,"StructArrayLayout1ui2");class rl extends tt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const h=this.length;return this.resize(h+1),this.emplace(h,a,u)}emplace(a,u,h){const g=2*a;return this.float32[g+0]=u,this.float32[g+1]=h,a}}rl.prototype.bytesPerElement=8,En(rl,"StructArrayLayout2f8");class zi extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}zi.prototype.size=40;class di extends lr{get(a){return new zi(this,a)}}En(di,"CollisionBoxArray");class Ur extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}Ur.prototype.size=60;class ho extends ti{get(a){return new Ur(this,a)}}En(ho,"PlacedSymbolArray");class us extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(a){this._structArray.uint32[this._pos4+15]=a}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}us.prototype.size=76;class Ri extends li{get(a){return new us(this,a)}}En(Ri,"SymbolInstanceArray");class Es extends ci{getoffsetX(a){return this.float32[1*a+0]}}En(Es,"GlyphOffsetArray");class um extends Xt{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}En(um,"SymbolLineVertexArray");class xu extends We{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xu.prototype.size=12;class fh extends ts{get(a){return new xu(this,a)}}En(fh,"FeatureIndexArray");class Fl extends No{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}En(Fl,"FillExtrusionCentroidArray");const Oc=Je([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),wu=Je([{name:"a_dash",components:4,type:"Uint16"}]);var dm={exports:{}},hh={exports:{}};hh.exports=function(c,a){var u,h,g,_,w,T,I,L;for(h=c.length-(u=3&c.length),g=a,w=3432918353,T=461845907,L=0;L<h;)I=255&c.charCodeAt(L)|(255&c.charCodeAt(++L))<<8|(255&c.charCodeAt(++L))<<16|(255&c.charCodeAt(++L))<<24,++L,g=27492+(65535&(_=5*(65535&(g=(g^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(I=0,u){case 3:I^=(255&c.charCodeAt(L+2))<<16;case 2:I^=(255&c.charCodeAt(L+1))<<8;case 1:g^=I=(65535&(I=(I=(65535&(I^=255&c.charCodeAt(L)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*T+(((I>>>16)*T&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Ty=hh.exports,AF={exports:{}};AF.exports=function(c,a){for(var u,h=c.length,g=a^h,_=0;h>=4;)u=1540483477*(65535&(u=255&c.charCodeAt(_)|(255&c.charCodeAt(++_))<<8|(255&c.charCodeAt(++_))<<16|(255&c.charCodeAt(++_))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&c.charCodeAt(_+2))<<16;case 2:g^=(255&c.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var MF=Ty,kQ=AF.exports;dm.exports=MF,dm.exports.murmur3=MF,dm.exports.murmur2=kQ;var BA=$(dm.exports);class n1{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,h,g){this.ids.push(PF(a)),this.positions.push(u,h,g)}getPositions(a){const u=PF(a);let h=0,g=this.ids.length-1;for(;h<g;){const w=h+g>>1;this.ids[w]>=u?g=w:h=w+1}const _=[];for(;this.ids[h]===u;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(a,u){const h=new Float64Array(a.ids),g=new Uint32Array(a.positions);return DA(h,g,0,h.length-1),u&&u.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(a){const u=new n1;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function PF(c){const a=+c;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:BA(String(c))}function DA(c,a,u,h){for(;u<h;){const g=c[u+h>>1];let _=u-1,w=h+1;for(;;){do _++;while(c[_]<g);do w--;while(c[w]>g);if(_>=w)break;r1(c,_,w),r1(a,3*_,3*w),r1(a,3*_+1,3*w+1),r1(a,3*_+2,3*w+2)}w-u<h-w?(DA(c,a,u,w),u=w+1):(DA(c,a,w+1,h),h=w)}}function r1(c,a,u){const h=c[a];c[a]=c[u],c[u]=h}En(n1,"FeaturePositionMap");class Su{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,u),this.initialized=!0),!!this.location}}class i1 extends Su{constructor(a){super(a),this.current=0}set(a,u,h){this.fetchUniformLocation(a,u)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class IF extends Su{constructor(a){super(a),this.current=[0,0,0,0]}set(a,u,h){this.fetchUniformLocation(a,u)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class RF extends Su{constructor(a){super(a),this.current=Mi.transparent}set(a,u,h){this.fetchUniformLocation(a,u)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const FQ=new Float32Array(16),zQ=new Float32Array(9),NQ=new Float32Array(4);function kA(c){return[He(255*c.r,255*c.g),He(255*c.b,255*c.a)]}class Ay{constructor(a,u,h){this.value=a,this.uniformNames=u.map(g=>`u_${g}`),this.type=h}setUniform(a,u,h,g,_){u.set(a,_,g.constantOr(this.value))}getBinding(a,u){return this.type==="color"?new RF(a):new i1(a)}}class fm{constructor(a,u){this.uniformNames=u.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,u,h,g,_){const w=_==="u_pattern"||_==="u_dash"?this.pattern:_==="u_pixel_ratio"?this.pixelRatio:null;w&&u.set(a,_,w)}getBinding(a,u){return u==="u_pattern"||u==="u_dash"?new IF(a):new i1(a)}}class Eu{constructor(a,u,h,g){this.expression=a,this.type=h,this.maxValue=0,this.paintVertexAttributes=u.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(a,u,h,g,_,w){const T=this.paintVertexArray.length,I=this.expression.evaluate(new V(0),u,{},_,g,w);this.paintVertexArray.resize(a),this._setPaintValue(T,a,I)}updatePaintArray(a,u,h,g,_){const w=this.expression.evaluate({zoom:0},h,g,void 0,_);this._setPaintValue(a,u,w)}_setPaintValue(a,u,h){if(this.type==="color"){const g=kA(h);for(let _=a;_<u;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=a;g<u;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zl{constructor(a,u,h,g,_,w){this.expression=a,this.uniformNames=u.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=u.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(a,u,h,g,_,w){const T=this.expression.evaluate(new V(this.zoom),u,{},_,g,w),I=this.expression.evaluate(new V(this.zoom+1),u,{},_,g,w),L=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(L,a,T,I)}updatePaintArray(a,u,h,g,_){const w=this.expression.evaluate({zoom:this.zoom},h,g,void 0,_),T=this.expression.evaluate({zoom:this.zoom+1},h,g,void 0,_);this._setPaintValue(a,u,w,T)}_setPaintValue(a,u,h,g){if(this.type==="color"){const _=kA(h),w=kA(g);for(let T=a;T<u;T++)this.paintVertexArray.emplace(T,_[0],_[1],w[0],w[1])}else{for(let _=a;_<u;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u,h,g,_){const w=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,T=xe(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);u.set(a,_,T)}getBinding(a,u){return new i1(a)}}class kd{constructor(a,u,h,g,_){this.expression=a,this.layerId=_,this.paintVertexAttributes=(h==="array"?wu:Oc).members;for(let w=0;w<u.length;++w);this.paintVertexArray=new g}populatePaintArray(a,u,h){const g=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(g,a,u.patterns&&u.patterns[this.layerId],h)}updatePaintArray(a,u,h,g,_,w){this._setPaintValues(a,u,h.patterns&&h.patterns[this.layerId],w)}_setPaintValues(a,u,h,g){if(!g||!h)return;const _=g[h];if(!_)return;const{tl:w,br:T,pixelRatio:I}=_;for(let L=a;L<u;L++)this.paintVertexArray.emplace(L,w[0],w[1],T[0],T[1],I)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fd{constructor(a,u,h=()=>!0){this.binders={},this._buffers=[];const g=[];for(const _ in a.paint._values){if(!h(_))continue;const w=a.paint.get(_);if(!(w instanceof we&&Md(w.property.specification)))continue;const T=jQ(_,a.type),I=w.value,L=w.property.specification.type,N=!!w.property.useIntegerZoom,G=_==="line-dasharray"||_.endsWith("pattern"),W=_==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||W)if(I.kind==="source"||W||G){const Z=OF(_,L,"source");this.binders[_]=G?new kd(I,T,L,Z,a.id):new Eu(I,T,L,Z),g.push(`/a_${_}`)}else{const Z=OF(_,L,"composite");this.binders[_]=new zl(I,T,L,N,u,Z),g.push(`/z_${_}`)}else this.binders[_]=G?new fm(I.value,T):new Ay(I.value,T,L),g.push(`/u_${_}`)}this.cacheKey=g.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof Eu||u instanceof zl?u.maxValue:0}populatePaintArrays(a,u,h,g,_,w){for(const T in this.binders){const I=this.binders[T];(I instanceof Eu||I instanceof zl||I instanceof kd)&&I.populatePaintArray(a,u,h,g,_,w)}}setConstantPatternPositions(a){for(const u in this.binders){const h=this.binders[u];h instanceof fm&&h.setConstantPatternPositions(a)}}updatePaintArrays(a,u,h,g,_,w){let T=!1;for(const I in a){const L=u.getPositions(I);for(const N of L){const G=h.feature(N.index);for(const W in this.binders){const Z=this.binders[W];if((Z instanceof Eu||Z instanceof zl||Z instanceof kd)&&Z.expression.isStateDependent===!0){const ee=g.paint.get(W);Z.expression=ee.value,Z.updatePaintArray(N.start,N.end,G,a[I],_,w),T=!0}}}}return T}defines(){const a=[];for(const u in this.binders){const h=this.binders[u];(h instanceof Ay||h instanceof fm)&&a.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof Eu||h instanceof zl||h instanceof kd)for(let g=0;g<h.paintVertexAttributes.length;g++)a.push(h.paintVertexAttributes[g].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const h=this.binders[u];if(h instanceof Ay||h instanceof fm||h instanceof zl)for(const g of h.uniformNames)a.push(g)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const u=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Ay||g instanceof fm||g instanceof zl)for(const _ of g.uniformNames)u.push({name:_,property:h,binding:g.getBinding(a,_)})}return u}setUniforms(a,u,h,g,_){for(const{name:w,property:T,binding:I}of h)this.binders[T].setUniform(a,I,_,g.get(T),w)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const u=this.binders[a];(u instanceof Eu||u instanceof zl||u instanceof kd)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(a){for(const u in this.binders){const h=this.binders[u];(h instanceof Eu||h instanceof zl||h instanceof kd)&&h.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof Eu||u instanceof zl||u instanceof kd)&&u.destroy()}}}class ph{constructor(a,u,h=()=>!0){this.programConfigurations={};for(const g of a)this.programConfigurations[g.id]=new Fd(g,u,h);this.needsUpload=!1,this._featureMap=new n1,this._bufferOffset=0}populatePaintArrays(a,u,h,g,_,w,T){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(a,u,g,_,w,T);u.id!==void 0&&this._featureMap.add(u.id,h,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,h,g,_){for(const w of h)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(a,this._featureMap,u,w,g,_)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const $Q={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function jQ(c,a){return $Q[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}const UQ={"line-pattern":{source:ft,composite:ft},"fill-pattern":{source:ft,composite:ft},"fill-extrusion-pattern":{source:ft,composite:ft},"line-dasharray":{source:It,composite:It}},VQ={color:{source:rl,composite:Wt},number:{source:ci,composite:rl}};function OF(c,a,u){const h=UQ[c];return h&&h[u]||VQ[a][u]}En(Ay,"ConstantBinder"),En(fm,"PatternConstantBinder"),En(Eu,"SourceExpressionBinder"),En(kd,"PatternCompositeBinder"),En(zl,"CompositeExpressionBinder"),En(Fd,"ProgramConfiguration",{omit:["_buffers"]}),En(ph,"ProgramConfigurationSet");const LF="-transition";class Nl extends _i{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&a.type!=="sky"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),u.layout&&(this._unevaluatedLayout=new Se(u.layout)),u.paint)){this._transitionablePaint=new ne(u.paint);for(const h in a.paint)this.setPaintProperty(h,a.paint[h],{validate:!1});for(const h in a.layout)this.setLayoutProperty(h,a.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Te(u.paint)}}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,u,h={}){u!=null&&this._validate(PA,`layers.${this.id}.layout.${a}`,a,u,h)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return rt(a,LF)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,h={}){if(u!=null&&this._validate(MA,`layers.${this.id}.paint.${a}`,a,u,h))return!1;if(rt(a,LF))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{const g=this._transitionablePaint._values[a],_=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);const T=this._transitionablePaint._values[a].value,I=T.isDataDriven(),L=rt(a,"pattern")||a==="line-dasharray";return I||_||L||this._handleOverridablePaintPropertyUpdate(a,w,T)}}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getProgramConfiguration(a){return null}_handleOverridablePaintPropertyUpdate(a,u,h){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Rt(a,(u,h)=>!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length))}_validate(a,u,h,g,_={}){return(!_||_.validate!==!1)&&Jx(this,a.call(Kx,{key:u,layerType:this.type,objectKey:h,value:g,styleSpec:xt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof we&&Md(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=sm(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const GQ=Je([{name:"a_pos",components:2,type:"Int16"}],4),HQ=Je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class po{constructor(a=[]){this.segments=a}prepareSegment(a,u,h,g){let _=this.segments[this.segments.length-1];return a>po.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${po.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!_||_.vertexLength+a>po.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,h,g){return new po([{vertexOffset:a,primitiveOffset:u,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}po.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,En(po,"SegmentVector");var Gn=8192;class zd{constructor(a,u){a&&(u?this.setSouthWest(a).setNorthEast(u):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof fi?new fi(a.lng,a.lat):fi.convert(a),this}setSouthWest(a){return this._sw=a instanceof fi?new fi(a.lng,a.lat):fi.convert(a),this}extend(a){const u=this._sw,h=this._ne;let g,_;if(a instanceof fi)g=a,_=a;else{if(!(a instanceof zd))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(zd.convert(a)):this.extend(fi.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(fi.convert(a)):this;if(g=a._sw,_=a._ne,!g||!_)return this}return u||h?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),h.lng=Math.max(_.lng,h.lng),h.lat=Math.max(_.lat,h.lat)):(this._sw=new fi(g.lng,g.lat),this._ne=new fi(_.lng,_.lat)),this}getCenter(){return new fi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new fi(this.getWest(),this.getNorth())}getSouthEast(){return new fi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:u,lat:h}=fi.convert(a);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(a){return!a||a instanceof zd?a:new zd(a)}}var o1=1e-6,sa=typeof Float32Array<"u"?Float32Array:Array;function BF(){var c=new sa(9);return sa!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function DF(c,a,u){var h=a[0],g=a[1],_=a[2],w=a[3],T=a[4],I=a[5],L=a[6],N=a[7],G=a[8],W=u[0],Z=u[1],ee=u[2],ie=u[3],me=u[4],Pe=u[5],je=u[6],Ie=u[7],$e=u[8];return c[0]=W*h+Z*w+ee*L,c[1]=W*g+Z*T+ee*N,c[2]=W*_+Z*I+ee*G,c[3]=ie*h+me*w+Pe*L,c[4]=ie*g+me*T+Pe*N,c[5]=ie*_+me*I+Pe*G,c[6]=je*h+Ie*w+$e*L,c[7]=je*g+Ie*T+$e*N,c[8]=je*_+Ie*I+$e*G,c}function $l(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function FA(c,a){var u=a[0],h=a[1],g=a[2],_=a[3],w=a[4],T=a[5],I=a[6],L=a[7],N=a[8],G=a[9],W=a[10],Z=a[11],ee=a[12],ie=a[13],me=a[14],Pe=a[15],je=u*T-h*w,Ie=u*I-g*w,$e=u*L-_*w,Ge=h*I-g*T,Ve=h*L-_*T,gt=g*L-_*I,dt=N*ie-G*ee,Pt=N*me-W*ee,qt=N*Pe-Z*ee,_t=G*me-W*ie,Dt=G*Pe-Z*ie,kt=W*Pe-Z*me,Ut=je*kt-Ie*Dt+$e*_t+Ge*qt-Ve*Pt+gt*dt;return Ut?(c[0]=(T*kt-I*Dt+L*_t)*(Ut=1/Ut),c[1]=(g*Dt-h*kt-_*_t)*Ut,c[2]=(ie*gt-me*Ve+Pe*Ge)*Ut,c[3]=(W*Ve-G*gt-Z*Ge)*Ut,c[4]=(I*qt-w*kt-L*Pt)*Ut,c[5]=(u*kt-g*qt+_*Pt)*Ut,c[6]=(me*$e-ee*gt-Pe*Ie)*Ut,c[7]=(N*gt-W*$e+Z*Ie)*Ut,c[8]=(w*Dt-T*qt+L*dt)*Ut,c[9]=(h*qt-u*Dt-_*dt)*Ut,c[10]=(ee*Ve-ie*$e+Pe*je)*Ut,c[11]=(G*$e-N*Ve-Z*je)*Ut,c[12]=(T*Pt-w*_t-I*dt)*Ut,c[13]=(u*_t-h*Pt+g*dt)*Ut,c[14]=(ie*Ie-ee*Ge-me*je)*Ut,c[15]=(N*Ge-G*Ie+W*je)*Ut,c):null}function mh(c,a,u){var h=a[0],g=a[1],_=a[2],w=a[3],T=a[4],I=a[5],L=a[6],N=a[7],G=a[8],W=a[9],Z=a[10],ee=a[11],ie=a[12],me=a[13],Pe=a[14],je=a[15],Ie=u[0],$e=u[1],Ge=u[2],Ve=u[3];return c[0]=Ie*h+$e*T+Ge*G+Ve*ie,c[1]=Ie*g+$e*I+Ge*W+Ve*me,c[2]=Ie*_+$e*L+Ge*Z+Ve*Pe,c[3]=Ie*w+$e*N+Ge*ee+Ve*je,c[4]=(Ie=u[4])*h+($e=u[5])*T+(Ge=u[6])*G+(Ve=u[7])*ie,c[5]=Ie*g+$e*I+Ge*W+Ve*me,c[6]=Ie*_+$e*L+Ge*Z+Ve*Pe,c[7]=Ie*w+$e*N+Ge*ee+Ve*je,c[8]=(Ie=u[8])*h+($e=u[9])*T+(Ge=u[10])*G+(Ve=u[11])*ie,c[9]=Ie*g+$e*I+Ge*W+Ve*me,c[10]=Ie*_+$e*L+Ge*Z+Ve*Pe,c[11]=Ie*w+$e*N+Ge*ee+Ve*je,c[12]=(Ie=u[12])*h+($e=u[13])*T+(Ge=u[14])*G+(Ve=u[15])*ie,c[13]=Ie*g+$e*I+Ge*W+Ve*me,c[14]=Ie*_+$e*L+Ge*Z+Ve*Pe,c[15]=Ie*w+$e*N+Ge*ee+Ve*je,c}function My(c,a,u){var h,g,_,w,T,I,L,N,G,W,Z,ee,ie=u[0],me=u[1],Pe=u[2];return a===c?(c[12]=a[0]*ie+a[4]*me+a[8]*Pe+a[12],c[13]=a[1]*ie+a[5]*me+a[9]*Pe+a[13],c[14]=a[2]*ie+a[6]*me+a[10]*Pe+a[14],c[15]=a[3]*ie+a[7]*me+a[11]*Pe+a[15]):(g=a[1],_=a[2],w=a[3],T=a[4],I=a[5],L=a[6],N=a[7],G=a[8],W=a[9],Z=a[10],ee=a[11],c[0]=h=a[0],c[1]=g,c[2]=_,c[3]=w,c[4]=T,c[5]=I,c[6]=L,c[7]=N,c[8]=G,c[9]=W,c[10]=Z,c[11]=ee,c[12]=h*ie+T*me+G*Pe+a[12],c[13]=g*ie+I*me+W*Pe+a[13],c[14]=_*ie+L*me+Z*Pe+a[14],c[15]=w*ie+N*me+ee*Pe+a[15]),c}function gh(c,a,u){var h=u[0],g=u[1],_=u[2];return c[0]=a[0]*h,c[1]=a[1]*h,c[2]=a[2]*h,c[3]=a[3]*h,c[4]=a[4]*g,c[5]=a[5]*g,c[6]=a[6]*g,c[7]=a[7]*g,c[8]=a[8]*_,c[9]=a[9]*_,c[10]=a[10]*_,c[11]=a[11]*_,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c}function zA(c,a,u){var h=Math.sin(u),g=Math.cos(u),_=a[4],w=a[5],T=a[6],I=a[7],L=a[8],N=a[9],G=a[10],W=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=_*g+L*h,c[5]=w*g+N*h,c[6]=T*g+G*h,c[7]=I*g+W*h,c[8]=L*g-_*h,c[9]=N*g-w*h,c[10]=G*g-T*h,c[11]=W*g-I*h,c}function s1(c,a,u){var h=Math.sin(u),g=Math.cos(u),_=a[0],w=a[1],T=a[2],I=a[3],L=a[8],N=a[9],G=a[10],W=a[11];return a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=_*g-L*h,c[1]=w*g-N*h,c[2]=T*g-G*h,c[3]=I*g-W*h,c[8]=_*h+L*g,c[9]=w*h+N*g,c[10]=T*h+G*g,c[11]=I*h+W*g,c}function kF(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function FF(c,a,u){var h,g,_,w=u[0],T=u[1],I=u[2],L=Math.hypot(w,T,I);return L<o1?null:(w*=L=1/L,T*=L,I*=L,h=Math.sin(a),g=Math.cos(a),c[0]=w*w*(_=1-g)+g,c[1]=T*w*_+I*h,c[2]=I*w*_-T*h,c[3]=0,c[4]=w*T*_-I*h,c[5]=T*T*_+g,c[6]=I*T*_+w*h,c[7]=0,c[8]=w*I*_+T*h,c[9]=T*I*_-w*h,c[10]=I*I*_+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var WQ=mh;function NA(){var c=new sa(3);return sa!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function zF(c){var a=new sa(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a}function Py(c){return Math.hypot(c[0],c[1],c[2])}function hm(c,a,u){var h=new sa(3);return h[0]=c,h[1]=a,h[2]=u,h}function Cu(c,a,u){return c[0]=a[0]+u[0],c[1]=a[1]+u[1],c[2]=a[2]+u[2],c}function $A(c,a,u){return c[0]=a[0]-u[0],c[1]=a[1]-u[1],c[2]=a[2]-u[2],c}function NF(c,a,u){return c[0]=a[0]*u[0],c[1]=a[1]*u[1],c[2]=a[2]*u[2],c}function Iy(c,a,u){return c[0]=Math.min(a[0],u[0]),c[1]=Math.min(a[1],u[1]),c[2]=Math.min(a[2],u[2]),c}function Ry(c,a,u){return c[0]=Math.max(a[0],u[0]),c[1]=Math.max(a[1],u[1]),c[2]=Math.max(a[2],u[2]),c}function Ea(c,a,u){return c[0]=a[0]*u,c[1]=a[1]*u,c[2]=a[2]*u,c}function Oy(c,a,u,h){return c[0]=a[0]+u[0]*h,c[1]=a[1]+u[1]*h,c[2]=a[2]+u[2]*h,c}function Cs(c,a){var u=a[0],h=a[1],g=a[2],_=u*u+h*h+g*g;return _>0&&(_=1/Math.sqrt(_)),c[0]=a[0]*_,c[1]=a[1]*_,c[2]=a[2]*_,c}function il(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function jA(c,a,u){var h=a[0],g=a[1],_=a[2],w=u[0],T=u[1],I=u[2];return c[0]=g*I-_*T,c[1]=_*w-h*I,c[2]=h*T-g*w,c}function lo(c,a,u){var h=a[0],g=a[1],_=a[2],w=u[3]*h+u[7]*g+u[11]*_+u[15];return c[0]=(u[0]*h+u[4]*g+u[8]*_+u[12])/(w=w||1),c[1]=(u[1]*h+u[5]*g+u[9]*_+u[13])/w,c[2]=(u[2]*h+u[6]*g+u[10]*_+u[14])/w,c}function $F(c,a,u){var h=u[0],g=u[1],_=u[2],w=a[0],T=a[1],I=a[2],L=g*I-_*T,N=_*w-h*I,G=h*T-g*w,W=g*G-_*N,Z=_*L-h*G,ee=h*N-g*L,ie=2*u[3];return N*=ie,G*=ie,Z*=2,ee*=2,c[0]=w+(L*=ie)+(W*=2),c[1]=T+N+Z,c[2]=I+G+ee,c}var Ly,jl=$A,XQ=NF,qQ=Py;function jF(c,a,u){return c[0]=a[0]*u,c[1]=a[1]*u,c[2]=a[2]*u,c[3]=a[3]*u,c}function UF(c,a){var u=a[0],h=a[1],g=a[2],_=a[3],w=u*u+h*h+g*g+_*_;return w>0&&(w=1/Math.sqrt(w)),c[0]=u*w,c[1]=h*w,c[2]=g*w,c[3]=_*w,c}function vh(c,a,u){var h=a[0],g=a[1],_=a[2],w=a[3];return c[0]=u[0]*h+u[4]*g+u[8]*_+u[12]*w,c[1]=u[1]*h+u[5]*g+u[9]*_+u[13]*w,c[2]=u[2]*h+u[6]*g+u[10]*_+u[14]*w,c[3]=u[3]*h+u[7]*g+u[11]*_+u[15]*w,c}function VF(){var c=new sa(4);return sa!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function GF(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function HF(c,a,u){u*=.5;var h=a[0],g=a[1],_=a[2],w=a[3],T=Math.sin(u),I=Math.cos(u);return c[0]=h*I+w*T,c[1]=g*I+_*T,c[2]=_*I-g*T,c[3]=w*I-h*T,c}function WF(c,a,u){u*=.5;var h=a[0],g=a[1],_=a[2],w=a[3],T=Math.sin(u),I=Math.cos(u);return c[0]=h*I-_*T,c[1]=g*I+w*T,c[2]=_*I+h*T,c[3]=w*I-g*T,c}NA(),Ly=new sa(4),sa!=Float32Array&&(Ly[0]=0,Ly[1]=0,Ly[2]=0,Ly[3]=0);var YQ=UF;NA(),hm(1,0,0),hm(0,1,0),VF(),VF(),BF();const ZQ=Je([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:XF}=ZQ,qF=Je([{name:"a_pos_3",components:3,type:"Int16"}]);var By=Je([{name:"a_pos",type:"Int16",components:2}]);class UA{constructor(a,u){this.pos=a,this.dir=u}intersectsPlane(a,u,h){const g=il(u,this.dir);if(Math.abs(g)<1e-6)return!1;const _=((a[0]-this.pos[0])*u[0]+(a[1]-this.pos[1])*u[1]+(a[2]-this.pos[2])*u[2])/g;return h[0]=this.pos[0]+this.dir[0]*_,h[1]=this.pos[1]+this.dir[1]*_,h[2]=this.pos[2]+this.dir[2]*_,!0}closestPointOnSphere(a,u,h){if(function(Z,ee){var ie=Z[0],me=Z[1],Pe=Z[2],je=ee[0],Ie=ee[1],$e=ee[2];return Math.abs(ie-je)<=o1*Math.max(1,Math.abs(ie),Math.abs(je))&&Math.abs(me-Ie)<=o1*Math.max(1,Math.abs(me),Math.abs(Ie))&&Math.abs(Pe-$e)<=o1*Math.max(1,Math.abs(Pe),Math.abs($e))}(this.pos,a)||u===0)return h[0]=h[1]=h[2]=0,!1;const[g,_,w]=this.dir,T=this.pos[0]-a[0],I=this.pos[1]-a[1],L=this.pos[2]-a[2],N=g*g+_*_+w*w,G=2*(T*g+I*_+L*w),W=G*G-4*N*(T*T+I*I+L*L-u*u);if(W<0){const Z=Math.max(-G/2,0),ee=T+g*Z,ie=I+_*Z,me=L+w*Z,Pe=Math.hypot(ee,ie,me);return h[0]=ee*u/Pe,h[1]=ie*u/Pe,h[2]=me*u/Pe,!1}{const Z=(-G-Math.sqrt(W))/(2*N);if(Z<0){const ee=Math.hypot(T,I,L);return h[0]=T*u/ee,h[1]=I*u/ee,h[2]=L*u/ee,!1}return h[0]=T+g*Z,h[1]=I+_*Z,h[2]=L+w*Z,!0}}}class VA{constructor(a,u,h,g,_){this.TL=a,this.TR=u,this.BR=h,this.BL=g,this.horizon=_}static fromInvProjectionMatrix(a,u,h){const g=[-1,1,1],_=[1,1,1],w=[1,-1,1],T=[-1,-1,1],I=lo(g,g,a),L=lo(_,_,a),N=lo(w,w,a),G=lo(T,T,a);return new VA(I,L,N,G,u/h)}}class GA{constructor(a,u){this.points=a,this.planes=u}static fromInvProjectionMatrix(a,u,h,g){const _=Math.pow(2,h),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const L=vh([],I,a),N=1/L[3]/u*_;return function(G,W,Z){return G[0]=W[0]*Z[0],G[1]=W[1]*Z[1],G[2]=W[2]*Z[2],G[3]=W[3]*Z[3],G}(L,L,[N,N,g?1/L[3]:N,N])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const L=Cs([],jA([],jl([],w[I[0]],w[I[1]]),jl([],w[I[2]],w[I[1]]))),N=-il(L,w[I[1]]);return L.concat(N)});return new GA(w,T)}}class Ts{static fromPoints(a){const u=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const g of a)Iy(u,u,g),Ry(h,h,g);return new Ts(u,h)}static applyTransform(a,u){const h=a.getCorners();for(let g=0;g<h.length;++g)lo(h[g],h[g],u);return Ts.fromPoints(h)}constructor(a,u){this.min=a,this.max=u,this.center=Ea([],Cu([],this.min,this.max),.5)}quadrant(a){const u=[a%2==0,a<2],h=zF(this.min),g=zF(this.max);for(let _=0;_<u.length;_++)h[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ts(h,g)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,u=this.max;return[[a[0],a[1],a[2]],[u[0],a[1],a[2]],[u[0],u[1],a[2]],[a[0],u[1],a[2]],[a[0],a[1],u[2]],[u[0],a[1],u[2]],[u[0],u[1],u[2]],[a[0],u[1],u[2]]]}intersects(a){const u=this.getCorners();let h=!0;for(let g=0;g<a.planes.length;g++){const _=a.planes[g];let w=0;for(let T=0;T<u.length;T++)w+=il(_,u[T])+_[3]>=0;if(w===0)return 0;w!==u.length&&(h=!1)}if(h)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let T=0;T<a.points.length;T++){const I=a.points[T][g]-this.min[g];_=Math.min(_,I),w=Math.max(w,I)}if(w<0||_>this.max[g]-this.min[g])return 0}return 1}}const HA=5,YF=6,Lc=Gn/Math.PI/2,KQ=16383,yh=64,Dy=[yh,32,16],ol=-Lc,sl=Lc,JQ=[new Ts([ol,ol,ol],[sl,sl,sl]),new Ts([ol,ol,ol],[0,0,sl]),new Ts([0,ol,ol],[sl,0,sl]),new Ts([ol,0,ol],[0,sl,sl]),new Ts([0,0,ol],[sl,sl,sl])];function a1(c){return c*Lc/zy}function ZF(c,a,u,h=!0){const g=Ea([],c._camera.position,c.worldSize),_=[a,u,1,1];vh(_,_,c.pixelMatrixInverse),jF(_,_,1/_[3]);const w=Cs([],jl([],_,g)),T=c.globeMatrix,I=[T[12],T[13],T[14]],L=jl([],I,g),N=Py(L),G=Cs([],L),W=c.worldSize/(2*Math.PI),Z=il(G,w),ee=Math.asin(W/N);if(ee<Math.acos(Z)){if(!h)return null;const qt=[],_t=[];Ea(qt,w,N/Z),Cs(_t,jl(_t,qt,L)),Cs(w,Cu(w,L,Ea(w,_t,Math.tan(ee)*N)))}const ie=[];new UA(g,w).closestPointOnSphere(I,W,ie);const me=Cs([],Nt(T,0)),Pe=Cs([],Nt(T,1)),je=Cs([],Nt(T,2)),Ie=il(me,ie),$e=il(Pe,ie),Ge=il(je,ie),Ve=ve(Math.asin(-$e/W));let gt=ve(Math.atan2(Ie,Ge));gt=c.center.lng+function(qt,_t){const Dt=(_t-qt+180)%360-180;return Dt<-180?Dt+360:Dt}(c.center.lng,gt);const dt=Dc(gt),Pt=xe(kc(Ve),0,1);return new vm(dt,Pt)}class QQ{constructor(a,u,h){this.a=jl([],a,h),this.b=jl([],u,h),this.center=h;const g=Cs([],this.a),_=Cs([],this.b);this.angle=Math.acos(il(g,_))}}function WA(c,a){if(c.angle===0)return null;let u;return u=c.a[a]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[a]/c.a[a]/Math.sin(c.angle)-1/Math.tan(c.angle)),u<0||u>1?null:function(h,g,_,w){const T=Math.sin(_);return h*(Math.sin((1-w)*_)/T)+g*(Math.sin(w*_)/T)}(c.a[a],c.b[a],c.angle,xe(u,0,1))+c.center[a]}function Bc(c){if(c.z<=1)return JQ[c.z+2*c.y+c.x];const a=XA(l1(c));return Ts.fromPoints(a)}function _h(c,a,u){return Ea(c,c,1-u),Oy(c,c,a,u)}function KF(c,a){const u=gm(a.zoom);if(u===0)return Bc(c);const h=l1(c),g=XA(h),_=Dc(h.getWest())*a.worldSize,w=Dc(h.getEast())*a.worldSize,T=kc(h.getNorth())*a.worldSize,I=kc(h.getSouth())*a.worldSize,L=[_,T,0],N=[w,T,0],G=[_,I,0],W=[w,I,0],Z=FA([],a.globeMatrix);return lo(L,L,Z),lo(N,N,Z),lo(G,G,Z),lo(W,W,Z),g[0]=_h(g[0],G,u),g[1]=_h(g[1],W,u),g[2]=_h(g[2],N,u),g[3]=_h(g[3],L,u),Ts.fromPoints(g)}function JF(c,a,u){for(const h of c)lo(h,h,a),Ea(h,h,u)}function eee(c,a,u){const h=a/c.worldSize,g=c.globeMatrix;if(u.z<=1){const dt=Bc(u).getCorners();return JF(dt,g,h),Ts.fromPoints(dt)}const _=l1(u),w=XA(_);JF(w,g,h);const T=Number.MAX_VALUE,I=[-T,-T,-T],L=[T,T,T];if(_.contains(c.center)){for(const qt of w)Iy(L,L,qt),Ry(I,I,qt);I[2]=0;const dt=c.point,Pt=[dt.x*h,dt.y*h,0];return Iy(L,L,Pt),Ry(I,I,Pt),new Ts(L,I)}const N=[g[12]*h,g[13]*h,g[14]*h],G=_.getCenter(),W=xe(c.center.lat,-rs,rs),Z=xe(G.lat,-rs,rs),ee=Dc(c.center.lng),ie=kc(W);let me=ee-Dc(G.lng);const Pe=ie-kc(Z);me>.5?me-=1:me<-.5&&(me+=1);let je=0;Math.abs(me)>Math.abs(Pe)?je=me>=0?1:3:(je=Pe>=0?0:2,Oy(N,N,[g[4]*h,g[5]*h,g[6]*h],-Math.sin(ae(Pe>=0?_.getSouth():_.getNorth()))*Lc));const Ie=w[je],$e=w[(je+1)%4],Ge=new QQ(Ie,$e,N),Ve=[WA(Ge,0)||Ie[0],WA(Ge,1)||Ie[1],WA(Ge,2)||Ie[2]],gt=gm(c.zoom);if(gt>0){const dt=function({x:qt,y:_t,z:Dt},kt,Ut,en,Mt){const dn=1/(1<<Dt);let An=qt*dn,mn=An+dn,hr=_t*dn,tn=hr+dn,Nn=0;const pr=(An+mn)/2-en;return pr>.5?Nn=-1:pr<-.5&&(Nn=1),An=((An+Nn)*kt-(en*=kt))*Ut+en,mn=((mn+Nn)*kt-en)*Ut+en,hr=(hr*kt-(Mt*=kt))*Ut+Mt,tn=(tn*kt-Mt)*Ut+Mt,[[An,tn,0],[mn,tn,0],[mn,hr,0],[An,hr,0]]}(u,a,c._pixelsPerMercatorPixel,ee,ie);for(let qt=0;qt<w.length;qt++)_h(w[qt],dt[qt],gt);const Pt=Cu([],dt[je],dt[(je+1)%4]);Ea(Pt,Pt,.5),_h(Ve,Pt,gt)}for(const dt of w)Iy(L,L,dt),Ry(I,I,dt);return L[2]=Math.min(Ie[2],$e[2]),Iy(L,L,Ve),Ry(I,I,Ve),new Ts(L,I)}function l1({x:c,y:a,z:u}){const h=1/(1<<u),g=new fi(Ca(c*h),ns((a+1)*h)),_=new fi(Ca((c+1)*h),ns(a*h));return new zd(g,_)}function XA(c){const a=ae(c.getNorth()),u=ae(c.getSouth()),h=Math.cos(a),g=Math.cos(u),_=Math.sin(a),w=Math.sin(u),T=c.getWest(),I=c.getEast();return[pm(g,w,T),pm(g,w,I),pm(h,_,I),pm(h,_,T)]}function pm(c,a,u,h=Lc){return u=ae(u),[c*Math.sin(u)*h,-a*h,c*Math.cos(u)*h]}function mm(c,a,u){return pm(Math.cos(ae(c)),Math.sin(ae(c)),a,u)}function ky(c,a,u,h){const g=1<<u.z,_=(c/Gn+u.x)/g;return mm(ns((a/Gn+u.y)/g),Ca(_),h)}function c1({min:c,max:a}){return KQ/Math.max(a[0]-c[0],a[1]-c[1],a[2]-c[2])}const QF=new Float64Array(16);function Fy(c){const a=c1(c),u=kF(QF,[a,a,a]);return My(u,u,((h=[])[0]=-(g=c.min)[0],h[1]=-g[1],h[2]=-g[2],h));var h,g}function qA(c){const a=(h=c.min,(u=QF)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=h[0],u[13]=h[1],u[14]=h[2],u[15]=1,u);var u,h;const g=1/c1(c);return gh(a,a,[g,g,g])}function ez(c,a,u,h,g){const _=function(I){const L=Gn/(2*Math.PI);return I/(2*Math.PI)/L}(u),w=[c,a,-u/(2*Math.PI)],T=$l(new Float64Array(16));return My(T,T,w),gh(T,T,[_,_,_]),zA(T,T,ae(-g)),s1(T,T,ae(-h)),T}function gm(c){return Re(HA,YF,c)}function tz(c,a){const u=mm(a.lat,a.lng),h=function(ee){const ie=mm(ee._center.lat,ee._center.lng);let me=jA([],hm(0,1,0),ie);const Pe=FF([],-ee.angle,ie);me=lo(me,me,Pe),FF(Pe,-ee._pitch,me);const je=Cs([],ie);return Ea(je,je,a1(ee.cameraToCenterDistance/ee.pixelsPerMeter)),lo(je,je,Pe),Cu([],ie,je)}(c);return w=(g=$A([],h,u))[0],T=g[1],I=g[2],L=(_=u)[0],N=_[1],G=_[2],Z=(W=Math.sqrt(w*w+T*T+I*I)*Math.sqrt(L*L+N*N+G*G))&&il(g,_)/W,Math.acos(Math.min(Math.max(Z,-1),1));var g,_,w,T,I,L,N,G,W,Z}function YA(c,a){return tz(c,a)>Math.PI/2*1.01}const nz=ae(85),tee=Math.cos(nz),nee=Math.sin(nz),zy=63710088e-1,rz=2*Math.PI*zy;class Nd{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Nd(ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,h=this.lat*u,g=a.lat*u,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((a.lng-this.lng)*u);return zy*Math.acos(Math.min(_,1))}toBounds(a=0){const u=360*a/40075017,h=u/Math.cos(Math.PI/180*this.lat);return new zd(new Nd(this.lng-h,this.lat-u),new Nd(this.lng+h,this.lat+u))}toEcef(a){const u=a1(a);return mm(this.lat,this.lng,Lc+u)}static convert(a){if(a instanceof Nd)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Nd(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Nd(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var fi=Nd;function ZA(c){return rz*Math.cos(c*Math.PI/180)}function Dc(c){return(180+c)/360}function kc(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Ul(c,a){return c/ZA(a)}function Ca(c){return 360*c-180}function ns(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function iz(c,a){return c*ZA(ns(a))}const rs=85.051129;function oz(c){return 1/Math.cos(c*Math.PI/180)}class vm{constructor(a,u,h=0){this.x=+a,this.y=+u,this.z=+h}static fromLngLat(a,u=0){const h=fi.convert(a);return new vm(Dc(h.lng),kc(h.lat),Ul(u,h.lat))}toLngLat(){return new fi(Ca(this.x),ns(this.y))}toAltitude(){return iz(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/rz*oz(ns(this.y))}}function KA(c,a,u,h,g,_,w,T,I){const L=(a+h)/2,N=(u+g)/2,G=new Q(L,N);T(G),function(W,Z,ee,ie,me,Pe){const je=ee-me,Ie=ie-Pe;return Math.abs((ie-Z)*je-(ee-W)*Ie)/Math.hypot(je,Ie)}(G.x,G.y,_.x,_.y,w.x,w.y)>=I?(KA(c,a,u,L,N,_,G,T,I),KA(c,L,N,h,g,G,w,T,I)):c.push(w)}function sz(c,a,u){let h=c[0],g=h.x,_=h.y;a(h);const w=[h];for(let T=1;T<c.length;T++){const I=c[T],{x:L,y:N}=I;a(I),KA(w,g,_,L,N,h,I,a,u),g=L,_=N,h=I}return w}function JA(c,a,u,h){if(h(a,u)){const g=a.add(u)._mult(.5);JA(c,a,g,h),JA(c,g,u,h)}else c.push(u)}function ree(c,a){let u=c[0];const h=[u];for(let g=1;g<c.length;g++){const _=c[g];JA(h,u,_,a),u=_}return h}const QA=Math.pow(2,14)-1,az=-QA-1;function iee(c,a){const u=Math.round(c.x*a),h=Math.round(c.y*a);return c.x=xe(u,az,QA),c.y=xe(h,az,QA),(u<c.x||u>c.x+1||h<c.y||h>c.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Tu(c,a,u){const h=c.loadGeometry(),g=c.extent,_=Gn/g;if(a&&u&&u.projection.isReprojectedInTileSpace){const w=1<<a.z,{scale:T,x:I,y:L,projection:N}=u,G=W=>{const Z=Ca((a.x+W.x/g)/w),ee=ns((a.y+W.y/g)/w),ie=N.project(Z,ee);W.x=(ie.x*T-I)*g,W.y=(ie.y*T-L)*g};for(let W=0;W<h.length;W++)if(c.type!==1)h[W]=sz(h[W],G,1);else{const Z=[];for(const ee of h[W])ee.x<0||ee.x>=g||ee.y<0||ee.y>=g||(G(ee),Z.push(ee));h[W]=Z}}for(const w of h)for(const T of w)iee(T,_);return h}function bh(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?Tu(c):[]}}function u1(c,a,u,h,g){c.emplaceBack(2*a+(h+1)/2,2*u+(g+1)/2)}function d1(c,a,u){c.emplaceBack(a.x,a.y,a.z,u[0]*16384,u[1]*16384,u[2]*16384)}class eM{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Xt,this.indexArray=new Dn,this.segments=new po,this.programConfigurations=new ph(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,h,g){const _=this.layers[0],w=[];let T=null;_.type==="circle"&&(T=_.layout.get("circle-sort-key"));for(const{feature:L,id:N,index:G,sourceLayerIndex:W}of a){const Z=this.layers[0]._featureFilter.needGeometry,ee=bh(L,Z);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),ee,h))continue;const ie=T?T.evaluate(ee,{},h):void 0,me={id:N,properties:L.properties,type:L.type,sourceLayerIndex:W,index:G,geometry:Z?ee.geometry:Tu(L,h,g),patterns:{},sortKey:ie};w.push(me)}T&&w.sort((L,N)=>L.sortKey-N.sortKey);let I=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Yt,I=g.projection);for(const L of w){const{geometry:N,index:G,sourceLayerIndex:W}=L,Z=a[G].feature;this.addFeature(L,N,G,u.availableImages,h,I),u.featureIndex.insert(Z,N,G,W,this.index)}}update(a,u,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,GQ.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,HQ.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,u,h,g,_,w){for(const T of u)for(const I of T){const L=I.x,N=I.y;if(L<0||L>=Gn||N<0||N>=Gn)continue;if(w){const Z=w.projectTilePoint(L,N,_),ee=w.upVector(_,L,N),ie=this.globeExtVertexArray;d1(ie,Z,ee),d1(ie,Z,ee),d1(ie,Z,ee),d1(ie,Z,ee)}const G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),W=G.vertexLength;u1(this.layoutVertexArray,L,N,-1,-1),u1(this.layoutVertexArray,L,N,1,-1),u1(this.layoutVertexArray,L,N,1,1),u1(this.layoutVertexArray,L,N,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+2,W+3),G.vertexLength+=4,G.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,{},g,_)}}function lz(c,a){for(let u=0;u<c.length;u++)if(xh(a,c[u]))return!0;for(let u=0;u<a.length;u++)if(xh(c,a[u]))return!0;return!!tM(c,a)}function oee(c,a,u){return!!xh(c,a)||!!nM(a,c,u)}function cz(c,a){if(c.length===1)return dz(a,c[0]);for(let u=0;u<a.length;u++){const h=a[u];for(let g=0;g<h.length;g++)if(xh(c,h[g]))return!0}for(let u=0;u<c.length;u++)if(dz(a,c[u]))return!0;for(let u=0;u<a.length;u++)if(tM(c,a[u]))return!0;return!1}function see(c,a,u){if(c.length>1){if(tM(c,a))return!0;for(let h=0;h<a.length;h++)if(nM(a[h],c,u))return!0}for(let h=0;h<c.length;h++)if(nM(c[h],a,u))return!0;return!1}function tM(c,a){if(c.length===0||a.length===0)return!1;for(let u=0;u<c.length-1;u++){const h=c[u],g=c[u+1];for(let _=0;_<a.length-1;_++)if(aee(h,g,a[_],a[_+1]))return!0}return!1}function aee(c,a,u,h){return Bt(c,u,h)!==Bt(a,u,h)&&Bt(c,a,u)!==Bt(c,a,h)}function nM(c,a,u){const h=u*u;if(a.length===1)return c.distSqr(a[0])<h;for(let g=1;g<a.length;g++)if(uz(c,a[g-1],a[g])<h)return!0;return!1}function uz(c,a,u){const h=a.distSqr(u);if(h===0)return c.distSqr(a);const g=((c.x-a.x)*(u.x-a.x)+(c.y-a.y)*(u.y-a.y))/h;return c.distSqr(g<0?a:g>1?u:u.sub(a)._mult(g)._add(a))}function dz(c,a){let u,h,g,_=!1;for(let w=0;w<c.length;w++){u=c[w];for(let T=0,I=u.length-1;T<u.length;I=T++)h=u[T],g=u[I],h.y>a.y!=g.y>a.y&&a.x<(g.x-h.x)*(a.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function xh(c,a){let u=!1;for(let h=0,g=c.length-1;h<c.length;g=h++){const _=c[h],w=c[g];_.y>a.y!=w.y>a.y&&a.x<(w.x-_.x)*(a.y-_.y)/(w.y-_.y)+_.x&&(u=!u)}return u}function fz(c,a,u,h,g){for(const w of c)if(a<=w.x&&u<=w.y&&h>=w.x&&g>=w.y)return!0;const _=[new Q(a,u),new Q(a,g),new Q(h,g),new Q(h,u)];if(c.length>2){for(const w of _)if(xh(c,w))return!0}for(let w=0;w<c.length-1;w++)if(lee(c[w],c[w+1],_))return!0;return!1}function lee(c,a,u){const h=u[0],g=u[2];if(c.x<h.x&&a.x<h.x||c.x>g.x&&a.x>g.x||c.y<h.y&&a.y<h.y||c.y>g.y&&a.y>g.y)return!1;const _=Bt(c,a,u[0]);return _!==Bt(c,a,u[1])||_!==Bt(c,a,u[2])||_!==Bt(c,a,u[3])}function ym(c,a,u){const h=a.paint.get(c).value;return h.kind==="constant"?h.value:u.programConfigurations.get(a.id).getMaxValue(c)}function f1(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function hz(c,a,u,h,g){if(!a[0]&&!a[1])return c;const _=Q.convert(a)._mult(g);u==="viewport"&&_._rotate(-h);const w=[];for(let T=0;T<c.length;T++)w.push(c[T].sub(_));return w}function pz(c,a,u,h){const g=Q.convert(c)._mult(h);return a==="viewport"&&g._rotate(-u),g}En(eM,"CircleBucket",{omit:["layers"]});const cee=new Be({"circle-sort-key":new ye(xt.layout_circle["circle-sort-key"])});var uee={paint:new Be({"circle-radius":new ye(xt.paint_circle["circle-radius"]),"circle-color":new ye(xt.paint_circle["circle-color"]),"circle-blur":new ye(xt.paint_circle["circle-blur"]),"circle-opacity":new ye(xt.paint_circle["circle-opacity"]),"circle-translate":new re(xt.paint_circle["circle-translate"]),"circle-translate-anchor":new re(xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new re(xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new re(xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ye(xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ye(xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ye(xt.paint_circle["circle-stroke-opacity"])}),layout:cee};function mz(c,a,u,h,g,_,w,T,I){if(_&&c.queryGeometry.isAboveHorizon)return!1;_&&(I*=c.pixelToTileUnitsFactor);const L=c.tileID.canonical,N=u.projection.upVectorScale(L,u.center.lat,u.worldSize).metersToTile;for(const G of a)for(const W of G){const Z=W.add(T),ee=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(Z.x,Z.y,!0):0,ie=u.projection.projectTilePoint(Z.x,Z.y,L);if(ee>0){const Ie=u.projection.upVector(L,Z.x,Z.y);ie.x+=Ie[0]*N*ee,ie.y+=Ie[1]*N*ee,ie.z+=Ie[2]*N*ee}const me=_?Z:dee(ie.x,ie.y,ie.z,h),Pe=_?c.tilespaceRays.map(Ie=>hee(Ie,ee)):c.queryGeometry.screenGeometry,je=vh([],[ie.x,ie.y,ie.z,1],h);if(!w&&_?I*=je[3]/u.cameraToCenterDistance:w&&!_&&(I*=u.cameraToCenterDistance/je[3]),_){const Ie=ns((W.y/Gn+L.y)/(1<<L.z));I/=u.projection.pixelsPerMeter(Ie,1)/Ul(1,Ie)}if(oee(Pe,me,I))return!0}return!1}function dee(c,a,u,h){const g=vh([],[c,a,u,1],h);return new Q(g[0]/g[3],g[1]/g[3])}const gz=hm(0,0,0),fee=hm(0,0,1);function hee(c,a){const u=NA();return gz[2]=a,c.intersectsPlane(gz,fee,u),new Q(u[0],u[1])}class vz extends eM{}function yz(c,{width:a,height:u},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==a*u*h)throw new RangeError("mismatched image size")}else g=new Uint8Array(a*u*h);return c.width=a,c.height=u,c.data=g,c}function _z(c,a,u){const{width:h,height:g}=a;h===c.width&&g===c.height||(rM(c,a,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,h),height:Math.min(c.height,g)},u),c.width=h,c.height=g,c.data=a.data)}function rM(c,a,u,h,g,_){if(g.width===0||g.height===0)return a;if(g.width>c.width||g.height>c.height||u.x>c.width-g.width||u.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>a.width||g.height>a.height||h.x>a.width-g.width||h.y>a.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,T=a.data;for(let I=0;I<g.height;I++){const L=((u.y+I)*c.width+u.x)*_,N=((h.y+I)*a.width+h.x)*_;for(let G=0;G<g.width*_;G++)T[N+G]=w[L+G]}return a}En(vz,"HeatmapBucket",{omit:["layers"]});class Au{constructor(a,u){yz(this,a,1,u)}resize(a){_z(this,new Au(a),1)}clone(){return new Au({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,h,g,_){rM(a,u,h,g,_,1)}}class aa{constructor(a,u){yz(this,a,4,u)}resize(a){_z(this,new aa(a),4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,h,g,_){rM(a,u,h,g,_,4)}}En(Au,"AlphaImage"),En(aa,"RGBAImage");var pee={paint:new Be({"heatmap-radius":new ye(xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ye(xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new re(xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Le(xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new re(xt.paint_heatmap["heatmap-opacity"])})};function iM(c){const a={},u=c.resolution||256,h=c.clips?c.clips.length:1,g=c.image||new aa({width:u,height:h}),_=(w,T,I)=>{a[c.evaluationKey]=I;const L=c.expression.evaluate(a);g.data[w+T+0]=Math.floor(255*L.r/L.a),g.data[w+T+1]=Math.floor(255*L.g/L.a),g.data[w+T+2]=Math.floor(255*L.b/L.a),g.data[w+T+3]=Math.floor(255*L.a)};if(c.clips)for(let w=0,T=0;w<h;++w,T+=4*u)for(let I=0,L=0;I<u;I++,L+=4){const N=I/(u-1),{start:G,end:W}=c.clips[w];_(T,L,G*(1-N)+W*N)}else for(let w=0,T=0;w<u;w++,T+=4)_(0,T,w/(u-1));return g}var mee={paint:new Be({"hillshade-illumination-direction":new re(xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new re(xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new re(xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new re(xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new re(xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new re(xt.paint_hillshade["hillshade-accent-color"])})};const gee=Je([{name:"a_pos",components:2,type:"Int16"}],4),{members:vee}=gee;var oM={exports:{}};function h1(c,a,u){u=u||2;var h,g,_,w,T,I,L,N=a&&a.length,G=N?a[0]*u:c.length,W=bz(c,0,G,u,!0),Z=[];if(!W||W.next===W.prev)return Z;if(N&&(W=function(ie,me,Pe,je){var Ie,$e,Ge,Ve=[];for(Ie=0,$e=me.length;Ie<$e;Ie++)(Ge=bz(ie,me[Ie]*je,Ie<$e-1?me[Ie+1]*je:ie.length,je,!1))===Ge.next&&(Ge.steiner=!0),Ve.push(Cee(Ge));for(Ve.sort(wee),Ie=0;Ie<Ve.length;Ie++)Pe=See(Ve[Ie],Pe);return Pe}(c,a,W,u)),c.length>80*u){h=_=c[0],g=w=c[1];for(var ee=u;ee<G;ee+=u)(T=c[ee])<h&&(h=T),(I=c[ee+1])<g&&(g=I),T>_&&(_=T),I>w&&(w=I);L=(L=Math.max(_-h,w-g))!==0?32767/L:0}return Ny(W,Z,u,h,g,L,0),Z}function bz(c,a,u,h,g){var _,w;if(g===lM(c,a,u,h)>0)for(_=a;_<u;_+=h)w=Sz(_,c[_],c[_+1],w);else for(_=u-h;_>=a;_-=h)w=Sz(_,c[_],c[_+1],w);return w&&p1(w,w.next)&&(jy(w),w=w.next),w}function wh(c,a){if(!c)return c;a||(a=c);var u,h=c;do if(u=!1,h.steiner||!p1(h,h.next)&&mo(h.prev,h,h.next)!==0)h=h.next;else{if(jy(h),(h=a=h.prev)===h.next)break;u=!0}while(u||h!==a);return a}function Ny(c,a,u,h,g,_,w){if(c){!w&&_&&function(N,G,W,Z){var ee=N;do ee.z===0&&(ee.z=sM(ee.x,ee.y,G,W,Z)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==N);ee.prevZ.nextZ=null,ee.prevZ=null,function(ie){var me,Pe,je,Ie,$e,Ge,Ve,gt,dt=1;do{for(Pe=ie,ie=null,$e=null,Ge=0;Pe;){for(Ge++,je=Pe,Ve=0,me=0;me<dt&&(Ve++,je=je.nextZ);me++);for(gt=dt;Ve>0||gt>0&&je;)Ve!==0&&(gt===0||!je||Pe.z<=je.z)?(Ie=Pe,Pe=Pe.nextZ,Ve--):(Ie=je,je=je.nextZ,gt--),$e?$e.nextZ=Ie:ie=Ie,Ie.prevZ=$e,$e=Ie;Pe=je}$e.nextZ=null,dt*=2}while(Ge>1)}(ee)}(c,h,g,_);for(var T,I,L=c;c.prev!==c.next;)if(T=c.prev,I=c.next,_?_ee(c,h,g,_):yee(c))a.push(T.i/u|0),a.push(c.i/u|0),a.push(I.i/u|0),jy(c),c=I.next,L=I.next;else if((c=I)===L){w?w===1?Ny(c=bee(wh(c),a,u),a,u,h,g,_,2):w===2&&xee(c,a,u,h,g,_):Ny(wh(c),a,u,h,g,_,1);break}}}function yee(c){var a=c.prev,u=c,h=c.next;if(mo(a,u,h)>=0)return!1;for(var g=a.x,_=u.x,w=h.x,T=a.y,I=u.y,L=h.y,N=g<_?g<w?g:w:_<w?_:w,G=T<I?T<L?T:L:I<L?I:L,W=g>_?g>w?g:w:_>w?_:w,Z=T>I?T>L?T:L:I>L?I:L,ee=h.next;ee!==a;){if(ee.x>=N&&ee.x<=W&&ee.y>=G&&ee.y<=Z&&_m(g,T,_,I,w,L,ee.x,ee.y)&&mo(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function _ee(c,a,u,h){var g=c.prev,_=c,w=c.next;if(mo(g,_,w)>=0)return!1;for(var T=g.x,I=_.x,L=w.x,N=g.y,G=_.y,W=w.y,Z=T<I?T<L?T:L:I<L?I:L,ee=N<G?N<W?N:W:G<W?G:W,ie=T>I?T>L?T:L:I>L?I:L,me=N>G?N>W?N:W:G>W?G:W,Pe=sM(Z,ee,a,u,h),je=sM(ie,me,a,u,h),Ie=c.prevZ,$e=c.nextZ;Ie&&Ie.z>=Pe&&$e&&$e.z<=je;){if(Ie.x>=Z&&Ie.x<=ie&&Ie.y>=ee&&Ie.y<=me&&Ie!==g&&Ie!==w&&_m(T,N,I,G,L,W,Ie.x,Ie.y)&&mo(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,$e.x>=Z&&$e.x<=ie&&$e.y>=ee&&$e.y<=me&&$e!==g&&$e!==w&&_m(T,N,I,G,L,W,$e.x,$e.y)&&mo($e.prev,$e,$e.next)>=0))return!1;$e=$e.nextZ}for(;Ie&&Ie.z>=Pe;){if(Ie.x>=Z&&Ie.x<=ie&&Ie.y>=ee&&Ie.y<=me&&Ie!==g&&Ie!==w&&_m(T,N,I,G,L,W,Ie.x,Ie.y)&&mo(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;$e&&$e.z<=je;){if($e.x>=Z&&$e.x<=ie&&$e.y>=ee&&$e.y<=me&&$e!==g&&$e!==w&&_m(T,N,I,G,L,W,$e.x,$e.y)&&mo($e.prev,$e,$e.next)>=0)return!1;$e=$e.nextZ}return!0}function bee(c,a,u){var h=c;do{var g=h.prev,_=h.next.next;!p1(g,_)&&xz(g,h,h.next,_)&&$y(g,_)&&$y(_,g)&&(a.push(g.i/u|0),a.push(h.i/u|0),a.push(_.i/u|0),jy(h),jy(h.next),h=c=_),h=h.next}while(h!==c);return wh(h)}function xee(c,a,u,h,g,_){var w=c;do{for(var T=w.next.next;T!==w.prev;){if(w.i!==T.i&&Tee(w,T)){var I=wz(w,T);return w=wh(w,w.next),I=wh(I,I.next),Ny(w,a,u,h,g,_,0),void Ny(I,a,u,h,g,_,0)}T=T.next}w=w.next}while(w!==c)}function wee(c,a){return c.x-a.x}function See(c,a){var u=function(g,_){var w,T=_,I=g.x,L=g.y,N=-1/0;do{if(L<=T.y&&L>=T.next.y&&T.next.y!==T.y){var G=T.x+(L-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(G<=I&&G>N&&(N=G,w=T.x<T.next.x?T:T.next,G===I))return w}T=T.next}while(T!==_);if(!w)return null;var W,Z=w,ee=w.x,ie=w.y,me=1/0;T=w;do I>=T.x&&T.x>=ee&&I!==T.x&&_m(L<ie?I:N,L,ee,ie,L<ie?N:I,L,T.x,T.y)&&(W=Math.abs(L-T.y)/(I-T.x),$y(T,g)&&(W<me||W===me&&(T.x>w.x||T.x===w.x&&Eee(w,T)))&&(w=T,me=W)),T=T.next;while(T!==Z);return w}(c,a);if(!u)return a;var h=wz(u,c);return wh(h,h.next),wh(u,u.next)}function Eee(c,a){return mo(c.prev,c,a.prev)<0&&mo(a.next,c,c.next)<0}function sM(c,a,u,h,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-h)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Cee(c){var a=c,u=c;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==c);return u}function _m(c,a,u,h,g,_,w,T){return(g-w)*(a-T)>=(c-w)*(_-T)&&(c-w)*(h-T)>=(u-w)*(a-T)&&(u-w)*(_-T)>=(g-w)*(h-T)}function Tee(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(u,h){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==h.i&&g.next.i!==h.i&&xz(g,g.next,u,h))return!0;g=g.next}while(g!==u);return!1}(c,a)&&($y(c,a)&&$y(a,c)&&function(u,h){var g=u,_=!1,w=(u.x+h.x)/2,T=(u.y+h.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&w<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==u);return _}(c,a)&&(mo(c.prev,c,a.prev)||mo(c,a.prev,a))||p1(c,a)&&mo(c.prev,c,c.next)>0&&mo(a.prev,a,a.next)>0)}function mo(c,a,u){return(a.y-c.y)*(u.x-a.x)-(a.x-c.x)*(u.y-a.y)}function p1(c,a){return c.x===a.x&&c.y===a.y}function xz(c,a,u,h){var g=g1(mo(c,a,u)),_=g1(mo(c,a,h)),w=g1(mo(u,h,c)),T=g1(mo(u,h,a));return g!==_&&w!==T||!(g!==0||!m1(c,u,a))||!(_!==0||!m1(c,h,a))||!(w!==0||!m1(u,c,h))||!(T!==0||!m1(u,a,h))}function m1(c,a,u){return a.x<=Math.max(c.x,u.x)&&a.x>=Math.min(c.x,u.x)&&a.y<=Math.max(c.y,u.y)&&a.y>=Math.min(c.y,u.y)}function g1(c){return c>0?1:c<0?-1:0}function $y(c,a){return mo(c.prev,c,c.next)<0?mo(c,a,c.next)>=0&&mo(c,c.prev,a)>=0:mo(c,a,c.prev)<0||mo(c,c.next,a)<0}function wz(c,a){var u=new aM(c.i,c.x,c.y),h=new aM(a.i,a.x,a.y),g=c.next,_=a.prev;return c.next=a,a.prev=c,u.next=g,g.prev=u,h.next=u,u.prev=h,_.next=h,h.prev=_,h}function Sz(c,a,u,h){var g=new aM(c,a,u);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function jy(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function aM(c,a,u){this.i=c,this.x=a,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lM(c,a,u,h){for(var g=0,_=a,w=u-h;_<u;_+=h)g+=(c[w]-c[_])*(c[_+1]+c[w+1]),w=_;return g}oM.exports=h1,oM.exports.default=h1,h1.deviation=function(c,a,u,h){var g=a&&a.length,_=Math.abs(lM(c,0,g?a[0]*u:c.length,u));if(g)for(var w=0,T=a.length;w<T;w++)_-=Math.abs(lM(c,a[w]*u,w<T-1?a[w+1]*u:c.length,u));var I=0;for(w=0;w<h.length;w+=3){var L=h[w]*u,N=h[w+1]*u,G=h[w+2]*u;I+=Math.abs((c[L]-c[G])*(c[N+1]-c[L+1])-(c[L]-c[N])*(c[G+1]-c[L+1]))}return _===0&&I===0?0:Math.abs((I-_)/_)},h1.flatten=function(c){for(var a=c[0][0].length,u={vertices:[],holes:[],dimensions:a},h=0,g=0;g<c.length;g++){for(var _=0;_<c[g].length;_++)for(var w=0;w<a;w++)u.vertices.push(c[g][_][w]);g>0&&u.holes.push(h+=c[g-1].length)}return u};var cM=$(oM.exports);function Aee(c,a,u,h,g){Ez(c,a,u||0,h||c.length-1,g||Mee)}function Ez(c,a,u,h,g){for(;h>u;){if(h-u>600){var _=h-u+1,w=a-u+1,T=Math.log(_),I=.5*Math.exp(2*T/3),L=.5*Math.sqrt(T*I*(_-I)/_)*(w-_/2<0?-1:1);Ez(c,a,Math.max(u,Math.floor(a-w*I/_+L)),Math.min(h,Math.floor(a+(_-w)*I/_+L)),g)}var N=c[a],G=u,W=h;for(Uy(c,u,a),g(c[h],N)>0&&Uy(c,u,h);G<W;){for(Uy(c,G,W),G++,W--;g(c[G],N)<0;)G++;for(;g(c[W],N)>0;)W--}g(c[u],N)===0?Uy(c,u,W):Uy(c,++W,h),W<=a&&(u=W+1),a<=W&&(h=W-1)}}function Uy(c,a,u){var h=c[a];c[a]=c[u],c[u]=h}function Mee(c,a){return c<a?-1:c>a?1:0}function uM(c,a){const u=c.length;if(u<=1)return[c];const h=[];let g,_;for(let w=0;w<u;w++){const T=jt(c[w]);T!==0&&(c[w].area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(g&&h.push(g),g=[c[w]]):g.push(c[w]))}if(g&&h.push(g),a>1)for(let w=0;w<h.length;w++)h[w].length<=a||(Aee(h[w],a,1,h[w].length-1,Pee),h[w]=h[w].slice(0,a));return h}function Pee(c,a){return a.area-c.area}function dM(c,a,u){const h=u.patternDependencies;let g=!1;for(const _ of a){const w=_.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const T=w.constantOr(null);T&&(g=!0,h[T]=!0)}return g}function fM(c,a,u,h,g){const _=g.patternDependencies;for(const w of a){const T=w.paint.get(`${c}-pattern`).value;if(T.kind!=="constant"){let I=T.evaluate({zoom:h},u,{},g.availableImages);I=I&&I.name?I.name:I,_[I]=!0,u.patterns[w.id]=I}}return u}class v1{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xt,this.indexArray=new Dn,this.indexArray2=new No,this.programConfigurations=new ph(a.layers,a.zoom),this.segments=new po,this.segments2=new po,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=a.projection}populate(a,u,h,g){this.hasPattern=dM("fill",this.layers,u);const _=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:T,id:I,index:L,sourceLayerIndex:N}of a){const G=this.layers[0]._featureFilter.needGeometry,W=bh(T,G);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),W,h))continue;const Z=_?_.evaluate(W,{},h,u.availableImages):void 0,ee={id:I,properties:T.properties,type:T.type,sourceLayerIndex:N,index:L,geometry:G?W.geometry:Tu(T,h,g),patterns:{},sortKey:Z};w.push(ee)}_&&w.sort((T,I)=>T.sortKey-I.sortKey);for(const T of w){const{geometry:I,index:L,sourceLayerIndex:N}=T;if(this.hasPattern){const G=fM("fill",this.layers,T,this.zoom,u);this.patternFeatures.push(G)}else this.addFeature(T,I,L,h,{},u.availableImages);u.featureIndex.insert(a[L].feature,I,L,N,this.index)}}update(a,u,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,h,g)}addFeatures(a,u,h,g,_){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,u,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,vee),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,h,g,_,w=[]){for(const T of uM(u,500)){let I=0;for(const ee of T)I+=ee.length;const L=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),N=L.vertexLength,G=[],W=[];for(const ee of T){if(ee.length===0)continue;ee!==T[0]&&W.push(G.length/2);const ie=this.segments2.prepareSegment(ee.length,this.layoutVertexArray,this.indexArray2),me=ie.vertexLength;this.layoutVertexArray.emplaceBack(ee[0].x,ee[0].y),this.indexArray2.emplaceBack(me+ee.length-1,me),G.push(ee[0].x),G.push(ee[0].y);for(let Pe=1;Pe<ee.length;Pe++)this.layoutVertexArray.emplaceBack(ee[Pe].x,ee[Pe].y),this.indexArray2.emplaceBack(me+Pe-1,me+Pe),G.push(ee[Pe].x),G.push(ee[Pe].y);ie.vertexLength+=ee.length,ie.primitiveLength+=ee.length}const Z=cM(G,W);for(let ee=0;ee<Z.length;ee+=3)this.indexArray.emplaceBack(N+Z[ee],N+Z[ee+1],N+Z[ee+2]);L.vertexLength+=I,L.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,_,w,g)}}En(v1,"FillBucket",{omit:["layers","patternFeatures"]});const Iee=new Be({"fill-sort-key":new ye(xt.layout_fill["fill-sort-key"])});var Ree={paint:new Be({"fill-antialias":new re(xt.paint_fill["fill-antialias"]),"fill-opacity":new ye(xt.paint_fill["fill-opacity"]),"fill-color":new ye(xt.paint_fill["fill-color"]),"fill-outline-color":new ye(xt.paint_fill["fill-outline-color"]),"fill-translate":new re(xt.paint_fill["fill-translate"]),"fill-translate-anchor":new re(xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ye(xt.paint_fill["fill-pattern"])}),layout:Iee};const Oee=Je([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Lee=Je([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Bee=Je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Dee}=Oee;var y1={},kee=J,Cz=bm;function bm(c,a,u,h,g){this.properties={},this.extent=u,this.type=0,this._pbf=c,this._geometry=-1,this._keys=h,this._values=g,c.readFields(Fee,this,a)}function Fee(c,a,u){c==1?a.id=u.readVarint():c==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var w=g._keys[h.readVarint()],T=g._values[h.readVarint()];g.properties[w]=T}}(u,a):c==3?a.type=u.readVarint():c==4&&(a._geometry=u.pos)}function zee(c){for(var a,u,h=0,g=0,_=c.length,w=_-1;g<_;w=g++)h+=((u=c[w]).x-(a=c[g]).x)*(a.y+u.y);return h}bm.types=["Unknown","Point","LineString","Polygon"],bm.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,u=c.readVarint()+c.pos,h=1,g=0,_=0,w=0,T=[];c.pos<u;){if(g<=0){var I=c.readVarint();h=7&I,g=I>>3}if(g--,h===1||h===2)_+=c.readSVarint(),w+=c.readSVarint(),h===1&&(a&&T.push(a),a=[]),a.push(new kee(_,w));else{if(h!==7)throw new Error("unknown command "+h);a&&a.push(a[0].clone())}}return a&&T.push(a),T},bm.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,u=1,h=0,g=0,_=0,w=1/0,T=-1/0,I=1/0,L=-1/0;c.pos<a;){if(h<=0){var N=c.readVarint();u=7&N,h=N>>3}if(h--,u===1||u===2)(g+=c.readSVarint())<w&&(w=g),g>T&&(T=g),(_+=c.readSVarint())<I&&(I=_),_>L&&(L=_);else if(u!==7)throw new Error("unknown command "+u)}return[w,I,T,L]},bm.prototype.toGeoJSON=function(c,a,u){var h,g,_=this.extent*Math.pow(2,u),w=this.extent*c,T=this.extent*a,I=this.loadGeometry(),L=bm.types[this.type];function N(Z){for(var ee=0;ee<Z.length;ee++){var ie=Z[ee];Z[ee]=[360*(ie.x+w)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+T)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(h=0;h<I.length;h++)G[h]=I[h][0];N(I=G);break;case 2:for(h=0;h<I.length;h++)N(I[h]);break;case 3:for(I=function(Z){var ee=Z.length;if(ee<=1)return[Z];for(var ie,me,Pe=[],je=0;je<ee;je++){var Ie=zee(Z[je]);Ie!==0&&(me===void 0&&(me=Ie<0),me===Ie<0?(ie&&Pe.push(ie),ie=[Z[je]]):ie.push(Z[je]))}return ie&&Pe.push(ie),Pe}(I),h=0;h<I.length;h++)for(g=0;g<I[h].length;g++)N(I[h][g])}I.length===1?I=I[0]:L="Multi"+L;var W={type:"Feature",geometry:{type:L,coordinates:I},properties:this.properties};return"id"in this&&(W.id=this.id),W};var Nee=Cz,Tz=Az;function Az(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields($ee,this,a),this.length=this._features.length}function $ee(c,a,u){c===15?a.version=u.readVarint():c===1?a.name=u.readString():c===5?a.extent=u.readVarint():c===2?a._features.push(u.pos):c===3?a._keys.push(u.readString()):c===4&&a._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var w=h.readVarint()>>3;g=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}return g}(u))}Az.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new Nee(this._pbf,a,this.extent,this._keys,this._values)};var jee=Tz;function Uee(c,a,u){if(c===3){var h=new jee(u,u.readVarint()+u.pos);h.length&&(a[h.name]=h)}}var hM=y1.VectorTile=function(c,a){this.layers=c.readFields(Uee,{},a)},_1=y1.VectorTileFeature=Cz;function b1(c,a,u,h){const g=[],_=h===0?(w,T,I,L,N,G)=>{w.push(new Q(G,I+(G-T)/(L-T)*(N-I)))}:(w,T,I,L,N,G)=>{w.push(new Q(T+(G-I)/(N-I)*(L-T),G))};for(const w of c){const T=[];for(const I of w){if(I.length<=2)continue;const L=[];for(let W=0;W<I.length-1;W++){const Z=I[W].x,ee=I[W].y,ie=I[W+1].x,me=I[W+1].y,Pe=h===0?Z:ee,je=h===0?ie:me;Pe<a?je>a&&_(L,Z,ee,ie,me,a):Pe>u?je<u&&_(L,Z,ee,ie,me,u):L.push(I[W]),je<a&&Pe>=a&&_(L,Z,ee,ie,me,a),je>u&&Pe<=u&&_(L,Z,ee,ie,me,u)}let N=I[I.length-1];const G=h===0?N.x:N.y;G>=a&&G<=u&&L.push(N),L.length&&(N=L[L.length-1],L[0].x===N.x&&L[0].y===N.y||L.push(L[0]),T.push(L))}T.length&&g.push(T)}return g}y1.VectorTileLayer=Tz;const Vee=_1.types,Gee=Math.pow(2,13);function Vy(c,a,u,h,g,_,w,T){c.emplaceBack((a<<1)+w,(u<<1)+_,(Math.floor(h*Gee)<<1)+g,Math.round(T))}function Gy(c,a,u){c.emplaceBack(a.x,a.y,a.z,u[0]*16384,u[1]*16384,u[2]*16384)}class Mz{constructor(){this.acc=new Q(0,0),this.polyCount=[]}startRing(a){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Q(a.x,a.y),this.max=new Q(a.x,a.y))}append(a,u){this.currentPolyCount.edges++,this.acc._add(a);const h=this.min,g=this.max;a.x<h.x?h.x=a.x:a.x>g.x&&(g.x=a.x),a.y<h.y?h.y=a.y:a.y>g.y&&(g.y=a.y),((a.x===0||a.x===Gn)&&a.x===u.x)!=((a.y===0||a.y===Gn)&&a.y===u.y)&&this.processBorderOverlap(a,u),u.x<0!=a.x<0&&this.addBorderIntersection(0,Br(u.y,a.y,(0-u.x)/(a.x-u.x))),u.x>Gn!=a.x>Gn&&this.addBorderIntersection(1,Br(u.y,a.y,(Gn-u.x)/(a.x-u.x))),u.y<0!=a.y<0&&this.addBorderIntersection(2,Br(u.x,a.x,(0-u.y)/(a.y-u.y))),u.y>Gn!=a.y>Gn&&this.addBorderIntersection(3,Br(u.x,a.x,(Gn-u.y)/(a.y-u.y)))}addBorderIntersection(a,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[a];u<h[0]&&(h[0]=u),u>h[1]&&(h[1]=u)}processBorderOverlap(a,u){if(a.x===u.x){if(a.y===u.y)return;const h=a.x===0?0:1;this.addBorderIntersection(h,u.y),this.addBorderIntersection(h,a.y)}else{const h=a.y===0?2:3;this.addBorderIntersection(h,u.x),this.addBorderIntersection(h,a.x)}}centroid(){const a=this.polyCount.reduce((u,h)=>u+h.edges,0);return a!==0?this.acc.div(a)._round():new Q(0,0)}span(){return new Q(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((a,u)=>a+ +(u[0]!==Number.MAX_VALUE),0)}}class Hy{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.layoutVertexArray=new Lt,this.centroidVertexArray=new Fl,this.indexArray=new Dn,this.programConfigurations=new ph(a.layers,a.zoom),this.segments=new po,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=a.enableTerrain}populate(a,u,h,g){this.features=[],this.hasPattern=dM("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(_){const w=Math.exp(Math.PI*(1-_.y/(1<<_.z)*2));return 80150034*w/(w*w+1)/Gn/(1<<_.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:_,id:w,index:T,sourceLayerIndex:I}of a){const L=this.layers[0]._featureFilter.needGeometry,N=bh(_,L);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),N,h))continue;const G={id:w,sourceLayerIndex:I,index:T,geometry:L?N.geometry:Tu(_,h,g),properties:_.properties,type:_.type,patterns:{}},W=this.layoutVertexArray.length;this.hasPattern?this.features.push(fM("fill-extrusion",this.layers,G,this.zoom,u)):this.addFeature(G,G.geometry,T,h,{},u.availableImages,g),u.featureIndex.insert(_,G.geometry,T,I,this.index,W)}this.sortBorders()}addFeatures(a,u,h,g,_){for(const w of this.features){const{geometry:T}=w;this.addFeature(w,T,w.index,u,h,g,_)}this.sortBorders()}update(a,u,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Dee),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,Bee.members,!0))),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Lee.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,h,g,_,w,T){const I=[new Q(0,0),new Q(Gn,Gn)],L=T.projection,N=L.name==="globe",G=this.enableTerrain&&!N?new Mz:null,W=Vee[a.type]==="Polygon";N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Yt);const Z=uM(u,500);for(let Pe=Z.length-1;Pe>=0;Pe--){const je=Z[Pe];(je.length===0||(ee=je[0]).every(Ie=>Ie.x<=0)||ee.every(Ie=>Ie.x>=Gn)||ee.every(Ie=>Ie.y<=0)||ee.every(Ie=>Ie.y>=Gn))&&Z.splice(Pe,1)}var ee;let ie;if(N)ie=Dz(Z,I,g);else{ie=[];for(const Pe of Z)ie.push({polygon:Pe,bounds:I})}const me=W?this.edgeRadius:0;for(const{polygon:Pe,bounds:je}of ie){let Ie=0,$e=0;for(const Ve of Pe)W&&!Ve[0].equals(Ve[Ve.length-1])&&Ve.push(Ve[0]),$e+=W?Ve.length-1:Ve.length;const Ge=this.segments.prepareSegment((W?5:4)*$e,this.layoutVertexArray,this.indexArray);if(W){const Ve=[],gt=[];Ie=Ge.vertexLength;for(const Pt of Pe){let qt,_t;Pt.length&&Pt!==Pe[0]&&gt.push(Ve.length/2),qt=Pt[1].sub(Pt[0])._perp()._unit();for(let Dt=1;Dt<Pt.length;Dt++){const kt=Pt[Dt],Ut=Pt[Dt===Pt.length-1?1:Dt+1];let{x:en,y:Mt}=kt;if(me){_t=Ut.sub(kt)._perp()._unit();const dn=qt.add(_t)._unit(),An=me*Math.min(4,1/(qt.x*dn.x+qt.y*dn.y));en+=An*dn.x,Mt+=An*dn.y,qt=_t}Vy(this.layoutVertexArray,en,Mt,0,0,1,1,0),Ge.vertexLength++,Ve.push(kt.x,kt.y),N&&Gy(this.layoutVertexExtArray,L.projectTilePoint(en,Mt,g),L.upVector(g,en,Mt))}}const dt=cM(Ve,gt);for(let Pt=0;Pt<dt.length;Pt+=3)this.indexArray.emplaceBack(Ie+dt[Pt],Ie+dt[Pt+2],Ie+dt[Pt+1]),Ge.primitiveLength++}for(const Ve of Pe){G&&Ve.length&&G.startRing(Ve[0]);let gt,dt,Pt,qt=Ve.length>4&&Oz(Ve[Ve.length-2],Ve[0],Ve[1]),_t=me?Hee(Ve[Ve.length-2],Ve[0],Ve[1],me):0;dt=Ve[1].sub(Ve[0])._perp()._unit();let Dt=!0;for(let kt=1,Ut=0;kt<Ve.length;kt++){let en=Ve[kt-1],Mt=Ve[kt];const dn=Ve[kt===Ve.length-1?1:kt+1];if(G&&W&&G.currentPolyCount.top++,Rz(Mt,en,je)){me&&(dt=dn.sub(Mt)._perp()._unit(),Dt=!Dt);continue}G&&G.append(Mt,en);const An=Mt.sub(en)._perp(),mn=An.x/(Math.abs(An.x)+Math.abs(An.y)),hr=An.y>0?1:0,tn=en.dist(Mt);if(Ut+tn>32768&&(Ut=0),me){Pt=dn.sub(Mt)._perp()._unit();let mr=Iz(en,Mt,dn,Pz(dt,Pt),me);isNaN(mr)&&(mr=0);const Zn=Mt.sub(en)._unit();en=en.add(Zn.mult(_t))._round(),Mt=Mt.add(Zn.mult(-mr))._round(),_t=mr,dt=Pt}const Nn=Ge.vertexLength,pr=Ve.length>4&&Oz(en,Mt,dn);let $r=Lz(Ut,qt,Dt);if(Vy(this.layoutVertexArray,en.x,en.y,mn,hr,0,0,$r),Vy(this.layoutVertexArray,en.x,en.y,mn,hr,0,1,$r),Ut+=tn,$r=Lz(Ut,pr,!Dt),qt=pr,Vy(this.layoutVertexArray,Mt.x,Mt.y,mn,hr,0,0,$r),Vy(this.layoutVertexArray,Mt.x,Mt.y,mn,hr,0,1,$r),Ge.vertexLength+=4,this.indexArray.emplaceBack(Nn+0,Nn+1,Nn+2),this.indexArray.emplaceBack(Nn+1,Nn+3,Nn+2),Ge.primitiveLength+=2,me){const mr=Ie+(kt===1?Ve.length-2:kt-2),Zn=kt===1?Ie:mr+1;if(this.indexArray.emplaceBack(Nn+1,mr,Nn+3),this.indexArray.emplaceBack(mr,Zn,Nn+3),Ge.primitiveLength+=2,gt===void 0&&(gt=Nn),!Rz(dn,Ve[kt],je)){const Ci=kt===Ve.length-1?gt:Ge.vertexLength;this.indexArray.emplaceBack(Nn+2,Nn+3,Ci),this.indexArray.emplaceBack(Nn+3,Ci+1,Ci),this.indexArray.emplaceBack(Nn+3,Zn,Ci+1),Ge.primitiveLength+=3}Dt=!Dt}if(N){const mr=this.layoutVertexExtArray,Zn=L.projectTilePoint(en.x,en.y,g),Ci=L.projectTilePoint(Mt.x,Mt.y,g),vr=L.upVector(g,en.x,en.y),yr=L.upVector(g,Mt.x,Mt.y);Gy(mr,Zn,vr),Gy(mr,Zn,vr),Gy(mr,Ci,yr),Gy(mr,Ci,yr)}}W&&(Ie+=Ve.length-1)}}if(G&&G.polyCount.length>0){if(G.borders){G.vertexArrayOffset=this.centroidVertexArray.length;const Pe=G.borders,je=this.featuresOnBorder.push(G)-1;for(let Ie=0;Ie<4;Ie++)Pe[Ie][0]!==Number.MAX_VALUE&&this.borders[Ie].push(je)}this.encodeCentroid(G.borders?void 0:G.centroid(),G)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,_,w,g)}sortBorders(){for(let a=0;a<4;a++)this.borders[a].sort((u,h)=>this.featuresOnBorder[u].borders[a][0]-this.featuresOnBorder[h].borders[a][0])}encodeCentroid(a,u,h=!0){let g,_;if(a)if(a.y!==0){const T=u.span()._mult(this.tileToMeter);g=(Math.max(a.x,1)<<3)+Math.min(7,Math.round(T.x/10)),_=(Math.max(a.y,1)<<3)+Math.min(7,Math.round(T.y/10))}else g=Math.ceil(7*(a.x+450)),_=0;else g=0,_=+h;let w=h?this.centroidVertexArray.length:u.vertexArrayOffset;for(const T of u.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*T.edges+T.top);for(let I=0;I<T.top;I++)this.centroidVertexArray.emplace(w++,g,_);for(let I=0;I<2*T.edges;I++)this.centroidVertexArray.emplace(w++,0,_),this.centroidVertexArray.emplace(w++,g,_)}}}function Pz(c,a){const u=c.add(a)._unit();return c.x*u.x+c.y*u.y}function Hee(c,a,u,h){const g=a.sub(c)._perp()._unit(),_=u.sub(a)._perp()._unit();return Iz(c,a,u,Pz(g,_),h)}function Iz(c,a,u,h,g){const _=Math.sqrt(1-h*h);return Math.min(c.dist(a)/3,a.dist(u)/3,g*_/h)}function Rz(c,a,u){return c.x<u[0].x&&a.x<u[0].x||c.x>u[1].x&&a.x>u[1].x||c.y<u[0].y&&a.y<u[0].y||c.y>u[1].y&&a.y>u[1].y}function Oz(c,a,u){if(c.x<0||c.x>=Gn||a.x<0||a.x>=Gn||u.x<0||u.x>=Gn)return!1;const h=u.sub(a),g=h.perp(),_=c.sub(a);return(h.x*_.x+h.y*_.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(_.x*_.x+_.y*_.y))>-.866&&g.x*_.x+g.y*_.y<0}function Lz(c,a,u){const h=a?2|c:-3&c;return u?1|h:-2&h}function Bz(){const c=Math.PI/32,a=Math.tan(c),u=zy;return u*Math.sqrt(1+2*a*a)-u}function Dz(c,a,u){const h=1<<u.z,g=Ca(u.x/h),_=Ca((u.x+1)/h),w=ns(u.y/h),T=ns((u.y+1)/h);return function(I,L,N,G,W=0,Z){const ee=[];if(!I.length||!N||!G)return ee;const ie=(Ve,gt)=>{for(const dt of Ve)ee.push({polygon:dt,bounds:gt})},me=Math.ceil(Math.log2(N)),Pe=Math.ceil(Math.log2(G)),je=me-Pe,Ie=[];for(let Ve=0;Ve<Math.abs(je);Ve++)Ie.push(je>0?0:1);for(let Ve=0;Ve<Math.min(me,Pe);Ve++)Ie.push(0),Ie.push(1);let $e=I;if($e=b1($e,L[0].y-W,L[1].y+W,1),$e=b1($e,L[0].x-W,L[1].x+W,0),!$e.length)return ee;const Ge=[];for(Ie.length?Ge.push({polygons:$e,bounds:L,depth:0}):ie($e,L);Ge.length;){const Ve=Ge.pop(),gt=Ve.depth,dt=Ie[gt],Pt=Ve.bounds[0],qt=Ve.bounds[1],_t=dt===0?Pt.x:Pt.y,Dt=dt===0?qt.x:qt.y,kt=Z?Z(dt,_t,Dt):.5*(_t+Dt),Ut=b1(Ve.polygons,_t-W,kt+W,dt),en=b1(Ve.polygons,kt-W,Dt+W,dt);if(Ut.length){const Mt=[Pt,new Q(dt===0?kt:qt.x,dt===1?kt:qt.y)];Ie.length>gt+1?Ge.push({polygons:Ut,bounds:Mt,depth:gt+1}):ie(Ut,Mt)}if(en.length){const Mt=[new Q(dt===0?kt:Pt.x,dt===1?kt:Pt.y),qt];Ie.length>gt+1?Ge.push({polygons:en,bounds:Mt,depth:gt+1}):ie(en,Mt)}}return ee}(c,a,Math.ceil((_-g)/11.25),Math.ceil((w-T)/11.25),1,(I,L,N)=>{if(I===0)return .5*(L+N);{const G=ns((u.y+L/Gn)/h);return(kc(.5*(ns((u.y+N/Gn)/h)+G))*h-u.y)*Gn}})}En(Hy,"FillExtrusionBucket",{omit:["layers","features"]}),En(Mz,"PartMetadata");const Wee=new Be({"fill-extrusion-edge-radius":new re(xt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Xee={paint:new Be({"fill-extrusion-opacity":new re(xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ye(xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new re(xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new re(xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ye(xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ye(xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ye(xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new re(xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new re(xt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new re(xt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new re(xt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Wee};function kz(c,a,u){var h=2*Math.PI*6378137/256/Math.pow(2,u);return[c*h-2*Math.PI*6378137/2,a*h-2*Math.PI*6378137/2]}class x1{constructor(a,u,h){this.z=a,this.x=u,this.y=h,this.key=Wy(0,a,a,u,h)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u){const h=function(_,w,T){var I=kz(256*_,256*(w=Math.pow(2,T)-w-1),T),L=kz(256*(_+1),256*(w+1),T);return I[0]+","+I[1]+","+L[0]+","+L[1]}(this.x,this.y,this.z),g=function(_,w,T){let I,L="";for(let N=_;N>0;N--)I=1<<N-1,L+=(w&I?1:0)+(T&I?2:0);return L}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fz{constructor(a,u){this.wrap=a,this.canonical=u,this.key=Wy(a,u.z,u.z,u.x,u.y)}}class As{constructor(a,u,h,g,_){this.overscaledZ=a,this.wrap=u,this.canonical=new x1(h,+g,+_),this.key=u===0&&a===h?this.canonical.key:Wy(u,a,h,g,_)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const u=this.canonical.z-a;return a>this.canonical.z?new As(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new As(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u=!0){if(this.overscaledZ===a&&u)return this.key;if(a>this.canonical.z)return Wy(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-a;return Wy(this.wrap*+u,a,a,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new As(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new As(u,this.wrap,u,h,g),new As(u,this.wrap,u,h+1,g),new As(u,this.wrap,u,h,g+1),new As(u,this.wrap,u,h+1,g+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new As(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new As(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fz(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wy(c,a,u,h,g){const _=1<<Math.min(u,22);let w=_*(g%_)+h%_;return c&&u<22&&(w+=_*_*((c<0?-2*c-1:2*c)%(1<<2*(22-u)))),16*(32*w+u)+(a-u)}En(x1,"CanonicalTileID"),En(As,"OverscaledTileID",{omit:["projMatrix"]});class xm extends Q{constructor(a,u,h){super(a,u),this.z=h}}function Xy(c,a){return c.x*a.x+c.y*a.y}function zz(c,a){if(c.length===1){let u=0;const h=a[u++];let g;for(;!g||h.equals(g);)if(g=a[u++],!g)return 1/0;for(;u<a.length;u++){const _=a[u],w=c[0],T=g.sub(h),I=_.sub(h),L=w.sub(h),N=Xy(T,T),G=Xy(T,I),W=Xy(I,I),Z=Xy(L,T),ee=Xy(L,I),ie=N*W-G*G,me=(W*Z-G*ee)/ie,Pe=(N*ee-G*Z)/ie,je=h.z*(1-me-Pe)+g.z*me+_.z*Pe;if(isFinite(je))return je}return 1/0}{let u=1/0;for(const h of a)u=Math.min(u,h.z);return u}}function Nz(c,a,u,h,g,_,w,T){const I=w*g.getElevationAt(c,a,!0,!0),L=_[0]!==0,N=L?_[1]===0?w*(_[0]/7-450):w*function(G,W,Z){const ee=Math.floor(W[0]/8),ie=Math.floor(W[1]/8),me=10*(W[0]-8*ee),Pe=10*(W[1]-8*ie),je=G.getElevationAt(ee,ie,!0,!0),Ie=G.getMeterToDEM(Z),$e=Math.floor(.5*(me*Ie-1)),Ge=Math.floor(.5*(Pe*Ie-1)),Ve=G.tileCoordToPixel(ee,ie),gt=2*$e+1,dt=2*Ge+1,Pt=function(en,Mt,dn,An,mn){return[en.getElevationAtPixel(Mt,dn,!0),en.getElevationAtPixel(Mt+mn,dn,!0),en.getElevationAtPixel(Mt,dn+mn,!0),en.getElevationAtPixel(Mt+An,dn+mn,!0)]}(G,Ve.x-$e,Ve.y-Ge,gt,dt),qt=Math.abs(Pt[0]-Pt[1]),_t=Math.abs(Pt[2]-Pt[3]),Dt=Math.abs(Pt[0]-Pt[2])+Math.abs(Pt[1]-Pt[3]),kt=Math.min(.25,.5*Ie*(qt+_t)/gt),Ut=Math.min(.25,.5*Ie*Dt/dt);return je+Math.max(kt*me,Ut*Pe)}(g,_,T):I;return{base:I+(u===0)?-1:u,top:L?Math.max(N+h,I+u+2):I+h}}const qee=Je([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Yee}=qee,Zee=Je([{name:"a_packed",components:4,type:"Float32"}]),{members:Kee}=Zee,Jee=_1.types,Qee=Math.cos(Math.PI/180*37.5);class w1{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(u=>u.id),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new yt,this.layoutVertexArray2=new Wt,this.indexArray=new Dn,this.programConfigurations=new ph(a.layers,a.zoom),this.segments=new po,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(a,u,h,g){this.hasPattern=dM("line",this.layers,u);const _=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:N,id:G,index:W,sourceLayerIndex:Z}of a){const ee=this.layers[0]._featureFilter.needGeometry,ie=bh(N,ee);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),ie,h))continue;const me=_?_.evaluate(ie,{},h):void 0,Pe={id:G,properties:N.properties,type:N.type,sourceLayerIndex:Z,index:W,geometry:ee?ie.geometry:Tu(N,h,g),patterns:{},sortKey:me};w.push(Pe)}_&&w.sort((N,G)=>N.sortKey-G.sortKey);const{lineAtlas:T,featureIndex:I}=u,L=this.addConstantDashes(T);for(const N of w){const{geometry:G,index:W,sourceLayerIndex:Z}=N;if(L&&this.addFeatureDashes(N,T),this.hasPattern){const ee=fM("line",this.layers,N,this.zoom,u);this.patternFeatures.push(ee)}else this.addFeature(N,G,W,h,T.positions,u.availableImages);I.insert(a[W].feature,G,W,Z,this.index)}}addConstantDashes(a){let u=!1;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,_=h.layout.get("line-cap").value;if(g.kind!=="constant"||_.kind!=="constant")u=!0;else{const w=_.value,T=g.value;if(!T)continue;a.addDash(T,w)}}return u}addFeatureDashes(a,u){const h=this.zoom;for(const g of this.layers){const _=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(_.kind==="constant"&&w.kind==="constant")continue;let T,I;if(_.kind==="constant"){if(T=_.value,!T)continue}else T=_.evaluate({zoom:h},a);I=w.kind==="constant"?w.value:w.evaluate({zoom:h},a),u.addDash(T,I),a.patterns[g.id]=u.getKey(T,I)}}update(a,u,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,h,g)}addFeatures(a,u,h,g,_){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,u,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Kee)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Yee),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,h,g,_,w){const T=this.layers[0].layout,I=T.get("line-join").evaluate(a,{}),L=T.get("line-cap").evaluate(a,{}),N=T.get("line-miter-limit"),G=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const W of u)this.addLine(W,a,I,L,N,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,_,w,g)}addLine(a,u,h,g,_,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<a.length-1;Pe++)this.totalDistance+=a[Pe].dist(a[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=Jee[u.type]==="Polygon";let I=a.length;for(;I>=2&&a[I-1].equals(a[I-2]);)I--;let L=0;for(;L<I-1&&a[L].equals(a[L+1]);)L++;if(I<(T?3:2))return;h==="bevel"&&(_=1.05);const N=this.overscaling<=16?15*Gn/(512*this.overscaling):0,G=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let W,Z,ee,ie,me;this.e1=this.e2=-1,T&&(W=a[I-2],me=a[L].sub(W)._unit()._perp());for(let Pe=L;Pe<I;Pe++){if(ee=Pe===I-1?T?a[L+1]:void 0:a[Pe+1],ee&&a[Pe].equals(ee))continue;me&&(ie=me),W&&(Z=W),W=a[Pe],me=ee?ee.sub(W)._unit()._perp():ie,ie=ie||me;let je=ie.add(me);je.x===0&&je.y===0||je._unit();const Ie=ie.x*me.x+ie.y*me.y,$e=je.x*me.x+je.y*me.y,Ge=$e!==0?1/$e:1/0,Ve=2*Math.sqrt(2-2*$e),gt=$e<Qee&&Z&&ee,dt=ie.x*me.y-ie.y*me.x>0;if(gt&&Pe>L){const _t=W.dist(Z);if(_t>2*N){const Dt=W.sub(W.sub(Z)._mult(N/_t)._round());this.updateDistance(Z,Dt),this.addCurrentVertex(Dt,ie,0,0,G),Z=Dt}}const Pt=Z&&ee;let qt=Pt?h:T?"butt":g;if(Pt&&qt==="round"&&(Ge<w?qt="miter":Ge<=2&&(qt="fakeround")),qt==="miter"&&Ge>_&&(qt="bevel"),qt==="bevel"&&(Ge>2&&(qt="flipbevel"),Ge<_&&(qt="miter")),Z&&this.updateDistance(Z,W),qt==="miter")je._mult(Ge),this.addCurrentVertex(W,je,0,0,G);else if(qt==="flipbevel"){if(Ge>100)je=me.mult(-1);else{const _t=Ge*ie.add(me).mag()/ie.sub(me).mag();je._perp()._mult(_t*(dt?-1:1))}this.addCurrentVertex(W,je,0,0,G),this.addCurrentVertex(W,je.mult(-1),0,0,G)}else if(qt==="bevel"||qt==="fakeround"){const _t=-Math.sqrt(Ge*Ge-1),Dt=dt?_t:0,kt=dt?0:_t;if(Z&&this.addCurrentVertex(W,ie,Dt,kt,G),qt==="fakeround"){const Ut=Math.round(180*Ve/Math.PI/20);for(let en=1;en<Ut;en++){let Mt=en/Ut;if(Mt!==.5){const An=Mt-.5;Mt+=Mt*An*(Mt-1)*((1.0904+Ie*(Ie*(3.55645-1.43519*Ie)-3.2452))*An*An+(.848013+Ie*(.215638*Ie-1.06021)))}const dn=me.sub(ie)._mult(Mt)._add(ie)._unit()._mult(dt?-1:1);this.addHalfVertex(W,dn.x,dn.y,!1,dt,0,G)}}ee&&this.addCurrentVertex(W,me,-Dt,-kt,G)}else if(qt==="butt")this.addCurrentVertex(W,je,0,0,G);else if(qt==="square"){const _t=Z?1:-1;Z||this.addCurrentVertex(W,je,_t,_t,G),this.addCurrentVertex(W,je,0,0,G),Z&&this.addCurrentVertex(W,je,_t,_t,G)}else qt==="round"&&(Z&&(this.addCurrentVertex(W,ie,0,0,G),this.addCurrentVertex(W,ie,1,1,G,!0)),ee&&(this.addCurrentVertex(W,me,-1,-1,G,!0),this.addCurrentVertex(W,me,0,0,G)));if(gt&&Pe<I-1){const _t=W.dist(ee);if(_t>2*N){const Dt=W.add(ee.sub(W)._mult(N/_t)._round());this.updateDistance(W,Dt),this.addCurrentVertex(Dt,me,0,0,G),W=Dt}}}}addCurrentVertex(a,u,h,g,_,w=!1){const T=u.y*g-u.x,I=-u.y-u.x*g;this.addHalfVertex(a,u.x+u.y*h,u.y-u.x*h,w,!1,h,_),this.addHalfVertex(a,T,I,w,!0,-g,_)}addHalfVertex({x:a,y:u},h,g,_,w,T,I){this.layoutVertexArray.emplaceBack((a<<1)+(_?1:0),(u<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const L=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),I.primitiveLength++),w?this.e2=L:this.e1=L}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}En(w1,"LineBucket",{omit:["layers","patternFeatures"]});const ete=new Be({"line-cap":new ye(xt.layout_line["line-cap"]),"line-join":new ye(xt.layout_line["line-join"]),"line-miter-limit":new re(xt.layout_line["line-miter-limit"]),"line-round-limit":new re(xt.layout_line["line-round-limit"]),"line-sort-key":new ye(xt.layout_line["line-sort-key"])});var $z={paint:new Be({"line-opacity":new ye(xt.paint_line["line-opacity"]),"line-color":new ye(xt.paint_line["line-color"]),"line-translate":new re(xt.paint_line["line-translate"]),"line-translate-anchor":new re(xt.paint_line["line-translate-anchor"]),"line-width":new ye(xt.paint_line["line-width"]),"line-gap-width":new ye(xt.paint_line["line-gap-width"]),"line-offset":new ye(xt.paint_line["line-offset"]),"line-blur":new ye(xt.paint_line["line-blur"]),"line-dasharray":new ye(xt.paint_line["line-dasharray"]),"line-pattern":new ye(xt.paint_line["line-pattern"]),"line-gradient":new Le(xt.paint_line["line-gradient"]),"line-trim-offset":new re(xt.paint_line["line-trim-offset"])}),layout:ete};const jz=new class extends ye{possiblyEvaluate(c,a){return a=new V(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(c,a)}evaluate(c,a,u,h){return a=Ne({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(c,a,u,h)}}($z.paint.properties["line-width"].specification);function Uz(c,a){return a>0?a+2*c:c}jz.useIntegerZoom=!0;const tte=Je([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nte=Je([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),rte=Je([{name:"a_projected_pos",components:4,type:"Float32"}],4);Je([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ite=Je([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ote=Je([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vz=Je([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ste=Je([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Je([{name:"triangle",components:3,type:"Uint16"}]),Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Je([{type:"Float32",name:"offsetX"}]),Je([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Wo=24;const Vl=128;function pM(c,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new V(c+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=u;let _=0;for(;_<h.length&&h[_]<=c;)_++;_=Math.max(0,_-1);let w=_;for(;w<h.length&&h[w]<c+1;)w++;w=Math.min(h.length-1,w);const T=h[_],I=h[w];return u.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:I,minSize:u.evaluate(new V(T)),maxSize:u.evaluate(new V(I)),interpolationType:g}}}function S1(c,{uSize:a,uSizeT:u},{lowerSize:h,upperSize:g}){return c.kind==="source"?h/Vl:c.kind==="composite"?Br(h/Vl,g/Vl,u):a}function wm(c,a){let u=0,h=0;if(c.kind==="constant")h=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:w}=c,T=g?xe(tl.interpolationFactor(g,a,_,w),0,1):0;c.kind==="camera"?h=Br(c.minSize,c.maxSize,T):u=T}return{uSizeT:u,uSize:h}}var ate=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Vl,evaluateSizeForFeature:S1,evaluateSizeForZoom:wm,getSizeData:pM});function lte(c,a,u){return c.sections.forEach(h=>{h.text=function(g,_,w){const T=_.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),z.applyArabicShaping&&(g=z.applyArabicShaping(g)),g}(h.text,a,u)}),c}const qy={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function cte(c){return c==="︶"||c==="﹈"||c==="︸"||c==="﹄"||c==="﹂"||c==="︾"||c==="︼"||c==="︺"||c==="︘"||c==="﹀"||c==="︐"||c==="︓"||c==="︔"||c==="｀"||c==="￣"||c==="︑"||c==="︒"}function ute(c){return c==="︵"||c==="﹇"||c==="︷"||c==="﹃"||c==="﹁"||c==="︽"||c==="︻"||c==="︹"||c==="︗"||c==="︿"}var Gz=bi,Hz=function(c,a,u,h,g){var _,w,T=8*g-h-1,I=(1<<T)-1,L=I>>1,N=-7,G=u?g-1:0,W=u?-1:1,Z=c[a+G];for(G+=W,_=Z&(1<<-N)-1,Z>>=-N,N+=T;N>0;_=256*_+c[a+G],G+=W,N-=8);for(w=_&(1<<-N)-1,_>>=-N,N+=h;N>0;w=256*w+c[a+G],G+=W,N-=8);if(_===0)_=1-L;else{if(_===I)return w?NaN:1/0*(Z?-1:1);w+=Math.pow(2,h),_-=L}return(Z?-1:1)*w*Math.pow(2,_-h)},Wz=function(c,a,u,h,g,_){var w,T,I,L=8*_-g-1,N=(1<<L)-1,G=N>>1,W=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=h?0:_-1,ee=h?1:-1,ie=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(T=isNaN(a)?1:0,w=N):(w=Math.floor(Math.log(a)/Math.LN2),a*(I=Math.pow(2,-w))<1&&(w--,I*=2),(a+=w+G>=1?W/I:W*Math.pow(2,1-G))*I>=2&&(w++,I/=2),w+G>=N?(T=0,w=N):w+G>=1?(T=(a*I-1)*Math.pow(2,g),w+=G):(T=a*Math.pow(2,G-1)*Math.pow(2,g),w=0));g>=8;c[u+Z]=255&T,Z+=ee,T/=256,g-=8);for(w=w<<g|T,L+=g;L>0;c[u+Z]=255&w,Z+=ee,w/=256,L-=8);c[u+Z-ee]|=128*ie};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function bi(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var mM=4294967296,Xz=1/mM,qz=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Mu(c){return c.type===bi.Bytes?c.readVarint()+c.pos:c.pos+1}function Sm(c,a,u){return u?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function Yz(c,a,u){var h=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(h);for(var g=u.pos-1;g>=c;g--)u.buf[g+h]=u.buf[g]}function dte(c,a){for(var u=0;u<c.length;u++)a.writeVarint(c[u])}function fte(c,a){for(var u=0;u<c.length;u++)a.writeSVarint(c[u])}function hte(c,a){for(var u=0;u<c.length;u++)a.writeFloat(c[u])}function pte(c,a){for(var u=0;u<c.length;u++)a.writeDouble(c[u])}function mte(c,a){for(var u=0;u<c.length;u++)a.writeBoolean(c[u])}function gte(c,a){for(var u=0;u<c.length;u++)a.writeFixed32(c[u])}function vte(c,a){for(var u=0;u<c.length;u++)a.writeSFixed32(c[u])}function yte(c,a){for(var u=0;u<c.length;u++)a.writeFixed64(c[u])}function _te(c,a){for(var u=0;u<c.length;u++)a.writeSFixed64(c[u])}function E1(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function Em(c,a,u){c[u]=a,c[u+1]=a>>>8,c[u+2]=a>>>16,c[u+3]=a>>>24}function Zz(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}bi.prototype={destroy:function(){this.buf=null},readFields:function(c,a,u){for(u=u||this.length;this.pos<u;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,c(g,a,this),this.pos===_&&this.skip(h)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=E1(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Zz(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=E1(this.buf,this.pos)+E1(this.buf,this.pos+4)*mM;return this.pos+=8,c},readSFixed64:function(){var c=E1(this.buf,this.pos)+Zz(this.buf,this.pos+4)*mM;return this.pos+=8,c},readFloat:function(){var c=Hz(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Hz(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,u,h=this.buf;return a=127&(u=h[this.pos++]),u<128?a:(a|=(127&(u=h[this.pos++]))<<7,u<128?a:(a|=(127&(u=h[this.pos++]))<<14,u<128?a:(a|=(127&(u=h[this.pos++]))<<21,u<128?a:function(g,_,w){var T,I,L=w.buf;if(T=(112&(I=L[w.pos++]))>>4,I<128||(T|=(127&(I=L[w.pos++]))<<3,I<128)||(T|=(127&(I=L[w.pos++]))<<10,I<128)||(T|=(127&(I=L[w.pos++]))<<17,I<128)||(T|=(127&(I=L[w.pos++]))<<24,I<128)||(T|=(1&(I=L[w.pos++]))<<31,I<128))return Sm(g,T,_);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(u=h[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&qz?function(u,h,g){return qz.decode(u.subarray(h,g))}(this.buf,a,c):function(u,h,g){for(var _="",w=h;w<g;){var T,I,L,N=u[w],G=null,W=N>239?4:N>223?3:N>191?2:1;if(w+W>g)break;W===1?N<128&&(G=N):W===2?(192&(T=u[w+1]))==128&&(G=(31&N)<<6|63&T)<=127&&(G=null):W===3?(I=u[w+2],(192&(T=u[w+1]))==128&&(192&I)==128&&((G=(15&N)<<12|(63&T)<<6|63&I)<=2047||G>=55296&&G<=57343)&&(G=null)):W===4&&(I=u[w+2],L=u[w+3],(192&(T=u[w+1]))==128&&(192&I)==128&&(192&L)==128&&((G=(15&N)<<18|(63&T)<<12|(63&I)<<6|63&L)<=65535||G>=1114112)&&(G=null)),G===null?(G=65533,W=1):G>65535&&(G-=65536,_+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),_+=String.fromCharCode(G),w+=W}return _}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==bi.Bytes)return c.push(this.readVarint(a));var u=Mu(this);for(c=c||[];this.pos<u;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==bi.Bytes)return c.push(this.readSVarint());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==bi.Bytes)return c.push(this.readBoolean());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==bi.Bytes)return c.push(this.readFloat());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==bi.Bytes)return c.push(this.readDouble());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==bi.Bytes)return c.push(this.readFixed32());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==bi.Bytes)return c.push(this.readSFixed32());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==bi.Bytes)return c.push(this.readFixed64());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==bi.Bytes)return c.push(this.readSFixed64());var a=Mu(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===bi.Varint)for(;this.buf[this.pos++]>127;);else if(a===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(a===bi.Fixed32)this.pos+=4;else{if(a!==bi.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var u=new Uint8Array(a);u.set(this.buf),this.buf=u,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Em(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Em(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Em(this.buf,-1&c,this.pos),Em(this.buf,Math.floor(c*Xz),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Em(this.buf,-1&c,this.pos),Em(this.buf,Math.floor(c*Xz),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,u){var h,g;if(a>=0?(h=a%4294967296|0,g=a/4294967296|0):(g=~(-a/4294967296),4294967295^(h=~(-a%4294967296))?h=h+1|0:(h=0,g=g+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(_,w,T){T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,T.buf[T.pos]=127&(_>>>=7)}(h,0,u),function(_,w){var T=(7&_)<<4;w.buf[w.pos++]|=T|((_>>>=3)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_)))))}(g,u)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(h,g,_){for(var w,T,I=0;I<g.length;I++){if((w=g.charCodeAt(I))>55295&&w<57344){if(!T){w>56319||I+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):T=w;continue}if(w<56320){h[_++]=239,h[_++]=191,h[_++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(h[_++]=239,h[_++]=191,h[_++]=189,T=null);w<128?h[_++]=w:(w<2048?h[_++]=w>>6|192:(w<65536?h[_++]=w>>12|224:(h[_++]=w>>18|240,h[_++]=w>>12&63|128),h[_++]=w>>6&63|128),h[_++]=63&w|128)}return _}(this.buf,c,this.pos);var u=this.pos-a;u>=128&&Yz(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeFloat:function(c){this.realloc(4),Wz(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Wz(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var u=0;u<a;u++)this.buf[this.pos++]=c[u]},writeRawMessage:function(c,a){this.pos++;var u=this.pos;c(a,this);var h=this.pos-u;h>=128&&Yz(u,h,this),this.pos=u-1,this.writeVarint(h),this.pos+=h},writeMessage:function(c,a,u){this.writeTag(c,bi.Bytes),this.writeRawMessage(a,u)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,dte,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,fte,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,mte,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,hte,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,pte,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,gte,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,vte,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,yte,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,_te,a)},writeBytesField:function(c,a){this.writeTag(c,bi.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,bi.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,bi.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,bi.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,bi.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,bi.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,bi.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,bi.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,bi.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,bi.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var C1=$(Gz);const gM=3;function bte(c,a,u){a.glyphs=[],c===1&&u.readMessage(xte,a)}function xte(c,a,u){if(c===3){const{id:h,bitmap:g,width:_,height:w,left:T,top:I,advance:L}=u.readMessage(wte,{});a.glyphs.push({id:h,bitmap:new Au({width:_+2*gM,height:w+2*gM},g),metrics:{width:_,height:w,left:T,top:I,advance:L}})}else c===4?a.ascender=u.readSVarint():c===5&&(a.descender=u.readSVarint())}function wte(c,a,u){c===1?a.id=u.readVarint():c===2?a.bitmap=u.readBytes():c===3?a.width=u.readVarint():c===4?a.height=u.readVarint():c===5?a.left=u.readSVarint():c===6?a.top=u.readSVarint():c===7&&(a.advance=u.readVarint())}const Kz=gM;function vM(c){let a=0,u=0;for(const w of c)a+=w.w*w.h,u=Math.max(u,w.w);c.sort((w,T)=>T.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let g=0,_=0;for(const w of c)for(let T=h.length-1;T>=0;T--){const I=h[T];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,_=Math.max(_,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===I.w&&w.h===I.h){const L=h.pop();T<h.length&&(h[T]=L)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(h.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:g,h:_,fill:a/(g*_)||0}}const $s=1;class yM{constructor(a,{pixelRatio:u,version:h,stretchX:g,stretchY:_,content:w}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=g,this.stretchY=_,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+$s,this.paddedRect.y+$s]}get br(){return[this.paddedRect.x+this.paddedRect.w-$s,this.paddedRect.y+this.paddedRect.h-$s]}get displaySize(){return[(this.paddedRect.w-2*$s)/this.pixelRatio,(this.paddedRect.h-2*$s)/this.pixelRatio]}}class Jz{constructor(a,u){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(a,h,_),this.addImages(u,g,_);const{w,h:T}=vM(_),I=new aa({width:w||1,height:T||1});for(const L in a){const N=a[L],G=h[L].paddedRect;aa.copy(N.data,I,{x:0,y:0},{x:G.x+$s,y:G.y+$s},N.data)}for(const L in u){const N=u[L],G=g[L].paddedRect,W=G.x+$s,Z=G.y+$s,ee=N.data.width,ie=N.data.height;aa.copy(N.data,I,{x:0,y:0},{x:W,y:Z},N.data),aa.copy(N.data,I,{x:0,y:ie-1},{x:W,y:Z-1},{width:ee,height:1}),aa.copy(N.data,I,{x:0,y:0},{x:W,y:Z+ie},{width:ee,height:1}),aa.copy(N.data,I,{x:ee-1,y:0},{x:W-1,y:Z},{width:1,height:ie}),aa.copy(N.data,I,{x:0,y:0},{x:W+ee,y:Z},{width:1,height:ie})}this.image=I,this.iconPositions=h,this.patternPositions=g}addImages(a,u,h){for(const g in a){const _=a[g],w={x:0,y:0,w:_.data.width+2*$s,h:_.data.height+2*$s};h.push(w),u[g]=new yM(w,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(a,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>a.hasImage(h)),a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in a.updatedImages)this.patchUpdatedImage(this.iconPositions[h],a.getImage(h),u),this.patchUpdatedImage(this.patternPositions[h],a.getImage(h),u)}patchUpdatedImage(a,u,h){if(!a||!u||a.version===u.version)return;a.version=u.version;const[g,_]=a.tl;h.update(u.data,void 0,{x:g,y:_})}}En(yM,"ImagePosition"),En(Jz,"ImageAtlas");const Ta={horizontal:1,vertical:2,horizontalOnly:3},Qz=-17;class Yy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,u){const h=new Yy;return h.scale=a||1,h.fontStack=u,h}static forImage(a){const u=new Yy;return u.imageName=a,u}}class Cm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){const h=new Cm;for(let g=0;g<a.sections.length;g++){const _=a.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,u)}return h}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(a){this.text=function(u,h){let g="";for(let _=0;_<u.length;_++){const w=u.charCodeAt(_+1)||null,T=u.charCodeAt(_-1)||null;g+=!h&&(w&&e1(w)&&!qy[u[_+1]]||T&&e1(T)&&!qy[u[_-1]])||!qy[u[_]]?u[_]:qy[u[_]]}return g}(this.text,a)}trim(){let a=0;for(let h=0;h<this.text.length&&T1[this.text.charCodeAt(h)];h++)a++;let u=this.text.length;for(let h=this.text.length-1;h>=0&&h>=a&&T1[this.text.charCodeAt(h)];h--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const h=new Cm;return h.text=this.text.substring(a,u),h.sectionIndex=this.sectionIndex.slice(a,u),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,u)=>Math.max(a,this.sections[u].scale),0)}addTextSection(a,u){this.text+=a.text,this.sections.push(Yy.forText(a.scale,a.fontStack||u));const h=this.sections.length-1;for(let g=0;g<a.text.length;++g)this.sectionIndex.push(h)}addImageSection(a){const u=a.image?a.image.name:"";if(u.length===0)return void it("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Yy.forImage(u)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _M(c,a,u,h,g,_,w,T,I,L,N,G,W,Z,ee){const ie=Cm.fromFeature(c,g);G===Ta.vertical&&ie.verticalizePunctuation(W);let me=[];const Pe=function(Ve,gt,dt,Pt,qt,_t){if(!Ve)return[];const Dt=[],kt=function(dn,An,mn,hr,tn,Nn){let pr=0;for(let $r=0;$r<dn.length();$r++){const mr=dn.getSection($r);pr+=eN(dn.getCharCode($r),mr,hr,tn,An,Nn)}return pr/Math.max(1,Math.ceil(pr/mn))}(Ve,gt,dt,Pt,qt,_t),Ut=Ve.text.indexOf("​")>=0;let en=0;for(let dn=0;dn<Ve.length();dn++){const An=Ve.getSection(dn),mn=Ve.getCharCode(dn);if(T1[mn]||(en+=eN(mn,An,Pt,qt,gt,_t)),dn<Ve.length()-1){const hr=!((Mt=mn)<11904||!(gn["Bopomofo Extended"](Mt)||gn.Bopomofo(Mt)||gn["CJK Compatibility Forms"](Mt)||gn["CJK Compatibility Ideographs"](Mt)||gn["CJK Compatibility"](Mt)||gn["CJK Radicals Supplement"](Mt)||gn["CJK Strokes"](Mt)||gn["CJK Symbols and Punctuation"](Mt)||gn["CJK Unified Ideographs Extension A"](Mt)||gn["CJK Unified Ideographs"](Mt)||gn["Enclosed CJK Letters and Months"](Mt)||gn["Halfwidth and Fullwidth Forms"](Mt)||gn.Hiragana(Mt)||gn["Ideographic Description Characters"](Mt)||gn["Kangxi Radicals"](Mt)||gn["Katakana Phonetic Extensions"](Mt)||gn.Katakana(Mt)||gn["Vertical Forms"](Mt)||gn["Yi Radicals"](Mt)||gn["Yi Syllables"](Mt)));(Ste[mn]||hr||An.imageName)&&Dt.push(nN(dn+1,en,kt,Dt,Ete(mn,Ve.getCharCode(dn+1),hr&&Ut),!1))}}var Mt;return rN(nN(Ve.length(),en,kt,Dt,0,!0))}(ie,L,_,a,h,Z),{processBidirectionalText:je,processStyledBidirectionalText:Ie}=z;if(je&&ie.sections.length===1){const Ve=je(ie.toString(),Pe);for(const gt of Ve){const dt=new Cm;dt.text=gt,dt.sections=ie.sections;for(let Pt=0;Pt<gt.length;Pt++)dt.sectionIndex.push(0);me.push(dt)}}else if(Ie){const Ve=Ie(ie.text,ie.sectionIndex,Pe);for(const gt of Ve){const dt=new Cm;dt.text=gt[0],dt.sectionIndex=gt[1],dt.sections=ie.sections,me.push(dt)}}else me=function(Ve,gt){const dt=[],Pt=Ve.text;let qt=0;for(const _t of gt)dt.push(Ve.substring(qt,_t)),qt=_t;return qt<Pt.length&&dt.push(Ve.substring(qt,Pt.length)),dt}(ie,Pe);const $e=[],Ge={positionedLines:$e,text:ie.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:G,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut,en,Mt,dn){let An=0,mn=0,hr=0;const tn=kt==="right"?1:kt==="left"?0:.5;let Nn=!1;for(const vr of qt){const yr=vr.getSections();for(const hi of yr){if(hi.imageName)continue;const xi=gt[hi.fontStack];if(xi&&(Nn=xi.ascender!==void 0&&xi.descender!==void 0,!Nn))break}if(!Nn)break}let pr=0;for(const vr of qt){vr.trim();const yr=vr.getMaxScale(),hi=(yr-1)*Wo,xi={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[pr]=xi;const wi=xi.positionedGlyphs;let pi=0;if(!vr.length()){mn+=_t,++pr;continue}let Ui=0,eo=0;for(let mi=0;mi<vr.length();mi++){const Co=vr.getSection(mi),vo=vr.getSectionIndex(mi),qi=vr.getCharCode(mi);let Vr=Co.scale,yo=null,Si=null,Ms=null,_o=Wo,Xo=0;const $o=!(Ut===Ta.horizontal||!Mt&&!wy(qi)||Mt&&(T1[qi]||($r=qi,gn.Arabic($r)||gn["Arabic Supplement"]($r)||gn["Arabic Extended-A"]($r)||gn["Arabic Presentation Forms-A"]($r)||gn["Arabic Presentation Forms-B"]($r))));if(Co.imageName){const Ps=Pt[Co.imageName];if(!Ps)continue;Ms=Co.imageName,Ve.iconsInText=Ve.iconsInText||!0,Si=Ps.paddedRect;const jo=Ps.displaySize;Vr=Vr*Wo/dn,yo={width:jo[0],height:jo[1],left:$s,top:-Kz,advance:$o?jo[1]:jo[0],localGlyph:!1},Xo=Nn?-yo.height*Vr:Qz+yr*Wo-jo[1]*Vr,_o=yo.advance;const Wl=($o?jo[0]:jo[1])*Vr-Wo*yr;Wl>0&&Wl>pi&&(pi=Wl)}else{const Ps=dt[Co.fontStack];if(!Ps)continue;Ps[qi]&&(Si=Ps[qi]);const jo=gt[Co.fontStack];if(!jo)continue;const Wl=jo.glyphs[qi];if(!Wl)continue;if(yo=Wl.metrics,_o=qi!==8203?Wo:0,Nn){const Om=jo.ascender!==void 0?Math.abs(jo.ascender):0,o0=jo.descender!==void 0?Math.abs(jo.descender):0,s0=(Om+o0)*Vr;Ui<s0&&(Ui=s0,eo=(Om-o0)/2*Vr),Xo=-Om*Vr}else Xo=Qz+(yr-Vr)*Wo}$o?(Ve.verticalizable=!0,wi.push({glyph:qi,imageName:Ms,x:An,y:mn+Xo,vertical:$o,scale:Vr,localGlyph:yo.localGlyph,fontStack:Co.fontStack,sectionIndex:vo,metrics:yo,rect:Si}),An+=_o*Vr+en):(wi.push({glyph:qi,imageName:Ms,x:An,y:mn+Xo,vertical:$o,scale:Vr,localGlyph:yo.localGlyph,fontStack:Co.fontStack,sectionIndex:vo,metrics:yo,rect:Si}),An+=yo.advance*Vr+en)}wi.length!==0&&(hr=Math.max(An-en,hr),Nn?iN(wi,tn,pi,eo,_t*yr/2):iN(wi,tn,pi,0,_t/2)),An=0;const go=_t*yr+pi;xi.lineOffset=Math.max(pi,hi),mn+=go,++pr}var $r;const mr=mn,{horizontalAlign:Zn,verticalAlign:Ci}=bM(Dt);(function(vr,yr,hi,xi,wi,pi){const Ui=(yr-hi)*wi,eo=-pi*xi;for(const go of vr)for(const mi of go.positionedGlyphs)mi.x+=Ui,mi.y+=eo})(Ve.positionedLines,tn,Zn,Ci,hr,mr),Ve.top+=-Ci*mr,Ve.bottom=Ve.top+mr,Ve.left+=-Zn*hr,Ve.right=Ve.left+hr,Ve.hasBaseline=Nn}(Ge,a,u,h,me,w,T,I,G,L,W,ee),!function(Ve){for(const gt of Ve)if(gt.positionedGlyphs.length!==0)return!1;return!0}($e)&&Ge}const T1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ste={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function eN(c,a,u,h,g,_){if(a.imageName){const w=h[a.imageName];return w?w.displaySize[0]*a.scale*Wo/_+g:0}{const w=u[a.fontStack],T=w&&w.glyphs[c];return T?T.metrics.advance*a.scale+g:0}}function tN(c,a,u,h){const g=Math.pow(c-a,2);return h?c<a?g/2:2*g:g+Math.abs(u)*u}function Ete(c,a,u){let h=0;return c===10&&(h-=1e4),u&&(h+=150),c!==40&&c!==65288||(h+=50),a!==41&&a!==65289||(h+=50),h}function nN(c,a,u,h,g,_){let w=null,T=tN(a,u,g,_);for(const I of h){const L=tN(a-I.x,u,g,_)+I.badness;L<=T&&(w=I,T=L)}return{index:c,x:a,priorBreak:w,badness:T}}function rN(c){return c?rN(c.priorBreak).concat(c.index):[]}function bM(c){let a=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function iN(c,a,u,h,g){if(!(a||u||h||g))return;const _=c.length-1,w=c[_],T=(w.x+w.metrics.advance*w.scale)*a;for(let I=0;I<=_;I++)c[I].x-=T,c[I].y+=u+h+g}function Cte(c,a,u){const{horizontalAlign:h,verticalAlign:g}=bM(u),_=a[0]-c.displaySize[0]*h,w=a[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:_,right:_+c.displaySize[0]}}function oN(c,a,u,h,g,_){const w=c.image;let T;if(w.content){const me=w.content,Pe=w.pixelRatio||1;T=[me[0]/Pe,me[1]/Pe,w.displaySize[0]-me[2]/Pe,w.displaySize[1]-me[3]/Pe]}const I=a.left*_,L=a.right*_;let N,G,W,Z;u==="width"||u==="both"?(Z=g[0]+I-h[3],G=g[0]+L+h[1]):(Z=g[0]+(I+L-w.displaySize[0])/2,G=Z+w.displaySize[0]);const ee=a.top*_,ie=a.bottom*_;return u==="height"||u==="both"?(N=g[1]+ee-h[0],W=g[1]+ie+h[2]):(N=g[1]+(ee+ie-w.displaySize[1])/2,W=N+w.displaySize[1]),{image:w,top:N,right:G,bottom:W,left:Z,collisionPadding:T}}class Pu extends Q{constructor(a,u,h,g,_){super(a,u),this.angle=g,this.z=h,_!==void 0&&(this.segment=_)}clone(){return new Pu(this.x,this.y,this.z,this.angle,this.segment)}}function sN(c,a,u,h,g){if(a.segment===void 0)return!0;let _=a,w=a.segment+1,T=0;for(;T>-u/2;){if(w--,w<0)return!1;T-=c[w].dist(_),_=c[w]}T+=c[w].dist(c[w+1]),w++;const I=[];let L=0;for(;T<u/2;){const N=c[w],G=c[w+1];if(!G)return!1;let W=c[w-1].angleTo(N)-N.angleTo(G);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:T,angleDelta:W}),L+=W;T-I[0].distance>h;)L-=I.shift().angleDelta;if(L>g)return!1;w++,T+=N.dist(G)}return!0}function aN(c){let a=0;for(let u=0;u<c.length-1;u++)a+=c[u].dist(c[u+1]);return a}function lN(c,a,u){return c?.6*a*u:0}function cN(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function Tte(c,a,u,h,g,_){const w=lN(u,g,_),T=cN(u,h)*_;let I=0;const L=aN(c)/2;for(let N=0;N<c.length-1;N++){const G=c[N],W=c[N+1],Z=G.dist(W);if(I+Z>L){const ee=(L-I)/Z,ie=Br(G.x,W.x,ee),me=Br(G.y,W.y,ee),Pe=new Pu(ie,me,0,W.angleTo(G),N);return!w||sN(c,Pe,T,w,a)?Pe:void 0}I+=Z}}function Ate(c,a,u,h,g,_,w,T,I){const L=lN(h,_,w),N=cN(h,g),G=N*w,W=c[0].x===0||c[0].x===I||c[0].y===0||c[0].y===I;return a-G<a/4&&(a=G+a/4),uN(c,W?a/2*T%a:(N/2+2*_)*w*T%a,a,L,u,G,W,!1,I)}function uN(c,a,u,h,g,_,w,T,I){const L=_/2,N=aN(c);let G=0,W=a-u,Z=[];for(let ee=0;ee<c.length-1;ee++){const ie=c[ee],me=c[ee+1],Pe=ie.dist(me),je=me.angleTo(ie);for(;W+u<G+Pe;){W+=u;const Ie=(W-G)/Pe,$e=Br(ie.x,me.x,Ie),Ge=Br(ie.y,me.y,Ie);if($e>=0&&$e<I&&Ge>=0&&Ge<I&&W-L>=0&&W+L<=N){const Ve=new Pu($e,Ge,0,je,ee);Ve._round(),h&&!sN(c,Ve,_,h,g)||Z.push(Ve)}}G+=Pe}return T||Z.length||w||(Z=uN(c,G/2,u,h,g,_,w,!0,I)),Z}function dN(c,a,u,h,g){const _=[];for(let w=0;w<c.length;w++){const T=c[w];let I;for(let L=0;L<T.length-1;L++){let N=T[L],G=T[L+1];N.x<a&&G.x<a||(N.x<a?N=new Q(a,N.y+(a-N.x)/(G.x-N.x)*(G.y-N.y))._round():G.x<a&&(G=new Q(a,N.y+(a-N.x)/(G.x-N.x)*(G.y-N.y))._round()),N.y<u&&G.y<u||(N.y<u?N=new Q(N.x+(u-N.y)/(G.y-N.y)*(G.x-N.x),u)._round():G.y<u&&(G=new Q(N.x+(u-N.y)/(G.y-N.y)*(G.x-N.x),u)._round()),N.x>=h&&G.x>=h||(N.x>=h?N=new Q(h,N.y+(h-N.x)/(G.x-N.x)*(G.y-N.y))._round():G.x>=h&&(G=new Q(h,N.y+(h-N.x)/(G.x-N.x)*(G.y-N.y))._round()),N.y>=g&&G.y>=g||(N.y>=g?N=new Q(N.x+(g-N.y)/(G.y-N.y)*(G.x-N.x),g)._round():G.y>=g&&(G=new Q(N.x+(g-N.y)/(G.y-N.y)*(G.x-N.x),g)._round()),I&&N.equals(I[I.length-1])||(I=[N],_.push(I)),I.push(G)))))}}return _}En(Pu,"Anchor");const Zy=1e20;function fN(c,a,u,h,g,_,w,T,I){for(let L=a;L<a+h;L++)hN(c,u*_+L,_,g,w,T,I);for(let L=u;L<u+g;L++)hN(c,L*_+a,1,h,w,T,I)}function hN(c,a,u,h,g,_,w){_[0]=0,w[0]=-Zy,w[1]=Zy,g[0]=c[a];for(let T=1,I=0,L=0;T<h;T++){g[T]=c[a+T*u];const N=T*T;do{const G=_[I];L=(g[T]-g[G]+N-G*G)/(T-G)/2}while(L<=w[I]&&--I>-1);I++,_[I]=T,w[I]=L,w[I+1]=Zy}for(let T=0,I=0;T<h;T++){for(;w[I+1]<T;)I++;const L=_[I],N=T-L;c[a+T*u]=g[L]+N*N}}const Gl=2,xM={none:0,ideographs:1,all:2};class Tm{constructor(a,u,h){this.requestManager=a,this.localGlyphMode=u,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a){this.url=a}getGlyphs(a,u){const h=[];for(const g in a)for(const _ of a[g])h.push({stack:g,id:_});ze(h,({stack:g,id:_},w)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=T.glyphs[_];if(I!==void 0)return void w(null,{stack:g,id:_,glyph:I});if(I=this._tinySDF(T,g,_),I)return T.glyphs[_]=I,void w(null,{stack:g,id:_,glyph:I});const L=Math.floor(_/256);if(256*L>65535)return void w(new Error("glyphs > 65535 not supported"));if(T.ranges[L])return void w(null,{stack:g,id:_,glyph:I});let N=T.requests[L];N||(N=T.requests[L]=[],Tm.loadGlyphRange(g,L,this.url,this.requestManager,(G,W)=>{if(W){T.ascender=W.ascender,T.descender=W.descender;for(const Z in W.glyphs)this._doesCharSupportLocalGlyph(+Z)||(T.glyphs[+Z]=W.glyphs[+Z]);T.ranges[L]=!0}for(const Z of N)Z(G,W);delete T.requests[L]})),N.push((G,W)=>{G?w(G):W&&w(null,{stack:g,id:_,glyph:W.glyphs[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const w={};for(const{stack:T,id:I,glyph:L}of _)w[T]===void 0&&(w[T]={}),w[T].glyphs===void 0&&(w[T].glyphs={}),w[T].glyphs[I]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics},w[T].ascender=this.entries[T].ascender,w[T].descender=this.entries[T].descender;u(null,w)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==xM.none&&(this.localGlyphMode===xM.all?!!this.localFontFamily:!!this.localFontFamily&&(gn["CJK Unified Ideographs"](a)||gn["Hangul Syllables"](a)||gn.Hiragana(a)||gn.Katakana(a)||gn["CJK Symbols and Punctuation"](a)))}_tinySDF(a,u,h){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let _=a.tinySDF;if(!_){let ie="400";/bold/i.test(u)?ie="900":/medium/i.test(u)?ie="500":/light/i.test(u)&&(ie="200"),_=a.tinySDF=new Tm.TinySDF({fontFamily:g,fontWeight:ie,fontSize:24*Gl,buffer:3*Gl,radius:8*Gl}),_.fontWeight=ie}if(this.localGlyphs[_.fontWeight][h])return this.localGlyphs[_.fontWeight][h];const w=String.fromCharCode(h),{data:T,width:I,height:L,glyphWidth:N,glyphHeight:G,glyphLeft:W,glyphTop:Z,glyphAdvance:ee}=_.draw(w);return this.localGlyphs[_.fontWeight][h]={id:h,bitmap:new Au({width:I,height:L},T),metrics:{width:N/Gl,height:G/Gl,left:W/Gl,top:Z/Gl-27,advance:ee/Gl,localGlyph:!0}}}}Tm.loadGlyphRange=function(c,a,u,h,g){const _=256*a,w=_+255,T=h.transformRequest(h.normalizeGlyphsURL(u).replace("{fontstack}",c).replace("{range}",`${_}-${w}`),Sn.Glyphs);tr(T,(I,L)=>{if(I)g(I);else if(L){const N={},G=function(W){return new C1(W).readFields(bte,{})}(L);for(const W of G.glyphs)N[W.id]=W;g(null,{glyphs:N,ascender:G.ascender,descender:G.descender})}})},Tm.TinySDF=class{constructor({fontSize:c=24,buffer:a=3,radius:u=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:w="normal"}={}){this.buffer=a,this.cutoff=h,this.radius=u;const T=this.size=c+4*a,I=this._createCanvas(T),L=this.ctx=I.getContext("2d",{willReadFrequently:!0});L.font=`${w} ${_} ${c}px ${g}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(c){const a=document.createElement("canvas");return a.width=a.height=c,a}draw(c){const{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(c),w=Math.ceil(u),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),I=Math.min(this.size-this.buffer,w+Math.ceil(h)),L=T+2*this.buffer,N=I+2*this.buffer,G=Math.max(L*N,0),W=new Uint8ClampedArray(G),Z={data:W,width:L,height:N,glyphWidth:T,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:a};if(T===0||I===0)return Z;const{ctx:ee,buffer:ie,gridInner:me,gridOuter:Pe}=this;ee.clearRect(ie,ie,T,I),ee.fillText(c,ie,ie+w);const je=ee.getImageData(ie,ie,T,I);Pe.fill(Zy,0,G),me.fill(0,0,G);for(let Ie=0;Ie<I;Ie++)for(let $e=0;$e<T;$e++){const Ge=je.data[4*(Ie*T+$e)+3]/255;if(Ge===0)continue;const Ve=(Ie+ie)*L+$e+ie;if(Ge===1)Pe[Ve]=0,me[Ve]=Zy;else{const gt=.5-Ge;Pe[Ve]=gt>0?gt*gt:0,me[Ve]=gt<0?gt*gt:0}}fN(Pe,0,0,L,N,L,this.f,this.v,this.z),fN(me,ie,ie,T,I,L,this.f,this.v,this.z);for(let Ie=0;Ie<G;Ie++){const $e=Math.sqrt(Pe[Ie])-Math.sqrt(me[Ie]);W[Ie]=Math.round(255-255*($e/this.radius+this.cutoff))}return Z}};const Am=$s;function pN(c,a,u,h){const g=[],_=c.image,w=_.pixelRatio,T=_.paddedRect.w-2*Am,I=_.paddedRect.h-2*Am,L=c.right-c.left,N=c.bottom-c.top,G=_.stretchX||[[0,T]],W=_.stretchY||[[0,I]],Z=(_t,Dt)=>_t+Dt[1]-Dt[0],ee=G.reduce(Z,0),ie=W.reduce(Z,0),me=T-ee,Pe=I-ie;let je=0,Ie=ee,$e=0,Ge=ie,Ve=0,gt=me,dt=0,Pt=Pe;if(_.content&&h){const _t=_.content;je=A1(G,0,_t[0]),$e=A1(W,0,_t[1]),Ie=A1(G,_t[0],_t[2]),Ge=A1(W,_t[1],_t[3]),Ve=_t[0]-je,dt=_t[1]-$e,gt=_t[2]-_t[0]-Ie,Pt=_t[3]-_t[1]-Ge}const qt=(_t,Dt,kt,Ut)=>{const en=M1(_t.stretch-je,Ie,L,c.left),Mt=P1(_t.fixed-Ve,gt,_t.stretch,ee),dn=M1(Dt.stretch-$e,Ge,N,c.top),An=P1(Dt.fixed-dt,Pt,Dt.stretch,ie),mn=M1(kt.stretch-je,Ie,L,c.left),hr=P1(kt.fixed-Ve,gt,kt.stretch,ee),tn=M1(Ut.stretch-$e,Ge,N,c.top),Nn=P1(Ut.fixed-dt,Pt,Ut.stretch,ie),pr=new Q(en,dn),$r=new Q(mn,dn),mr=new Q(mn,tn),Zn=new Q(en,tn),Ci=new Q(Mt/w,An/w),vr=new Q(hr/w,Nn/w),yr=a*Math.PI/180;if(yr){const wi=Math.sin(yr),pi=Math.cos(yr),Ui=[pi,-wi,wi,pi];pr._matMult(Ui),$r._matMult(Ui),Zn._matMult(Ui),mr._matMult(Ui)}const hi=_t.stretch+_t.fixed,xi=Dt.stretch+Dt.fixed;return{tl:pr,tr:$r,bl:Zn,br:mr,tex:{x:_.paddedRect.x+Am+hi,y:_.paddedRect.y+Am+xi,w:kt.stretch+kt.fixed-hi,h:Ut.stretch+Ut.fixed-xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ci,pixelOffsetBR:vr,minFontScaleX:gt/w/L,minFontScaleY:Pt/w/N,isSDF:u}};if(h&&(_.stretchX||_.stretchY)){const _t=mN(G,me,ee),Dt=mN(W,Pe,ie);for(let kt=0;kt<_t.length-1;kt++){const Ut=_t[kt],en=_t[kt+1];for(let Mt=0;Mt<Dt.length-1;Mt++)g.push(qt(Ut,Dt[Mt],en,Dt[Mt+1]))}}else g.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:I+1}));return g}function A1(c,a,u){let h=0;for(const g of c)h+=Math.max(a,Math.min(u,g[1]))-Math.max(a,Math.min(u,g[0]));return h}function mN(c,a,u){const h=[{fixed:-Am,stretch:0}];for(const[g,_]of c){const w=h[h.length-1];h.push({fixed:g-w.stretch,stretch:w.stretch}),h.push({fixed:g-w.stretch,stretch:w.stretch+(_-g)})}return h.push({fixed:a+Am,stretch:u}),h}function M1(c,a,u,h){return c/a*u+h}function P1(c,a,u,h){return c-a*u/h}function Mte(c,a,u,h){const g=a+c.positionedLines[h].lineOffset;return h===0?u+g/2:u+(g+(a+c.positionedLines[h-1].lineOffset))/2}class Pte{constructor(a=[],u=Ite){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:h}=this,g=u[a];for(;a>0;){const _=a-1>>1,w=u[_];if(h(g,w)>=0)break;u[a]=w,a=_}u[a]=g}_down(a){const{data:u,compare:h}=this,g=this.length>>1,_=u[a];for(;a<g;){let w=1+(a<<1),T=u[w];const I=w+1;if(I<this.length&&h(u[I],T)<0&&(w=I,T=u[I]),h(T,_)>=0)break;u[a]=T,a=w}u[a]=_}}function Ite(c,a){return c<a?-1:c>a?1:0}function Rte(c,a=1,u=!1){let h=1/0,g=1/0,_=-1/0,w=-1/0;const T=c[0];for(let Z=0;Z<T.length;Z++){const ee=T[Z];(!Z||ee.x<h)&&(h=ee.x),(!Z||ee.y<g)&&(g=ee.y),(!Z||ee.x>_)&&(_=ee.x),(!Z||ee.y>w)&&(w=ee.y)}const I=Math.min(_-h,w-g);let L=I/2;const N=new Pte([],Ote);if(I===0)return new Q(h,g);for(let Z=h;Z<_;Z+=I)for(let ee=g;ee<w;ee+=I)N.push(new Mm(Z+L,ee+L,L,c));let G=function(Z){let ee=0,ie=0,me=0;const Pe=Z[0];for(let je=0,Ie=Pe.length,$e=Ie-1;je<Ie;$e=je++){const Ge=Pe[je],Ve=Pe[$e],gt=Ge.x*Ve.y-Ve.x*Ge.y;ie+=(Ge.x+Ve.x)*gt,me+=(Ge.y+Ve.y)*gt,ee+=3*gt}return new Mm(ie/ee,me/ee,0,Z)}(c),W=N.length;for(;N.length;){const Z=N.pop();(Z.d>G.d||!G.d)&&(G=Z,u&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,W)),Z.max-G.d<=a||(L=Z.h/2,N.push(new Mm(Z.p.x-L,Z.p.y-L,L,c)),N.push(new Mm(Z.p.x+L,Z.p.y-L,L,c)),N.push(new Mm(Z.p.x-L,Z.p.y+L,L,c)),N.push(new Mm(Z.p.x+L,Z.p.y+L,L,c)),W+=4)}return u&&(console.log(`num probes: ${W}`),console.log(`best distance: ${G.d}`)),G.p}function Ote(c,a){return a.max-c.max}class Mm{constructor(a,u,h,g){this.p=new Q(a,u),this.h=h,this.d=function(_,w){let T=!1,I=1/0;for(let L=0;L<w.length;L++){const N=w[L];for(let G=0,W=N.length,Z=W-1;G<W;Z=G++){const ee=N[G],ie=N[Z];ee.y>_.y!=ie.y>_.y&&_.x<(ie.x-ee.x)*(_.y-ee.y)/(ie.y-ee.y)+ee.x&&(T=!T),I=Math.min(I,uz(_,ee,ie))}}return(T?1:-1)*Math.sqrt(I)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const Pm=7,wM=Number.POSITIVE_INFINITY,Lte=Math.sqrt(2);function gN(c,[a,u]){let h=0,g=0;if(u===wM){a<0&&(a=0);const _=a/Lte;switch(c){case"top-right":case"top-left":g=_-Pm;break;case"bottom-right":case"bottom-left":g=-_+Pm;break;case"bottom":g=-a+Pm;break;case"top":g=a-Pm}switch(c){case"top-right":case"bottom-right":h=-_;break;case"top-left":case"bottom-left":h=_;break;case"left":h=a;break;case"right":h=-a}}else{switch(a=Math.abs(a),u=Math.abs(u),c){case"top-right":case"top-left":case"top":g=u-Pm;break;case"bottom-right":case"bottom-left":case"bottom":g=-u+Pm}switch(c){case"top-right":case"bottom-right":case"right":h=-a;break;case"top-left":case"bottom-left":case"left":h=a}}return[h,g]}function Bte(c,a,u,h,g,_,w,T,I,L){c.createArrays(),c.tilePixelRatio=Gn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const N=c.layers[0].layout,G=c.layers[0]._unevaluatedLayout._values,W={};if(c.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:me}=c.textSizeData;W.compositeTextSizes=[G["text-size"].possiblyEvaluate(new V(ie),T),G["text-size"].possiblyEvaluate(new V(me),T)]}if(c.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:me}=c.iconSizeData;W.compositeIconSizes=[G["icon-size"].possiblyEvaluate(new V(ie),T),G["icon-size"].possiblyEvaluate(new V(me),T)]}W.layoutTextSize=G["text-size"].possiblyEvaluate(new V(I+1),T),W.layoutIconSize=G["icon-size"].possiblyEvaluate(new V(I+1),T),W.textMaxSize=G["text-size"].possiblyEvaluate(new V(18),T);const Z=N.get("text-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",ee=N.get("text-size");for(const ie of c.features){const me=N.get("text-font").evaluate(ie,{},T).join(","),Pe=ee.evaluate(ie,{},T),je=W.layoutTextSize.evaluate(ie,{},T),Ie=(W.layoutIconSize.evaluate(ie,{},T),{horizontal:{},vertical:void 0}),$e=ie.text;let Ge,Ve=[0,0];if($e){const Pt=$e.toString(),qt=N.get("text-letter-spacing").evaluate(ie,{},T)*Wo,_t=N.get("text-line-height").evaluate(ie,{},T)*Wo,Dt=RA(Pt)?qt:0,kt=N.get("text-anchor").evaluate(ie,{},T),Ut=N.get("text-variable-anchor");if(!Ut){const mn=N.get("text-radial-offset").evaluate(ie,{},T);Ve=mn?gN(kt,[mn*Wo,wM]):N.get("text-offset").evaluate(ie,{},T).map(hr=>hr*Wo)}let en=Z?"center":N.get("text-justify").evaluate(ie,{},T);const Mt=N.get("symbol-placement")==="point",dn=Mt?N.get("text-max-width").evaluate(ie,{},T)*Wo:1/0,An=mn=>{c.allowVerticalPlacement&&xy(Pt)&&(Ie.vertical=_M($e,a,u,g,me,dn,_t,kt,mn,Dt,Ve,Ta.vertical,!0,je,Pe))};if(!Z&&Ut){const mn=en==="auto"?Ut.map(tn=>SM(tn)):[en];let hr=!1;for(let tn=0;tn<mn.length;tn++){const Nn=mn[tn];if(!Ie.horizontal[Nn])if(hr)Ie.horizontal[Nn]=Ie.horizontal[0];else{const pr=_M($e,a,u,g,me,dn,_t,"center",Nn,Dt,Ve,Ta.horizontal,!1,je,Pe);pr&&(Ie.horizontal[Nn]=pr,hr=pr.positionedLines.length===1)}}An("left")}else{if(en==="auto"&&(en=SM(kt)),Mt||N.get("text-writing-mode").indexOf("horizontal")>=0||!xy(Pt)){const mn=_M($e,a,u,g,me,dn,_t,kt,en,Dt,Ve,Ta.horizontal,!1,je,Pe);mn&&(Ie.horizontal[en]=mn)}An(Mt?"left":en)}}let gt=!1;if(ie.icon&&ie.icon.name){const Pt=h[ie.icon.name];Pt&&(Ge=Cte(g[ie.icon.name],N.get("icon-offset").evaluate(ie,{},T),N.get("icon-anchor").evaluate(ie,{},T)),gt=Pt.sdf,c.sdfIcons===void 0?c.sdfIcons=Pt.sdf:c.sdfIcons!==Pt.sdf&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pt.pixelRatio!==c.pixelRatio||N.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const dt=yN(Ie.horizontal)||Ie.vertical;c.iconsInText||(c.iconsInText=!!dt&&dt.iconsInText),(dt||Ge)&&Dte(c,ie,Ie,Ge,h,W,je,0,Ve,gt,w,T,L)}_&&c.generateCollisionDebugBuffers(I,c.collisionBoxArray)}function SM(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dte(c,a,u,h,g,_,w,T,I,L,N,G,W){let Z=_.textMaxSize.evaluate(a,{},G);Z===void 0&&(Z=w);const ee=c.layers[0].layout,ie=ee.get("icon-offset").evaluate(a,{},G),me=yN(u.horizontal)||u.vertical,Pe=W.name==="globe",je=Wo,Ie=w/je,$e=c.tilePixelRatio*Z/je,Ge=(kt=c.overscaling,c.zoom>18&&kt>2&&(kt>>=1),Math.max(Gn/(512*kt),1)*ee.get("symbol-spacing")),Ve=ee.get("text-padding")*c.tilePixelRatio,gt=ee.get("icon-padding")*c.tilePixelRatio,dt=ae(ee.get("text-max-angle")),Pt=ee.get("text-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",qt=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",_t=ee.get("symbol-placement"),Dt=Ge/2;var kt;const Ut=ee.get("icon-text-fit");let en;h&&Ut!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(en=oN(h,u.vertical,Ut,ee.get("icon-text-fit-padding"),ie,Ie)),me&&(h=oN(h,me,Ut,ee.get("icon-text-fit-padding"),ie,Ie)));const Mt=(dn,An,mn)=>{if(An.x<0||An.x>=Gn||An.y<0||An.y>=Gn)return;let hr=null;if(Pe){const{x:tn,y:Nn,z:pr}=W.projectTilePoint(An.x,An.y,mn);hr={anchor:new Pu(tn,Nn,pr,0,void 0),up:W.upVector(mn,An.x,An.y)}}(function(tn,Nn,pr,$r,mr,Zn,Ci,vr,yr,hi,xi,wi,pi,Ui,eo,go,mi,Co,vo,qi,Vr,yo,Si,Ms,_o){const Xo=tn.addToLineVertexArray(Nn,$r);let $o,Ps,jo,Wl,Om,o0,s0,KN=0,JN=0,QN=0,e4=0,zM=-1,NM=-1;const $c={};let t4=BA("");const Ch=pr?pr.anchor:Nn;let $M=0,jM=0;if(yr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$M,jM]=yr.layout.get("text-offset").evaluate(Vr,{},_o).map(la=>la*Wo):($M=yr.layout.get("text-radial-offset").evaluate(Vr,{},_o)*Wo,jM=wM),tn.allowVerticalPlacement&&mr.vertical){const la=mr.vertical;if(eo)o0=EM(la),vr&&(s0=EM(vr));else{const ca=yr.layout.get("text-rotate").evaluate(Vr,{},_o)+90;jo=I1(hi,Ch,Nn,xi,wi,pi,la,Ui,ca,go),vr&&(Wl=I1(hi,Ch,Nn,xi,wi,pi,vr,Co,ca))}}if(Zn){const la=yr.layout.get("icon-rotate").evaluate(Vr,{},_o),ca=yr.layout.get("icon-text-fit")!=="none",a0=pN(Zn,la,Si,ca),VM=vr?pN(vr,la,Si,ca):void 0;Ps=I1(hi,Ch,Nn,xi,wi,pi,Zn,Co,la),KN=4*a0.length;const n4=tn.iconSizeData;let Th=null;n4.kind==="source"?(Th=[Vl*yr.layout.get("icon-size").evaluate(Vr,{},_o)],Th[0]>$d&&it(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Ky}. Reduce your "icon-size".`)):n4.kind==="composite"&&(Th=[Vl*yo.compositeIconSizes[0].evaluate(Vr,{},_o),Vl*yo.compositeIconSizes[1].evaluate(Vr,{},_o)],(Th[0]>$d||Th[1]>$d)&&it(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Ky}. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,a0,Th,qi,vo,Vr,!1,pr,Nn,Xo.lineStartIndex,Xo.lineLength,-1,Ms,_o),zM=tn.icon.placedSymbolArray.length-1,VM&&(JN=4*VM.length,tn.addSymbols(tn.icon,VM,Th,qi,vo,Vr,Ta.vertical,pr,Nn,Xo.lineStartIndex,Xo.lineLength,-1,Ms,_o),NM=tn.icon.placedSymbolArray.length-1)}for(const la in mr.horizontal){const ca=mr.horizontal[la];$o||(t4=BA(ca.text),eo?Om=EM(ca):$o=I1(hi,Ch,Nn,xi,wi,pi,ca,Ui,yr.layout.get("text-rotate").evaluate(Vr,{},_o),go));const a0=ca.positionedLines.length===1;if(QN+=vN(tn,pr,Nn,ca,Ci,yr,eo,Vr,go,Xo,mr.vertical?Ta.horizontal:Ta.horizontalOnly,a0?Object.keys(mr.horizontal):[la],$c,zM,yo,Ms,_o),a0)break}mr.vertical&&(e4+=vN(tn,pr,Nn,mr.vertical,Ci,yr,eo,Vr,go,Xo,Ta.vertical,["vertical"],$c,NM,yo,Ms,_o));let Wd=-1;const UM=(la,ca)=>la?Math.max(la,ca):ca;Wd=UM(Om,Wd),Wd=UM(o0,Wd),Wd=UM(s0,Wd);const cne=Wd>-1?1:0;tn.glyphOffsetArray.length>=Ud.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vr.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,Vr.sortKey),tn.symbolInstances.emplaceBack(Ch.x,Ch.y,Ch.z,Nn.x,Nn.y,$c.right>=0?$c.right:-1,$c.center>=0?$c.center:-1,$c.left>=0?$c.left:-1,$c.vertical>=0?$c.vertical:-1,zM,NM,t4,$o!==void 0?$o:tn.collisionBoxArray.length,$o!==void 0?$o+1:tn.collisionBoxArray.length,jo!==void 0?jo:tn.collisionBoxArray.length,jo!==void 0?jo+1:tn.collisionBoxArray.length,Ps!==void 0?Ps:tn.collisionBoxArray.length,Ps!==void 0?Ps+1:tn.collisionBoxArray.length,Wl||tn.collisionBoxArray.length,Wl?Wl+1:tn.collisionBoxArray.length,xi,QN,e4,KN,JN,cne,0,$M,jM,Wd)})(c,An,hr,dn,u,h,g,en,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,Ve,Pt,I,0,gt,qt,ie,a,_,L,N,G)};if(_t==="line")for(const dn of dN(a.geometry,0,0,Gn,Gn)){const An=Ate(dn,Ge,dt,u.vertical||me,h,je,$e,c.overscaling,Gn);for(const mn of An)me&&kte(c,me.text,Dt,mn)||Mt(dn,mn,G)}else if(_t==="line-center"){for(const dn of a.geometry)if(dn.length>1){const An=Tte(dn,dt,u.vertical||me,h,je,$e);An&&Mt(dn,An,G)}}else if(a.type==="Polygon")for(const dn of uM(a.geometry,0)){const An=Rte(dn,16);Mt(dn[0],new Pu(An.x,An.y,0,0,void 0),G)}else if(a.type==="LineString")for(const dn of a.geometry)Mt(dn,new Pu(dn[0].x,dn[0].y,0,0,void 0),G);else if(a.type==="Point")for(const dn of a.geometry)for(const An of dn)Mt([An],new Pu(An.x,An.y,0,0,void 0),G)}const Ky=255,$d=Ky*Vl;function vN(c,a,u,h,g,_,w,T,I,L,N,G,W,Z,ee,ie,me){const Pe=function($e,Ge,Ve,gt,dt,Pt,qt,_t){const Dt=[];if(Ge.positionedLines.length===0)return Dt;const kt=gt.layout.get("text-rotate").evaluate(Pt,{})*Math.PI/180,Ut=function(mn){const hr=mn[0],tn=mn[1],Nn=hr*tn;return Nn>0?[hr,-tn]:Nn<0?[-hr,tn]:hr===0?[tn,hr]:[tn,-hr]}(Ve);let en=Math.abs(Ge.top-Ge.bottom);for(const mn of Ge.positionedLines)en-=mn.lineOffset;const Mt=Ge.positionedLines.length,dn=en/Mt;let An=Ge.top-Ve[1];for(let mn=0;mn<Mt;++mn){const hr=Ge.positionedLines[mn];An=Mte(Ge,dn,An,mn);for(const tn of hr.positionedGlyphs){if(!tn.rect)continue;const Nn=tn.rect||{};let pr=Kz+1,$r=!0,mr=1,Zn=0;if(tn.imageName){const Si=qt[tn.imageName];if(!Si)continue;if(Si.sdf){it("SDF images are not supported in formatted text and will be ignored.");continue}$r=!1,mr=Si.pixelRatio,pr=$s/mr}const Ci=(dt||_t)&&tn.vertical,vr=tn.metrics.advance*tn.scale/2,yr=tn.metrics,hi=tn.rect;if(hi===null)continue;_t&&Ge.verticalizable&&(Zn=tn.imageName?vr-tn.metrics.width*tn.scale/2:0);const xi=dt?[tn.x+vr,tn.y]:[0,0];let wi=[0,0],pi=[0,0],Ui=!1;dt||(Ci?(pi=[tn.x+vr+Ut[0],tn.y+Ut[1]-Zn],Ui=!0):wi=[tn.x+vr+Ve[0],tn.y+Ve[1]-Zn]);const eo=hi.w*tn.scale/(mr*(tn.localGlyph?Gl:1)),go=hi.h*tn.scale/(mr*(tn.localGlyph?Gl:1));let mi,Co,vo,qi;if(Ci){const Si=tn.y-An,Ms=new Q(-vr,vr-Si),_o=-Math.PI/2,Xo=new Q(...pi);mi=new Q(-vr+wi[0],wi[1]),mi._rotateAround(_o,Ms)._add(Xo),mi.x+=-Si+vr,mi.y-=(yr.left-pr)*tn.scale;const $o=tn.imageName?yr.advance*tn.scale:Wo*tn.scale,Ps=String.fromCharCode(tn.glyph);cte(Ps)?mi.x+=(1-pr)*tn.scale:ute(Ps)?mi.x+=$o-yr.height*tn.scale+(-pr-1)*tn.scale:mi.x+=tn.imageName||yr.width+2*pr===hi.w&&yr.height+2*pr===hi.h?($o-go)/2:($o-(yr.height+2*pr)*tn.scale)/2,Co=new Q(mi.x,mi.y-eo),vo=new Q(mi.x+go,mi.y),qi=new Q(mi.x+go,mi.y-eo)}else{const Si=(yr.left-pr)*tn.scale-vr+wi[0],Ms=(-yr.top-pr)*tn.scale+wi[1],_o=Si+eo,Xo=Ms+go;mi=new Q(Si,Ms),Co=new Q(_o,Ms),vo=new Q(Si,Xo),qi=new Q(_o,Xo)}if(kt){let Si;Si=dt?new Q(0,0):Ui?new Q(Ut[0],Ut[1]):new Q(Ve[0],Ve[1]),mi._rotateAround(kt,Si),Co._rotateAround(kt,Si),vo._rotateAround(kt,Si),qi._rotateAround(kt,Si)}const Vr=new Q(0,0),yo=new Q(0,0);Dt.push({tl:mi,tr:Co,bl:vo,br:qi,tex:Nn,writingMode:Ge.writingMode,glyphOffset:xi,sectionIndex:tn.sectionIndex,isSDF:$r,pixelOffsetTL:Vr,pixelOffsetBR:yo,minFontScaleX:0,minFontScaleY:0})}}return Dt}(0,h,I,_,w,T,g,c.allowVerticalPlacement),je=c.textSizeData;let Ie=null;je.kind==="source"?(Ie=[Vl*_.layout.get("text-size").evaluate(T,{},me)],Ie[0]>$d&&it(`${c.layerIds[0]}: Value for "text-size" is >= ${Ky}. Reduce your "text-size".`)):je.kind==="composite"&&(Ie=[Vl*ee.compositeTextSizes[0].evaluate(T,{},me),Vl*ee.compositeTextSizes[1].evaluate(T,{},me)],(Ie[0]>$d||Ie[1]>$d)&&it(`${c.layerIds[0]}: Value for "text-size" is >= ${Ky}. Reduce your "text-size".`)),c.addSymbols(c.text,Pe,Ie,I,w,T,N,a,u,L.lineStartIndex,L.lineLength,Z,ie,me);for(const $e of G)W[$e]=c.text.placedSymbolArray.length-1;return 4*Pe.length}function yN(c){for(const a in c)return c[a];return null}function I1(c,a,u,h,g,_,w,T,I,L){let N=w.top,G=w.bottom,W=w.left,Z=w.right;const ee=w.collisionPadding;if(ee&&(W-=ee[0],N-=ee[1],Z+=ee[2],G+=ee[3]),I){const ie=new Q(W,N),me=new Q(Z,N),Pe=new Q(W,G),je=new Q(Z,G),Ie=ae(I);let $e=new Q(0,0);L&&($e=new Q(L[0],L[1])),ie._rotateAround(Ie,$e),me._rotateAround(Ie,$e),Pe._rotateAround(Ie,$e),je._rotateAround(Ie,$e),W=Math.min(ie.x,me.x,Pe.x,je.x),Z=Math.max(ie.x,me.x,Pe.x,je.x),N=Math.min(ie.y,me.y,Pe.y,je.y),G=Math.max(ie.y,me.y,Pe.y,je.y)}return c.emplaceBack(a.x,a.y,a.z,u.x,u.y,W,N,Z,G,T,h,g,_),c.length-1}function EM(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const a=c.bottom-c.top;return a>0?Math.max(10,a):null}function kte(c,a,u,h){const g=c.compareText;if(a in g){const _=g[a];for(let w=_.length-1;w>=0;w--)if(h.dist(_[w])<u)return!0}else g[a]=[];return g[a].push(h),!1}function _N(c,a){const u=c.fovAboveCenter,h=c.elevation?c.elevation.getMinElevationBelowMSL()*a:0,g=(c._camera.position[2]*c.worldSize-h)/Math.cos(c._pitch),_=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-c._pitch-u,.01)),w=Math.sin(c._pitch)*_+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Sh(c,a){if(!a.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:a};const u=Math.pow(2,-c.z),h=c.x*u,g=(c.x+1)*u,_=c.y*u,w=(c.y+1)*u,T=Ca(h),I=Ca(g),L=ns(_),N=ns(w),G=a.project(T,L),W=a.project(I,L),Z=a.project(I,N),ee=a.project(T,N);let ie=Math.min(G.x,W.x,Z.x,ee.x),me=Math.min(G.y,W.y,Z.y,ee.y),Pe=Math.max(G.x,W.x,Z.x,ee.x),je=Math.max(G.y,W.y,Z.y,ee.y);const Ie=u/16;function $e(Ve,gt,dt,Pt,qt,_t){const Dt=(dt+qt)/2,kt=(Pt+_t)/2,Ut=a.project(Ca(Dt),ns(kt)),en=Math.max(0,ie-Ut.x,me-Ut.y,Ut.x-Pe,Ut.y-je);ie=Math.min(ie,Ut.x),Pe=Math.max(Pe,Ut.x),me=Math.min(me,Ut.y),je=Math.max(je,Ut.y),en>Ie&&($e(Ve,Ut,dt,Pt,Dt,kt),$e(Ut,gt,Dt,kt,qt,_t))}$e(G,W,h,_,g,_),$e(W,Z,g,_,g,w),$e(Z,ee,g,w,h,w),$e(ee,G,h,w,h,_),ie-=Ie,me-=Ie,Pe+=Ie,je+=Ie;const Ge=1/Math.max(Pe-ie,je-me);return{scale:Ge,x:ie*Ge,y:me*Ge,x2:Pe*Ge,y2:je*Ge,projection:a}}const Fte=$l(new Float32Array(16));class jd{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,u){return{x:0,y:0,z:0}}unproject(a,u){return new fi(0,0)}projectTilePoint(a,u,h){return{x:a,y:u,z:0}}locationPoint(a,u,h=!0){return a._coordinatePoint(a.locationCoordinate(u),h)}pixelsPerMeter(a,u){return Ul(1,a)*u}pixelSpaceConversion(a,u,h){return 1}farthestPixelDistance(a){return _N(a,a.pixelsPerMeter)}pointCoordinate(a,u,h,g){const _=a.horizonLineFromTop(!1),w=new Q(u,Math.max(_,h));return a.rayIntersectionCoordinate(a.pointRayIntersection(w,g))}pointCoordinate3D(a,u,h){const g=new Q(u,h);if(a.elevation)return a.elevation.pointCoordinate(g);{const _=this.pointCoordinate(a,g.x,g.y,0);return[_.x,_.y,_.z]}}isPointAboveHorizon(a,u){if(a.elevation)return!this.pointCoordinate3D(a,u.x,u.y);const h=a.horizonLineFromTop();return u.y<h}createInversionMatrix(a,u){return Fte}createTileMatrix(a,u,h){let g,_,w;const T=h.canonical,I=$l(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=Sh(T,this);g=1,_=L.x+h.wrap*L.scale,w=L.y,gh(I,I,[g/L.scale,g/L.scale,a.pixelsPerMeter/u])}else g=u/a.zoomScale(T.z),_=(T.x+Math.pow(2,T.z)*h.wrap)*g,w=T.y*g;return My(I,I,[_,w,0]),gh(I,I,[g/Gn,g/Gn,1]),I}upVector(a,u,h){return[0,0,1]}upVectorScale(a,u,h){return{metersToTile:1}}}class zte extends jd{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[u,h]=this.parallels=a.parallels||[29.5,45.5],g=Math.sin(ae(u));this.n=(g+Math.sin(ae(h)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(a,u){const{n:h,c:g,r0:_}=this,w=ae(a-this.center[0]),T=ae(u),I=Math.sqrt(g-2*h*Math.sin(T))/h;return{x:I*Math.sin(w*h),y:I*Math.cos(w*h)-_,z:0}}unproject(a,u){const{n:h,c:g,r0:_}=this,w=_+u;let T=Math.atan2(a,Math.abs(w))*Math.sign(w);w*h<0&&(T-=Math.PI*Math.sign(a)*Math.sign(w));const I=ae(this.center[0])*h;T=ke(T,-Math.PI-I,Math.PI-I);const L=xe(ve(T/h)+this.center[0],-180,180),N=Math.asin(xe((g-(a*a+w*w)*h*h)/(2*h),-1,1)),G=xe(ve(N),-rs,rs);return new fi(L,G)}}const Jy=1.340264,Qy=-.081106,e0=893e-6,t0=.003796,R1=Math.sqrt(3)/2;class Nte extends jd{project(a,u){u=u/180*Math.PI,a=a/180*Math.PI;const h=Math.asin(R1*Math.sin(u)),g=h*h,_=g*g*g;return{x:.5*(a*Math.cos(h)/(R1*(Jy+3*Qy*g+_*(7*e0+9*t0*g)))/Math.PI+.5),y:1-.5*(h*(Jy+Qy*g+_*(e0+t0*g))/Math.PI+1),z:0}}unproject(a,u){a=(2*a-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=h*h,_=g*g*g;for(let N,G,W,Z=0;Z<12&&(G=h*(Jy+Qy*g+_*(e0+t0*g))-u,W=Jy+3*Qy*g+_*(7*e0+9*t0*g),N=G/W,h=xe(h-N,-Math.PI/3,Math.PI/3),g=h*h,_=g*g*g,!(Math.abs(N)<1e-12));++Z);const w=R1*a*(Jy+3*Qy*g+_*(7*e0+9*t0*g))/Math.cos(h),T=Math.asin(Math.sin(h)/R1),I=xe(180*w/Math.PI,-180,180),L=xe(180*T/Math.PI,-rs,rs);return new fi(I,L)}}class $te extends jd{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,u){return{x:.5+a/360,y:.5-u/360,z:0}}unproject(a,u){const h=360*(a-.5),g=xe(360*(.5-u),-rs,rs);return new fi(h,g)}}const Im=Math.PI/2;function O1(c){return Math.tan((Im+c)/2)}class jte extends jd{constructor(a){super(a),this.center=a.center||[0,30];const[u,h]=this.parallels=a.parallels||[30,30];let g=ae(u),_=ae(h);this.southernCenter=g+_<0,this.southernCenter&&(g=-g,_=-_);const w=Math.cos(g),T=O1(g);this.n=g===_?Math.sin(g):Math.log(w/Math.cos(_))/Math.log(O1(_)/T),this.f=w*Math.pow(O1(g),this.n)/this.n}project(a,u){u=ae(u),this.southernCenter&&(u=-u),a=ae(a-this.center[0]);const h=1e-6,{n:g,f:_}=this;_>0?u<-Im+h&&(u=-Im+h):u>Im-h&&(u=Im-h);const w=_/Math.pow(O1(u),g);let T=w*Math.sin(g*a),I=_-w*Math.cos(g*a);return T=.5*(T/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:T,y:this.southernCenter?I:1-I,z:0}}unproject(a,u){a=(2*a-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:h,f:g}=this,_=g-u,w=Math.sign(_),T=Math.sign(h)*Math.sqrt(a*a+_*_);let I=Math.atan2(a,Math.abs(_))*w;_*h<0&&(I-=Math.PI*Math.sign(a)*w);const L=xe(ve(I/h)+this.center[0],-180,180),N=xe(ve(2*Math.atan(Math.pow(g/T,1/h))-Im),-rs,rs);return new fi(L,this.southernCenter?-N:N)}}class bN extends jd{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,u){return{x:Dc(a),y:kc(u),z:0}}unproject(a,u){const h=Ca(a),g=ns(u);return new fi(h,g)}}const xN=ae(rs);class Ute extends jd{project(a,u){const h=(u=ae(u))*u,g=h*h;return{x:.5*((a=ae(a))*(.8707-.131979*h+g*(g*(.003971*h-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(a,u){a=(2*a-.5)*Math.PI;let h=u=(2*(1-u)-1)*Math.PI,g=25,_=0,w=h*h;do{w=h*h;const L=w*w;_=(h*(1.007226+w*(.015085+L*(.028874*w-.044475-.005916*L)))-u)/(1.007226+w*(.045255+L*(.259866*w-.311325-.005916*11*L))),h=xe(h-_,-xN,xN)}while(Math.abs(_)>1e-6&&--g>0);w=h*h;const T=xe(ve(a/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),I=ve(h);return new fi(T,I)}}const wN=ae(rs);class Vte extends jd{project(a,u){u=ae(u),a=ae(a);const h=Math.cos(u),g=2/Math.PI,_=Math.acos(h*Math.cos(a/2)),w=Math.sin(_)/_,T=.5*(a*g+2*h*Math.sin(a/2)/w)||0,I=.5*(u+Math.sin(u)/w)||0;return{x:.5*(T/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(a,u){let h=a=(2*a-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,_=25;const w=1e-6;let T=0,I=0;do{const L=Math.cos(g),N=Math.sin(g),G=2*N*L,W=N*N,Z=L*L,ee=Math.cos(h/2),ie=Math.sin(h/2),me=2*ee*ie,Pe=ie*ie,je=1-Z*ee*ee,Ie=je?1/je:0,$e=je?Math.acos(L*ee)*Math.sqrt(1/je):0,Ge=.5*(2*$e*L*ie+2*h/Math.PI)-a,Ve=.5*($e*N+g)-u,gt=.5*Ie*(Z*Pe+$e*L*ee*W)+1/Math.PI,dt=Ie*(me*G/4-$e*N*ie),Pt=.125*Ie*(G*ie-$e*N*Z*me),qt=.5*Ie*(W*ee+$e*Pe*L)+.5,_t=dt*Pt-qt*gt;T=(Ve*dt-Ge*qt)/_t,I=(Ge*Pt-Ve*gt)/_t,h=xe(h-T,-Math.PI,Math.PI),g=xe(g-I,-wN,wN)}while((Math.abs(T)>w||Math.abs(I)>w)&&--_>0);return new fi(ve(h),ve(g))}}class SN extends jd{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ae(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,u){const{scale:h,cosPhi:g}=this;return{x:ae(a)*g*h+.5,y:-Math.sin(ae(u))/g*h+.5,z:0}}unproject(a,u){const{scale:h,cosPhi:g}=this,_=-(u-.5)/h,w=xe(ve((a-.5)/h)/g,-180,180),T=Math.asin(xe(_*g,-1,1)),I=xe(ve(T),-rs,rs);return new fi(w,I)}}class Gte extends bN{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,u,h){const g=ky(a,u,h);return lo(g,g,Fy(Bc(h))),{x:g[0],y:g[1],z:g[2]}}locationPoint(a,u){const h=mm(u.lat,u.lng),g=Cs([],h),_=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(u),a._centerAltitude):a._centerAltitude;Oy(h,h,g,Ul(1,0)*Gn*_);const w=$l(new Float64Array(16));return mh(w,a.pixelMatrix,a.globeMatrix),lo(h,h,w),new Q(h[0],h[1])}pixelsPerMeter(a,u){return Ul(1,0)*u}pixelSpaceConversion(a,u,h){const g=Ul(1,a)*u,_=Br(Ul(1,45)*u,g,h);return this.pixelsPerMeter(a,u)/_}createTileMatrix(a,u,h){const g=qA(Bc(h.canonical));return mh(new Float64Array(16),a.globeMatrix,g)}createInversionMatrix(a,u){const{center:h}=a,g=Fy(Bc(u));return s1(g,g,ae(h.lng)),zA(g,g,ae(h.lat)),gh(g,g,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(a,u,h,g){return ZF(a,u,h,!0)||new vm(0,0)}pointCoordinate3D(a,u,h){const g=this.pointCoordinate(a,u,h,0);return[g.x,g.y,g.z]}isPointAboveHorizon(a,u){return!ZF(a,u.x,u.y,!1)}farthestPixelDistance(a){const u=function(g,_){const w=g.cameraToCenterDistance,T=g._centerAltitude*_,I=g._camera,L=g._camera.forward(),N=Cu([],Ea([],L,-w),[0,0,T]),G=g.worldSize/(2*Math.PI),W=[0,0,-G],Z=g.width/g.height,ee=Math.tan(g.fovAboveCenter),ie=Ea([],I.up(),ee),me=Ea([],I.right(),ee*Z),Pe=Cs([],Cu([],Cu([],L,ie),me)),je=[];let Ie;if(new UA(N,Pe).closestPointOnSphere(W,G,je)){const $e=Cu([],je,W),Ge=jl([],$e,N);Ie=Math.cos(g.fovAboveCenter)*Py(Ge)}else{const $e=jl([],N,W),Ge=jl([],W,N);Cs(Ge,Ge);const Ve=Py($e)-G;Ie=Math.sqrt(Ve*(Ve+2*G));const gt=Math.acos(Ie/(G+Ve))-Math.acos(il(L,Ge));Ie*=Math.cos(gt)}return 1.01*Ie}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),h=gm(a.zoom);if(h>0){const g=_N(a,Ul(1,a.center.lat)*a.worldSize),_=a.worldSize/(2*Math.PI),w=Math.max(a.width,a.height)/a.worldSize*Math.PI;return Br(u,g+_*(1-Math.cos(w)),Math.pow(h,10))}return u}upVector(a,u,h){return ky(u,h,a,1)}upVectorScale(a){return{metersToTile:a1(c1(Bc(a)))}}}function EN(c){const a=c.parallels,u=!!a&&Math.abs(a[0]+a[1])<.01;switch(c.name){case"mercator":return new bN(c);case"equirectangular":return new $te(c);case"naturalEarth":return new Ute(c);case"equalEarth":return new Nte(c);case"winkelTripel":return new Vte(c);case"albers":return u?new SN(c):new zte(c);case"lambertConformalConic":return u?new SN(c):new jte(c);case"globe":return new Gte(c)}throw new Error(`Invalid projection name: ${c.name}`)}const Hte=_1.types,Wte=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function L1(c,a,u,h,g,_,w,T,I,L,N,G,W){const Z=T?Math.min($d,Math.round(T[0])):0,ee=T?Math.min($d,Math.round(T[1])):0;c.emplaceBack(a,u,Math.round(32*h),Math.round(32*g),_,w,(Z<<1)+(I?1:0),ee,16*L,16*N,256*G,256*W)}function B1(c,a,u,h,g,_,w){c.emplaceBack(a,u,h,g,_,w)}function D1(c,a,u,h,g){c.emplaceBack(a,u,h,g),c.emplaceBack(a,u,h,g),c.emplaceBack(a,u,h,g),c.emplaceBack(a,u,h,g)}function Xte(c){for(const a of c.sections)if(LA(a.text))return!0;return!1}class CM{constructor(a){this.layoutVertexArray=new $t,this.indexArray=new Dn,this.programConfigurations=a,this.segments=new po,this.dynamicLayoutVertexArray=new Wt,this.opacityVertexArray=new zn,this.placedSymbolArray=new ho,this.globeExtVertexArray=new Zt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,tte.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,rte.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Wte,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,nte.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}En(CM,"SymbolBuffers");class TM{constructor(a,u,h){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new h,this.segments=new po,this.collisionVertexArray=new Tr,this.collisionVertexArrayExt=new Cr}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,ite.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,ote.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}En(TM,"CollisionBuffers");class Ud{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(w=>w.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$l([]),this.placementViewportMatrix=$l([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pM(this.zoom,u["text-size"]),this.iconSizeData=pM(this.zoom,u["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(w=>Ta[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=a.sourceID,this.projection=a.projection}createArrays(){this.text=new CM(new ph(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new CM(new ph(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new Es,this.lineVertexArray=new um,this.symbolInstances=new Ri}calculateGlyphDependencies(a,u,h,g,_){for(let w=0;w<a.length;w++)if(u[a.charCodeAt(w)]=!0,g&&_){const T=qy[a.charAt(w)];T&&(u[T.charCodeAt(0)]=!0)}}populate(a,u,h,g){const _=this.layers[0],w=_.layout,T=this.projection.name==="globe",I=w.get("text-font"),L=w.get("text-field"),N=w.get("icon-image"),G=(L.value.kind!=="constant"||L.value.value instanceof Pr&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),W=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,Z=w.get("symbol-sort-key");if(this.features=[],!G&&!W)return;const ee=u.iconDependencies,ie=u.glyphDependencies,me=u.availableImages,Pe=new V(this.zoom);for(const{feature:je,id:Ie,index:$e,sourceLayerIndex:Ge}of a){const Ve=_._featureFilter.needGeometry,gt=bh(je,Ve);if(!_._featureFilter.filter(Pe,gt,h))continue;if(Ve||(gt.geometry=Tu(je,h,g)),T&&je.type!==1&&h.z<=5){const _t=gt.geometry,Dt=.98078528056,kt=(Ut,en)=>il(ky(Ut.x,Ut.y,h,1),ky(en.x,en.y,h,1))<Dt;for(let Ut=0;Ut<_t.length;Ut++)_t[Ut]=ree(_t[Ut],kt)}let dt,Pt;if(G){const _t=_.getValueAndResolveTokens("text-field",gt,h,me),Dt=Pr.factory(_t);Xte(Dt)&&(this.hasRTLText=!0),(!this.hasRTLText||A()==="unavailable"||this.hasRTLText&&z.isParsed())&&(dt=lte(Dt,_,gt))}if(W){const _t=_.getValueAndResolveTokens("icon-image",gt,h,me);Pt=_t instanceof Yr?_t:Yr.fromString(_t)}if(!dt&&!Pt)continue;const qt=this.sortFeaturesByKey?Z.evaluate(gt,{},h):void 0;if(this.features.push({id:Ie,text:dt,icon:Pt,index:$e,sourceLayerIndex:Ge,geometry:gt.geometry,properties:je.properties,type:Hte[je.type],sortKey:qt}),Pt&&(ee[Pt.name]=!0),dt){const _t=I.evaluate(gt,{},h).join(","),Dt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ta.vertical)>=0;for(const kt of dt.sections)if(kt.image)ee[kt.image.name]=!0;else{const Ut=xy(dt.toString()),en=kt.fontStack||_t,Mt=ie[en]=ie[en]||{};this.calculateGlyphDependencies(kt.text,Mt,Dt,this.allowVerticalPlacement,Ut)}}}w.get("symbol-placement")==="line"&&(this.features=function(je){const Ie={},$e={},Ge=[];let Ve=0;function gt(_t){Ge.push(je[_t]),Ve++}function dt(_t,Dt,kt){const Ut=$e[_t];return delete $e[_t],$e[Dt]=Ut,Ge[Ut].geometry[0].pop(),Ge[Ut].geometry[0]=Ge[Ut].geometry[0].concat(kt[0]),Ut}function Pt(_t,Dt,kt){const Ut=Ie[Dt];return delete Ie[Dt],Ie[_t]=Ut,Ge[Ut].geometry[0].shift(),Ge[Ut].geometry[0]=kt[0].concat(Ge[Ut].geometry[0]),Ut}function qt(_t,Dt,kt){const Ut=kt?Dt[0][Dt[0].length-1]:Dt[0][0];return`${_t}:${Ut.x}:${Ut.y}`}for(let _t=0;_t<je.length;_t++){const Dt=je[_t],kt=Dt.geometry,Ut=Dt.text?Dt.text.toString():null;if(!Ut){gt(_t);continue}const en=qt(Ut,kt),Mt=qt(Ut,kt,!0);if(en in $e&&Mt in Ie&&$e[en]!==Ie[Mt]){const dn=Pt(en,Mt,kt),An=dt(en,Mt,Ge[dn].geometry);delete Ie[en],delete $e[Mt],$e[qt(Ut,Ge[An].geometry,!0)]=An,Ge[dn].geometry=null}else en in $e?dt(en,Mt,kt):Mt in Ie?Pt(en,Mt,kt):(gt(_t),Ie[en]=Ve-1,$e[Mt]=Ve-1)}return Ge.filter(_t=>_t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((je,Ie)=>je.sortKey-Ie.sortKey)}update(a,u,h,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,h,g),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,h,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=EN(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const h=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:g,y:_}of u)this.lineVertexArray.emplaceBack(g,_);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(a,u,h,g,_,w,T,I,L,N,G,W,Z,ee){const ie=a.indexArray,me=a.layoutVertexArray,Pe=a.globeExtVertexArray,je=a.segments.prepareSegment(4*u.length,me,ie,this.canOverlap?w.sortKey:void 0),Ie=this.glyphOffsetArray.length,$e=je.vertexLength,Ge=this.allowVerticalPlacement&&T===Ta.vertical?Math.PI/2:0,Ve=w.text&&w.text.sections;for(let dt=0;dt<u.length;dt++){const{tl:Pt,tr:qt,bl:_t,br:Dt,tex:kt,pixelOffsetTL:Ut,pixelOffsetBR:en,minFontScaleX:Mt,minFontScaleY:dn,glyphOffset:An,isSDF:mn,sectionIndex:hr}=u[dt],tn=je.vertexLength,Nn=An[1];if(L1(me,L.x,L.y,Pt.x,Nn+Pt.y,kt.x,kt.y,h,mn,Ut.x,Ut.y,Mt,dn),L1(me,L.x,L.y,qt.x,Nn+qt.y,kt.x+kt.w,kt.y,h,mn,en.x,Ut.y,Mt,dn),L1(me,L.x,L.y,_t.x,Nn+_t.y,kt.x,kt.y+kt.h,h,mn,Ut.x,en.y,Mt,dn),L1(me,L.x,L.y,Dt.x,Nn+Dt.y,kt.x+kt.w,kt.y+kt.h,h,mn,en.x,en.y,Mt,dn),I){const{x:pr,y:$r,z:mr}=I.anchor,[Zn,Ci,vr]=I.up;B1(Pe,pr,$r,mr,Zn,Ci,vr),B1(Pe,pr,$r,mr,Zn,Ci,vr),B1(Pe,pr,$r,mr,Zn,Ci,vr),B1(Pe,pr,$r,mr,Zn,Ci,vr),D1(a.dynamicLayoutVertexArray,pr,$r,mr,Ge)}else D1(a.dynamicLayoutVertexArray,L.x,L.y,L.z,Ge);ie.emplaceBack(tn,tn+1,tn+2),ie.emplaceBack(tn+1,tn+2,tn+3),je.vertexLength+=4,je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(An[0]),dt!==u.length-1&&hr===u[dt+1].sectionIndex||a.programConfigurations.populatePaintArrays(me.length,w,w.index,{},Z,ee,Ve&&Ve[hr])}const gt=I?I.anchor:L;a.placedSymbolArray.emplaceBack(gt.x,gt.y,gt.z,L.x,L.y,Ie,this.glyphOffsetArray.length-Ie,$e,N,G,L.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],T,0,!1,0,W,0)}_commitLayoutVertex(a,u,h,g,_,w,T){a.emplaceBack(u,h,g,_,w,Math.round(T.x),Math.round(T.y))}_addCollisionDebugVertices(a,u,h,g,_,w,T){const I=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),L=I.vertexLength,N=T.tileAnchorX,G=T.tileAnchorY;for(let Z=0;Z<4;Z++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(u,-a.padding,-a.padding),h.collisionVertexArrayExt.emplaceBack(u,a.padding,-a.padding),h.collisionVertexArrayExt.emplaceBack(u,a.padding,a.padding),h.collisionVertexArrayExt.emplaceBack(u,-a.padding,a.padding),this._commitLayoutVertex(h.layoutVertexArray,g,_,w,N,G,new Q(a.x1,a.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,_,w,N,G,new Q(a.x2,a.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,_,w,N,G,new Q(a.x2,a.y2)),this._commitLayoutVertex(h.layoutVertexArray,g,_,w,N,G,new Q(a.x1,a.y2)),I.vertexLength+=4;const W=h.indexArray;W.emplaceBack(L,L+1),W.emplaceBack(L+1,L+2),W.emplaceBack(L+2,L+3),W.emplaceBack(L+3,L),I.primitiveLength+=4}_addTextDebugCollisionBoxes(a,u,h,g,_,w){for(let T=g;T<_;T++){const I=h.get(T),L=this.getSymbolInstanceTextSize(a,w,u,T);this._addCollisionDebugVertices(I,L,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(a,u,h,g,_,w){for(let T=g;T<_;T++){const I=h.get(T),L=this.getSymbolInstanceIconSize(a,u,w.placedIconSymbolIndex);this._addCollisionDebugVertices(I,L,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}generateCollisionDebugBuffers(a,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new TM(Tn,Vz.members,No),this.iconCollisionBox=new TM(Tn,Vz.members,No);const h=wm(this.iconSizeData,a),g=wm(this.textSizeData,a);for(let _=0;_<this.symbolInstances.length;_++){const w=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(g,a,u,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,a,u,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(h,a,u,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(h,a,u,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(a,u,h,g){const _=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),w=S1(this.textSizeData,a,_)/Wo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(a,u,h){const g=this.icon.placedSymbolArray.get(h),_=S1(this.iconSizeData,a,g);return this.tilePixelRatio*_}_commitDebugCollisionVertexUpdate(a,u,h){a.emplaceBack(u,-h,-h),a.emplaceBack(u,h,-h),a.emplaceBack(u,h,h),a.emplaceBack(u,-h,h)}_updateTextDebugCollisionBoxes(a,u,h,g,_,w){for(let T=g;T<_;T++){const I=h.get(T),L=this.getSymbolInstanceTextSize(a,w,u,T);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,L,I.padding)}}_updateIconDebugCollisionBoxes(a,u,h,g,_,w){for(let T=g;T<_;T++){const I=h.get(T),L=this.getSymbolInstanceIconSize(a,u,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,L,I.padding)}}updateCollisionDebugBuffers(a,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=wm(this.iconSizeData,a),g=wm(this.textSizeData,a);for(let _=0;_<this.symbolInstances.length;_++){const w=this.symbolInstances.get(_);this._updateTextDebugCollisionBoxes(g,a,u,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,a,u,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(h,a,u,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,a,u,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,u,h,g,_,w,T,I,L){const N={};if(u<h){const{x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e,featureIndex:Ge}=a.get(u);N.textBox={x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e},N.textFeatureIndex=Ge}if(g<_){const{x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e,featureIndex:Ge}=a.get(g);N.verticalTextBox={x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e},N.verticalTextFeatureIndex=Ge}if(w<T){const{x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e,featureIndex:Ge}=a.get(w);N.iconBox={x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e},N.iconFeatureIndex=Ge}if(I<L){const{x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e,featureIndex:Ge}=a.get(I);N.verticalIconBox={x1:G,y1:W,x2:Z,y2:ee,padding:ie,projectedAnchorX:me,projectedAnchorY:Pe,projectedAnchorZ:je,tileAnchorX:Ie,tileAnchorY:$e},N.verticalIconFeatureIndex=Ge}return N}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){const h=a.placedSymbolArray.get(u),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)a.indexArray.emplaceBack(_,_+1,_+2),a.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),h=Math.cos(a),g=[],_=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const I=this.symbolInstances.get(T);g.push(0|Math.round(u*I.tileAnchorX+h*I.tileAnchorY)),_.push(I.featureIndex)}return w.sort((T,I)=>g[T]-g[I]||_[I]-_[T]),w}addToSortKeyRanges(a,u){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===u?h.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const h=this.symbolInstances.get(u);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:_,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:T,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:L}=h;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),_>=0&&_!==g&&this.addIndicesForPlacedSymbol(this.text,_),w>=0&&w!==_&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),T>=0&&this.addIndicesForPlacedSymbol(this.text,T),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}En(Ud,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ud.MAX_GLYPHS=65535,Ud.addDynamicAttributes=D1;const qte=new Be({"symbol-placement":new re(xt.layout_symbol["symbol-placement"]),"symbol-spacing":new re(xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new re(xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ye(xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new re(xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new re(xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new re(xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new re(xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new re(xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ye(xt.layout_symbol["icon-size"]),"icon-text-fit":new re(xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new re(xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ye(xt.layout_symbol["icon-image"]),"icon-rotate":new ye(xt.layout_symbol["icon-rotate"]),"icon-padding":new re(xt.layout_symbol["icon-padding"]),"icon-keep-upright":new re(xt.layout_symbol["icon-keep-upright"]),"icon-offset":new ye(xt.layout_symbol["icon-offset"]),"icon-anchor":new ye(xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new re(xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new re(xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new re(xt.layout_symbol["text-rotation-alignment"]),"text-field":new ye(xt.layout_symbol["text-field"]),"text-font":new ye(xt.layout_symbol["text-font"]),"text-size":new ye(xt.layout_symbol["text-size"]),"text-max-width":new ye(xt.layout_symbol["text-max-width"]),"text-line-height":new ye(xt.layout_symbol["text-line-height"]),"text-letter-spacing":new ye(xt.layout_symbol["text-letter-spacing"]),"text-justify":new ye(xt.layout_symbol["text-justify"]),"text-radial-offset":new ye(xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new re(xt.layout_symbol["text-variable-anchor"]),"text-anchor":new ye(xt.layout_symbol["text-anchor"]),"text-max-angle":new re(xt.layout_symbol["text-max-angle"]),"text-writing-mode":new re(xt.layout_symbol["text-writing-mode"]),"text-rotate":new ye(xt.layout_symbol["text-rotate"]),"text-padding":new re(xt.layout_symbol["text-padding"]),"text-keep-upright":new re(xt.layout_symbol["text-keep-upright"]),"text-transform":new ye(xt.layout_symbol["text-transform"]),"text-offset":new ye(xt.layout_symbol["text-offset"]),"text-allow-overlap":new re(xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new re(xt.layout_symbol["text-ignore-placement"]),"text-optional":new re(xt.layout_symbol["text-optional"])});var AM={paint:new Be({"icon-opacity":new ye(xt.paint_symbol["icon-opacity"]),"icon-color":new ye(xt.paint_symbol["icon-color"]),"icon-halo-color":new ye(xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ye(xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ye(xt.paint_symbol["icon-halo-blur"]),"icon-translate":new re(xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new re(xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ye(xt.paint_symbol["text-opacity"]),"text-color":new ye(xt.paint_symbol["text-color"],{runtimeType:Rr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ye(xt.paint_symbol["text-halo-color"]),"text-halo-width":new ye(xt.paint_symbol["text-halo-width"]),"text-halo-blur":new ye(xt.paint_symbol["text-halo-blur"]),"text-translate":new re(xt.paint_symbol["text-translate"]),"text-translate-anchor":new re(xt.paint_symbol["text-translate-anchor"])}),layout:qte};class CN{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Qn,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}En(CN,"FormatSectionOverride",{omit:["defaultValue"]});class k1 extends Nl{constructor(a){super(a,AM)}recalculate(a,u){super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(a,u,h,g){const _=this.layout.get(a).evaluate(u,{},h,g),w=this._unevaluatedLayout._values[a];return w.isDataDriven()||Id(w.value)||!_?_:function(T,I){return I.replace(/{([^{}]+)}/g,(L,N)=>N in T?String(T[N]):"")}(u.properties,_)}createBucket(a){return new Ud(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of AM.paint.overridableProperties){if(!k1.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),h=new CN(u),g=new nm(h,u.property.specification);let _=null;_=u.value.kind==="constant"||u.value.kind==="source"?new uy("source",g):new oh("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[a]=new we(u.property,_,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&k1.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const h=a.get("text-field"),g=AM.paint.properties[u];let _=!1;const w=T=>{for(const I of T)if(g.overrides&&g.overrides.hasOverride(I))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Pr)w(h.value.value.sections);else if(h.value.kind==="source"){const T=L=>{_||(L instanceof pu&&Ii(L.value)===he?w(L.value.sections):L instanceof Ic?w(L.sections):L.eachChild(T))},I=h.value;I._styleExpression&&T(I._styleExpression.expression)}return _}getProgramConfiguration(a){return new Fd(this,a)}}var Yte={paint:new Be({"background-color":new re(xt.paint_background["background-color"]),"background-pattern":new re(xt.paint_background["background-pattern"]),"background-opacity":new re(xt.paint_background["background-opacity"])})},Zte={paint:new Be({"raster-opacity":new re(xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new re(xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new re(xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new re(xt.paint_raster["raster-brightness-max"]),"raster-saturation":new re(xt.paint_raster["raster-saturation"]),"raster-contrast":new re(xt.paint_raster["raster-contrast"]),"raster-resampling":new re(xt.paint_raster["raster-resampling"]),"raster-fade-duration":new re(xt.paint_raster["raster-fade-duration"])})};class Kte extends Nl{constructor(a){super(a,{}),this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}var Jte={paint:new Be({"sky-type":new re(xt.paint_sky["sky-type"]),"sky-atmosphere-sun":new re(xt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new re(xt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new re(xt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new re(xt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Le(xt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new re(xt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new re(xt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new re(xt.paint_sky["sky-opacity"])})};function MM(c,a,u){const h=[0,0,1],g=GF([]);return WF(g,g,u?-ae(c)+Math.PI:ae(c)),HF(g,g,-ae(a)),$F(h,h,g),Cs(h,h)}const Qte={circle:class extends Nl{constructor(c){super(c,uee)}createBucket(c){return new eM(c)}queryRadius(c){const a=c;return ym("circle-radius",this,a)+ym("circle-stroke-width",this,a)+f1(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,u,h,g,_,w,T){const I=pz(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,c.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u);return mz(c,h,_,w,T,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,L)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new Fd(this,c)}},heatmap:class extends Nl{createBucket(c){return new vz(c)}constructor(c){super(c,pee),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=iM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return ym("heatmap-radius",this,c)}queryIntersectsFeature(c,a,u,h,g,_,w,T){const I=this.paint.get("heatmap-radius").evaluate(a,u);return mz(c,h,_,w,T,!0,!0,new Q(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new Fd(this,c)}},hillshade:class extends Nl{constructor(c){super(c,mee)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Nl{constructor(c){super(c,Ree)}getProgramIds(){const c=this.paint.get("fill-pattern"),a=c&&c.constantOr(1),u=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(c){return new Fd(this,c)}recalculate(c,a){super.recalculate(c,a);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new v1(c)}queryRadius(){return f1(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,u,h,g,_){return!c.queryGeometry.isAboveHorizon&&cz(hz(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,c.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Nl{constructor(c){super(c,Xee)}createBucket(c){return new Hy(c)}queryRadius(){return f1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new Fd(this,c)}queryIntersectsFeature(c,a,u,h,g,_,w,T,I){const L=pz(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,c.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(a,u),G=this.paint.get("fill-extrusion-base").evaluate(a,u),W=[0,0],Z=T&&_.elevation,ee=_.elevation?_.elevation.exaggeration():1,ie=c.tile.getBucket(this);if(Z&&ie instanceof Hy){const $e=ie.centroidVertexArray,Ge=I+1;Ge<$e.length&&(W[0]=$e.geta_centroid_pos0(Ge),W[1]=$e.geta_centroid_pos1(Ge))}if(W[0]===0&&W[1]===1)return!1;_.projection.name==="globe"&&(h=Dz([h],[new Q(0,0),new Q(Gn,Gn)],c.tileID.canonical).map($e=>$e.polygon).flat());const me=Z?T:null,[Pe,je]=function($e,Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut){return $e.projection.name==="globe"?function(en,Mt,dn,An,mn,hr,tn,Nn,pr,$r,mr){const Zn=[],Ci=[],vr=en.projection.upVectorScale(mr,en.center.lat,en.worldSize).metersToTile,yr=[0,0,0,1],hi=[0,0,0,1],xi=(pi,Ui,eo,go)=>{pi[0]=Ui,pi[1]=eo,pi[2]=go,pi[3]=1},wi=Bz();dn>0&&(dn+=wi),An+=wi;for(const pi of Mt){const Ui=[],eo=[];for(const go of pi){const mi=go.x+mn.x,Co=go.y+mn.y,vo=en.projection.projectTilePoint(mi,Co,mr),qi=en.projection.upVector(mr,go.x,go.y);let Vr=dn,yo=An;if(tn){const Si=Nz(mi,Co,dn,An,tn,Nn,pr,$r);Vr+=Si.base,yo+=Si.top}dn!==0?xi(yr,vo.x+qi[0]*vr*Vr,vo.y+qi[1]*vr*Vr,vo.z+qi[2]*vr*Vr):xi(yr,vo.x,vo.y,vo.z),xi(hi,vo.x+qi[0]*vr*yo,vo.y+qi[1]*vr*yo,vo.z+qi[2]*vr*yo),lo(yr,yr,hr),lo(hi,hi,hr),Ui.push(new xm(yr[0],yr[1],yr[2])),eo.push(new xm(hi[0],hi[1],hi[2]))}Zn.push(Ui),Ci.push(eo)}return[Zn,Ci]}($e,Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt,Ut):qt?function(en,Mt,dn,An,mn,hr,tn,Nn,pr){const $r=[],mr=[],Zn=[0,0,0,1];for(const Ci of en){const vr=[],yr=[];for(const hi of Ci){const xi=hi.x+An.x,wi=hi.y+An.y,pi=Nz(xi,wi,Mt,dn,hr,tn,Nn,pr);Zn[0]=xi,Zn[1]=wi,Zn[2]=pi.base,Zn[3]=1,vh(Zn,Zn,mn),Zn[3]=Math.max(Zn[3],1e-5);const Ui=new xm(Zn[0]/Zn[3],Zn[1]/Zn[3],Zn[2]/Zn[3]);Zn[0]=xi,Zn[1]=wi,Zn[2]=pi.top,Zn[3]=1,vh(Zn,Zn,mn),Zn[3]=Math.max(Zn[3],1e-5);const eo=new xm(Zn[0]/Zn[3],Zn[1]/Zn[3],Zn[2]/Zn[3]);vr.push(Ui),yr.push(eo)}$r.push(vr),mr.push(yr)}return[$r,mr]}(Ge,Ve,gt,dt,Pt,qt,_t,Dt,kt):function(en,Mt,dn,An,mn){const hr=[],tn=[],Nn=mn[8]*Mt,pr=mn[9]*Mt,$r=mn[10]*Mt,mr=mn[11]*Mt,Zn=mn[8]*dn,Ci=mn[9]*dn,vr=mn[10]*dn,yr=mn[11]*dn;for(const hi of en){const xi=[],wi=[];for(const pi of hi){const Ui=pi.x+An.x,eo=pi.y+An.y,go=mn[0]*Ui+mn[4]*eo+mn[12],mi=mn[1]*Ui+mn[5]*eo+mn[13],Co=mn[2]*Ui+mn[6]*eo+mn[14],vo=mn[3]*Ui+mn[7]*eo+mn[15],qi=go+Nn,Vr=mi+pr,yo=Co+$r,Si=Math.max(vo+mr,1e-5),Ms=go+Zn,_o=mi+Ci,Xo=Co+vr,$o=Math.max(vo+yr,1e-5);xi.push(new xm(qi/Si,Vr/Si,yo/Si)),wi.push(new xm(Ms/$o,_o/$o,Xo/$o))}hr.push(xi),tn.push(wi)}return[hr,tn]}(Ge,Ve,gt,dt,Pt)}(_,h,G,N,L,w,me,W,ee,_.center.lat,c.tileID.canonical),Ie=c.queryGeometry;return function($e,Ge,Ve){let gt=1/0;cz(Ve,Ge)&&(gt=zz(Ve,Ge[0]));for(let dt=0;dt<Ge.length;dt++){const Pt=Ge[dt],qt=$e[dt];for(let _t=0;_t<Pt.length-1;_t++){const Dt=Pt[_t],kt=[Dt,Pt[_t+1],qt[_t+1],qt[_t],Dt];lz(Ve,kt)&&(gt=Math.min(gt,zz(Ve,kt)))}}return gt!==1/0&&gt}(Pe,je,Ie.isPointQuery()?Ie.screenBounds:Ie.screenGeometry)}},line:class extends Nl{constructor(c){super(c,$z),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof Kv,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=jz.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new w1(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new Fd(this,c)}queryRadius(c){const a=c,u=Uz(ym("line-width",this,a),ym("line-gap-width",this,a)),h=ym("line-offset",this,a);return u/2+Math.abs(h)+f1(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,u,h,g,_){if(c.queryGeometry.isAboveHorizon)return!1;const w=hz(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,c.pixelToTileUnitsFactor),T=c.pixelToTileUnitsFactor/2*Uz(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),I=this.paint.get("line-offset").evaluate(a,u);return I&&(h=function(L,N){const G=[],W=new Q(0,0);for(let Z=0;Z<L.length;Z++){const ee=L[Z],ie=[];for(let me=0;me<ee.length;me++){const Pe=ee[me],je=ee[me+1],Ie=me===0?W:Pe.sub(ee[me-1])._unit()._perp(),$e=me===ee.length-1?W:je.sub(Pe)._unit()._perp(),Ge=Ie._add($e)._unit();Ge._mult(1/(Ge.x*$e.x+Ge.y*$e.y)),ie.push(Ge._mult(N)._add(Pe))}G.push(ie)}return G}(h,I*c.pixelToTileUnitsFactor)),function(L,N,G){for(let W=0;W<N.length;W++){const Z=N[W];if(L.length>=3){for(let ee=0;ee<Z.length;ee++)if(xh(L,Z[ee]))return!0}if(see(L,Z,G))return!0}return!1}(w,h,T)}isTileClipped(){return!0}},symbol:k1,background:class extends Nl{constructor(c){super(c,Yte)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Nl{constructor(c){super(c,Zte)}getProgramIds(){return["raster"]}},sky:class extends Nl{constructor(c){super(c,Jte),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=iM({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(c,a){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),g=!h,_=c.style.light,w=_.properties.get("position");return g&&_.properties.get("anchor")==="viewport"&&it("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?MM(w.azimuthal,90-w.polar,a):MM(h[0],90-h[1],a)}const u=this.paint.get("sky-gradient-center");return MM(u[0],90-u[1],a)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}}};class n0{constructor(a,u,h,g){this.context=a,this.format=h,this.texture=a.gl.createTexture(),this.update(u,g)}update(a,u,h){const{width:g,height:_}=a,{context:w}=this,{gl:T}=w,{HTMLImageElement:I,HTMLCanvasElement:L,HTMLVideoElement:N,ImageData:G,ImageBitmap:W}=p;if(T.bindTexture(T.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!u||u.premultiply!==!1)),h||this.size&&this.size[0]===g&&this.size[1]===_){const{x:Z,y:ee}=h||{x:0,y:0};a instanceof I||a instanceof L||a instanceof N||a instanceof G||W&&a instanceof W?T.texSubImage2D(T.TEXTURE_2D,0,Z,ee,T.RGBA,T.UNSIGNED_BYTE,a):T.texSubImage2D(T.TEXTURE_2D,0,Z,ee,g,_,T.RGBA,T.UNSIGNED_BYTE,a.data)}else this.size=[g,_],a instanceof I||a instanceof L||a instanceof N||a instanceof G||W&&a instanceof W?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,a):T.texImage2D(T.TEXTURE_2D,0,this.format,g,_,0,this.format,T.UNSIGNED_BYTE,a.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&T.generateMipmap(T.TEXTURE_2D)}bind(a,u){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),a!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,a),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?a===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:a),this.filter=a),u!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class ene{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class tne{constructor(){this.tasks={},this.taskQueue=[],st(["process"],this),this.invoker=new ene(this.process),this.nextId=0}add(a,u){const h=this.nextId++,g=function({type:_,isSymbolTile:w,zoom:T}){return T=T||0,_==="message"?0:_!=="maybePrepare"||w?_!=="parseTile"||w?_==="parseTile"&&w?300-T:_==="maybePrepare"&&w?400-T:500:200-T:100-T}(u);if(g===0){cn();try{a()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:a,metadata:u,priority:g,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){cn();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const u=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let a=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const _=this.tasks[this.taskQueue[g]];_.priority<u&&(u=_.priority,a=g)}if(a===null)return null;const h=this.taskQueue[a];return this.taskQueue.splice(a,1),h}remove(){this.invoker.remove()}}class TN{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const h=a[u];this._stringToNumber[h]=u,this._numberToString[u]=h}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const nne=["tile","layer","source","sourceLayer","state"];class AN{constructor(a,u,h,g,_){this.type="Feature",this._vectorTileFeature=a,this._z=u,this._x=h,this._y=g,this.properties=a.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(a.id=this.id);for(const u of nne)this[u]!==void 0&&(a[u]=this[u]);return a}}const al=32,Fc=33,Vd=new Uint16Array(8184);for(let c=0;c<2046;c++){let a=c+2,u=0,h=0,g=0,_=0,w=0,T=0;for(1&a?g=_=w=al:u=h=T=al;(a>>=1)>1;){const L=u+g>>1,N=h+_>>1;1&a?(g=u,_=h,u=w,h=T):(u=g,h=_,g=w,_=T),w=L,T=N}const I=4*c;Vd[I+0]=u,Vd[I+1]=h,Vd[I+2]=g,Vd[I+3]=_}const zc=new Uint16Array(2178),Gd=new Uint8Array(1089),F1=new Uint16Array(1089);function MN(c){return c===0?-.03125:c===32?.03125:0}var PN=Je([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const IN={type:2,extent:Gn,loadGeometry:()=>[[new Q(0,0),new Q(Gn+1,0),new Q(Gn+1,Gn+1),new Q(0,Gn+1),new Q(0,0)]]};class PM{constructor(a,u,h,g,_){this.tileID=a,this.uid=pt(),this.uses=0,this.tileSize=u,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=_,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(a){const u=a+this.timeAdded;u<Or.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Sh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,u,h){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(g,_){const w={};if(!_)return w;for(const T of g){const I=T.layerIds.map(L=>_.getLayer(L)).filter(Boolean);if(I.length!==0){T.layers=I,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(L=>I.filter(N=>N.id===L)[0]));for(const L of I)w[L.id]=T}}return w}(a.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof Ud){if(this.hasSymbolBuckets=!0,!h)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof Ud&&_.hasRTLText){this.hasRTLText=!0,z.isLoading()||z.isLoaded()||A()!=="deferred"||F();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas)}else this.collisionBoxArray=new di}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.id]}upload(a){for(const h in this.buckets){const g=this.buckets[h];g.uploadPending()&&g.upload(a)}const u=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new n0(a,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n0(a,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n0(a,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,u,h,g,_,w,T,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:T,transform:w,params:_,tileTransform:this.tileTransform},a,u,h):{}}querySourceFeatures(a,u){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const g=h.loadVTLayers(),_=u?u.sourceLayer:"",w=g._geojsonTileLayer||g[_];if(!w)return;const T=sm(u&&u.filter),{z:I,x:L,y:N}=this.tileID.canonical,G={z:I,x:L,y:N};for(let W=0;W<w.length;W++){const Z=w.feature(W);if(T.needGeometry){const me=bh(Z,!0);if(!T.filter(new V(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!T.filter(new V(this.tileID.overscaledZ),Z))continue;const ee=h.getId(Z,_),ie=new AN(Z,I,L,N,ee);ie.tile=G,a.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const h=rn(a.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const h=Date.now();let g=!1;if(this.expirationTime>h)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=h+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0||!u)return;const h=this.latestFeatureIndex.loadVTLayers(),g=u.style.listImages();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const w=this.buckets[_],T=w.layers[0].sourceLayer||"_geojsonTileLayer",I=h[T],L=a[T];if(!I||!L||Object.keys(L).length===0)continue;if(w.update(L,I,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof w1||w instanceof v1){const G=u.style._getSourceCache(w.layers[0].source);u._terrain&&u._terrain.enabled&&G&&w.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(G.id,this.tileID)}const N=u&&u.style&&u.style.getLayer(_);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Or.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=Or.now()+a}setTexture(a,u){const h=u.context,g=h.gl;this.texture=this.texture||u.getTileTexture(a.width),this.texture?this.texture.update(a,{useMipmap:!0}):(this.texture=new n0(h,a,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(a,u){const h={};for(const g of u)h[g]=!0;this.dependencies[a]=h}hasDependency(a,u){for(const h of a){const g=this.dependencies[h];if(g){for(const _ of u)if(g[_])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const h=Tu(IN,this.tileID.canonical,this.tileTransform)[0],g=new Xt,_=new oa;for(let w=0;w<h.length;w++){const{x:T,y:I}=h[w];g.emplaceBack(T,I),_.emplaceBack(w)}_.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(_),this._tileDebugBuffer=a.createVertexBuffer(g,By.members),this._tileDebugSegments=po.simpleSegment(0,0,g.length,_.length)}_makeTileBoundsBuffers(a,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const h=Tu(IN,this.tileID.canonical,this.tileTransform)[0];let g,_;if(this.isRaster){const w=function(T,I){const L=Sh(T,I),N=Math.pow(2,T.z);for(let me=0;me<Fc;me++)for(let Pe=0;Pe<Fc;Pe++){const je=Ca((T.x+(Pe+MN(Pe))/al)/N),Ie=ns((T.y+(me+MN(me))/al)/N),$e=I.project(je,Ie),Ge=me*Fc+Pe;zc[2*Ge+0]=Math.round(($e.x*L.scale-L.x)*Gn),zc[2*Ge+1]=Math.round(($e.y*L.scale-L.y)*Gn)}Gd.fill(0),F1.fill(0);for(let me=2045;me>=0;me--){const Pe=4*me,je=Vd[Pe+0],Ie=Vd[Pe+1],$e=Vd[Pe+2],Ge=Vd[Pe+3],Ve=je+$e>>1,gt=Ie+Ge>>1,dt=Ve+gt-Ie,Pt=gt+je-Ve,qt=Ie*Fc+je,_t=Ge*Fc+$e,Dt=gt*Fc+Ve,kt=Math.hypot((zc[2*qt+0]+zc[2*_t+0])/2-zc[2*Dt+0],(zc[2*qt+1]+zc[2*_t+1])/2-zc[2*Dt+1])>=16;Gd[Dt]=Gd[Dt]||(kt?1:0),me<1022&&(Gd[Dt]=Gd[Dt]||Gd[(Ie+Pt>>1)*Fc+(je+dt>>1)]||Gd[(Ge+Pt>>1)*Fc+($e+dt>>1)])}const G=new Lt,W=new Dn;let Z=0;function ee(me,Pe){const je=Pe*Fc+me;return F1[je]===0&&(G.emplaceBack(zc[2*je+0],zc[2*je+1],me*Gn/al,Pe*Gn/al),F1[je]=++Z),F1[je]-1}function ie(me,Pe,je,Ie,$e,Ge){const Ve=me+je>>1,gt=Pe+Ie>>1;if(Math.abs(me-$e)+Math.abs(Pe-Ge)>1&&Gd[gt*Fc+Ve])ie($e,Ge,me,Pe,Ve,gt),ie(je,Ie,$e,Ge,Ve,gt);else{const dt=ee(me,Pe),Pt=ee(je,Ie),qt=ee($e,Ge);W.emplaceBack(dt,Pt,qt)}}return ie(0,0,al,al,al,0),ie(al,al,0,0,0,al),{vertices:G,indices:W}}(this.tileID.canonical,u);g=w.vertices,_=w.indices}else{g=new Lt,_=new Dn;for(const{x:T,y:I}of h)g.emplaceBack(T,I,0,0);const w=cM(g.int16,void 0,4);for(let T=0;T<w.length;T+=3)_.emplaceBack(w[T],w[T+1],w[T+2])}this._tileBoundsBuffer=a.createVertexBuffer(g,PN.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(_),this._tileBoundsSegments=po.simpleSegment(0,0,g.length,_.length)}_makeGlobeTileDebugBuffers(a,u){const h=u.projection;if(!h||h.name!=="globe"||u.freezeTileCoverage)return;const g=this.tileID.canonical,_=Fy(KF(g,u)),w=gm(u.zoom);let T;w>0&&(T=FA(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,g,u,_,T,w),this._makeGlobeTileDebugTextBuffer(a,g,u,_,T,w)}_globePoint(a,u,h,g,_,w,T){let I=ky(a,u,h);if(w){const L=1<<h.z,N=Dc(g.center.lng),G=kc(g.center.lat),W=(h.x+.5)/L-N;let Z=0;W>.5?Z=-1:W<-.5&&(Z=1);let ee=(a/Gn+h.x)/L+Z,ie=(u/Gn+h.y)/L;ee=(ee-N)*g._pixelsPerMercatorPixel+N,ie=(ie-G)*g._pixelsPerMercatorPixel+G;const me=[ee*g.worldSize,ie*g.worldSize,0];lo(me,me,w),I=_h(I,me,T)}return lo(I,I,_)}_makeGlobeTileDebugBorderBuffer(a,u,h,g,_,w){const T=new Xt,I=new oa,L=new ut,N=(W,Z,ee,ie,me)=>{const Pe=(ee-W)/(me-1),je=(ie-Z)/(me-1),Ie=T.length;for(let $e=0;$e<me;$e++){const Ge=W+$e*Pe,Ve=Z+$e*je;T.emplaceBack(Ge,Ve);const gt=this._globePoint(Ge,Ve,u,h,g,_,w);L.emplaceBack(gt[0],gt[1],gt[2]),I.emplaceBack(Ie+$e)}},G=Gn;N(0,0,G,0,16),N(G,0,G,G,16),N(G,G,0,G,16),N(0,G,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(I),this._tileDebugBuffer=a.createVertexBuffer(T,By.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(L,qF.members),this._tileDebugSegments=po.simpleSegment(0,0,T.length,I.length)}_makeGlobeTileDebugTextBuffer(a,u,h,g,_,w){const T=Gn/4,I=new Xt,L=new Dn,N=new ut,G=25;L.reserve(32),I.reserve(G),N.reserve(G);const W=(Z,ee)=>G*Z+ee;for(let Z=0;Z<G;Z++){const ee=Z*T;for(let ie=0;ie<G;ie++){const me=ie*T;I.emplaceBack(me,ee);const Pe=this._globePoint(me,ee,u,h,g,_,w);N.emplaceBack(Pe[0],Pe[1],Pe[2])}}for(let Z=0;Z<4;Z++)for(let ee=0;ee<4;ee++){const ie=W(Z,ee),me=W(Z,ee+1),Pe=W(Z+1,ee),je=W(Z+1,ee+1);L.emplaceBack(ie,me,Pe),L.emplaceBack(Pe,me,je)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(L),this._tileDebugTextBuffer=a.createVertexBuffer(I,By.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(N,qF.members),this._tileDebugTextSegments=po.simpleSegment(0,0,G,32)}}class rne{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,h){const g=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][g]=this.stateChanges[a][g]||{},Ne(this.stateChanges[a][g],h),this.deletedStates[a]===null){this.deletedStates[a]={};for(const _ in this.state[a])_!==g&&(this.deletedStates[a][_]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][g]===null){this.deletedStates[a][g]={};for(const _ in this.state[a][g])h[_]||(this.deletedStates[a][g][_]=null)}else for(const _ in h)this.deletedStates[a]&&this.deletedStates[a][g]&&this.deletedStates[a][g][_]===null&&delete this.deletedStates[a][g][_]}removeFeatureState(a,u,h){if(this.deletedStates[a]===null)return;const g=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},h&&u!==void 0)this.deletedStates[a][g]!==null&&(this.deletedStates[a][g]=this.deletedStates[a][g]||{},this.deletedStates[a][g][h]=null);else if(u!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][g])for(h in this.deletedStates[a][g]={},this.stateChanges[a][g])this.deletedStates[a][g][h]=null;else this.deletedStates[a][g]=null;else this.deletedStates[a]=null}getState(a,u){const h=String(u),g=Ne({},(this.state[a]||{})[h],(this.stateChanges[a]||{})[h]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const _=this.deletedStates[a][u];if(_===null)return{};for(const w in _)delete g[w]}return g}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const h={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),Ne(this.state[g][w],this.stateChanges[g][w]),_[w]=this.state[g][w];h[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const w in this.state[g])_[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const T of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][T];_[w]=this.state[g][w]}h[g]=h[g]||{},Ne(h[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const g in a)a[g].setFeatureState(h,u)}}class RN{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,u){const h=this.toIdx(a,u);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(a,u){return this.leaves[this.toIdx(a,u)]}toIdx(a,u){return u*this.size+a}}function ON(c,a,u,h){let g=0,_=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(h[w])<1e-15){if(u[w]<c[w]||u[w]>a[w])return null}else{const T=1/h[w];let I=(c[w]-u[w])*T,L=(a[w]-u[w])*T;if(I>L){const N=I;I=L,L=N}if(I>g&&(g=I),L<_&&(_=L),g>_)return null}return g}function LN(c,a,u,h,g,_,w,T,I,L,N){const G=h-c,W=g-a,Z=_-u,ee=w-c,ie=T-a,me=I-u,Pe=N[1]*me-N[2]*ie,je=N[2]*ee-N[0]*me,Ie=N[0]*ie-N[1]*ee,$e=G*Pe+W*je+Z*Ie;if(Math.abs($e)<1e-15)return null;const Ge=1/$e,Ve=L[0]-c,gt=L[1]-a,dt=L[2]-u,Pt=(Ve*Pe+gt*je+dt*Ie)*Ge;if(Pt<0||Pt>1)return null;const qt=gt*Z-dt*W,_t=dt*G-Ve*Z,Dt=Ve*W-gt*G,kt=(N[0]*qt+N[1]*_t+N[2]*Dt)*Ge;return kt<0||Pt+kt>1?null:(ee*qt+ie*_t+me*Dt)*Ge}function BN(c,a,u){return(c-a)/(u-a)}function DN(c,a,u,h,g,_,w,T,I){const L=1<<u,N=_-h,G=w-g,W=(c+1)/L*N+h,Z=(a+0)/L*G+g,ee=(a+1)/L*G+g;T[0]=(c+0)/L*N+h,T[1]=Z,I[0]=W,I[1]=ee}class kN{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(_){const w=Math.ceil(Math.log2(_.dim/8)),T=[];let I=Math.ceil(Math.pow(2,w));const L=1/I,N=(Z,ee,ie,me,Pe)=>{const je=me?1:0,Ie=(Z+1)*ie-je,$e=ee*ie,Ge=(ee+1)*ie-je;Pe[0]=Z*ie,Pe[1]=$e,Pe[2]=Ie,Pe[3]=Ge};let G=new RN(I);const W=[];for(let Z=0;Z<I*I;Z++){N(Z%I,Math.floor(Z/I),L,!1,W);const ee=Hd(W[0],W[1],_),ie=Hd(W[2],W[1],_),me=Hd(W[2],W[3],_),Pe=Hd(W[0],W[3],_);G.minimums.push(Math.min(ee,ie,me,Pe)),G.maximums.push(Math.max(ee,ie,me,Pe)),G.leaves.push(1)}for(T.push(G),I/=2;I>=1;I/=2){const Z=T[T.length-1];G=new RN(I);for(let ee=0;ee<I*I;ee++){N(ee%I,Math.floor(ee/I),2,!0,W);const ie=Z.getElevation(W[0],W[1]),me=Z.getElevation(W[2],W[1]),Pe=Z.getElevation(W[2],W[3]),je=Z.getElevation(W[0],W[3]),Ie=Z.isLeaf(W[0],W[1]),$e=Z.isLeaf(W[2],W[1]),Ge=Z.isLeaf(W[2],W[3]),Ve=Z.isLeaf(W[0],W[3]),gt=Math.min(ie.min,me.min,Pe.min,je.min),dt=Math.max(ie.max,me.max,Pe.max,je.max),Pt=Ie&&$e&&Ge&&Ve;G.maximums.push(dt),G.minimums.push(gt),G.leaves.push(dt-gt<=5&&Pt?1:0)}T.push(G)}return T}(this.dem),h=u.length-1,g=u[h];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,h,0)}raycastRoot(a,u,h,g,_,w,T=1){return ON([a,u,-100],[h,g,this.maximums[0]*T],_,w)}raycast(a,u,h,g,_,w,T=1){if(!this.nodeCount)return null;const I=this.raycastRoot(a,u,h,g,_,w,T);if(I==null)return null;const L=[],N=[],G=[],W=[],Z=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;Z.length>0;){const{idx:ee,t:ie,nodex:me,nodey:Pe,depth:je}=Z.pop();if(this.leaves[ee]){DN(me,Pe,je,a,u,h,g,G,W);const $e=1<<je,Ge=(me+0)/$e,Ve=(me+1)/$e,gt=(Pe+0)/$e,dt=(Pe+1)/$e,Pt=Hd(Ge,gt,this.dem)*T,qt=Hd(Ve,gt,this.dem)*T,_t=Hd(Ve,dt,this.dem)*T,Dt=Hd(Ge,dt,this.dem)*T,kt=LN(G[0],G[1],Pt,W[0],G[1],qt,W[0],W[1],_t,_,w),Ut=LN(W[0],W[1],_t,G[0],W[1],Dt,G[0],G[1],Pt,_,w),en=Math.min(kt!==null?kt:Number.MAX_VALUE,Ut!==null?Ut:Number.MAX_VALUE);if(en!==Number.MAX_VALUE)return en;{const Mt=Oy([],_,w,ie);if(FN(Pt,qt,Dt,_t,BN(Mt[0],G[0],W[0]),BN(Mt[1],G[1],W[1]))>=Mt[2])return ie}continue}let Ie=0;for(let $e=0;$e<this._siblingOffset.length;$e++){DN((me<<1)+this._siblingOffset[$e][0],(Pe<<1)+this._siblingOffset[$e][1],je+1,a,u,h,g,G,W),G[2]=-100,W[2]=this.maximums[this.childOffsets[ee]+$e]*T;const Ge=ON(G,W,_,w);if(Ge!=null){const Ve=Ge;L[$e]=Ve;let gt=!1;for(let dt=0;dt<Ie&&!gt;dt++)Ve>=L[N[dt]]&&(N.splice(dt,0,$e),gt=!0);gt||(N[Ie]=$e),Ie++}}for(let $e=0;$e<Ie;$e++){const Ge=N[$e];Z.push({idx:this.childOffsets[ee]+Ge,t:L[Ge],nodex:(me<<1)+this._siblingOffset[Ge][0],nodey:(Pe<<1)+this._siblingOffset[Ge][1],depth:je+1})}}return null}_addNode(a,u,h){return this.minimums.push(a),this.maximums.push(u),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(a,u,h,g,_){if(a[g].isLeaf(u,h)===1)return;this.childOffsets[_]||(this.childOffsets[_]=this.nodeCount);const w=g-1,T=a[w];let I=0,L=0;for(let N=0;N<this._siblingOffset.length;N++){const G=2*u+this._siblingOffset[N][0],W=2*h+this._siblingOffset[N][1],Z=T.getElevation(G,W),ee=T.isLeaf(G,W),ie=this._addNode(Z.min,Z.max,ee);ee&&(I|=1<<N),L||(L=ie)}for(let N=0;N<this._siblingOffset.length;N++)I&1<<N||this._construct(a,2*u+this._siblingOffset[N][0],2*h+this._siblingOffset[N][1],w,L+N)}}function FN(c,a,u,h,g,_){return Br(Br(c,u,_),Br(a,h,_),g)}function Hd(c,a,u){const h=u.dim,g=xe(c*h-.5,0,h-1),_=xe(a*h-.5,0,h-1),w=Math.floor(g),T=Math.floor(_),I=Math.min(w+1,h-1),L=Math.min(T+1,h-1);return FN(u.get(w,T),u.get(I,T),u.get(w,L),u.get(I,L),g-w,_-T)}const zN={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function ine(c,a,u){return(256*c*256+256*a+u)/10-1e4}function one(c,a,u){return 256*c+a+u/256-32768}class z1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,u,h,g=!1,_=!1){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return it(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const w=this.dim=u.height-2,T=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=h||"mapbox",this.borderReady=g,!g){for(let I=0;I<w;I++)T[this._idx(-1,I)]=T[this._idx(0,I)],T[this._idx(w,I)]=T[this._idx(w-1,I)],T[this._idx(I,-1)]=T[this._idx(I,0)],T[this._idx(I,w)]=T[this._idx(I,w-1)];T[this._idx(-1,-1)]=T[this._idx(0,0)],T[this._idx(w,-1)]=T[this._idx(w-1,0)],T[this._idx(-1,w)]=T[this._idx(0,w-1)],T[this._idx(w,w)]=T[this._idx(w-1,w-1)],_&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new kN(this)}get(a,u,h=!1){h&&(a=xe(a,-1,this.dim),u=xe(u,-1,this.dim));const g=4*this._idx(a,u);return(this.encoding==="terrarium"?one:ine)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(a){return zN[a]}get unpackVector(){return zN[this.encoding]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}static pack(a,u){const h=[0,0,0,0],g=z1.getUnpackVector(u);let _=Math.floor((a+g[3])/g[2]);return h[2]=_%256,_=Math.floor(_/256),h[1]=_%256,_=Math.floor(_/256),h[0]=_,h}getPixels(){return new aa({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,u,h){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,_=u*this.dim+this.dim,w=h*this.dim,T=h*this.dim+this.dim;switch(u){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:w=T-1;break;case 1:T=w+1}const I=-u*this.dim,L=-h*this.dim;for(let N=w;N<T;N++)for(let G=g;G<_;G++){const W=4*this._idx(G,N),Z=4*this._idx(G+I,N+L);this.pixels[W+0]=a.pixels[Z+0],this.pixels[W+1]=a.pixels[Z+1],this.pixels[W+2]=a.pixels[Z+2],this.pixels[W+3]=a.pixels[Z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}En(z1,"DEMData"),En(kN,"DemMinMaxQuadTree",{omit:["dem"]});class sne{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(const a in this.data)for(const u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,h){const g=a.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(h!==void 0&&(_.timeout=setTimeout(()=>{this.remove(a,_)},h)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){const u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;const h=a.wrapped().key,g=u===void 0?0:this.data[h].indexOf(u),_=this.data[h][g];return this.data[h].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(_.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){const u=[];for(const h in this.data)for(const g of this.data[h])a(g.value)||u.push(g);for(const h of u)this.remove(h.value.tileID,h)}}class Rm{constructor(a,u,h){this.func=a,this.mask=u,this.range=h}}Rm.ReadOnly=!1,Rm.ReadWrite=!0,Rm.disabled=new Rm(519,Rm.ReadOnly,[0,1]);const IM=7680;class RM{constructor(a,u,h,g,_,w){this.test=a,this.ref=u,this.mask=h,this.fail=g,this.depthFail=_,this.pass=w}}RM.disabled=new RM({func:519,mask:0},0,0,IM,IM,IM);class Nc{constructor(a,u,h){this.blendFunction=a,this.blendColor=u,this.mask=h}}Nc.Replace=[1,0],Nc.disabled=new Nc(Nc.Replace,Mi.transparent,[!1,!1,!1,!1]),Nc.unblended=new Nc(Nc.Replace,Mi.transparent,[!0,!0,!0,!0]),Nc.alphaBlended=new Nc([1,771],Mi.transparent,[!0,!0,!0,!0]);const OM=1029,LM=2305;class Hl{constructor(a,u,h){this.enable=a,this.mode=u,this.frontFace=h}}Hl.disabled=new Hl(!1,OM,LM),Hl.backCCW=new Hl(!0,OM,LM),Hl.backCW=new Hl(!0,OM,2304),Hl.frontCW=new Hl(!0,1028,2304),Hl.frontCCW=new Hl(!0,1028,LM);class Eh extends _i{constructor(a,u,h){super(),this.id=a,this._onlySymbols=h,u.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new sne(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new rne,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,u){return a.isSymbolTile=this._onlySymbols,this._source.loadTile(a,u)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a,()=>{})}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const h=this._tiles[u];h.upload(a),h.prepare(this.map.style.imageManager)}}getIds(){return Xe(this._tiles).map(a=>a.tileID).sort(NN).map(a=>a.key)}getRenderableIds(a){const u=[];for(const h in this._tiles)this._isIdRenderable(+h,a)&&u.push(this._tiles[h]);return a?u.sort((h,g)=>{const _=h.tileID,w=g.tileID,T=new Q(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),I=new Q(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-w.overscaledZ||I.y-T.y||I.x-T.x}).map(h=>h.tileID.key):u.map(h=>h.tileID).sort(NN).map(h=>h.key)}hasRenderableParent(a){const u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,u){const h=this._tiles[a];h&&(h.state!=="loading"&&(h.state=u),this._loadTile(h,this._tileLoaded.bind(this,h,a,u)))}_tileLoaded(a,u,h,g){if(g)if(a.state="errored",g.status!==404)this._source.fire(new zr(g,{tile:a}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const _=this.map.painter.terrain;this.update(this.transform,_.getScaledDemTileSize(),!0),_.resetTileLookupCache(this.id)}else this.update(this.transform);else a.timeAdded=Or.now(),h==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new qr("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(a.neighboringTiles&&a.neighboringTiles[_]){const w=this.getTileByID(_);h(a,w),h(w,a)}}function h(g,_){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=_.tileID.canonical.x-g.tileID.canonical.x;const T=_.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),L=_.tileID.key;w===0&&T===0||Math.abs(T)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,w,T),g.neighboringTiles&&g.neighboringTiles[L]&&(g.neighboringTiles[L].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,h,g){for(const _ in this._tiles){let w=this._tiles[_];if(g[_]||!w.hasData()||w.tileID.overscaledZ<=u||w.tileID.overscaledZ>h)continue;let T=w.tileID;for(;w&&w.tileID.overscaledZ>u+1;){const L=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[L.key],w&&w.hasData()&&(T=L)}let I=T;for(;I.overscaledZ>u;)if(I=I.scaledTo(I.overscaledZ-1),a[I.key]){g[T.key]=T;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){const h=this._loadedParentTiles[a.key];return h&&h.tileID.overscaledZ>=u?h:null}for(let h=a.overscaledZ-1;h>=u;h--){const g=a.scaledTo(h),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(a){const u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,u){u=u||this._source.tileSize;const h=Math.ceil(a.width/u)+1,g=Math.ceil(a.height/u)+1,_=Math.floor(h*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,_):_,T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(T)}handleWrapJump(a){const u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){const h={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),h[_.tileID.key]=_}this._tiles=h;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(a,u,h){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let g;this.updateCacheSize(a,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(T=>new As(T.canonical.z,T.wrap,T.canonical.z,T.canonical.x,T.canonical.y)):(g=a.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter(T=>this._source.hasTile(T)))):g=[];const _=this._updateRetainedTiles(g);if($N(this._source.type)&&g.length!==0){const T={},I={},L=Object.keys(_);for(const G of L){const W=_[G],Z=this._tiles[G];if(!Z||Z.fadeEndTime&&Z.fadeEndTime<=Or.now())continue;const ee=this.findLoadedParent(W,Math.max(W.overscaledZ-Eh.maxOverzooming,this._source.minzoom));ee&&(this._addTile(ee.tileID),T[ee.tileID.key]=ee.tileID),I[G]=W}const N=g[g.length-1].overscaledZ;for(const G in this._tiles){const W=this._tiles[G];if(_[G]||!W.hasData())continue;let Z=W.tileID;for(;Z.overscaledZ>N;){Z=Z.scaledTo(Z.overscaledZ-1);const ee=this._tiles[Z.key];if(ee&&ee.hasData()&&I[Z.key]){_[G]=W.tileID;break}}}for(const G in T)_[G]||(this._coveredTiles[G]=!0,_[G]=T[G])}for(const T in _)this._tiles[T].clearFadeHold();const w=function(T,I){const L=[];for(const N in T)N in I||L.push(N);return L}(this._tiles,_);for(const T of w){const I=this._tiles[T];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+T)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const u={};if(a.length===0)return u;const h={},g=a.reduce((L,N)=>Math.min(L,N.overscaledZ),1/0),_=a[0].overscaledZ,w=Math.max(_-Eh.maxOverzooming,this._source.minzoom),T=Math.max(_+Eh.maxUnderzooming,this._source.minzoom),I={};for(const L of a){const N=this._addTile(L);u[L.key]=L,N.hasData()||g<this._source.maxzoom&&(I[L.key]=L)}this._retainLoadedChildren(I,g,T,u);for(const L of a){let N=this._tiles[L.key];if(N.hasData())continue;if(L.canonical.z>=this._source.maxzoom){const W=L.children(this._source.maxzoom)[0],Z=this.getTile(W);if(Z&&Z.hasData()){u[W.key]=W;continue}}else{const W=L.children(this._source.maxzoom);if(u[W[0].key]&&u[W[1].key]&&u[W[2].key]&&u[W[3].key])continue}let G=N.wasRequested();for(let W=L.overscaledZ-1;W>=w;--W){const Z=L.scaledTo(W);if(h[Z.key]||(h[Z.key]=!0,N=this.getTile(Z),!N&&G&&(N=this._addTile(Z)),N&&(u[Z.key]=Z,G=N.wasRequested(),N.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const u=[];let h,g=this._tiles[a].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){h=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(h=this._getLoadedTile(_),h)break;g=_}for(const _ of u)this._loadedParentTiles[_]=h}}_addTile(a){let u=this._tiles[a.key];if(u)return u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));const h=!!u;if(!h){const g=this.map?this.map.painter:null;u=new PM(a,this._source.tileSize*a.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))}return u?(u.uses++,this._tiles[a.key]=u,h||this._source.fire(new qr("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const h=u.getExpiryTimeout();h&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},h))}_removeTile(a){const u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,u,h){const g=[],_=this.transform;if(!_)return g;const w=_.projection.name==="globe",T=Dc(_.center.lng);for(const I in this._tiles){const L=this._tiles[I];if(h&&L.clearQueryDebugViz(),L.holdingForFade())continue;let N;if(w){const G=L.tileID.canonical;if(G.z===0){const W=[Math.abs(xe(T,...r0(G,-1))-T),Math.abs(xe(T,...r0(G,1))-T)];N=[0,2*W.indexOf(Math.min(...W))-1]}else{const W=[Math.abs(xe(T,...r0(G,-1))-T),Math.abs(xe(T,...r0(G,0))-T),Math.abs(xe(T,...r0(G,1))-T)];N=[W.indexOf(Math.min(...W))-1]}}else N=[0];for(const G of N){const W=a.containsTile(L,_,u,G);W&&g.push(W)}}return g}getVisibleCoordinates(a){const u=this.getRenderableIds(a).map(h=>this._tiles[h].tileID);for(const h of u)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if($N(this._source.type))for(const a in this._tiles){const u=this._tiles[a];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=Or.now())return!0}return!1}setFeatureState(a,u,h){this._state.updateState(a=a||"_geojsonTileLayer",u,h)}removeFeatureState(a,u,h){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,h)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,h){const g=this._tiles[a];g&&g.setDependencies(u,h)}reloadTilesForDependencies(a,u){for(const h in this._tiles)this._tiles[h].hasDependency(a,u)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(a,u))}_preloadTiles(a,u){if(!this._sourceLoaded){const T=()=>{this._sourceLoaded&&(this._source.off("data",T),this._preloadTiles(a,u))};return void this._source.on("data",T)}const h=new Map,g=Array.isArray(a)?a:[a],_=this.map.painter.terrain,w=this.usedForTerrain&&_?_.getScaledDemTileSize():this._source.tileSize;for(const T of g){const I=T.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const L of I)h.set(L.key,L);this.usedForTerrain&&T.updateElevation(!1)}ze(Array.from(h.values()),(T,I)=>{const L=new PM(T,this._source.tileSize*T.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(L,N=>{this._source.type==="raster-dem"&&L.dem&&this._backfillDEM(L),I(N,L)})},u)}}function NN(c,a){const u=Math.abs(2*c.wrap)-+(c.wrap<0),h=Math.abs(2*a.wrap)-+(a.wrap<0);return c.overscaledZ-a.overscaledZ||h-u||a.canonical.y-c.canonical.y||a.canonical.x-c.canonical.x}function $N(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function r0(c,a){const u=1<<c.z;return[c.x/u+a,(c.x+1)/u+a]}Eh.maxOverzooming=10,Eh.maxUnderzooming=3;class N1{constructor(a,u,h){this._demTile=a,this._dem=this._demTile.dem,this._scale=u,this._offset=h}static create(a,u,h){const g=h||a.findDEMTileFor(u);if(!g||!g.dem)return;const _=g.dem,w=g.tileID,T=1<<u.canonical.z-w.canonical.z;return new N1(g,g.tileSize/Gn/T,[(u.canonical.x/T-w.canonical.x)*_.dim,(u.canonical.y/T-w.canonical.y)*_.dim])}tileCoordToPixel(a,u){const h=u*this._scale+this._offset[1],g=Math.floor(a*this._scale+this._offset[0]),_=Math.floor(h);return new Q(g,_)}getElevationAt(a,u,h,g){const _=a*this._scale+this._offset[0],w=u*this._scale+this._offset[1],T=Math.floor(_),I=Math.floor(w),L=this._dem;return g=!!g,h?Br(Br(L.get(T,I,g),L.get(T,I+1,g),w-I),Br(L.get(T+1,I,g),L.get(T+1,I+1,g),w-I),_-T):L.get(T,I,g)}getElevationAtPixel(a,u,h){return this._dem.get(a,u,!!h)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*Ul(1,a)*this._dem.stride}}class jN{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new _u(Gn,16,0),this.featureIndexArray=new fh,this.promoteId=u}insert(a,u,h,g,_,w=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_,w);const I=this.grid;for(let L=0;L<u.length;L++){const N=u[L],G=[1/0,1/0,-1/0,-1/0];for(let W=0;W<N.length;W++){const Z=N[W];G[0]=Math.min(G[0],Z.x),G[1]=Math.min(G[1],Z.y),G[2]=Math.max(G[2],Z.x),G[3]=Math.max(G[3],Z.y)}G[0]<Gn&&G[1]<Gn&&G[2]>=0&&G[3]>=0&&I.insert(T,G[0],G[1],G[2],G[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new hM(new C1(this.rawTileData)).layers,this.sourceLayerCoder=new TN(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,u,h,g){this.loadVTLayers();const _=a.params||{},w=sm(_.filter),T=a.tileResult,I=a.transform,L=T.bufferedTilespaceBounds,N=this.grid.query(L.min.x,L.min.y,L.max.x,L.max.y,(ee,ie,me,Pe)=>fz(T.bufferedTilespaceGeometry,ee,ie,me,Pe));N.sort(ane);let G=null;I.elevation&&N.length>0&&(G=N1.create(I.elevation,this.tileID));const W={};let Z;for(let ee=0;ee<N.length;ee++){const ie=N[ee];if(ie===Z)continue;Z=ie;const me=this.featureIndexArray.get(ie);let Pe=null;this.loadMatchingFeature(W,me,w,_.layers,_.availableImages,u,h,g,(je,Ie,$e,Ge=0)=>(Pe||(Pe=Tu(je,this.tileID.canonical,a.tileTransform)),Ie.queryIntersectsFeature(T,je,$e,Pe,this.z,a.transform,a.pixelPosMatrix,G,Ge)))}return W}loadMatchingFeature(a,u,h,g,_,w,T,I,L){const{featureIndex:N,bucketIndex:G,sourceLayerIndex:W,layoutVertexArrayOffset:Z}=u,ee=this.bucketLayerIDs[G];if(g&&!function(je,Ie){for(let $e=0;$e<je.length;$e++)if(Ie.indexOf(je[$e])>=0)return!0;return!1}(g,ee))return;const ie=this.sourceLayerCoder.decode(W),me=this.vtLayers[ie].feature(N);if(h.needGeometry){const je=bh(me,!0);if(!h.filter(new V(this.tileID.overscaledZ),je,this.tileID.canonical))return}else if(!h.filter(new V(this.tileID.overscaledZ),me))return;const Pe=this.getId(me,ie);for(let je=0;je<ee.length;je++){const Ie=ee[je];if(g&&g.indexOf(Ie)<0)continue;const $e=w[Ie];if(!$e)continue;let Ge={};Pe!==void 0&&I&&(Ge=I.getState($e.sourceLayer||"_geojsonTileLayer",Pe));const Ve=Ne({},T[Ie]);Ve.paint=UN(Ve.paint,$e.paint,me,Ge,_),Ve.layout=UN(Ve.layout,$e.layout,me,Ge,_);const gt=!L||L(me,$e,Ge,Z);if(!gt)continue;const dt=new AN(me,this.z,this.x,this.y,Pe);dt.layer=Ve;let Pt=a[Ie];Pt===void 0&&(Pt=a[Ie]=[]),Pt.push({featureIndex:N,feature:dt,intersectionZ:gt})}}lookupSymbolFeatures(a,u,h,g,_,w,T,I){const L={};this.loadVTLayers();const N=sm(_);for(const G of a)this.loadMatchingFeature(L,{bucketIndex:h,sourceLayerIndex:g,featureIndex:G,layoutVertexArrayOffset:0},N,w,T,I,u);return L}loadFeature(a){const{featureIndex:u,sourceLayerIndex:h}=a;this.loadVTLayers();const g=this.sourceLayerCoder.decode(h),_=this.vtFeatures[g];if(_[u])return _[u];const w=this.vtLayers[g].feature(u);return _[u]=w,w}hasLayer(a){for(const u of this.bucketLayerIDs)for(const h of u)if(a===h)return!0;return!1}getId(a,u){let h=a.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];g!=null&&(h=a.properties[g]),typeof h=="boolean"&&(h=Number(h))}return h}}function UN(c,a,u,h,g){return lt(c,(_,w)=>{const T=a instanceof Te?a.get(w):null;return T&&T.evaluate?T.evaluate(u,h,g):T})}function ane(c,a){return a-c}En(jN,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class VN{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.image=new Au({width:a,height:u}),this.positions={},this.uploaded=!1}getDash(a,u){const h=this.getKey(a,u);return this.positions[h]}trim(){const a=this.width,u=this.height=ot(this.nextRow);this.image.resize({width:a,height:u})}getKey(a,u){return a.join(",")+u}getDashRanges(a,u,h){const g=[];let _=a.length%2==1?-a[a.length-1]*h:0,w=a[0]*h,T=!0;g.push({left:_,right:w,isDash:T,zeroLength:a[0]===0});let I=a[0];for(let L=1;L<a.length;L++){T=!T;const N=a[L];_=I*h,I+=N,w=I*h,g.push({left:_,right:w,isDash:T,zeroLength:N===0})}return g}addRoundDash(a,u,h){const g=u/2;for(let _=-h;_<=h;_++){const w=this.width*(this.nextRow+h+_);let T=0,I=a[T];for(let L=0;L<this.width;L++){L/I.right>1&&(I=a[++T]);const N=Math.abs(L-I.left),G=Math.abs(L-I.right),W=Math.min(N,G);let Z;const ee=_/h*(g+1);if(I.isDash){const ie=g-Math.abs(ee);Z=Math.sqrt(W*W+ie*ie)}else Z=g-Math.sqrt(W*W+ee*ee);this.image.data[w+L]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(a,u){for(let I=a.length-1;I>=0;--I){const L=a[I],N=a[I+1];L.zeroLength?a.splice(I,1):N&&N.isDash===L.isDash&&(N.left=L.left,a.splice(I,1))}const h=a[0],g=a[a.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const _=this.width*this.nextRow;let w=0,T=a[w];for(let I=0;I<this.width;I++){I/T.right>1&&(T=a[++w]);const L=Math.abs(I-T.left),N=Math.abs(I-T.right),G=Math.min(L,N);this.image.data[_+I]=Math.max(0,Math.min(255,(T.isDash?G:-G)+u+128))}}addDash(a,u){const h=this.getKey(a,u);if(this.positions[h])return this.positions[h];const g=u==="round",_=g?7:0,w=2*_+1;if(this.nextRow+w>this.height)return it("LineAtlas out of space"),null;a.length===0&&a.push(1);let T=0;for(let N=0;N<a.length;N++)a[N]<0&&(it("Negative value is found in line dasharray, replacing values with 0"),a[N]=0),T+=a[N];if(T!==0){const N=this.width/T,G=this.getDashRanges(a,this.width,N);g?this.addRoundDash(G,N,_):this.addRegularDash(G,u==="square"?.5*N:0)}const I=this.nextRow+_;this.nextRow+=w;const L={tl:[I,_],br:[T,0]};return this.positions[h]=L,L}}En(VN,"LineAtlas");const GN=1*Gl;class HN{constructor(a){const u={},h=[];for(const T in a){const I=a[T],L=u[T]={};for(const N in I.glyphs){const G=I.glyphs[+N];if(!G||G.bitmap.width===0||G.bitmap.height===0)continue;const W=G.metrics.localGlyph?GN:1,Z={x:0,y:0,w:G.bitmap.width+2*W,h:G.bitmap.height+2*W};h.push(Z),L[N]=Z}}const{w:g,h:_}=vM(h),w=new Au({width:g||1,height:_||1});for(const T in a){const I=a[T];for(const L in I.glyphs){const N=I.glyphs[+L];if(!N||N.bitmap.width===0||N.bitmap.height===0)continue;const G=u[T][L],W=N.metrics.localGlyph?GN:1;Au.copy(N.bitmap,w,{x:0,y:0},{x:G.x+W,y:G.y+W},N.bitmap)}}this.image=w,this.positions=u}}En(HN,"GlyphAtlas");class lne{constructor(a){this.tileID=new As(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y),this.tileZoom=a.tileZoom,this.uid=a.uid,this.zoom=a.zoom,this.canonical=a.tileID.canonical,this.pixelRatio=a.pixelRatio,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=a.showCollisionBoxes,this.collectResourceTiming=!!a.collectResourceTiming,this.returnDependencies=!!a.returnDependencies,this.promoteId=a.promoteId,this.enableTerrain=!!a.enableTerrain,this.isSymbolTile=a.isSymbolTile,this.tileTransform=Sh(a.tileID.canonical,a.projection),this.projection=a.projection}parse(a,u,h,g,_){this.status="parsing",this.data=a,this.collisionBoxArray=new di;const w=new TN(Object.keys(a.layers).sort()),T=new jN(this.tileID,this.promoteId);T.bucketLayerIDs=[];const I={},L=new VN(256,256),N={featureIndex:T,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:L,availableImages:h},G=u.familiesBySource[this.source];for(const Ge in G){const Ve=a.layers[Ge];if(!Ve)continue;let gt=!1,dt=!1;for(const _t of G[Ge])_t[0].type==="symbol"?gt=!0:dt=!0;if(this.isSymbolTile===!0&&!gt||this.isSymbolTile===!1&&!dt)continue;Ve.version===1&&it(`Vector tile source "${this.source}" layer "${Ge}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pt=w.encode(Ge),qt=[];for(let _t=0;_t<Ve.length;_t++){const Dt=Ve.feature(_t),kt=T.getId(Dt,Ge);qt.push({feature:Dt,id:kt,index:_t,sourceLayerIndex:Pt})}for(const _t of G[Ge]){const Dt=_t[0];this.isSymbolTile!==void 0&&Dt.type==="symbol"!==this.isSymbolTile||Dt.minzoom&&this.zoom<Math.floor(Dt.minzoom)||Dt.maxzoom&&this.zoom>=Dt.maxzoom||Dt.visibility!=="none"&&(BM(_t,this.zoom,h),(I[Dt.id]=Dt.createBucket({index:T.bucketLayerIDs.length,layers:_t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(qt,N,this.tileID.canonical,this.tileTransform),T.bucketLayerIDs.push(_t.map(kt=>kt.id)))}}let W,Z,ee,ie;L.trim();const me={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Pe=()=>{if(W)return _(W);if(Z&&ee&&ie){const Ge=new HN(Z),Ve=new Jz(ee,ie);for(const gt in I){const dt=I[gt];dt instanceof Ud?(BM(dt.layers,this.zoom,h),Bte(dt,Z,Ge.positions,ee,Ve.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):dt.hasPattern&&(dt instanceof w1||dt instanceof v1||dt instanceof Hy)&&(BM(dt.layers,this.zoom,h),dt.addFeatures(N,this.tileID.canonical,Ve.patternPositions,h,this.tileTransform))}this.status="done",_(null,{buckets:Xe(I).filter(gt=>!gt.isEmpty()),featureIndex:T,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ge.image,lineAtlas:L,imageAtlas:Ve,glyphMap:this.returnDependencies?Z:null,iconMap:this.returnDependencies?ee:null,glyphPositions:this.returnDependencies?Ge.positions:null})}},je=lt(N.glyphDependencies,Ge=>Object.keys(Ge).map(Number));Object.keys(je).length?g.send("getGlyphs",{uid:this.uid,stacks:je},(Ge,Ve)=>{W||(W=Ge,Z=Ve,Pe())},void 0,!1,me):Z={};const Ie=Object.keys(N.iconDependencies);Ie.length?g.send("getImages",{icons:Ie,source:this.source,tileID:this.tileID,type:"icons"},(Ge,Ve)=>{W||(W=Ge,ee=Ve,Pe())},void 0,!1,me):ee={};const $e=Object.keys(N.patternDependencies);$e.length?g.send("getImages",{icons:$e,source:this.source,tileID:this.tileID,type:"patterns"},(Ge,Ve)=>{W||(W=Ge,ie=Ve,Pe())},void 0,!1,me):ie={},Pe()}}function BM(c,a,u){const h=new V(a);for(const g of c)g.recalculate(h,u)}class WN{constructor(a){this.entries={},this.scheduler=a}request(a,u,h,g){const _=this.entries[a]=this.entries[a]||{callbacks:[]};if(_.result){const[w,T]=_.result;return this.scheduler?this.scheduler.add(()=>{g(w,T)},u):g(w,T),()=>{}}return _.callbacks.push(g),_.cancel||(_.cancel=h((w,T)=>{_.result=[w,T];for(const I of _.callbacks)this.scheduler?this.scheduler.add(()=>{I(w,T)},u):I(w,T);setTimeout(()=>delete this.entries[a],3e3)})),()=>{_.result||(_.callbacks=_.callbacks.filter(w=>w!==g),_.callbacks.length||(_.cancel(),delete this.entries[a]))}}}function XN(c,a,u){const h=JSON.stringify(c.request);return c.data&&(this.deduped.entries[h]={result:[null,c.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},g=>{const _=tr(c.request,(w,T,I,L)=>{w?g(w):T&&g(null,{vectorTile:u?void 0:new hM(new C1(T)),rawData:T,cacheControl:I,expires:L})});return()=>{_.cancel(),g()}},a)}const qN=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class DM{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,h]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=qN[15&h];if(!_)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(a,2,1),[T]=new Uint32Array(a,4,1);return new DM(T,w,_,a)}constructor(a,u=64,h=Float64Array,g){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=h,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const _=qN.indexOf(this.ArrayType),w=2*a*this.ArrayType.BYTES_PER_ELEMENT,T=a*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-T%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+T+I,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+I),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+T+I,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=a,this.coords[this._pos++]=u,h}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return kM(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:w,nodeSize:T}=this,I=[0,_.length-1,0],L=[];for(;I.length;){const N=I.pop()||0,G=I.pop()||0,W=I.pop()||0;if(G-W<=T){for(let me=W;me<=G;me++){const Pe=w[2*me],je=w[2*me+1];Pe>=a&&Pe<=h&&je>=u&&je<=g&&L.push(_[me])}continue}const Z=W+G>>1,ee=w[2*Z],ie=w[2*Z+1];ee>=a&&ee<=h&&ie>=u&&ie<=g&&L.push(_[Z]),(N===0?a<=ee:u<=ie)&&(I.push(W),I.push(Z-1),I.push(1-N)),(N===0?h>=ee:g>=ie)&&(I.push(Z+1),I.push(G),I.push(1-N))}return L}within(a,u,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:w}=this,T=[0,g.length-1,0],I=[],L=h*h;for(;T.length;){const N=T.pop()||0,G=T.pop()||0,W=T.pop()||0;if(G-W<=w){for(let me=W;me<=G;me++)ZN(_[2*me],_[2*me+1],a,u)<=L&&I.push(g[me]);continue}const Z=W+G>>1,ee=_[2*Z],ie=_[2*Z+1];ZN(ee,ie,a,u)<=L&&I.push(g[Z]),(N===0?a-h<=ee:u-h<=ie)&&(T.push(W),T.push(Z-1),T.push(1-N)),(N===0?a+h>=ee:u+h>=ie)&&(T.push(Z+1),T.push(G),T.push(1-N))}return I}}function kM(c,a,u,h,g,_){if(g-h<=u)return;const w=h+g>>1;YN(c,a,w,h,g,_),kM(c,a,u,h,w-1,1-_),kM(c,a,u,w+1,g,1-_)}function YN(c,a,u,h,g,_){for(;g>h;){if(g-h>600){const L=g-h+1,N=u-h+1,G=Math.log(L),W=.5*Math.exp(2*G/3),Z=.5*Math.sqrt(G*W*(L-W)/L)*(N-L/2<0?-1:1);YN(c,a,u,Math.max(h,Math.floor(u-N*W/L+Z)),Math.min(g,Math.floor(u+(L-N)*W/L+Z)),_)}const w=a[2*u+_];let T=h,I=g;for(i0(c,a,h,u),a[2*g+_]>w&&i0(c,a,h,g);T<I;){for(i0(c,a,T,I),T++,I--;a[2*T+_]<w;)T++;for(;a[2*I+_]>w;)I--}a[2*h+_]===w?i0(c,a,h,I):(I++,i0(c,a,I,g)),I<=u&&(h=I+1),u<=I&&(g=I-1)}}function i0(c,a,u,h){FM(c,u,h),FM(a,2*u,2*h),FM(a,2*u+1,2*h+1)}function FM(c,a,u){const h=c[a];c[a]=c[u],c[u]=h}function ZN(c,a,u,h){const g=c-u,_=a-h;return g*g+_*_}s.ARRAY_TYPE=sa,s.AUTH_ERR_MSG=le,s.Aabb=Ts,s.Actor=class{constructor(c,a,u){this.target=c,this.parent=a,this.mapId=u,this.callbacks={},this.cancelCallbacks={},st(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=cn()?c:p,this.scheduler=new tne}send(c,a,u,h,g=!1,_){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=_,this.callbacks[w]=u);const T=bn(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!u,targetMapId:h,mustQueue:g,sourceMapId:this.mapId,data:Bd(a,T)},T),{cancel:()=>{u&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(c){const a=c.data,u=a.id;if(u&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){const h=this.cancelCallbacks[u];delete this.cancelCallbacks[u],h&&h.cancel()}else if(a.mustQueue||cn()){const h=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,a),h&&h.metadata||{type:"message"})}else this.processTask(u,a)}processTask(c,a){if(a.type==="<response>"){const u=this.callbacks[c];delete this.callbacks[c],u&&(a.error?u(bu(a.error)):u(null,bu(a.data)))}else{const u=bn(this.globalScope)?void 0:[],h=a.hasCallback?(_,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:_?Bd(_):null,data:Bd(w,u)},u)}:_=>{},g=bu(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,g,h);else if(this.parent.getWorkerSource){const _=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,_[0],g.source)[_[1]](g,h)}else h(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=x1,s.Color=Mi,s.ColorMode=Nc,s.CullFaceMode=Hl,s.DEMData=z1,s.DataConstantProperty=re,s.DedupedRequest=WN,s.DepthMode=Rm,s.EXTENT=Gn,s.Elevation=class{isDataAvailableAtPoint(c){const a=this._source();if(this.isUsingMockSource()||!a||c.y<0||c.y>1)return!1;const u=a.getSource().maxzoom,h=1<<u,g=Math.floor(c.x),_=Math.floor((c.x-g)*h),w=Math.floor(c.y*h),T=this.findDEMTileFor(new As(u,g,u,_,w));return!(!T||!T.dem)}getAtPointOrZero(c,a=0){return this.getAtPoint(c,a)||0}getAtPoint(c,a,u=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const h=this._source();if(!h||c.y<0||c.y>1)return a;const g=h.getSource().maxzoom,_=1<<g,w=Math.floor(c.x),T=c.x-w,I=new As(g,w,g,Math.floor(T*_),Math.floor(c.y*_)),L=this.findDEMTileFor(I);if(!L||!L.dem)return a;const N=L.dem,G=1<<L.tileID.canonical.z,W=(T*G-L.tileID.canonical.x)*N.dim,Z=(c.y*G-L.tileID.canonical.y)*N.dim,ee=Math.floor(W),ie=Math.floor(Z);return(u?this.exaggeration():1)*Br(Br(N.get(ee,ie),N.get(ee,ie+1),Z-ie),Br(N.get(ee+1,ie),N.get(ee+1,ie+1),Z-ie),W-ee)}getAtTileOffset(c,a,u){const h=1<<c.canonical.z;return this.getAtPointOrZero(new vm(c.wrap+(c.canonical.x+a/Gn)/h,(c.canonical.y+u/Gn)/h))}getAtTileOffsetFunc(c,a,u,h){return g=>{const _=this.getAtTileOffset(c,g.x,g.y),w=h.upVector(c.canonical,g.x,g.y);return Ea(w,w,_*h.upVectorScale(c.canonical,a,u).metersToTile),w}}getForTilePoints(c,a,u,h){if(this.isUsingMockSource())return!1;const g=N1.create(this,c,h);return!!g&&(a.forEach(_=>{_[2]=this.exaggeration()*g.getElevationAt(_[0],_[1],u)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(c);if(!a||!a.dem)return null;const u=a.dem.tree,h=a.tileID,g=1<<c.canonical.z-h.canonical.z;let _=c.canonical.x/g-h.canonical.x,w=c.canonical.y/g-h.canonical.y,T=0;for(let I=0;I<c.canonical.z-h.canonical.z&&!u.leaves[T];I++){_*=2,w*=2;const L=2*Math.floor(w)+Math.floor(_);T=u.childOffsets[T]+L,_%=1,w%=1}return{min:this.exaggeration()*u.minimums[T],max:this.exaggeration()*u.maximums[T]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,a,u){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=zr,s.EvaluationParameters=V,s.Event=qr,s.Evented=_i,s.FillExtrusionBucket=Hy,s.Frustum=GA,s.FrustumCorners=VA,s.GLOBE_RADIUS=Lc,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=YF,s.GLOBE_ZOOM_THRESHOLD_MIN=HA,s.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,a){const u=new Xt,h=new Dn,g=[],_=c+1+2,w=a[0]+1,T=a[0]+1+(1+a.length),I=(L,N,G)=>{let W=L===_-1?L-2:L===0?L:L-1;return W+=G?24575:0,[W,N]};for(let L=0;L<_;++L)u.emplaceBack(...I(L,0,!0));for(let L=0;L<w;++L)for(let N=0;N<_;++N)u.emplaceBack(...I(N,L,(N===0||N===_-1)&&!0));for(let L=0;L<a.length;++L){const N=a[L];for(let G=0;G<_;++G)u.emplaceBack(...I(G,N,!0))}for(let L=0;L<a.length;++L){const N=h.length,G=a[L]+1+2,W=new Dn;for(let ie=0;ie<G-1;ie++){const me=ie===G-2,Pe=me?_*(T-a.length+L-ie):_;for(let je=0;je<_-1;je++){const Ie=ie*_+je;ie===0||me||je===0||je===_-2?(W.emplaceBack(Ie+1,Ie,Ie+Pe),W.emplaceBack(Ie+Pe,Ie+Pe+1,Ie+1)):(h.emplaceBack(Ie+1,Ie,Ie+Pe),h.emplaceBack(Ie+Pe,Ie+Pe+1,Ie+1))}}const Z=po.simpleSegment(0,N,u.length,h.length-N);for(let ie=0;ie<W.uint16.length;ie+=3)h.emplaceBack(W.uint16[ie],W.uint16[ie+1],W.uint16[ie+2]);const ee=po.simpleSegment(0,N,u.length,h.length-N);g.push({withoutSkirts:Z,withSkirts:ee})}return{vertices:u,indices:h,segments:g}}_createGrid(c){const a=this._fillGridMeshWithLods(yh,Dy);this._gridSegments=a.segments,this._gridBuffer=c.createVertexBuffer(a.vertices,By.members),this._gridIndexBuffer=c.createIndexBuffer(a.indices,!0)}_createPoles(c){const a=new Dn;for(let g=0;g<=yh;g++)a.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(a,!0);const u=new ui,h=new ui;this._poleSegments=[];for(let g=0,_=0;g<HA;g++){const w=360/(1<<g);u.emplaceBack(0,-Lc,0,.5,0),h.emplaceBack(0,-Lc,0,.5,1);for(let T=0;T<=yh;T++){const I=T/yh,L=Br(0,w,I),[N,G,W]=pm(tee,nee,L,Lc);u.emplaceBack(N,G,W,I,0),h.emplaceBack(N,G,W,I,1)}this._poleSegments.push(po.simpleSegment(_,0,66,64)),_+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(u,XF,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(h,XF,!1)}getGridBuffers(c,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,a){if(!this._wireframeSegments){const u=new No,h=yh,g=h+1+2,_=1;this._wireframeSegments=[];for(let w=0,T=0;w<Dy.length;w++){const I=Dy[w];for(let N=_;N<I+_;N++)for(let G=_;G<h+_;G++){const W=N*g+G;u.emplaceBack(W,W+1),u.emplaceBack(W,W+g),u.emplaceBack(W,W+g+1)}const L=I*h*3;this._wireframeSegments.push(po.simpleSegment(0,T,(I+1)*g,L)),T+=L}this._wireframeIndexBuffer=c.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[a]]}},s.GlyphManager=Tm,s.ImagePosition=yM,s.KDBush=DM,s.LivePerformanceUtils=Cn,s.LngLat=fi,s.LngLatBounds=zd,s.LocalGlyphMode=xM,s.MAX_MERCATOR_LATITUDE=rs,s.MercatorCoordinate=vm,s.ONE_EM=Wo,s.OverscaledTileID=As,s.PerformanceMarkers=ri,s.Point=Q,s.Properties=Be,s.RGBAImage=aa,s.Ray=UA,s.RequestManager=class{constructor(c,a,u){this._transformRequestFn=c,this._customAccessToken=a,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const c=function(){let a="";for(let u=0;u<10;u++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",k,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,a){return this._transformRequestFn&&this._transformRequestFn(c,a)||{url:c}}normalizeStyleURL(c,a){if(!ue(c))return c;const u=nt(c);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||a)}normalizeGlyphsURL(c,a){if(!ue(c))return c;const u=nt(c);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||a)}normalizeSourceURL(c,a,u,h){if(!ue(c))return c;const g=nt(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),u&&g.params.push(`language=${u}`),h&&g.params.push(`worldview=${h}`),this._makeAPIURL(g,this._customAccessToken||a)}normalizeSpriteURL(c,a,u,h){const g=nt(c);return ue(c)?(g.path=`/styles/v1${g.path}/sprite${a}${u}`,this._makeAPIURL(g,this._customAccessToken||h)):(g.path+=`${a}${u}`,Ze(g))}normalizeTileURL(c,a,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!ue(c))return c;const h=nt(c);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a||u&&h.authority!=="raster"&&u===512?"@2x":""}${M.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${S.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${S.TILE_URL_VERSION}${h.path}`);const g=this._customAccessToken||function(_){for(const w of _){const T=w.match(/^access_token=(.*)$/);if(T)return T[1]}return null}(h.params)||S.ACCESS_TOKEN;return S.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,g)}canonicalizeTileURL(c,a){const u=nt(c);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return c;let h="mapbox://";u.path.match(/^\/raster\/v1\//)?h+=`raster/${u.path.replace(`/${S.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${u.path.replace(`/${S.TILE_URL_VERSION}/`,"")}`;let g=u.params;return a&&(g=g.filter(_=>!_.match(/^access_token=/))),g.length&&(h+=`?${g.join("&")}`),h}canonicalizeTileset(c,a){const u=!!a&&ue(a),h=[];for(const g of c.tiles||[])Me(g)?h.push(this.canonicalizeTileURL(g,u)):h.push(g);return h}_makeAPIURL(c,a){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=nt(S.API_URL);if(c.protocol=h.protocol,c.authority=h.authority,c.protocol==="http"){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if(h.path!=="/"&&(c.path=`${h.path}${c.path}`),!S.REQUIRE_ACCESS_TOKEN)return Ze(c);if(a=a||S.ACCESS_TOKEN,!this._silenceAuthErrors){if(!a)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if(a[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return c.params=c.params.filter(g=>g.indexOf("access_token")===-1),c.params.push(`access_token=${a||""}`),Ze(c)}},s.ResourceType=Sn,s.SegmentVector=po,s.SourceCache=Eh,s.StencilMode=RM,s.StructArrayLayout1ui2=oa,s.StructArrayLayout2f1f2i16=qn,s.StructArrayLayout2i4=Xt,s.StructArrayLayout2ui4=No,s.StructArrayLayout3f12=Cr,s.StructArrayLayout3ui6=Dn,s.StructArrayLayout4i8=Lt,s.StructArrayLayout5f20=ui,s.Texture=n0,s.Tile=PM,s.Transitionable=ne,s.Uniform1f=i1,s.Uniform1i=class extends Su{constructor(c){super(c),this.current=0}set(c,a,u){this.fetchUniformLocation(c,a)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},s.Uniform2f=class extends Su{constructor(c){super(c),this.current=[0,0]}set(c,a,u){this.fetchUniformLocation(c,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},s.Uniform3f=class extends Su{constructor(c){super(c),this.current=[0,0,0]}set(c,a,u){this.fetchUniformLocation(c,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},s.Uniform4f=IF,s.UniformColor=RF,s.UniformMatrix2f=class extends Su{constructor(c){super(c),this.current=NQ}set(c,a,u){if(this.fetchUniformLocation(c,a)){for(let h=0;h<4;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}},s.UniformMatrix3f=class extends Su{constructor(c){super(c),this.current=zQ}set(c,a,u){if(this.fetchUniformLocation(c,a)){for(let h=0;h<9;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},s.UniformMatrix4f=class extends Su{constructor(c){super(c),this.current=FQ}set(c,a,u){if(this.fetchUniformLocation(c,a)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let h=1;h<16;h++)if(u[h]!==this.current[h]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},s.UnwrappedTileID=Fz,s.ValidationError=_n,s.VectorTileFeature=_1,s.VectorTileWorkerSource=class extends _i{constructor(c,a,u,h,g){super(),this.actor=c,this.layerIndex=a,this.availableImages=u,this.loadVectorData=g||XN,this.loading={},this.loaded={},this.deduped=new WN(c.scheduler),this.isSpriteLoaded=h,this.scheduler=c.scheduler}loadTile(c,a){const u=c.uid,h=c&&c.request,g=h&&h.collectResourceTiming,_=this.loading[u]=new lne(c);_.abort=this.loadVectorData(c,(w,T)=>{const I=!this.loading[u];if(delete this.loading[u],I||w||!T)return _.status="done",I||(this.loaded[u]=_),a(w);const L=T.rawData,N={};T.expires&&(N.expires=T.expires),T.cacheControl&&(N.cacheControl=T.cacheControl),_.vectorTile=T.vectorTile||new hM(new C1(L));const G=()=>{_.parse(_.vectorTile,this.layerIndex,this.availableImages,this.actor,(W,Z)=>{if(W||!Z)return a(W);const ee={};if(g){const ie=Gt(h);ie.length>0&&(ee.resourceTiming=JSON.parse(JSON.stringify(ie)))}a(null,Ne({rawTileData:L.slice(0)},Z,N,ee))})};this.isSpriteLoaded?G():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(G,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):G()}),this.loaded=this.loaded||{},this.loaded[u]=_})}reloadTile(c,a){const u=this.loaded,h=c.uid,g=this;if(u&&u[h]){const _=u[h];_.showCollisionBoxes=c.showCollisionBoxes,_.enableTerrain=!!c.enableTerrain,_.projection=c.projection,_.tileTransform=Sh(c.tileID.canonical,c.projection);const w=(T,I)=>{const L=_.reloadCallback;L&&(delete _.reloadCallback,_.parse(_.vectorTile,g.layerIndex,this.availableImages,g.actor,L)),a(T,I)};_.status==="parsing"?_.reloadCallback=w:_.status==="done"&&(_.vectorTile?_.parse(_.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,a){const u=c.uid,h=this.loading[u];h&&(h.abort&&h.abort(),delete this.loading[u]),a()}removeTile(c,a){const u=this.loaded,h=c.uid;u&&u[h]&&delete u[h],a()}},s.WritingMode=Ta,s.ZoomDependentExpression=oh,s.add=Cu,s.addDynamicAttributes=D1,s.adjoint=function(c,a){var u=a[0],h=a[1],g=a[2],_=a[3],w=a[4],T=a[5],I=a[6],L=a[7],N=a[8];return c[0]=w*N-T*L,c[1]=g*L-h*N,c[2]=h*T-g*w,c[3]=T*I-_*N,c[4]=u*N-g*I,c[5]=g*_-u*T,c[6]=_*L-w*I,c[7]=h*I-u*L,c[8]=u*w-h*_,c},s.asyncAll=ze,s.bezier=pe,s.bindAll=st,s.boundsAttributes=PN,s.bufferConvexPolygon=function(c,a){const u=[];for(let h=0;h<c.length;h++){const g=ke(h-1,-1,c.length-1),_=ke(h+1,-1,c.length-1),w=c[h],T=c[_],I=c[g].sub(w).unit(),L=T.sub(w).unit(),N=L.angleWithSep(I.x,I.y),G=I.add(L).unit().mult(-1*a/Math.sin(N/2));u.push(w.add(G))}return u},s.cacheEntryPossiblyAdded=function(c){Pn++,Pn>vn&&(c.getActor().send("enforceCacheSizeLimit",on),Pn=0)},s.calculateGlobeLabelMatrix=function(c,a){const{x:u,y:h}=c.point,g=ez(u,h,c.worldSize/c._pixelsPerMercatorPixel,0,0);return mh(g,g,qA(Bc(a)))},s.calculateGlobeMatrix=function(c){const{x:a,y:u}=c.point,{lng:h,lat:g}=c._center;return ez(a,u,c.worldSize,h,g)},s.calculateGlobeMercatorMatrix=function(c){const a=c.pixelsPerMeter,u=a/Ul(1,c.center.lat),h=$l(new Float64Array(16));return My(h,h,[c.point.x,c.point.y,0]),gh(h,h,[u,u,a]),Float32Array.from(h)},s.circumferenceAtLatitude=ZA,s.clamp=xe,s.clearTileCache=function(c){if(!Rn())return;const a=p.caches.delete(Jt);c&&a.catch(c).then(()=>c())},s.clipLine=dN,s.clone=function(c){var a=new sa(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},s.clone$1=bt,s.collisionCircleLayout=ste,s.config=S,s.conjugate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=a[3],c},s.create=function(){var c=new sa(16);return sa!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s.create$1=BF,s.createExpression=Rd,s.createLayout=Je,s.createStyleLayer=function(c){return c.type==="custom"?new Kte(c):new Qte[c.type](c)},s.cross=jA,s.degToRad=ae,s.distance=function(c,a){return Math.hypot(a[0]-c[0],a[1]-c[1],a[2]-c[2])},s.div=function(c,a,u){return c[0]=a[0]/u[0],c[1]=a[1]/u[1],c[2]=a[2]/u[2],c},s.dot=il,s.earthRadius=zy,s.ease=fe,s.easeCubicInOut=Ae,s.ecefToLatLng=function([c,a,u]){const h=Math.hypot(c,a,u),g=Math.atan2(c,u),_=.5*Math.PI-Math.acos(-a/h);return new fi(ve(g),ve(_))},s.emitValidationErrors=Jx,s.endsWith=rt,s.enforceCacheSizeLimit=function(c){Vn(),hn&&hn.then(a=>{a.keys().then(u=>{for(let h=0;h<u.length-c;h++)a.delete(u[h])})})},s.evaluateSizeForFeature=S1,s.evaluateSizeForZoom=wm,s.evaluateVariableOffset=gN,s.evented=C,s.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]},s.exactEquals$1=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]},s.exported=Or,s.exported$1=M,s.extend=Ne,s.extend$1=Hi,s.fillExtrusionHeightLift=Bz,s.filterObject=Rt,s.fromMat4=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[4],c[4]=a[5],c[5]=a[6],c[6]=a[8],c[7]=a[9],c[8]=a[10],c},s.fromQuat=function(c,a){var u=a[0],h=a[1],g=a[2],_=a[3],w=u+u,T=h+h,I=g+g,L=u*w,N=h*w,G=h*T,W=g*w,Z=g*T,ee=g*I,ie=_*w,me=_*T,Pe=_*I;return c[0]=1-G-ee,c[1]=N+Pe,c[2]=W-me,c[3]=0,c[4]=N-Pe,c[5]=1-L-ee,c[6]=Z+ie,c[7]=0,c[8]=W+me,c[9]=Z-ie,c[10]=1-L-G,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.fromRotation=function(c,a){var u=Math.sin(a),h=Math.cos(a);return c[0]=h,c[1]=u,c[2]=0,c[3]=-u,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},s.fromScaling=kF,s.furthestTileCorner=function(c){const a=Math.round((c+45+360)%360/90)%4;return Fe[a]},s.getAABBPointSquareDist=function(c,a,u){let h=0;for(let g=0;g<2;++g){const _=u?u[g]:0;c[g]>_&&(h+=(c[g]-_)*(c[g]-_)),a[g]<_&&(h+=(_-a[g])*(_-a[g]))}return h},s.getAnchorAlignment=bM,s.getAnchorJustification=SM,s.getBounds=function(c){let a=1/0,u=1/0,h=-1/0,g=-1/0;for(const _ of c)a=Math.min(a,_.x),u=Math.min(u,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{min:new Q(a,u),max:new Q(h,g)}},s.getColumn=Nt,s.getDefaultExportFromCjs=$,s.getGridMatrix=function(c,a,u,h){const g=a.getNorth(),_=a.getSouth(),w=a.getWest(),T=a.getEast(),I=1<<c.z,L=T-w,N=g-_,G=L/yh,W=-N/Dy[u],Z=[0,G,0,W,0,0,g,w,0];if(c.z>0){const ee=180/h;DF(Z,Z,[ee/L+1,0,0,0,ee/N+1,0,-.5*ee/G,.5*ee/W,1])}return Z[2]=I,Z[5]=c.x,Z[8]=c.y,Z},s.getImage=te,s.getJSON=function(c,a){return ur(Ne(c,{type:"json"}),a)},s.getLatitudinalLod=function(c){const a=rs-5;c=xe(c,-a,a)/a*90;const u=Math.pow(Math.abs(Math.sin(ae(c))),3);return Math.round(u*(Dy.length-1))},s.getMapSessionAPI=gr,s.getPerformanceMeasurement=Gt,s.getProjection=EN,s.getRTLTextPluginStatus=A,s.getReferrer=cr,s.getTilePoint=function(c,{x:a,y:u},h=0){return new Q(((a-h)*c.scale-c.x)*Gn,(u*c.scale-c.y)*Gn)},s.getTileVec3=function(c,a,u=0){return hm(((a.x-u)*c.scale-c.x)*Gn,(a.y*c.scale-c.y)*Gn,iz(a.z,a.y))},s.getVideo=function(c,a){const u=p.document.createElement("video");u.muted=!0,u.onloadstart=function(){a(null,u)};for(let h=0;h<c.length;h++){const g=p.document.createElement("source");oi(c[h])||(u.crossOrigin="Anonymous"),g.src=c[h],u.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(c){const a=[0,0,0],u=$l(new Float64Array(16));return mh(u,c.pixelMatrix,c.globeMatrix),lo(a,a,u),new Q(a[0],a[1])},s.globeDenormalizeECEF=qA,s.globeECEFOrigin=function(c,a){const u=[0,0,0];return lo(u,u,Fy(Bc(a.canonical))),lo(u,u,c),u},s.globeMetersToEcef=a1,s.globeNormalizeECEF=Fy,s.globePixelsToTileUnits=function(c,a){return Gn/(512*Math.pow(2,c))*c1(Bc(a))},s.globePoleMatrixForTile=function(c,a,u){const h=$l(new Float64Array(16)),g=(a/(1<<c)-.5)*Math.PI*2;return s1(h,u.globeMatrix,g),Float32Array.from(h)},s.globeTileBounds=Bc,s.globeTiltAtLngLat=tz,s.globeToMercatorTransition=gm,s.globeUseCustomAntiAliasing=function(c,a,u){const h=gm(u.zoom),g=c.style.map._antialias,_=!!a.extStandardDerivatives,w=a.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return h===0&&!g&&!w&&_},s.identity=$l,s.identity$1=GF,s.invert=FA,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=YA,s.isMapAuthenticated=function(c){return Yn.has(c)},s.isMapboxURL=ue,s.isSafariWithAntialiasingBug=function(c){const a=c.navigator?c.navigator.userAgent:null;return!!bn(c)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=ns,s.latLngToECEF=mm,s.len=qQ,s.length=Py,s.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},s.lngFromMercatorX=Ca,s.loadVectorTile=XN,s.makeRequest=ur,s.mapValue=function(c,a,u,h,g){return xe((c-a)/(u-a)*(g-h)+h,h,g)},s.mercatorScale=oz,s.mercatorXfromLng=Dc,s.mercatorYfromLat=kc,s.mercatorZfromAltitude=Ul,s.mul=WQ,s.mul$1=XQ,s.multiply=mh,s.multiply$1=DF,s.multiply$2=NF,s.nextPowerOfTwo=ot,s.normalize=Cs,s.normalize$1=YQ,s.normalize$2=UF,s.number=Br,s.ortho=function(c,a,u,h,g,_,w){var T=1/(a-u),I=1/(h-g),L=1/(_-w);return c[0]=-2*T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*L,c[11]=0,c[12]=(a+u)*T,c[13]=(g+h)*I,c[14]=(w+_)*L,c[15]=1,c},s.pbf=Gz,s.perspective=function(c,a,u,h,g){var _,w=1/Math.tan(a/2);return c[0]=w/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+h)*(_=1/(h-g)),c[14]=2*g*h*_):(c[10]=-1,c[14]=-2*h),c},s.pick=function(c,a){const u={};for(let h=0;h<a.length;h++){const g=a[h];g in c&&(u[g]=c[g])}return u},s.plugin=z,s.pointGeometry=J,s.polesInViewport=function(c){const a=$l(new Float64Array(16));mh(a,c.pixelMatrix,c.globeMatrix);const u=[0,ol,0],h=[0,sl,0];return lo(u,u,a),lo(h,h,a),[u[0]>0&&u[0]<=c.width&&u[1]>0&&u[1]<=c.height&&!YA(c,new fi(c.center.lat,90)),h[0]>0&&h[0]<=c.width&&h[1]>0&&h[1]<=c.height&&!YA(c,new fi(c.center.lat,-90))]},s.polygonContainsPoint=xh,s.polygonIntersectsBox=fz,s.polygonIntersectsPolygon=lz,s.polygonizeBounds=function(c,a,u=0,h=!0){const g=new Q(u,u),_=c.sub(g),w=a.add(g),T=[_,new Q(w.x,_.y),w,new Q(_.x,w.y)];return h&&T.push(_.clone()),T},s.posAttributes=By,s.postMapLoadEvent=Jn,s.postPerformanceEvent=Wn,s.postTurnstileEvent=ln,s.potpack=vM,s.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},s.radToDeg=ve,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(c){return c({pluginStatus:y,pluginURL:d}),C.on("pluginStateChange",c),c},s.removeAuthState=function(c){Yn.delete(c)},s.renderColorRamp=iM,s.resample=sz,s.rotateX=zA,s.rotateX$1=HF,s.rotateY=s1,s.rotateY$1=WF,s.rotateZ=function(c,a,u){var h=Math.sin(u),g=Math.cos(u),_=a[0],w=a[1],T=a[2],I=a[3],L=a[4],N=a[5],G=a[6],W=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=_*g+L*h,c[1]=w*g+N*h,c[2]=T*g+G*h,c[3]=I*g+W*h,c[4]=L*g-_*h,c[5]=N*g-w*h,c[6]=G*g-T*h,c[7]=W*g-I*h,c},s.rotateZ$1=function(c,a,u){u*=.5;var h=a[0],g=a[1],_=a[2],w=a[3],T=Math.sin(u),I=Math.cos(u);return c[0]=h*I+g*T,c[1]=g*I-h*T,c[2]=_*I+w*T,c[3]=w*I-_*T,c},s.scale=gh,s.scale$1=jF,s.scale$2=Ea,s.scaleAndAdd=Oy,s.set=function(c,a,u,h){return c[0]=a,c[1]=u,c[2]=h,c},s.setCacheLimits=function(c,a){on=c,vn=a},s.setColumn=function(c,a,u){c[4*a+0]=u[0],c[4*a+1]=u[1],c[4*a+2]=u[2],c[4*a+3]=u[3]},s.setRTLTextPlugin=function(c,a,u=!1){if(y===Sy||y===Ey||y===Cy)throw new Error("setRTLTextPlugin cannot be called multiple times.");d=Or.resolveURL(c),y=Sy,Dd=a,b(),u||F()},s.smoothstep=Re,s.spec=xt,s.squaredLength=function(c){var a=c[0],u=c[1],h=c[2];return a*a+u*u+h*h},s.storeAuthState=function(c,a){a?Yn.add(c):Yn.delete(c)},s.sub=jl,s.subtract=$A,s.symbolSize=ate,s.tileAABB=function(c,a,u,h,g,_,w,T,I){if(I.name==="globe")return eee(c,a,new x1(u,h,g));const L=Sh({z:u,x:h,y:g},I);return new Ts([(_+L.x/L.scale)*a,a*(L.y/L.scale),w],[(_+L.x2/L.scale)*a,a*(L.y2/L.scale),T])},s.tileCornersToBounds=l1,s.tileTransform=Sh,s.transformMat3=function(c,a,u){var h=a[0],g=a[1],_=a[2];return c[0]=h*u[0]+g*u[3]+_*u[6],c[1]=h*u[1]+g*u[4]+_*u[7],c[2]=h*u[2]+g*u[5]+_*u[8],c},s.transformMat4=lo,s.transformMat4$1=vh,s.transformQuat=$F,s.transitionTileAABBinECEF=KF,s.translate=My,s.transpose=function(c,a){if(c===a){var u=a[1],h=a[2],g=a[5];c[1]=a[3],c[2]=a[6],c[3]=u,c[5]=a[7],c[6]=h,c[7]=g}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c},s.triggerPluginCompletionEvent=m,s.uniqueId=pt,s.updateGlobeVertexNormal=function(c,a,u,h,g){const _=5*a+2;c.float32[_+0]=u,c.float32[_+1]=h,c.float32[_+2]=g},s.validateCustomStyleLayer=function(c){const a=[],u=c.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},s.validateFilter=c=>ia(uh(c)),s.validateFog=c=>ia(Yx(c)),s.validateLayer=c=>ia(Hx(c)),s.validateLight=c=>ia(qx(c)),s.validateSource=c=>ia(Xx(c)),s.validateStyle=Kx,s.validateTerrain=c=>ia(yy(c)),s.values=Xe,s.vectorTile=y1,s.version=v,s.warnOnce=it,s.window=p,s.wrap=ke}),l(["./shared"],function(s){function p(Oe){if(typeof Oe=="number"||typeof Oe=="boolean"||typeof Oe=="string"||Oe==null)return JSON.stringify(Oe);if(Array.isArray(Oe)){let oe="[";for(const te of Oe)oe+=`${p(te)},`;return`${oe}]`}let se="{";for(const oe of Object.keys(Oe).sort())se+=`${oe}:${p(Oe[oe])},`;return`${se}}`}function v(Oe){let se="";for(const oe of s.refProperties)se+=`/${p(Oe[oe])}`;return se}class x{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,oe){for(const le of se)this._layerConfigs[le.id]=le,(this._layers[le.id]=s.createStyleLayer(le)).compileFilter(),this.keyCache[le.id]&&delete this.keyCache[le.id];for(const le of oe)delete this.keyCache[le],delete this._layerConfigs[le],delete this._layers[le];this.familiesBySource={};const te=function(le,ue){const Me={};for(let _e=0;_e<le.length;_e++){const De=ue&&ue[le[_e].id]||v(le[_e]);ue&&(ue[le[_e].id]=De);let et=Me[De];et||(et=Me[De]=[]),et.push(le[_e])}const Ce=[];for(const _e in Me)Ce.push(Me[_e]);return Ce}(s.values(this._layerConfigs),this.keyCache);for(const le of te){const ue=le.map(nt=>this._layers[nt.id]),Me=ue[0];if(Me.visibility==="none")continue;const Ce=Me.source||"";let _e=this.familiesBySource[Ce];_e||(_e=this.familiesBySource[Ce]={});const De=Me.sourceLayer||"_geojsonTileLayer";let et=_e[De];et||(et=_e[De]=[]),et.push(ue)}}}class S{loadTile(se,oe){const{uid:te,encoding:le,rawImageData:ue,padding:Me,buildQuadTree:Ce}=se,_e=s.window.ImageBitmap&&ue instanceof s.window.ImageBitmap?this.getImageData(ue,Me):ue;oe(null,new s.DEMData(te,_e,le,Me<1,Ce))}getImageData(se,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(se.width,se.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=se.width,this.offscreenCanvas.height=se.height,this.offscreenCanvasContext.drawImage(se,0,0,se.width,se.height);const te=this.offscreenCanvasContext.getImageData(-oe,-oe,se.width+2*oe,se.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),te}}function M(Oe,se){if(Oe.length!==0){P(Oe[0],se);for(var oe=1;oe<Oe.length;oe++)P(Oe[oe],!se)}}function P(Oe,se){for(var oe=0,te=0,le=0,ue=Oe.length,Me=ue-1;le<ue;Me=le++){var Ce=(Oe[le][0]-Oe[Me][0])*(Oe[Me][1]+Oe[le][1]),_e=oe+Ce;te+=Math.abs(oe)>=Math.abs(Ce)?oe-_e+Ce:Ce-_e+oe,oe=_e}oe+te>=0!=!!se&&Oe.reverse()}var R=s.getDefaultExportFromCjs(function Oe(se,oe){var te,le=se&&se.type;if(le==="FeatureCollection")for(te=0;te<se.features.length;te++)Oe(se.features[te],oe);else if(le==="GeometryCollection")for(te=0;te<se.geometries.length;te++)Oe(se.geometries[te],oe);else if(le==="Feature")Oe(se.geometry,oe);else if(le==="Polygon")M(se.coordinates,oe);else if(le==="MultiPolygon")for(te=0;te<se.coordinates.length;te++)M(se.coordinates[te],oe);return se});const D=s.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},O=s.pointGeometry,k=s.vectorTile.VectorTileFeature,$=H;function H(Oe,se){this.options=se||{},this.features=Oe,this.length=Oe.length}function U(Oe,se){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=se||4096}H.prototype.feature=function(Oe){return new U(this.features[Oe],this.options.extent)},U.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var se=0;se<Oe.length;se++){for(var oe=Oe[se],te=[],le=0;le<oe.length;le++)te.push(new O(oe[le][0],oe[le][1]));this.geometry.push(te)}return this.geometry},U.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,se=1/0,oe=-1/0,te=1/0,le=-1/0,ue=0;ue<Oe.length;ue++)for(var Me=Oe[ue],Ce=0;Ce<Me.length;Ce++){var _e=Me[Ce];se=Math.min(se,_e.x),oe=Math.max(oe,_e.x),te=Math.min(te,_e.y),le=Math.max(le,_e.y)}return[se,te,oe,le]},U.prototype.toGeoJSON=k.prototype.toGeoJSON;var X=s.pbf,J=$;function K(Oe){var se=new X;return function(oe,te){for(var le in oe.layers)te.writeMessage(3,Q,oe.layers[le])}(Oe,se),se.finish()}function Q(Oe,se){var oe;se.writeVarintField(15,Oe.version||1),se.writeStringField(1,Oe.name||""),se.writeVarintField(5,Oe.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Oe.length;oe++)te.feature=Oe.feature(oe),se.writeMessage(2,ce,te);var le=te.keys;for(oe=0;oe<le.length;oe++)se.writeStringField(3,le[oe]);var ue=te.values;for(oe=0;oe<ue.length;oe++)se.writeMessage(4,Ae,ue[oe])}function ce(Oe,se){var oe=Oe.feature;oe.id!==void 0&&se.writeVarintField(1,oe.id),se.writeMessage(2,ge,Oe),se.writeVarintField(3,oe.type),se.writeMessage(4,Fe,oe)}function ge(Oe,se){var oe=Oe.feature,te=Oe.keys,le=Oe.values,ue=Oe.keycache,Me=Oe.valuecache;for(var Ce in oe.properties){var _e=oe.properties[Ce],De=ue[Ce];if(_e!==null){De===void 0&&(te.push(Ce),ue[Ce]=De=te.length-1),se.writeVarint(De);var et=typeof _e;et!=="string"&&et!=="boolean"&&et!=="number"&&(_e=JSON.stringify(_e));var nt=et+":"+_e,Ze=Me[nt];Ze===void 0&&(le.push(_e),Me[nt]=Ze=le.length-1),se.writeVarint(Ze)}}}function ae(Oe,se){return(se<<3)+(7&Oe)}function ve(Oe){return Oe<<1^Oe>>31}function Fe(Oe,se){for(var oe=Oe.loadGeometry(),te=Oe.type,le=0,ue=0,Me=oe.length,Ce=0;Ce<Me;Ce++){var _e=oe[Ce],De=1;te===1&&(De=_e.length),se.writeVarint(ae(1,De));for(var et=te===3?_e.length-1:_e.length,nt=0;nt<et;nt++){nt===1&&te!==1&&se.writeVarint(ae(2,et-1));var Ze=_e[nt].x-le,Et=_e[nt].y-ue;se.writeVarint(ve(Ze)),se.writeVarint(ve(Et)),le+=Ze,ue+=Et}te===3&&se.writeVarint(ae(7,1))}}function Ae(Oe,se){var oe=typeof Oe;oe==="string"?se.writeStringField(1,Oe):oe==="boolean"?se.writeBooleanField(7,Oe):oe==="number"&&(Oe%1!=0?se.writeDoubleField(3,Oe):Oe<0?se.writeSVarintField(6,Oe):se.writeVarintField(5,Oe))}B.exports=K,B.exports.fromVectorTileJs=K,B.exports.fromGeojsonVt=function(Oe,se){se=se||{};var oe={};for(var te in Oe)oe[te]=new J(Oe[te].features,se),oe[te].name=te,oe[te].version=se.version,oe[te].extent=se.extent;return K({layers:oe})},B.exports.GeoJSONWrapper=J;var pe=s.getDefaultExportFromCjs(B.exports);const fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},xe=Math.fround||(Re=new Float32Array(1),Oe=>(Re[0]=+Oe,Re[0]));var Re;const ke=3,ze=5,Xe=6;class Ne{constructor(se){this.options=Object.assign(Object.create(fe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:oe,minZoom:te,maxZoom:le}=this.options;oe&&console.time("total time");const ue=`prepare ${se.length} points`;oe&&console.time(ue),this.points=se;const Me=[];for(let _e=0;_e<se.length;_e++){const De=se[_e];if(!De.geometry)continue;const[et,nt]=De.geometry.coordinates,Ze=xe(Ke(et)),Et=xe(ot(nt));Me.push(Ze,Et,1/0,_e,-1,1),this.options.reduce&&Me.push(0)}let Ce=this.trees[le+1]=this._createTree(Me);oe&&console.timeEnd(ue);for(let _e=le;_e>=te;_e--){const De=+Date.now();Ce=this.trees[_e]=this._createTree(this._cluster(Ce,_e)),oe&&console.log("z%d: %d clusters in %dms",_e,Ce.numItems,+Date.now()-De)}return oe&&console.timeEnd("total time"),this}getClusters(se,oe){let te=((se[0]+180)%360+360)%360-180;const le=Math.max(-90,Math.min(90,se[1]));let ue=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)te=-180,ue=180;else if(te>ue){const nt=this.getClusters([te,le,180,Me],oe),Ze=this.getClusters([-180,le,ue,Me],oe);return nt.concat(Ze)}const Ce=this.trees[this._limitZoom(oe)],_e=Ce.range(Ke(te),ot(Me),Ke(ue),ot(le)),De=Ce.data,et=[];for(const nt of _e){const Ze=this.stride*nt;et.push(De[Ze+ze]>1?Qe(De,Ze,this.clusterProps):this.points[De[Ze+ke]])}return et}getChildren(se){const oe=this._getOriginId(se),te=this._getOriginZoom(se),le="No cluster with the specified id.",ue=this.trees[te];if(!ue)throw new Error(le);const Me=ue.data;if(oe*this.stride>=Me.length)throw new Error(le);const Ce=this.options.radius/(this.options.extent*Math.pow(2,te-1)),_e=ue.within(Me[oe*this.stride],Me[oe*this.stride+1],Ce),De=[];for(const et of _e){const nt=et*this.stride;Me[nt+4]===se&&De.push(Me[nt+ze]>1?Qe(Me,nt,this.clusterProps):this.points[Me[nt+ke]])}if(De.length===0)throw new Error(le);return De}getLeaves(se,oe,te){const le=[];return this._appendLeaves(le,se,oe=oe||10,te=te||0,0),le}getTile(se,oe,te){const le=this.trees[this._limitZoom(se)],ue=Math.pow(2,se),{extent:Me,radius:Ce}=this.options,_e=Ce/Me,De=(te-_e)/ue,et=(te+1+_e)/ue,nt={features:[]};return this._addTileFeatures(le.range((oe-_e)/ue,De,(oe+1+_e)/ue,et),le.data,oe,te,ue,nt),oe===0&&this._addTileFeatures(le.range(1-_e/ue,De,1,et),le.data,ue,te,ue,nt),oe===ue-1&&this._addTileFeatures(le.range(0,De,_e/ue,et),le.data,-1,te,ue,nt),nt.features.length?nt:null}getClusterExpansionZoom(se){let oe=this._getOriginZoom(se)-1;for(;oe<=this.options.maxZoom;){const te=this.getChildren(se);if(oe++,te.length!==1)break;se=te[0].properties.cluster_id}return oe}_appendLeaves(se,oe,te,le,ue){const Me=this.getChildren(oe);for(const Ce of Me){const _e=Ce.properties;if(_e&&_e.cluster?ue+_e.point_count<=le?ue+=_e.point_count:ue=this._appendLeaves(se,_e.cluster_id,te,le,ue):ue<le?ue++:se.push(Ce),se.length===te)break}return ue}_createTree(se){const oe=new s.KDBush(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<se.length;te+=this.stride)oe.add(se[te],se[te+1]);return oe.finish(),oe.data=se,oe}_addTileFeatures(se,oe,te,le,ue,Me){for(const Ce of se){const _e=Ce*this.stride,De=oe[_e+ze]>1;let et,nt,Ze;if(De)et=pt(oe,_e,this.clusterProps),nt=oe[_e],Ze=oe[_e+1];else{const Ct=this.points[oe[_e+ke]];et=Ct.properties;const[Vt,ln]=Ct.geometry.coordinates;nt=Ke(Vt),Ze=ot(ln)}const Et={type:1,geometry:[[Math.round(this.options.extent*(nt*ue-te)),Math.round(this.options.extent*(Ze*ue-le))]],tags:et};let vt;vt=De||this.options.generateId?oe[_e+ke]:this.points[oe[_e+ke]].id,vt!==void 0&&(Et.id=vt),Me.features.push(Et)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,oe){const{radius:te,extent:le,reduce:ue,minPoints:Me}=this.options,Ce=te/(le*Math.pow(2,oe)),_e=se.data,De=[],et=this.stride;for(let nt=0;nt<_e.length;nt+=et){if(_e[nt+2]<=oe)continue;_e[nt+2]=oe;const Ze=_e[nt],Et=_e[nt+1],vt=se.within(_e[nt],_e[nt+1],Ce),Ct=_e[nt+ze];let Vt=Ct;for(const ln of vt){const kn=ln*et;_e[kn+2]>oe&&(Vt+=_e[kn+ze])}if(Vt>Ct&&Vt>=Me){let ln,kn=Ze*Ct,Jn=Et*Ct,_r=-1;const Wn=((nt/et|0)<<5)+(oe+1)+this.points.length;for(const dr of vt){const gr=dr*et;if(_e[gr+2]<=oe)continue;_e[gr+2]=oe;const Yn=_e[gr+ze];kn+=_e[gr]*Yn,Jn+=_e[gr+1]*Yn,_e[gr+4]=Wn,ue&&(ln||(ln=this._map(_e,nt,!0),_r=this.clusterProps.length,this.clusterProps.push(ln)),ue(ln,this._map(_e,gr)))}_e[nt+4]=Wn,De.push(kn/Vt,Jn/Vt,1/0,Wn,-1,Vt),ue&&De.push(_r)}else{for(let ln=0;ln<et;ln++)De.push(_e[nt+ln]);if(Vt>1)for(const ln of vt){const kn=ln*et;if(!(_e[kn+2]<=oe)){_e[kn+2]=oe;for(let Jn=0;Jn<et;Jn++)De.push(_e[kn+Jn])}}}}return De}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,oe,te){if(se[oe+ze]>1){const Me=this.clusterProps[se[oe+Xe]];return te?Object.assign({},Me):Me}const le=this.points[se[oe+ke]].properties,ue=this.options.map(le);return te&&ue===le?Object.assign({},ue):ue}}function Qe(Oe,se,oe){return{type:"Feature",id:Oe[se+ke],properties:pt(Oe,se,oe),geometry:{type:"Point",coordinates:[(te=Oe[se],360*(te-.5)),St(Oe[se+1])]}};var te}function pt(Oe,se,oe){const te=Oe[se+ze],le=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,ue=Oe[se+Xe],Me=ue===-1?{}:Object.assign({},oe[ue]);return Object.assign(Me,{cluster:!0,cluster_id:Oe[se+ke],point_count:te,point_count_abbreviated:le})}function Ke(Oe){return Oe/360+.5}function ot(Oe){const se=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function St(Oe){const se=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function st(Oe,se,oe,te){for(var le,ue=te,Me=oe-se>>1,Ce=oe-se,_e=Oe[se],De=Oe[se+1],et=Oe[oe],nt=Oe[oe+1],Ze=se+3;Ze<oe;Ze+=3){var Et=rt(Oe[Ze],Oe[Ze+1],_e,De,et,nt);if(Et>ue)le=Ze,ue=Et;else if(Et===ue){var vt=Math.abs(Ze-Me);vt<Ce&&(le=Ze,Ce=vt)}}ue>te&&(le-se>3&&st(Oe,se,le,te),Oe[le+2]=ue,oe-le>3&&st(Oe,le,oe,te))}function rt(Oe,se,oe,te,le,ue){var Me=le-oe,Ce=ue-te;if(Me!==0||Ce!==0){var _e=((Oe-oe)*Me+(se-te)*Ce)/(Me*Me+Ce*Ce);_e>1?(oe=le,te=ue):_e>0&&(oe+=Me*_e,te+=Ce*_e)}return(Me=Oe-oe)*Me+(Ce=se-te)*Ce}function lt(Oe,se,oe,te){var le={id:Oe===void 0?null:Oe,type:se,geometry:oe,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var Me=ue.geometry,Ce=ue.type;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")Rt(ue,Me);else if(Ce==="Polygon"||Ce==="MultiLineString")for(var _e=0;_e<Me.length;_e++)Rt(ue,Me[_e]);else if(Ce==="MultiPolygon")for(_e=0;_e<Me.length;_e++)for(var De=0;De<Me[_e].length;De++)Rt(ue,Me[_e][De])}(le),le}function Rt(Oe,se){for(var oe=0;oe<se.length;oe+=3)Oe.minX=Math.min(Oe.minX,se[oe]),Oe.minY=Math.min(Oe.minY,se[oe+1]),Oe.maxX=Math.max(Oe.maxX,se[oe]),Oe.maxY=Math.max(Oe.maxY,se[oe+1])}function bt(Oe,se,oe,te){if(se.geometry){var le=se.geometry.coordinates,ue=se.geometry.type,Me=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),Ce=[],_e=se.id;if(oe.promoteId?_e=se.properties[oe.promoteId]:oe.generateId&&(_e=te||0),ue==="Point")wt(le,Ce);else if(ue==="MultiPoint")for(var De=0;De<le.length;De++)wt(le[De],Ce);else if(ue==="LineString")it(le,Ce,Me,!1);else if(ue==="MultiLineString"){if(oe.lineMetrics){for(De=0;De<le.length;De++)it(le[De],Ce=[],Me,!1),Oe.push(lt(_e,"LineString",Ce,se.properties));return}Bt(le,Ce,Me,!1)}else if(ue==="Polygon")Bt(le,Ce,Me,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(De=0;De<se.geometry.geometries.length;De++)bt(Oe,{id:_e,geometry:se.geometry.geometries[De],properties:se.properties},oe,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(De=0;De<le.length;De++){var et=[];Bt(le[De],et,Me,!0),Ce.push(et)}}Oe.push(lt(_e,ue,Ce,se.properties))}}function wt(Oe,se){se.push(jt(Oe[0])),se.push(cn(Oe[1])),se.push(0)}function it(Oe,se,oe,te){for(var le,ue,Me=0,Ce=0;Ce<Oe.length;Ce++){var _e=jt(Oe[Ce][0]),De=cn(Oe[Ce][1]);se.push(_e),se.push(De),se.push(0),Ce>0&&(Me+=te?(le*De-_e*ue)/2:Math.sqrt(Math.pow(_e-le,2)+Math.pow(De-ue,2))),le=_e,ue=De}var et=se.length-3;se[2]=1,st(se,0,et,oe),se[et+2]=1,se.size=Math.abs(Me),se.start=0,se.end=se.size}function Bt(Oe,se,oe,te){for(var le=0;le<Oe.length;le++){var ue=[];it(Oe[le],ue,oe,te),se.push(ue)}}function jt(Oe){return Oe/360+.5}function cn(Oe){var se=Math.sin(Oe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function rn(Oe,se,oe,te,le,ue,Me,Ce){if(te/=se,ue>=(oe/=se)&&Me<te)return Oe;if(Me<oe||ue>=te)return null;for(var _e=[],De=0;De<Oe.length;De++){var et=Oe[De],nt=et.geometry,Ze=et.type,Et=le===0?et.minX:et.minY,vt=le===0?et.maxX:et.maxY;if(Et>=oe&&vt<te)_e.push(et);else if(!(vt<oe||Et>=te)){var Ct=[];if(Ze==="Point"||Ze==="MultiPoint")zt(nt,Ct,oe,te,le);else if(Ze==="LineString")bn(nt,Ct,oe,te,le,!1,Ce.lineMetrics);else if(Ze==="MultiLineString")Nt(nt,Ct,oe,te,le,!1);else if(Ze==="Polygon")Nt(nt,Ct,oe,te,le,!0);else if(Ze==="MultiPolygon")for(var Vt=0;Vt<nt.length;Vt++){var ln=[];Nt(nt[Vt],ln,oe,te,le,!0),ln.length&&Ct.push(ln)}if(Ct.length){if(Ce.lineMetrics&&Ze==="LineString"){for(Vt=0;Vt<Ct.length;Vt++)_e.push(lt(et.id,Ze,Ct[Vt],et.tags));continue}Ze!=="LineString"&&Ze!=="MultiLineString"||(Ct.length===1?(Ze="LineString",Ct=Ct[0]):Ze="MultiLineString"),Ze!=="Point"&&Ze!=="MultiPoint"||(Ze=Ct.length===3?"Point":"MultiPoint"),_e.push(lt(et.id,Ze,Ct,et.tags))}}}return _e.length?_e:null}function zt(Oe,se,oe,te,le){for(var ue=0;ue<Oe.length;ue+=3){var Me=Oe[ue+le];Me>=oe&&Me<=te&&(se.push(Oe[ue]),se.push(Oe[ue+1]),se.push(Oe[ue+2]))}}function bn(Oe,se,oe,te,le,ue,Me){for(var Ce,_e,De=Ot(Oe),et=le===0?on:vn,nt=Oe.start,Ze=0;Ze<Oe.length-3;Ze+=3){var Et=Oe[Ze],vt=Oe[Ze+1],Ct=Oe[Ze+2],Vt=Oe[Ze+3],ln=Oe[Ze+4],kn=le===0?Et:vt,Jn=le===0?Vt:ln,_r=!1;Me&&(Ce=Math.sqrt(Math.pow(Et-Vt,2)+Math.pow(vt-ln,2))),kn<oe?Jn>oe&&(_e=et(De,Et,vt,Vt,ln,oe),Me&&(De.start=nt+Ce*_e)):kn>te?Jn<te&&(_e=et(De,Et,vt,Vt,ln,te),Me&&(De.start=nt+Ce*_e)):Jt(De,Et,vt,Ct),Jn<oe&&kn>=oe&&(_e=et(De,Et,vt,Vt,ln,oe),_r=!0),Jn>te&&kn<=te&&(_e=et(De,Et,vt,Vt,ln,te),_r=!0),!ue&&_r&&(Me&&(De.end=nt+Ce*_e),se.push(De),De=Ot(Oe)),Me&&(nt+=Ce)}var Wn=Oe.length-3;Et=Oe[Wn],vt=Oe[Wn+1],Ct=Oe[Wn+2],(kn=le===0?Et:vt)>=oe&&kn<=te&&Jt(De,Et,vt,Ct),Wn=De.length-3,ue&&Wn>=3&&(De[Wn]!==De[0]||De[Wn+1]!==De[1])&&Jt(De,De[0],De[1],De[2]),De.length&&se.push(De)}function Ot(Oe){var se=[];return se.size=Oe.size,se.start=Oe.start,se.end=Oe.end,se}function Nt(Oe,se,oe,te,le,ue){for(var Me=0;Me<Oe.length;Me++)bn(Oe[Me],se,oe,te,le,ue,!1)}function Jt(Oe,se,oe,te){Oe.push(se),Oe.push(oe),Oe.push(te)}function on(Oe,se,oe,te,le,ue){var Me=(ue-se)/(te-se);return Oe.push(ue),Oe.push(oe+(le-oe)*Me),Oe.push(1),Me}function vn(Oe,se,oe,te,le,ue){var Me=(ue-oe)/(le-oe);return Oe.push(se+(te-se)*Me),Oe.push(ue),Oe.push(1),Me}function hn(Oe,se){for(var oe=[],te=0;te<Oe.length;te++){var le,ue=Oe[te],Me=ue.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")le=wn(ue.geometry,se);else if(Me==="MultiLineString"||Me==="Polygon"){le=[];for(var Ce=0;Ce<ue.geometry.length;Ce++)le.push(wn(ue.geometry[Ce],se))}else if(Me==="MultiPolygon")for(le=[],Ce=0;Ce<ue.geometry.length;Ce++){for(var _e=[],De=0;De<ue.geometry[Ce].length;De++)_e.push(wn(ue.geometry[Ce][De],se));le.push(_e)}oe.push(lt(ue.id,Me,le,ue.tags))}return oe}function wn(Oe,se){var oe=[];oe.size=Oe.size,Oe.start!==void 0&&(oe.start=Oe.start,oe.end=Oe.end);for(var te=0;te<Oe.length;te+=3)oe.push(Oe[te]+se,Oe[te+1],Oe[te+2]);return oe}function Rn(Oe,se){if(Oe.transformed)return Oe;var oe,te,le,ue=1<<Oe.z,Me=Oe.x,Ce=Oe.y;for(oe=0;oe<Oe.features.length;oe++){var _e=Oe.features[oe],De=_e.geometry,et=_e.type;if(_e.geometry=[],et===1)for(te=0;te<De.length;te+=2)_e.geometry.push(Vn(De[te],De[te+1],se,ue,Me,Ce));else for(te=0;te<De.length;te++){var nt=[];for(le=0;le<De[te].length;le+=2)nt.push(Vn(De[te][le],De[te][le+1],se,ue,Me,Ce));_e.geometry.push(nt)}}return Oe.transformed=!0,Oe}function Vn(Oe,se,oe,te,le,ue){return[Math.round(oe*(Oe*te-le)),Math.round(oe*(se*te-ue))]}function rr(Oe,se,oe,te,le){for(var ue=se===le.maxZoom?0:le.tolerance/((1<<se)*le.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:te,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ce=0;Ce<Oe.length;Ce++){Me.numFeatures++,Pn(Me,Oe[Ce],ue,le);var _e=Oe[Ce].minX,De=Oe[Ce].minY,et=Oe[Ce].maxX,nt=Oe[Ce].maxY;_e<Me.minX&&(Me.minX=_e),De<Me.minY&&(Me.minY=De),et>Me.maxX&&(Me.maxX=et),nt>Me.maxY&&(Me.maxY=nt)}return Me}function Pn(Oe,se,oe,te){var le=se.geometry,ue=se.type,Me=[];if(ue==="Point"||ue==="MultiPoint")for(var Ce=0;Ce<le.length;Ce+=3)Me.push(le[Ce]),Me.push(le[Ce+1]),Oe.numPoints++,Oe.numSimplified++;else if(ue==="LineString")Sn(Me,le,Oe,oe,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(Ce=0;Ce<le.length;Ce++)Sn(Me,le[Ce],Oe,oe,ue==="Polygon",Ce===0);else if(ue==="MultiPolygon")for(var _e=0;_e<le.length;_e++){var De=le[_e];for(Ce=0;Ce<De.length;Ce++)Sn(Me,De[Ce],Oe,oe,!0,Ce===0)}if(Me.length){var et=se.tags||null;if(ue==="LineString"&&te.lineMetrics){for(var nt in et={},se.tags)et[nt]=se.tags[nt];et.mapbox_clip_start=le.start/le.size,et.mapbox_clip_end=le.end/le.size}var Ze={geometry:Me,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:et};se.id!==null&&(Ze.id=se.id),Oe.features.push(Ze)}}function Sn(Oe,se,oe,te,le,ue){var Me=te*te;if(te>0&&se.size<(le?Me:te))oe.numPoints+=se.length/3;else{for(var Ce=[],_e=0;_e<se.length;_e+=3)(te===0||se[_e+2]>Me)&&(oe.numSimplified++,Ce.push(se[_e]),Ce.push(se[_e+1])),oe.numPoints++;le&&function(De,et){for(var nt=0,Ze=0,Et=De.length,vt=Et-2;Ze<Et;vt=Ze,Ze+=2)nt+=(De[Ze]-De[vt])*(De[Ze+1]+De[vt+1]);if(nt>0===et)for(Ze=0,Et=De.length;Ze<Et/2;Ze+=2){var Ct=De[Ze],Vt=De[Ze+1];De[Ze]=De[Et-2-Ze],De[Ze+1]=De[Et-1-Ze],De[Et-2-Ze]=Ct,De[Et-1-Ze]=Vt}}(Ce,ue),Oe.push(Ce)}}function fr(Oe,se){var oe=(se=this.options=function(le,ue){for(var Me in ue)le[Me]=ue[Me];return le}(Object.create(this.options),se)).debug;if(oe&&console.time("preprocess data"),se.maxZoom<0||se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(se.promoteId&&se.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(le,ue){var Me=[];if(le.type==="FeatureCollection")for(var Ce=0;Ce<le.features.length;Ce++)bt(Me,le.features[Ce],ue,Ce);else bt(Me,le.type==="Feature"?le:{geometry:le},ue);return Me}(Oe,se);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",se.indexMaxZoom,se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(le,ue){var Me=ue.buffer/ue.extent,Ce=le,_e=rn(le,1,-1-Me,Me,0,-1,2,ue),De=rn(le,1,1-Me,2+Me,0,-1,2,ue);return(_e||De)&&(Ce=rn(le,1,-Me,1+Me,0,-1,2,ue)||[],_e&&(Ce=hn(_e,1).concat(Ce)),De&&(Ce=Ce.concat(hn(De,-1)))),Ce}(te,se),te.length&&this.splitTile(te,0,0,0),oe&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function cr(Oe,se,oe){return 32*((1<<Oe)*oe+se)+Oe}function ur(Oe,se){const oe=Oe.tileID.canonical;if(!this._geoJSONIndex)return se(null,null);const te=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!te)return se(null,null);const le=new class{constructor(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Me.length,this._features=Me}feature(Me){return new class{constructor(Ce){this._feature=Ce,this.extent=s.EXTENT,this.type=Ce.type,this.properties=Ce.tags,"id"in Ce&&!isNaN(Ce.id)&&(this.id=parseInt(Ce.id,10))}loadGeometry(){if(this._feature.type===1){const Ce=[];for(const _e of this._feature.geometry)Ce.push([new s.Point(_e[0],_e[1])]);return Ce}{const Ce=[];for(const _e of this._feature.geometry){const De=[];for(const et of _e)De.push(new s.Point(et[0],et[1]));Ce.push(De)}return Ce}}toGeoJSON(Ce,_e,De){return D.call(this,Ce,_e,De)}}(this._features[Me])}}(te.features);let ue=pe(le);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),se(null,{vectorTile:le,rawData:ue.buffer})}fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(Oe,se,oe,te,le,ue,Me){for(var Ce=[Oe,se,oe,te],_e=this.options,De=_e.debug;Ce.length;){te=Ce.pop(),oe=Ce.pop(),se=Ce.pop(),Oe=Ce.pop();var et=1<<se,nt=cr(se,oe,te),Ze=this.tiles[nt];if(!Ze&&(De>1&&console.time("creation"),Ze=this.tiles[nt]=rr(Oe,se,oe,te,_e),this.tileCoords.push({z:se,x:oe,y:te}),De)){De>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",se,oe,te,Ze.numFeatures,Ze.numPoints,Ze.numSimplified),console.timeEnd("creation"));var Et="z"+se;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(Ze.source=Oe,le){if(se===_e.maxZoom||se===le)continue;var vt=1<<le-se;if(oe!==Math.floor(ue/vt)||te!==Math.floor(Me/vt))continue}else if(se===_e.indexMaxZoom||Ze.numPoints<=_e.indexMaxPoints)continue;if(Ze.source=null,Oe.length!==0){De>1&&console.time("clipping");var Ct,Vt,ln,kn,Jn,_r,Wn=.5*_e.buffer/_e.extent,dr=.5-Wn,gr=.5+Wn,Yn=1+Wn;Ct=Vt=ln=kn=null,Jn=rn(Oe,et,oe-Wn,oe+gr,0,Ze.minX,Ze.maxX,_e),_r=rn(Oe,et,oe+dr,oe+Yn,0,Ze.minX,Ze.maxX,_e),Oe=null,Jn&&(Ct=rn(Jn,et,te-Wn,te+gr,1,Ze.minY,Ze.maxY,_e),Vt=rn(Jn,et,te+dr,te+Yn,1,Ze.minY,Ze.maxY,_e),Jn=null),_r&&(ln=rn(_r,et,te-Wn,te+gr,1,Ze.minY,Ze.maxY,_e),kn=rn(_r,et,te+dr,te+Yn,1,Ze.minY,Ze.maxY,_e),_r=null),De>1&&console.timeEnd("clipping"),Ce.push(Ct||[],se+1,2*oe,2*te),Ce.push(Vt||[],se+1,2*oe,2*te+1),Ce.push(ln||[],se+1,2*oe+1,2*te),Ce.push(kn||[],se+1,2*oe+1,2*te+1)}}},fr.prototype.getTile=function(Oe,se,oe){var te=this.options,le=te.extent,ue=te.debug;if(Oe<0||Oe>24)return null;var Me=1<<Oe,Ce=cr(Oe,se=(se%Me+Me)%Me,oe);if(this.tiles[Ce])return Rn(this.tiles[Ce],le);ue>1&&console.log("drilling down to z%d-%d-%d",Oe,se,oe);for(var _e,De=Oe,et=se,nt=oe;!_e&&De>0;)De--,et=Math.floor(et/2),nt=Math.floor(nt/2),_e=this.tiles[cr(De,et,nt)];return _e&&_e.source?(ue>1&&console.log("found parent tile z%d-%d-%d",De,et,nt),ue>1&&console.time("drilling down"),this.splitTile(_e.source,De,et,nt,Oe,se,oe),ue>1&&console.timeEnd("drilling down"),this.tiles[Ce]?Rn(this.tiles[Ce],le):null):null};class tr extends s.VectorTileWorkerSource{constructor(se,oe,te,le,ue){super(se,oe,te,le,ur),ue&&(this.loadGeoJSON=ue)}loadData(se,oe){const te=se&&se.request,le=te&&te.collectResourceTiming;this.loadGeoJSON(se,(ue,Me)=>{if(ue||!Me)return oe(ue);if(typeof Me!="object")return oe(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));{R(Me,!0);try{if(se.filter){const _e=s.createExpression(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(et=>`${et.key}: ${et.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(et=>_e.value.evaluate({zoom:0},et))}}this._geoJSONIndex=se.cluster?new Ne(function({superclusterOptions:_e,clusterProperties:De}){if(!De||!_e)return _e;const et={},nt={},Ze={accumulated:null,zoom:0},Et={properties:null},vt=Object.keys(De);for(const Ct of vt){const[Vt,ln]=De[Ct],kn=s.createExpression(ln),Jn=s.createExpression(typeof Vt=="string"?[Vt,["accumulated"],["get",Ct]]:Vt);et[Ct]=kn.value,nt[Ct]=Jn.value}return _e.map=Ct=>{Et.properties=Ct;const Vt={};for(const ln of vt)Vt[ln]=et[ln].evaluate(Ze,Et);return Vt},_e.reduce=(Ct,Vt)=>{Et.properties=Vt;for(const ln of vt)Ze.accumulated=Ct[ln],Ct[ln]=nt[ln].evaluate(Ze,Et)},_e}(se)).load(Me.features):function(_e,De){return new fr(_e,De)}(Me,se.geojsonVtOptions)}catch(_e){return oe(_e)}this.loaded={};const Ce={};if(le){const _e=s.getPerformanceMeasurement(te);_e&&(Ce.resourceTiming={},Ce.resourceTiming[se.source]=JSON.parse(JSON.stringify(_e)))}oe(null,Ce)}})}reloadTile(se,oe){const te=this.loaded;return te&&te[se.uid]?super.reloadTile(se,oe):this.loadTile(se,oe)}loadGeoJSON(se,oe){if(se.request)s.getJSON(se.request,oe);else{if(typeof se.data!="string")return oe(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(se.data))}catch{return oe(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(se,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(se.clusterId))}catch(te){oe(te)}}getClusterChildren(se,oe){try{oe(null,this._geoJSONIndex.getChildren(se.clusterId))}catch(te){oe(te)}}getClusterLeaves(se,oe){try{oe(null,this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset))}catch(te){oe(te)}}}class oi{constructor(se){this.self=se,this.actor=new s.Actor(se,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:tr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,te)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=te},this.self.registerRTLTextPlugin=oe=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=oe.applyArabicShaping,s.plugin.processBidirectionalText=oe.processBidirectionalText,s.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(se,oe,te){delete this.layerIndexes[se],delete this.availableImages[se],delete this.workerSources[se],delete this.demWorkerSources[se],te()}checkIfReady(se,oe,te){te()}setReferrer(se,oe){this.referrer=oe}spriteLoaded(se,oe){this.isSpriteLoaded[se]=oe;for(const te in this.workerSources[se]){const le=this.workerSources[se][te];for(const ue in le)le[ue]instanceof s.VectorTileWorkerSource&&(le[ue].isSpriteLoaded=oe,le[ue].fire(new s.Event("isSpriteLoaded")))}}setImages(se,oe,te){this.availableImages[se]=oe;for(const le in this.workerSources[se]){const ue=this.workerSources[se][le];for(const Me in ue)ue[Me].availableImages=oe}te()}enableTerrain(se,oe,te){this.terrain=oe,te()}setProjection(se,oe){this.projections[se]=s.getProjection(oe)}setLayers(se,oe,te){this.getLayerIndex(se).replace(oe),te()}updateLayers(se,oe,te){this.getLayerIndex(se).update(oe.layers,oe.removedIds),te()}loadTile(se,oe,te){const le=this.enableTerrain?s.extend({enableTerrain:this.terrain},oe):oe;le.projection=this.projections[se]||this.defaultProjection,this.getWorkerSource(se,oe.type,oe.source).loadTile(le,te)}loadDEMTile(se,oe,te){const le=this.enableTerrain?s.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(se,oe.source).loadTile(le,te)}reloadTile(se,oe,te){const le=this.enableTerrain?s.extend({enableTerrain:this.terrain},oe):oe;le.projection=this.projections[se]||this.defaultProjection,this.getWorkerSource(se,oe.type,oe.source).reloadTile(le,te)}abortTile(se,oe,te){this.getWorkerSource(se,oe.type,oe.source).abortTile(oe,te)}removeTile(se,oe,te){this.getWorkerSource(se,oe.type,oe.source).removeTile(oe,te)}removeSource(se,oe,te){if(!this.workerSources[se]||!this.workerSources[se][oe.type]||!this.workerSources[se][oe.type][oe.source])return;const le=this.workerSources[se][oe.type][oe.source];delete this.workerSources[se][oe.type][oe.source],le.removeSource!==void 0?le.removeSource(oe,te):te()}loadWorkerSource(se,oe,te){try{this.self.importScripts(oe.url),te()}catch(le){te(le.toString())}}syncRTLPluginState(se,oe,te){try{s.plugin.setState(oe);const le=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&le!=null){this.self.importScripts(le);const ue=s.plugin.isParsed();te(ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${le}`),ue)}}catch(le){te(le.toString())}}getAvailableImages(se){let oe=this.availableImages[se];return oe||(oe=[]),oe}getLayerIndex(se){let oe=this.layerIndexes[se];return oe||(oe=this.layerIndexes[se]=new x),oe}getWorkerSource(se,oe,te){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][oe]||(this.workerSources[se][oe]={}),!this.workerSources[se][oe][te]){const le={send:(ue,Me,Ce,_e,De,et)=>{this.actor.send(ue,Me,Ce,se,De,et)},scheduler:this.actor.scheduler};this.workerSources[se][oe][te]=new this.workerSourceTypes[oe](le,this.getLayerIndex(se),this.getAvailableImages(se),this.isSpriteLoaded[se])}return this.workerSources[se][oe][te]}getDEMWorkerSource(se,oe){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][oe]||(this.demWorkerSources[se][oe]=new S),this.demWorkerSources[se][oe]}enforceCacheSizeLimit(se,oe){s.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(se,oe,te){te(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new oi(self)),oi}),l(["./shared"],function(s){function p(y,d){if(Array.isArray(y)){if(!Array.isArray(d)||y.length!==d.length)return!1;for(let m=0;m<y.length;m++)if(!p(y[m],d[m]))return!1;return!0}if(typeof y=="object"&&y!==null&&d!==null){if(typeof d!="object"||Object.keys(y).length!==Object.keys(d).length)return!1;for(const m in y)if(!p(y[m],d[m]))return!1;return!0}return y===d}var v=x;function x(y){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,C,A=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(A);try{C=new Worker(F),b=!0}catch{b=!1}return C&&C.terminate(),URL.revokeObjectURL(F),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var C=b.getContext("2d");if(!C)return!1;var A=C.getImageData(0,0,1,1);return A&&A.width===b.width}()?(S[m=d&&d.failIfMajorPerformanceCaveat]===void 0&&(S[m]=function(b){var C,A=function(F){var z=document.createElement("canvas"),V=Object.create(x.webGLContextAttributes);return V.failIfMajorPerformanceCaveat=F,z.getContext("webgl",V)||z.getContext("experimental-webgl",V)}(b);if(!A)return!1;try{C=A.createShader(A.VERTEX_SHADER)}catch{return!1}return!(!C||A.isContextLost())&&(A.shaderSource(C,"void main() {}"),A.compileShader(C),A.getShaderParameter(C,A.COMPILE_STATUS)===!0)}(m)),S[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m}(y)}var S={};function M(y,d,m){const b=s.window.document.createElement(y);return d!==void 0&&(b.className=d),m&&m.appendChild(b),b}function P(y,d,m){const b=s.window.document.createElementNS("http://www.w3.org/2000/svg",y);for(const C of Object.keys(d))b.setAttributeNS(null,C,d[C]);return m&&m.appendChild(b),b}x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const R=s.window.document&&s.window.document.documentElement.style,D=R&&R.userSelect!==void 0?"userSelect":"WebkitUserSelect";let B;function O(){R&&D&&(B=R[D],R[D]="none")}function k(){R&&D&&(R[D]=B)}function $(y){y.preventDefault(),y.stopPropagation(),s.window.removeEventListener("click",$,!0)}function H(){s.window.addEventListener("click",$,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",$,!0)},0)}function U(y,d){const m=y.getBoundingClientRect();return K(y,m,d)}function X(y,d){const m=y.getBoundingClientRect(),b=[];for(let C=0;C<d.length;C++)b.push(K(y,m,d[C]));return b}function J(y){return s.window.InstallTrigger!==void 0&&y.button===2&&y.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:y.button}function K(y,d,m){const b=y.offsetWidth===d.width?1:y.offsetWidth/d.width;return new s.Point((m.clientX-d.left)*b,(m.clientY-d.top)*b)}function Q(y,d){var m=d[0],b=d[1],C=d[2],A=d[3],F=m*A-C*b;return F?(y[0]=A*(F=1/F),y[1]=-b*F,y[2]=-C*F,y[3]=m*F,y):null}function ce(y){const{userImage:d}=y;return!!(d&&d.render&&d.render())&&(y.data.replace(new Uint8Array(d.data.buffer)),!0)}class ge extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:m,callback:b}of this.requestors)this._notify(m,b);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,m){this._validate(d,m)&&(this.images[d]=m)}_validate(d,m){let b=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),b=!1),b}_validateStretch(d,m){if(!d)return!0;let b=0;for(const C of d){if(C[0]<b||C[1]<C[0]||m<C[1])return!1;b=C[1]}return!0}_validateContent(d,m){return!(d&&(d.length!==4||d[0]<0||m.data.width<d[0]||d[1]<0||m.data.height<d[1]||d[2]<0||m.data.width<d[2]||d[3]<0||m.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,m){m.version=this.images[d].version+1,this.images[d]=m,this.updatedImages[d]=!0}removeImage(d){const m=this.images[d];delete this.images[d],delete this.patterns[d],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,m){let b=!0;if(!this.isLoaded())for(const C of d)this.images[C]||(b=!1);this.isLoaded()||b?this._notify(d,m):this.requestors.push({ids:d,callback:m})}_notify(d,m){const b={};for(const C of d){this.images[C]||this.fire(new s.Event("styleimagemissing",{id:C}));const A=this.images[C];A?b[C]={data:A.data.clone(),pixelRatio:A.pixelRatio,sdf:A.sdf,version:A.version,stretchX:A.stretchX,stretchY:A.stretchY,content:A.content,hasRenderCallback:!!(A.userImage&&A.userImage.render)}:s.warnOnce(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,b)}getPixelSize(){const{width:d,height:m}=this.atlasImage;return{width:d,height:m}}getPattern(d){const m=this.patterns[d],b=this.getImage(d);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const C={w:b.data.width+2,h:b.data.height+2,x:0,y:0},A=new s.ImagePosition(C,b);this.patterns[d]={bin:C,position:A}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const m=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(d,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const A in this.patterns)d.push(this.patterns[A].bin);const{w:m,h:b}=s.potpack(d),C=this.atlasImage;C.resize({width:m||1,height:b||1});for(const A in this.patterns){const{bin:F}=this.patterns[A],z=F.x+1,V=F.y+1,Y=this.images[A].data,q=Y.width,ne=Y.height;s.RGBAImage.copy(Y,C,{x:0,y:0},{x:z,y:V},{width:q,height:ne}),s.RGBAImage.copy(Y,C,{x:0,y:ne-1},{x:z,y:V-1},{width:q,height:1}),s.RGBAImage.copy(Y,C,{x:0,y:0},{x:z,y:V+ne},{width:q,height:1}),s.RGBAImage.copy(Y,C,{x:q-1,y:0},{x:z-1,y:V},{width:1,height:ne}),s.RGBAImage.copy(Y,C,{x:0,y:0},{x:z+q,y:V},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const m of d){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.images[m];ce(b)&&this.updateImage(m,b)}}}const ae=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(y,d){return function([m,b,C]){const A=s.degToRad(b+90),F=s.degToRad(C);return{x:m*Math.cos(A)*Math.sin(F),y:m*Math.sin(A)*Math.sin(F),z:m*Math.cos(F),azimuthal:b,polar:C}}(y.expression.evaluate(d))}interpolate(y,d,m){return{x:s.number(y.x,d.x,m),y:s.number(y.y,d.y,m),z:s.number(y.z,d.z,m),azimuthal:s.number(y.azimuthal,d.azimuthal,m),polar:s.number(y.polar,d.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class ve extends s.Evented{constructor(d){super(),this._transitionable=new s.Transitionable(ae),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,m={}){if(!this._validate(s.validateLight,d,m))for(const b in d){const C=d[b];s.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),C):this._transitionable.setValue(b,C)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,m,b){return(!b||b.validate!==!1)&&s.emitValidationErrors(this,d.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Fe=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Ae=class extends s.Evented{constructor(y,d){super(),this._transitionable=new s.Transitionable(Fe),this.set(y),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(y){for(const d in y){const m=y[d];s.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}};function pe(y,d,m,b){const C=s.smoothstep(45,65,m),[A,F]=fe(y,b),z=s.length(d);let V=1-Math.min(1,Math.exp((z-A)/(F-A)*-6));return V*=V*V,V=Math.min(1,1.00747*V),V*C*y.alpha}function fe(y,d){const m=.5/Math.tan(.5*d);return[y.range[0]+m,y.range[1]+m]}const xe=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Re extends s.Evented{constructor(d,m){super(),this._transitionable=new s.Transitionable(xe),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const d=this._transform,m=d.projection.name==="globe",b=s.globeToMercatorTransition(d.zoom),C=this.properties.get("range"),A=[.5,3];return{range:m?[s.number(A[0],C[0],b),s.number(A[1],C[1],b)]:C,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,m={}){if(!this._validate(s.validateFog,d,m)){for(const b of Object.keys(s.spec.fog))d&&d[b]===void 0&&(d[b]=s.spec.fog[b].default);for(const b in d){const C=d[b];s.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),C):this._transitionable.setValue(b,C)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,d))*m.a}getOpacityAtLatLng(d,m){return this._transform.projection.supportsFog?function(b,C,A){const F=s.MercatorCoordinate.fromLngLat(C),z=A.elevation?A.elevation.getAtPointOrZero(F):0,V=[F.x,F.y,z];return s.transformMat4(V,V,A.mercatorFogMatrix),pe(b,V,A.pitch,A._fov)}(this.state,d,m):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?fe(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,m,b){return(!b||b.validate!==!1)&&s.emitValidationErrors(this,d.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class ke{constructor(d,m){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const b=this.workerPool.acquire(this.id);for(let C=0;C<b.length;C++){const A=new ke.Actor(b[C],m,this.id);A.name=`Worker ${C}`,this.actors.push(A)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,m,b){s.asyncAll(this.actors,(C,A)=>{C.send(d,m,A)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ze(y,d,m){return d*(s.EXTENT/(y.tileSize*Math.pow(2,m-y.tileID.overscaledZ)))}ke.Actor=s.Actor;class Xe{constructor(d,m,b,C){this.screenBounds=d,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,C)}static createFromScreenPoints(d,m){let b,C;if(d instanceof s.Point||typeof d[0]=="number"){const A=s.Point.convert(d);b=[A],C=m.isPointAboveHorizon(A)}else{const A=s.Point.convert(d[0]),F=s.Point.convert(d[1]);b=[A,F],C=s.polygonizeBounds(A,F).every(z=>m.isPointAboveHorizon(z))}return new Xe(b,m.getCameraPoint(),C,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(d){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const m=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],C=s.polygonizeBounds(m,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<b.x?C.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?C[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(C[3]=this.cameraPoint)),s.bufferConvexPolygon(C,d)}bufferedCameraGeometryGlobe(d){const m=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],C=s.polygonizeBounds(m,b,d),A=this.cameraPoint.clone();switch(3*((A.y>m.y)+(A.y>b.y))+((A.x>m.x)+(A.x>b.x))){case 0:C[0]=A,C[4]=A.clone();break;case 1:C.splice(1,0,A);break;case 2:C[1]=A;break;case 3:C.splice(4,0,A);break;case 5:C.splice(2,0,A);break;case 6:C[3]=A;break;case 7:C.splice(3,0,A);break;case 8:C[2]=A}return C}containsTile(d,m,b,C=0){const A=d.queryPadding/m._pixelsPerMercatorPixel+1,F=b?this._bufferedCameraMercator(A,m):this._bufferedScreenMercator(A,m);let z=d.tileID.wrap+(F.unwrapped?C:0);const V=F.polygon.map(Te=>s.getTilePoint(d.tileTransform,Te,z));if(!s.polygonIntersectsBox(V,0,0,s.EXTENT,s.EXTENT))return;z=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?C:0);const Y=this.screenGeometryMercator.polygon.map(Te=>s.getTileVec3(d.tileTransform,Te,z)),q=Y.map(Te=>new s.Point(Te[0],Te[1])),ne=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),de=s.getTileVec3(d.tileTransform,ne,z),be=Y.map(Te=>{const re=s.sub(Te,Te,de);return s.normalize(re,re),new s.Ray(de,re)}),Se=ze(d,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:be,bufferedTilespaceGeometry:V,bufferedTilespaceBounds:(we=s.getBounds(V),we.min.x=s.clamp(we.min.x,0,s.EXTENT),we.min.y=s.clamp(we.min.y,0,s.EXTENT),we.max.x=s.clamp(we.max.x,0,s.EXTENT),we.max.y=s.clamp(we.max.y,0,s.EXTENT),we),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:Se};var we}_bufferedScreenMercator(d,m){const b=pt(d);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let C;return C=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(d),m):{polygon:this.bufferedScreenGeometry(d).map(A=>m.pointCoordinate3D(A)),unwrapped:!0},this._screenRaycastCache[b]=C,C}}_bufferedCameraMercator(d,m){const b=pt(d);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let C;return C=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),m):{polygon:this.bufferedCameraGeometry(d).map(A=>m.pointCoordinate3D(A)),unwrapped:!0},this._cameraRaycastCache[b]=C,C}}_projectAndResample(d,m){const b=function(A,F){const z=s.multiply([],F.pixelMatrix,F.globeMatrix),V=[0,-s.GLOBE_RADIUS,0,1],Y=[0,s.GLOBE_RADIUS,0,1],q=[0,0,0,1];s.transformMat4$1(V,V,z),s.transformMat4$1(Y,Y,z),s.transformMat4$1(q,q,z);const ne=new s.Point(V[0]/V[3],V[1]/V[3]),de=new s.Point(Y[0]/Y[3],Y[1]/Y[3]),be=s.polygonContainsPoint(A,ne)&&V[3]<q[3],Se=s.polygonContainsPoint(A,de)&&Y[3]<q[3];if(!be&&!Se)return null;const we=function(We,tt,Je){for(let mt=1;mt<We.length;mt++){const Xt=Qe(tt.pointCoordinate3D(We[mt-1]).x),ut=Qe(tt.pointCoordinate3D(We[mt]).x);if(Je<0){if(Xt<ut)return{idx:mt,t:-Xt/(ut-1-Xt)}}else if(ut<Xt)return{idx:mt,t:(1-Xt)/(ut+1-Xt)}}return null}(A,F,be?-1:1);if(!we)return null;const{idx:Te,t:re}=we;let ye=Te>1?Ne(A.slice(0,Te),F):[],Le=Te<A.length?Ne(A.slice(Te),F):[];ye=ye.map(We=>new s.Point(Qe(We.x),We.y)),Le=Le.map(We=>new s.Point(Qe(We.x),We.y));const Be=[...ye];Be.length===0&&Be.push(Le[Le.length-1]);const He=s.number(Be[Be.length-1].y,(Le.length===0?ye[0]:Le[0]).y,re);let qe;return qe=be?[new s.Point(0,He),new s.Point(0,0),new s.Point(1,0),new s.Point(1,He)]:[new s.Point(1,He),new s.Point(1,1),new s.Point(0,1),new s.Point(0,He)],Be.push(...qe),Le.length===0?Be.push(ye[0]):Be.push(...Le),{polygon:Be.map(We=>new s.MercatorCoordinate(We.x,We.y)),unwrapped:!1}}(d,m);if(b)return b;const C=function(A,F){let z=!1,V=-1/0,Y=0;for(let ne=0;ne<A.length-1;ne++)A[ne].x>V&&(V=A[ne].x,Y=ne);for(let ne=0;ne<A.length-1;ne++){const de=(Y+ne)%(A.length-1),be=A[de],Se=A[de+1];Math.abs(be.x-Se.x)>.5&&(be.x<Se.x?(be.x+=1,de===0&&(A[A.length-1].x+=1)):(Se.x+=1,de+1===A.length-1&&(A[0].x+=1)),z=!0)}const q=s.mercatorXfromLng(F.center.lng);return z&&q<Math.abs(q-1)&&A.forEach(ne=>{ne.x-=1}),{polygon:A,unwrapped:z}}(Ne(d,m).map(A=>new s.Point(Qe(A.x),A.y)),m);return{polygon:C.polygon.map(A=>new s.MercatorCoordinate(A.x,A.y)),unwrapped:C.unwrapped}}}function Ne(y,d){return s.resample(y,m=>{const b=d.pointCoordinate3D(m);m.x=b.x,m.y=b.y},1/256)}function Qe(y){return y<0?1+y%1:y%1}function pt(y){return 100*y|0}function Ke(y,d,m,b,C){const A=function(F,z){if(F)return C(F);if(z){y.url&&z.tiles&&y.tiles&&delete y.tiles;const V=s.pick(s.extend(z,y),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(V.vectorLayers=z.vector_layers,V.vectorLayerIds=V.vectorLayers.map(Y=>Y.id)),V.tiles=d.canonicalizeTileset(V,y.url),C(null,V)}};return y.url?s.getJSON(d.transformRequest(d.normalizeSourceURL(y.url,null,m,b),s.ResourceType.Source),A):s.exported.frame(()=>A(null,y))}class ot{constructor(d,m,b){this.bounds=s.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const m=Math.pow(2,d.z),b=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),C=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),A=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),F=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return d.x>=b&&d.x<A&&d.y>=C&&d.y<F}}class St{constructor(d,m,b){this.context=d;const C=d.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const st={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rt{constructor(d,m,b,C){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=C,this.context=d;const A=d.gl;this.buffer=A.createBuffer(),d.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,m){for(let b=0;b<this.attributes.length;b++){const C=m.attributes[this.attributes[b].name];C!==void 0&&d.enableVertexAttribArray(C)}}setVertexAttribPointers(d,m,b){for(let C=0;C<this.attributes.length;C++){const A=this.attributes[C],F=m.attributes[A.name];F!==void 0&&d.vertexAttribPointer(F,A.components,d[st[A.type]],!1,this.itemSize,A.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class lt{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Rt extends lt{getDefault(){return s.Color.transparent}set(d){const m=this.current;(d.r!==m.r||d.g!==m.g||d.b!==m.b||d.a!==m.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class bt extends lt{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class wt extends lt{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class it extends lt{getDefault(){return[!0,!0,!0,!0]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||d[3]!==m[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Bt extends lt{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class jt extends lt{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class cn extends lt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const m=this.current;(d.func!==m.func||d.ref!==m.ref||d.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class rn extends lt{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class zt extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=d,this.dirty=!1}}class bn extends lt{getDefault(){return[0,1]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ot extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=d,this.dirty=!1}}class Nt extends lt{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Jt extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.BLEND):m.disable(m.BLEND),this.current=d,this.dirty=!1}}class on extends lt{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class vn extends lt{getDefault(){return s.Color.transparent}set(d){const m=this.current;(d.r!==m.r||d.g!==m.g||d.b!==m.b||d.a!==m.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class hn extends lt{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class wn extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=d,this.dirty=!1}}class Rn extends lt{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class Vn extends lt{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}let rr,Pn=class extends lt{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class Sn extends lt{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class fr extends lt{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||d[3]!==m[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class cr extends lt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class ur extends lt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class tr extends lt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class oi extends lt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Oe extends lt{getDefault(){return null}set(d){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class se extends lt{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class oe extends lt{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class te extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class le extends lt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class ue extends lt{constructor(d,m){super(d),this.context=d,this.parent=m}getDefault(){return null}}class Me extends ue{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Ce extends ue{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class _e extends Ce{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class De{constructor(d,m,b,C){this.context=d,this.width=m,this.height=b;const A=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new Me(d,A),C&&(this.depthAttachment=new Ce(d,A))}destroy(){const d=this.context.gl,m=this.colorAttachment.get();if(m&&d.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&d.deleteRenderbuffer(b)}d.deleteFramebuffer(this.framebuffer)}}class et{constructor(d,m=!1){if(this.gl=d,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const b=d;this.extVertexArrayObject={createVertexArrayOES:b.createVertexArray.bind(d),deleteVertexArrayOES:b.deleteVertexArray.bind(d),bindVertexArrayOES:b.bindVertexArray.bind(d)}}this.clearColor=new Rt(this),this.clearDepth=new bt(this),this.clearStencil=new wt(this),this.colorMask=new it(this),this.depthMask=new Bt(this),this.stencilMask=new jt(this),this.stencilFunc=new cn(this),this.stencilOp=new rn(this),this.stencilTest=new zt(this),this.depthRange=new bn(this),this.depthTest=new Ot(this),this.depthFunc=new Nt(this),this.blend=new Jt(this),this.blendFunc=new on(this),this.blendColor=new vn(this),this.blendEquation=new hn(this),this.cullFace=new wn(this),this.cullFaceSide=new Rn(this),this.frontFace=new Vn(this),this.program=new Pn(this),this.activeTexture=new Sn(this),this.viewport=new fr(this),this.bindFramebuffer=new cr(this),this.bindRenderbuffer=new ur(this),this.bindTexture=new tr(this),this.bindVertexBuffer=new oi(this),this.bindElementBuffer=new Oe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new se(this),this.pixelStoreUnpack=new oe(this),this.pixelStoreUnpackPremultiplyAlpha=new te(this),this.pixelStoreUnpackFlipY=new le(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,m){return new St(this,d,m)}createVertexBuffer(d,m,b){return new rt(this,d,m,b)}createRenderbuffer(d,m,b){const C=this.gl,A=C.createRenderbuffer();return this.bindRenderbuffer.set(A),C.renderbufferStorage(C.RENDERBUFFER,d,m,b),this.bindRenderbuffer.set(null),A}createFramebuffer(d,m,b){return new De(this,d,m,b)}clear({color:d,depth:m,stencil:b}){const C=this.gl;let A=0;d&&(A|=C.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(A|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(A|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),C.clear(A)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){p(d.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class nt extends s.Evented{constructor(d,m,b,C){if(super(),this.id=d,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(d){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=Ke(this._options,this.map._requestManager,m,b,(C,A)=>{this._tileJSONRequest=null,this._loaded=!0,C?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),b&&b.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new s.ErrorEvent(C))):A&&(s.extend(this,A),A.bounds&&(this.tileBounds=new ot(A.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(A.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(C)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(d,m){const b=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),C={request:this.map._requestManager.transformRequest(b,s.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(C.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired")d.state==="loading"?d.reloadCallback=m:d.request=d.actor.send("reloadTile",C,A.bind(this));else if(d.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",C,A.bind(this),void 0,!0);else{const F=s.loadVectorTile.call({deduped:this._deduped},C,(z,V)=>{z||!V?A.call(this,z):(C.data={cacheControl:V.cacheControl,expires:V.expires,rawData:V.rawData.slice(0)},d.actor&&d.actor.send("loadTile",C,A.bind(this),void 0,!0))},!0);d.request={cancel:F}}function A(F,z){return delete d.request,d.aborted?m(null):F&&F.status!==404?m(F):(z&&z.resourceTiming&&(d.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&d.setExpiryData(z),d.loadVectorData(z,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ze extends s.Evented{constructor(d,m,b,C){super(),this.id=d,this.dispatcher=b,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ke(this._options,this.map._requestManager,null,null,(m,b)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):b&&(s.extend(this,b),b.bounds&&(this.tileBounds=new ot(b.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(b.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(m)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,m){const b=s.exported.devicePixelRatio>=2,C=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);d.request=s.getImage(this.map._requestManager.transformRequest(C,s.ResourceType.Tile),(A,F,z,V)=>(delete d.request,d.aborted?(d.state="unloaded",m(null)):A?(d.state="errored",m(A)):F?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:z,expires:V}),d.setTexture(F,this.map.painter),d.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null)))}static loadTileData(d,m,b){d.setTexture(m,b)}static unloadTileData(d,m){d.texture&&m.saveTileTexture(d.texture)}abortTile(d,m){d.request&&(d.request.cancel(),delete d.request),m()}unloadTile(d,m){d.texture&&this.map.painter.saveTileTexture(d.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Et(y,d,m,b,C,A,F,z){const V=[y,m,C,d,b,A,1,1,1],Y=[F,z,1],q=s.adjoint([],V),[ne,de,be]=s.transformMat3(Y,Y,s.transpose(q,q));return s.multiply$1(V,[ne,0,0,0,de,0,0,0,be],V)}class vt extends s.Evented{constructor(d,m,b,C){super(),this.id=d,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=m,this._dirty=!1}load(d,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(b,C)=>{if(this._imageRequest=null,this._loaded=!0,b)this.fire(new s.ErrorEvent(b));else if(C){const{HTMLImageElement:A}=s.window;this.image=C instanceof A?s.exported.getImageData(C):C,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const m=d.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let C=1/0,A=1/0,F=-1/0,z=-1/0;for(const ne of b)C=Math.min(C,ne.x),A=Math.min(A,ne.y),F=Math.max(F,ne.x),z=Math.max(z,ne.y);const V=Math.max(F-C,z-A),Y=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),q=Math.pow(2,Y);return new s.CanonicalTileID(Y,Math.floor((C+F)/2*q),Math.floor((A+z)/2*q))}(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const V in this.tiles){const Y=this.tiles[V];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[b,C,A,F]=this.coordinates.map(V=>{const Y=m.projection.project(V[0],V[1]);return s.getTilePoint(m,Y)._round()});this.perspectiveTransform=function(V,Y,q,ne,de,be,Se,we,Te,re){const ye=Et(0,0,V,0,0,Y,V,Y),Le=Et(q,ne,de,be,Se,we,Te,re);return s.multiply$1(Le,s.adjoint(ye,ye),Le),[Le[6]/Le[8]*V/s.EXTENT,Le[7]/Le[8]*Y/s.EXTENT]}(this.width,this.height,b.x,b.y,C.x,C.y,F.x,F.y,A.x,A.y);const z=this._boundsArray=new s.StructArrayLayout4i8;z.emplaceBack(b.x,b.y,0,0),z.emplaceBack(C.x,C.y,s.EXTENT,0),z.emplaceBack(F.x,F.y,0,s.EXTENT),z.emplaceBack(A.x,A.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(z,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,m=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(d,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,m){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},m(null)):(d.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ct={vector:nt,raster:Ze,"raster-dem":class extends Ze{constructor(y,d,m,b){super(y,d,m,b),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(y,d){const m=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(C,A){C&&(y.state="errored",d(C)),A&&(y.dem=A,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",d(null))}y.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),(function(C,A,F,z){if(delete y.request,y.aborted)y.state="unloaded",d(null);else if(C)y.state="errored",d(C);else if(A){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:F,expires:z});const V=s.window.ImageBitmap&&A instanceof s.window.ImageBitmap&&(rr==null&&(rr=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),rr),Y=1-(A.width-s.prevPowerOfTwo(A.width))/2;Y<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const q=V?A:s.exported.getImageData(A,Y),ne={uid:y.uid,coord:y.tileID,source:this.id,rawImageData:q,encoding:this.encoding,padding:Y};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadDEMTile",ne,b.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const d=y.canonical,m=Math.pow(2,d.z),b=(d.x-1+m)%m,C=d.x===0?y.wrap-1:y.wrap,A=(d.x+1+m)%m,F=d.x+1===m?y.wrap+1:y.wrap,z={};return z[new s.OverscaledTileID(y.overscaledZ,C,d.z,b,d.y).key]={backfilled:!1},z[new s.OverscaledTileID(y.overscaledZ,F,d.z,A,d.y).key]={backfilled:!1},d.y>0&&(z[new s.OverscaledTileID(y.overscaledZ,C,d.z,b,d.y-1).key]={backfilled:!1},z[new s.OverscaledTileID(y.overscaledZ,y.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},z[new s.OverscaledTileID(y.overscaledZ,F,d.z,A,d.y-1).key]={backfilled:!1}),d.y+1<m&&(z[new s.OverscaledTileID(y.overscaledZ,C,d.z,b,d.y+1).key]={backfilled:!1},z[new s.OverscaledTileID(y.overscaledZ,y.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},z[new s.OverscaledTileID(y.overscaledZ,F,d.z,A,d.y+1).key]={backfilled:!1}),z}unloadTile(y){y.demTexture&&this.map.painter.saveTileTexture(y.demTexture),y.fbo&&(y.fbo.destroy(),delete y.fbo),y.dem&&delete y.dem,delete y.neighboringTiles,y.state="unloaded"}},geojson:class extends s.Evented{constructor(y,d,m,b){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(b),this._data=d.data,this._options=s.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const C=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*C,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*C,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.EXTENT,radius:(d.clusterRadius!==void 0?d.clusterRadius:50)*C,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}getClusterExpansionZoom(y,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id},d),this}getClusterChildren(y,d){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id},d),this}getClusterLeaves(y,d,m,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:y,limit:d,offset:m},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const y=s.extend({},this.workerOptions),d=this._data;typeof d=="string"?(y.request=this.map._requestManager.transformRequest(s.exported.resolveURL(d),s.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,y,(m,b)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(C.resourceTiming=b.resourceTiming[this.id]),this.fire(new s.Event("data",C)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(y,d){const m=y.actor?"reloadTile":"loadTile";y.actor=this.actor,y.request=this.actor.send(m,{type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,C)=>(delete y.request,y.unloadVectorData(),y.aborted?d(null):b?d(b):(y.loadVectorData(C,this.map.painter,m==="reloadTile"),d(null))),void 0,m==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y){y.unloadVectorData(),this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends vt{constructor(y,d,m,b){super(y,d,m,b),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const d of y.urls)this.urls.push(this.map._requestManager.transformRequest(d,s.ResourceType.Source).url);s.getVideo(this.urls,(d,m)=>{this._loaded=!0,d?this.fire(new s.ErrorEvent(d)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const d=this.video.seekable;y<d.start(0)||y>d.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,d=y.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(y,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:vt,canvas:class extends vt{constructor(y,d,m,b){super(y,d,m,b),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(A=>typeof A!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context;this.texture?(y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends s.Evented{constructor(y,d,m,b){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=d,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ot(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this._map=y,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:d,y:m,z:b}=y.canonical;return this._implementation.hasTile({x:d,y:m,z:b})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,d){const{x:m,y:b,z:C}=y.tileID.canonical,A=new s.window.AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:m,y:b,z:C},{signal:A.signal})).then((function(F){return delete y.request,y.aborted?(y.state="unloaded",d(null)):F===void 0?(y.state="errored",d(null)):F===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",d(null)):function(z){return z instanceof s.window.ImageData||z instanceof s.window.HTMLCanvasElement||z instanceof s.window.ImageBitmap||z instanceof s.window.HTMLImageElement}(F)?(this.loadTileData(y,F),y.state="loaded",void d(null)):(y.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(F=>{F.code!==20&&(y.state="errored",d(F))}),y.request.cancel=()=>A.abort()}loadTileData(y,d){Ze.loadTileData(y,d,this._map.painter)}unloadTileData(y){Ze.unloadTileData(y,this._map.painter)}unloadTile(y,d){if(this.unloadTileData(y),this._implementation.unloadTile){const{x:m,y:b,z:C}=y.tileID.canonical;this._implementation.unloadTile({x:m,y:b,z:C})}d()}abortTile(y,d){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Vt=function(y,d,m,b){const C=new Ct[d.type](y,d,m,b);if(C.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${C.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],C),C};function ln(y,d){const m=s.identity([]);return s.scale(m,m,[.5*y.width,.5*-y.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,y.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(m)}function kn(y,d,m,b,C,A,F,z=!1){const V=y.tilesIn(b,F,z);V.sort(_r);const Y=[];for(const ne of V)Y.push({wrappedTileID:ne.tile.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(d,m,y._state,ne,C,A,ln(y.transform,ne.tile.tileID),z)});const q=function(ne){const de={},be={};for(const Se of ne){const we=Se.queryResults,Te=Se.wrappedTileID,re=be[Te]=be[Te]||{};for(const ye in we){const Le=we[ye],Be=re[ye]=re[ye]||{},He=de[ye]=de[ye]||[];for(const qe of Le)Be[qe.featureIndex]||(Be[qe.featureIndex]=!0,He.push(qe))}}return de}(Y);for(const ne in q)q[ne].forEach(de=>{const be=de.feature,Se=be.layer;Se&&Se.type!=="background"&&Se.type!=="sky"&&(be.source=Se.source,Se["source-layer"]&&(be.sourceLayer=Se["source-layer"]),be.state=be.id!==void 0?y.getFeatureState(Se["source-layer"],be.id):{})});return q}function Jn(y,d){const m=y.getRenderableIds().map(A=>y.getTileByID(A)),b=[],C={};for(let A=0;A<m.length;A++){const F=m[A],z=F.tileID.canonical.key;C[z]||(C[z]=!0,F.querySourceFeatures(b,d))}return b}function _r(y,d){const m=y.tileID,b=d.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}function Wn(){return Dd.workerClass!=null?new Dd.workerClass:new s.window.Worker(Dd.workerUrl)}const dr="mapboxgl_preloaded_worker_pool";class gr{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<gr.workerCount;)this.workers.push(new Wn);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[dr]}numActive(){return Object.keys(this.active).length}}let Yn;function ri(){return Yn||(Yn=new gr),Yn}function Cn(y,d){const m={};for(const b in y)b!=="ref"&&(m[b]=y[b]);return s.refProperties.forEach(b=>{b in d&&(m[b]=d[b])}),m}function yn(y){y=y.slice();const d=Object.create(null);for(let m=0;m<y.length;m++)d[y[m].id]=y[m];for(let m=0;m<y.length;m++)"ref"in y[m]&&(y[m]=Cn(y[m],d[y[m].ref]));return y}gr.workerCount=2;const Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Gt(y,d,m){m.push({command:Ft.addSource,args:[y,d[y]]})}function xn(y,d,m){d.push({command:Ft.removeSource,args:[y]}),m[y]=!0}function nr(y,d,m,b){xn(y,m,b),Gt(y,d,m)}function or(y,d,m){let b;for(b in y[m])if(y[m].hasOwnProperty(b)&&b!=="data"&&!p(y[m][b],d[m][b]))return!1;for(b in d[m])if(d[m].hasOwnProperty(b)&&b!=="data"&&!p(y[m][b],d[m][b]))return!1;return!0}function Fr(y,d,m,b,C,A){let F;for(F in d=d||{},y=y||{})y.hasOwnProperty(F)&&(p(y[F],d[F])||m.push({command:A,args:[b,F,d[F],C]}));for(F in d)d.hasOwnProperty(F)&&!y.hasOwnProperty(F)&&(p(y[F],d[F])||m.push({command:A,args:[b,F,d[F],C]}))}function Or(y){return y.id}function Xr(y,d){return y[d.id]=d,y}class Qr{constructor(d,m){this.reset(d,m)}reset(d,m){this.points=d||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=s.clamp(d,0,1);let m=1,b=this._distances[m];const C=d*this.paddedLength+this.padding;for(;b<C&&m<this._distances.length;)b=this._distances[++m];const A=m-1,F=this._distances[A],z=b-F,V=z>0?(C-F)/z:0;return this.points[A].mult(1-V).add(this.points[m].mult(V))}}class qr{constructor(d,m,b){const C=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(d/b),this.yCellCount=Math.ceil(m/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)C.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=m,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,m,b,C,A){this._forEachCell(m,b,C,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(C),this.bboxes.push(A)}insertCircle(d,m,b,C){this._forEachCell(m-C,b-C,m+C,b+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(m),this.circles.push(b),this.circles.push(C)}_insertBoxCell(d,m,b,C,A,F){this.boxCells[A].push(F)}_insertCircleCell(d,m,b,C,A,F){this.circleCells[A].push(F)}_query(d,m,b,C,A,F){if(b<0||d>this.width||C<0||m>this.height)return!A&&[];const z=[];if(d<=0&&m<=0&&this.width<=b&&this.height<=C){if(A)return!0;for(let V=0;V<this.boxKeys.length;V++)z.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const Y=this.circles[3*V],q=this.circles[3*V+1],ne=this.circles[3*V+2];z.push({key:this.circleKeys[V],x1:Y-ne,y1:q-ne,x2:Y+ne,y2:q+ne})}return F?z.filter(F):z}return this._forEachCell(d,m,b,C,this._queryCell,z,{hitTest:A,seenUids:{box:{},circle:{}}},F),A?z.length>0:z}_queryCircle(d,m,b,C,A){const F=d-b,z=d+b,V=m-b,Y=m+b;if(z<0||F>this.width||Y<0||V>this.height)return!C&&[];const q=[];return this._forEachCell(F,V,z,Y,this._queryCellCircle,q,{hitTest:C,circle:{x:d,y:m,radius:b},seenUids:{box:{},circle:{}}},A),C?q.length>0:q}query(d,m,b,C,A){return this._query(d,m,b,C,!1,A)}hitTest(d,m,b,C,A){return this._query(d,m,b,C,!0,A)}hitTestCircle(d,m,b,C){return this._queryCircle(d,m,b,!0,C)}_queryCell(d,m,b,C,A,F,z,V){const Y=z.seenUids,q=this.boxCells[A];if(q!==null){const de=this.bboxes;for(const be of q)if(!Y.box[be]){Y.box[be]=!0;const Se=4*be;if(d<=de[Se+2]&&m<=de[Se+3]&&b>=de[Se+0]&&C>=de[Se+1]&&(!V||V(this.boxKeys[be]))){if(z.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[be],x1:de[Se],y1:de[Se+1],x2:de[Se+2],y2:de[Se+3]})}}}const ne=this.circleCells[A];if(ne!==null){const de=this.circles;for(const be of ne)if(!Y.circle[be]){Y.circle[be]=!0;const Se=3*be;if(this._circleAndRectCollide(de[Se],de[Se+1],de[Se+2],d,m,b,C)&&(!V||V(this.circleKeys[be]))){if(z.hitTest)return F.push(!0),!0;{const we=de[Se],Te=de[Se+1],re=de[Se+2];F.push({key:this.circleKeys[be],x1:we-re,y1:Te-re,x2:we+re,y2:Te+re})}}}}}_queryCellCircle(d,m,b,C,A,F,z,V){const Y=z.circle,q=z.seenUids,ne=this.boxCells[A];if(ne!==null){const be=this.bboxes;for(const Se of ne)if(!q.box[Se]){q.box[Se]=!0;const we=4*Se;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,be[we+0],be[we+1],be[we+2],be[we+3])&&(!V||V(this.boxKeys[Se])))return F.push(!0),!0}}const de=this.circleCells[A];if(de!==null){const be=this.circles;for(const Se of de)if(!q.circle[Se]){q.circle[Se]=!0;const we=3*Se;if(this._circlesCollide(be[we],be[we+1],be[we+2],Y.x,Y.y,Y.radius)&&(!V||V(this.circleKeys[Se])))return F.push(!0),!0}}}_forEachCell(d,m,b,C,A,F,z,V){const Y=this._convertToXCellCoord(d),q=this._convertToYCellCoord(m),ne=this._convertToXCellCoord(b),de=this._convertToYCellCoord(C);for(let be=Y;be<=ne;be++)for(let Se=q;Se<=de;Se++)if(A.call(this,d,m,b,C,this.xCellCount*Se+be,F,z,V))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,m,b,C,A,F){const z=C-d,V=A-m,Y=b+F;return Y*Y>z*z+V*V}_circleAndRectCollide(d,m,b,C,A,F,z){const V=(F-C)/2,Y=Math.abs(d-(C+V));if(Y>V+b)return!1;const q=(z-A)/2,ne=Math.abs(m-(A+q));if(ne>q+b)return!1;if(Y<=V||ne<=q)return!0;const de=Y-V,be=ne-q;return de*de+be*be<=b*b}}const zr={unknown:0,flipRequired:1,flipNotRequired:2},_i=Math.tan(85*Math.PI/180);function xt(y,d,m,b,C,A,F){const z=s.create();if(m)if(A.name==="globe"){const V=s.calculateGlobeLabelMatrix(C,d);s.multiply(z,z,V)}else{const V=Q([],F);z[0]=V[0],z[1]=V[1],z[4]=V[2],z[5]=V[3],b||s.rotateZ(z,z,C.angle)}else s.multiply(z,C.labelPlaneMatrix,y);return z}function Hi(y,d,m,b,C,A,F){const z=xt(y,d,m,b,C,A,F);return A.name==="globe"&&m||(z[2]=z[6]=z[10]=z[14]=0),z}function xr(y,d,m,b,C,A,F){if(m){if(A.name==="globe"){const z=xt(y,d,m,b,C,A,F);return s.invert(z,z),s.multiply(z,y,z),z}{const z=s.clone(y),V=s.identity([]);return V[0]=F[0],V[1]=F[1],V[4]=F[2],V[5]=F[3],s.multiply(z,z,V),b||s.rotateZ(z,z,-C.angle),z}}return C.glCoordMatrix}function Lr(y,d,m,b){const C=[y,d,m,1];m?s.transformMat4$1(C,C,b):Xn(C,C,b);const A=C[3];return C[0]/=A,C[1]/=A,C[2]/=A,C}function cs(y,d){return Math.min(.5+y/d*.5,1.5)}function Wi(y,d){const m=y[0]/y[3],b=y[1]/y[3];return m>=-d[0]&&m<=d[0]&&b>=-d[1]&&b<=d[1]}function ao(y,d,m,b,C,A,F,z,V,Y){const q=m.transform,ne=b?y.textSizeData:y.iconSizeData,de=s.evaluateSizeForZoom(ne,m.transform.zoom),be=q.projection.name==="globe",Se=[256/m.width*2+1,256/m.height*2+1],we=b?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;we.clear();let Te=null;be&&(Te=b?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const re=y.lineVertexArray,ye=b?y.text.placedSymbolArray:y.icon.placedSymbolArray,Le=m.transform.width/m.transform.height;let Be,He=!1;for(let qe=0;qe<ye.length;qe++){const We=ye.get(qe),{numGlyphs:tt,writingMode:Je}=We;if(Je!==s.WritingMode.vertical||He||Be===s.WritingMode.horizontal||(He=!0),Be=Je,(We.hidden||Je===s.WritingMode.vertical)&&!He){Ei(tt,we);continue}He=!1;const mt=new s.Point(We.tileAnchorX,We.tileAnchorY);let{x:Xt,y:ut,z:Lt}=q.projection.projectTilePoint(mt.x,mt.y,Y.canonical);if(V){const[lr,Tn,qn]=V(mt);Xt+=lr,ut+=Tn,Lt+=qn}const yt=[Xt,ut,Lt,1];if(s.transformMat4$1(yt,yt,d),!Wi(yt,Se)){Ei(tt,we);continue}const Wt=cs(m.transform.cameraToCenterDistance,yt[3]),ft=s.evaluateSizeForFeature(ne,de,We),It=F?ft/Wt:ft*Wt,Yt=Lr(Xt,ut,Lt,C);if(Yt[3]<=0){Ei(tt,we);continue}let $t={};const Zt=F?null:V,zn=Ht(We,It,!1,z,d,C,A,y.glyphOffsetArray,re,we,Te,Yt,mt,$t,Le,Zt,q.projection,Y,F);He=zn.useVertical,Zt&&zn.needsFlipping&&($t={}),(zn.notEnoughRoom||He||zn.needsFlipping&&Ht(We,It,!0,z,d,C,A,y.glyphOffsetArray,re,we,Te,Yt,mt,$t,Le,Zt,q.projection,Y,F).notEnoughRoom)&&Ei(tt,we)}b?(y.text.dynamicLayoutVertexBuffer.updateData(we),Te&&y.text.globeExtVertexBuffer.updateData(Te)):(y.icon.dynamicLayoutVertexBuffer.updateData(we),Te&&y.icon.globeExtVertexBuffer.updateData(Te))}function Er(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we){const{lineStartIndex:Te,glyphStartIndex:re,segment:ye}=z,Le=re+z.numGlyphs,Be=Te+z.lineLength,He=d.getoffsetX(re),qe=d.getoffsetX(Le-1),We=Rr(y*He,m,b,C,A,F,ye,Te,Be,V,Y,q,ne,de,!0,be,Se,we);if(!We)return null;const tt=Rr(y*qe,m,b,C,A,F,ye,Te,Be,V,Y,q,ne,de,!0,be,Se,we);return tt?{first:We,last:tt}:null}function Qn(y,d,m,b){return y===s.WritingMode.horizontal&&Math.abs(b)>Math.abs(m)?{useVertical:!0}:y===s.WritingMode.vertical?b>0?{needsFlipping:!0}:null:d!==zr.unknown&&function(C,A){return C===0||Math.abs(A/C)>_i}(m,b)?d===zr.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function Ht(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we,Te,re,ye){const Le=d/24,Be=y.lineOffsetX*Le,He=y.lineOffsetY*Le,{lineStartIndex:qe,glyphStartIndex:We,numGlyphs:tt,segment:Je,writingMode:mt,flipState:Xt}=y,ut=qe+y.lineLength,Lt=yt=>{if(q){const[Yt,$t,Zt]=yt.up,zn=Y.length;s.updateGlobeVertexNormal(q,zn+0,Yt,$t,Zt),s.updateGlobeVertexNormal(q,zn+1,Yt,$t,Zt),s.updateGlobeVertexNormal(q,zn+2,Yt,$t,Zt),s.updateGlobeVertexNormal(q,zn+3,Yt,$t,Zt)}const[Wt,ft,It]=yt.point;s.addDynamicAttributes(Y,Wt,ft,It,yt.angle)};if(tt>1){const yt=Er(Le,z,Be,He,m,ne,de,y,V,A,be,we,!1,Te,re,ye);if(!yt)return{notEnoughRoom:!0};if(b&&!m){let[Wt,ft,It]=yt.first.point,[Yt,$t,Zt]=yt.last.point;[Wt,ft]=Lr(Wt,ft,It,F),[Yt,$t]=Lr(Yt,$t,Zt,F);const zn=Qn(mt,Xt,(Yt-Wt)*Se,$t-ft);if(y.flipState=zn&&zn.needsFlipping?zr.flipRequired:zr.flipNotRequired,zn)return zn}Lt(yt.first);for(let Wt=We+1;Wt<We+tt-1;Wt++){const ft=Rr(Le*z.getoffsetX(Wt),Be,He,m,ne,de,Je,qe,ut,V,A,be,we,!1,!1,Te,re,ye);if(!ft)return Y.length-=4*(Wt-We),{notEnoughRoom:!0};Lt(ft)}Lt(yt.last)}else{if(b&&!m){const Wt=Lr(de.x,de.y,0,C),ft=qe+Je+1,It=new s.Point(V.getx(ft),V.gety(ft)),Yt=Lr(It.x,It.y,0,C),$t=Yt[3]>0?Yt:Bn(de,It,Wt,1,C,void 0,Te,re.canonical),Zt=Qn(mt,Xt,($t[0]-Wt[0])*Se,$t[1]-Wt[1]);if(y.flipState=Zt&&Zt.needsFlipping?zr.flipRequired:zr.flipNotRequired,Zt)return Zt}const yt=Rr(Le*z.getoffsetX(We),Be,He,m,ne,de,Je,qe,ut,V,A,be,we,!1,!1,Te,re,ye);if(!yt)return{notEnoughRoom:!0};Lt(yt)}return{}}function jn(y,d,m,b,C){const{x:A,y:F,z}=b.projectTilePoint(y.x,y.y,d);if(!C)return Lr(A,F,z,m);const[V,Y,q]=C(y);return Lr(A+V,F+Y,z+q,m)}function Bn(y,d,m,b,C,A,F,z){const V=jn(y.sub(d)._unit()._add(y),z,C,F,A);return s.sub(V,m,V),s.normalize(V,V),s.scaleAndAdd(V,m,V,b)}function Rr(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we,Te,re){const ye=b?y-d:y+d;let Le=ye>0?1:-1,Be=0;b&&(Le*=-1,Be=Math.PI),Le<0&&(Be+=Math.PI);let He=z+F+(Le>0?0:1)|0,qe=C,We=C,tt=0,Je=0;const mt=Math.abs(ye),Xt=[],ut=[];let Lt=A,yt=Lt;const Wt=()=>Bn(yt,Lt,We,mt-tt+1,q,de,we,Te.canonical);for(;tt+Je<=mt;){if(He+=Le,He<z||He>=V)return null;if(We=qe,yt=Lt,Xt.push(We),be&&ut.push(yt),Lt=new s.Point(Y.getx(He),Y.gety(He)),qe=ne[He],!qe){const qn=jn(Lt,Te.canonical,q,we,de);qe=qn[3]>0?ne[He]=qn:Wt()}tt+=Je,Je=s.distance(We,qe)}Se&&de&&(ne[He]&&(qe=Wt(),Je=s.distance(We,qe)),ne[He]=qe);const ft=(mt-tt)/Je,It=Lt.sub(yt)._mult(ft)._add(yt),Yt=s.sub([],qe,We),$t=s.scaleAndAdd([],We,Yt,ft);let Zt=[0,0,1],zn=Yt[0],lr=Yt[1];if(re&&(Zt=we.upVector(Te.canonical,It.x,It.y),Zt[0]!==0||Zt[1]!==0||Zt[2]!==1)){const qn=[Zt[2],0,-Zt[0]],Tr=s.cross([],Zt,qn);s.normalize(qn,qn),s.normalize(Tr,Tr),zn=s.dot(Yt,qn),lr=s.dot(Yt,Tr)}if(m){const qn=s.cross([],Zt,Yt);s.normalize(qn,qn),s.scaleAndAdd($t,$t,qn,m*Le)}const Tn=Be+Math.atan2(lr,zn);return Xt.push($t),be&&ut.push(It),{point:$t,angle:Tn,path:Xt,tilePath:ut,up:Zt}}function Ei(y,d){const m=d.length,b=m+4*y;d.resize(b),d.float32.fill(-1/0,4*m,4*b)}function Xn(y,d,m){const b=d[0],C=d[1];return y[0]=m[0]*b+m[4]*C+m[12],y[1]=m[1]*b+m[5]*C+m[13],y[3]=m[3]*b+m[7]*C+m[15],y}const Ti=100;class he{constructor(d,m,b=new qr(d.width+200,d.height+200,25),C=new qr(d.width+200,d.height+200,25)){this.transform=d,this.grid=b,this.ignoredGrid=C,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Ti,this.screenBottomBoundary=d.height+Ti,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=m}placeCollisionBox(d,m,b,C,A,F,z,V){let Y=b.projectedAnchorX,q=b.projectedAnchorY,ne=b.projectedAnchorZ;const de=b.elevation,be=b.tileID,Se=d.getProjection();if(de&&be){const[qe,We,tt]=Se.upVector(be.canonical,b.tileAnchorX,b.tileAnchorY),Je=Se.upVectorScale(be.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=qe*de*Je,q+=We*de*Je,ne+=tt*de*Je}const we=this.projectAndGetPerspectiveRatio(z,Y,q,ne,b.tileID,Se.name==="globe"||!!de||this.transform.pitch>0,Se),Te=F*we.perspectiveRatio,re=(b.x1*m+C.x-b.padding)*Te+we.point.x,ye=(b.y1*m+C.y-b.padding)*Te+we.point.y,Le=(b.x2*m+C.x+b.padding)*Te+we.point.x,Be=(b.y2*m+C.y+b.padding)*Te+we.point.y,He=we.perspectiveRatio<=.55||we.occluded;return!this.isInsideGrid(re,ye,Le,Be)||!A&&this.grid.hitTest(re,ye,Le,Be,V)||He?{box:[],offscreen:!1,occluded:we.occluded}:{box:[re,ye,Le,Be],offscreen:this.isOffscreen(re,ye,Le,Be),occluded:!1}}placeCollisionCircles(d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we){const Te=[],re=this.transform.elevation,ye=d.getProjection(),Le=re?re.getAtTileOffsetFunc(we,this.transform.center.lat,this.transform.worldSize,ye):null,Be=new s.Point(b.tileAnchorX,b.tileAnchorY);let{x:He,y:qe,z:We}=ye.projectTilePoint(Be.x,Be.y,we.canonical);if(Le){const[It,Yt,$t]=Le(Be);He+=It,qe+=Yt,We+=$t}const tt=ye.name==="globe",Je=this.projectAndGetPerspectiveRatio(z,He,qe,We,we,tt||!!re||this.transform.pitch>0,ye),{perspectiveRatio:mt}=Je,Xt=(ne?F/mt:F*mt)/s.ONE_EM,ut=Lr(He,qe,We,V),Lt=Je.signedDistanceFromCamera>0?Er(Xt,A,b.lineOffsetX*Xt,b.lineOffsetY*Xt,!1,ut,Be,b,C,V,{},re&&!ne?Le:null,ne&&!!re,ye,we,ne):null;let yt=!1,Wt=!1,ft=!0;if(Lt&&!Je.occluded){const It=.5*be*mt+Se,Yt=new s.Point(-100,-100),$t=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),Zt=new Qr,{first:zn,last:lr}=Lt,Tn=zn.path.length;let qn=[];for(let Dn=Tn-1;Dn>=1;Dn--)qn.push(zn.path[Dn]);for(let Dn=1;Dn<lr.path.length;Dn++)qn.push(lr.path[Dn]);const Tr=2.5*It;Y&&(qn=qn.map(([Dn,ti,li],ci)=>(Le&&!tt&&(li=Le(ci<Tn-1?zn.tilePath[Tn-1-ci]:lr.tilePath[ci-Tn+2])[2]),Lr(Dn,ti,li,Y))),qn.some(Dn=>Dn[3]<=0)&&(qn=[]));let Cr=[];if(qn.length>0){let Dn=1/0,ti=-1/0,li=1/0,ci=-1/0;for(const ui of qn)Dn=Math.min(Dn,ui[0]),li=Math.min(li,ui[1]),ti=Math.max(ti,ui[0]),ci=Math.max(ci,ui[1]);ti>=Yt.x&&Dn<=$t.x&&ci>=Yt.y&&li<=$t.y&&(Cr=[qn.map(ui=>new s.Point(ui[0],ui[1]))],(Dn<Yt.x||ti>$t.x||li<Yt.y||ci>$t.y)&&(Cr=s.clipLine(Cr,Yt.x,Yt.y,$t.x,$t.y)))}for(const Dn of Cr){Zt.reset(Dn,.25*It);let ti=0;ti=Zt.length<=.5*It?1:Math.ceil(Zt.paddedLength/Tr)+1;for(let li=0;li<ti;li++){const ci=li/Math.max(ti-1,1),ui=Zt.lerp(ci),ts=ui.x+Ti,No=ui.y+Ti;Te.push(ts,No,It,0);const oa=ts-It,rl=No-It,zi=ts+It,di=No+It;if(ft=ft&&this.isOffscreen(oa,rl,zi,di),Wt=Wt||this.isInsideGrid(oa,rl,zi,di),!m&&this.grid.hitTestCircle(ts,No,It,de)&&(yt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:yt,occluded:!1}}}}return{circles:!q&&yt||!Wt?[]:Te,offscreen:ft,collisionDetected:yt,occluded:Je.occluded}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,C=1/0,A=-1/0,F=-1/0;for(const q of d){const ne=new s.Point(q.x+Ti,q.y+Ti);b=Math.min(b,ne.x),C=Math.min(C,ne.y),A=Math.max(A,ne.x),F=Math.max(F,ne.y),m.push(ne)}const z=this.grid.query(b,C,A,F).concat(this.ignoredGrid.query(b,C,A,F)),V={},Y={};for(const q of z){const ne=q.key;if(V[ne.bucketInstanceId]===void 0&&(V[ne.bucketInstanceId]={}),V[ne.bucketInstanceId][ne.featureIndex])continue;const de=[new s.Point(q.x1,q.y1),new s.Point(q.x2,q.y1),new s.Point(q.x2,q.y2),new s.Point(q.x1,q.y2)];s.polygonIntersectsPolygon(m,de)&&(V[ne.bucketInstanceId][ne.featureIndex]=!0,Y[ne.bucketInstanceId]===void 0&&(Y[ne.bucketInstanceId]=[]),Y[ne.bucketInstanceId].push(ne.featureIndex))}return Y}insertCollisionBox(d,m,b,C,A){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:C,collisionGroupID:A},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,m,b,C,A){const F=m?this.ignoredGrid:this.grid,z={bucketInstanceId:b,featureIndex:C,collisionGroupID:A};for(let V=0;V<d.length;V+=4)F.insertCircle(z,d[V],d[V+1],d[V+2])}projectAndGetPerspectiveRatio(d,m,b,C,A,F,z){const V=[m,b,C,1];let Y=!1;C||this.transform.pitch>0?(s.transformMat4$1(V,V,d),this.fogState&&A&&z.name!=="globe"&&(Y=function(de,be,Se,we,Te,re){const ye=re.calculateFogTileMatrix(Te),Le=[be,Se,we];return s.transformMat4(Le,Le,ye),pe(de,Le,re.pitch,re._fov)}(this.fogState,m,b,C,A.toUnwrapped(),this.transform)>.9)):Xn(V,V,d);const q=V[3];return{point:new s.Point((V[0]/q+1)/2*this.transform.width+Ti,(-V[1]/q+1)/2*this.transform.height+Ti),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/q*.5,1.5),signedDistanceFromCamera:q,occluded:F&&V[2]>q||Y}}isOffscreen(d,m,b,C){return b<Ti||d>=this.screenRightBoundary||C<Ti||m>this.screenBottomBoundary}isInsideGrid(d,m,b,C){return b>=0&&d<this.gridRightBoundary&&C>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const d=s.identity([]);return s.translate(d,d,[-100,-100,0]),d}}function Ee(y,d,m){const b=d.createTileMatrix(y,y.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),y.projMatrix,b)}function Ue(y,d,m){if(d.projection.name===m.projection.name)return y.projMatrix;const b=m.clone();return b.setProjection(d.projection),Ee(b,d.getProjection(),y)}function at(y,d,m){return d.name===m.projection.name?y.projMatrix:Ee(m,d,y)}class Qt{constructor(d,m,b,C){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?m:-m))):C&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class pn{constructor(d,m,b,C,A,F=!1){this.text=new Qt(d?d.text:null,m,b,A),this.icon=new Qt(d?d.icon:null,m,C,A),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class br{constructor(d,m,b,C=!1){this.text=d,this.icon=m,this.skipFade=b,this.clipped=C}}class Ai{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Fi{constructor(d,m,b,C,A){this.bucketInstanceId=d,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=C,this.tileID=A}}class ei{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const m=++this.maxGroupID;this.collisionGroups[d]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[d]}}function Xi(y,d,m,b,C){const{horizontalAlign:A,verticalAlign:F}=s.getAnchorAlignment(y),z=-(A-.5)*d,V=-(F-.5)*m,Y=s.evaluateVariableOffset(y,b);return new s.Point(z+Y[0]*C,V+Y[1]*C)}function xa(y,d,m,b,C){const A=new s.Point(y,d);return m&&A._rotate(b?C:-C),A}class ta{constructor(d,m,b,C,A){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new he(this.transform,A),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new ei(b),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,m,b,C){const A=b.getBucket(m),F=b.latestFeatureIndex;if(!A||!F||m.id!==A.layerIds[0])return;const z=A.layers[0].layout,V=b.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),q=b.tileSize/s.EXTENT,ne=b.tileID.toUnwrapped();this.transform.setProjection(A.projection);const de=(be=b.tileID,Se=A.getProjection(),we=this.transform,Se.name===this.projection?we.calculateProjMatrix(be.toUnwrapped()):Ee(we,Se,be));var be,Se,we;const Te=z.get("text-pitch-alignment")==="map",re=z.get("text-rotation-alignment")==="map";m.compileFilter();const ye=m.dynamicFilter(),Le=m.dynamicFilterNeedsFeature(),Be=this.transform.calculatePixelsToTileUnitsMatrix(b),He=Hi(de,b.tileID.canonical,Te,re,this.transform,A.getProjection(),Be);let qe=null;if(Te){const Je=xr(de,b.tileID.canonical,Te,re,this.transform,A.getProjection(),Be);qe=s.multiply([],this.transform.labelPlaneMatrix,Je)}let We=null;ye&&b.latestFeatureIndex&&(We={unwrappedTileID:ne,dynamicFilter:ye,dynamicFilterNeedsFeature:Le,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[A.bucketInstanceId]=new Fi(A.bucketInstanceId,F,A.sourceLayerIndex,A.index,b.tileID);const tt={bucket:A,layout:z,posMatrix:de,textLabelPlaneMatrix:He,labelToScreenMatrix:qe,clippingData:We,scale:Y,textPixelRatio:q,holdingForFade:b.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(A.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(A.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(C)for(const Je of A.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:Xt,symbolInstanceEnd:ut}=Je;d.push({sortKey:mt,symbolInstanceStart:Xt,symbolInstanceEnd:ut,parameters:tt})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:tt})}attemptAnchorPlacement(d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we,Te,re,ye){const{textOffset0:Le,textOffset1:Be,crossTileID:He}=de,qe=[Le,Be],We=Xi(d,b,C,qe,A),tt=this.collisionIndex.placeCollisionBox(Se,A,m,xa(We.x,We.y,F,z,this.transform.angle),ne,V,Y,q.predicate);if(Te){const Je=Se.getSymbolInstanceIconSize(ye,this.transform.zoom,de.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Se,Je,Te,xa(We.x,We.y,F,z,this.transform.angle),ne,V,Y,q.predicate).box.length===0)return}if(tt.box.length>0){let Je;return this.prevPlacement&&this.prevPlacement.variableOffsets[He]&&this.prevPlacement.placements[He]&&this.prevPlacement.placements[He].text&&(Je=this.prevPlacement.variableOffsets[He].anchor),this.variableOffsets[He]={textOffset:qe,width:b,height:C,anchor:d,textScale:A,prevAnchor:Je},this.markUsedJustification(Se,d,de,we),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,we,de),this.placedOrientations[He]=we),{shift:We,placedGlyphBoxes:tt}}}placeLayerBucketPart(d,m,b,C){const{bucket:A,layout:F,posMatrix:z,textLabelPlaneMatrix:V,labelToScreenMatrix:Y,clippingData:q,textPixelRatio:ne,holdingForFade:de,collisionBoxArray:be,partiallyEvaluatedTextSize:Se,partiallyEvaluatedIconSize:we,collisionGroup:Te}=d.parameters,re=F.get("text-optional"),ye=F.get("icon-optional"),Le=F.get("text-allow-overlap"),Be=F.get("icon-allow-overlap"),He=F.get("text-rotation-alignment")==="map",qe=F.get("text-pitch-alignment")==="map",We=F.get("icon-text-fit")!=="none",tt=F.get("symbol-z-order")==="viewport-y";this.transform.setProjection(A.projection);let Je=Le&&(Be||!A.hasIconData()||ye),mt=Be&&(Le||!A.hasTextData()||re);!A.collisionArrays&&be&&A.deserializeCollisionBoxes(be),b&&C&&A.updateCollisionDebugBuffers(this.transform.zoom,be);const Xt=(ut,Lt,yt)=>{const{crossTileID:Wt,numVerticalGlyphVertices:ft}=ut;if(q){const zi={zoom:this.transform.zoom,pitch:this.transform.pitch};let di=null;if(q.dynamicFilterNeedsFeature){const Ur=this.retainedQueryData[A.bucketInstanceId];di=q.featureIndex.loadFeature({featureIndex:ut.featureIndex,bucketIndex:Ur.bucketIndex,sourceLayerIndex:Ur.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,q.dynamicFilter)(zi,di,this.retainedQueryData[A.bucketInstanceId].tileID.canonical,new s.Point(ut.tileAnchorX,ut.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[Wt]=new br(!1,!1,!1,!0),void m.add(Wt)}if(m.has(Wt))return;if(de)return void(this.placements[Wt]=new br(!1,!1,!1));let It=!1,Yt=!1,$t=!0,Zt=!1,zn=!1,lr=null,Tn={box:null,offscreen:null,occluded:null},qn={box:null,offscreen:null,occluded:null},Tr=null,Cr=null,Dn=null,ti=0,li=0,ci=0;yt.textFeatureIndex?ti=yt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(ti=ut.featureIndex),yt.verticalTextFeatureIndex&&(li=yt.verticalTextFeatureIndex);const ui=zi=>{zi.tileID=this.retainedQueryData[A.bucketInstanceId].tileID;const di=this.transform.elevation;(di||zi.elevation)&&(zi.elevation=di?di.getAtTileOffset(zi.tileID,zi.tileAnchorX,zi.tileAnchorY):0)},ts=yt.textBox;if(ts){ui(ts);const zi=Ur=>{let ho=s.WritingMode.horizontal;if(A.allowVerticalPlacement&&!Ur&&this.prevPlacement){const us=this.prevPlacement.placedOrientations[Wt];us&&(this.placedOrientations[Wt]=us,ho=us,this.markUsedOrientation(A,ho,ut))}return ho},di=(Ur,ho)=>{if(A.allowVerticalPlacement&&ft>0&&yt.verticalTextBox){for(const us of A.writingModes)if(us===s.WritingMode.vertical?(Tn=ho(),qn=Tn):Tn=Ur(),Tn&&Tn.box&&Tn.box.length)break}else Tn=Ur()};if(F.get("text-variable-anchor")){let Ur=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Wt]){const Ri=this.prevPlacement.variableOffsets[Wt];Ur.indexOf(Ri.anchor)>0&&(Ur=Ur.filter(Es=>Es!==Ri.anchor),Ur.unshift(Ri.anchor))}const ho=(Ri,Es,um)=>{const xu=A.getSymbolInstanceTextSize(Se,ut,this.transform.zoom,Lt),fh=(Ri.x2-Ri.x1)*xu+2*Ri.padding,Fl=(Ri.y2-Ri.y1)*xu+2*Ri.padding,Oc=We&&!Be?Es:null;Oc&&ui(Oc);let wu={box:[],offscreen:!1,occluded:!1};const dm=Le?2*Ur.length:Ur.length;for(let hh=0;hh<dm;++hh){const Ty=this.attemptAnchorPlacement(Ur[hh%Ur.length],Ri,fh,Fl,xu,He,qe,ne,z,Te,hh>=Ur.length,ut,Lt,A,um,Oc,Se,we);if(Ty&&(wu=Ty.placedGlyphBoxes,wu&&wu.box&&wu.box.length)){It=!0,lr=Ty.shift;break}}return wu};di(()=>ho(ts,yt.iconBox,s.WritingMode.horizontal),()=>{const Ri=yt.verticalTextBox;return Ri&&ui(Ri),A.allowVerticalPlacement&&!(Tn&&Tn.box&&Tn.box.length)&&ft>0&&Ri?ho(Ri,yt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Tn&&(It=Tn.box,$t=Tn.offscreen,Zt=Tn.occluded);const us=zi(!(!Tn||!Tn.box));if(!It&&this.prevPlacement){const Ri=this.prevPlacement.variableOffsets[Wt];Ri&&(this.variableOffsets[Wt]=Ri,this.markUsedJustification(A,Ri.anchor,ut,us))}}else{const Ur=(ho,us)=>{const Ri=A.getSymbolInstanceTextSize(Se,ut,this.transform.zoom,Lt),Es=this.collisionIndex.placeCollisionBox(A,Ri,ho,new s.Point(0,0),Le,ne,z,Te.predicate);return Es&&Es.box&&Es.box.length&&(this.markUsedOrientation(A,us,ut),this.placedOrientations[Wt]=us),Es};di(()=>Ur(ts,s.WritingMode.horizontal),()=>{const ho=yt.verticalTextBox;return A.allowVerticalPlacement&&ft>0&&ho?(ui(ho),Ur(ho,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),zi(!!(Tn&&Tn.box&&Tn.box.length))}}if(Tr=Tn,It=Tr&&Tr.box&&Tr.box.length>0,$t=Tr&&Tr.offscreen,Zt=Tr&&Tr.occluded,ut.useRuntimeCollisionCircles){const zi=A.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex>=0?ut.centerJustifiedTextSymbolIndex:ut.verticalPlacedTextSymbolIndex),di=s.evaluateSizeForFeature(A.textSizeData,Se,zi),Ur=F.get("text-padding");Cr=this.collisionIndex.placeCollisionCircles(A,Le,zi,A.lineVertexArray,A.glyphOffsetArray,di,z,V,Y,b,qe,Te.predicate,ut.collisionCircleDiameter*di/s.ONE_EM,Ur,this.retainedQueryData[A.bucketInstanceId].tileID),It=Le||Cr.circles.length>0&&!Cr.collisionDetected,$t=$t&&Cr.offscreen,Zt=Cr.occluded}if(yt.iconFeatureIndex&&(ci=yt.iconFeatureIndex),yt.iconBox){const zi=di=>{ui(di);const Ur=We&&lr?xa(lr.x,lr.y,He,qe,this.transform.angle):new s.Point(0,0),ho=A.getSymbolInstanceIconSize(we,this.transform.zoom,ut.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(A,ho,di,Ur,Be,ne,z,Te.predicate)};qn&&qn.box&&qn.box.length&&yt.verticalIconBox?(Dn=zi(yt.verticalIconBox),Yt=Dn.box.length>0):(Dn=zi(yt.iconBox),Yt=Dn.box.length>0),$t=$t&&Dn.offscreen,zn=Dn.occluded}const No=re||ut.numHorizontalGlyphVertices===0&&ft===0,oa=ye||ut.numIconVertices===0;if(No||oa?oa?No||(Yt=Yt&&It):It=Yt&&It:Yt=It=Yt&&It,It&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,F.get("text-ignore-placement"),A.bucketInstanceId,qn&&qn.box&&li?li:ti,Te.ID),Yt&&Dn&&this.collisionIndex.insertCollisionBox(Dn.box,F.get("icon-ignore-placement"),A.bucketInstanceId,ci,Te.ID),Cr&&(It&&this.collisionIndex.insertCollisionCircles(Cr.circles,F.get("text-ignore-placement"),A.bucketInstanceId,ti,Te.ID),b)){const zi=A.bucketInstanceId;let di=this.collisionCircleArrays[zi];di===void 0&&(di=this.collisionCircleArrays[zi]=new Ai);for(let Ur=0;Ur<Cr.circles.length;Ur+=4)di.circles.push(Cr.circles[Ur+0]),di.circles.push(Cr.circles[Ur+1]),di.circles.push(Cr.circles[Ur+2]),di.circles.push(Cr.collisionDetected?1:0)}const rl=A.projection.name!=="globe";Je=Je&&(rl||!Zt),mt=mt&&(rl||!zn),this.placements[Wt]=new br(It||Je,Yt||mt,$t||A.justReloaded),m.add(Wt)};if(tt){const ut=A.getSortedSymbolIndexes(this.transform.angle);for(let Lt=ut.length-1;Lt>=0;--Lt){const yt=ut[Lt];Xt(A.symbolInstances.get(yt),yt,A.collisionArrays[yt])}}else for(let ut=d.symbolInstanceStart;ut<d.symbolInstanceEnd;ut++)Xt(A.symbolInstances.get(ut),ut,A.collisionArrays[ut]);if(b&&A.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[A.bucketInstanceId];s.invert(ut.invProjMatrix,z),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}A.justReloaded=!1}markUsedJustification(d,m,b,C){const{leftJustifiedTextSymbolIndex:A,centerJustifiedTextSymbolIndex:F,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:V,crossTileID:Y}=b,q=s.getAnchorJustification(m),ne=C===s.WritingMode.vertical?V:q==="left"?A:q==="center"?F:q==="right"?z:-1;A>=0&&(d.text.placedSymbolArray.get(A).crossTileID=ne>=0&&A!==ne?0:Y),F>=0&&(d.text.placedSymbolArray.get(F).crossTileID=ne>=0&&F!==ne?0:Y),z>=0&&(d.text.placedSymbolArray.get(z).crossTileID=ne>=0&&z!==ne?0:Y),V>=0&&(d.text.placedSymbolArray.get(V).crossTileID=ne>=0&&V!==ne?0:Y)}markUsedOrientation(d,m,b){const C=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,A=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:F,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:V,verticalPlacedTextSymbolIndex:Y}=b,q=d.text.placedSymbolArray;F>=0&&(q.get(F).placedOrientation=C),z>=0&&(q.get(z).placedOrientation=C),V>=0&&(q.get(V).placedOrientation=C),Y>=0&&(q.get(Y).placedOrientation=A)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const C=m?m.symbolFadeChange(d):1,A=m?m.opacities:{},F=m?m.variableOffsets:{},z=m?m.placedOrientations:{};for(const V in this.placements){const Y=this.placements[V],q=A[V];q?(this.opacities[V]=new pn(q,C,Y.text,Y.icon,null,Y.clipped),b=b||Y.text!==q.text.placed||Y.icon!==q.icon.placed):(this.opacities[V]=new pn(null,C,Y.text,Y.icon,Y.skipFade,Y.clipped),b=b||Y.text||Y.icon)}for(const V in A){const Y=A[V];if(!this.opacities[V]){const q=new pn(Y,C,!1,!1);q.isHidden()||(this.opacities[V]=q,b=b||Y.text.placed||Y.icon.placed)}}for(const V in F)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=F[V]);for(const V in z)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=z[V]);b?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:d)}updateLayerOpacities(d,m){const b=new Set;for(const C of m){const A=C.getBucket(d);A&&C.latestFeatureIndex&&d.id===A.layerIds[0]&&this.updateBucketOpacities(A,b,C.collisionBoxArray)}}updateBucketOpacities(d,m,b){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const C=d.layers[0].layout,A=!!d.layers[0].dynamicFilter(),F=new pn(null,0,!1,!1,!0),z=C.get("text-allow-overlap"),V=C.get("icon-allow-overlap"),Y=C.get("text-variable-anchor"),q=C.get("text-rotation-alignment")==="map",ne=C.get("text-pitch-alignment")==="map",de=C.get("icon-text-fit")!=="none",be=new pn(null,0,z&&(V||!d.hasIconData()||C.get("icon-optional")),V&&(z||!d.hasTextData()||C.get("text-optional")),!0);!d.collisionArrays&&b&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(b);const Se=(Te,re,ye)=>{for(let Le=0;Le<re/4;Le++)Te.opacityVertexArray.emplaceBack(ye)};let we=0;for(let Te=0;Te<d.symbolInstances.length;Te++){const re=d.symbolInstances.get(Te),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Le,crossTileID:Be,numIconVertices:He}=re,qe=m.has(Be);let We=this.opacities[Be];qe?We=F:We||(We=be,this.opacities[Be]=We),m.add(Be);const tt=ye>0||Le>0,Je=He>0,mt=this.placedOrientations[Be],Xt=mt===s.WritingMode.vertical,ut=mt===s.WritingMode.horizontal||mt===s.WritingMode.horizontalOnly;if(!tt&&!Je||We.isHidden()||we++,tt){const Lt=na(We.text);Se(d.text,ye,Xt?Ii:Lt),Se(d.text,Le,ut?Ii:Lt);const yt=We.text.isHidden(),{leftJustifiedTextSymbolIndex:Wt,centerJustifiedTextSymbolIndex:ft,rightJustifiedTextSymbolIndex:It,verticalPlacedTextSymbolIndex:Yt}=re,$t=d.text.placedSymbolArray,Zt=yt||Xt?1:0;Wt>=0&&($t.get(Wt).hidden=Zt),ft>=0&&($t.get(ft).hidden=Zt),It>=0&&($t.get(It).hidden=Zt),Yt>=0&&($t.get(Yt).hidden=yt||ut?1:0);const zn=this.variableOffsets[Be];zn&&this.markUsedJustification(d,zn.anchor,re,mt);const lr=this.placedOrientations[Be];lr&&(this.markUsedJustification(d,"left",re,lr),this.markUsedOrientation(d,lr,re))}if(Je){const Lt=na(We.icon),{placedIconSymbolIndex:yt,verticalPlacedIconSymbolIndex:Wt}=re,ft=d.icon.placedSymbolArray,It=We.icon.isHidden()?1:0;yt>=0&&(Se(d.icon,He,Xt?Ii:Lt),ft.get(yt).hidden=It),Wt>=0&&(Se(d.icon,re.numVerticalIconVertices,ut?Ii:Lt),ft.get(Wt).hidden=It)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Lt=d.collisionArrays[Te];if(Lt){let yt=new s.Point(0,0),Wt=!0;if(Lt.textBox||Lt.verticalTextBox){if(Y){const It=this.variableOffsets[Be];It?(yt=Xi(It.anchor,It.width,It.height,It.textOffset,It.textScale),q&&yt._rotate(ne?this.transform.angle:-this.transform.angle)):Wt=!1}A&&(Wt=!We.clipped),Lt.textBox&&Ns(d.textCollisionBox.collisionVertexArray,We.text.placed,!Wt||Xt,yt.x,yt.y),Lt.verticalTextBox&&Ns(d.textCollisionBox.collisionVertexArray,We.text.placed,!Wt||ut,yt.x,yt.y)}const ft=Wt&&!!(!ut&&Lt.verticalIconBox);Lt.iconBox&&Ns(d.iconCollisionBox.collisionVertexArray,We.icon.placed,ft,de?yt.x:0,de?yt.y:0),Lt.verticalIconBox&&Ns(d.iconCollisionBox.collisionVertexArray,We.icon.placed,!ft,de?yt.x:0,de?yt.y:0)}}}if(d.fullyClipped=we===0,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=Te.invProjMatrix,d.placementViewportMatrix=Te.viewportMatrix,d.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>d}setStale(){this.stale=!0}}function Ns(y,d,m,b,C){y.emplaceBack(d?1:0,m?1:0,b||0,C||0),y.emplaceBack(d?1:0,m?1:0,b||0,C||0),y.emplaceBack(d?1:0,m?1:0,b||0,C||0),y.emplaceBack(d?1:0,m?1:0,b||0,C||0)}const Oo=Math.pow(2,25),Mi=Math.pow(2,24),Fn=Math.pow(2,17),ar=Math.pow(2,16),Pr=Math.pow(2,9),Yr=Math.pow(2,8),Pi=Math.pow(2,1);function na(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const d=y.placed?1:0,m=Math.floor(127*y.opacity);return m*Oo+d*Mi+m*Fn+d*ar+m*Pr+d*Yr+m*Pi+d}const Ii=0;class Mc{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&d.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(d,m,b,C,A){const F=this._bucketParts;for(;this._currentTileIndex<d.length;)if(m.getBucketParts(F,C,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((z,V)=>z.sortKey-V.sortKey));this._currentPartIndex<F.length;){const z=F[this._currentPartIndex];if(m.placeLayerBucketPart(z,this._seenCrossTileIDs,b,z.symbolInstanceStart===0),this._currentPartIndex++,A())return!0}return!1}}class Pc{constructor(d,m,b,C,A,F,z,V){this.placement=new ta(d,A,F,z,V),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(d,m,b){const C=s.exported.now(),A=()=>{const F=s.exported.now()-C;return!this._forceFullPlacement&&F>2};for(;this._currentPlacementIndex>=0;){const F=m[d[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=z)&&(!F.maxzoom||F.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Mc(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const pu=512/s.EXTENT/2;class Ho{constructor(d,m,b){this.tileID=d,this.bucketInstanceId=b,this.index=new s.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const C=d.canonical.x*s.EXTENT,A=d.canonical.y*s.EXTENT;for(let F=0;F<m.length;F++){const{key:z,crossTileID:V,tileAnchorX:Y,tileAnchorY:q}=m.get(F),ne=Math.floor((C+Y)*pu),de=Math.floor((A+q)*pu);this.index.add(ne,de),this.keys.push(z),this.crossTileIDs.push(V)}this.index.finish()}findMatches(d,m,b){const C=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),A=pu/Math.pow(2,m.canonical.z-this.tileID.canonical.z),F=m.canonical.x*s.EXTENT,z=m.canonical.y*s.EXTENT;for(let V=0;V<d.length;V++){const Y=d.get(V);if(Y.crossTileID)continue;const{key:q,tileAnchorX:ne,tileAnchorY:de}=Y,be=Math.floor((F+ne)*A),Se=Math.floor((z+de)*A),we=this.index.range(be-C,Se-C,be+C,Se+C);for(const Te of we){const re=this.crossTileIDs[Te];if(this.keys[Te]===q&&!b.has(re)){b.add(re),Y.crossTileID=re;break}}}}}class $v{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jv{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const m=Math.round((d-this.lng)/360);if(m!==0)for(const b in this.indexes){const C=this.indexes[b],A={};for(const F in C){const z=C[F];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+m),A[z.tileID.key]=z}this.indexes[b]=A}this.lng=d}addBucket(d,m,b){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let A=0;A<m.symbolInstances.length;A++)m.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]=new Set);const C=this.usedCrossTileIDs[d.overscaledZ];for(const A in this.indexes){const F=this.indexes[A];if(Number(A)>d.overscaledZ)for(const z in F){const V=F[z];V.tileID.isChildOf(d)&&V.findMatches(m.symbolInstances,d,C)}else{const z=F[d.scaledTo(Number(A)).key];z&&z.findMatches(m.symbolInstances,d,C)}}for(let A=0;A<m.symbolInstances.length;A++){const F=m.symbolInstances.get(A);F.crossTileID||(F.crossTileID=b.generate(),C.add(F.crossTileID))}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Ho(d,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(d,m){for(const b of m.crossTileIDs)this.usedCrossTileIDs[d].delete(b)}removeStaleBuckets(d){let m=!1;for(const b in this.indexes){const C=this.indexes[b];for(const A in C)d[C[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,C[A]),delete C[A],m=!0)}return m}}class Rl{constructor(){this.layerIndexes={},this.crossTileIDs=new $v,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,m,b,C){let A=this.layerIndexes[d.id];A===void 0&&(A=this.layerIndexes[d.id]=new jv);let F=!1;const z={};C.name!=="globe"&&A.handleWrapJump(b);for(const V of m){const Y=V.getBucket(d);Y&&d.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),A.addBucket(V.tileID,Y,this.crossTileIDs)&&(F=!0),z[Y.bucketInstanceId]=!0)}return A.removeStaleBuckets(z)&&(F=!0),F}pruneUnusedLayers(d){const m={};d.forEach(b=>{m[b]=!0});for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const Ic=(y,d)=>s.emitValidationErrors(y,d&&d.filter(m=>m.identifier!=="source.canvas")),zp=s.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),fA=s.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),Uv={version:8,layers:[],sources:{}},bd={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class el extends s.Evented{constructor(d,m={}){super(),this.map=d,this.dispatcher=new ke(ri(),this),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(d._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new Rl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const b=this;this._rtlTextPluginCallback=el.registerForPluginStateChange(C=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(A,F)=>{if(s.triggerPluginCompletionEvent(A),F&&F.every(z=>z))for(const z in b._sourceCaches){const V=b._sourceCaches[z],Y=V.getSource().type;Y!=="vector"&&Y!=="geojson"||V.reload()}})}),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const A=this.getSource(C.sourceId);if(A&&A.vectorLayerIds)for(const F in this._layers){const z=this._layers[F];z.source===A.id&&this._validateLayer(z)}})}loadURL(d,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const b=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,m.accessToken);const C=this.map._requestManager.transformRequest(d,s.ResourceType.Style);this._request=s.getJSON(C,(A,F)=>{this._request=null,A?this.fire(new s.ErrorEvent(A)):F&&this._load(F,b)})}loadJSON(d,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(d,m.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Uv,!1)}_updateLayerCount(d,m){const b=m?1:-1;d.is3D()&&(this._num3DLayers+=b),d.type==="circle"&&(this._numCircleLayers+=b),d.type==="symbol"&&(this._numSymbolLayers+=b)}_load(d,m){if(m&&Ic(this,s.validateStyle(d)))return;this._loaded=!0,this.stylesheet=s.clone$1(d),this._updateMapProjection();for(const C in d.sources)this.addSource(C,d.sources[C],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const b=yn(this.stylesheet.layers);this._order=b.map(C=>C.id),this._layers={},this._serializedLayers={};for(const C of b){const A=s.createStyleLayer(C);A.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=A,this._serializedLayers[A.id]=A.serialize(),this._updateLayerCount(A,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ve(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(m,b,C){let A,F,z;const V=s.exported.devicePixelRatio>1?"@2x":"";let Y=s.getJSON(b.transformRequest(b.normalizeSpriteURL(m,V,".json"),s.ResourceType.SpriteJSON),(de,be)=>{Y=null,z||(z=de,A=be,ne())}),q=s.getImage(b.transformRequest(b.normalizeSpriteURL(m,V,".png"),s.ResourceType.SpriteImage),(de,be)=>{q=null,z||(z=de,F=be,ne())});function ne(){if(z)C(z);else if(A&&F){const de=s.exported.getImageData(F),be={};for(const Se in A){const{width:we,height:Te,x:re,y:ye,sdf:Le,pixelRatio:Be,stretchX:He,stretchY:qe,content:We}=A[Se],tt=new s.RGBAImage({width:we,height:Te});s.RGBAImage.copy(de,tt,{x:re,y:ye},{x:0,y:0},{width:we,height:Te}),be[Se]={data:tt,pixelRatio:Be,sdf:Le,stretchX:He,stretchY:qe,content:We}}C(null,be)}}return{cancel(){Y&&(Y.cancel(),Y=null),q&&(q.cancel(),q=null)}}}(d,this.map._requestManager,(m,b)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(b)for(const C in b)this.imageManager.addImage(C,b[C]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(d){const m=this.getSource(d.source);if(!m)return;const b=d.sourceLayer;b&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(b)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${m.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const m=[];for(const b of d){const C=this._layers[b];C.type!=="custom"&&m.push(C.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&(typeof d.isLayerDraped=="function"?d.isLayerDraped():bd[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const m=this._changed;if(this._changed){const C=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(C.length||A.length)&&this._updateWorkerLayers(C,A);for(const F in this._updatedSources){const z=this._updatedSources[F];z==="reload"?this._reloadSource(F):z==="clear"&&this._clearSource(F)}this._updateTilesForChangedImages();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const b={};for(const C in this._sourceCaches){const A=this._sourceCaches[C];b[C]=A.used,A.used=!1}for(const C of this._order){const A=this._layers[C];if(A.recalculate(d,this._availableImages),!A.isHidden(d.zoom)){const z=this._getLayerSourceCache(A);z&&(z.used=!0)}const F=this.map.painter;if(F){const z=A.getProgramIds();if(!z)continue;const V=A.getProgramConfiguration(d.zoom);for(const Y of z)F.useProgram(Y,V)}}for(const C in b){const A=this._sourceCaches[C];b[C]!==A.used&&A.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:A.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),Ic(this,s.validateStyle(d)))return!1;(d=s.clone$1(d)).layers=yn(d.layers);const m=function(C,A){if(!C)return[{command:Ft.setStyle,args:[A]}];let F=[];try{if(!p(C.version,A.version))return[{command:Ft.setStyle,args:[A]}];p(C.center,A.center)||F.push({command:Ft.setCenter,args:[A.center]}),p(C.zoom,A.zoom)||F.push({command:Ft.setZoom,args:[A.zoom]}),p(C.bearing,A.bearing)||F.push({command:Ft.setBearing,args:[A.bearing]}),p(C.pitch,A.pitch)||F.push({command:Ft.setPitch,args:[A.pitch]}),p(C.sprite,A.sprite)||F.push({command:Ft.setSprite,args:[A.sprite]}),p(C.glyphs,A.glyphs)||F.push({command:Ft.setGlyphs,args:[A.glyphs]}),p(C.transition,A.transition)||F.push({command:Ft.setTransition,args:[A.transition]}),p(C.light,A.light)||F.push({command:Ft.setLight,args:[A.light]}),p(C.fog,A.fog)||F.push({command:Ft.setFog,args:[A.fog]}),p(C.projection,A.projection)||F.push({command:Ft.setProjection,args:[A.projection]});const z={},V=[];(function(ne,de,be,Se){let we;for(we in de=de||{},ne=ne||{})ne.hasOwnProperty(we)&&(de.hasOwnProperty(we)||xn(we,be,Se));for(we in de){if(!de.hasOwnProperty(we))continue;const Te=de[we];ne.hasOwnProperty(we)?p(ne[we],Te)||(ne[we].type==="geojson"&&Te.type==="geojson"&&or(ne,de,we)?be.push({command:Ft.setGeoJSONSourceData,args:[we,Te.data]}):nr(we,de,be,Se)):Gt(we,de,be)}})(C.sources,A.sources,V,z);const Y=[];C.layers&&C.layers.forEach(ne=>{ne.source&&z[ne.source]?F.push({command:Ft.removeLayer,args:[ne.id]}):Y.push(ne)});let q=C.terrain;q&&z[q.source]&&(F.push({command:Ft.setTerrain,args:[void 0]}),q=void 0),F=F.concat(V),p(q,A.terrain)||F.push({command:Ft.setTerrain,args:[A.terrain]}),function(ne,de,be){de=de||[];const Se=(ne=ne||[]).map(Or),we=de.map(Or),Te=ne.reduce(Xr,{}),re=de.reduce(Xr,{}),ye=Se.slice(),Le=Object.create(null);let Be,He,qe,We,tt,Je,mt;for(Be=0,He=0;Be<Se.length;Be++)qe=Se[Be],re.hasOwnProperty(qe)?He++:(be.push({command:Ft.removeLayer,args:[qe]}),ye.splice(ye.indexOf(qe,He),1));for(Be=0,He=0;Be<we.length;Be++)qe=we[we.length-1-Be],ye[ye.length-1-Be]!==qe&&(Te.hasOwnProperty(qe)?(be.push({command:Ft.removeLayer,args:[qe]}),ye.splice(ye.lastIndexOf(qe,ye.length-He),1)):He++,Je=ye[ye.length-Be],be.push({command:Ft.addLayer,args:[re[qe],Je]}),ye.splice(ye.length-Be,0,qe),Le[qe]=!0);for(Be=0;Be<we.length;Be++)if(qe=we[Be],We=Te[qe],tt=re[qe],!Le[qe]&&!p(We,tt))if(p(We.source,tt.source)&&p(We["source-layer"],tt["source-layer"])&&p(We.type,tt.type)){for(mt in Fr(We.layout,tt.layout,be,qe,null,Ft.setLayoutProperty),Fr(We.paint,tt.paint,be,qe,null,Ft.setPaintProperty),p(We.filter,tt.filter)||be.push({command:Ft.setFilter,args:[qe,tt.filter]}),p(We.minzoom,tt.minzoom)&&p(We.maxzoom,tt.maxzoom)||be.push({command:Ft.setLayerZoomRange,args:[qe,tt.minzoom,tt.maxzoom]}),We)We.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?Fr(We[mt],tt[mt],be,qe,mt.slice(6),Ft.setPaintProperty):p(We[mt],tt[mt])||be.push({command:Ft.setLayerProperty,args:[qe,mt,tt[mt]]}));for(mt in tt)tt.hasOwnProperty(mt)&&!We.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&(mt.indexOf("paint.")===0?Fr(We[mt],tt[mt],be,qe,mt.slice(6),Ft.setPaintProperty):p(We[mt],tt[mt])||be.push({command:Ft.setLayerProperty,args:[qe,mt,tt[mt]]}))}else be.push({command:Ft.removeLayer,args:[qe]}),Je=ye[ye.lastIndexOf(qe)+1],be.push({command:Ft.addLayer,args:[tt,Je]})}(Y,A.layers,F)}catch(z){console.warn("Unable to compute style diff:",z),F=[{command:Ft.setStyle,args:[A]}]}return F}(this.serialize(),d).filter(C=>!(C.command in fA));if(m.length===0)return!1;const b=m.filter(C=>!(C.command in zp));if(b.length>0)throw new Error(`Unimplemented: ${b.map(C=>C.command).join(", ")}.`);return m.forEach(C=>{C.command!=="setTransition"&&C.command!=="setProjection"&&this[C.command].apply(this,C.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,m){return this.getImage(d)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,m),this._afterImageUpdated(d),this)}updateImage(d,m){this.imageManager.updateImage(d,m)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,m,b={}){if(this._checkLoaded(),this.getSource(d)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${d}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const C=Vt(d,m,this.dispatcher,this);C.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:C.serialize(),sourceId:d}));const A=F=>{const z=(F?"symbol:":"other:")+d,V=this._sourceCaches[z]=new s.SourceCache(z,C,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[d]=V,V.style=this,V.onAdd(this.map)};A(!1),m.type!=="vector"&&m.type!=="geojson"||A(!0),C.onAdd&&C.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const m=this.getSource(d);if(!m)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===d)return this.fire(new s.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${C}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new s.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(d);for(const C of b)delete this._sourceCaches[C.id],delete this._updatedSources[C.id],C.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C.getSource().id})),C.setEventedParent(null),C.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,m){this._checkLoaded(),this.getSource(d).setData(m),this._changed=!0}getSource(d){const m=this._getSourceCache(d);return m&&m.getSource()}_getSources(){const d=[];for(const m in this._otherSourceCaches){const b=this._getSourceCache(m);b&&d.push(b.getSource())}return d}addLayer(d,m,b={}){this._checkLoaded();const C=d.id;if(this.getLayer(C))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${C}" already exists on this map`)));let A;if(d.type==="custom"){if(Ic(this,s.validateCustomStyleLayer(d)))return;A=s.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(C,d.source),d=s.clone$1(d),d=s.extend(d,{source:C})),this._validate(s.validateLayer,`layers.${C}`,d,{arrayIndex:-1},b))return;A=s.createStyleLayer(d),this._validateLayer(A),A.setEventedParent(this,{layer:{id:C}}),this._serializedLayers[A.id]=A.serialize(),this._updateLayerCount(A,!0)}const F=m?this._order.indexOf(m):this._order.length;if(m&&F===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(F,0,C),this._layerOrderChanged=!0,this._layers[C]=A;const z=this._getLayerSourceCache(A);if(this._removedLayers[C]&&A.source&&z&&A.type!=="custom"){const V=this._removedLayers[C];delete this._removedLayers[C],V.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",z.pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,m){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===m)return;const b=this._order.indexOf(d);this._order.splice(b,1);const C=m?this._order.indexOf(m):this._order.length;m&&C===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(C,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const m=this._layers[d];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const b=this._order.indexOf(d);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=m,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const m in this._layers)if(this._layers[m].type===d)return!0;return!1}setLayerZoomRange(d,m,b){this._checkLoaded();const C=this.getLayer(d);C?C.minzoom===m&&C.maxzoom===b||(m!=null&&(C.minzoom=m),b!=null&&(C.maxzoom=b),this._updateLayer(C)):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,m,b={}){this._checkLoaded();const C=this.getLayer(d);if(C){if(!p(C.filter,m))return m==null?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(s.validateFilter,`layers.${C.id}.filter`,m,{layerType:C.type},b)||(C.filter=s.clone$1(m),this._updateLayer(C)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const m=this.getLayer(d);return m&&s.clone$1(m.filter)}setLayoutProperty(d,m,b,C={}){this._checkLoaded();const A=this.getLayer(d);A?p(A.getLayoutProperty(m),b)||(A.setLayoutProperty(m,b,C),this._updateLayer(A)):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,m){const b=this.getLayer(d);if(b)return b.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,m,b,C={}){this._checkLoaded();const A=this.getLayer(d);A?p(A.getPaintProperty(m),b)||(A.setPaintProperty(m,b,C)&&this._updateLayer(A),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,m){const b=this.getLayer(d);return b&&b.getPaintProperty(m)}setFeatureState(d,m){this._checkLoaded();const b=d.source,C=d.sourceLayer,A=this.getSource(b);if(!A)return void this.fire(new s.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const F=A.type;if(F==="geojson"&&C)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(F==="vector"&&!C)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const z=this._getSourceCaches(b);for(const V of z)V.setFeatureState(C,d.id,m)}removeFeatureState(d,m){this._checkLoaded();const b=d.source,C=this.getSource(b);if(!C)return void this.fire(new s.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const A=C.type,F=A==="vector"?d.sourceLayer:void 0;if(A==="vector"&&!F)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof d.id!="string"&&typeof d.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const z=this._getSourceCaches(b);for(const V of z)V.removeFeatureState(F,d.id,m)}getFeatureState(d){this._checkLoaded();const m=d.source,b=d.sourceLayer,C=this.getSource(m);if(C){if(C.type!=="vector"||b)return d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(b,d.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const m in this._sourceCaches){const b=this._sourceCaches[m].getSource();d[b.id]||(d[b.id]=b.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0;const m=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",m.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const m=F=>this._layers[F].type==="fill-extrusion",b={},C=[];for(let F=this._order.length-1;F>=0;F--){const z=this._order[F];if(m(z)){b[z]=F;for(const V of d){const Y=V[z];if(Y)for(const q of Y)C.push(q)}}}C.sort((F,z)=>z.intersectionZ-F.intersectionZ);const A=[];for(let F=this._order.length-1;F>=0;F--){const z=this._order[F];if(m(z))for(let V=C.length-1;V>=0;V--){const Y=C[V].feature;if(b[Y.layer.id]<F)break;A.push(Y),C.pop()}else for(const V of d){const Y=V[z];if(Y)for(const q of Y)A.push(q.feature)}}return A}queryRenderedFeatures(d,m,b){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const C={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const V of m.layers){const Y=this._layers[V];if(!Y)return this.fire(new s.ErrorEvent(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];C[Y.source]=!0}}const A=[];m.availableImages=this._availableImages;const F=m&&m.layers?m.layers.some(V=>{const Y=this.getLayer(V);return Y&&Y.is3D()}):this.has3DLayers(),z=Xe.createFromScreenPoints(d,b);for(const V in this._sourceCaches){const Y=this._sourceCaches[V].getSource().id;m.layers&&!C[Y]||A.push(kn(this._sourceCaches[V],this._layers,this._serializedLayers,z,m,b,F,!!this.map._showQueryGeometry))}return this.placement&&A.push(function(V,Y,q,ne,de,be,Se){const we={},Te=be.queryRenderedSymbols(ne),re=[];for(const ye of Object.keys(Te).map(Number))re.push(Se[ye]);re.sort(_r);for(const ye of re){const Le=ye.featureIndex.lookupSymbolFeatures(Te[ye.bucketInstanceId],Y,ye.bucketIndex,ye.sourceLayerIndex,de.filter,de.layers,de.availableImages,V);for(const Be in Le){const He=we[Be]=we[Be]||[],qe=Le[Be];qe.sort((We,tt)=>{const Je=ye.featureSortOrder;if(Je){const mt=Je.indexOf(We.featureIndex);return Je.indexOf(tt.featureIndex)-mt}return tt.featureIndex-We.featureIndex});for(const We of qe)He.push(We)}}for(const ye in we)we[ye].forEach(Le=>{const Be=Le.feature,He=q(V[ye]);if(!He)return;const qe=He.getFeatureState(Be.layer["source-layer"],Be.id);Be.source=Be.layer.source,Be.layer["source-layer"]&&(Be.sourceLayer=Be.layer["source-layer"]),Be.state=qe});return we}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),z.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(d,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const b=this._getSourceCaches(d);let C=[];for(const A of b)C=C.concat(Jn(A,m));return C}addSourceType(d,m,b){return el.getSourceType(d)?b(new Error(`A source type called "${d}" already exists.`)):(el.setSourceType(d,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:m.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(d,m={}){this._checkLoaded();const b=this.light.getLight();let C=!1;for(const F in d)if(!p(d[F],b[F])){C=!0;break}if(!C)return;const A=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,m),this.light.updateTransitions(A)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,m=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let b=d;if(m===1){if(typeof b.source=="object"){const C="terrain-dem-src";this.addSource(C,b.source),b=s.clone$1(b),b=s.extend(b,{source:C})}if(this._validate(s.validateTerrain,"terrain",b))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,m)}else{const C=this.terrain,A=C.get();for(const F of Object.keys(s.spec.terrain))!b.hasOwnProperty(F)&&s.spec.terrain[F].default&&(b[F]=s.spec.terrain[F].default);for(const F in b)if(!p(b[F],A[F])){C.set(b),this.stylesheet.terrain=b;const z=this._setTransitionParameters({duration:0});C.updateTransitions(z);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const m=this.fog=new Re(d,this.map.transform);this.stylesheet.fog=d;const b=this._setTransitionParameters({duration:0});m.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,b=m.get();Object.keys(d).length===0&&m.set(d);for(const C in d)if(!p(d[C],b[C])){m.set(d),this.stylesheet.fog=d;const A=this._setTransitionParameters({duration:0});m.updateTransitions(A);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:s.exported.now(),transition:s.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(b=>this.isLayerDraped(this._layers[b])),m=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(...m)}_createTerrain(d,m){const b=this.terrain=new Ae(d,m);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const C=this._setTransitionParameters({duration:0});b.updateTransitions(C)}_force3DLayerUpdate(){for(const d in this._layers){const m=this._layers[d];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const m=this._layers[d];m.type==="symbol"&&this._updateLayer(m)}}_validate(d,m,b,C,A={}){return(!A||A.validate!==!1)&&Ic(this,d.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:b,styleSpec:s.spec},C)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const m=this._getSourceCaches(d);for(const b of m)b.clearTiles()}_reloadSource(d){const m=this._getSourceCaches(d);for(const b of m)b.resume(),b.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const m in this._sourceCaches)this._sourceCaches[m].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const m=this._sourceCaches[d];m.resume(),m.reload()}}_updatePlacement(d,m,b,C,A=!1){let F=!1,z=!1;const V={};for(const Y of this._order){const q=this._layers[Y];if(q.type!=="symbol")continue;if(!V[q.source]){const de=this._getLayerSourceCache(q);if(!de)continue;V[q.source]=de.getRenderableIds(!0).map(be=>de.getTileByID(be)).sort((be,Se)=>Se.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Se.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(q,V[q.source],d.center.lng,d.projection);F=F||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),A=A||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(A||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),d.zoom))&&(this.pauseablePlacement=new Pc(d,this._order,A,m,b,C,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),z=!0),F&&this.pauseablePlacement.placement.setStale()),z||F)for(const Y of this._order){const q=this._layers[Y];q.type==="symbol"&&this.placement.updateLayerOpacities(q,V[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();const C=A=>{A&&A.setDependencies(m.tileID.key,m.type,m.icons)};C(this._otherSourceCaches[m.source]),C(this._symbolSourceCaches[m.source])}getGlyphs(d,m,b){this.glyphManager.getGlyphs(m.stacks,b)}getResource(d,m,b){return s.makeRequest(m,b)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return d.type==="symbol"?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const m=[];return this._otherSourceCaches[d]&&m.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&m.push(this._symbolSourceCaches[d]),m}_isSourceCacheLoaded(d){const m=this._getSourceCaches(d);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):m.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}el.getSourceType=function(y){return Ct[y]},el.setSourceType=function(y,d){Ct[y]=d},el.registerForPluginStateChange=s.registerForPluginStateChange;var Vv=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,mu="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ol=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Yf=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ll=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Np={},xd={};const Zf=[];wd(Vv,Zf),wd(Ol,Zf),wd(Yf,Zf),wd(Ll,Zf),Np=Zr("",Ol),xd=Zr(Ll,Yf);const xx=Zr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),$p=Vv,Gv=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Hv={background:Zr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Zr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Zr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Zr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Zr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Zr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Zr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Zr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Zr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,mu),skyboxGradient:Zr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,mu),skyboxCapture:Zr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Zr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Zr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function wd(y,d){const m=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let b of m)if(b=b.trim(),b[0]==="#"&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const C=b.split(" ");for(const A of C)d.includes(A)||d.push(A)}}function Zr(y,d){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),C={},A=[...Zf];return wd(y,A),wd(d,A),{fragmentSource:y=y.replace(m,(F,z,V,Y,q)=>(C[q]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${V} ${Y} ${q};
#else
uniform ${V} ${Y} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${V} ${Y} ${q} = u_${q};
#endif
`)),vertexSource:d=d.replace(m,(F,z,V,Y,q)=>{const ne=Y==="float"?"vec2":"vec4",de=q.match(/color/)?"color":ne;return C[q]?z==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${V} ${ne} a_${q};
varying ${V} ${Y} ${q};
#else
uniform ${V} ${Y} u_${q};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${V} ${Y} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${de}(a_${q}, u_${q}_t);
#else
    ${V} ${Y} ${q} = u_${q};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${V} ${ne} a_${q};
#else
uniform ${V} ${Y} u_${q};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${V} ${Y} ${q} = a_${q};
#else
    ${V} ${Y} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${V} ${Y} ${q} = unpack_mix_${de}(a_${q}, u_${q}_t);
#else
    ${V} ${Y} ${q} = u_${q};
#endif
`}),staticAttributes:b,usedDefines:A}}class hA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,m,b,C,A,F,z){this.context=d;let V=this.boundPaintVertexBuffers.length!==C.length;for(let q=0;!V&&q<C.length;q++)this.boundPaintVertexBuffers[q]!==C[q]&&(V=!0);let Y=this.boundDynamicVertexBuffers.length!==z.length;for(let q=0;!Y&&q<z.length;q++)this.boundDynamicVertexBuffers[q]!==z[q]&&(Y=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||V||Y||this.boundIndexBuffer!==A||this.boundVertexOffset!==F)this.freshBind(m,b,C,A,F,z);else{d.bindVertexArrayOES.set(this.vao);for(const q of z)q&&q.bind();A&&A.dynamicDraw&&A.bind()}}freshBind(d,m,b,C,A,F){let z;const V=d.numAttributes,Y=this.context,q=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=d,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=C,this.boundVertexOffset=A,this.boundDynamicVertexBuffers=F;else{z=Y.currentNumAttributes||0;for(let ne=V;ne<z;ne++)q.disableVertexAttribArray(ne)}m.enableAttributes(q,d),m.bind(),m.setVertexAttribPointers(q,d,A);for(const ne of b)ne.enableAttributes(q,d),ne.bind(),ne.setVertexAttribPointers(q,d,A);for(const ne of F)ne&&(ne.enableAttributes(q,d),ne.bind(),ne.setVertexAttribPointers(q,d,A));C&&C.bind(),Y.currentNumAttributes=V}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wv(y,d){const m=Math.pow(2,d.canonical.z),b=d.canonical.y;return[new s.MercatorCoordinate(0,b/m).toLngLat().lat,new s.MercatorCoordinate(0,(b+1)/m).toLngLat().lat]}function wx(y,d,m,b,C,A,F){const z=y.context,V=z.gl,Y=m.fbo;if(!Y)return;y.prepareDrawTile();const q=y.useProgram("hillshade");z.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,Y.colorAttachment.get());const ne=((we,Te,re,ye)=>{const Le=re.paint.get("hillshade-shadow-color"),Be=re.paint.get("hillshade-highlight-color"),He=re.paint.get("hillshade-accent-color");let qe=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(qe-=we.transform.angle);const We=!we.options.moving;return{u_matrix:ye||we.transform.calculateProjMatrix(Te.tileID.toUnwrapped(),We),u_image:0,u_latrange:Wv(0,Te.tileID),u_light:[re.paint.get("hillshade-exaggeration"),qe],u_shadow:Le,u_highlight:Be,u_accent:He}})(y,m,b,y.terrain?d.projMatrix:null);y.prepareDrawProgram(z,q,d.toUnwrapped());const{tileBoundsBuffer:de,tileBoundsIndexBuffer:be,tileBoundsSegments:Se}=y.getTileBoundsBuffers(m);q.draw(z,V.TRIANGLES,C,A,F,s.CullFaceMode.disabled,ne,b.id,de,be,Se)}function Xv(y,d,m){if(!d.needsDEMTextureUpload)return;const b=y.context,C=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||y.getTileTexture(m.stride);const A=m.getPixels();d.demTexture?d.demTexture.update(A,{premultiply:!1}):d.demTexture=new s.Texture(b,A,C.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function Sx(y,d,m,b,C,A){const F=y.context,z=F.gl;if(!d.dem)return;const V=d.dem;if(F.activeTexture.set(z.TEXTURE1),Xv(y,d,V),!d.demTexture)return;d.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);const Y=V.dim;F.activeTexture.set(z.TEXTURE0);let q=d.fbo;if(!q){const Se=new s.Texture(F,{width:Y,height:Y,data:null},z.RGBA);Se.bind(z.LINEAR,z.CLAMP_TO_EDGE),q=d.fbo=F.createFramebuffer(Y,Y,!0),q.colorAttachment.set(Se.texture)}F.bindFramebuffer.set(q.framebuffer),F.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:de,tileBoundsSegments:be}=y.getMercatorTileBoundsBuffers();y.useProgram("hillshadePrepare").draw(F,z.TRIANGLES,b,C,A,s.CullFaceMode.disabled,((Se,we)=>{const Te=we.stride,re=s.create();return s.ortho(re,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(re,re,[0,-s.EXTENT,0]),{u_matrix:re,u_image:1,u_dimension:[Te,Te],u_zoom:Se.overscaledZ,u_unpack:we.unpackVector}})(d.tileID,V),m.id,ne,de,be),d.needsHillshadePrepare=!1}const qv=y=>({u_matrix:new s.UniformMatrix4f(y),u_image0:new s.Uniform1i(y),u_skirt_height:new s.Uniform1f(y)}),Sd=(y,d)=>({u_matrix:y,u_image0:0,u_skirt_height:d}),jp=(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:m,u_zoom_transition:C,u_merc_center:A,u_image0:0,u_frustum_tl:F,u_frustum_tr:z,u_frustum_br:V,u_frustum_bl:Y,u_globe_pos:q,u_globe_radius:ne,u_viewport:de,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9),u_skirt_height:be});function Ed(y,d){return y!=null&&d!=null&&!(!y.hasData()||!d.hasData())&&y.demTexture!=null&&d.demTexture!=null&&y.tileID.key!==d.tileID.key}const Bl=new class{constructor(){this.operations={}}newMorphing(y,d,m,b,C){if(y in this.operations){const A=this.operations[y];A.to.tileID.key!==m.tileID.key&&(A.queued=m)}else this.operations[y]={startTime:b,phase:0,duration:C,from:d,to:m,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const d=this.operations[y];return{from:d.from,to:d.to,phase:d.phase}}update(y){for(const d in this.operations){const m=this.operations[d];for(m.phase=(y-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,y)){delete this.operations[d];break}}}_nextOp(y,d){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=d,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},gu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Up(y){return 6*Math.pow(1.5,22-y)}function Ex(y,d){const m=1<<y.z;return!d&&(y.x===0||y.x===m-1)||y.y===0||y.y===m-1}const Kf=y=>({u_matrix:y});function Yv(y,d,m,b,C){if(C>0){const A=s.exported.now(),F=(A-y.timeAdded)/C,z=d?(A-d.timeAdded)/C:-1,V=m.getSource(),Y=b.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),q=!d||Math.abs(d.tileID.overscaledZ-Y)>Math.abs(y.tileID.overscaledZ-Y),ne=q&&y.refreshedUponExpiration?1:s.clamp(q?F:1-z,0,1);return y.refreshedUponExpiration&&F>=1&&(y.refreshedUponExpiration=!1),d?{opacity:1,mix:1-ne}:{opacity:ne,mix:0}}return{opacity:1,mix:0}}class Zv extends s.SourceCache{constructor(d){const m={type:"raster-dem",maxzoom:d.transform.maxZoom},b=new ke(ri(),null),C=Vt("mock-dem",m,b,d.style);super("mock-dem",C,!1),C.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,m){d.state="loaded",m(null)}}class Vp extends s.SourceCache{constructor(d){const m=Vt("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new ke(ri(),null),d.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,m,b){if(d.freezeTileCoverage)return;this.transform=d;const C=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((A,F)=>{if(A[F.key]="",!this._tiles[F.key]){const z=new s.Tile(F,this._source.tileSize*F.overscaleFactor(),d.tileZoom);z.state="loaded",this._tiles[F.key]=z}return A},{});for(const A in this._tiles)A in C||(this.freeFBO(A),this._tiles[A].unloadVectorData(),delete this._tiles[A])}freeFBO(d){const m=this.proxyCachedFBO[d];if(m!==void 0){const b=Object.values(m);this.renderCachePool.push(...b),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Gp extends s.OverscaledTileID{constructor(d,m,b){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=m,this.projMatrix=b}}class Kv extends s.Elevation{constructor(d,m){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,C,A]=function(V){const Y=new s.StructArrayLayout2i4,q=new s.StructArrayLayout3ui6,ne=131;Y.reserve(17161),q.reserve(33800);const de=s.EXTENT/128,be=s.EXTENT+de/2,Se=be+de;for(let Te=-de;Te<Se;Te+=de)for(let re=-de;re<Se;re+=de){const ye=re<0||re>be||Te<0||Te>be?24575:0,Le=s.clamp(Math.round(re),0,s.EXTENT),Be=s.clamp(Math.round(Te),0,s.EXTENT);Y.emplaceBack(Le+ye,Be)}const we=(Te,re)=>{const ye=re*ne+Te;q.emplaceBack(ye+1,ye,ye+ne),q.emplaceBack(ye+ne,ye+ne+1,ye+1)};for(let Te=1;Te<129;Te++)for(let re=1;re<129;re++)we(re,Te);return[0,129].forEach(Te=>{for(let re=0;re<130;re++)we(re,Te),we(Te,re)}),[Y,q,32768]}(),F=d.context;this.gridBuffer=F.createVertexBuffer(b,s.posAttributes.members),this.gridIndexBuffer=F.createIndexBuffer(C),this.gridSegments=s.SegmentVector.simpleSegment(0,0,b.length,C.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,b.length,A),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Vp(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const z=F.gl;this._overlapStencilMode=new s.StencilMode({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Zv(m.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,m,b){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const C=d.terrain.properties;this.sourceCache=d.terrain.drapeRenderMode===0?this._mockSourceCache:d._getSourceCache(C.get("source")),this._exaggeration=C.get("exaggeration");const A=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const F=this.getScaledDemTileSize();this.sourceCache.update(m,F,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,A(),this._initializing=!0),A(),m.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||d.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&d.dataType==="source"?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):d.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const C=this.proxyCoords=m.getIds().map(V=>{const Y=m.getTileByID(V).tileID;return Y.projMatrix=b.calculateProjMatrix(Y.toUnwrapped()),Y});(function(V,Y){const q=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),ne=new s.Point(q.x,q.y);V.sort((de,be)=>{if(be.overscaledZ-de.overscaledZ)return be.overscaledZ-de.overscaledZ;const Se=new s.Point(de.canonical.x+(1<<de.canonical.z)*de.wrap,de.canonical.y),we=new s.Point(be.canonical.x+(1<<be.canonical.z)*be.wrap,be.canonical.y),Te=ne.mult(1<<de.canonical.z);return Te.x-=.5,Te.y-=.5,Te.distSqr(Se)-Te.distSqr(we)})})(C,this.painter),this._previousZoom=b.zoom;const A=this.proxyToSource||{};this.proxyToSource={},C.forEach(V=>{this.proxyToSource[V.key]={}}),this.terrainTileForTile={};const F=this._style._sourceCaches;for(const V in F){const Y=F[V];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,d[V],A),Y.usedForTerrain))continue;const q=d[V];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[m.id]=C.map(V=>new Gp(V,V.key,this.orthoMatrix)),this._assignTerrainTiles(C),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(A),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const z={};this._visibleDemTiles=[];for(const V of this.proxyCoords){const Y=this.terrainTileForTile[V.key];if(!Y)continue;const q=Y.tileID.key;q in z||(this._visibleDemTiles.push(Y),z[q]=q)}}_assignTerrainTiles(d){this._initializing||d.forEach(m=>{if(this.terrainTileForTile[m.key])return;const b=this._findTileCoveringTileID(m,this.sourceCache);b&&(this.terrainTileForTile[m.key]=b)})}_prepareDEMTextures(){const d=this.painter.context,m=d.gl;for(const b in this.terrainTileForTile){const C=this.terrainTileForTile[b],A=C.dem;!A||C.demTexture&&!C.needsDEMTextureUpload||(d.activeTexture.set(m.TEXTURE1),Xv(this.painter,C,A))}}_prepareDemTileUniforms(d,m,b,C){if(!m||m.demTexture==null)return!1;const A=d.tileID.canonical,F=Math.pow(2,m.tileID.canonical.z-A.z),z=C||"";return b[`u_dem_tl${z}`]=[A.x*F%1,A.y*F%1],b[`u_dem_scale${z}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,m=d.gl;if(!this._emptyDepthBufferTexture){const b=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(d,b,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const m=this._visibleDemTiles.reduce((b,C)=>{if(!C.dem)return b;const A=C.dem.tree.minimums[0];return A>0&&d++,b+A},0);return d?m/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,m=d.gl;d.activeTexture.set(m.TEXTURE2);const b=this._getLoadedAreaMinimum(),C=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let A=this._emptyDEMTexture;return A?A.update(C,{premultiply:!1}):A=this._emptyDEMTexture=new s.Texture(d,C,m.RGBA,{premultiply:!1}),A}setupElevationDraw(d,m,b){const C=this.painter.context,A=C.gl,F=(z=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(z),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var z;F.u_dem_size=this.sourceCache.getSource().tileSize,F.u_exaggeration=this.exaggeration();let V=null,Y=null,q=1;if(b&&b.morphing&&this._useVertexMorphing){const ne=b.morphing.srcDemTile,de=b.morphing.dstDemTile;q=b.morphing.phase,ne&&de&&(this._prepareDemTileUniforms(d,ne,F,"_prev")&&(Y=ne),this._prepareDemTileUniforms(d,de,F)&&(V=de))}if(Y&&V?(C.activeTexture.set(A.TEXTURE2),V.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE,A.NEAREST),C.activeTexture.set(A.TEXTURE4),Y.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE,A.NEAREST),F.u_dem_lerp=q):(V=this.terrainTileForTile[d.tileID.key],C.activeTexture.set(A.TEXTURE2),(this._prepareDemTileUniforms(d,V,F)?V.demTexture:this.emptyDEMTexture).bind(A.NEAREST,A.CLAMP_TO_EDGE)),C.activeTexture.set(A.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE),this._depthFBO&&(F.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE),F.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&V){const ne=(1<<V.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=ne}if(b&&b.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),m.setTerrainUniformValues(C,F),this.painter.transform.projection.name==="globe"){const ne=this.globeUniformValues(this.painter.transform,d.tileID.canonical,b&&b.useDenormalizedUpVectorScale);m.setGlobeUniformValues(C,ne)}}globeUniformValues(d,m,b){const C=d.projection;return{u_tile_tl_up:C.upVector(m,0,0),u_tile_tr_up:C.upVector(m,s.EXTENT,0),u_tile_br_up:C.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:C.upVector(m,0,s.EXTENT),u_tile_up_scale:b?s.globeMetersToEcef(1):C.upVectorScale(m,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const m=this.painter,b=this.painter.context;d.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(C,A,F,z,V){if(C.transform.projection.name==="globe")(function(Y,q,ne,de,be){const Se=Y.context,we=Se.gl;let Te,re;const ye=Y.options.showTerrainWireframe?2:0,Le=Y.transform,Be=s.globeUseCustomAntiAliasing(Y,Se,Le),He=(Wt,ft)=>{if(re===Wt)return;const It=[gu[Wt],"PROJECTION_GLOBE_VIEW"];Be&&It.push("CUSTOM_ANTIALIASING"),ft&&It.push(gu[ye]),Te=Y.useProgram("globeRaster",null,It),re=Wt},qe=Y.colorModeForRenderPass(),We=new s.DepthMode(we.LEQUAL,s.DepthMode.ReadWrite,Y.depthRangeFor3D);Bl.update(be);const tt=s.calculateGlobeMercatorMatrix(Le),Je=[s.mercatorXfromLng(Le.center.lng),s.mercatorYfromLat(Le.center.lat)],mt=ye?[!1,!0]:[!1],Xt=Y.globeSharedBuffers,ut=[Le.width*s.exported.devicePixelRatio,Le.height*s.exported.devicePixelRatio],Lt=Float32Array.from(Le.globeMatrix),yt={useDenormalizedUpVectorScale:!0};if(mt.forEach(Wt=>{const ft=Y.transform,It=Up(ft.zoom)*q.exaggeration();re=-1;const Yt=Wt?we.LINES:we.TRIANGLES;for(const $t of de){const Zt=ne.getTile($t),zn=s.StencilMode.disabled,lr=q.prevTerrainTileForTile[$t.key],Tn=q.terrainTileForTile[$t.key];Ed(lr,Tn)&&Bl.newMorphing($t.key,lr,Tn,be,250),Se.activeTexture.set(we.TEXTURE0),Zt.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE);const qn=Bl.getMorphValuesForProxy($t.key),Tr=qn?1:0;qn&&s.extend$1(yt,{morphing:{srcDemTile:qn.from,dstDemTile:qn.to,phase:s.easeCubicInOut(qn.phase)}});const Cr=s.tileCornersToBounds($t.canonical),Dn=s.getLatitudinalLod(Cr.getCenter().lat),ti=s.getGridMatrix($t.canonical,Cr,Dn,ft.worldSize/ft._pixelsPerMercatorPixel),li=s.globeNormalizeECEF(s.globeTileBounds($t.canonical)),ci=jp(ft.projMatrix,Lt,tt,li,s.globeToMercatorTransition(ft.zoom),Je,ft.frustumCorners.TL,ft.frustumCorners.TR,ft.frustumCorners.BR,ft.frustumCorners.BL,ft.globeCenterInViewSpace,ft.globeRadius,ut,It,ti);if(He(Tr,Wt),q.setupElevationDraw(Zt,Te,yt),Y.prepareDrawProgram(Se,Te,$t.toUnwrapped()),Xt){const[ui,ts,No]=Wt?Xt.getWirefameBuffers(Y.context,Dn):Xt.getGridBuffers(Dn,It!==0);Te.draw(Se,Yt,We,zn,qe,s.CullFaceMode.backCCW,ci,"globe_raster",ui,ts,No)}}}),Xt){const Wt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Be&&Wt.push("CUSTOM_ANTIALIASING"),Te=Y.useProgram("globeRaster",null,Wt);for(const ft of de){const{x:It,y:Yt,z:$t}=ft.canonical,Zt=Yt===0,zn=Yt===(1<<$t)-1,[lr,Tn,qn,Tr]=Xt.getPoleBuffers($t);if(Tr&&(Zt||zn)){const Cr=ne.getTile(ft);Se.activeTexture.set(we.TEXTURE0),Cr.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE);let Dn=s.globePoleMatrixForTile($t,It,Le);const ti=s.globeNormalizeECEF(s.globeTileBounds(ft.canonical)),li=(ci,ui)=>ci.draw(Se,we.TRIANGLES,We,s.StencilMode.disabled,qe,s.CullFaceMode.disabled,jp(Le.projMatrix,Dn,Dn,ti,0,Je,Le.frustumCorners.TL,Le.frustumCorners.TR,Le.frustumCorners.BR,Le.frustumCorners.BL,Le.globeCenterInViewSpace,Le.globeRadius,ut,0),"globe_pole_raster",ui,qn,Tr);q.setupElevationDraw(Cr,Te,yt),Y.prepareDrawProgram(Se,Te,ft.toUnwrapped()),Zt&&li(Te,lr),zn&&(Dn=s.scale(s.create(),Dn,[1,-1,1]),li(Te,Tn))}}}})(C,A,F,z,V);else{const Y=C.context,q=Y.gl;let ne,de;const be=C.options.showTerrainWireframe?2:0,Se=(Le,Be)=>{if(de===Le)return;const He=[gu[Le]];Be&&He.push(gu[be]),ne=C.useProgram("terrainRaster",null,He),de=Le},we=C.colorModeForRenderPass(),Te=new s.DepthMode(q.LEQUAL,s.DepthMode.ReadWrite,C.depthRangeFor3D);Bl.update(V);const re=C.transform,ye=Up(re.zoom)*A.exaggeration();(be?[!1,!0]:[!1]).forEach(Le=>{de=-1;const Be=Le?q.LINES:q.TRIANGLES,[He,qe]=Le?A.getWirefameBuffer():[A.gridIndexBuffer,A.gridSegments];for(const We of z){const tt=F.getTile(We),Je=s.StencilMode.disabled,mt=A.prevTerrainTileForTile[We.key],Xt=A.terrainTileForTile[We.key];Ed(mt,Xt)&&Bl.newMorphing(We.key,mt,Xt,V,250),Y.activeTexture.set(q.TEXTURE0),tt.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const ut=Bl.getMorphValuesForProxy(We.key),Lt=ut?1:0;let yt;ut&&(yt={morphing:{srcDemTile:ut.from,dstDemTile:ut.to,phase:s.easeCubicInOut(ut.phase)}});const Wt=Sd(We.projMatrix,Ex(We.canonical,re.renderWorldCopies)?ye/10:ye);Se(Lt,Le),A.setupElevationDraw(tt,ne,yt),C.prepareDrawProgram(Y,ne,We.toUnwrapped()),ne.draw(Y,Be,Te,Je,we,s.CullFaceMode.backCCW,Wt,"terrain_raster",A.gridBuffer,He,qe)}})}}(m,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(this._drapedRenderBatches.length===0)return d+1;this.renderingToTexture=!0;const m=this.painter,b=this.painter.context,C=this.proxySourceCache,A=this.proxiedCoords[C.id],F=this._drapedRenderBatches.shift(),z=[],V=m.style.order;let Y=0;for(const q of A){const ne=C.getTileByID(q.proxyTileKey),de=C.proxyCachedFBO[q.key]?C.proxyCachedFBO[q.key][d]:void 0,be=de!==void 0?C.renderCache[de]:this.pool[Y++],Se=de!==void 0;if(ne.texture=be.tex,Se&&!be.dirty){z.push(ne.tileID);continue}let we;b.bindFramebuffer.set(be.fb.framebuffer),this.renderedToTile=!1,be.dirty&&(b.clear({color:s.Color.transparent,stencil:0}),be.dirty=!1);for(let Te=F.start;Te<=F.end;++Te){const re=m.style._layers[V[Te]];if(re.isHidden(m.transform.zoom))continue;const ye=m.style._getLayerSourceCache(re),Le=ye?this.proxyToSource[q.key][ye.id]:[q];if(!Le)continue;const Be=Le;b.viewport.set([0,0,be.fb.width,be.fb.height]),we!==(ye?ye.id:null)&&(this._setupStencil(be,Le,re,ye),we=ye?ye.id:null),m.renderLayer(m,ye,re,Be)}this.renderedToTile?(be.dirty=!0,z.push(ne.tileID)):Se||--Y,Y===5&&(Y=0,this.renderToBackBuffer(z))}return this.renderToBackBuffer(z),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,m.width,m.height]),F.end+1}postRender(){}renderCacheEfficiency(d){const m=d.order.length;if(m===0)return{efficiency:100};let b,C=0,A=0,F=!1;for(let z=0;z<m;++z){const V=d._layers[d.order[z]];this._style.isLayerDraped(V)?(F&&++C,++A):F||(F=!0,b=V.id)}return A===0?{efficiency:100}:{efficiency:100*(1-C/A),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(m=>m.dem).forEach(m=>{d=Math.min(d,m.dem.tree.minimums[0])}),d===0?d:(d-30)*this._exaggeration}raycast(d,m,b){if(!this._visibleDemTiles)return null;const C=this._visibleDemTiles.filter(A=>A.dem).map(A=>{const F=A.tileID,z=1<<F.overscaledZ,{x:V,y:Y}=F.canonical,q=V/z,ne=(V+1)/z,de=Y/z,be=(Y+1)/z;return{minx:q,miny:de,maxx:ne,maxy:be,t:A.dem.tree.raycastRoot(q,de,ne,be,d,m,b),tile:A}});C.sort((A,F)=>(A.t!==null?A.t:Number.MAX_VALUE)-(F.t!==null?F.t:Number.MAX_VALUE));for(const A of C){if(A.t==null)return null;const F=A.tile.dem.tree.raycast(A.minx,A.miny,A.maxx,A.maxy,d,m,b);if(F!=null)return F}return null}_createFBO(){const d=this.painter.context,m=d.gl,b=this.drapeBufferSize;d.activeTexture.set(m.TEXTURE0);const C=new s.Texture(d,{width:b[0],height:b[1],data:null},m.RGBA);C.bind(m.LINEAR,m.CLAMP_TO_EDGE);const A=d.createFramebuffer(b[0],b[1],!1);return A.colorAttachment.set(C.texture),A.depthAttachment=new _e(d,A.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,A.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):A.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:A,tex:C,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const m=this._style._layers[d],b=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!b&&m.shouldRedrape():!b&&m.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const b of this._style._getSources())if(b instanceof nt){d=!0;break}if(!d)return;const m={};for(let b=0;b<this._style.order.length;++b){const C=this._style._layers[this._style.order[b]],A=this._style._getLayerSourceCache(C);if(A&&!m[A.id]&&!C.isHidden(this.painter.transform.zoom)&&C.type==="line"&&C.widthExpression()instanceof s.ZoomDependentExpression){m[A.id]=!0;for(const F of this.proxyCoords){const z=this.proxyToSource[F.key][A.id];if(z)for(const V of z)this._clearRenderCacheForTile(A.id,V)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const b in this._style._sourceCaches)if(this._style._sourceCaches[b]._source instanceof Ze){d=!0;break}if(!d)return;const m={};for(let b=0;b<this._style.order.length;++b){const C=this._style._layers[this._style.order[b]],A=this._style._getLayerSourceCache(C);if(!A||m[A.id]||C.isHidden(this.painter.transform.zoom)||C.type!=="raster")continue;const F=C.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const V=this.proxyToSource[z.key][A.id];if(V)for(const Y of V){const q=Yv(A.getTile(Y),A.findLoadedParent(Y,0),A,this.painter.transform,F);(q.opacity!==1||q.mix!==0)&&this._clearRenderCacheForTile(A.id,Y)}}}}_setupDrapedRenderBatches(){const d=this._style.order,m=d.length;if(m===0)return;const b=[];let C,A=0,F=this._style._layers[d[A]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++A<m;)F=this._style._layers[d[A]];for(;A<m;++A){const z=this._style._layers[d[A]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?C===void 0&&(C=A):C!==void 0&&(b.push({start:C,end:A-1}),C=void 0))}C!==void 0&&b.push({start:C,end:A-1}),this._drapedRenderBatches=b}_setupRenderCache(d){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const F=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let z=0;z<F.length;++z){const V=Object.values(F[z]);m.renderCachePool.push(...V)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,C=this._tilesDirty;for(let F=b.length-1;F>=0;F--){const z=b[F];if(m.getTileByID(z.key),m.proxyCachedFBO[z.key]!==void 0){const V=d[z.key],Y=this.proxyToSource[z.key];let q=0;for(const ne in Y){const de=Y[ne],be=V[ne];if(!be||be.length!==de.length||de.some((Se,we)=>Se!==be[we]||C[ne]&&C[ne].hasOwnProperty(Se.key))){q=-1;break}++q}for(const ne in m.proxyCachedFBO[z.key])m.renderCache[m.proxyCachedFBO[z.key][ne]].dirty=q<0||q!==Object.values(V).length}}const A=[...this._drapedRenderBatches];A.sort((F,z)=>z.end-z.start-(F.end-F.start));for(const F of A)for(const z of b){if(m.proxyCachedFBO[z.key])continue;let V=m.renderCachePool.pop();V===void 0&&m.renderCache.length<50&&(V=m.renderCache.length,m.renderCache.push(this._createFBO())),V!==void 0&&(m.proxyCachedFBO[z.key]={},m.proxyCachedFBO[z.key][F.start]=V,m.renderCache[V].dirty=!0)}this._tilesDirty={}}_setupStencil(d,m,b,C){if(!C||!this._sourceTilesOverlap[C.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const A=this.painter.context,F=A.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let z;if(b.isTileClipped())z=m.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(A.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(d,m){const b=this.painter,C=this.painter.context,A=C.gl;b._tileClippingMaskIDs={},C.setColorMode(s.ColorMode.disabled),C.setDepthMode(s.DepthMode.disabled);const F=b.useProgram("clippingMask");for(const z of d){const V=b._tileClippingMaskIDs[z.key]=--m;F.draw(C,A.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:A.ALWAYS,mask:0},V,255,A.KEEP,A.KEEP,A.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Kf(z.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(d){const m=this.painter.transform;if(d.x<0||d.x>m.width||d.y<0||d.y>m.height)return null;const b=[d.x,d.y,1,1];s.transformMat4$1(b,b,m.pixelMatrixInverse),s.scale$1(b,b,1/b[3]),b[0]/=m.worldSize,b[1]/=m.worldSize;const C=m._camera.position,A=s.mercatorZfromAltitude(1,m.center.lat),F=[C[0],C[1],C[2]/A,0],z=s.subtract([],b.slice(0,3),F);s.normalize(z,z);const V=this.raycast(F,z,this._exaggeration);return V!==null&&V?(s.scaleAndAdd(F,F,z,V),F[3]=F[2],F[2]*=A,F):null}drawDepth(){const d=this.painter,m=d.context,b=this.proxySourceCache,C=Math.ceil(d.width),A=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===C&&this._depthFBO.height===A||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const F=m.gl,z=m.createFramebuffer(C,A,!0);m.activeTexture.set(F.TEXTURE0);const V=new s.Texture(m,{width:C,height:A,data:null},F.RGBA);V.bind(F.NEAREST,F.CLAMP_TO_EDGE),z.colorAttachment.set(V.texture);const Y=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,C,A);z.depthAttachment.set(Y),this._depthFBO=z,this._depthTexture=V}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,C,A]),function(F,z,V,Y){if(F.transform.projection.name==="globe")return;const q=F.context,ne=q.gl;q.clear({depth:1});const de=F.useProgram("terrainDepth"),be=new s.DepthMode(ne.LESS,s.DepthMode.ReadWrite,F.depthRangeFor3D);for(const Se of Y){const we=V.getTile(Se),Te=Sd(Se.projMatrix,0);z.setupElevationDraw(we,de),de.draw(q,ne.TRIANGLES,be,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Te,"terrain_depth",z.gridBuffer,z.gridIndexBuffer,z.gridNoSkirtSegments)}}(d,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,m,b){if(d.getSource()instanceof vt)return this._setupProxiedCoordsForImageSource(d,m,b);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const C=this.proxiedCoords[d.id]=[],A=this.proxyCoords;for(let z=0;z<A.length;z++){const V=A[z],Y=this._findTileCoveringTileID(V,d);if(Y){const q=this._createProxiedId(V,Y,b[V.key]&&b[V.key][d.id]);C.push(q),this.proxyToSource[V.key][d.id]=[q]}}let F=!1;for(let z=0;z<m.length;z++){const V=d.getTile(m[z]);if(!V||!V.hasData())continue;const Y=this._findTileCoveringTileID(V.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==V.tileID.canonical.z){const q=this.proxyToSource[Y.tileID.key][d.id],ne=this._createProxiedId(Y.tileID,V,b[Y.tileID.key]&&b[Y.tileID.key][d.id]);q?q.splice(q.length-1,0,ne):this.proxyToSource[Y.tileID.key][d.id]=[ne],C.push(ne),F=!0}}this._sourceTilesOverlap[d.id]=F}_setupProxiedCoordsForImageSource(d,m,b){if(!d.getSource().loaded())return;const C=this.proxiedCoords[d.id]=[],A=this.proxyCoords,F=d.getSource(),z=new s.Point(F.tileID.x,F.tileID.y)._div(1<<F.tileID.z),V=F.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((q,ne)=>(q.min.x=Math.min(q.min.x,ne.x-z.x),q.min.y=Math.min(q.min.y,ne.y-z.y),q.max.x=Math.max(q.max.x,ne.x-z.x),q.max.y=Math.max(q.max.y,ne.y-z.y),q),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(q,ne)=>{const de=q.wrap+q.canonical.x/(1<<q.canonical.z),be=q.canonical.y/(1<<q.canonical.z),Se=s.EXTENT/(1<<q.canonical.z),we=ne.wrap+ne.canonical.x/(1<<ne.canonical.z),Te=ne.canonical.y/(1<<ne.canonical.z);return de+Se<we+V.min.x||de>we+V.max.x||be+Se<Te+V.min.y||be>Te+V.max.y};for(let q=0;q<A.length;q++){const ne=A[q];for(let de=0;de<m.length;de++){const be=d.getTile(m[de]);if(!be||!be.hasData()||Y(ne,be.tileID))continue;const Se=this._createProxiedId(ne,be,b[ne.key]&&b[ne.key][d.id]),we=this.proxyToSource[ne.key][d.id];we?we.push(Se):this.proxyToSource[ne.key][d.id]=[Se],C.push(Se)}}}_createProxiedId(d,m,b){let C=this.orthoMatrix;if(b){const A=b.find(F=>F.key===m.tileID.key);if(A)return A}if(m.tileID.key!==d.key){const A=d.canonical.z-m.tileID.canonical.z;let F,z,V;C=s.create();const Y=m.tileID.wrap-d.wrap<<d.overscaledZ;A>0?(F=s.EXTENT>>A,z=F*((m.tileID.canonical.x<<A)-d.canonical.x+Y),V=F*((m.tileID.canonical.y<<A)-d.canonical.y)):(F=s.EXTENT<<-A,z=s.EXTENT*(m.tileID.canonical.x-(d.canonical.x+Y<<-A)),V=s.EXTENT*(m.tileID.canonical.y-(d.canonical.y<<-A))),s.ortho(C,0,F,0,F,0,1),s.translate(C,C,[z,V,0])}return new Gp(m.tileID,d.key,C)}_findTileCoveringTileID(d,m){let b=m.getTile(d);if(b&&b.hasData())return b;const C=this._findCoveringTileCache[m.id],A=C[d.key];if(b=A?m.getTileByID(A):null,b&&b.hasData()||A===null)return b;let F=b?b.tileID:d,z=F.overscaledZ;const V=m.getSource().minzoom,Y=[];if(!A){const ne=m.getSource().maxzoom;if(d.canonical.z>=ne){const de=d.canonical.z-ne;m.getSource().reparseOverscaled?(z=Math.max(d.canonical.z+2,m.transform.tileZoom),F=new s.OverscaledTileID(z,d.wrap,ne,d.canonical.x>>de,d.canonical.y>>de)):de!==0&&(z=ne,F=new s.OverscaledTileID(z,d.wrap,ne,d.canonical.x>>de,d.canonical.y>>de))}F.key!==d.key&&(Y.push(F.key),b=m.getTile(F))}const q=ne=>{Y.forEach(de=>{C[de]=ne}),Y.length=0};for(z-=1;z>=V&&(!b||!b.hasData());z--){b&&q(b.tileID.key);const ne=F.calculateScaledKey(z);if(b=m.getTileByID(ne),b&&b.hasData())break;const de=C[ne];if(de===null)break;de===void 0?Y.push(ne):b=m.getTileByID(de)}return q(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,m){let b=this._tilesDirty[d];b||(b=this._tilesDirty[d]={}),b[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(m){let b=0;const C=new s.StructArrayLayout2ui4,A=131;for(let F=1;F<129;F++){for(let z=1;z<129;z++)b=F*A+z,C.emplaceBack(b,b+1),C.emplaceBack(b,b+A),C.emplaceBack(b+1,b+A),F===128&&C.emplaceBack(b+A,b+A+1);C.emplaceBack(b+1,b+1+A)}return C}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Br{static cacheKey(d,m,b,C){let A=`${m}${C?C.cacheKey:""}`;for(const F of b)d.usedDefines.includes(F)&&(A+=`/${F}`);return A}constructor(d,m,b,C,A,F){const z=d.gl;this.program=z.createProgram();const V=function(re){const ye=[];for(let Le=0;Le<re.length;Le++){if(re[Le]===null)continue;const Be=re[Le].split(" ");ye.push(Be.pop())}return ye}(b.staticAttributes),Y=C?C.getBinderAttributes():[],q=V.concat(Y);let ne=C?C.defines():[];ne=ne.concat(F.map(re=>`#define ${re}`));const de=d.isWebGL2?`#version 300 es
`:"",be=de+ne.concat(d.extStandardDerivatives&&de.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Gv):Gv,Gv,$p,xx.fragmentSource,xd.fragmentSource,b.fragmentSource).join(`
`),Se=de+ne.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,$p,xx.vertexSource,xd.vertexSource,Np.vertexSource,b.vertexSource).join(`
`),we=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(we,be),z.compileShader(we),z.attachShader(this.program,we);const Te=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(Te,Se),z.compileShader(Te),z.attachShader(this.program,Te),this.attributes={},this.numAttributes=q.length;for(let re=0;re<this.numAttributes;re++)q[re]&&(z.bindAttribLocation(this.program,re,q[re]),this.attributes[q[re]]=re);z.linkProgram(this.program),z.deleteShader(Te),z.deleteShader(we),this.fixedUniforms=A(d),this.binderUniforms=C?C.getUniforms(d):[],F.includes("TERRAIN")&&(this.terrainUniforms=(re=>({u_dem:new s.Uniform1i(re),u_dem_prev:new s.Uniform1i(re),u_dem_unpack:new s.Uniform4f(re),u_dem_tl:new s.Uniform2f(re),u_dem_scale:new s.Uniform1f(re),u_dem_tl_prev:new s.Uniform2f(re),u_dem_scale_prev:new s.Uniform1f(re),u_dem_size:new s.Uniform1f(re),u_dem_lerp:new s.Uniform1f(re),u_exaggeration:new s.Uniform1f(re),u_depth:new s.Uniform1i(re),u_depth_size_inv:new s.Uniform2f(re),u_meter_to_dem:new s.Uniform1f(re),u_label_plane_matrix_inv:new s.UniformMatrix4f(re)}))(d)),F.includes("GLOBE")&&(this.globeUniforms=(re=>({u_tile_tl_up:new s.Uniform3f(re),u_tile_tr_up:new s.Uniform3f(re),u_tile_br_up:new s.Uniform3f(re),u_tile_bl_up:new s.Uniform3f(re),u_tile_up_scale:new s.Uniform1f(re)}))(d)),F.includes("FOG")&&(this.fogUniforms=(re=>({u_fog_matrix:new s.UniformMatrix4f(re),u_fog_range:new s.Uniform2f(re),u_fog_color:new s.Uniform4f(re),u_fog_horizon_blend:new s.Uniform1f(re),u_fog_temporal_offset:new s.Uniform1f(re),u_frustum_tl:new s.Uniform3f(re),u_frustum_tr:new s.Uniform3f(re),u_frustum_br:new s.Uniform3f(re),u_frustum_bl:new s.Uniform3f(re),u_globe_pos:new s.Uniform3f(re),u_globe_radius:new s.Uniform1f(re),u_globe_transition:new s.Uniform1f(re),u_is_globe:new s.Uniform1i(re),u_viewport:new s.Uniform2f(re)}))(d))}}setTerrainUniformValues(d,m){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const C in m)b[C]&&b[C].set(this.program,C,m[C])}}setGlobeUniformValues(d,m){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const C in m)b[C]&&b[C].set(this.program,C,m[C])}}setFogUniformValues(d,m){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const C in m)b[C].set(this.program,C,m[C])}}draw(d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we){const Te=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(b),d.setStencilMode(C),d.setColorMode(A),d.setCullFace(F);for(const ye of Object.keys(this.fixedUniforms))this.fixedUniforms[ye].set(this.program,ye,z[ye]);Se&&Se.setUniforms(this.program,d,this.binderUniforms,de,{zoom:be});const re={[Te.LINES]:2,[Te.TRIANGLES]:3,[Te.LINE_STRIP]:1}[m];for(const ye of ne.get()){const Le=ye.vaos||(ye.vaos={});(Le[V]||(Le[V]=new hA)).bind(d,this,Y,Se?Se.getPaintVertexBuffers():[],q,ye.vertexOffset,we||[]),Te.drawElements(m,ye.primitiveLength*re,Te.UNSIGNED_SHORT,ye.primitiveOffset*re*2)}}}function Jf(y,d){const m=Math.pow(2,d.tileID.overscaledZ),b=d.tileSize*Math.pow(2,y.transform.tileZoom)/m,C=b*(d.tileID.canonical.x+d.tileID.wrap*m),A=b*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/ze(d,1,y.transform.tileZoom),u_pixel_coord_upper:[C>>16,A>>16],u_pixel_coord_lower:[65535&C,65535&A]}}const Cx=s.create(),Jv=(y,d,m,b,C,A,F,z,V,Y,q)=>{const ne=d.style.light,de=ne.properties.get("position"),be=[de.x,de.y,de.z],Se=s.create$1();ne.properties.get("anchor")==="viewport"&&(s.fromRotation(Se,-d.transform.angle),s.transformMat3(be,be,Se));const we=ne.properties.get("color"),Te=d.transform,re={u_matrix:y,u_lightpos:be,u_lightintensity:ne.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_vertical_gradient:+m,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Cx,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:C,u_edge_radius:A};return Te.projection.name==="globe"&&(re.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],re.u_zoom_transition=V,re.u_inv_rot_matrix=q,re.u_merc_center=Y,re.u_up_dir=Te.projection.upVector(new s.CanonicalTileID(0,0,0),Y[0]*s.EXTENT,Y[1]*s.EXTENT),re.u_height_lift=z),re},Tx=(y,d,m,b,C,A,F,z,V,Y,q,ne)=>{const de=Jv(y,d,m,b,C,A,F,V,Y,q,ne),be={u_height_factor:-Math.pow(2,F.overscaledZ)/z.tileSize/8};return s.extend(de,Jf(d,z),be)},vu=y=>({u_matrix:y}),Qv=(y,d,m)=>s.extend(vu(y),Jf(d,m)),pA=(y,d)=>({u_matrix:y,u_world:d}),mA=(y,d,m,b)=>s.extend(Qv(y,d,m),{u_world:b}),gA=s.create(),ey=(y,d,m,b,C,A)=>{const F=y.transform,z=F.projection.name==="globe";let V;if(A.paint.get("circle-pitch-alignment")==="map")if(z){const q=s.globePixelsToTileUnits(F.zoom,d.canonical)*F._pixelsPerMercatorPixel;V=Float32Array.from([q,0,0,q])}else V=F.calculatePixelsToTileUnitsMatrix(m);else V=new Float32Array([F.pixelsToGLUnits[0],0,0,F.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:F.cameraToCenterDistance,u_matrix:y.translatePosMatrix(d.projMatrix,m,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:V,u_inv_rot_matrix:gA,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){Y.u_inv_rot_matrix=b,Y.u_merc_center=C,Y.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],Y.u_zoom_transition=s.globeToMercatorTransition(F.zoom);const q=C[0]*s.EXTENT,ne=C[1]*s.EXTENT;Y.u_up_dir=F.projection.upVector(new s.CanonicalTileID(0,0,0),q,ne)}return Y},ty=y=>{const d=[];return y.paint.get("circle-pitch-alignment")==="map"&&d.push("PITCH_WITH_MAP"),y.paint.get("circle-pitch-scale")==="map"&&d.push("SCALE_WITH_MAP"),d},ny=(y,d,m,b)=>{const C=s.EXTENT/m.tileSize;return{u_matrix:y,u_camera_to_center_distance:d.getCameraToCenterDistance(b),u_extrude_scale:[d.pixelsToGLUnits[0]/C,d.pixelsToGLUnits[1]/C]}},Hp=(y,d,m=1)=>({u_matrix:y,u_color:d,u_overlay:0,u_overlay_scale:m}),Ax=s.create(),Mx=(y,d,m,b,C,A,F)=>{const z=y.transform,V=z.projection.name==="globe",Y=V?s.globePixelsToTileUnits(z.zoom,d.canonical)*z._pixelsPerMercatorPixel:ze(m,1,A),q={u_matrix:d.projMatrix,u_extrude_scale:Y,u_intensity:F,u_inv_rot_matrix:Ax,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(V){q.u_inv_rot_matrix=b,q.u_merc_center=C,q.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],q.u_zoom_transition=s.globeToMercatorTransition(z.zoom);const ne=C[0]*s.EXTENT,de=C[1]*s.EXTENT;q.u_up_dir=z.projection.upVector(new s.CanonicalTileID(0,0,0),ne,de)}return q},vA=(y,d,m,b,C,A,F)=>{const z=y.transform,V=z.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:ry(y,d,m,b),u_pixels_to_tile_units:V,u_device_pixel_ratio:A,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:C,u_texsize:eh(m)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Cd(d,y.transform),u_alpha_discard_threshold:0,u_trim_offset:F}},Qf=(y,d,m,b,C)=>{const A=y.transform;return{u_matrix:ry(y,d,m,b),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:A.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:C,u_image:0,u_tile_units_to_pixels:Cd(d,A),u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Cd(y,d){return 1/ze(y,1,d.tileZoom)}function ry(y,d,m,b){return y.translatePosMatrix(b||d.tileID.projMatrix,d,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function eh(y){const d=y.paint.get("line-dasharray").value;return d.value||d.kind!=="constant"}const iy=(y,d,m,b,C,A)=>{return{u_matrix:y,u_tl_parent:d,u_scale_parent:m,u_fade_t:b.mix,u_opacity:b.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(z=C.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(F=C.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:tl(C.paint.get("raster-hue-rotate")),u_perspective_transform:A};var F,z};function tl(y){y*=Math.PI/180;const d=Math.sin(y),m=Math.cos(y);return[(2*m+1)/3,(-Math.sqrt(3)*d-m+1)/3,(Math.sqrt(3)*d-m+1)/3]}const Wp=s.create(),oy=(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we)=>{const Te=C.transform,re={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:Te.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Te.width/Te.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:F,u_coord_matrix:z,u_is_text:+V,u_pitch_with_map:+b,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Wp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Wp,u_up_vector:[0,-1,0]};return we.name==="globe"&&(re.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],re.u_zoom_transition=ne,re.u_inv_rot_matrix=be,re.u_merc_center=de,re.u_camera_forward=Te._camera.forward(),re.u_ecef_origin=s.globeECEFOrigin(Te.globeMatrix,q.toUnwrapped()),re.u_tile_matrix=Float32Array.from(Te.globeMatrix),re.u_up_vector=Se),re},Xp=(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we,Te)=>s.extend(oy(y,d,m,b,C,A,F,z,V,Y,ne,de,be,Se,we,Te),{u_gamma_scale:b?C.transform.cameraToCenterDistance*Math.cos(C.terrain?0:C.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+q}),Px=(y,d,m,b,C,A,F,z,V,Y,q,ne,de,be,Se,we)=>s.extend(Xp(y,d,m,b,C,A,F,z,!0,V,!0,q,ne,de,be,Se,we),{u_texsize_icon:Y,u_texture_icon:1}),sy=(y,d,m)=>({u_matrix:y,u_opacity:d,u_color:m}),yA=(y,d,m,b,C)=>s.extend(function(A,F,z){const V=F.imageManager.getPattern(A.toString()),{width:Y,height:q}=F.imageManager.getPixelSize(),ne=Math.pow(2,z.tileID.overscaledZ),de=z.tileSize*Math.pow(2,F.transform.tileZoom)/ne,be=de*(z.tileID.canonical.x+z.tileID.wrap*ne),Se=de*z.tileID.canonical.y;return{u_image:0,u_pattern_tl:V.tl,u_pattern_br:V.br,u_texsize:[Y,q],u_pattern_size:V.displaySize,u_tile_units_to_pixels:1/ze(z,1,F.transform.tileZoom),u_pixel_coord_upper:[be>>16,Se>>16],u_pixel_coord_lower:[65535&be,65535&Se]}}(b,m,C),{u_matrix:y,u_opacity:d}),ay={fillExtrusion:y=>({u_matrix:new s.UniformMatrix4f(y),u_lightpos:new s.Uniform3f(y),u_lightintensity:new s.Uniform1f(y),u_lightcolor:new s.Uniform3f(y),u_vertical_gradient:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_edge_radius:new s.Uniform1f(y),u_ao:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_up_dir:new s.Uniform3f(y),u_height_lift:new s.Uniform1f(y)}),fillExtrusionPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_lightpos:new s.Uniform3f(y),u_lightintensity:new s.Uniform1f(y),u_lightcolor:new s.Uniform3f(y),u_vertical_gradient:new s.Uniform1f(y),u_height_factor:new s.Uniform1f(y),u_edge_radius:new s.Uniform1f(y),u_ao:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_up_dir:new s.Uniform3f(y),u_height_lift:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y)}),fill:y=>({u_matrix:new s.UniformMatrix4f(y)}),fillPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),fillOutline:y=>({u_matrix:new s.UniformMatrix4f(y),u_world:new s.Uniform2f(y)}),fillOutlinePattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_world:new s.Uniform2f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),circle:y=>({u_camera_to_center_distance:new s.Uniform1f(y),u_extrude_scale:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_up_dir:new s.Uniform3f(y)}),collisionBox:y=>({u_matrix:new s.UniformMatrix4f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_extrude_scale:new s.Uniform2f(y)}),collisionCircle:y=>({u_matrix:new s.UniformMatrix4f(y),u_inv_matrix:new s.UniformMatrix4f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_viewport_size:new s.Uniform2f(y)}),debug:y=>({u_color:new s.UniformColor(y),u_matrix:new s.UniformMatrix4f(y),u_overlay:new s.Uniform1i(y),u_overlay_scale:new s.Uniform1f(y)}),clippingMask:y=>({u_matrix:new s.UniformMatrix4f(y)}),heatmap:y=>({u_extrude_scale:new s.Uniform1f(y),u_intensity:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_up_dir:new s.Uniform3f(y)}),heatmapTexture:y=>({u_image:new s.Uniform1i(y),u_color_ramp:new s.Uniform1i(y),u_opacity:new s.Uniform1f(y)}),hillshade:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_latrange:new s.Uniform2f(y),u_light:new s.Uniform2f(y),u_shadow:new s.UniformColor(y),u_highlight:new s.UniformColor(y),u_accent:new s.UniformColor(y)}),hillshadePrepare:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_dimension:new s.Uniform2f(y),u_zoom:new s.Uniform1f(y),u_unpack:new s.Uniform4f(y)}),line:y=>({u_matrix:new s.UniformMatrix4f(y),u_pixels_to_tile_units:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_units_to_pixels:new s.Uniform2f(y),u_dash_image:new s.Uniform1i(y),u_gradient_image:new s.Uniform1i(y),u_image_height:new s.Uniform1f(y),u_texsize:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_alpha_discard_threshold:new s.Uniform1f(y),u_trim_offset:new s.Uniform2f(y)}),linePattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_texsize:new s.Uniform2f(y),u_pixels_to_tile_units:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_units_to_pixels:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_alpha_discard_threshold:new s.Uniform1f(y)}),raster:y=>({u_matrix:new s.UniformMatrix4f(y),u_tl_parent:new s.Uniform2f(y),u_scale_parent:new s.Uniform1f(y),u_fade_t:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_image0:new s.Uniform1i(y),u_image1:new s.Uniform1i(y),u_brightness_low:new s.Uniform1f(y),u_brightness_high:new s.Uniform1f(y),u_saturation_factor:new s.Uniform1f(y),u_contrast_factor:new s.Uniform1f(y),u_spin_weights:new s.Uniform3f(y),u_perspective_transform:new s.Uniform2f(y)}),symbolIcon:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_camera_forward:new s.Uniform3f(y),u_tile_matrix:new s.UniformMatrix4f(y),u_up_vector:new s.Uniform3f(y),u_ecef_origin:new s.Uniform3f(y),u_texture:new s.Uniform1i(y)}),symbolSDF:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_texture:new s.Uniform1i(y),u_gamma_scale:new s.Uniform1f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_camera_forward:new s.Uniform3f(y),u_tile_matrix:new s.UniformMatrix4f(y),u_up_vector:new s.Uniform3f(y),u_ecef_origin:new s.Uniform3f(y),u_is_halo:new s.Uniform1i(y)}),symbolTextAndIcon:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_texsize_icon:new s.Uniform2f(y),u_texture:new s.Uniform1i(y),u_texture_icon:new s.Uniform1i(y),u_gamma_scale:new s.Uniform1f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_is_halo:new s.Uniform1i(y)}),background:y=>({u_matrix:new s.UniformMatrix4f(y),u_opacity:new s.Uniform1f(y),u_color:new s.UniformColor(y)}),backgroundPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_opacity:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_pattern_tl:new s.Uniform2f(y),u_pattern_br:new s.Uniform2f(y),u_texsize:new s.Uniform2f(y),u_pattern_size:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),terrainRaster:qv,terrainDepth:qv,skybox:y=>({u_matrix:new s.UniformMatrix4f(y),u_sun_direction:new s.Uniform3f(y),u_cubemap:new s.Uniform1i(y),u_opacity:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y)}),skyboxGradient:y=>({u_matrix:new s.UniformMatrix4f(y),u_color_ramp:new s.Uniform1i(y),u_center_direction:new s.Uniform3f(y),u_radius:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y)}),skyboxCapture:y=>({u_matrix_3f:new s.UniformMatrix3f(y),u_sun_direction:new s.Uniform3f(y),u_sun_intensity:new s.Uniform1f(y),u_color_tint_r:new s.Uniform4f(y),u_color_tint_m:new s.Uniform4f(y),u_luminance:new s.Uniform1f(y)}),globeRaster:y=>({u_proj_matrix:new s.UniformMatrix4f(y),u_globe_matrix:new s.UniformMatrix4f(y),u_normalize_matrix:new s.UniformMatrix4f(y),u_merc_matrix:new s.UniformMatrix4f(y),u_zoom_transition:new s.Uniform1f(y),u_merc_center:new s.Uniform2f(y),u_image0:new s.Uniform1i(y),u_grid_matrix:new s.UniformMatrix3f(y),u_skirt_height:new s.Uniform1f(y),u_frustum_tl:new s.Uniform3f(y),u_frustum_tr:new s.Uniform3f(y),u_frustum_br:new s.Uniform3f(y),u_frustum_bl:new s.Uniform3f(y),u_globe_pos:new s.Uniform3f(y),u_globe_radius:new s.Uniform1f(y),u_viewport:new s.Uniform2f(y)}),globeAtmosphere:y=>({u_frustum_tl:new s.Uniform3f(y),u_frustum_tr:new s.Uniform3f(y),u_frustum_br:new s.Uniform3f(y),u_frustum_bl:new s.Uniform3f(y),u_horizon:new s.Uniform1f(y),u_transition:new s.Uniform1f(y),u_fadeout_range:new s.Uniform1f(y),u_color:new s.Uniform4f(y),u_high_color:new s.Uniform4f(y),u_space_color:new s.Uniform4f(y),u_star_intensity:new s.Uniform1f(y),u_star_density:new s.Uniform1f(y),u_star_size:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y),u_horizon_angle:new s.Uniform1f(y),u_rotation_matrix:new s.UniformMatrix4f(y)})};let qp;function th(y,d,m,b,C,A,F){const z=y.context,V=z.gl,Y=y.transform,q=y.useProgram("collisionBox"),ne=[];let de=0,be=0;for(let Be=0;Be<b.length;Be++){const He=b[Be],qe=d.getTile(He),We=qe.getBucket(m);if(!We)continue;const tt=Ue(He,We,Y);let Je=tt;C[0]===0&&C[1]===0||(Je=y.translatePosMatrix(tt,qe,C,A));const mt=F?We.textCollisionBox:We.iconCollisionBox,Xt=We.collisionCircleArray;if(Xt.length>0){const ut=s.create(),Lt=Je;s.mul(ut,We.placementInvProjMatrix,Y.glCoordMatrix),s.mul(ut,ut,We.placementViewportMatrix),ne.push({circleArray:Xt,circleOffset:be,transform:Lt,invTransform:ut,projection:We.getProjection()}),de+=Xt.length/4,be=de}mt&&(y.terrain&&y.terrain.setupElevationDraw(qe,q),q.draw(z,V.LINES,s.DepthMode.disabled,s.StencilMode.disabled,y.colorModeForRenderPass(),s.CullFaceMode.disabled,ny(Je,Y,qe,We.getProjection()),m.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,null,Y.zoom,null,[mt.collisionVertexBuffer,mt.collisionVertexBufferExt]))}if(!F||!ne.length)return;const Se=y.useProgram("collisionCircle"),we=new s.StructArrayLayout2f1f2i16;we.resize(4*de),we._trim();let Te=0;for(const Be of ne)for(let He=0;He<Be.circleArray.length/4;He++){const qe=4*He,We=Be.circleArray[qe+0],tt=Be.circleArray[qe+1],Je=Be.circleArray[qe+2],mt=Be.circleArray[qe+3];we.emplace(Te++,We,tt,Je,mt,0),we.emplace(Te++,We,tt,Je,mt,1),we.emplace(Te++,We,tt,Je,mt,2),we.emplace(Te++,We,tt,Je,mt,3)}(!qp||qp.length<2*de)&&(qp=function(Be){const He=2*Be,qe=new s.StructArrayLayout3ui6;qe.resize(He),qe._trim();for(let We=0;We<He;We++){const tt=6*We;qe.uint16[tt+0]=4*We+0,qe.uint16[tt+1]=4*We+1,qe.uint16[tt+2]=4*We+2,qe.uint16[tt+3]=4*We+2,qe.uint16[tt+4]=4*We+3,qe.uint16[tt+5]=4*We+0}return qe}(de));const re=z.createIndexBuffer(qp,!0),ye=z.createVertexBuffer(we,s.collisionCircleLayout.members,!0);for(const Be of ne){const He={u_matrix:Be.transform,u_inv_matrix:Be.invTransform,u_camera_to_center_distance:(Le=Y).getCameraToCenterDistance(Be.projection),u_viewport_size:[Le.width,Le.height]};Se.draw(z,V.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,y.colorModeForRenderPass(),s.CullFaceMode.disabled,He,m.id,ye,re,s.SegmentVector.simpleSegment(0,2*Be.circleOffset,Be.circleArray.length,Be.circleArray.length/2),null,Y.zoom)}var Le;ye.destroy(),re.destroy()}const Ix=s.create();function ly({width:y,height:d,anchor:m,textOffset:b,textScale:C},A){const{horizontalAlign:F,verticalAlign:z}=s.getAnchorAlignment(m),V=-(F-.5)*y,Y=-(z-.5)*d,q=s.evaluateVariableOffset(m,b);return new s.Point((V/C+q[0])*A,(Y/C+q[1])*A)}function _A(y,d,m,b,C,A,F,z,V,Y,q){const ne=y.text.placedSymbolArray,de=y.text.dynamicLayoutVertexArray,be=y.icon.dynamicLayoutVertexArray,Se={},we=y.getProjection(),Te=at(z,we,A),re=A.elevation,ye=we.upVectorScale(z.canonical,A.center.lat,A.worldSize).metersToTile;de.clear();for(let Le=0;Le<ne.length;Le++){const Be=ne.get(Le),{tileAnchorX:He,tileAnchorY:qe,numGlyphs:We}=Be,tt=Be.hidden||!Be.crossTileID||y.allowVerticalPlacement&&!Be.placedOrientation?null:b[Be.crossTileID];if(tt){let Je=0,mt=0,Xt=0;if(re){const Zt=re?re.getAtTileOffset(z,He,qe):0,[zn,lr,Tn]=we.upVector(z.canonical,He,qe);Je=Zt*zn*ye,mt=Zt*lr*ye,Xt=Zt*Tn*ye}let[ut,Lt,yt,Wt]=Lr(Be.projectedAnchorX+Je,Be.projectedAnchorY+mt,Be.projectedAnchorZ+Xt,m?Te:F);const ft=cs(A.getCameraToCenterDistance(we),Wt);let It=C.evaluateSizeForFeature(y.textSizeData,Y,Be)*ft/s.ONE_EM;m&&(It*=y.tilePixelRatio/V);const Yt=ly(tt,It);m?({x:ut,y:Lt,z:yt}=we.projectTilePoint(He+Yt.x,qe+Yt.y,z.canonical),[ut,Lt,yt]=Lr(ut+Je,Lt+mt,yt+Xt,F)):(d&&Yt._rotate(-A.angle),ut+=Yt.x,Lt+=Yt.y,yt=0);const $t=y.allowVerticalPlacement&&Be.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Zt=0;Zt<We;Zt++)s.addDynamicAttributes(de,ut,Lt,yt,$t);q&&Be.associatedIconIndex>=0&&(Se[Be.associatedIconIndex]={x:ut,y:Lt,z:yt,angle:$t})}else Ei(We,de)}if(q){be.clear();const Le=y.icon.placedSymbolArray;for(let Be=0;Be<Le.length;Be++){const He=Le.get(Be),{numGlyphs:qe}=He,We=Se[Be];if(He.hidden||!We)Ei(qe,be);else{const{x:tt,y:Je,z:mt,angle:Xt}=We;for(let ut=0;ut<qe;ut++)s.addDynamicAttributes(be,tt,Je,mt,Xt)}}y.icon.dynamicLayoutVertexBuffer.updateData(be)}y.text.dynamicLayoutVertexBuffer.updateData(de)}function cy(y,d,m){return m.iconsInText&&d?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Rx(y,d,m,b,C,A,F,z,V,Y,q,ne){const de=y.context,be=de.gl,Se=y.transform,we=z==="map",Te=V==="map",re=we&&m.layout.get("symbol-placement")!=="point",ye=we&&!Te&&!re,Le=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Be=!1;const He=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),qe=[s.mercatorXfromLng(Se.center.lng),s.mercatorYfromLat(Se.center.lat)],We=m.layout.get("text-variable-anchor"),tt=Se.projection.name==="globe",Je=[],mt=[0,-1,0];let Xt=mt;!tt&&!Se.mercatorFromTransition||we||(Xt=function(ut){const Lt=ut._camera.getWorldToCamera(ut.worldSize,1),yt=s.multiply([],Lt,ut.globeMatrix);s.invert(yt,yt);const Wt=[0,0,0],ft=[0,1,0,0];return s.transformMat4$1(ft,ft,yt),Wt[0]=ft[0],Wt[1]=ft[1],Wt[2]=ft[2],s.normalize(Wt,Wt),Wt}(Se));for(const ut of b){const Lt=d.getTile(ut),yt=Lt.getBucket(m);if(!yt||yt.projection.name==="mercator"&&tt)continue;const Wt=C?yt.text:yt.icon;if(!Wt||yt.fullyClipped||!Wt.segments.get().length)continue;const ft=Wt.programConfigurations.get(m.id),It=C||yt.sdfIcons,Yt=C?yt.textSizeData:yt.iconSizeData,$t=Te||Se.pitch!==0,Zt=s.evaluateSizeForZoom(Yt,Se.zoom);let zn,lr,Tn,qn,Tr=[0,0],Cr=null;if(C)lr=Lt.glyphAtlasTexture,Tn=be.LINEAR,zn=Lt.glyphAtlasTexture.size,yt.iconsInText&&(Tr=Lt.imageAtlasTexture.size,Cr=Lt.imageAtlasTexture,qn=$t||y.options.rotating||y.options.zooming||Yt.kind==="composite"||Yt.kind==="camera"?be.LINEAR:be.NEAREST);else{const Fl=m.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;lr=Lt.imageAtlasTexture,Tn=It||y.options.rotating||y.options.zooming||Fl||$t?be.LINEAR:be.NEAREST,zn=Lt.imageAtlasTexture.size}const Dn=yt.projection.name==="globe",ti=Dn?Xt:mt,li=Dn?s.globeToMercatorTransition(Se.zoom):0,ci=at(ut,yt.getProjection(),Se),ui=Se.calculatePixelsToTileUnitsMatrix(Lt),ts=xt(ci,Lt.tileID.canonical,Te,we,Se,yt.getProjection(),ui),No=y.terrain&&Te&&re?s.invert(s.create(),ts):Ix,oa=xr(ci,Lt.tileID.canonical,Te,we,Se,yt.getProjection(),ui),rl=We&&yt.hasTextData(),zi=m.layout.get("icon-text-fit")!=="none"&&rl&&yt.hasIconData();if(re){const Fl=Se.elevation,Oc=Fl?Fl.getAtTileOffsetFunc(ut,Se.center.lat,Se.worldSize,yt.getProjection()):null,wu=Hi(ci,Lt.tileID.canonical,Te,we,Se,yt.getProjection(),ui);ao(yt,ci,y,C,wu,oa,Te,Y,Oc,ut)}const di=re||C&&We||zi,Ur=y.translatePosMatrix(ci,Lt,A,F),ho=di?Ix:ts,us=y.translatePosMatrix(oa,Lt,A,F,!0),Ri=yt.getProjection().createInversionMatrix(Se,ut.canonical),Es=[];y.terrainRenderModeElevated()&&Te&&Es.push("PITCH_WITH_MAP_TERRAIN"),Dn&&Es.push("PROJECTION_GLOBE_VIEW"),di&&Es.push("PROJECTED_POS_ON_VIEWPORT");const um=It&&m.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xu;xu=It?yt.iconsInText?Px(Yt.kind,Zt,ye,Te,y,Ur,ho,us,zn,Tr,ut,li,qe,Ri,ti,yt.getProjection()):Xp(Yt.kind,Zt,ye,Te,y,Ur,ho,us,C,zn,!0,ut,li,qe,Ri,ti,yt.getProjection()):oy(Yt.kind,Zt,ye,Te,y,Ur,ho,us,C,zn,ut,li,qe,Ri,ti,yt.getProjection());const fh={program:y.useProgram(cy(It,C,yt),ft,Es),buffers:Wt,uniformValues:xu,atlasTexture:lr,atlasTextureIcon:Cr,atlasInterpolation:Tn,atlasInterpolationIcon:qn,isSDF:It,hasHalo:um,tile:Lt,labelPlaneMatrixInv:No};if(Le&&yt.canOverlap){Be=!0;const Fl=Wt.segments.get();for(const Oc of Fl)Je.push({segments:new s.SegmentVector([Oc]),sortKey:Oc.sortKey,state:fh})}else Je.push({segments:Wt.segments,sortKey:0,state:fh})}Be&&Je.sort((ut,Lt)=>ut.sortKey-Lt.sortKey);for(const ut of Je){const Lt=ut.state;if(y.terrain&&y.terrain.setupElevationDraw(Lt.tile,Lt.program,{useDepthForOcclusion:!tt,labelPlaneMatrixInv:Lt.labelPlaneMatrixInv}),de.activeTexture.set(be.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,be.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(de.activeTexture.set(be.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),Lt.isSDF){const yt=Lt.uniformValues;Lt.hasHalo&&(yt.u_is_halo=1,nh(Lt.buffers,ut.segments,m,y,Lt.program,He,q,ne,yt)),yt.u_is_halo=0}nh(Lt.buffers,ut.segments,m,y,Lt.program,He,q,ne,Lt.uniformValues)}}function nh(y,d,m,b,C,A,F,z,V){const Y=b.context,q=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.globeExtVertexBuffer];C.draw(Y,Y.gl.TRIANGLES,A,F,z,s.CullFaceMode.disabled,V,m.id,y.layoutVertexBuffer,y.indexBuffer,d,m.paint,b.transform.zoom,y.programConfigurations.get(m.id),q)}function Ox(y,d,m,b,C,A,F){const z=y.context.gl,V=m.paint.get("fill-pattern"),Y=V&&V.constantOr(1);let q,ne,de,be,Se;F?(ne=Y&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=z.LINES):(ne=Y?"fillPattern":"fill",q=z.TRIANGLES);for(const we of b){const Te=d.getTile(we);if(Y&&!Te.patternsLoaded())continue;const re=Te.getBucket(m);if(!re)continue;y.prepareDrawTile();const ye=re.programConfigurations.get(m.id),Le=y.useProgram(ne,ye);Y&&(y.context.activeTexture.set(z.TEXTURE0),Te.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ye.updatePaintBuffers());const Be=V.constantOr(null);if(Be&&Te.imageAtlas){const qe=Te.imageAtlas.patternPositions[Be.toString()];qe&&ye.setConstantPatternPositions(qe)}const He=y.translatePosMatrix(we.projMatrix,Te,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(F){be=re.indexBuffer2,Se=re.segments2;const qe=y.terrain&&y.terrain.renderingToTexture?y.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];de=ne==="fillOutlinePattern"&&Y?mA(He,y,Te,qe):pA(He,qe)}else be=re.indexBuffer,Se=re.segments,de=Y?Qv(He,y,Te):vu(He);y.prepareDrawProgram(y.context,Le,we.toUnwrapped()),Le.draw(y.context,q,C,y.stencilModeForClipping(we),A,s.CullFaceMode.disabled,de,m.id,re.layoutVertexBuffer,be,Se,m.paint,y.transform.zoom,ye)}}function Yp(y,d,m,b,C,A,F){const z=y.context,V=z.gl,Y=y.transform,q=m.paint.get("fill-extrusion-pattern"),ne=q.constantOr(1),de=m.paint.get("fill-extrusion-opacity"),be=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],Se=m.layout.get("fill-extrusion-edge-radius"),we=Se>0&&!m.paint.get("fill-extrusion-rounded-roof"),Te=we?0:Se,re=Y.projection.name==="globe"?s.fillExtrusionHeightLift():0,ye=Y.projection.name==="globe",Le=ye?s.globeToMercatorTransition(Y.zoom):0,Be=[s.mercatorXfromLng(Y.center.lng),s.mercatorYfromLat(Y.center.lat)],He=[];ye&&He.push("PROJECTION_GLOBE_VIEW"),be[0]>0&&He.push("FAUX_AO"),we&&He.push("ZERO_ROOF_RADIUS");for(const qe of b){const We=d.getTile(qe),tt=We.getBucket(m);if(!tt||tt.projection.name!==Y.projection.name)continue;const Je=tt.programConfigurations.get(m.id),mt=y.useProgram(ne?"fillExtrusionPattern":"fillExtrusion",Je,He);if(y.terrain){const It=y.terrain;if(y.style.terrainSetForDrapingOnly())It.setupElevationDraw(We,mt,{useMeterToDem:!0});else{if(!tt.enableTerrain)continue;if(It.setupElevationDraw(We,mt,{useMeterToDem:!0}),Lx(z,d,qe,tt,m,It),!tt.centroidVertexBuffer){const Yt=mt.attributes.a_centroid_pos;Yt!==void 0&&V.vertexAttrib2f(Yt,0,0)}}}ne&&(y.context.activeTexture.set(V.TEXTURE0),We.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Je.updatePaintBuffers());const Xt=q.constantOr(null);if(Xt&&We.imageAtlas){const It=We.imageAtlas.patternPositions[Xt.toString()];It&&Je.setConstantPatternPositions(It)}const ut=y.translatePosMatrix(qe.projMatrix,We,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Lt=Y.projection.createInversionMatrix(Y,qe.canonical),yt=m.paint.get("fill-extrusion-vertical-gradient"),Wt=ne?Tx(ut,y,yt,de,be,Te,qe,We,re,Le,Be,Lt):Jv(ut,y,yt,de,be,Te,qe,re,Le,Be,Lt);y.prepareDrawProgram(z,mt,qe.toUnwrapped());const ft=[];y.terrain&&ft.push(tt.centroidVertexBuffer),ye&&ft.push(tt.layoutVertexExtBuffer),mt.draw(z,z.gl.TRIANGLES,C,A,F,s.CullFaceMode.backCCW,Wt,m.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,m.paint,y.transform.zoom,Je,ft)}}function Lx(y,d,m,b,C,A){const F=[re=>{let ye=re.canonical.x-1,Le=re.wrap;return ye<0&&(ye=(1<<re.canonical.z)-1,Le--),new s.OverscaledTileID(re.overscaledZ,Le,re.canonical.z,ye,re.canonical.y)},re=>{let ye=re.canonical.x+1,Le=re.wrap;return ye===1<<re.canonical.z&&(ye=0,Le++),new s.OverscaledTileID(re.overscaledZ,Le,re.canonical.z,ye,re.canonical.y)},re=>new s.OverscaledTileID(re.overscaledZ,re.wrap,re.canonical.z,re.canonical.x,(re.canonical.y===0?1<<re.canonical.z:re.canonical.y)-1),re=>new s.OverscaledTileID(re.overscaledZ,re.wrap,re.canonical.z,re.canonical.x,re.canonical.y===(1<<re.canonical.z)-1?0:re.canonical.y+1)],z=re=>{const ye=d.getSource().minzoom,Le=He=>{const qe=d.getTileByID(He);if(qe&&qe.hasData())return qe.getBucket(C)},Be=[0,-1,1];for(const He of Be){if(re.overscaledZ+He<ye)continue;const qe=Le(re.calculateScaledKey(re.overscaledZ+He));if(qe)return qe}},V=[0,0,0],Y=(re,ye)=>(V[0]=Math.min(re.min.y,ye.min.y),V[1]=Math.max(re.max.y,ye.max.y),V[2]=s.EXTENT-ye.min.x>re.max.x?ye.min.x-s.EXTENT:re.max.x,V),q=(re,ye)=>(V[0]=Math.min(re.min.x,ye.min.x),V[1]=Math.max(re.max.x,ye.max.x),V[2]=s.EXTENT-ye.min.y>re.max.y?ye.min.y-s.EXTENT:re.max.y,V),ne=[(re,ye)=>Y(re,ye),(re,ye)=>Y(ye,re),(re,ye)=>q(re,ye),(re,ye)=>q(ye,re)],de=new s.Point(0,0);let be,Se,we;const Te=(re,ye,Le,Be,He)=>{const qe=[[Be?Le:re,Be?re:Le,0],[Be?Le:ye,Be?ye:Le,0]],We=He<0?s.EXTENT+He:He,tt=[Be?We:(re+ye)/2,Be?(re+ye)/2:We,0];return Le===0&&He<0||Le!==0&&He>0?A.getForTilePoints(we,[tt],!0,Se):qe.push(tt),A.getForTilePoints(m,qe,!0,be),Math.max(qe[0][2],qe[1][2],tt[2])/A.exaggeration()};for(let re=0;re<4;re++){const ye=(re<2?1:5)-re,Le=b.borders[re];if(Le.length===0)continue;const Be=we=F[re](m),He=z(Be);if(!(He&&He instanceof s.FillExtrusionBucket&&He.enableTerrain)||b.borderDoneWithNeighborZ[re]===He.canonical.z&&He.borderDoneWithNeighborZ[ye]===b.canonical.z||(Se=A.findDEMTileFor(Be),!Se||!Se.dem))continue;if(!be){const Je=A.findDEMTileFor(m);if(!Je||!Je.dem)return;be=Je}const qe=He.borders[ye];let We=0;const tt=He.borderDoneWithNeighborZ[ye]!==b.canonical.z;if(b.canonical.z===He.canonical.z){for(let Je=0;Je<Le.length;Je++){const mt=b.featuresOnBorder[Le[Je]],Xt=mt.borders[re];let ut;for(;We<qe.length&&(ut=He.featuresOnBorder[qe[We]],!(ut.borders[ye][1]>Xt[0]+3));)tt&&He.encodeCentroid(void 0,ut,!1),We++;if(ut&&We<qe.length){const Lt=We;let yt=0;for(;!(ut.borders[ye][0]>Xt[1]-3)&&(yt++,++We!==qe.length);)ut=He.featuresOnBorder[qe[We]];if(ut=He.featuresOnBorder[qe[Lt]],mt.intersectsCount()>1||ut.intersectsCount()>1||yt!==1){yt!==1&&(We=Lt),b.encodeCentroid(void 0,mt,!1),tt&&He.encodeCentroid(void 0,ut,!1);continue}const Wt=ne[re](mt,ut),ft=re%2?s.EXTENT-1:0;de.x=Te(Wt[0],Math.min(s.EXTENT-1,Wt[1]),ft,re<2,Wt[2]),de.y=0,b.encodeCentroid(de,mt,!1),tt&&He.encodeCentroid(de,ut,!1)}else b.encodeCentroid(void 0,mt,!1)}b.borderDoneWithNeighborZ[re]=He.canonical.z,b.needsCentroidUpdate=!0,tt&&(He.borderDoneWithNeighborZ[ye]=b.canonical.z,He.needsCentroidUpdate=!0)}else{for(const Je of Le)b.encodeCentroid(void 0,b.featuresOnBorder[Je],!1);if(tt){for(const Je of qe)He.encodeCentroid(void 0,He.featuresOnBorder[Je],!1);He.borderDoneWithNeighborZ[ye]=b.canonical.z,He.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[re]=He.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(y)}const Td=new s.Color(1,0,0,1),bA=new s.Color(0,1,0,1),xA=new s.Color(0,0,1,1),wA=new s.Color(1,0,1,1),SA=new s.Color(0,1,1,1);function EA(y,d,m){const b=y.context,C=y.transform,A=b.gl,F=C.projection.name==="globe",z=F?["PROJECTION_GLOBE_VIEW"]:null;let V=m.projMatrix;if(F&&s.globeToMercatorTransition(C.zoom)>0){const mt=s.transitionTileAABBinECEF(m.canonical,C),Xt=s.globeDenormalizeECEF(mt);V=s.multiply(new Float32Array(16),C.globeMatrix,Xt),s.multiply(V,C.projMatrix,V)}const Y=y.useProgram("debug",null,z),q=d.getTileByID(m.key);y.terrain&&y.terrain.setupElevationDraw(q,Y);const ne=s.DepthMode.disabled,de=s.StencilMode.disabled,be=y.colorModeForRenderPass(),Se="$debug";b.activeTexture.set(A.TEXTURE0),y.emptyTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),F?q._makeGlobeTileDebugBuffers(y.context,C):q._makeDebugTileBoundsBuffers(y.context,C.projection);const we=q._tileDebugBuffer||y.debugBuffer,Te=q._tileDebugIndexBuffer||y.debugIndexBuffer,re=q._tileDebugSegments||y.debugSegments;Y.draw(b,A.LINE_STRIP,ne,de,be,s.CullFaceMode.disabled,Hp(V,s.Color.red),Se,we,Te,re,null,null,null,[q._globeTileDebugBorderBuffer]);const ye=q.latestRawTileData,Le=Math.floor((ye&&ye.byteLength||0)/1024),Be=d.getTile(m).tileSize,He=512/Math.min(Be,512)*(m.overscaledZ/C.zoom)*.5;let qe=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(qe+=` => ${m.overscaledZ}`),qe+=` ${Le}kb`,function(mt,Xt){mt.initDebugOverlayCanvas();const ut=mt.debugOverlayCanvas,Lt=mt.context.gl,yt=mt.debugOverlayCanvas.getContext("2d");yt.clearRect(0,0,ut.width,ut.height),yt.shadowColor="white",yt.shadowBlur=2,yt.lineWidth=1.5,yt.strokeStyle="white",yt.textBaseline="top",yt.font="bold 36px Open Sans, sans-serif",yt.fillText(Xt,5,5),yt.strokeText(Xt,5,5),mt.debugOverlayTexture.update(ut),mt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(y,qe);const We=q._tileDebugTextBuffer||y.debugBuffer,tt=q._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,Je=q._tileDebugTextSegments||y.debugSegments;Y.draw(b,A.TRIANGLES,ne,de,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,Hp(V,s.Color.transparent,He),Se,We,tt,Je,null,null,null,[q._globeTileDebugTextBuffer])}function Bx(y,d,m,b){Ad(y,0,d+m/2,y.transform.width,m,b)}function Zp(y,d,m,b){Ad(y,d-m/2,0,m,y.transform.height,b)}function Ad(y,d,m,b,C,A){const F=y.context,z=F.gl;z.enable(z.SCISSOR_TEST),z.scissor(d*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,b*s.exported.devicePixelRatio,C*s.exported.devicePixelRatio),F.clear({color:A}),z.disable(z.SCISSOR_TEST)}const Dx=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:kx}=Dx;function Dl(y,d,m,b){y.emplaceBack(d,m,b)}class Kp{constructor(d){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Dl(this.vertexArray,-1,-1,1),Dl(this.vertexArray,1,-1,1),Dl(this.vertexArray,-1,1,1),Dl(this.vertexArray,1,1,1),Dl(this.vertexArray,-1,-1,-1),Dl(this.vertexArray,1,-1,-1),Dl(this.vertexArray,-1,1,-1),Dl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,kx),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function ra(y,d,m,b,C,A){const F=y.gl,z=d.paint.get("sky-atmosphere-color"),V=d.paint.get("sky-atmosphere-halo-color"),Y=d.paint.get("sky-atmosphere-sun-intensity"),q=((ne,de,be,Se,we)=>({u_matrix_3f:ne,u_sun_direction:de,u_sun_intensity:be,u_color_tint_r:[Se.r,Se.g,Se.b,Se.a],u_color_tint_m:[we.r,we.g,we.b,we.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),b),C,Y,z,V);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+A,d.skyboxTexture,0),m.draw(y,F.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,q,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const rh=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Fx{constructor(d){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const b=new s.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(m,rh.members),this.indexBuffer=d.createIndexBuffer(b),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const yu={symbol:function(y,d,m,b,C){if(y.renderPass!=="translucent")return;const A=s.StencilMode.disabled,F=y.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&function(z,V,Y,q,ne,de,be){const Se=V.transform,we=ne==="map",Te=de==="map";for(const re of z){const ye=q.getTile(re),Le=ye.getBucket(Y);if(!Le||!Le.text||!Le.text.segments.get().length)continue;const Be=s.evaluateSizeForZoom(Le.textSizeData,Se.zoom),He=at(re,Le.getProjection(),Se),qe=Se.calculatePixelsToTileUnitsMatrix(ye),We=xt(He,ye.tileID.canonical,Te,we,Se,Le.getProjection(),qe),tt=Y.layout.get("icon-text-fit")!=="none"&&Le.hasIconData();if(Be){const Je=Math.pow(2,Se.zoom-ye.tileID.overscaledZ);_A(Le,we,Te,be,s.symbolSize,Se,We,re,Je,Be,tt)}}}(b,y,m,d,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),C),m.paint.get("icon-opacity").constantOr(1)!==0&&Rx(y,d,m,b,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),A,F),m.paint.get("text-opacity").constantOr(1)!==0&&Rx(y,d,m,b,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),A,F),d.map.showCollisionBoxes&&(th(y,d,m,b,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),th(y,d,m,b,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(y,d,m,b){if(y.renderPass!=="translucent")return;const C=m.paint.get("circle-opacity"),A=m.paint.get("circle-stroke-width"),F=m.paint.get("circle-stroke-opacity"),z=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(C.constantOr(1)===0&&(A.constantOr(1)===0||F.constantOr(1)===0))return;const V=y.context,Y=V.gl,q=y.transform,ne=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),de=s.StencilMode.disabled,be=y.colorModeForRenderPass(),Se=q.projection.name==="globe",we=[s.mercatorXfromLng(q.center.lng),s.mercatorYfromLat(q.center.lat)],Te=[];for(let ye=0;ye<b.length;ye++){const Le=b[ye],Be=d.getTile(Le),He=Be.getBucket(m);if(!He||He.projection.name!==q.projection.name)continue;const qe=He.programConfigurations.get(m.id),We=ty(m);Se&&We.push("PROJECTION_GLOBE_VIEW");const tt=y.useProgram("circle",qe,We),Je=He.layoutVertexBuffer,mt=He.globeExtVertexBuffer,Xt=He.indexBuffer,ut=q.projection.createInversionMatrix(q,Le.canonical),Lt={programConfiguration:qe,program:tt,layoutVertexBuffer:Je,globeExtVertexBuffer:mt,indexBuffer:Xt,uniformValues:ey(y,Le,Be,ut,we,m),tile:Be};if(z){const yt=He.segments.get();for(const Wt of yt)Te.push({segments:new s.SegmentVector([Wt]),sortKey:Wt.sortKey,state:Lt})}else Te.push({segments:He.segments,sortKey:0,state:Lt})}z&&Te.sort((ye,Le)=>ye.sortKey-Le.sortKey);const re={useDepthForOcclusion:!Se};for(const ye of Te){const{programConfiguration:Le,program:Be,layoutVertexBuffer:He,globeExtVertexBuffer:qe,indexBuffer:We,uniformValues:tt,tile:Je}=ye.state,mt=ye.segments;y.terrain&&y.terrain.setupElevationDraw(Je,Be,re),y.prepareDrawProgram(V,Be,Je.tileID.toUnwrapped()),Be.draw(V,Y.TRIANGLES,ne,de,be,s.CullFaceMode.disabled,tt,m.id,He,We,mt,m.paint,q.zoom,Le,[qe])}},heatmap:function(y,d,m,b){if(m.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const C=y.context,A=C.gl,F=s.StencilMode.disabled,z=new s.ColorMode([A.ONE,A.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(be,Se,we,Te){const re=be.gl,ye=Se.width*Te,Le=Se.height*Te;be.activeTexture.set(re.TEXTURE1),be.viewport.set([0,0,ye,Le]);let Be=we.heatmapFbo;if(!Be||Be&&(Be.width!==ye||Be.height!==Le)){Be&&Be.destroy();const He=re.createTexture();re.bindTexture(re.TEXTURE_2D,He),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),Be=we.heatmapFbo=be.createFramebuffer(ye,Le,!1),function(qe,We,tt,Je,mt,Xt){const ut=qe.gl;ut.texImage2D(ut.TEXTURE_2D,0,qe.isWebGL2&&qe.extRenderToTextureHalfFloat?ut.RGBA16F:ut.RGBA,mt,Xt,0,ut.RGBA,qe.extRenderToTextureHalfFloat?qe.isWebGL2?ut.HALF_FLOAT:qe.extTextureHalfFloat.HALF_FLOAT_OES:ut.UNSIGNED_BYTE,null),Je.colorAttachment.set(tt)}(be,0,He,Be,ye,Le)}else re.bindTexture(re.TEXTURE_2D,Be.colorAttachment.get()),be.bindFramebuffer.set(Be.framebuffer)})(C,y,m,y.transform.projection.name==="globe"?.5:.25),C.clear({color:s.Color.transparent});const V=y.transform,Y=V.projection.name==="globe",q=Y?["PROJECTION_GLOBE_VIEW"]:null,ne=Y?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,de=[s.mercatorXfromLng(V.center.lng),s.mercatorYfromLat(V.center.lat)];for(let be=0;be<b.length;be++){const Se=b[be];if(d.hasRenderableParent(Se))continue;const we=d.getTile(Se),Te=we.getBucket(m);if(!Te||Te.projection.name!==V.projection.name)continue;const re=Te.programConfigurations.get(m.id),ye=y.useProgram("heatmap",re,q),{zoom:Le}=y.transform;y.terrain&&y.terrain.setupElevationDraw(we,ye),y.prepareDrawProgram(C,ye,Se.toUnwrapped());const Be=V.projection.createInversionMatrix(V,Se.canonical);ye.draw(C,A.TRIANGLES,s.DepthMode.disabled,F,z,ne,Mx(y,Se,we,Be,de,Le,m.paint.get("heatmap-intensity")),m.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,m.paint,y.transform.zoom,re,Y?[Te.globeExtVertexBuffer]:null)}C.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(C,A){const F=C.context,z=F.gl,V=A.heatmapFbo;if(!V)return;F.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,V.colorAttachment.get()),F.activeTexture.set(z.TEXTURE1);let Y=A.colorRampTexture;Y||(Y=A.colorRampTexture=new s.Texture(F,A.colorRamp,z.RGBA)),Y.bind(z.LINEAR,z.CLAMP_TO_EDGE),C.useProgram("heatmapTexture").draw(F,z.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,C.colorModeForRenderPass(),s.CullFaceMode.disabled,((q,ne,de,be)=>({u_image:0,u_color_ramp:1,u_opacity:ne.paint.get("heatmap-opacity")}))(0,A),A.id,C.viewportBuffer,C.quadTriangleIndexBuffer,C.viewportSegments,A.paint,C.transform.zoom)}(y,m))},line:function(y,d,m,b){if(y.renderPass!=="translucent")return;const C=m.paint.get("line-opacity"),A=m.paint.get("line-width");if(C.constantOr(1)===0||A.constantOr(1)===0)return;const F=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),z=y.colorModeForRenderPass(),V=y.terrain&&y.terrain.renderingToTexture?1:s.exported.devicePixelRatio,Y=m.paint.get("line-dasharray"),q=Y.constantOr(1),ne=m.layout.get("line-cap"),de=m.paint.get("line-pattern"),be=de.constantOr(1),Se=m.paint.get("line-gradient"),we=be?"linePattern":"line",Te=y.context,re=Te.gl,ye=(Be=>{const He=[];eh(Be)&&He.push("RENDER_LINE_DASH"),Be.paint.get("line-gradient")&&He.push("RENDER_LINE_GRADIENT");const qe=Be.paint.get("line-trim-offset");qe[0]===0&&qe[1]===0||He.push("RENDER_LINE_TRIM_OFFSET");const We=Be.paint.get("line-pattern").constantOr(1),tt=Be.paint.get("line-opacity").constantOr(1)!==1;return!We&&tt&&He.push("RENDER_LINE_ALPHA_DISCARD"),He})(m);let Le=ye.includes("RENDER_LINE_ALPHA_DISCARD");y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Le=!1);for(const Be of b){const He=d.getTile(Be);if(be&&!He.patternsLoaded())continue;const qe=He.getBucket(m);if(!qe)continue;y.prepareDrawTile();const We=qe.programConfigurations.get(m.id),tt=y.useProgram(we,We,ye),Je=de.constantOr(null);if(Je&&He.imageAtlas){const It=He.imageAtlas.patternPositions[Je.toString()];It&&We.setConstantPatternPositions(It)}const mt=Y.constantOr(null),Xt=ne.constantOr(null);if(!be&&mt&&Xt&&He.lineAtlas){const It=He.lineAtlas.getDash(mt,Xt);It&&We.setConstantPatternPositions(It)}let[ut,Lt]=m.paint.get("line-trim-offset");(Xt==="round"||Xt==="square")&&ut!==Lt&&(ut===0&&(ut-=1),Lt===1&&(Lt+=1));const yt=y.terrain?Be.projMatrix:null,Wt=be?Qf(y,He,m,yt,V):vA(y,He,m,yt,qe.lineClipsArray.length,V,[ut,Lt]);if(Se){const It=qe.gradients[m.id];let Yt=It.texture;if(m.gradientVersion!==It.version){let $t=256;if(m.stepInterpolant){const Zt=d.getSource().maxzoom,zn=Be.canonical.z===Zt?Math.ceil(1<<y.transform.maxZoom-Be.canonical.z):1;$t=s.clamp(s.nextPowerOfTwo(qe.maxLineLength/s.EXTENT*1024*zn),256,Te.maxTextureSize)}It.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:$t,image:It.gradient||void 0,clips:qe.lineClipsArray}),It.texture?It.texture.update(It.gradient):It.texture=new s.Texture(Te,It.gradient,re.RGBA),It.version=m.gradientVersion,Yt=It.texture}Te.activeTexture.set(re.TEXTURE1),Yt.bind(m.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}q&&(Te.activeTexture.set(re.TEXTURE0),He.lineAtlasTexture.bind(re.LINEAR,re.REPEAT),We.updatePaintBuffers()),be&&(Te.activeTexture.set(re.TEXTURE0),He.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),We.updatePaintBuffers()),y.prepareDrawProgram(Te,tt,Be.toUnwrapped());const ft=It=>{tt.draw(Te,re.TRIANGLES,F,It,z,s.CullFaceMode.disabled,Wt,m.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,m.paint,y.transform.zoom,We,[qe.layoutVertexBuffer2])};if(Le){const It=y.stencilModeForClipping(Be).ref;It===0&&y.terrain&&Te.clear({stencil:0});const Yt={func:re.EQUAL,mask:255};Wt.u_alpha_discard_threshold=.8,ft(new s.StencilMode(Yt,It,255,re.KEEP,re.KEEP,re.INVERT)),Wt.u_alpha_discard_threshold=0,ft(new s.StencilMode(Yt,It,255,re.KEEP,re.KEEP,re.KEEP))}else ft(y.stencilModeForClipping(Be))}Le&&(y.resetStencilClippingMasks(),y.terrain&&Te.clear({stencil:0}))},fill:function(y,d,m,b){const C=m.paint.get("fill-color"),A=m.paint.get("fill-opacity");if(A.constantOr(1)===0)return;const F=y.colorModeForRenderPass(),z=m.paint.get("fill-pattern"),V=y.opaquePassEnabledForLayer()&&!z.constantOr(1)&&C.constantOr(s.Color.transparent).a===1&&A.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===V){const Y=y.depthModeForSublayer(1,y.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Ox(y,d,m,b,Y,F,!1)}if(y.renderPass==="translucent"&&m.paint.get("fill-antialias")){const Y=y.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Ox(y,d,m,b,Y,F,!0)}},"fill-extrusion":function(y,d,m,b){const C=m.paint.get("fill-extrusion-opacity");if(C!==0&&y.renderPass==="translucent"){const A=new s.DepthMode(y.context.gl.LEQUAL,s.DepthMode.ReadWrite,y.depthRangeFor3D);if(C!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Yp(y,d,m,b,A,s.StencilMode.disabled,s.ColorMode.disabled),Yp(y,d,m,b,A,y.stencilModeFor3D(),y.colorModeForRenderPass()),y.resetStencilClippingMasks();else{const F=y.colorModeForRenderPass();Yp(y,d,m,b,A,s.StencilMode.disabled,F)}}},hillshade:function(y,d,m,b){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const C=y.context,A=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),F=y.colorModeForRenderPass(),z=y.terrain&&y.terrain.renderingToTexture,[V,Y]=y.renderPass!=="translucent"||z?[{},b]:y.stencilConfigForOverlap(b);for(const q of Y){const ne=d.getTile(q);if(ne.needsHillshadePrepare&&y.renderPass==="offscreen")Sx(y,ne,m,A,s.StencilMode.disabled,F);else if(y.renderPass==="translucent"){const de=z&&y.terrain?y.terrain.stencilModeForRTTOverlap(q):V[q.overscaledZ];wx(y,q,ne,m,A,de,F)}}C.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,d,m,b,C,A){if(y.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!b.length)return;const F=y.context,z=F.gl,V=d.getSource(),Y=y.useProgram("raster"),q=y.colorModeForRenderPass(),ne=y.terrain&&y.terrain.renderingToTexture,[de,be]=V instanceof vt||ne?[{},b]:y.stencilConfigForOverlap(b),Se=be[be.length-1].overscaledZ,we=!y.options.moving;for(const Te of be){const re=ne?s.DepthMode.disabled:y.depthModeForSublayer(Te.overscaledZ-Se,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,z.LESS),ye=Te.toUnwrapped(),Le=d.getTile(Te);if(ne&&(!Le||!Le.hasData()))continue;const Be=ne?Te.projMatrix:y.transform.calculateProjMatrix(ye,we),He=y.terrain&&ne?y.terrain.stencilModeForRTTOverlap(Te):de[Te.overscaledZ],qe=A?0:m.paint.get("raster-fade-duration");Le.registerFadeDuration(qe);const We=d.findLoadedParent(Te,0),tt=Yv(Le,We,d,y.transform,qe);let Je,mt;y.terrain&&y.terrain.prepareDrawTile();const Xt=m.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;F.activeTexture.set(z.TEXTURE0),Le.texture.bind(Xt,z.CLAMP_TO_EDGE),F.activeTexture.set(z.TEXTURE1),We?(We.texture.bind(Xt,z.CLAMP_TO_EDGE),Je=Math.pow(2,We.tileID.overscaledZ-Le.tileID.overscaledZ),mt=[Le.tileID.canonical.x*Je%1,Le.tileID.canonical.y*Je%1]):Le.texture.bind(Xt,z.CLAMP_TO_EDGE),Le.texture.useMipmap&&F.extTextureFilterAnisotropic&&y.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const ut=iy(Be,mt||[0,0],Je||1,tt,m,V instanceof vt?V.perspectiveTransform:[0,0]);if(y.prepareDrawProgram(F,Y,ye),V instanceof vt)V.boundsBuffer&&V.boundsSegments&&Y.draw(F,z.TRIANGLES,re,s.StencilMode.disabled,q,s.CullFaceMode.disabled,ut,m.id,V.boundsBuffer,y.quadTriangleIndexBuffer,V.boundsSegments);else{const{tileBoundsBuffer:Lt,tileBoundsIndexBuffer:yt,tileBoundsSegments:Wt}=y.getTileBoundsBuffers(Le);Y.draw(F,z.TRIANGLES,re,He,q,s.CullFaceMode.disabled,ut,m.id,Lt,yt,Wt)}}y.resetStencilClippingMasks()},background:function(y,d,m,b){const C=m.paint.get("background-color"),A=m.paint.get("background-opacity");if(A===0)return;const F=y.context,z=F.gl,V=y.transform,Y=V.tileSize,q=m.paint.get("background-pattern");if(y.isPatternMissing(q))return;const ne=!q&&C.a===1&&A===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ne)return;const de=s.StencilMode.disabled,be=y.depthModeForSublayer(0,ne==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),Se=y.colorModeForRenderPass(),we=y.useProgram(q?"backgroundPattern":"background");let Te,re=b;re||(Te=y.getBackgroundTiles(),re=Object.values(Te).map(ye=>ye.tileID)),q&&(F.activeTexture.set(z.TEXTURE0),y.imageManager.bind(y.context));for(const ye of re){const Le=ye.toUnwrapped(),Be=b?ye.projMatrix:y.transform.calculateProjMatrix(Le);y.prepareDrawTile();const He=d?d.getTile(ye):Te?Te[ye.key]:new s.Tile(ye,Y,V.zoom,y),qe=q?yA(Be,A,y,q,{tileID:ye,tileSize:Y}):sy(Be,A,C);y.prepareDrawProgram(F,we,Le);const{tileBoundsBuffer:We,tileBoundsIndexBuffer:tt,tileBoundsSegments:Je}=y.getTileBoundsBuffers(He);we.draw(F,z.TRIANGLES,be,de,Se,s.CullFaceMode.disabled,qe,m.id,We,tt,Je)}},sky:function(y,d,m){const b=y.transform,C=b.projection.name==="mercator"||b.projection.name==="globe"?1:s.smoothstep(7,8,b.zoom),A=m.paint.get("sky-opacity")*C;if(A===0)return;const F=y.context,z=m.paint.get("sky-type"),V=new s.DepthMode(F.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),Y=y.frameCounter/1e3%1;z==="atmosphere"?y.renderPass==="offscreen"?m.needsSkyboxCapture(y)&&(function(q,ne,de,be){const Se=q.context,we=Se.gl;let Te=ne.skyboxFbo;if(!Te){Te=ne.skyboxFbo=Se.createFramebuffer(32,32,!1),ne.skyboxGeometry=new Kp(Se),ne.skyboxTexture=Se.gl.createTexture(),we.bindTexture(we.TEXTURE_CUBE_MAP,ne.skyboxTexture),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_CUBE_MAP,we.TEXTURE_MAG_FILTER,we.LINEAR);for(let Be=0;Be<6;++Be)we.texImage2D(we.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,we.RGBA,32,32,0,we.RGBA,we.UNSIGNED_BYTE,null)}Se.bindFramebuffer.set(Te.framebuffer),Se.viewport.set([0,0,32,32]);const re=ne.getCenter(q,!0),ye=q.useProgram("skyboxCapture"),Le=new Float64Array(16);s.identity(Le),s.rotateY(Le,Le,.5*-Math.PI),ra(Se,ne,ye,Le,re,0),s.identity(Le),s.rotateY(Le,Le,.5*Math.PI),ra(Se,ne,ye,Le,re,1),s.identity(Le),s.rotateX(Le,Le,.5*-Math.PI),ra(Se,ne,ye,Le,re,2),s.identity(Le),s.rotateX(Le,Le,.5*Math.PI),ra(Se,ne,ye,Le,re,3),s.identity(Le),ra(Se,ne,ye,Le,re,4),s.identity(Le),s.rotateY(Le,Le,Math.PI),ra(Se,ne,ye,Le,re,5),Se.viewport.set([0,0,q.width,q.height])}(y,m),m.markSkyboxValid(y)):y.renderPass==="sky"&&function(q,ne,de,be,Se){const we=q.context,Te=we.gl,re=q.transform,ye=q.useProgram("skybox");we.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_CUBE_MAP,ne.skyboxTexture);const Le=((Be,He,qe,We,tt)=>({u_matrix:Be,u_sun_direction:He,u_cubemap:0,u_opacity:We,u_temporal_offset:tt}))(re.skyboxMatrix,ne.getCenter(q,!1),0,be,Se);q.prepareDrawProgram(we,ye),ye.draw(we,Te.TRIANGLES,de,s.StencilMode.disabled,q.colorModeForRenderPass(),s.CullFaceMode.backCW,Le,"skybox",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)}(y,m,V,A,Y):z==="gradient"&&y.renderPass==="sky"&&function(q,ne,de,be,Se){const we=q.context,Te=we.gl,re=q.transform,ye=q.useProgram("skyboxGradient");ne.skyboxGeometry||(ne.skyboxGeometry=new Kp(we)),we.activeTexture.set(Te.TEXTURE0);let Le=ne.colorRampTexture;Le||(Le=ne.colorRampTexture=new s.Texture(we,ne.colorRamp,Te.RGBA)),Le.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const Be=((He,qe,We,tt,Je)=>({u_matrix:He,u_color_ramp:0,u_center_direction:qe,u_radius:s.degToRad(We),u_opacity:tt,u_temporal_offset:Je}))(re.skyboxMatrix,ne.getCenter(q,!1),ne.paint.get("sky-gradient-radius"),be,Se);q.prepareDrawProgram(we,ye),ye.draw(we,Te.TRIANGLES,de,s.StencilMode.disabled,q.colorModeForRenderPass(),s.CullFaceMode.backCW,Be,"skyboxGradient",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)}(y,m,V,A,Y)},debug:function(y,d,m){for(let b=0;b<m.length;b++)EA(y,d,m[b])},custom:function(y,d,m,b){const C=y.context,A=m.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&m.isLayerDraped()){if(y.renderPass==="offscreen"){const F=A.prerender;if(F){if(y.setCustomLayerDefaults(),C.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const z=y.transform.pointMerc;F.call(A,C.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(y.transform.zoom),[z.x,z.y],y.transform.pixelsPerMeterRatio)}else F.call(A,C.gl,y.transform.customLayerMatrix());C.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const z=A.renderToTile;if(z){const V=b[0].canonical,Y=new s.MercatorCoordinate(V.x+b[0].wrap*(1<<V.z),V.y,V.z);C.setDepthMode(s.DepthMode.disabled),C.setStencilMode(s.StencilMode.disabled),C.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),z.call(A,C.gl,Y),C.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),C.setColorMode(y.colorModeForRenderPass()),C.setStencilMode(s.StencilMode.disabled);const F=A.renderingMode==="3d"?new s.DepthMode(y.context.gl.LEQUAL,s.DepthMode.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(C.setDepthMode(F),y.transform.projection.name==="globe"){const z=y.transform.pointMerc;A.render(C.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(y.transform.zoom),[z.x,z.y],y.transform.pixelsPerMeterRatio)}else A.render(C.gl,y.transform.customLayerMatrix());C.setDirty(),y.setBaseState(),C.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Md{constructor(d,m,b=!1){this.context=new et(d,b),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,m){const b=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Kv(this,d));const C=this._terrain;this.transform.elevation=b?C:null,C.update(d,this.transform,m)}_updateFog(d){const m=d.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,C]=m.getFovAdjustedRange(this.transform._fov);if(b>C)return void(this.transform.fogCullDistSq=null);const A=b+.78*(C-b);this.transform.fogCullDistSq=A*A}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,m){if(this.width=d*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const d=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const b=new s.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(s.EXTENT,0),b.emplaceBack(0,s.EXTENT),b.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=d.createVertexBuffer(b,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const C=new s.StructArrayLayout2i4;C.emplaceBack(-1,-1),C.emplaceBack(1,-1),C.emplaceBack(-1,1),C.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(C,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const A=new s.StructArrayLayout4i8;A.emplaceBack(0,0,0,0),A.emplaceBack(s.EXTENT,0,s.EXTENT,0),A.emplaceBack(0,s.EXTENT,0,s.EXTENT),A.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(A,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const F=new s.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(F);const z=new s.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])z.emplaceBack(Y);this.debugIndexBuffer=d.createIndexBuffer(z),this.emptyTexture=new s.Texture(d,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=s.create();const V=this.context.gl;this.stencilClearMode=new s.StencilMode({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Fx(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,m=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Kf(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,m,b){if(!m||this.currentStencilSource===m.id||!d.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const V of b)if(this._tileClippingMaskIDs[V.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=m.id;const C=this.context,A=C.gl;this.nextStencilID+b.length>256&&this.clearStencil(),C.setColorMode(s.ColorMode.disabled),C.setDepthMode(s.DepthMode.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of b){const V=m.getTile(z),Y=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:ne,tileBoundsSegments:de}=this.getTileBoundsBuffers(V);F.draw(C,A.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:A.ALWAYS,mask:0},Y,255,A.KEEP,A.KEEP,A.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Kf(z.projMatrix),"$clipping",q,ne,de)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},d,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(d){const m=this.context.gl,b=d.sort((F,z)=>z.overscaledZ-F.overscaledZ),C=b[b.length-1].overscaledZ,A=b[0].overscaledZ-C+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const F={};for(let z=0;z<A;z++)F[z+C]=new s.StencilMode({func:m.GEQUAL,mask:255},z+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=A,[F,b]}return[{[C]:s.StencilMode.disabled},b]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([d.CONSTANT_COLOR,d.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(d,m,b){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new s.DepthMode(b||this.context.gl.LEQUAL,m,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,m){this.style=d,this.options=m,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const b=this.style.order,C=this.style._sourceCaches;for(const Y in C){const q=C[Y];q.used&&q.prepare(this.context)}const A={},F={},z={};for(const Y in C){const q=C[Y];A[Y]=q.getVisibleCoordinates(),F[Y]=A[Y].slice().reverse(),z[Y]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<b.length;Y++)if(this.style._layers[b[Y]].is3D()){this.opaquePassCutoff=Y;break}if(this.terrain&&(this.terrain.updateTileBinding(z),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const Y of b){const q=this.style._layers[Y],ne=d._getLayerSourceCache(q);if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const de=ne?F[ne.id]:void 0;(q.type==="custom"||q.isSky()||de&&de.length)&&this.renderLayer(this,ne,q,de)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const V=this.terrain;if(V&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&V.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[b[this.currentLayer]],q=d._getLayerSourceCache(Y);if(Y.isSky())continue;const ne=q?F[q.id]:void 0;this._renderTileClippingMasks(Y,q,ne),this.renderLayer(this,q,Y,ne)}if(this.style.fog&&this.transform.projection.supportsFog&&function(Y,q){const ne=Y.context,de=ne.gl,be=Y.transform,Se=new s.DepthMode(de.LEQUAL,s.DepthMode.ReadOnly,[0,1]),we=Y.useProgram("globeAtmosphere",null,be.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Te=s.globeToMercatorTransition(be.zoom),re=q.properties.get("color").toArray01(),ye=q.properties.get("high-color").toArray01(),Le=q.properties.get("space-color").toArray01PremultipliedAlpha(),Be=s.identity$1([]);s.rotateY$1(Be,Be,-s.degToRad(be._center.lng)),s.rotateX$1(Be,Be,s.degToRad(be._center.lat)),s.rotateZ$1(Be,Be,be.angle),s.rotateX$1(Be,Be,-be._pitch);const He=s.fromQuat(new Float32Array(16),Be),qe=s.mapValue(q.properties.get("star-intensity"),0,1,0,.25),We=5e-4,tt=s.mapValue(q.properties.get("horizon-blend"),0,1,We,.25),Je=s.globeUseCustomAntiAliasing(Y,ne,be)&&tt===We?be.worldSize/(2*Math.PI*1.025)-1:be.globeRadius,mt=Y.frameCounter/1e3%1,Xt=s.length(be.globeCenterInViewSpace),ut=Math.sqrt(Math.pow(Xt,2)-Math.pow(Je,2)),Lt=Math.acos(ut/Xt),yt=((ft,It,Yt,$t,Zt,zn,lr,Tn,qn,Tr,Cr,Dn,ti,li)=>({u_frustum_tl:ft,u_frustum_tr:It,u_frustum_br:Yt,u_frustum_bl:$t,u_horizon:Zt,u_transition:zn,u_fadeout_range:lr,u_color:Tn,u_high_color:qn,u_space_color:Tr,u_star_intensity:Cr,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Dn,u_horizon_angle:ti,u_rotation_matrix:li}))(be.frustumCorners.TL,be.frustumCorners.TR,be.frustumCorners.BR,be.frustumCorners.BL,be.frustumCorners.horizon,Te,tt,re,ye,Le,qe,mt,Lt,He);Y.prepareDrawProgram(ne,we);const Wt=Y.atmosphereBuffer;Wt&&we.draw(ne,de.TRIANGLES,Se,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,yt,"skybox",Wt.vertexBuffer,Wt.indexBuffer,Wt.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Y=this.style._layers[b[this.currentLayer]],q=d._getLayerSourceCache(Y);Y.isSky()&&this.renderLayer(this,q,Y,q?F[q.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const Y=this.style._layers[b[this.currentLayer]],q=d._getLayerSourceCache(Y);if(Y.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Y)){if(Y.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ne=q?(Y.type==="symbol"?z:F)[q.id]:void 0;this._renderTileClippingMasks(Y,q,q?A[q.id]:void 0),this.renderLayer(this,q,Y,ne),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Y=null;s.values(this.style._layers).forEach(q=>{const ne=d._getLayerSourceCache(q);ne&&!q.isHidden(this.transform.zoom)&&(!Y||Y.getSource().maxzoom<ne.getSource().maxzoom)&&(Y=ne)}),Y&&this.options.showTileBoundaries&&yu.debug(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&function(Y){const q=Y.transform.padding;Bx(Y,Y.transform.height-(q.top||0),3,Td),Bx(Y,q.bottom||0,3,bA),Zp(Y,q.left||0,3,xA),Zp(Y,Y.transform.width-(q.right||0),3,wA);const ne=Y.transform.centerPoint;(function(de,be,Se,we){Ad(de,be-1,Se-10,2,20,we),Ad(de,be-10,Se-1,20,2,we)})(Y,ne.x,Y.transform.height-ne.y,SA)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,m,b,C){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||C&&C.length)&&(this.id=b.id,this.gpuTimingStart(b),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(b.type)||d.terrain&&b.type==="custom")&&yu[b.type](d,m,b,C,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let b=this.gpuTimers[d.id];b||(b=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),b.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,m=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),d.beginQueryEXT(d.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const m={};for(const b in d){const C=d[b],A=this.context.extTimerQuery,F=A.getQueryObjectEXT(C.query,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(C.query),m[b]=F}return m}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let b=0;for(const C of d)b+=m.getQueryObjectEXT(C,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(C);return b}translatePosMatrix(d,m,b,C,A){if(!b[0]&&!b[1])return d;const F=A?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(F){const Y=Math.sin(F),q=Math.cos(F);b=[b[0]*q-b[1]*Y,b[0]*Y+b[1]*q]}const z=[A?b[0]:ze(m,b[0],this.transform.zoom),A?b[1]:ze(m,b[1],this.transform.zoom),0],V=new Float32Array(16);return s.translate(V,d,z),V}saveTileTexture(d){const m=this._tileTextures[d.size[0]];m?m.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const m=this._tileTextures[d];return m&&m.length>0?m.pop():null}isPatternMissing(d){return d===null||d!==void 0&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,b=this.style&&this.style.fog,C=[];return this.terrainRenderModeElevated()&&C.push("TERRAIN"),this.transform.projection.name==="globe"&&C.push("GLOBE"),m&&C.push("ZERO_EXAGGERATION"),b&&!d&&b.getOpacity(this.transform.pitch)!==0&&C.push("FOG"),d&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}useProgram(d,m,b){this.cache=this.cache||{};const C=b||[],A=this.currentGlobalDefines().concat(C),F=Br.cacheKey(Hv[d],d,A,m);return this.cache[F]||(this.cache[F]=new Br(this.context,d,Hv[d],m,ay[d],A)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,m,b){if(this.terrain&&this.terrain.renderingToTexture)return;const C=this.style.fog;if(C){const A=C.getOpacity(this.transform.pitch),F=((z,V,Y,q,ne,de,be,Se,we,Te,re)=>{const ye=z.transform,Le=V.properties.get("color").toArray01();Le[3]=q;const Be=z.frameCounter/1e3%1;return{u_fog_matrix:Y?ye.calculateFogTileMatrix(Y):z.identityMat,u_fog_range:V.getFovAdjustedRange(ye._fov),u_fog_color:Le,u_fog_horizon_blend:V.properties.get("horizon-blend"),u_fog_temporal_offset:Be,u_frustum_tl:ne,u_frustum_tr:de,u_frustum_br:be,u_frustum_bl:Se,u_globe_pos:we,u_globe_radius:Te,u_viewport:re,u_globe_transition:s.globeToMercatorTransition(ye.zoom),u_is_globe:+(ye.projection.name==="globe")}})(this,C,b,A,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(d,F)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,m=d.createTexture();return d.bindTexture(d.TEXTURE_2D,m),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&d.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const d=this._backgroundTiles,m=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const C of b)m[C.key]=d[C.key]||new s.Tile(C,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class Jp{constructor(d=0,m=0,b=0,C=0){if(isNaN(d)||d<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=m,this.left=b,this.right=C}interpolate(d,m,b){return m.top!=null&&d.top!=null&&(this.top=s.number(d.top,m.top,b)),m.bottom!=null&&d.bottom!=null&&(this.bottom=s.number(d.bottom,m.bottom,b)),m.left!=null&&d.left!=null&&(this.left=s.number(d.left,m.left,b)),m.right!=null&&d.right!=null&&(this.right=s.number(d.right,m.right,b)),this}getCenter(d,m){const b=s.clamp((this.left+d-this.right)/2,0,d),C=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.Point(b,C)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Jp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Qp(y,d){const m=s.getColumn(y,3);s.fromQuat(y,d),s.setColumn(y,3,m)}function Nr(y,d){const m=s.identity$1([]);return s.rotateZ$1(m,m,-d),s.rotateX$1(m,m,-y),m}function ih(y,d){const m=[y[0],y[1],0],b=[d[0],d[1],0];if(s.length(m)>=1e-15){const F=s.normalize([],m);s.scale$2(b,F,s.dot(b,F)),d[0]=b[0],d[1]=b[1]}const C=s.cross([],d,y);if(s.len(C)<1e-15)return null;const A=Math.atan2(-C[1],C[0]);return Nr(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),A)}class zx{constructor(d,m){this.position=d,this.orientation=m}get position(){return this._position}set position(d){if(d){const m=d instanceof s.MercatorCoordinate?d:new s.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(d,m){if(this.orientation=null,!this.position)return;const b=this.position,C=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(d)):0,A=s.MercatorCoordinate.fromLngLat(d,C),F=[A.x-b.x,A.y-b.y,A.z-b.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=ih(F,m)}setPitchBearing(d,m){this.orientation=Nr(s.degToRad(d),s.degToRad(-m))}}class em{constructor(d,m){this._transform=s.identity([]),this.orientation=m,this.position=d}get mercatorPosition(){const d=this.position;return new s.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=s.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var m;d&&s.setColumn(this._transform,3,[(m=d)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||s.identity$1([]),d&&Qp(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,m){this._orientation=Nr(d,m),Qp(this._transform,this._orientation)}forward(){const d=s.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=s.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=s.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,m){const b=new Float64Array(16);return s.invert(b,this.getWorldToCamera(d,m)),b}getWorldToCameraPosition(d,m,b){const C=this.position;s.scale$2(C,C,-d);const A=new Float64Array(16);return s.fromScaling(A,[b,b,b]),s.translate(A,A,C),A[10]*=m,A}getWorldToCamera(d,m){const b=new Float64Array(16),C=new Float64Array(4),A=this.position;return s.conjugate(C,this._orientation),s.scale$2(A,A,-d),s.fromQuat(b,C),s.translate(b,b,A),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=m,b[9]*=m,b[10]*=m,b[11]*=m,b}getCameraToClipPerspective(d,m,b,C){const A=new Float64Array(16);return s.perspective(A,d,m,b,C),A}getDistanceToElevation(d,m=!1){const b=d===0?0:s.mercatorZfromAltitude(d,m?s.latFromMercatorY(this.position[1]):this.position[1]),C=this.forward();return(b-this.position[2])/C[2]}clone(){return new em([...this.position],[...this.orientation])}}function Pd(y,d){const m=tm(y.projection,y.zoom,y.width,y.height),b=function(A,F,z,V,Y){const q=new s.LngLat(z.lng-180*kl,z.lat),ne=new s.LngLat(z.lng+180*kl,z.lat),de=A.project(q.lng,q.lat),be=A.project(ne.lng,ne.lat),Se=-Math.atan2(be.y-de.y,be.x-de.x),we=s.MercatorCoordinate.fromLngLat(z);we.y=s.clamp(we.y,-1+kl,1-kl);const Te=we.toLngLat(),re=A.project(Te.lng,Te.lat),ye=s.MercatorCoordinate.fromLngLat(Te);ye.x+=kl;const Le=ye.toLngLat(),Be=A.project(Le.lng,Le.lat),He=nm(Be.x-re.x,Be.y-re.y,Se),qe=s.MercatorCoordinate.fromLngLat(Te);qe.y+=kl;const We=qe.toLngLat(),tt=A.project(We.lng,We.lat),Je=nm(tt.x-re.x,tt.y-re.y,Se),mt=Math.abs(He.x)/Math.abs(Je.y),Xt=s.identity([]);s.rotateZ(Xt,Xt,-Se*(1-(Y?0:V)));const ut=s.identity([]);return s.scale(ut,ut,[1,1-(1-mt)*V,1]),ut[4]=-Je.x/Je.y*V,s.rotateZ(ut,ut,Se),s.multiply(ut,Xt,ut),ut}(y.projection,0,y.center,m,d),C=Nx(y);return s.scale(b,b,[C,C,1]),b}function Nx(y){const d=y.projection,m=tm(y.projection,y.zoom,y.width,y.height),b=$x(d,y.center),C=$x(d,s.LngLat.convert(d.center));return Math.pow(2,b*m+(1-m)*C)}function tm(y,d,m,b,C=1/0){const A=y.range;if(!A)return 0;const F=Math.min(C,Math.max(m,b)),z=Math.log(F/1024)/Math.LN2;return s.smoothstep(A[0]+z,A[1]+z,d)}const kl=1/4e4;function $x(y,d){const m=s.clamp(d.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),b=new s.LngLat(d.lng-180*kl,m),C=new s.LngLat(d.lng+180*kl,m),A=y.project(b.lng,m),F=y.project(C.lng,m),z=s.MercatorCoordinate.fromLngLat(b),V=s.MercatorCoordinate.fromLngLat(C),Y=F.x-A.x,q=F.y-A.y,ne=V.x-z.x,de=V.y-z.y,be=Math.sqrt((ne*ne+de*de)/(Y*Y+q*q));return Math.log(be)/Math.LN2}function nm(y,d,m){const b=Math.cos(m),C=Math.sin(m);return{x:y*b-d*C,y:y*C+d*b}}class Id{constructor(d,m,b,C,A,F,z){this.tileSize=512,this._renderWorldCopies=A===void 0||A,this._minZoom=d||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=C??60,this.setProjection(F),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Jp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new em,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new Id(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,m=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||b)&&this._updateCameraOnTerrain(),(d||b)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const b=!p(m,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=d!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const m=-d*Math.PI/180;var b;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(b=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(C,A,F){var z=A[0],V=A[1],Y=A[2],q=A[3],ne=Math.sin(F),de=Math.cos(F);C[0]=z*de+Y*ne,C[1]=V*de+q*ne,C[2]=z*-ne+Y*de,C[3]=V*-ne+q*de}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const m=s.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=s.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const m=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let C=0,A=0;for(let F=0;F<m.length;F++){const z=new s.Point(m[F][0]*this.width,b+m[F][1]*(this.height-b)),V=d.pointCoordinate(z);if(!V)continue;const Y=1/Math.hypot(V[0]-this._camera.position[0],V[1]-this._camera.position[1]);C+=V[3]*Y,A+=Y}return A===0?NaN:C/A}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const d=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*m,C=this._mercatorZfromZoom(d),A=this._mercatorZfromZoom(this._maxZoom),F=Math.max(C-b,A);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let b;b=d.z<this._camera.position[2]?[m.x,m.y,m.z]:[d.x,d.y,d.z];const C=s.length(s.sub([],this._camera.position,b));return s.clamp(this._zoomFromMercatorZ(C),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let m=!1;if(d.orientation&&!s.exactEquals(d.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(d.orientation)),d.position){const b=[d.position.x,d.position.y,d.position.z];s.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,m=new zx;return m.position=new s.MercatorCoordinate(d[0],d[1],d[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(d){if(!s.length$1(d))return!1;s.normalize$1(d,d);const m=s.transformQuat([],[0,0,-1],d),b=s.transformQuat([],[0,-1,0],d);if(b[2]<0)return!1;const C=ih(m,b);return!!C&&(this._camera.orientation=C,!0)}_setCameraPosition(d){const m=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,C=this.cameraToCenterDistance;d[2]=s.clamp(d[2],C/b,C/m),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,m,b){this._unmodified=!1,this._edgeInsets.interpolate(d,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const m=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(d){const m=[new s.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const b=this.pointCoordinate(new s.Point(0,0)),C=this.pointCoordinate(new s.Point(this.width,0)),A=this.pointCoordinate(new s.Point(this.width,this.height)),F=this.pointCoordinate(new s.Point(0,this.height)),z=Math.floor(Math.min(b.x,C.x,A.x,F.x)),V=Math.floor(Math.max(b.x,C.x,A.x,F.x)),Y=1;for(let q=z-Y;q<=V+Y;q++)q!==0&&m.push(new s.UnwrappedTileID(q,d))}return m}coveringTiles(d){let m=this.coveringZoomLevel(d);const b=m,C=this.elevation&&!d.isTerrainDEM,A=this.projection.name==="mercator";if(d.minzoom!==void 0&&m<d.minzoom)return[];d.maxzoom!==void 0&&m>d.maxzoom&&(m=d.maxzoom);const F=this.locationCoordinate(this.center),z=this.center.lat,V=1<<m,Y=[V*F.x,V*F.y,0],q=this.projection.name==="globe",ne=!q,de=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ne),be=q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=V*s.mercatorZfromAltitude(1,this.center.lat),we=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Te=[V*be.x,V*be.y,we*(ne?1:Se)],re=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Le=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Be=d.isTerrainDEM?-Le:this._elevation?this._elevation.getMinElevationBelowMSL():0,He=this.projection.isReprojectedInTileSpace?Nx(this):1,qe=ft=>{const Yt=new s.MercatorCoordinate(ft.x+25e-6,ft.y,ft.z),$t=new s.MercatorCoordinate(ft.x,ft.y+25e-6,ft.z),Zt=ft.toLngLat(),zn=Yt.toLngLat(),lr=$t.toLngLat(),Tn=this.locationCoordinate(Zt),qn=this.locationCoordinate(zn),Tr=this.locationCoordinate(lr),Cr=Math.hypot(qn.x-Tn.x,qn.y-Tn.y),Dn=Math.hypot(Tr.x-Tn.x,Tr.y-Tn.y);return Math.sqrt(Cr*Dn)*He/25e-6},We=ft=>{const It=Le,Yt=Be;return{aabb:s.tileAABB(this,V,0,0,0,ft,Yt,It,this.projection),zoom:0,x:0,y:0,minZ:Yt,maxZ:It,wrap:ft,fullyVisible:!1}},tt=[];let Je=[];const mt=m,Xt=d.reparseOverscaled?b:m,ut=ft=>ft*ft,Lt=ut((we-this._centerAltitude)*Se),yt=ft=>{if(!this._elevation||!ft.tileID||!A)return;const It=this._elevation.getMinMaxForTile(ft.tileID),Yt=ft.aabb;It?(Yt.min[2]=It.min,Yt.max[2]=It.max,Yt.center[2]=(Yt.min[2]+Yt.max[2])/2):(ft.shouldSplit=Wt(ft),ft.shouldSplit||(Yt.min[2]=Yt.max[2]=Yt.center[2]=this._centerAltitude))},Wt=ft=>{if(ft.zoom<ye)return!0;if(ft.zoom===mt)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const It=ft.aabb.distanceX(Te),Yt=ft.aabb.distanceY(Te);let $t=Lt,Zt=1;if(q){$t=ut(ft.aabb.distanceZ(Te));const Tn=Math.pow(2,ft.zoom),qn=s.latFromMercatorY((ft.y+1)/Tn),Tr=s.latFromMercatorY(ft.y/Tn),Cr=Math.min(Math.max(z,qn),Tr),Dn=s.circumferenceAtLatitude(Cr)/s.circumferenceAtLatitude(z);if(Zt=Cr===z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Dn/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ft.zoom===mt-1&&Dn>=.9)return!0}else if(C&&($t=ut(ft.aabb.distanceZ(Te)*Se)),this.projection.isReprojectedInTileSpace&&b<=5){const Tn=Math.pow(2,ft.zoom),qn=qe(new s.MercatorCoordinate((ft.x+.5)/Tn,(ft.y+.5)/Tn));Zt=qn>.85?1:qn}const zn=It*It+Yt*Yt+$t,lr=ut((1<<mt-ft.zoom)*re*Zt*((Tn,qn)=>{if(qn*ut(.707)<Tn)return 1;const Tr=Math.sqrt(qn/Tn);return Tr/(1.4144271570014144+(Math.pow(1.1,Tr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max($t,Lt),zn));return zn<lr};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)tt.push(We(-ft)),tt.push(We(ft));for(tt.push(We(0));tt.length>0;){const ft=tt.pop(),It=ft.x,Yt=ft.y;let $t=ft.fullyVisible;if(!$t){const Zt=ft.aabb.intersects(de);if(Zt===0)continue;$t=Zt===2}if(ft.zoom!==mt&&Wt(ft))for(let Zt=0;Zt<4;Zt++){const zn=(It<<1)+Zt%2,lr=(Yt<<1)+(Zt>>1),Tn={aabb:A?ft.aabb.quadrant(Zt):s.tileAABB(this,V,ft.zoom+1,zn,lr,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:zn,y:lr,wrap:ft.wrap,fullyVisible:$t,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};C&&!q&&(Tn.tileID=new s.OverscaledTileID(ft.zoom+1===mt?Xt:ft.zoom+1,ft.wrap,ft.zoom+1,zn,lr),yt(Tn)),tt.push(Tn)}else{const Zt=ft.zoom===mt?Xt:ft.zoom;if(d.minzoom&&d.minzoom>Zt)continue;const zn=Y[0]-(.5+It+(ft.wrap<<ft.zoom))*(1<<m-ft.zoom),lr=Y[1]-.5-Yt,Tn=ft.tileID?ft.tileID:new s.OverscaledTileID(Zt,ft.wrap,ft.zoom,It,Yt);Je.push({tileID:Tn,distanceSq:zn*zn+lr*lr})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,It=this.horizonLineFromTop();Je=Je.filter(Yt=>{const $t=[0,0,0,1],Zt=[s.EXTENT,s.EXTENT,0,1],zn=this.calculateFogTileMatrix(Yt.tileID.toUnwrapped());s.transformMat4$1($t,$t,zn),s.transformMat4$1(Zt,Zt,zn);const lr=s.getAABBPointSquareDist($t,Zt);if(lr===0)return!0;let Tn=!1;const qn=this._elevation;if(qn&&lr>ft&&It!==0){const Tr=this.calculateProjMatrix(Yt.tileID.toUnwrapped());let Cr;d.isTerrainDEM||(Cr=qn.getMinMaxForTile(Yt.tileID)),Cr||(Cr={min:Be,max:Le});const Dn=s.furthestTileCorner(this.rotation),ti=[Dn[0]*s.EXTENT,Dn[1]*s.EXTENT,Cr.max];s.transformMat4(ti,ti,Tr),Tn=(1-ti[1])*this.height*.5<It}return lr<ft||Tn})}return Je.sort((ft,It)=>ft.distanceSq-It.distanceSq).map(ft=>ft.tileID)}resize(d,m){this.width=d,this.height=m,this.pixelsToGLUnits=[2/d,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const m=s.clamp(d.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),b=this.projection.project(d.lng,m);return new s.Point(b.x*this.worldSize,b.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,m){let b,C;const A=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;b=(m.x-A.x)/z,C=(m.y-A.y)/z}else{const z=this.pointCoordinate(m),V=this.pointCoordinate(A);b=z.x-V.x,C=z.y-V.y}const F=this.locationCoordinate(d);this.setLocation(new s.MercatorCoordinate(F.x-b,F.y-C))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,m){const b=m?s.mercatorZfromAltitude(m,d.lat):void 0,C=this.projection.project(d.lng,d.lat);return new s.MercatorCoordinate(C.x,C.y,b)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,m){const b=m??this._centerAltitude,C=[d.x,d.y,0,1],A=[d.x,d.y,1,1];s.transformMat4$1(C,C,this.pixelMatrixInverse),s.transformMat4$1(A,A,this.pixelMatrixInverse);const F=A[3];s.scale$1(C,C,1/C[3]),s.scale$1(A,A,1/F);const z=C[2],V=A[2];return{p0:C,p1:A,t:z===V?0:(b-z)/(V-z)}}screenPointToMercatorRay(d){const m=[d.x,d.y,0,1],b=[d.x,d.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(b,b,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(b,b,1/b[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,b[2]=s.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(b,b,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],b,m)))}rayIntersectionCoordinate(d){const{p0:m,p1:b,t:C}=d,A=s.mercatorZfromAltitude(m[2],this._center.lat),F=s.mercatorZfromAltitude(b[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],b[0],C)/this.worldSize,s.number(m[1],b[1],C)/this.worldSize,s.number(A,F,C))}pointCoordinate(d,m=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,m)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let m=this.projection.pointCoordinate3D(this,d.x,d.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let b=0,C=this.horizonLineFromTop();if(d.y>C)return this.pointCoordinate(d);const A=.02*C,F=d.clone();for(let z=0;z<10&&C-b>A;z++){F.y=s.number(b,C,.66);const V=this.projection.pointCoordinate3D(this,F.x,F.y);V?(C=F.y,m=V):b=F.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}isPointOnSurface(d){if(d.y<0||d.y>this.height||d.x<0||d.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(d);const m=this.pointCoordinate(d);return m.y>=0&&m.y<=1}_coordinatePoint(d,m){const b=m&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,C=[d.x*this.worldSize,d.y*this.worldSize,b+d.toAltitude(),1];return s.transformMat4$1(C,C,this.pixelMatrix),C[3]>0?new s.Point(C[0]/C[3],C[1]/C[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:m}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,A=this.pointLocation3D(new s.Point(m,d)),F=this.pointLocation3D(new s.Point(C,d)),z=this.pointLocation3D(new s.Point(C,b)),V=this.pointLocation3D(new s.Point(m,b));let Y=Math.min(A.lng,F.lng,z.lng,V.lng),q=Math.max(A.lng,F.lng,z.lng,V.lng),ne=Math.min(A.lat,F.lat,z.lat,V.lat),de=Math.max(A.lat,F.lat,z.lat,V.lat);const be=Math.pow(2,-this.zoom)/16*270,Se=this.projection.name==="globe"?1:4,we=(Te,re,ye,Le,Be)=>{const He=(Te+ye)/2,qe=(re+Le)/2,We=new s.Point(He,qe),{lng:tt,lat:Je}=this.pointLocation3D(We),mt=Math.max(0,Y-tt,ne-Je,tt-q,Je-de);Y=Math.min(Y,tt),q=Math.max(q,tt),ne=Math.min(ne,Je),de=Math.max(de,Je),(Be<Se||mt>be)&&(we(Te,re,He,qe,Be+1),we(He,qe,ye,Le,Be+1))};if(we(m,d,C,d,1),we(C,d,C,b,1),we(C,b,m,b,1),we(m,b,m,d,1),this.projection.name==="globe"){const[Te,re]=s.polesInViewport(this);Te?(de=90,q=180,Y=-180):re&&(ne=-90,q=180,Y=-180)}return new s.LngLatBounds(new s.LngLat(Y,ne),new s.LngLat(q,de))}_getBoundsRectangular(d,m){const{top:b,left:C}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,F=this.width-this._edgeInsets.right,z=new s.Point(C,b),V=new s.Point(F,b),Y=new s.Point(F,A),q=new s.Point(C,A);let ne=this.pointCoordinate(z,d),de=this.pointCoordinate(V,d);const be=this.pointCoordinate(Y,m),Se=this.pointCoordinate(q,m),we=(Te,re)=>(re.y-Te.y)/(re.x-Te.x);return ne.y>1&&de.y>=0?ne=new s.MercatorCoordinate((1-Se.y)/we(Se,ne)+Se.x,1):ne.y<0&&de.y<=1&&(ne=new s.MercatorCoordinate(-Se.y/we(Se,ne)+Se.x,0)),de.y>1&&ne.y>=0?de=new s.MercatorCoordinate((1-be.y)/we(be,de)+be.x,1):de.y<0&&ne.y<=1&&(de=new s.MercatorCoordinate(-be.y/we(be,de)+be.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(Se)).extend(this.coordinateLocation(be))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=d.visibleDemTiles.reduce((b,C)=>{if(C.dem){const A=C.dem.tree;b.min=Math.min(b.min,A.minimums[0]),b.max=Math.max(b.max,A.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*d.exaggeration(),m.max*d.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-m*(1-this._horizonShift);return d?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,m){return this.projection.createTileMatrix(this,m,d)}calculateDistanceTileData(d){const m=d.key,b=this._distanceTileDataCache;if(b[m])return b[m];const C=d.canonical,A=1/this.height,F=this.cameraWorldSize,z=F/this.zoomScale(C.z),V=(C.x+Math.pow(2,C.z)*d.wrap)*z,Y=C.y*z,q=this.point;q.x*=F/this.worldSize,q.y*=F/this.worldSize;const ne=this.angle,de=Math.sin(-ne),be=-Math.cos(-ne);return b[m]={bearing:[de,be],center:[(q.x-V)*A,(q.y-Y)*A],scale:z/s.EXTENT*A},b[m]}calculateFogTileMatrix(d){const m=d.key,b=this._fogTileMatrixCache;if(b[m])return b[m];const C=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return s.multiply(C,this.worldToFogMatrix,C),b[m]=new Float32Array(C),b[m]}calculateProjMatrix(d,m=!1){const b=d.key,C=m?this._alignedProjMatrixCache:this._projMatrixCache;if(C[b])return C[b];const A=this.calculatePosMatrix(d,this.worldSize);return s.multiply(A,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,A),C[b]=new Float32Array(A),C[b]}calculatePixelsToTileUnitsMatrix(d){const m=d.tileID.key,b=this._pixelsToTileUnitsCache;if(b[m])return b[m];const C=function(A,F){const{scale:z}=A.tileTransform,V=z*s.EXTENT/(A.tileSize*Math.pow(2,F.zoom-A.tileID.overscaledZ+A.tileID.canonical.z));return Y=new Float32Array(4),de=(q=F.inverseAdjustmentMatrix)[1],be=q[2],Se=q[3],Te=(ne=[V,V])[1],Y[0]=q[0]*(we=ne[0]),Y[1]=de*we,Y[2]=be*Te,Y[3]=Se*Te,Y;var Y,q,ne,de,be,Se,we,Te}(d,this);return b[m]=C,b[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const d=1/this.worldSize,m=s.fromScaling([],[d,d,d]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const d=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(m),C=this._camera.forward(),A=s.mercatorZfromAltitude(1,this._center.lat);b[2]/=A,C[2]/=A,s.normalize(C,C);const F=d.raycast(b,C,d.exaggeration());if(F){const z=s.scaleAndAdd([],b,C,F),V=new s.MercatorCoordinate(z[0],z[1],s.mercatorZfromAltitude(z[2],s.latFromMercatorY(z[1]))),Y=(V.z+s.length([V.x-b[0],V.y-b[1],V.z-b[2]*A]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=V.toAltitude(),this._center=this.coordinateLocation(V),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const m=this._elevation,b=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,C=this._computeCameraPosition(b),A=m.getAtPointOrZero(new s.MercatorCoordinate(...C)),F=this.pixelsPerMeter/this.worldSize*A,z=this._minimumHeightOverTerrain(),V=C[2]-F;if(V<=z)if(V<0||d){const Y=this.locationCoordinate(this._center,this._centerAltitude),q=[C[0],C[1],Y.z-C[2]],ne=s.length(q);q[2]-=(z-V)/this._pixelsPerMercatorPixel;const de=s.length(q);if(de===0)return;s.scale$2(q,q,ne/de*this._pixelsPerMercatorPixel),this._camera.position=[C[0],C[1],Y.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const de=this.center;return de.lat=s.clamp(de.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(de.lng=s.clamp(de.lng,this.minLng,this.maxLng)),this.center=de,void(this._constraining=!1)}const m=this._unmodified,{x:b,y:C}=this.point;let A=0,F=b,z=C;const V=this.width/2,Y=this.height/2,q=this.worldMinY*this.scale,ne=this.worldMaxY*this.scale;if(C-Y<q&&(z=q+Y),C+Y>ne&&(z=ne-Y),ne-q<this.height&&(A=Math.max(A,this.height/(ne-q)),z=(ne+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const de=this.worldMinX*this.scale,be=this.worldMaxX*this.scale,Se=this.worldSize/2-(de+be)/2;F=(b+Se+this.worldSize)%this.worldSize-Se,F-V<de&&(F=de+V),F+V>be&&(F=be-V),be-de<this.width&&(A=Math.max(A,this.width/(be-de)),F=(be+de)/2)}F===b&&z===C||(this.center=this.unproject(new s.Point(F,z))),A&&(this.zoom+=this.scaleZoom(A)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const b=tm(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?m:1,A=this._camera.getWorldToCamera(this.worldSize,C),F=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);F[8]=2*-d.x/this.width,F[9]=2*d.y/this.height;let z=s.mul([],F,A);if(this.projection.isReprojectedInTileSpace){const qe=this.locationCoordinate(this.center),We=s.identity([]);s.translate(We,We,[qe.x*this.worldSize,qe.y*this.worldSize,0]),s.multiply(We,We,Pd(this)),s.translate(We,We,[-qe.x*this.worldSize,-qe.y*this.worldSize,0]),s.multiply(z,z,We),this.inverseAdjustmentMatrix=function(tt){const Je=Pd(tt,!0);return Q([],[Je[0],Je[1],Je[4],Je[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],z,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=z,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const V=s.invert([],F);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(V,this.horizonLineFromTop(),this.height);const Y=new Float32Array(16);s.identity(Y),s.scale(Y,Y,[1,-1,1]),s.rotateX(Y,Y,this._pitch),s.rotateZ(Y,Y,this.angle);const q=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ne=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;q[8]=2*-d.x/this.width,q[9]=2*(d.y+ne)/this.height,this.skyboxMatrix=s.multiply(Y,q,Y);const de=this.point,be=de.x,Se=de.y,we=this.width%2/2,Te=this.height%2/2,re=Math.cos(this.angle),ye=Math.sin(this.angle),Le=be-Math.round(be)+re*we+ye*Te,Be=Se-Math.round(Se)+re*Te+ye*we,He=new Float64Array(z);if(s.translate(He,He,[Le>.5?Le-1:Le,Be>.5?Be-1:Be,0]),this.alignedProjMatrix=He,z=s.create(),s.scale(z,z,[this.width/2,-this.height/2,1]),s.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=s.create(),s.scale(z,z,[1,-1,1]),s.translate(z,z,[-1,-1,0]),s.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},z=s.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=z,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const qe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(qe,qe,A),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=z;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,b=this._camera.position,C=1/this.height/this._pixelsPerMercatorPixel,A=[d,d,m];s.scale$2(A,A,C),s.scale$2(b,b,-1),s.multiply$2(b,b,A);const F=s.create();s.translate(F,F,b),s.scale(F,F,A),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,m,C)}_computeCameraPosition(d){const m=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),C=this.point,A=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-d/this.worldSize*this._centerAltitude;return[C.x/this.worldSize-b[0]*A,C.y/this.worldSize-b[1]*A,d/this.worldSize*this._centerAltitude-b[2]*A]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],C=d[2];let A=1;this.projection.wrap&&(this.center=this.center.wrap()),C>0&&(A=Math.min((m-b)/C,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,d,A),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,m=this._camera.forward(),{pitch:b,bearing:C}=this._camera.getPitchBearing(),A=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),z=Math.max((d[2]-A)/Math.cos(b),F),V=this._zoomFromMercatorZ(z);s.scaleAndAdd(d,d,m,z),this._pitch=s.clamp(b,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(C,-Math.PI,Math.PI),this._setZoom(s.clamp(V,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let m=0,b=s.GLOBE_ZOOM_THRESHOLD_MAX,C=0,A=1/0;for(;b-m>1e-6&&b>m;){const F=m+.5*(b-m),z=this.tileSize*Math.pow(2,F),V=this.getCameraToCenterDistance(this.projection,F,z),Y=this.scaleZoom(V/(d*this.tileSize)),q=Math.abs(F-Y);q<A&&(A=q,C=F),F<Y?m=F:b=F}return C}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,m){const b=Math.min(d.x,m.x),C=Math.max(d.x,m.x),A=Math.min(d.y,m.y),F=Math.max(d.y,m.y);if(A<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new s.Point(b,A),new s.Point(C,F),new s.Point(b,F),new s.Point(C,A)],V=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const q of z){const ne=this.pointRayIntersection(q);if(ne.t<0)return!0;const de=this.rayIntersectionCoordinate(ne);if(de.x<V||de.y<0||de.x>Y||de.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(d,m){const b=s.length(s.sub([],this._camera.position,d)),C=this._zoomFromMercatorZ(b)+m;return b-this._mercatorZfromZoom(C)}getCameraPoint(){if(this.projection.name==="globe"){const d=function([m,b,C],A){const F=[m,b,C,1];s.transformMat4$1(F,F,A);const z=F[3]=Math.max(F[3],1e-6);return F[0]/=z,F[1]/=z,F[2]/=z,F}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,d))}}getCameraToCenterDistance(d,m=this.zoom,b=this.worldSize){const C=tm(d,m,this.width,this.height,1024),A=d.pixelSpaceConversion(this.center.lat,b,C);return .5/Math.tan(.5*this._fov)*this.height*A}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(d,d,this.globeMatrix),d}}function Rd(y,d){let m=!1,b=null;const C=()=>{b=null,m&&(y(),b=setTimeout(C,d),m=!1)};return()=>(m=!0,b||C(),b)}class uy{constructor(d){this._hashName=d&&encodeURIComponent(d),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Rd(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,s.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const m=oh(d);if(this._hashName){const b=this._hashName;let C=!1;const A=s.window.location.hash.slice(1).split("&").map(F=>{const z=F.split("=")[0];return z===b?(C=!0,`${z}=${m}`):F}).filter(F=>F);return C||A.push(`${b}=${m}`),`#${A.join("&")}`}return`#${m}`}_getCurrentHash(){const d=s.window.location.hash.replace("#","");if(this._hashName){let m;return d.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(m=b)}),(m&&m[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some(b=>isNaN(b))){const b=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(m[3]||0):d.getBearing();return d.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,d)}}function oh(y,d){const m=y.getCenter(),b=Math.round(100*y.getZoom())/100,C=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,C),F=Math.round(m.lng*A)/A,z=Math.round(m.lat*A)/A,V=y.getBearing(),Y=y.getPitch();let q=d?`/${F}/${z}/${b}`:`${b}/${z}/${F}`;return(V||Y)&&(q+="/"+Math.round(10*V)/10),Y&&(q+=`/${Math.round(Y)}`),q}const sh={linearity:.3,easing:s.bezier(0,0,.3,1)},rm=s.extend({deceleration:2500,maxSpeed:1400},sh),im=s.extend({deceleration:20,maxSpeed:1400},sh),_n=s.extend({deceleration:1e3,maxSpeed:360},sh),wa=s.extend({deceleration:1e3,maxSpeed:90},sh);class jx{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,m=s.exported.now();for(;d.length>0&&m-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)m.zoom+=A.zoomDelta||0,m.bearing+=A.bearingDelta||0,m.pitch+=A.pitchDelta||0,A.panDelta&&m.pan._add(A.panDelta),A.around&&(m.around=A.around),A.pinchAround&&(m.pinchAround=A.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(m.pan.mag()){const A=lh(m.pan.mag(),b,s.extend({},rm,d||{}));C.offset=m.pan.mult(A.amount/m.pan.mag()),C.center=this._map.transform.center,ah(C,A)}if(m.zoom){const A=lh(m.zoom,b,im);C.zoom=this._map.transform.zoom+A.amount,ah(C,A)}if(m.bearing){const A=lh(m.bearing,b,_n);C.bearing=this._map.transform.bearing+s.clamp(A.amount,-179,179),ah(C,A)}if(m.pitch){const A=lh(m.pitch,b,wa);C.pitch=this._map.transform.pitch+A.amount,ah(C,A)}if(C.zoom||C.bearing){const A=m.pinchAround===void 0?m.around:m.pinchAround;C.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),C.noMoveStart=!0,C}}function ah(y,d){(!y.duration||y.duration<d.duration)&&(y.duration=d.duration,y.easing=d.easing)}function lh(y,d,m){const{maxSpeed:b,linearity:C,deceleration:A}=m,F=s.clamp(y*C/(d/1e3),-b,b),z=Math.abs(F)/(A*C);return{easing:m.easing,duration:1e3*z,amount:F*(z/2)}}class zo extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,b,C={}){const A=U(m.getCanvasContainer(),b),F=m.unproject(A);super(d,s.extend({point:A,lngLat:F,originalEvent:b},C)),this._defaultPrevented=!1,this.target=m}}class ch extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,b){const C=d==="touchend"?b.changedTouches:b.touches,A=X(m.getCanvasContainer(),C),F=A.map(V=>m.unproject(V)),z=A.reduce((V,Y,q,ne)=>V.add(Y.div(ne.length)),new s.Point(0,0));super(d,{points:A,point:z,lngLats:F,lngLat:m.unproject(z),originalEvent:b}),this._defaultPrevented=!1}}class om extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,b){super(d,{originalEvent:b}),this._defaultPrevented=!1}}class dy{constructor(d,m){this._map=d,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new om(d.type,this._map,d))}mousedown(d,m){return this._mousedownPos=m,this._firePreventable(new zo(d.type,this._map,d))}mouseup(d){this._map.fire(new zo(d.type,this._map,d))}preclick(d){const m=s.extend({},d);m.type="preclick",this._map.fire(new zo(m.type,this._map,m))}click(d,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(d),this._map.fire(new zo(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new zo(d.type,this._map,d))}mouseover(d){this._map.fire(new zo(d.type,this._map,d))}mouseout(d){this._map.fire(new zo(d.type,this._map,d))}touchstart(d){return this._firePreventable(new ch(d.type,this._map,d))}touchmove(d){this._map.fire(new ch(d.type,this._map,d))}touchend(d){this._map.fire(new ch(d.type,this._map,d))}touchcancel(d){this._map.fire(new ch(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sm{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new zo(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new zo(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ux{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,m){this.isEnabled()&&d.shiftKey&&d.button===0&&(O(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(d,m){if(!this._active)return;const b=m,C=this._startPos,A=this._lastPos;if(!C||!A||A.equals(b)||!this._box&&b.dist(C)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=M("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const F=Math.min(C.x,b.x),z=Math.max(C.x,b.x),V=Math.min(C.y,b.y),Y=Math.max(C.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${F}px,${V}px)`,this._box.style.width=z-F+"px",this._box.style.height=Y-V+"px")})}mouseupWindow(d,m){if(!this._active)return;const b=this._startPos,C=m;if(b&&d.button===0){if(this.reset(),H(),b.x!==C.x||b.y!==C.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:A=>A.fitScreenCoordinates(b,C,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),k(),delete this._startPos,delete this._lastPos}_fireEvent(d,m){return this._map.fire(new s.Event(d,{originalEvent:m}))}}function am(y,d){const m={};for(let b=0;b<y.length;b++)m[y[b].identifier]=d[b];return m}class Od{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=d.timeStamp),b.length===this.numTouches&&(this.centroid=function(C){const A=new s.Point(0,0);for(const F of C)A._add(F);return A.div(C.length)}(m),this.touches=am(b,m)))}touchmove(d,m,b){if(this.aborted||!this.centroid)return;const C=am(b,m);for(const A in this.touches){const F=C[A];(!F||F.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(d,m,b){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class fy{constructor(d){this.singleTap=new Od(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,m,b){this.singleTap.touchstart(d,m,b)}touchmove(d,m,b){this.singleTap.touchmove(d,m,b)}touchend(d,m,b){const C=this.singleTap.touchend(d,m,b);if(C){const A=d.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(C)<30;if(A&&F||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class CA{constructor(){this._zoomIn=new fy({numTouches:1,numTaps:2}),this._zoomOut=new fy({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,m,b){this._zoomIn.touchstart(d,m,b),this._zoomOut.touchstart(d,m,b)}touchmove(d,m,b){this._zoomIn.touchmove(d,m,b),this._zoomOut.touchmove(d,m,b)}touchend(d,m,b){const C=this._zoomIn.touchend(d,m,b),A=this._zoomOut.touchend(d,m,b);return C?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(C)},{originalEvent:d})}):A?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(A)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Vx={0:1,2:2};class Ld{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,m){return!1}_move(d,m){return{}}mousedown(d,m){if(this._lastPoint)return;const b=J(d);this._correctButton(d,b)&&(this._lastPoint=m,this._eventButton=b)}mousemoveWindow(d,m){const b=this._lastPoint;if(b){if(d.preventDefault(),this._eventButton!=null&&function(C,A){const F=Vx[A];return C.buttons===void 0||(C.buttons&F)!==F}(d,this._eventButton))this.reset();else if(this._moved||!(m.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(b,m)}}mouseupWindow(d){this._lastPoint&&J(d)===this._eventButton&&(this._moved&&H(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hy extends Ld{mousedown(d,m){super.mousedown(d,m),this._lastPoint&&(this._active=!0)}_correctButton(d,m){return m===0&&!d.ctrlKey}_move(d,m){return{around:m,panDelta:m.sub(d)}}}class py extends Ld{_correctButton(d,m){return m===0&&d.ctrlKey||m===2}_move(d,m){const b=.8*(m.x-d.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(d){d.preventDefault()}}class my extends Ld{_correctButton(d,m){return m===0&&d.ctrlKey||m===2}_move(d,m){const b=-.5*(m.y-d.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(d){d.preventDefault()}}class lm{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(d,m,b){return this._calculateTransform(d,m,b)}touchmove(d,m,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,m,b)}}touchend(d,m,b){this._calculateTransform(d,m,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,m,b){b.length>0&&(this._active=!0);const C=am(b,m),A=new s.Point(0,0),F=new s.Point(0,0);let z=0;for(const Y in C){const q=C[Y],ne=this._touches[Y];ne&&(A._add(q),F._add(q.sub(ne)),z++,C[Y]=q)}if(this._touches=C,z<this._minTouches||!F.mag())return;const V=F.div(z);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(z),panDelta:V}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=M("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class uh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,m,b){return{}}touchstart(d,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(d,m,b){const C=this._firstTwoTouches;if(!C)return;d.preventDefault();const[A,F]=C,z=dh(b,m,A),V=dh(b,m,F);if(!z||!V)return;const Y=this._aroundCenter?null:z.add(V).div(2);return this._move([z,V],Y,d)}touchend(d,m,b){if(!this._firstTwoTouches)return;const[C,A]=this._firstTwoTouches,F=dh(b,m,C),z=dh(b,m,A);F&&z||(this._active&&H(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function dh(y,d,m){for(let b=0;b<y.length;b++)if(y[b].identifier===m)return d[b]}function gy(y,d){return Math.log(y/d)/Math.LN2}class Gx extends uh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,m){const b=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(gy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gy(this._distance,b),pinchAround:m}}}function vy(y,d){return 180*y.angleWith(d)/Math.PI}class Hx extends uh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,m){const b=this._vector;if(this._vector=d[0].sub(d[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:vy(this._vector,b),pinchAround:m}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const m=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const C=vy(d,b);return Math.abs(C)<m}}function Rc(y){return Math.abs(y.y)>Math.abs(y.x)}class Wx extends uh{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,Rc(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,m,b){const C=this._lastPoints;if(!C)return;const A=d[0].sub(C[0]),F=d[1].sub(C[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(A,F,b.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(A.y+F.y)/2*-.5})}gestureBeginsVertically(d,m,b){if(this._valid!==void 0)return this._valid;const C=d.mag()>=2,A=m.mag()>=2;if(!C&&!A)return;if(!C||!A)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=d.y>0==m.y>0;return Rc(d)&&Rc(m)&&F}}const Xx={panStep:100,bearingStep:15,pitchStep:10};class TA{constructor(){const d=Xx;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let m=0,b=0,C=0,A=0,F=0;switch(d.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:d.shiftKey?b=-1:(d.preventDefault(),A=-1);break;case 39:d.shiftKey?b=1:(d.preventDefault(),A=1);break;case 38:d.shiftKey?C=1:(d.preventDefault(),F=-1);break;case 40:d.shiftKey?C=-1:(d.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,C=0),{cameraAnimation:z=>{const V=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:qx,zoom:m?Math.round(V)+m*(d.shiftKey?2:1):V,bearing:z.getBearing()+b*this._bearingStep,pitch:z.getPitch()+C*this._pitchStep,offset:[-A*this._panStep,-F*this._panStep],center:z.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function qx(y){return y*(2-y)}const yy=4.000244140625;class Yx{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&d.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=d.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const b=s.exported.now(),C=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%yy==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(C*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),d.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=d,this._delta-=m,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=U(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;this._type==="wheel"&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(this._delta!==0){const V=this._type==="wheel"&&Math.abs(this._delta)>yy?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&Y!==0&&(Y=1/Y);const q=m(),ne=Math.pow(2,q),de=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):ne;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(de*Y))),this._type==="wheel"&&(this._startZoom=q,this._easing=this._smoothOutEasing(200)),this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:m(),C=this._startZoom,A=this._easing;let F,z=!1;if(this._type==="wheel"&&C&&A){const V=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),Y=A(V);F=s.number(C,b,Y),V<1?this._frameId||(this._frameId=!0):z=!0}else F=b,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!z,zoomDelta:F-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let m=s.ease;if(this._prevEase){const b=this._prevEase,C=(s.exported.now()-b.start)/b.duration,A=b.easing(C+.01)-b.easing(C),F=.27/Math.sqrt(A*A+1e-4)*.01,z=Math.sqrt(.0729-F*F);m=s.bezier(F,z,.25,1)}return this._prevEase={start:s.exported.now(),duration:d,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=M("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Zx{constructor(d,m){this._clickZoom=d,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class es{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,m){return d.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(d.shiftKey?-1:1),around:b.unproject(m)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class AA{constructor(){this._tap=new fy({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,m,b){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=m[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(d,m,b))}touchmove(d,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const C=m[0],A=C.y-this._swipePoint.y;return this._swipePoint=C,d.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(d,m,b)}touchend(d,m,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(d,m,b)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kx{constructor(d,m,b){this._el=d,this._mousePan=m,this._touchPan=b}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class MA{constructor(d,m,b){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class PA{constructor(d,m,b,C){this._el=d,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ia=y=>y.zoom||y.drag||y.pitch||y.rotate;class Jx extends s.Event{}class IA{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,m){const b=s.sub([],m,d);this.radius=s.length(b[2]<0?s.div([],b,this.constants):[b[0],b[1],0])}projectRay(d){s.div(d,d,this.constants),s.normalize(d,d),s.mul$1(d,d,this.constants);const m=s.scale$2([],d,this.radius);if(m[2]>0){const b=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),C=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),A=s.add([],m,s.scale$2([],s.sub([],s.add([],C,b),m),2));m[0]=A[0],m[1]=A[1]}return m}}function Sa(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class nl{constructor(d,m){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jx(d),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new IA,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[C,A,F]of this._listeners)C.addEventListener(A,C===s.window.document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[d,m,b]of this._listeners)d.removeEventListener(m,d===s.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(d){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new dy(m,d));const C=m.boxZoom=new Ux(m,d);this._add("boxZoom",C);const A=new CA,F=new es;m.doubleClickZoom=new Zx(F,A),this._add("tapZoom",A),this._add("clickZoom",F);const z=new AA;this._add("tapDragZoom",z);const V=m.touchPitch=new Wx(m);this._add("touchPitch",V);const Y=new py(d),q=new my(d);m.dragRotate=new MA(d,Y,q),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const ne=new hy(d),de=new lm(m,d);m.dragPan=new Kx(b,ne,de),this._add("mousePan",ne),this._add("touchPan",de,["touchZoom","touchRotate"]);const be=new Hx,Se=new Gx;m.touchZoomRotate=new PA(b,Se,be,z),this._add("touchRotate",be,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new sm(m));const we=m.scrollZoom=new Yx(m,this);this._add("scrollZoom",we,["mousePan"]);const Te=m.keyboard=new TA;this._add("keyboard",Te);for(const re of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[re]&&m[re].enable(d[re])}_add(d,m,b){this._handlers.push({handlerName:d,handler:m,allowed:b}),this._handlersById[d]=m}stop(d){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ia(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,m,b){for(const C in d)if(C!==b&&(!m||m.indexOf(C)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const m=[];for(const b of d)this._el.contains(b.target)&&m.push(b);return m}handleEvent(d,m){this._updatingCamera=!0;const b=d.type==="renderFrame",C=b?void 0:d,A={needsRenderFrame:!1},F={},z={},V=d.touches?this._getMapTouches(d.touches):void 0,Y=V?X(this._el,V):b?void 0:U(this._el,d);for(const{handlerName:de,handler:be,allowed:Se}of this._handlers){if(!be.isEnabled())continue;let we;this._blockedByActive(z,Se,de)?be.reset():be[m||d.type]&&(we=be[m||d.type](d,Y,V),this.mergeHandlerResult(A,F,we,de,C),we&&we.needsRenderFrame&&this._triggerRenderFrame()),(we||be.isActive())&&(z[de]=be)}const q={};for(const de in this._previousActiveHandlers)z[de]||(q[de]=C);this._previousActiveHandlers=z,(Object.keys(q).length||Sa(A))&&(this._changes.push([A,F,q]),this._triggerRenderFrame()),(Object.keys(z).length||Sa(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=A;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))}mergeHandlerResult(d,m,b,C,A){if(!b)return;s.extend(d,b);const F={handlerName:C,originalEvent:b.originalEvent||A};b.zoomDelta!==void 0&&(m.zoom=F),b.panDelta!==void 0&&(m.drag=F),b.pitchDelta!==void 0&&(m.pitch=F),b.bearingDelta!==void 0&&(m.rotate=F)}_applyChanges(){const d={},m={},b={};for(const[C,A,F]of this._changes)C.panDelta&&(d.panDelta=(d.panDelta||new s.Point(0,0))._add(C.panDelta)),C.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+C.pitchDelta),C.around!==void 0&&(d.around=C.around),C.aroundCoord!==void 0&&(d.aroundCoord=C.aroundCoord),C.pinchAround!==void 0&&(d.pinchAround=C.pinchAround),C.noInertia&&(d.noInertia=C.noInertia),s.extend(m,A),s.extend(b,F);this._updateMapTransform(d,m,b),this._changes=[]}_updateMapTransform(d,m,b){const C=this._map,A=C.transform,F=ye=>[ye.x,ye.y,ye.z];if((ye=>{const Le=this._eventsInProgress.drag;return Le&&!this._handlersById[Le.handlerName].isActive()})()&&!Sa(d)){const ye=A.zoom;A.cameraElevationReference="sea",A.recenterOnTerrain(),A.cameraElevationReference="ground",ye!==A.zoom&&this._map._update(!0)}if(A._isCameraConstrained&&C._stop(!0),!Sa(d))return void this._fireEvents(m,b,!0);let{panDelta:z,zoomDelta:V,bearingDelta:Y,pitchDelta:q,around:ne,aroundCoord:de,pinchAround:be}=d;A._isCameraConstrained&&(V>0&&(V=0),A._isCameraConstrained=!1),be!==void 0&&(ne=be),(V||(ye=>m[ye]&&!this._eventsInProgress[ye])("drag"))&&ne&&(this._dragOrigin=F(A.pointCoordinate3D(ne)),this._trackingEllipsoid.setup(A._camera.position,this._dragOrigin)),A.cameraElevationReference="sea",C._stop(!0),ne=ne||C.transform.centerPoint,Y&&(A.bearing+=Y),q&&(A.pitch+=q),A._updateCameraState();const Se=[0,0,0];if(z)if(A.projection.name==="mercator"){const ye=this._trackingEllipsoid.projectRay(A.screenPointToMercatorRay(ne).dir),Le=this._trackingEllipsoid.projectRay(A.screenPointToMercatorRay(ne.sub(z)).dir);Se[0]=Le[0]-ye[0],Se[1]=Le[1]-ye[1]}else{const ye=A.pointCoordinate(ne);if(A.projection.name==="globe"){z=z.rotate(-A.angle);const Le=A._pixelsPerMercatorPixel/A.worldSize;Se[0]=-z.x*s.mercatorScale(s.latFromMercatorY(ye.y))*Le,Se[1]=-z.y*s.mercatorScale(A.center.lat)*Le}else{const Le=A.pointCoordinate(ne.sub(z));ye&&Le&&(Se[0]=Le.x-ye.x,Se[1]=Le.y-ye.y)}}const we=A.zoom,Te=[0,0,0];if(V){const ye=F(de||A.pointCoordinate3D(ne)),Le={dir:s.normalize([],s.sub([],ye,A._camera.position))};if(Le.dir[2]<0){const Be=A.zoomDeltaToMovement(ye,V);s.scale$2(Te,Le.dir,Be)}}const re=s.add(Se,Se,Te);A._translateCameraConstrained(re),V&&Math.abs(A.zoom-we)>1e-4&&A.recenterOnTerrain(),A.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(m,b,!0)}_fireEvents(d,m,b){const C=ia(this._eventsInProgress),A=ia(d),F={};for(const q in d){const{originalEvent:ne}=d[q];this._eventsInProgress[q]||(F[`${q}start`]=ne),this._eventsInProgress[q]=d[q]}!C&&A&&this._fireEvent("movestart",A.originalEvent);for(const q in F)this._fireEvent(q,F[q]);A&&this._fireEvent("move",A.originalEvent);for(const q in d){const{originalEvent:ne}=d[q];this._fireEvent(q,ne)}const z={};let V;for(const q in this._eventsInProgress){const{handlerName:ne,originalEvent:de}=this._eventsInProgress[q];this._handlersById[ne].isActive()||(delete this._eventsInProgress[q],V=m[ne]||de,z[`${q}end`]=V)}for(const q in z)this._fireEvent(q,z[q]);const Y=ia(this._eventsInProgress);if(b&&(C||A)&&!Y){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=de=>de!==0&&-this._bearingSnap<de&&de<this._bearingSnap;q?(ne(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:V})):(this._map.fire(new s.Event("moveend",{originalEvent:V})),ne(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,m){this._map.fire(new s.Event(d,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new Jx("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const _u="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class cm extends s.Evented{constructor(d,m){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,m){return this.jumpTo({center:d},m)}panBy(d,m,b){return d=s.Point.convert(d).mult(-1),this.panTo(this.transform.center,s.extend({offset:d},m),b)}panTo(d,m,b){return this.easeTo(s.extend({center:d},m),b)}getZoom(){return this.transform.zoom}setZoom(d,m){return this.jumpTo({zoom:d},m),this}zoomTo(d,m,b){return this.easeTo(s.extend({zoom:d},m),b)}zoomIn(d,m){return this.zoomTo(this.getZoom()+1,d,m),this}zoomOut(d,m){return this.zoomTo(this.getZoom()-1,d,m),this}getBearing(){return this.transform.bearing}setBearing(d,m){return this.jumpTo({bearing:d},m),this}getPadding(){return this.transform.padding}setPadding(d,m){return this.jumpTo({padding:d},m),this}rotateTo(d,m,b){return this.easeTo(s.extend({bearing:d},m),b)}resetNorth(d,m){return this.rotateTo(0,s.extend({duration:1e3},d),m),this}resetNorthPitch(d,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},d),m),this}snapToNorth(d,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,m):this}getPitch(){return this.transform.pitch}setPitch(d,m){return this.jumpTo({pitch:d},m),this}cameraForBounds(d,m){d=s.LngLatBounds.convert(d);const b=m&&m.bearing||0,C=m&&m.pitch||0,A=d.getNorthWest(),F=d.getSouthEast();return this._cameraForBounds(this.transform,A,F,b,C,m)}_extendCameraOptions(d){const m={top:0,bottom:0,right:0,left:0};if(typeof(d=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const b=d.padding;d.padding={top:b,bottom:b,right:b,left:b}}return d.padding=s.extend(m,d.padding),d}_minimumAABBFrustumDistance(d,m){const b=m.max[0]-m.min[0],C=m.max[1]-m.min[1];return b/C>d.aspect?b/(2*Math.tan(.5*d.fovX)*d.aspect):C/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,m,b,C,A,F){const z=d.clone(),V=this._extendCameraOptions(F);z.bearing=C,z.pitch=A;const Y=s.LngLat.convert(m),q=s.LngLat.convert(b),ne=.5*(Y.lat+q.lat),de=.5*(Y.lng+q.lng),be=s.latLngToECEF(ne,de),Se=s.normalize([],be),we=s.normalize([],s.cross([],Se,[0,1,0])),Te=s.cross([],we,Se),re=[we[0],we[1],we[2],0,Te[0],Te[1],Te[2],0,Se[0],Se[1],Se[2],0,0,0,0,1],ye=[be,s.latLngToECEF(Y.lat,Y.lng),s.latLngToECEF(q.lat,Y.lng),s.latLngToECEF(q.lat,q.lng),s.latLngToECEF(Y.lat,q.lng),s.latLngToECEF(ne,Y.lng),s.latLngToECEF(ne,q.lng),s.latLngToECEF(Y.lat,de),s.latLngToECEF(q.lat,de)];let Le=s.Aabb.fromPoints(ye.map($t=>[s.dot(we,$t),s.dot(Te,$t),s.dot(Se,$t)]));const Be=s.transformMat4([],Le.center,re);s.squaredLength(Be)===0&&s.set(Be,0,0,1),s.normalize(Be,Be),s.scale$2(Be,Be,s.GLOBE_RADIUS),z.center=s.ecefToLatLng(Be);const He=z.getWorldToCameraMatrix(),qe=s.invert(new Float64Array(16),He);Le=s.Aabb.applyTransform(Le,s.multiply([],He,re)),s.transformMat4(Be,Be,He);const We=.5*(Le.max[2]-Le.min[2]),tt=this._minimumAABBFrustumDistance(z,Le),Je=s.scale$2([],[0,0,1],We),mt=s.add(Je,Be,Je),Xt=tt+(z.pitch===0?0:s.distance(Be,mt)),ut=z.globeCenterInViewSpace,Lt=s.sub([],Be,[ut[0],ut[1],ut[2]]);s.normalize(Lt,Lt),s.scale$2(Lt,Lt,Xt);const yt=s.add([],Be,Lt);s.transformMat4(yt,yt,qe);const Wt=s.earthRadius/s.GLOBE_RADIUS,ft=s.length(yt),It=s.mercatorZfromAltitude(Math.max(ft*Wt-s.earthRadius,Number.EPSILON),0),Yt=Math.min(z.zoomFromMercatorZAdjusted(It),V.maxZoom);return Yt>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(z.setProjection({name:"mercator"}),z.zoom=Yt,this._cameraForBounds(z,m,b,C,A,F)):{center:z.center,zoom:Yt,bearing:C,pitch:A}}queryTerrainElevation(d,m){const b=this.transform.elevation;return b?(m=s.extend({},{exaggerated:!0},m),b.getAtPoint(s.MercatorCoordinate.fromLngLat(d),null,m.exaggerated)):null}_cameraForBounds(d,m,b,C,A,F){if(d.projection.name==="globe")return this._cameraForBoundsOnGlobe(d,m,b,C,A,F);const z=d.clone(),V=this._extendCameraOptions(F),Y=z.padding;z.bearing=C,z.pitch=A;const q=s.LngLat.convert(m),ne=s.LngLat.convert(b),de=new s.LngLat(q.lng,ne.lat),be=new s.LngLat(ne.lng,q.lat),Se=z.project(q),we=z.project(ne),Te=this.queryTerrainElevation(q),re=this.queryTerrainElevation(ne),ye=this.queryTerrainElevation(de),Le=this.queryTerrainElevation(be),Be=[[Se.x,Se.y,Math.min(Te||0,re||0,ye||0,Le||0)],[we.x,we.y,Math.max(Te||0,re||0,ye||0,Le||0)]];let He=s.Aabb.fromPoints(Be);const qe=z.getWorldToCameraMatrix(),We=s.invert(new Float64Array(16),qe);He=s.Aabb.applyTransform(He,qe);const tt=s.sub([],He.max,He.min),Je=Y.left||0,mt=Y.right||0,Xt=Y.bottom||0,ut=Y.top||0,{left:Lt,right:yt,top:Wt,bottom:ft}=V.padding,It=.5*(Je+mt),Yt=.5*(ut+Xt),$t=Math.min(z.scaleZoom(z.scale*Math.min((z.width-(Je+mt+Lt+yt))/tt[0],(z.height-(Xt+ut+ft+Wt))/tt[1])),V.maxZoom),Zt=z.scale/z.zoomScale($t);He=new s.Aabb([He.min[0]-(Lt+It)*Zt,He.min[1]-(ft+Yt)*Zt,He.min[2]],[He.max[0]+(yt+It)*Zt,He.max[1]+(Wt+Yt)*Zt,He.max[2]]);const zn=.5*tt[2],lr=this._minimumAABBFrustumDistance(z,He),Tn=[0,0,1,0];s.transformMat4$1(Tn,Tn,qe),s.normalize$2(Tn,Tn);const qn=s.scale$2([],Tn,lr+zn),Tr=s.add([],He.center,qn),Cr=(typeof V.offset.x=="number"&&typeof V.offset.y=="number"?new s.Point(V.offset.x,V.offset.y):s.Point.convert(V.offset)).rotate(-s.degToRad(C));He.center[0]-=Cr.x*Zt,He.center[1]+=Cr.y*Zt,s.transformMat4(He.center,He.center,We),s.transformMat4(Tr,Tr,We);const Dn=[He.center[0],He.center[1],Tr[2]*z.pixelsPerMeter];s.scale$2(Dn,Dn,1/z.worldSize);const ti=s.lngFromMercatorX(Dn[0]),li=s.latFromMercatorY(Dn[1]),ci=Math.min(z._zoomFromMercatorZ(Dn[2]),V.maxZoom),ui=new s.LngLat(ti,li);return z.mercatorFromTransition&&ci<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(z.setProjection({name:"globe"}),z.zoom=ci,this._cameraForBounds(z,m,b,C,A,F)):{center:ui,zoom:ci,bearing:C,pitch:A}}fitBounds(d,m,b){const C=this.cameraForBounds(d,m);return this._fitInternal(C,m,b)}fitScreenCoordinates(d,m,b,C,A){const F=s.Point.convert(d),z=s.Point.convert(m),V=new s.Point(Math.min(F.x,z.x),Math.min(F.y,z.y)),Y=new s.Point(Math.max(F.x,z.x),Math.max(F.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(F,z))return this;const q=this.transform.pointLocation3D(V),ne=this.transform.pointLocation3D(Y),de=this.transform.pointLocation3D(new s.Point(V.x,Y.y)),be=this.transform.pointLocation3D(new s.Point(Y.x,V.y)),Se=[Math.min(q.lng,ne.lng,de.lng,be.lng),Math.min(q.lat,ne.lat,de.lat,be.lat)],we=[Math.max(q.lng,ne.lng,de.lng,be.lng),Math.max(q.lat,ne.lat,de.lat,be.lat)],Te=C&&C.pitch?C.pitch:this.getPitch(),re=this._cameraForBounds(this.transform,Se,we,b,Te,C);return this._fitInternal(re,C,A)}_fitInternal(d,m,b){return d?(delete(m=s.extend(d,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(d,m){this.stop();const b=d.preloadOnly?this.transform.clone():this.transform;let C=!1,A=!1,F=!1;return"zoom"in d&&b.zoom!==+d.zoom&&(C=!0,b.zoom=+d.zoom),d.center!==void 0&&(b.center=s.LngLat.convert(d.center)),"bearing"in d&&b.bearing!==+d.bearing&&(A=!0,b.bearing=+d.bearing),"pitch"in d&&b.pitch!==+d.pitch&&(F=!0,b.pitch=+d.pitch),d.padding==null||b.isPaddingEqual(d.padding)||(b.padding=d.padding),d.preloadOnly?(this._preloadTiles(b),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),C&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),A&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),F&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(_u),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,m){const b=this.transform;if(!b.projection.supportsFreeCamera)return s.warnOnce(_u),this;this.stop();const C=b.zoom,A=b.pitch,F=b.bearing;b.setFreeCameraOptions(d);const z=C!==b.zoom,V=A!==b.pitch,Y=F!==b.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),z&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),Y&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),V&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(d,m){this._stop(!1,d.easeId),((d=s.extend({offset:[0,0],duration:500,easing:s.ease},d)).animate===!1||this._prefersReducedMotion(d))&&(d.duration=0);const b=this.transform,C=this.getZoom(),A=this.getBearing(),F=this.getPitch(),z=this.getPadding(),V="zoom"in d?+d.zoom:C,Y="bearing"in d?this._normalizeBearing(d.bearing,A):A,q="pitch"in d?+d.pitch:F,ne="padding"in d?d.padding:b.padding,de=s.Point.convert(d.offset);let be,Se,we;if(b.projection.name==="globe"){const Je=s.MercatorCoordinate.fromLngLat(b.center),mt=de.rotate(-b.angle);Je.x+=mt.x/b.worldSize,Je.y+=mt.y/b.worldSize;const Xt=Je.toLngLat(),ut=s.LngLat.convert(d.center||Xt);this._normalizeCenter(ut),be=b.centerPoint.add(mt),Se=new s.Point(Je.x,Je.y).mult(b.worldSize),we=new s.Point(s.mercatorXfromLng(ut.lng),s.mercatorYfromLat(ut.lat)).mult(b.worldSize).sub(Se)}else{be=b.centerPoint.add(de);const Je=b.pointLocation(be),mt=s.LngLat.convert(d.center||Je);this._normalizeCenter(mt),Se=b.project(Je),we=b.project(mt).sub(Se)}const Te=b.zoomScale(V-C);let re,ye;d.around&&(re=s.LngLat.convert(d.around),ye=b.locationPoint(re));const Le=this._zooming||V!==C,Be=this._rotating||A!==Y,He=this._pitching||q!==F,qe=!b.isPaddingEqual(ne),We=Je=>mt=>{if(Le&&(Je.zoom=s.number(C,V,mt)),Be&&(Je.bearing=s.number(A,Y,mt)),He&&(Je.pitch=s.number(F,q,mt)),qe&&(Je.interpolatePadding(z,ne,mt),be=Je.centerPoint.add(de)),re)Je.setLocationAtPoint(re,ye);else{const Xt=Je.zoomScale(Je.zoom-C),ut=V>C?Math.min(2,Te):Math.max(.5,Te),Lt=Math.pow(ut,1-mt),yt=Je.unproject(Se.add(we.mult(mt*Lt)).mult(Xt));Je.setLocationAtPoint(Je.renderWorldCopies?yt.wrap():yt,be)}return d.preloadOnly||this._fireMoveEvents(m),Je};if(d.preloadOnly){const Je=this._emulate(We,d.duration,b);return this._preloadTiles(Je),this}const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Le,this._rotating=Be,this._pitching=He,this._padding=qe,this._easeId=d.easeId,this._prepareEase(m,d.noMoveStart,tt),this._ease(We(b),Je=>{b.recenterOnTerrain(),this._afterEase(m,Je)},d),this}_prepareEase(d,m,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||b.moving||this.fire(new s.Event("movestart",d)),this._zooming&&!b.zooming&&this.fire(new s.Event("zoomstart",d)),this._rotating&&!b.rotating&&this.fire(new s.Event("rotatestart",d)),this._pitching&&!b.pitching&&this.fire(new s.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new s.Event("move",d)),this._zooming&&this.fire(new s.Event("zoom",d)),this._rotating&&this.fire(new s.Event("rotate",d)),this._pitching&&this.fire(new s.Event("pitch",d))}_afterEase(d,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,C=this._rotating,A=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new s.Event("zoomend",d)),C&&this.fire(new s.Event("rotateend",d)),A&&this.fire(new s.Event("pitchend",d)),this.fire(new s.Event("moveend",d))}flyTo(d,m){if(this._prefersReducedMotion(d)){const $t=s.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo($t,m)}this.stop(),d=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},d);const b=this.transform,C=this.getZoom(),A=this.getBearing(),F=this.getPitch(),z=this.getPadding(),V="zoom"in d?s.clamp(+d.zoom,b.minZoom,b.maxZoom):C,Y="bearing"in d?this._normalizeBearing(d.bearing,A):A,q="pitch"in d?+d.pitch:F,ne="padding"in d?d.padding:b.padding,de=b.zoomScale(V-C),be=s.Point.convert(d.offset);let Se=b.centerPoint.add(be);const we=b.pointLocation(Se),Te=s.LngLat.convert(d.center||we);this._normalizeCenter(Te);const re=b.project(we),ye=b.project(Te).sub(re);let Le=d.curve;const Be=Math.max(b.width,b.height),He=Be/de,qe=ye.mag();if("minZoom"in d){const $t=s.clamp(Math.min(d.minZoom,C,V),b.minZoom,b.maxZoom),Zt=Be/b.zoomScale($t-C);Le=Math.sqrt(Zt/qe*2)}const We=Le*Le;function tt($t){const Zt=(He*He-Be*Be+($t?-1:1)*We*We*qe*qe)/(2*($t?He:Be)*We*qe);return Math.log(Math.sqrt(Zt*Zt+1)-Zt)}function Je($t){return(Math.exp($t)-Math.exp(-$t))/2}function mt($t){return(Math.exp($t)+Math.exp(-$t))/2}const Xt=tt(0);let ut=function($t){return mt(Xt)/mt(Xt+Le*$t)},Lt=function($t){return Be*((mt(Xt)*(Je(Zt=Xt+Le*$t)/mt(Zt))-Je(Xt))/We)/qe;var Zt},yt=(tt(1)-Xt)/Le;if(Math.abs(qe)<1e-6||!isFinite(yt)){if(Math.abs(Be-He)<1e-6)return this.easeTo(d,m);const $t=He<Be?-1:1;yt=Math.abs(Math.log(He/Be))/Le,Lt=function(){return 0},ut=function(Zt){return Math.exp($t*Le*Zt)}}d.duration="duration"in d?+d.duration:1e3*yt/("screenSpeed"in d?+d.screenSpeed/Le:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const Wt=A!==Y,ft=q!==F,It=!b.isPaddingEqual(ne),Yt=$t=>Zt=>{const zn=Zt*yt,lr=1/ut(zn);$t.zoom=Zt===1?V:C+$t.scaleZoom(lr),Wt&&($t.bearing=s.number(A,Y,Zt)),ft&&($t.pitch=s.number(F,q,Zt)),It&&($t.interpolatePadding(z,ne,Zt),Se=$t.centerPoint.add(be));const Tn=Zt===1?Te:$t.unproject(re.add(ye.mult(Lt(zn))).mult(lr));return $t.setLocationAtPoint($t.renderWorldCopies?Tn.wrap():Tn,Se),$t._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(m),$t};if(d.preloadOnly){const $t=this._emulate(Yt,d.duration,b);return this._preloadTiles($t),this}return this._zooming=!0,this._rotating=Wt,this._pitching=ft,this._padding=It,this._prepareEase(m,!1),this._ease(Yt(b),()=>this._afterEase(m),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,m)}if(!d){const b=this.handlers;b&&b.stop(!1)}return this}_ease(d,m,b){b.animate===!1||b.duration===0?(d(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=b,this._onEaseFrame=d,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,m){d=s.wrap(d,-180,180);const b=Math.abs(d-m);return Math.abs(d-360-m)<b&&(d-=360),Math.abs(d+360-m)<b&&(d+=360),d}_normalizeCenter(d){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const b=d.lng-m.center.lng;d.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(d){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(d&&d.essential)}_emulate(d,m,b){const C=Math.ceil(15*m/1e3),A=[],F=d(b.clone());for(let z=0;z<=C;z++){const V=F(z/C);A.push(V.clone())}return A}}class En{constructor(d={}){this.options=d,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const m=this.options&&this.options.compact;return this._map=d,this._container=M("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=M("button","mapboxgl-ctrl-attrib-button",this._container),M("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,m){const b=this._map._getUIString(`AttributionControl.${m}`);d.setAttribute("aria-label",b),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(d){const b=m.reduce((C,A,F)=>(A.value&&(C+=`${A.key}=${A.value}${F<m.length-1?"&":""}`),C),"?");d.href=`${s.config.FEEDBACK_URL}/${b}#${oh(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const m=this._map.style._sourceCaches;for(const C in m){const A=m[C];if(A.used){const F=A.getSource();F.attribution&&d.indexOf(F.attribution)<0&&d.push(F.attribution)}}d.sort((C,A)=>C.length-A.length),d=d.filter((C,A)=>{for(let F=A+1;F<d.length;F++)if(d[F].indexOf(C)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const b=d.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,d.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class _y{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=M("div","mapboxgl-ctrl");const m=M("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&d.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(Object.entries(d).length===0)return!0;for(const m in d){const b=d[m].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const m=d[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class by{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const m=++this._id;return this._queue.push({callback:d,id:m,cancelled:!1}),m}remove(d){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const C of b)if(C.id===d)return void(C.cancelled=!0)}run(d=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Bd(y,d,m){if(y=new s.LngLat(y.lng,y.lat),d){const b=new s.LngLat(y.lng-360,y.lat),C=new s.LngLat(y.lng+360,y.lat),A=360*Math.ceil(Math.abs(y.lng-m.center.lng)/360),F=m.locationPoint(y).distSqr(d),z=d.x<0||d.y<0||d.x>m.width||d.y>m.height;m.locationPoint(b).distSqr(d)<F&&(z||Math.abs(b.lng-m.center.lng)<A)?y=b:m.locationPoint(C).distSqr(d)<F&&(z||Math.abs(C.lng-m.center.lng)<A)&&(y=C)}for(;Math.abs(y.lng-m.center.lng)>180;){const b=m.locationPoint(y);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;y.lng>m.center.lng?y.lng-=360:y.lng+=360}return y}const bu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class gn extends s.Evented{constructor(d,m){if(super(),(d instanceof s.window.HTMLElement||m)&&(d=s.extend({element:d},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=s.Point.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=M("div");const C=41,A=27,F=P("svg",{display:"block",height:C*this._scale+"px",width:A*this._scale+"px",viewBox:`0 0 ${A} ${C}`},this._element),z=P("radialGradient",{id:"shadowGradient"},P("defs",{},F));P("stop",{offset:"10%","stop-opacity":.4},z),P("stop",{offset:"100%","stop-opacity":.05},z),P("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},F),P("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},F),P("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},F),P("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},F),this._offset=s.Point.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const b=this._element.classList;for(const C in bu)b.remove(`mapboxgl-marker-anchor-${C}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=s.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const C=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const m=d.code,b=d.charCode||d.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(d){const m=d.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,m=this._pos;if(!d||!m)return!1;const b=d.unproject(m),C=d.getFreeCameraOptions();if(!C.position)return!1;const A=C.position.toLngLat();return A.distanceTo(b)<.9*A.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const m=this._pos;if(!m||m.x<0||m.x>d.transform.width||m.y<0||m.y>d.transform.height)return void this._clearFadeTimer();const b=d.unproject(m);let C;d._showingGlobe()&&s.isLngLatBehindGlobe(d.transform,this._lngLat)?C=0:(C=1-d._queryFogOpacity(b),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(C*=this._occludedOpacity)),this._element.style.opacity=`${C}`,this._element.style.pointerEvents=C>0?"auto":"none",this._popup&&this._popup._setOpacity(C),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${d.x}px,${d.y}px)
            ${bu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const d=this._pos,m=this._map,b=this.getPitchAlignment();if(!m||!d||b!=="map")return"";if(!m._showingGlobe()){const V=m.getPitch();return V?`rotateX(${V}deg)`:""}const C=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),A=d.sub(s.globeCenterToScreenPoint(m.transform)),F=Math.abs(A.x)+Math.abs(A.y);if(F===0)return"";const z=C/F;return`rotateX(${-A.y*z}deg) rotateY(${A.x*z}deg)`}_calculateZTransform(){const d=this._pos,m=this._map;if(!m||!d)return"";let b=0;const C=this.getRotationAlignment();if(C==="map")if(m._showingGlobe()){const A=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),F=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(A);b=s.radToDeg(Math.atan2(F.y,F.x))-90}else b=-m.getBearing();else if(C==="horizon"){const A=s.smoothstep(4,6,m.getZoom()),F=s.globeCenterToScreenPoint(m.transform);F.y+=A*m.transform.height;const z=d.sub(F),V=s.radToDeg(Math.atan2(z.y,z.x));b=(V>90?V-270:V+90)*(1-A)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(d){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Bd(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),d===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),m._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=s.Point.convert(d),this._update(),this}_onMove(d){const m=this._map;if(!m)return;const b=this._pointerdownPos,C=this._positionDelta;if(b&&C){if(!this._isDragging){const A=this._clickTolerance||m._clickTolerance;if(d.point.dist(b)<A)return;this._isDragging=!0}this._pos=d.point.sub(C),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(d){const m=this._map,b=this._pos;m&&b&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(b),this._pointerdownPos=d.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const m=this._map;return m&&(d?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const xy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},RA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qx(y=new s.Point(0,0),d="bottom"){if(typeof y=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(d){case"top":return new s.Point(0,y);case"top-left":return new s.Point(m,m);case"top-right":return new s.Point(-m,m);case"bottom":return new s.Point(0,-y);case"bottom-left":return new s.Point(m,-m);case"bottom-right":return new s.Point(-m,-m);case"left":return new s.Point(y,0);case"right":return new s.Point(-y,0)}return new s.Point(0,0)}return y instanceof s.Point||Array.isArray(y)?s.Point.convert(y):s.Point.convert(y[d]||[0,0])}class wy{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const m=s.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,m,b){this._start=this.getValue(m),this._end=d,this._startTime=m,this._endTime=m+b}}const e1={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},t1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},OA={showCompass:!0,showZoom:!0,visualizePitch:!1};class LA{constructor(d,m,b=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new py({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,b&&(this.mousePitch=new my({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(d,m){this.mouseRotate.mousedown(d,m),this.mousePitch&&this.mousePitch.mousedown(d,m),O()}move(d,m){const b=this.map,C=this.mouseRotate.mousemoveWindow(d,m),A=C&&C.bearingDelta;if(A&&b.setBearing(b.getBearing()+A),this.mousePitch){const F=this.mousePitch.mousemoveWindow(d,m),z=F&&F.pitchDelta;z&&b.setPitch(b.getPitch()+z)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){k(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(s.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),U(this.element,d)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,U(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=X(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Sy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ey={maxWidth:100,unit:"metric"},Cy={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Dd={version:s.version,supported:v,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends cm{constructor(y){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(y=s.extend({},t1,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(y.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Id(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),y),this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._useWebGL2=y.useWebGL2,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._optimizeForTerrain=y.optimizeForTerrain,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new by,this._domRenderTaskQueue=new by,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},e1,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new wy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,typeof y.container=="string"){if(this._container=s.window.document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new nl(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,y.style&&this.setStyle(y.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this._hash=y.hash&&new uy(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),y.attributionControl&&this.addControl(new En({customAttribution:y.customAttribution})),this._logoControl=new _y,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new s.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new s.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(y,d){if(d===void 0&&(d=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=y.onAdd(this);this._controls.push(y);const b=this._controlPositions[d];return d.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(y);return d>-1&&this._controls.splice(d,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new s.Event("movestart",y)).fire(new s.Event("move",y)),this.fire(new s.Event("resize",y)),d&&this.fire(new s.Event("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(s.LngLatBounds.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?s.window.navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(d=>d==="auto"?s.window.navigator.language:d):y}setLanguage(y){const d=this._parseLanguage(y);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,d=y.projection.name;let m;d==="globe"&&y.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(y.setMercatorFromTransition(),m=!0):d==="mercator"&&y.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(y.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,d){return this._updateProjection(y||d||{name:"mercator"})}_updateProjection(y){let d;if(d=y.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(y){return this.transform.locationPoint3D(s.LngLat.convert(y))}unproject(y){return this.transform.pointLocation3D(s.Point.convert(y))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,d,m){if(y==="mouseenter"||y==="mouseover"){let b=!1;const C=F=>{const z=d.filter(Y=>this.getLayer(Y)),V=z.length?this.queryRenderedFeatures(F.point,{layers:z}):[];V.length?b||(b=!0,m.call(this,new zo(y,this,F.originalEvent,{features:V}))):b=!1},A=()=>{b=!1};return{layers:new Set(d),listener:m,delegates:{mousemove:C,mouseout:A}}}if(y==="mouseleave"||y==="mouseout"){let b=!1;const C=F=>{const z=d.filter(V=>this.getLayer(V));(z.length?this.queryRenderedFeatures(F.point,{layers:z}):[]).length?b=!0:b&&(b=!1,m.call(this,new zo(y,this,F.originalEvent)))},A=F=>{b&&(b=!1,m.call(this,new zo(y,this,F.originalEvent)))};return{layers:new Set(d),listener:m,delegates:{mousemove:C,mouseout:A}}}{const b=C=>{const A=d.filter(z=>this.getLayer(z)),F=A.length?this.queryRenderedFeatures(C.point,{layers:A}):[];F.length&&(C.features=F,m.call(this,C),delete C.features)};return{layers:new Set(d),listener:m,delegates:{[y]:b}}}}on(y,d,m){if(m===void 0)return super.on(y,d);Array.isArray(d)||(d=[d]);const b=this._createDelegatedListener(y,d,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(b);for(const C in b.delegates)this.on(C,b.delegates[C]);return this}once(y,d,m){if(m===void 0)return super.once(y,d);Array.isArray(d)||(d=[d]);const b=this._createDelegatedListener(y,d,m);for(const C in b.delegates)this.once(C,b.delegates[C]);return this}off(y,d,m){if(m===void 0)return super.off(y,d);d=new Set(Array.isArray(d)?d:[d]);const b=(A,F)=>{if(A.size!==F.size)return!1;for(const z of A)if(!F.has(z))return!1;return!0},C=this._delegatedListeners?this._delegatedListeners[y]:void 0;return C&&(A=>{for(let F=0;F<A.length;F++){const z=A[F];if(z.listener===m&&b(z.layers,d)){for(const V in z.delegates)this.off(V,z.delegates[V]);return A.splice(F,1),this}}})(C),this}queryRenderedFeatures(y,d){return this.style?(d!==void 0||y===void 0||y instanceof s.Point||Array.isArray(y)||(d=y,y=void 0),this.style.queryRenderedFeatures(y=y||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(y,d){return this.style.querySourceFeatures(y,d)}isPointOnSurface(y){const{name:d}=this.transform.projection;return d!=="globe"&&d!=="mercator"&&s.warnOnce(`${d} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(y))}setStyle(y,d){return(d=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&y?(this._diffStyle(y,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(y,d))}_getUIString(y){const d=this._locale[y];if(d==null)throw new Error(`Missing UI string '${y}'`);return d}_updateStyle(y,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y&&(this.style=new el(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y):this.style.loadJSON(y)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new el(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,d){if(typeof y=="string"){const m=this._requestManager.normalizeStyleURL(y),b=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(b,(C,A)=>{C?this.fire(new s.ErrorEvent(C)):A&&this._updateDiff(A,d)})}else typeof y=="object"&&this._updateDiff(y,d)}_updateDiff(y,d){try{this.style.setState(y)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(y,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(y,d){return this._lazyInitEmptyStyle(),this.style.addSource(y,d),this._update(!0)}isSourceLoaded(y){return!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){const y=this.style&&this.style._sourceCaches;for(const d in y){const m=y[d]._tiles;for(const b in m){const C=m[b];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}addSourceType(y,d,m){this._lazyInitEmptyStyle(),this.style.addSourceType(y,d,m)}removeSource(y){return this.style.removeSource(y),this._updateTerrain(),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,d,{pixelRatio:m=1,sdf:b=!1,stretchX:C,stretchY:A,content:F}={}){if(this._lazyInitEmptyStyle(),d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap){const{width:z,height:V,data:Y}=s.exported.getImageData(d);this.style.addImage(y,{data:new s.RGBAImage({width:z,height:V},Y),pixelRatio:m,stretchX:C,stretchY:A,content:F,sdf:b,version:0})}else if(d.width===void 0||d.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:V}=d,Y=d;this.style.addImage(y,{data:new s.RGBAImage({width:z,height:V},new Uint8Array(Y.data)),pixelRatio:m,stretchX:C,stretchY:A,content:F,sdf:b,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y)}}updateImage(y,d){const m=this.style.getImage(y);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap?s.exported.getImageData(d):d,{width:C,height:A}=b;C!==void 0&&A!==void 0?C===m.data.width&&A===m.data.height?(m.data.replace(b.data,!(d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap)),this.style.updateImage(y,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${C}, ${A})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,d){s.getImage(this._requestManager.transformRequest(y,s.ResourceType.Image),(m,b)=>{d(m,b instanceof s.window.HTMLImageElement?s.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(y,d){return this._lazyInitEmptyStyle(),this.style.addLayer(y,d),this._update(!0)}moveLayer(y,d){return this.style.moveLayer(y,d),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,d,m){return this.style.setLayerZoomRange(y,d,m),this._update(!0)}setFilter(y,d,m={}){return this.style.setFilter(y,d,m),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,d,m,b={}){return this.style.setPaintProperty(y,d,m,b),this._update(!0)}getPaintProperty(y,d){return this.style.getPaintProperty(y,d)}setLayoutProperty(y,d,m,b={}){return this.style.setLayoutProperty(y,d,m,b),this._update(!0)}getLayoutProperty(y,d){return this.style.getLayoutProperty(y,d)}setLight(y,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(y),this.transform):0}setFeatureState(y,d){return this.style.setFeatureState(y,d),this._update()}removeFeatureState(y,d){return this.style.removeFeatureState(y,d),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let m,b,C,A=this._container;for(;A&&(!b||!C);){const F=s.window.getComputedStyle(A).transform;F&&F!=="none"&&(m=F.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(b=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(C=m[3])),A=A.parentElement}this._containerWidth=b?Math.abs(y/b):y,this._containerHeight=C?Math.abs(d/C):d}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=M("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=M("div","mapboxgl-canvas-container",y);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=M("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=M("div","mapboxgl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=M("div",`mapboxgl-ctrl-${C}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,d){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(y),this._canvas.height=m*Math.ceil(d),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${d}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const d=this._markers.indexOf(y);d!==-1&&this._markers.splice(d,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const d=this._popups.indexOf(y);d!==-1&&this._popups.splice(d,1)}_setupPainter(){const y=s.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",y),m=d||this._canvas.getContext("webgl",y)||this._canvas.getContext("experimental-webgl",y);m?(this._useWebGL2&&!d&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new Md(m,this.transform,!!d),this.on("data",b=>{b.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let d;const m=this.painter.context.extTimerQuery,b=s.exported.now();if(this.listens("gpu-timing-frame")&&(d=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,V=this.transform.pitch,Y=s.exported.now(),q=new s.EvaluationParameters(z,{now:Y,fadeDuration:C,pitch:V,transition:this.style.getTransition()});this.style.update(q)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let A=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),A=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):A=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const z=s.exported.now()-b;m.endQueryEXT(m.TIME_ELAPSED_EXT,d),setTimeout(()=>{const V=m.getQueryObjectEXT(d,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(d),this.fire(new s.Event("gpu-timing-frame",{cpuTime:z,gpuTime:V})),s.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:V}})},50)}if(this.listens("gpu-timing-layer")){const z=this.painter.collectGpuTimers();setTimeout(()=>{const V=this.painter.queryGpuTimers(z);this.fire(new s.Event("gpu-timing-layer",{layerTimes:V}))},50)}if(this.listens("gpu-timing-deferred-render")){const z=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const V=this.painter.queryGpuTimeDeferredRender(z);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:V}))},50)}const F=this._sourcesDirty||this._styleDirty||this._placementDirty||A;if(F||this._repaint)this.triggerRepaint();else{const z=!this.isMoving()&&this.loaded();if(z&&(A=this._updateAverageElevation(b,!0)),A)this.triggerRepaint();else if(this._triggerFrame(!1),z&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const V=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:V})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||F||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const d of this._markers)y&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!y||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(y,d=!1){const m=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((d||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const b=this.transform.averageElevation;let C=this.transform.sampleAverageElevation(),A=!1;this.transform.elevation&&(A=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=y;const F=Math.abs(b-C);if(F>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(C),m(C);this._averageElevation.easeTo(C,y,300)}else if(F>1e-4)return this._averageElevation.jumpTo(C),m(C)}return!!this._averageElevation.isEasing(y)&&m(this._averageElevation.getValue(y))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===s.AUTH_ERR_MSG||y.status===401)){const d=this.painter.context.gl;s.storeAuthState(d,!1),this._logoControl instanceof _y&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const m=this.painter.context.gl,b=m.createFramebuffer();function C(A){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,A,0);const F=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,F),F}return m.bindFramebuffer(m.FRAMEBUFFER,b),this._canvasPixelComparison(C(y),d.canvasCopies.map(C),d.timeStamps)}_canvasPixelComparison(y,d,m){let b=m[1]-m[0];const C=y.length/4;for(let A=0;A<d.length;A++){const F=d[A];let z=0;for(let V=0;V<F.length;V+=4)F[V]===y[V]&&F[V+1]===y[V+1]&&F[V+2]===y[V+2]&&F[V+3]===y[V+3]&&(z+=1);b+=(m[A+2]-m[A+1])*(1-z/C)}return b}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=s.exported.frame(d=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(d)}))}_preloadTiles(y){const d=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(d,(m,b)=>m._preloadTiles(y,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,y&&this._update())}_setCacheLimits(y,d){s.setCacheLimits(y,d)}get version(){return s.version}},NavigationControl:class{constructor(y){this.options=s.extend({},OA,y),this._container=M("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),M("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),M("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:d}):m.resetNorth({},{originalEvent:d}))}),this._compassIcon=M("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const d=y.getZoom(),m=d===y.getMaxZoom(),b=d===y.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new LA(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,d){const m=M("button",y,this._container);return m.type="button",m.addEventListener("click",d),m}_setButtonTitle(y,d){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${d}`);y.setAttribute("aria-label",m),y.firstElementChild&&y.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(y){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Sy,y),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Rd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=M("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const d=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,y(m)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(m=>d(m.state!=="denied")).catch(()=>d()):d()}_isOutOfMapMaxBounds(y){const d=this._map.getMaxBounds(),m=y.coords;return!!d&&(m.longitude<d.getWest()||m.longitude>d.getEast()||m.latitude<d.getSouth()||m.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",y)),this._finish()}}_updateCamera(y){const d=new s.LngLat(y.coords.longitude,y.coords.latitude),m=y.coords.accuracy,b=this._map.getBearing(),C=s.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(m),C,{geolocateSource:!0})}_updateMarker(y){if(y){const d=new s.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,d=s.mercatorZfromAltitude(1,y._center.lat)*y.worldSize,m=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=M("button","mapboxgl-ctrl-geolocate",this._container),M("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M("div","mapboxgl-user-location"),this._dotElement.appendChild(M("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(M("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new gn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=M("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new gn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(d=>{d==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:En,ScaleControl:class{constructor(y){this.options=s.extend({},Ey,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,d=this._map,m=d._containerHeight/2,b=d._containerWidth/2-y/2,C=d.unproject([b,m]),A=d.unproject([b+y,m]),F=C.distanceTo(A);if(this.options.unit==="imperial"){const z=3.2808*F;z>5280?this._setScale(y,z/5280,"mile"):this._setScale(y,z,"foot")}else this.options.unit==="nautical"?this._setScale(y,F/1852,"nautical-mile"):F>=1e3?this._setScale(y,F/1e3,"kilometer"):this._setScale(y,F,"meter")}_setScale(y,d,m){this._map._requestDomTask(()=>{const b=function(A){const F=Math.pow(10,`${Math.floor(A)}`.length-1);let z=A/F;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(V){const Y=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*Y)/Y}(z),F*z}(d),C=b/d;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(b):`${b}&nbsp;${Cy[m]}`,this._container.style.width=y*C+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=M("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y){this._fullscreen=!1,y&&y.container&&(y.container instanceof s.window.HTMLElement?this._container=y.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=M("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=M("button","mapboxgl-ctrl-fullscreen",this._controlContainer);M("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(y){super(),this.options=s.extend(Object.create(xy),y),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=s.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(s.window.document.createTextNode(y))}setHTML(y){const d=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let b;for(m.innerHTML=y;b=m.firstChild,b;)d.appendChild(b);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=M("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(y),this.options.closeButton){const m=this._closeButton=M("button","mapboxgl-popup-close-button",d);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let d;return this._classList.delete(y)?d=!1:(this._classList.add(y),d=!0),this._updateClassList(),d}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const d=this._map,m=this._container,b=this._pos;if(!d||!m||!b)return"bottom";const C=m.offsetWidth,A=m.offsetHeight,F=b.x<C/2,z=b.x>d.transform.width-C/2;if(b.y+y<A)return F?"top-left":z?"top-right":"top";if(b.y>d.transform.height-A){if(F)return"bottom-left";if(z)return"bottom-right"}return F?"left":z?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),y.className=d.join(" ")}_update(y){const d=this._map,m=this._content;if(!d||!this._lngLat&&!this._trackPointer||!m)return;let b=this._container;if(b||(b=this._container=M("div","mapboxgl-popup",d.getContainer()),this._tip=M("div","mapboxgl-popup-tip",b),b.appendChild(m)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Bd(this._lngLat,this._pos,d.transform)),!this._trackPointer||y){const C=this._pos=this._trackPointer&&y?y:d.project(this._lngLat),A=Qx(this.options.offset),F=this._anchor=this._getAnchor(A.y),z=Qx(this.options.offset,F),V=C.add(z).round();d._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${bu[F]} translate(${V.x}px,${V.y}px)`)})}if(!this._marker&&d._showingGlobe()){const C=s.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(C)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(RA);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:gn,Style:el,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:zx,Evented:s.Evented,config:s.config,prewarm:function(){ri().acquire(dr)},clearPrewarmedResources:function(){const y=Yn;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(dr),Yn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(y){s.config.ACCESS_TOKEN=y},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(y){s.config.API_URL=y},get workerCount(){return gr.workerCount},set workerCount(y){gr.workerCount=y},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){s.config.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){s.clearTileCache(y)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Dd});var f=o;return f})})(xK);var lBe=xK.exports;const cu=Ep(lBe);var cBe=1e-7;function iB(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function SK(t,e){if(t===e)return!0;if(iB(t)&&iB(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!SK(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=cBe}function zw(t,e,n){return Math.max(e,Math.min(n,t))}function uC(t,e,n){return iB(t)?t.map(function(r,i){return uC(r,e[i],n)}):n*e+(1-n)*t}function nc(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qh={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85},GI={pitch:0,bearing:0,altitude:1.5},YU=5,uBe=1.2,$g=function(){function t(e){var n=e.width,r=e.height,i=e.latitude,o=e.longitude,l=e.zoom,f=e.bearing,s=f===void 0?GI.bearing:f,p=e.pitch,v=p===void 0?GI.pitch:p,x=e.altitude,S=x===void 0?GI.altitude:x,M=e.maxZoom,P=M===void 0?Qh.maxZoom:M,R=e.minZoom,D=R===void 0?Qh.minZoom:R,B=e.maxPitch,O=B===void 0?Qh.maxPitch:B,k=e.minPitch,$=k===void 0?Qh.minPitch:k,H=e.transitionDuration,U=e.transitionEasing,X=e.transitionInterpolator,J=e.transitionInterruption,K=e.startPanLngLat,Q=e.startZoomLngLat,ce=e.startRotatePos,ge=e.startBearing,ae=e.startPitch,ve=e.startZoom;Di(this,t),nc(Number.isFinite(n),"`width` must be supplied"),nc(Number.isFinite(r),"`height` must be supplied"),nc(Number.isFinite(o),"`longitude` must be supplied"),nc(Number.isFinite(i),"`latitude` must be supplied"),nc(Number.isFinite(l),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:o,zoom:l,bearing:s,pitch:v,altitude:S,maxZoom:P,minZoom:D,maxPitch:O,minPitch:$,transitionDuration:H,transitionEasing:U,transitionInterpolator:X,transitionInterruption:J}),this._state={startPanLngLat:K,startZoomLngLat:Q,startRotatePos:ce,startBearing:ge,startPitch:ae,startZoom:ve}}return ki(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(n){var r=n.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(r)})}},{key:"pan",value:function(n){var r=n.pos,i=n.startPos,o=this._state.startPanLngLat||this._unproject(i);if(!o)return this;var l=this._calculateNewLngLat({startPanLngLat:o,pos:r}),f=ct(l,2),s=f[0],p=f[1];return this._getUpdatedMapState({longitude:s,latitude:p})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(n){var r=n.pos;return this._getUpdatedMapState({startRotatePos:r,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(n){var r=n.pos,i=n.deltaAngleX,o=i===void 0?0:i,l=n.deltaAngleY,f=l===void 0?0:l,s=this._state,p=s.startRotatePos,v=s.startBearing,x=s.startPitch;if(!Number.isFinite(v)||!Number.isFinite(x))return this;var S;return r?S=this._calculateNewPitchAndBearing(qU(qU({},this._getRotationParams(r,p)),{},{startBearing:v,startPitch:x})):S={bearing:v+o,pitch:x+f},this._getUpdatedMapState(S)}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(n){var r=n.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(r),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(n){var r=n.pos,i=n.startPos,o=n.scale;nc(o>0,"`scale` must be a positive number");var l=this._state,f=l.startZoom,s=l.startZoomLngLat;Number.isFinite(f)||(f=this._viewportProps.zoom,s=this._unproject(i)||this._unproject(r)),nc(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var p=this._calculateNewZoom({scale:o,startZoom:f||0}),v=new lp(Object.assign({},this._viewportProps,{zoom:p})),x=v.getMapCenterByLngLatPosition({lngLat:s,pos:r}),S=ct(x,2),M=S[0],P=S[1];return this._getUpdatedMapState({zoom:p,longitude:M,latitude:P})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(n){return new t(Object.assign({},this._viewportProps,this._state,n))}},{key:"_applyConstraints",value:function(n){var r=n.maxZoom,i=n.minZoom,o=n.zoom;n.zoom=zw(o,i,r);var l=n.maxPitch,f=n.minPitch,s=n.pitch;return n.pitch=zw(s,f,l),Object.assign(n,kZ(n)),n}},{key:"_unproject",value:function(n){var r=new lp(this._viewportProps);return n&&r.unproject(n)}},{key:"_calculateNewLngLat",value:function(n){var r=n.startPanLngLat,i=n.pos,o=new lp(this._viewportProps);return o.getMapCenterByLngLatPosition({lngLat:r,pos:i})}},{key:"_calculateNewZoom",value:function(n){var r=n.scale,i=n.startZoom,o=this._viewportProps,l=o.maxZoom,f=o.minZoom,s=i+Math.log2(r);return zw(s,f,l)}},{key:"_calculateNewPitchAndBearing",value:function(n){var r=n.deltaScaleX,i=n.deltaScaleY,o=n.startBearing,l=n.startPitch;i=zw(i,-1,1);var f=this._viewportProps,s=f.minPitch,p=f.maxPitch,v=o+180*r,x=l;return i>0?x=l+i*(p-l):i<0&&(x=l-i*(s-l)),{pitch:x,bearing:v}}},{key:"_getRotationParams",value:function(n,r){var i=n[0]-r[0],o=n[1]-r[1],l=n[1],f=r[1],s=this._viewportProps,p=s.width,v=s.height,x=i/p,S=0;return o>0?Math.abs(v-f)>YU&&(S=o/(f-v)*uBe):o<0&&f>YU&&(S=1-l/f),S=Math.min(1,Math.max(-1,S)),{deltaScaleX:x,deltaScaleY:S}}}]),t}();function dBe(t){return t[0].toLowerCase()+t.slice(1)}function fBe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qh;for(var n in e){var r=n.slice(0,3),i=dBe(n.slice(3));if(r==="min"&&t[i]<e[n]||r==="max"&&t[i]>e[n])return!1}return!0}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Dp=E.createContext({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),Ck=Dp.Provider;function hBe(t){var e=t.value,n=t.children,r=E.useState(null),i=ct(r,2),o=i[0],l=i[1],f=E.useContext(Dp);return e=KU(KU({setMap:l},f),{},{map:f&&f.map||o},e),E.createElement(Ck,{value:e},n)}Dp.Provider=hBe;var oB=typeof window<"u"?E.useLayoutEffect:E.useEffect;function zT(t,e){var n=e.longitude,r=e.latitude;return t&&t.queryTerrainElevation&&t.queryTerrainElevation([n,r])||0}function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pBe="https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens",EK="A valid API access token is required to use Mapbox data";function mBe(){}function CK(t){var e=t.map,n=t.props,r=t.width,i=t.height,o=Jl(Jl(Jl({},n),n.viewState),{},{width:r,height:i});return o.position=[0,0,zT(e,o)],new lp(o)}var gBe=401,QU={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},vBe=Object.assign({},Bp.propTypes,{width:ht.oneOfType([ht.number,ht.string]),height:ht.oneOfType([ht.number,ht.string]),onResize:ht.func,disableTokenWarning:ht.bool,visible:ht.bool,className:ht.string,style:ht.object,visibilityConstraints:ht.object}),yBe=Object.assign({},Bp.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:mBe,className:"",style:null,visibilityConstraints:Qh});function _Be(){var t={position:"absolute",left:0,top:0};return E.createElement("div",{key:"warning",id:"no-token-warning",style:t},E.createElement("h3",{key:"header"},EK),E.createElement("div",{key:"text"},"For information on setting up your basemap, read"),E.createElement("a",{key:"link",href:pBe},"Note on Map Tokens"))}function bBe(t){return{getMap:function(){return t.current&&t.current.getMap()},queryRenderedFeatures:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.current&&t.current.getMap();return i&&i.queryRenderedFeatures(n,r)}}}var gd=E.forwardRef(function(t,e){var n=E.useState(!0),r=ct(n,2),i=r[0],o=r[1],l=E.useState({width:0,height:0}),f=ct(l,2),s=f[0],p=f[1],v=E.useRef(null),x=E.useRef(null),S=E.useRef(null),M=E.useRef(null),P=E.useContext(Dp);oB(function(){if(gd.supported()){var Q=new Bp(Jl(Jl(Jl({},t),s),{},{mapboxgl:cu,container:x.current,onError:function(ae){var ve=ae.error&&ae.error.status||ae.status;ve===gBe&&i&&(console.error(EK),o(!1)),t.onError(ae)}}));v.current=Q,P&&P.setMap&&P.setMap(Q.getMap());var ce=new $H(function(ge){if(ge[0].contentRect){var ae=ge[0].contentRect,ve=ae.width,Fe=ae.height;p({width:ve,height:Fe}),t.onResize({width:ve,height:Fe})}});return ce.observe(S.current),function(){Q.finalize(),v.current=null,ce.disconnect()}}},[]),oB(function(){v.current&&v.current.setProps(Jl(Jl({},t),s))});var R=v.current&&v.current.getMap();E.useImperativeHandle(e,function(){return bBe(v)},[]);var D=E.useCallback(function(Q){var ce=Q.target;ce===M.current&&ce.scrollTo(0,0)},[]),B=R&&E.createElement(Ck,{value:Jl(Jl({},P),{},{viewport:P.viewport||CK(Jl({map:R,props:t},s)),map:R,container:P.container||S.current})},E.createElement("div",{key:"map-overlays",className:"overlays",ref:M,style:QU,onScroll:D},t.children)),O=t.className,k=t.width,$=t.height,H=t.style,U=t.visibilityConstraints,X=Object.assign({position:"relative"},H,{width:k,height:$}),J=t.visible&&fBe(t.viewState||t,U),K=Object.assign({},QU,{visibility:J?"inherit":"hidden"});return E.createElement("div",{key:"map-container",ref:S,style:X},E.createElement("div",{key:"map-mapbox",ref:x,style:K,className:O}),B,!i&&!t.disableTokenWarning&&E.createElement(_Be,null))});gd.supported=function(){return cu&&cu.supported()};gd.propTypes=vBe;gd.defaultProps=yBe;function xBe(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=wBe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,l=!1,f;return{s:function(){n=t[Symbol.iterator]()},n:function(){var p=n.next();return o=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(l)throw f}}}}function wBe(t,e){if(t){if(typeof t=="string")return eV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eV(t,e)}}function eV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var TK=function(){function t(){Di(this,t),j(this,"propNames",[])}return ki(t,[{key:"arePropsEqual",value:function(n,r){var i=xBe(this.propNames||[]),o;try{for(i.s();!(o=i.n()).done;){var l=o.value;if(!SK(n[l],r[l]))return!1}}catch(f){i.e(f)}finally{i.f()}return!0}},{key:"initializeProps",value:function(n,r){return{start:n,end:r}}},{key:"interpolateProps",value:function(n,r,i){nc(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(n,r){return r.transitionDuration}}]),t}(),SBe={longitude:1,bearing:1};function dC(t){return Number.isFinite(t)||Array.isArray(t)}function EBe(t){return t in SBe}function sB(t,e,n){return EBe(t)&&Math.abs(n-e)>180&&(n=n<0?n+360:n-360),n}function HI(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=CBe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,l=!1,f;return{s:function(){n=t[Symbol.iterator]()},n:function(){var p=n.next();return o=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(l)throw f}}}}function CBe(t,e){if(t){if(typeof t=="string")return tV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tV(t,e)}}function tV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TBe(t){var e=ABe();return function(){var r=yc(t),i;if(e){var o=yc(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return iT(this,i)}}function ABe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var MBe=["longitude","latitude","zoom","bearing","pitch"],PBe=["latitude","longitude","zoom","width","height"],nV=["bearing","pitch"],IBe={speed:1.2,curve:1.414};(function(t){Sc(n,t);var e=TBe(n);function n(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Di(this,n),r=e.call(this),j(wr(r),"propNames",MBe),r.props=Object.assign({},IBe,i),r}return ki(n,[{key:"initializeProps",value:function(i,o){var l={},f={},s=HI(PBe),p;try{for(s.s();!(p=s.n()).done;){var v=p.value,x=i[v],S=o[v];nc(dC(x)&&dC(S),"".concat(v," must be supplied for transition")),l[v]=x,f[v]=sB(v,x,S)}}catch(O){s.e(O)}finally{s.f()}var M=HI(nV),P;try{for(M.s();!(P=M.n()).done;){var R=P.value,D=i[R]||0,B=o[R]||0;l[R]=D,f[R]=sB(R,D,B)}}catch(O){M.e(O)}finally{M.f()}return{start:l,end:f}}},{key:"interpolateProps",value:function(i,o,l){var f=NZ(i,o,l,this.props),s=HI(nV),p;try{for(s.s();!(p=s.n()).done;){var v=p.value;f[v]=uC(i[v],o[v],l)}}catch(x){s.e(x)}finally{s.f()}return f}},{key:"getDuration",value:function(i,o){var l=o.transitionDuration;return l==="auto"&&(l=$Z(i,o,this.props)),l}}]),n})(TK);function rV(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=RBe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,l=!1,f;return{s:function(){n=t[Symbol.iterator]()},n:function(){var p=n.next();return o=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(l)throw f}}}}function RBe(t,e){if(t){if(typeof t=="string")return iV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iV(t,e)}}function iV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OBe(t){var e=LBe();return function(){var r=yc(t),i;if(e){var o=yc(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return iT(this,i)}}function LBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var BBe=["longitude","latitude","zoom","bearing","pitch"],w_=function(t){Sc(n,t);var e=OBe(n);function n(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Di(this,n),r=e.call(this),Array.isArray(i)&&(i={transitionProps:i}),r.propNames=i.transitionProps||BBe,i.around&&(r.around=i.around),r}return ki(n,[{key:"initializeProps",value:function(i,o){var l={},f={};if(this.around){l.around=this.around;var s=new lp(i).unproject(this.around);Object.assign(f,o,{around:new lp(o).project(s),aroundLngLat:s})}var p=rV(this.propNames),v;try{for(p.s();!(v=p.n()).done;){var x=v.value,S=i[x],M=o[x];nc(dC(S)&&dC(M),"".concat(x," must be supplied for transition")),l[x]=S,f[x]=sB(x,S,M)}}catch(P){p.e(P)}finally{p.f()}return{start:l,end:f}}},{key:"interpolateProps",value:function(i,o,l){var f={},s=rV(this.propNames),p;try{for(s.s();!(p=s.n()).done;){var v=p.value;f[v]=uC(i[v],o[v],l)}}catch(R){s.e(R)}finally{s.f()}if(o.around){var x=new lp(Object.assign({},o,f)).getMapCenterByLngLatPosition({lngLat:o.aroundLngLat,pos:uC(i.around,o.around,l)}),S=ct(x,2),M=S[0],P=S[1];f.longitude=M,f.latitude=P}return f}}]),n}(TK),S_=function(){};function DBe(t,e){var n=t(e);return function(r){return 1/(1-n)*(t(r*(1-e)+e)-n)}}var E_={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4},kBe={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new w_,transitionInterruption:E_.BREAK,onTransitionStart:S_,onTransitionInterrupt:S_,onTransitionEnd:S_},Tk=function(){function t(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Di(this,t),j(this,"_animationFrame",null),j(this,"_onTransitionFrame",function(){e._animationFrame=requestAnimationFrame(e._onTransitionFrame),e._updateViewport()}),this.props=null,this.onViewportChange=n.onViewportChange||S_,this.onStateChange=n.onStateChange||S_,this.time=n.getTime||Date.now}return ki(t,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(n){var r=this.props;if(this.props=n,!r||this._shouldIgnoreViewportChange(r,n))return!1;if(this._isTransitionEnabled(n)){var i=Object.assign({},r),o=Object.assign({},n);if(this._isTransitionInProgress()&&(r.onTransitionInterrupt(),this.state.interruption===E_.SNAP_TO_END?Object.assign(i,this.state.endProps):Object.assign(i,this.state.propsInTransition),this.state.interruption===E_.UPDATE)){var l=this.time(),f=(l-this.state.startTime)/this.state.duration;o.transitionDuration=this.state.duration-(l-this.state.startTime),o.transitionEasing=DBe(this.state.easing,f),o.transitionInterpolator=i.transitionInterpolator}return o.onTransitionStart(),this._triggerTransition(i,o),!0}return this._isTransitionInProgress()&&(r.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return!!this._animationFrame}},{key:"_isTransitionEnabled",value:function(n){var r=n.transitionDuration,i=n.transitionInterpolator;return(r>0||r==="auto")&&!!i}},{key:"_isUpdateDueToCurrentTransition",value:function(n){return this.state.propsInTransition?this.state.interpolator.arePropsEqual(n,this.state.propsInTransition):!1}},{key:"_shouldIgnoreViewportChange",value:function(n,r){return n?this._isTransitionInProgress()?this.state.interruption===E_.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(n,r):!0:!0}},{key:"_triggerTransition",value:function(n,r){nc(this._isTransitionEnabled(r)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var i=r.transitionInterpolator,o=i.getDuration?i.getDuration(n,r):r.transitionDuration;if(o!==0){var l=r.transitionInterpolator.initializeProps(n,r),f={inTransition:!0,isZooming:n.zoom!==r.zoom,isPanning:n.longitude!==r.longitude||n.latitude!==r.latitude,isRotating:n.bearing!==r.bearing||n.pitch!==r.pitch};this.state={duration:o,easing:r.transitionEasing,interpolator:r.transitionInterpolator,interruption:r.transitionInterruption,startTime:this.time(),startProps:l.start,endProps:l.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(f)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var n=this.time(),r=this.state,i=r.startTime,o=r.duration,l=r.easing,f=r.interpolator,s=r.startProps,p=r.endProps,v=!1,x=(n-i)/o;x>=1&&(x=1,v=!0),x=l(x);var S=f.interpolateProps(s,p,x),M=new $g(Object.assign({},this.props,S));this.state.propsInTransition=M.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),v&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();j(Tk,"defaultProps",kBe);function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ih={transitionDuration:0},Fu={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new w_,transitionInterruption:E_.BREAK},Nw=300,$w=function(e){return 1-(1-e)*(1-e)},Km={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},AK=function(){function t(){var e=this;Di(this,t),j(this,"events",[]),j(this,"scrollZoom",!0),j(this,"dragPan",!0),j(this,"dragRotate",!0),j(this,"doubleClickZoom",!0),j(this,"touchZoom",!0),j(this,"touchRotate",!1),j(this,"keyboard",!0),j(this,"_interactionState",{isDragging:!1}),j(this,"_events",{}),j(this,"_setInteractionState",function(n){Object.assign(e._interactionState,n),e.onStateChange&&e.onStateChange(e._interactionState)}),j(this,"_onTransition",function(n,r){e.onViewportChange(n,e._interactionState,r)}),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new Tk({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return ki(t,[{key:"handleEvent",value:function(n){this.mapState=this.getMapState();var r=this._eventStartBlocked;switch(n.type){case"panstart":return r?!1:this._onPanStart(n);case"panmove":return this._onPan(n);case"panend":return this._onPanEnd(n);case"pinchstart":return r?!1:this._onPinchStart(n);case"pinchmove":return this._onPinch(n);case"pinchend":return this._onPinchEnd(n);case"tripanstart":return r?!1:this._onTriplePanStart(n);case"tripanmove":return this._onTriplePan(n);case"tripanend":return this._onTriplePanEnd(n);case"doubletap":return this._onDoubleTap(n);case"wheel":return this._onWheel(n);case"keydown":return this._onKeyDown(n);default:return!1}}},{key:"getCenter",value:function(n){var r=n.offsetCenter,i=r.x,o=r.y;return[i,o]}},{key:"isFunctionKeyPressed",value:function(n){var r=n.srcEvent;return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}},{key:"blockEvents",value:function(n){var r=this,i=setTimeout(function(){r._eventStartBlocked===i&&(r._eventStartBlocked=null)},n);this._eventStartBlocked=i}},{key:"updateViewport",value:function(n,r,i){var o=this.mapState instanceof $g?this.mapState.getViewportProps():this.mapState,l=js(js({},n.getViewportProps()),r),f=Object.keys(l).some(function(s){return o[s]!==l[s]});this._state=n.getState(),this._setInteractionState(i),f&&this.onViewportChange(l,this._interactionState,o)}},{key:"getMapState",value:function(n){return new $g(js(js(js({},this.mapStateProps),this._state),n))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(n){var r=n.onViewportChange,i=n.onStateChange,o=n.eventManager,l=o===void 0?this.eventManager:o,f=n.isInteractive,s=f===void 0?!0:f,p=n.scrollZoom,v=p===void 0?this.scrollZoom:p,x=n.dragPan,S=x===void 0?this.dragPan:x,M=n.dragRotate,P=M===void 0?this.dragRotate:M,R=n.doubleClickZoom,D=R===void 0?this.doubleClickZoom:R,B=n.touchZoom,O=B===void 0?this.touchZoom:B,k=n.touchRotate,$=k===void 0?this.touchRotate:k,H=n.keyboard,U=H===void 0?this.keyboard:H;this.onViewportChange=r,this.onStateChange=i;var X=this.mapStateProps||{},J=X.height!==n.height||X.width!==n.width;this.mapStateProps=n,J&&(this.mapState=X,this.updateViewport(new $g(n))),this._transitionManager.processViewportChange(n),this.eventManager!==l&&(this.eventManager=l,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(Km.WHEEL,s&&!!v),this.toggleEvents(Km.PAN,s&&!!(S||P)),this.toggleEvents(Km.PINCH,s&&!!(O||$)),this.toggleEvents(Km.TRIPLE_PAN,s&&!!$),this.toggleEvents(Km.DOUBLE_TAP,s&&!!D),this.toggleEvents(Km.KEYBOARD,s&&!!U),this.scrollZoom=v,this.dragPan=S,this.dragRotate=P,this.doubleClickZoom=D,this.touchZoom=O,this.touchRotate=$,this.keyboard=U}},{key:"toggleEvents",value:function(n,r){var i=this;this.eventManager&&n.forEach(function(o){i._events[o]!==r&&(i._events[o]=r,r?i.eventManager.on(o,i.handleEvent):i.eventManager.off(o,i.handleEvent))})}},{key:"_onPanStart",value:function(n){var r=this.getCenter(n);this._panRotate=this.isFunctionKeyPressed(n)||n.rightButton;var i=this._panRotate?this.mapState.rotateStart({pos:r}):this.mapState.panStart({pos:r});return this.updateViewport(i,Ih,{isDragging:!0}),!0}},{key:"_onPan",value:function(n){return this.isDragging()?this._panRotate?this._onPanRotate(n):this._onPanMove(n):!1}},{key:"_onPanEnd",value:function(n){return this.isDragging()?this._panRotate?this._onPanRotateEnd(n):this._onPanMoveEnd(n):!1}},{key:"_onPanMove",value:function(n){if(!this.dragPan)return!1;var r=this.getCenter(n),i=this.mapState.pan({pos:r});return this.updateViewport(i,Ih,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(n){if(this.dragPan){var r=this.dragPan.inertia,i=r===void 0?Nw:r;if(i&&n.velocity){var o=this.getCenter(n),l=[o[0]+n.velocityX*i/2,o[1]+n.velocityY*i/2],f=this.mapState.pan({pos:l}).panEnd();return this.updateViewport(f,js(js({},Fu),{},{transitionDuration:i,transitionEasing:$w}),{isDragging:!1,isPanning:!0}),!0}}var s=this.mapState.panEnd();return this.updateViewport(s,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(n){if(!this.dragRotate)return!1;var r=this.getCenter(n),i=this.mapState.rotate({pos:r});return this.updateViewport(i,Ih,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(n){if(this.dragRotate){var r=this.dragRotate.inertia,i=r===void 0?Nw:r;if(i&&n.velocity){var o=this.getCenter(n),l=[o[0]+n.velocityX*i/2,o[1]+n.velocityY*i/2],f=this.mapState.rotate({pos:l}).rotateEnd();return this.updateViewport(f,js(js({},Fu),{},{transitionDuration:i,transitionEasing:$w}),{isDragging:!1,isRotating:!0}),!0}}var s=this.mapState.panEnd();return this.updateViewport(s,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(n){if(!this.scrollZoom)return!1;var r=this.scrollZoom,i=r.speed,o=i===void 0?.01:i,l=r.smooth,f=l===void 0?!1:l;n.preventDefault();var s=this.getCenter(n),p=n.delta,v=2/(1+Math.exp(-Math.abs(p*o)));p<0&&v!==0&&(v=1/v);var x=this.mapState.zoom({pos:s,scale:v});return x.getViewportProps().zoom===this.mapStateProps.zoom?!1:(this.updateViewport(x,js(js({},Fu),{},{transitionInterpolator:new w_({around:s}),transitionDuration:f?250:1}),{isPanning:!0,isZooming:!0}),!0)}},{key:"_onPinchStart",value:function(n){var r=this.getCenter(n),i=this.mapState.zoomStart({pos:r}).rotateStart({pos:r});return this._startPinchRotation=n.rotation,this._lastPinchEvent=n,this.updateViewport(i,Ih,{isDragging:!0}),!0}},{key:"_onPinch",value:function(n){if(!this.isDragging()||!this.touchZoom&&!this.touchRotate)return!1;var r=this.mapState;if(this.touchZoom){var i=n.scale,o=this.getCenter(n);r=r.zoom({pos:o,scale:i})}if(this.touchRotate){var l=n.rotation;r=r.rotate({deltaAngleX:this._startPinchRotation-l})}return this.updateViewport(r,Ih,{isDragging:!0,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!!this.touchRotate}),this._lastPinchEvent=n,!0}},{key:"_onPinchEnd",value:function(n){if(!this.isDragging())return!1;if(this.touchZoom){var r=this.touchZoom.inertia,i=r===void 0?Nw:r,o=this._lastPinchEvent;if(i&&o&&n.scale!==o.scale){var l=this.getCenter(n),f=this.mapState.rotateEnd(),s=Math.log2(n.scale),p=(s-Math.log2(o.scale))/(n.deltaTime-o.deltaTime),v=Math.pow(2,s+p*i/2);return f=f.zoom({pos:l,scale:v}).zoomEnd(),this.updateViewport(f,js(js({},Fu),{},{transitionInterpolator:new w_({around:l}),transitionDuration:i,transitionEasing:$w}),{isDragging:!1,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!1}),this.blockEvents(i),!0}}var x=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(x,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(n){var r=this.getCenter(n),i=this.mapState.rotateStart({pos:r});return this.updateViewport(i,Ih,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(n){if(!this.isDragging()||!this.touchRotate)return!1;var r=this.getCenter(n);r[0]-=n.deltaX;var i=this.mapState.rotate({pos:r});return this.updateViewport(i,Ih,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(n){if(!this.isDragging())return!1;if(this.touchRotate){var r=this.touchRotate.inertia,i=r===void 0?Nw:r;if(i&&n.velocityY){var o=this.getCenter(n),l=[o[0],o[1]+=n.velocityY*i/2],f=this.mapState.rotate({pos:l});return this.updateViewport(f,js(js({},Fu),{},{transitionDuration:i,transitionEasing:$w}),{isDragging:!1,isRotating:!0}),this.blockEvents(i),!1}}var s=this.mapState.rotateEnd();return this.updateViewport(s,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(n){if(!this.doubleClickZoom)return!1;var r=this.getCenter(n),i=this.isFunctionKeyPressed(n),o=this.mapState.zoom({pos:r,scale:i?.5:2});return this.updateViewport(o,Object.assign({},Fu,{transitionInterpolator:new w_({around:r})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(n){if(!this.keyboard)return!1;var r=this.isFunctionKeyPressed(n),i=this.keyboard,o=i.zoomSpeed,l=o===void 0?2:o,f=i.moveSpeed,s=f===void 0?100:f,p=i.rotateSpeedX,v=p===void 0?15:p,x=i.rotateSpeedY,S=x===void 0?10:x,M=this.mapStateProps,P;switch(n.srcEvent.keyCode){case 189:r?P=this.getMapState({zoom:M.zoom-Math.log2(l)-1}):P=this.getMapState({zoom:M.zoom-Math.log2(l)});break;case 187:r?P=this.getMapState({zoom:M.zoom+Math.log2(l)+1}):P=this.getMapState({zoom:M.zoom+Math.log2(l)});break;case 37:r?P=this.getMapState({bearing:M.bearing-v}):P=this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:r?P=this.getMapState({bearing:M.bearing+v}):P=this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:r?P=this.getMapState({pitch:M.pitch+S}):P=this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:r?P=this.getMapState({pitch:M.pitch-S}):P=this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(P,Fu)}}]),t}();function sV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var FBe=Object.assign({},gd.propTypes,{maxZoom:ht.number,minZoom:ht.number,maxPitch:ht.number,minPitch:ht.number,onViewStateChange:ht.func,onViewportChange:ht.func,onInteractionStateChange:ht.func,transitionDuration:ht.oneOfType([ht.number,ht.string]),transitionInterpolator:ht.object,transitionInterruption:ht.number,transitionEasing:ht.func,onTransitionStart:ht.func,onTransitionInterrupt:ht.func,onTransitionEnd:ht.func,scrollZoom:ht.oneOfType([ht.bool,ht.object]),dragPan:ht.oneOfType([ht.bool,ht.object]),dragRotate:ht.oneOfType([ht.bool,ht.object]),doubleClickZoom:ht.bool,touchZoom:ht.oneOfType([ht.bool,ht.object]),touchRotate:ht.oneOfType([ht.bool,ht.object]),keyboard:ht.oneOfType([ht.bool,ht.object]),onHover:ht.func,onClick:ht.func,onDblClick:ht.func,onContextMenu:ht.func,onMouseDown:ht.func,onMouseMove:ht.func,onMouseUp:ht.func,onTouchStart:ht.func,onTouchMove:ht.func,onTouchEnd:ht.func,onMouseEnter:ht.func,onMouseLeave:ht.func,onMouseOut:ht.func,onWheel:ht.func,touchAction:ht.string,eventRecognizerOptions:ht.object,clickRadius:ht.number,interactiveLayerIds:ht.array,getCursor:ht.func,controller:ht.instanceOf(AK)}),zBe=function(e){var n=e.isDragging,r=e.isHovering;return n?"grabbing":r?"pointer":"grab"},NBe=Object.assign({},gd.defaultProps,Qh,Tk.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(e){return e.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:zBe});function Ak(t){if(t.lngLat||!t.offsetCenter)return t;var e=t.offsetCenter,n=e.x,r=e.y;if(!Number.isFinite(n)||!Number.isFinite(r))return t;var i=[n,r];if(t.point=i,this.map){var o=this.map.unproject(i);t.lngLat=[o.lng,o.lat]}return t}function MK(t){var e=this.map;if(!e||!t)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return e.queryRenderedFeatures(r?[[t[0]-r,t[1]+r],[t[0]+r,t[1]-r]]:t,n)}catch{return null}}function Hu(t,e){var n=this.props[t];n&&n(Ak.call(this,e))}function $Be(t){Hu.call(this,t.pointerType==="touch"?"onTouchStart":"onMouseDown",t)}function jBe(t){Hu.call(this,t.pointerType==="touch"?"onTouchEnd":"onMouseUp",t)}function UBe(t){if(Hu.call(this,t.pointerType==="touch"?"onTouchMove":"onMouseMove",t),!this.state.isDragging){var e=this.props,n=e.onHover,r=e.interactiveLayerIds,i;t=Ak.call(this,t),(r||n)&&(i=MK.call(this,t.point));var o=!!(r&&i&&i.length>0),l=o&&!this.state.isHovering,f=!o&&this.state.isHovering;(n||l)&&(t.features=i,n&&n(t)),l&&Hu.call(this,"onMouseEnter",t),f&&Hu.call(this,"onMouseLeave",t),(l||f)&&this.setState({isHovering:o})}}function aV(t){var e=this.props,n=e.onClick,r=e.onNativeClick,i=e.onDblClick,o=e.doubleClickZoom,l=[],f=i||o;switch(t.type){case"anyclick":l.push(r),f||l.push(n);break;case"click":f&&l.push(n);break}l=l.filter(Boolean),l.length&&(t=Ak.call(this,t),t.features=MK.call(this,t.point),l.forEach(function(s){return s(t)}))}function VBe(t){return{getMap:t.current&&t.current.getMap,queryRenderedFeatures:t.current&&t.current.queryRenderedFeatures}}var Mk=E.forwardRef(function(t,e){var n=E.useContext(Dp),r=E.useMemo(function(){return t.controller||new AK},[]),i=E.useMemo(function(){return new tK(null,{touchAction:t.touchAction,recognizerOptions:t.eventRecognizerOptions})},[]),o=E.useRef(null),l=E.useRef(null),f=E.useRef({width:0,height:0,state:{isHovering:!1,isDragging:!1}}),s=f.current;s.props=t,s.map=l.current&&l.current.getMap(),s.setState=function(U){s.state=Lu(Lu({},s.state),U),o.current.style.cursor=t.getCursor(s.state)};var p=!0,v,x,S=function(X,J,K){if(p){v=[X,J,K];return}var Q=s.props,ce=Q.onViewStateChange,ge=Q.onViewportChange;Object.defineProperty(X,"position",{get:function(){return[0,0,zT(s.map,X)]}}),ce&&ce({viewState:X,interactionState:J,oldViewState:K}),ge&&ge(X,J,K)};E.useImperativeHandle(e,function(){return VBe(l)},[]);var M=E.useMemo(function(){return Lu(Lu({},n),{},{eventManager:i,container:n.container||o.current})},[n,o.current]);M.onViewportChange=S,M.viewport=n.viewport||CK(s),s.viewport=M.viewport;var P=function(X){var J=X.isDragging,K=J===void 0?!1:J;if(K!==s.state.isDragging&&s.setState({isDragging:K}),p){x=X;return}var Q=s.props.onInteractionStateChange;Q&&Q(X)},R=function(){s.width&&s.height&&r.setOptions(Lu(Lu(Lu({},s.props),s.props.viewState),{},{isInteractive:!!(s.props.onViewStateChange||s.props.onViewportChange),onViewportChange:S,onStateChange:P,eventManager:i,width:s.width,height:s.height}))},D=function(X){var J=X.width,K=X.height;s.width=J,s.height=K,R(),s.props.onResize({width:J,height:K})};E.useEffect(function(){return i.setElement(o.current),i.on({pointerdown:$Be.bind(s),pointermove:UBe.bind(s),pointerup:jBe.bind(s),pointerleave:Hu.bind(s,"onMouseOut"),click:aV.bind(s),anyclick:aV.bind(s),dblclick:Hu.bind(s,"onDblClick"),wheel:Hu.bind(s,"onWheel"),contextmenu:Hu.bind(s,"onContextMenu")}),function(){i.destroy()}},[]),oB(function(){v&&S.apply(void 0,sn(v)),x&&P(x)}),R();var B=t.width,O=t.height,k=t.style,$=t.getCursor,H=E.useMemo(function(){return Lu(Lu({position:"relative"},k),{},{width:B,height:O,cursor:$(s.state)})},[k,B,O,$,s.state]);return(!v||!s._child)&&(s._child=E.createElement(Ck,{value:M},E.createElement("div",{key:"event-canvas",ref:o,style:H},E.createElement(gd,Mn({},t,{width:"100%",height:"100%",style:null,onResize:D,ref:l}))))),p=!1,s._child});Mk.supported=gd.supported;Mk.propTypes=FBe;Mk.defaultProps=NBe;ht.string.isRequired,ht.string;var GBe=["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade","sky"];ht.oneOf(GBe).isRequired,ht.string,ht.string,ht.string;var Xf={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},Tc={captureScroll:ht.bool,captureDrag:ht.bool,captureClick:ht.bool,captureDoubleClick:ht.bool,capturePointerMove:ht.bool};function HBe(t){var e=t.containerRef.current,n=t.context.eventManager;if(!(!e||!n)){var r={wheel:function(o){var l=t.props;l.captureScroll&&o.stopPropagation(),l.onScroll&&l.onScroll(o,t)},panstart:function(o){var l=t.props;l.captureDrag&&o.stopPropagation(),l.onDragStart&&l.onDragStart(o,t)},anyclick:function(o){var l=t.props;l.captureClick&&o.stopPropagation(),l.onNativeClick&&l.onNativeClick(o,t)},click:function(o){var l=t.props;l.captureClick&&o.stopPropagation(),l.onClick&&l.onClick(o,t)},dblclick:function(o){var l=t.props;l.captureDoubleClick&&o.stopPropagation(),l.onDoubleClick&&l.onDoubleClick(o,t)},pointermove:function(o){var l=t.props;l.capturePointerMove&&o.stopPropagation(),l.onPointerMove&&l.onPointerMove(o,t)}};return n.watch(r,e),function(){n.off(r)}}}function qf(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=E.useContext(Dp),n=E.useRef(null),r=E.useRef({props:t,state:{},context:e,containerRef:n}),i=r.current;return i.props=t,i.context=e,E.useEffect(function(){return HBe(i)},[e.eventManager]),i}function WBe(t){var e=XBe();return function(){var r=yc(t),i;if(e){var o=yc(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return iT(this,i)}}function XBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function qBe(t){var e=t.instance,n=qf(t),r=n.context,i=n.containerRef;return e._context=r,e._containerRef=i,e._render()}var PK=function(t){Sc(n,t);var e=WBe(n);function n(){var r;Di(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o)),j(wr(r),"_context",{}),j(wr(r),"_containerRef",E.createRef()),j(wr(r),"_onScroll",function(f){}),j(wr(r),"_onDragStart",function(f){}),j(wr(r),"_onDblClick",function(f){}),j(wr(r),"_onClick",function(f){}),j(wr(r),"_onPointerMove",function(f){}),r}return ki(n,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return E.createElement(qBe,Mn({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),n}(E.PureComponent);j(PK,"propTypes",Tc);j(PK,"defaultProps",Xf);function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var YBe=Object.assign({},Tc,{draggable:ht.bool,onDrag:ht.func,onDragEnd:ht.func,onDragStart:ht.func,offsetLeft:ht.number,offsetTop:ht.number}),ZBe=Object.assign({},Xf,{draggable:!1,offsetLeft:0,offsetTop:0});function IK(t){var e=t.offsetCenter,n=e.x,r=e.y;return[n,r]}function KBe(t,e){var n=t.center,r=n.x,i=n.y;if(e){var o=e.getBoundingClientRect();return[o.left-r,o.top-i]}return null}function Pk(t,e,n,r){var i=t[0]+e[0]-n.offsetLeft,o=t[1]+e[1]-n.offsetTop;return r.viewport.unproject([i,o])}function JBe(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context,l=e.containerRef,f=n.draggable;if(f){t.stopPropagation();var s=IK(t),p=KBe(t,l.current);if(i.setDragPos(s),i.setDragOffset(p),r.onDragStart&&p){var v=Object.assign({},t);v.lngLat=Pk(s,p,n,o),r.onDragStart(v)}}}function QBe(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context;t.stopPropagation();var l=IK(t);i.setDragPos(l);var f=i.dragOffset;if(r.onDrag&&f){var s=Object.assign({},t);s.lngLat=Pk(l,f,n,o),r.onDrag(s)}}function eDe(t,e){var n=e.props,r=e.callbacks,i=e.state,o=e.context;t.stopPropagation();var l=i.dragPos,f=i.dragOffset;if(i.setDragPos(null),i.setDragOffset(null),r.onDragEnd&&l&&f){var s=Object.assign({},t);s.lngLat=Pk(l,f,n,o),r.onDragEnd(s)}}function tDe(t,e){var n=e.state;t.stopPropagation(),n.setDragPos(null),n.setDragOffset(null)}function nDe(t){var e=t.context.eventManager;if(!(!e||!t.state.dragPos)){var n={panmove:function(i){return QBe(i,t)},panend:function(i){return eDe(i,t)},pancancel:function(i){return tDe(i,t)}};return e.watch(n),function(){e.off(n)}}}function rDe(t){var e=E.useState(null),n=ct(e,2),r=n[0],i=n[1],o=E.useState(null),l=ct(o,2),f=l[0],s=l[1],p=qf(cV(cV({},t),{},{onDragStart:JBe}));return p.callbacks=t,p.state.dragPos=r,p.state.setDragPos=i,p.state.dragOffset=f,p.state.setDragOffset=s,E.useEffect(function(){return nDe(p)},[p.context.eventManager,!!r]),p}var uV=typeof window<"u"&&window.devicePixelRatio||1,_b=function(e){return Math.round(e*uV)/uV},dV=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"x";if(e===null)return n;var i=r==="x"?e.offsetWidth:e.offsetHeight;return _b(n/100*i)/i*100};function fV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var oDe=Object.assign({},YBe,{className:ht.string,longitude:ht.number.isRequired,latitude:ht.number.isRequired,style:ht.object}),sDe=Object.assign({},ZBe,{className:""});function aDe(t){var e=t.props,n=t.state,r=t.context,i=e.longitude,o=e.latitude,l=e.offsetLeft,f=e.offsetTop,s=n.dragPos,p=n.dragOffset,v=r.viewport,x=r.map;if(s&&p)return[s[0]+p[0],s[1]+p[1]];var S=zT(x,{longitude:i,latitude:o}),M=v.project([i,o,S]),P=ct(M,2),R=P[0],D=P[1];return R+=l,D+=f,[R,D]}function Ik(t){var e=rDe(t),n=e.state,r=e.containerRef,i=t.children,o=t.className,l=t.draggable,f=t.style,s=n.dragPos,p=aDe(e),v=ct(p,2),x=v[0],S=v[1],M="translate(".concat(_b(x),"px, ").concat(_b(S),"px)"),P=l?s?"grabbing":"grab":"auto",R=E.useMemo(function(){var B=iDe({position:"absolute",left:0,top:0,transform:M,cursor:P},f);return E.createElement("div",{className:"mapboxgl-marker ".concat(o),ref:e.containerRef,style:B},i)},[i,o]),D=r.current;return D&&(D.style.transform=M,D.style.cursor=P),R}Ik.defaultProps=sDe;Ik.propTypes=oDe;E.memo(Ik);var bb={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},lDe=Object.keys(bb);function cDe(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.selfWidth,l=t.selfHeight,f=t.anchor,s=t.padding,p=s===void 0?0:s,v=bb[f],x=v.x,S=v.y,M=n-S*l,P=M+l,R=Math.max(0,p-M)+Math.max(0,P-i+p);if(R>0){var D=S,B=R;for(S=0;S<=1;S+=.5)M=n-S*l,P=M+l,R=Math.max(0,p-M)+Math.max(0,P-i+p),R<B&&(B=R,D=S);S=D}var O=.5;S===.5&&(x=Math.floor(x),O=1);var k=e-x*o,$=k+o,H=Math.max(0,p-k)+Math.max(0,$-r+p);if(H>0){var U=x,X=H;for(x=0;x<=1;x+=O)k=e-x*o,$=k+o,H=Math.max(0,p-k)+Math.max(0,$-r+p),H<X&&(X=H,U=x);x=U}return lDe.find(function(J){var K=bb[J];return K.x===x&&K.y===S})||f}var uDe=Object.assign({},Tc,{className:ht.string,longitude:ht.number.isRequired,latitude:ht.number.isRequired,altitude:ht.number,offsetLeft:ht.number,offsetTop:ht.number,tipSize:ht.number,closeButton:ht.bool,closeOnClick:ht.bool,anchor:ht.oneOf(Object.keys(bb)),dynamicPosition:ht.bool,sortByDepth:ht.bool,onClose:ht.func}),dDe=Object.assign({},Xf,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function fDe(t,e,n,r){var i=ct(r,2),o=i[0],l=i[1],f=t.anchor,s=t.dynamicPosition,p=t.tipSize;return n&&s?cDe({x:o,y:l,anchor:f,padding:p,width:e.width,height:e.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):f}function hDe(t,e,n,r,i){var o=ct(r,3),l=o[0],f=o[1],s=o[2],p=t.offsetLeft,v=t.offsetTop,x=t.sortByDepth,S=bb[i],M=l+p,P=f+v,R=dV(n,-S.x*100),D=dV(n,-S.y*100,"y"),B={position:"absolute",transform:`
      translate(`.concat(R,"%, ").concat(D,`%)
      translate(`).concat(_b(M),"px, ").concat(_b(P),`px)
    `),display:void 0,zIndex:void 0};return x&&(s>1||s<-1||l<0||l>e.width||f<0||f>e.height?B.display="none":B.zIndex=Math.floor((1-s)/2*1e5)),B}function Rk(t){var e=E.useRef(null),n=qf(t),r=n.context,i=n.containerRef,o=E.useState(!1),l=ct(o,2),f=l[1];E.useEffect(function(){f(!0)},[e.current]),E.useEffect(function(){if(r.eventManager&&t.closeOnClick){var H=function(){return n.props.onClose()};return r.eventManager.on("anyclick",H),function(){r.eventManager.off("anyclick",H)}}},[r.eventManager,t.closeOnClick]);var s=r.viewport,p=r.map,v=t.className,x=t.longitude,S=t.latitude,M=t.tipSize,P=t.closeButton,R=t.children,D=t.altitude;D===void 0&&(D=zT(p,{longitude:x,latitude:S}));var B=s.project([x,S,D]),O=fDe(t,s,e.current,B),k=hDe(t,s,i.current,B,O),$=E.useCallback(function(H){n.props.onClose();var U=n.context.eventManager;U&&U.once("click",function(X){return X.stopPropagation()},H.target)},[]);return E.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(O," ").concat(v),style:k,ref:i},E.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:M}}),E.createElement("div",{key:"content",ref:e,className:"mapboxgl-popup-content"},P&&E.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:$},"×"),R))}Rk.propTypes=uDe;Rk.defaultProps=dDe;E.memo(Rk);function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mDe=Object.assign({},Tc,{toggleLabel:ht.string,className:ht.string,style:ht.object,compact:ht.bool,customAttribution:ht.oneOfType([ht.string,ht.arrayOf(ht.string)])}),gDe=Object.assign({},Xf,{className:"",toggleLabel:"Toggle Attribution"});function vDe(t,e,n,r){var i=new cu.AttributionControl(t);return i._map=e,i._container=n,i._innerContainer=r,i._updateAttributions(),i._updateEditLink(),e.on("styledata",i._updateData),e.on("sourcedata",i._updateData),i}function yDe(t){t._map.off("styledata",t._updateData),t._map.off("sourcedata",t._updateData)}function Ok(t){var e=qf(t),n=e.context,r=e.containerRef,i=E.useRef(null),o=E.useState(!1),l=ct(o,2),f=l[0],s=l[1];E.useEffect(function(){var S;return n.map&&(S=vDe({customAttribution:t.customAttribution},n.map,r.current,i.current)),function(){return S&&yDe(S)}},[n.map]);var p=t.compact===void 0?n.viewport.width<=640:t.compact;E.useEffect(function(){!p&&f&&s(!1)},[p]);var v=E.useCallback(function(){return s(function(S){return!S})},[]),x=E.useMemo(function(){return pDe({position:"absolute"},t.style)},[t.style]);return E.createElement("div",{style:x,className:t.className},E.createElement("div",{ref:r,"aria-pressed":f,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(p?"mapboxgl-compact":""," ").concat(f?"mapboxgl-compact-show":"")},E.createElement("button",{type:"button",className:"mapboxgl-ctrl-attrib-button",title:t.toggleLabel,onClick:v}),E.createElement("div",{ref:i,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}Ok.propTypes=mDe;Ok.defaultProps=gDe;E.memo(Ok);function pV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _De(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bDe=Object.assign({},Tc,{className:ht.string,style:ht.object,container:ht.object,label:ht.string}),xDe=Object.assign({},Xf,{className:"",container:null,label:"Toggle fullscreen"});function Lk(t){var e=qf(t),n=e.context,r=e.containerRef,i=E.useState(!1),o=ct(i,2),l=o[0],f=o[1],s=E.useState(!1),p=ct(s,2),v=p[0],x=p[1],S=E.useState(null),M=ct(S,2),P=M[0],R=M[1];E.useEffect(function(){var H=new cu.FullscreenControl;R(H),x(H._checkFullscreenSupport());var U=function(){var J=!H._fullscreen;H._fullscreen=J,f(J)};return Uu.addEventListener(H._fullscreenchange,U),function(){Uu.removeEventListener(H._fullscreenchange,U)}},[]);var D=function(){P&&(P._container=t.container||n.container,P._onClickFullscreen())},B=E.useMemo(function(){return _De({position:"absolute"},t.style)},[t.style]);if(!v)return null;var O=t.className,k=t.label,$=l?"shrink":"fullscreen";return E.createElement("div",{style:B,className:O},E.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},E.createElement("button",{key:$,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat($),type:"button",title:k,onClick:D},E.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}Lk.propTypes=bDe;Lk.defaultProps=xDe;E.memo(Lk);var Jm;function wDe(){return Jm!==void 0?Promise.resolve(Jm):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(function(t){return Jm=t.state!=="denied",Jm}):(Jm=!!window.navigator.geolocation,Promise.resolve(Jm))}function mV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var gV=function(){},EDe=Object.assign({},Tc,{className:ht.string,style:ht.object,label:ht.string,disabledLabel:ht.string,auto:ht.bool,positionOptions:ht.object,fitBoundsOptions:ht.object,trackUserLocation:ht.bool,showUserLocation:ht.bool,showAccuracyCircle:ht.bool,showUserHeading:ht.bool,onViewStateChange:ht.func,onViewportChange:ht.func,onGeolocate:ht.func}),CDe=Object.assign({},Xf,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showUserHeading:!1,showAccuracyCircle:!0,onGeolocate:function(){}});function TDe(t){var e=new cu.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,r=e.toBounds(n);return[[r._ne.lng,r._ne.lat],[r._sw.lng,r._sw.lat]]}function ADe(t,e,n){var r=new cu.GeolocateControl(e);r._container=Uu.createElement("div"),r._map={on:function(){},_getUIString:function(){return""}},r._setupUI(!0),r._map=t.map,r._geolocateButton=n;var i=t.eventManager;return r.options.trackUserLocation&&i&&i.on("panstart",function(){r._watchState==="ACTIVE_LOCK"&&(r._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))}),r.on("geolocate",e.onGeolocate),r}function MDe(t,e){var n=e.context,r=e.props,i=TDe(t),o=n.viewport.fitBounds(i,r.fitBoundsOptions),l=o.longitude,f=o.latitude,s=o.zoom,p=Object.assign({},n.viewport,{longitude:l,latitude:f,zoom:s}),v=new $g(p),x=Object.assign({},v.getViewportProps(),Fu),S=r.onViewportChange||n.onViewportChange||gV,M=r.onViewStateChange||n.onViewStateChange||gV;M({viewState:x}),S(x)}function Bk(t){var e=qf(t),n=e.context,r=e.containerRef,i=E.useRef(null),o=E.useState(null),l=ct(o,2),f=l[0],s=l[1],p=E.useState(!1),v=ct(p,2),x=v[0],S=v[1];E.useEffect(function(){var k;return n.map&&wDe().then(function($){S($),i.current&&(k=ADe(n,t,i.current),k._updateCamera=function(H){return MDe(H,e)},s(k))}),function(){k&&k._clearWatch()}},[n.map]);var M=E.useCallback(function(){f&&(f.options=e.props,f.trigger())},[f]);E.useEffect(function(){t.auto&&M()},[f,t.auto]),E.useEffect(function(){f&&f._onZoom()},[n.viewport.zoom]);var P=t.className,R=t.label,D=t.disabledLabel,B=t.trackUserLocation,O=E.useMemo(function(){return SDe({position:"absolute"},t.style)},[t.style]);return E.createElement("div",{style:O,className:P},E.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},E.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:i,disabled:!x,"aria-pressed":!B,type:"button",title:x?R:D,"aria-label":x?R:D,onClick:M},E.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}Bk.propTypes=EDe;Bk.defaultProps=CDe;E.memo(Bk);function PDe(t,e){for(var n=(t||"").split(".").map(Number),r=(e||"").split(".").map(Number),i=0;i<3;i++){var o=n[i]||0,l=r[i]||0;if(o<l)return-1;if(o>l)return 1}return 0}function vV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var yV=function(){},RDe=Object.assign({},Tc,{className:ht.string,style:ht.object,onViewStateChange:ht.func,onViewportChange:ht.func,showCompass:ht.bool,showZoom:ht.bool,zoomInLabel:ht.string,zoomOutLabel:ht.string,compassLabel:ht.string}),ODe=Object.assign({},Xf,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"}),LDe=1,aB=2;function BDe(t){return PDe(t,"1.6.0")>=0?aB:LDe}function WI(t,e,n){var r=t.viewport,i=new $g(Object.assign({},r,n)),o=Object.assign({},i.getViewportProps(),Fu),l=e.onViewportChange||t.onViewportChange||yV,f=e.onViewStateChange||t.onViewStateChange||yV;f({viewState:o}),l(o)}function XI(t,e,n,r){return E.createElement("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n},r||E.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function DDe(t){var e=E.useMemo(function(){return t.map?BDe(t.map.version):aB},[t.map]),n=t.viewport.bearing,r={transform:"rotate(".concat(-n,"deg)")};return e===aB?E.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:r}):E.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:r})}function Dk(t){var e=qf(t),n=e.context,r=e.containerRef,i=function(){WI(n,t,{zoom:n.viewport.zoom+1})},o=function(){WI(n,t,{zoom:n.viewport.zoom-1})},l=function(){WI(n,t,{bearing:0,pitch:0})},f=t.className,s=t.showCompass,p=t.showZoom,v=t.zoomInLabel,x=t.zoomOutLabel,S=t.compassLabel,M=E.useMemo(function(){return IDe({position:"absolute"},t.style)},[t.style]);return E.createElement("div",{style:M,className:f},E.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},p&&XI("zoom-in",v,i),p&&XI("zoom-out",x,o),s&&XI("compass",S,l,DDe(n))))}Dk.propTypes=RDe;Dk.defaultProps=ODe;const kDe=E.memo(Dk);function _V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zDe=Object.assign({},Tc,{className:ht.string,style:ht.object,maxWidth:ht.number,unit:ht.oneOf(["imperial","metric","nautical"])}),NDe=Object.assign({},Xf,{className:"",maxWidth:100,unit:"metric"});function kk(t){var e=qf(t),n=e.context,r=e.containerRef,i=E.useState(null),o=ct(i,2),l=o[0],f=o[1];E.useEffect(function(){if(n.map){var p=new cu.ScaleControl;p._map=n.map,p._container=r.current,f(p)}},[n.map]),l&&(l.options=t,l._onMove&&l._onMove());var s=E.useMemo(function(){return FDe({position:"absolute"},t.style)},[t.style]);return E.createElement("div",{style:s,className:t.className},E.createElement("div",{ref:r,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}kk.propTypes=zDe;kk.defaultProps=NDe;E.memo(kk);Object.assign({},Tc,{redraw:ht.func.isRequired});Object.assign({},Tc,{redraw:ht.func.isRequired,style:ht.object});Object.assign({},Tc,{redraw:ht.func.isRequired,style:ht.object});cu&&cu.setRTLTextPlugin;const $De=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,jDe=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,UDe=1024,VDe=4,bV=()=>{},xV={10241:9987,10240:9729,10242:33071,10243:33071};function GDe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function HDe(t,e,n,r){const i=Math.min(n/e.width,r/e.height),o=Math.floor(e.width*i),l=Math.floor(e.height*i);return i===1?{data:e,width:o,height:l}:(t.canvas.height=l,t.canvas.width=o,t.clearRect(0,0,o,l),t.drawImage(e,0,0,e.width,e.height,0,0,o,l),{data:t.canvas,width:o,height:l})}function xb(t){return t&&(t.id||t.url)}function WDe(t,e,n,r){const i=t.width,o=t.height,l=new Zs(t.gl,{width:e,height:n,parameters:r});return wCe(t,l,{targetY:0,width:i,height:o}),t.delete(),l}function wV(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r],l=xb(i);t[l]={...i,x:o,y:n}}}function XDe({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:l}){let f=[];for(let s=0;s<t.length;s++){const p=t[s],v=xb(p);if(!n[v]){const{height:x,width:S}=p;r+S+e>l&&(wV(n,f,i),r=0,i=o+i+e,o=0,f=[]),f.push({icon:p,xOffset:r}),r=r+S+e,o=Math.max(o,x)}}return f.length>0&&wV(n,f,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:l,canvasHeight:GDe(o+i+e)}}function qDe(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=cx(t);for(const l of i){o.index++;const f=e(l,o),s=xb(f);if(!f)throw new Error("Icon is missing.");if(!f.url)throw new Error("Icon url is missing.");!r[s]&&(!n[s]||f.url!==n[s].url)&&(r[s]={...f,source:l,sourceIndex:o.index})}return r}class YDe{constructor(e,{onUpdate:n=bV,onError:r=bV}){j(this,"gl",void 0),j(this,"onUpdate",void 0),j(this,"onError",void 0),j(this,"_loadOptions",null),j(this,"_texture",null),j(this,"_externalTexture",null),j(this,"_mapping",{}),j(this,"_textureParameters",null),j(this,"_pendingCount",0),j(this,"_autoPacking",!1),j(this,"_xOffset",0),j(this,"_yOffset",0),j(this,"_rowHeight",0),j(this,"_buffer",VDe),j(this,"_canvasWidth",UDe),j(this,"_canvasHeight",0),j(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?xb(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var l;(l=this._texture)===null||l===void 0||l.delete(),this._texture=null,this._externalTexture=r}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(qDe(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:o,yOffset:l,rowHeight:f,canvasHeight:s}=XDe({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=f,this._mapping=i,this._xOffset=o,this._yOffset=l,this._canvasHeight=s,this._texture||(this._texture=new Zs(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||xV})),this._texture.height!==this._canvasHeight&&(this._texture=WDe(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||xV)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,YE(r.url,this._loadOptions).then(i=>{const o=xb(r),l=this._mapping[o],{x:f,y:s,width:p,height:v}=l,{data:x,width:S,height:M}=HDe(n,i,p,v);this._texture.setSubImageData({data:x,x:f+(p-S)/2,y:s+(v-M)/2,width:S,height:M}),l.width=S,l.height=M,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const RK=[0,0,0,255],ZDe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:RK},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class NT extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){return super.getShaders({vs:$De,fs:jDe,modules:[Op,Lp]})}initializeState(){this.state={iconManager:new YDe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:RK},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:l,iconMapping:f,data:s,getIcon:p,textureParameters:v}=n,{iconManager:x}=this.state,S=l||this.internalState.isAsyncPropLoading("iconAtlas");if(x.setProps({loadOptions:n.loadOptions,autoPacking:!S,iconAtlas:l,iconMapping:S?f:null,textureParameters:v}),S?r.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&x.packIcons(s,p),i.extensionsChanged){var M;const{gl:P}=this.context;(M=this.state.model)===null||M===void 0||M.delete(),this.state.model=this._getModel(P),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:l,alphaCutoff:f}=this.props,{iconManager:s}=this.state,p=s.getTexture();p&&this.state.model.setUniforms(e).setUniforms({iconsTexture:p,iconsTextureDim:[p.width,p.height],sizeUnits:vp[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:l,alphaCutoff:f}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new lu(e,{...this.getShaders(),id:this.props.id,geometry:new Zu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):Mr.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:o=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[n,r,i,o]}}j(NT,"defaultProps",ZDe);j(NT,"layerName","IconLayer");const KDe=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,JDe=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,SV=[0,0,0,255],QDe={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:SV},getLineColor:{type:"accessor",value:SV},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Fk extends Cc{getShaders(){return super.getShaders({vs:KDe,fs:JDe,modules:[Op,Lp]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:l,filled:f,billboard:s,antialiasing:p,lineWidthUnits:v,lineWidthScale:x,lineWidthMinPixels:S,lineWidthMaxPixels:M}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:l?1:0,filled:f,billboard:s,antialiasing:p,radiusUnits:vp[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:vp[v],lineWidthScale:x,lineWidthMinPixels:S,lineWidthMaxPixels:M}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new lu(e,{...this.getShaders(),id:this.props.id,geometry:new Zu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}j(Fk,"defaultProps",QDe);j(Fk,"layerName","ScatterplotLayer");const OK={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function LK(t,e,n={}){return e3e(t,n)!==e?(n3e(t,n),!0):!1}function e3e(t,e={}){return Math.sign(t3e(t,e))}function t3e(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let l=n,f=r-i;l<r;l+=i)o+=(t[l]-t[f])*(t[l+1]+t[f+1]),f=l;return o/2}function n3e(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,l=Math.floor(o/2);for(let f=0;f<l;++f){const s=n+f*i,p=n+(o-1-f)*i;for(let v=0;v<i;++v){const x=t[s+v];t[s+v]=t[p+v],t[p+v]=x}}}function cc(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function lB(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function wb(t,e,n,r,i=[]){const o=r+e*n;for(let l=0;l<n;l++)i[l]=t[o+l];return i}function cB(t,e,n,r,i=[]){let o,l;if(n&8)o=(r[3]-t[1])/(e[1]-t[1]),l=3;else if(n&4)o=(r[1]-t[1])/(e[1]-t[1]),l=1;else if(n&2)o=(r[2]-t[0])/(e[0]-t[0]),l=2;else if(n&1)o=(r[0]-t[0])/(e[0]-t[0]),l=0;else return null;for(let f=0;f<t.length;f++)i[f]=(l&1)===f?r[l]:o*(e[f]-t[f])+t[f];return i}function GS(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function BK(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:l=0,endIndex:f=t.length}=e||{},s=(f-l)/n;let p=[];const v=[p],x=wb(t,0,n,l);let S,M;const P=kK(x,i,o,[]),R=[];cc(p,x);for(let D=1;D<s;D++){for(S=wb(t,D,n,l,S),M=GS(S,P);M;){cB(x,S,M,P,R);const B=GS(R,P);B&&(cB(x,R,B,P,R),M=B),cc(p,R),lB(x,R),i3e(P,i,M),r&&p.length>n&&(p=[],v.push(p),cc(p,x)),M=GS(S,P)}cc(p,S),lB(x,S)}return r?v:v[0]}const EV=0,r3e=1;function jw(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function DK(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:l=!1}=n||{},f=[],s=[{pos:t,types:l?new Array(t.length/r).fill(r3e):null,holes:e||[]}],p=[[],[]];let v=[];for(;s.length;){const{pos:x,types:S,holes:M}=s.shift();o3e(x,r,M[0]||x.length,p),v=kK(p[0],i,o,v);const P=GS(p[1],v);if(P){let R=CV(x,S,r,0,M[0]||x.length,v,P);const D={pos:R[0].pos,types:R[0].types,holes:[]},B={pos:R[1].pos,types:R[1].types,holes:[]};s.push(D,B);for(let O=0;O<M.length;O++)R=CV(x,S,r,M[O],M[O+1]||x.length,v,P),R[0]&&(D.holes.push(D.pos.length),D.pos=jw(D.pos,R[0].pos),l&&(D.types=jw(D.types,R[0].types))),R[1]&&(B.holes.push(B.pos.length),B.pos=jw(B.pos,R[1].pos),l&&(B.types=jw(B.types,R[1].types)))}else{const R={positions:x};l&&(R.edgeTypes=S),M.length&&(R.holeIndices=M),f.push(R)}}return f}function CV(t,e,n,r,i,o,l){const f=(i-r)/n,s=[],p=[],v=[],x=[],S=[];let M,P,R;const D=wb(t,f-1,n,r);let B=Math.sign(l&8?D[1]-o[3]:D[0]-o[2]),O=e&&e[f-1],k=0,$=0;for(let H=0;H<f;H++)M=wb(t,H,n,r,M),P=Math.sign(l&8?M[1]-o[3]:M[0]-o[2]),R=e&&e[r/n+H],P&&B&&B!==P&&(cB(D,M,l,o,S),cc(s,S)&&v.push(O),cc(p,S)&&x.push(O)),P<=0?(cc(s,M)&&v.push(R),k-=P):v.length&&(v[v.length-1]=EV),P>=0?(cc(p,M)&&x.push(R),$+=P):x.length&&(x[x.length-1]=EV),lB(D,M),B=P,O=R;return[k?{pos:s,types:e&&v}:null,$?{pos:p,types:e&&x}:null]}function kK(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function i3e(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function o3e(t,e,n,r){let i=1/0,o=-1/0,l=1/0,f=-1/0;for(let s=0;s<n;s+=e){const p=t[s],v=t[s+1];i=p<i?p:i,o=p>o?p:o,l=v<l?v:l,f=v>f?v:f}return r[0][0]=i,r[0][1]=l,r[1][0]=o,r[1][1]=f,r}const s3e=85.051129;function a3e(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},l=t.slice(r,i);FK(l,n,0,i-r);const f=BK(l,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const s of f)zK(s,n);return f}function l3e(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const l=[],f=[];let s=0,p=0;for(let x=0;x<=e.length;x++){const S=e[x]||t.length,M=p,P=c3e(t,r,s,S);for(let R=P;R<S;R++)l[p++]=t[R];for(let R=s;R<P;R++)l[p++]=t[R];FK(l,r,M,p),u3e(l,r,M,p,n==null?void 0:n.maxLatitude),s=S,f[x]=p}f.pop();const v=DK(l,f,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const x of v)zK(x.positions,r);return v}function c3e(t,e,n,r){let i=-1,o=-1;for(let l=n+1;l<r;l+=e){const f=Math.abs(t[l]);f>i&&(i=f,o=l-1)}return o}function u3e(t,e,n,r,i=s3e){const o=t[n],l=t[r-e];if(Math.abs(o-l)>180){const f=wb(t,0,e,n);f[0]+=Math.round((l-o)/360)*360,cc(t,f),f[1]=Math.sign(f[1])*i,cc(t,f),f[0]=o,cc(t,f)}}function FK(t,e,n,r){let i=t[0],o;for(let l=n;l<r;l+=e){o=t[l];const f=o-i;(f>180||f<-180)&&(o-=Math.round(f/360)*360),t[l]=i=o}}function zK(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=-Math.round(n/360)*360;if(i!==0)for(let o=0;o<r;o++)t[o*e]+=i}function d3e(t,e,n,r){let i;if(Array.isArray(t[0])){const o=t.length*e;i=new Array(o);for(let l=0;l<t.length;l++)for(let f=0;f<e;f++)i[l*e+f]=t[l][f]||0}else i=t;return n?BK(i,{size:e,gridResolution:n}):r?a3e(i,{size:e}):i}const f3e=1,h3e=2,qI=4;class p3e extends hK{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?d3e(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(TV(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&TV(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:l}=n;r.fill(0,o,o+l),i?(r[o]=qI,r[o+l-2]=qI):(r[o]+=f3e,r[o+l-2]+=h3e),r[o+l-1]=qI}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:o}=n,l=new Array(3);for(let f=i,s=0;s<o;f++,s++)this.getPointOnPath(e,s,l),r[f*3]=l[0],r[f*3+1]=l[1],r[f*3+2]=l[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const o=n*i;return r[0]=e[o],r[1]=e[o+1],r[2]=i===3&&e[o+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function TV(t){return Array.isArray(t[0])}const m3e=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,g3e=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,NK=[0,0,0,255],v3e={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:NK},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},YI={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class zk extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){return super.getShaders({vs:m3e,fs:g3e,modules:[Op,Lp]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:YI,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:YI,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:YI,defaultValue:NK},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:o})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,o)}}),this.setState({pathTesselator:new p3e({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:f}=this.state,s=n.data.attributes||{};f.updateGeometry({data:n.data,geometryBuffer:s.getPath,buffers:s,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:f.instanceCount,startIndices:f.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var l;const{gl:f}=this.context;(l=this.state.model)===null||l===void 0||l.delete(),this.state.model=this._getModel(f),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:l,widthScale:f,widthMinPixels:s,widthMaxPixels:p}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:vp[l],widthScale:f,miterLimit:o,widthMinPixels:s,widthMaxPixels:p}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new lu(e,{...this.getShaders(),id:this.props.id,geometry:new Zu({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}j(zk,"defaultProps",v3e);j(zk,"layerName","PathLayer");var Nk={exports:{}};Nk.exports=$T;Nk.exports.default=$T;function $T(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=$K(t,0,i,n,!0),l=[];if(!o||o.next===o.prev)return l;var f,s,p,v,x,S,M;if(r&&(o=w3e(t,e,o,n)),t.length>80*n){f=p=t[0],s=v=t[1];for(var P=n;P<i;P+=n)x=t[P],S=t[P+1],x<f&&(f=x),S<s&&(s=S),x>p&&(p=x),S>v&&(v=S);M=Math.max(p-f,v-s),M=M!==0?32767/M:0}return Sb(o,l,n,f,s,M,0),l}function $K(t,e,n,r,i){var o,l;if(i===fB(t,e,n,r)>0)for(o=e;o<n;o+=r)l=AV(o,t[o],t[o+1],l);else for(o=n-r;o>=e;o-=r)l=AV(o,t[o],t[o+1],l);return l&&jT(l,l.next)&&(Cb(l),l=l.next),l}function wp(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(jT(n,n.next)||wo(n.prev,n,n.next)===0)){if(Cb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Sb(t,e,n,r,i,o,l){if(t){!l&&o&&A3e(t,r,i,o);for(var f=t,s,p;t.prev!==t.next;){if(s=t.prev,p=t.next,o?_3e(t,r,i,o):y3e(t)){e.push(s.i/n|0),e.push(t.i/n|0),e.push(p.i/n|0),Cb(t),t=p.next,f=p.next;continue}if(t=p,t===f){l?l===1?(t=b3e(wp(t),e,n),Sb(t,e,n,r,i,o,2)):l===2&&x3e(t,e,n,r,i,o):Sb(wp(t),e,n,r,i,o,1);break}}}}function y3e(t){var e=t.prev,n=t,r=t.next;if(wo(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,l=r.x,f=e.y,s=n.y,p=r.y,v=i<o?i<l?i:l:o<l?o:l,x=f<s?f<p?f:p:s<p?s:p,S=i>o?i>l?i:l:o>l?o:l,M=f>s?f>p?f:p:s>p?s:p,P=r.next;P!==e;){if(P.x>=v&&P.x<=S&&P.y>=x&&P.y<=M&&Cg(i,f,o,s,l,p,P.x,P.y)&&wo(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function _3e(t,e,n,r){var i=t.prev,o=t,l=t.next;if(wo(i,o,l)>=0)return!1;for(var f=i.x,s=o.x,p=l.x,v=i.y,x=o.y,S=l.y,M=f<s?f<p?f:p:s<p?s:p,P=v<x?v<S?v:S:x<S?x:S,R=f>s?f>p?f:p:s>p?s:p,D=v>x?v>S?v:S:x>S?x:S,B=uB(M,P,e,n,r),O=uB(R,D,e,n,r),k=t.prevZ,$=t.nextZ;k&&k.z>=B&&$&&$.z<=O;){if(k.x>=M&&k.x<=R&&k.y>=P&&k.y<=D&&k!==i&&k!==l&&Cg(f,v,s,x,p,S,k.x,k.y)&&wo(k.prev,k,k.next)>=0||(k=k.prevZ,$.x>=M&&$.x<=R&&$.y>=P&&$.y<=D&&$!==i&&$!==l&&Cg(f,v,s,x,p,S,$.x,$.y)&&wo($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;k&&k.z>=B;){if(k.x>=M&&k.x<=R&&k.y>=P&&k.y<=D&&k!==i&&k!==l&&Cg(f,v,s,x,p,S,k.x,k.y)&&wo(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;$&&$.z<=O;){if($.x>=M&&$.x<=R&&$.y>=P&&$.y<=D&&$!==i&&$!==l&&Cg(f,v,s,x,p,S,$.x,$.y)&&wo($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function b3e(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!jT(i,o)&&jK(i,r,r.next,o)&&Eb(i,o)&&Eb(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Cb(r),Cb(r.next),r=t=o),r=r.next}while(r!==t);return wp(r)}function x3e(t,e,n,r,i,o){var l=t;do{for(var f=l.next.next;f!==l.prev;){if(l.i!==f.i&&I3e(l,f)){var s=UK(l,f);l=wp(l,l.next),s=wp(s,s.next),Sb(l,e,n,r,i,o,0),Sb(s,e,n,r,i,o,0);return}f=f.next}l=l.next}while(l!==t)}function w3e(t,e,n,r){var i=[],o,l,f,s,p;for(o=0,l=e.length;o<l;o++)f=e[o]*r,s=o<l-1?e[o+1]*r:t.length,p=$K(t,f,s,r,!1),p===p.next&&(p.steiner=!0),i.push(P3e(p));for(i.sort(S3e),o=0;o<i.length;o++)n=E3e(i[o],n);return n}function S3e(t,e){return t.x-e.x}function E3e(t,e){var n=C3e(t,e);if(!n)return e;var r=UK(n,t);return wp(r,r.next),wp(n,n.next)}function C3e(t,e){var n=e,r=t.x,i=t.y,o=-1/0,l;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var f=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=r&&f>o&&(o=f,l=n.x<n.next.x?n:n.next,f===r))return l}n=n.next}while(n!==e);if(!l)return null;var s=l,p=l.x,v=l.y,x=1/0,S;n=l;do r>=n.x&&n.x>=p&&r!==n.x&&Cg(i<v?r:o,i,p,v,i<v?o:r,i,n.x,n.y)&&(S=Math.abs(i-n.y)/(r-n.x),Eb(n,t)&&(S<x||S===x&&(n.x>l.x||n.x===l.x&&T3e(l,n)))&&(l=n,x=S)),n=n.next;while(n!==s);return l}function T3e(t,e){return wo(t.prev,t,e.prev)<0&&wo(e.next,t,t.next)<0}function A3e(t,e,n,r){var i=t;do i.z===0&&(i.z=uB(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,M3e(i)}function M3e(t){var e,n,r,i,o,l,f,s,p=1;do{for(n=t,t=null,o=null,l=0;n;){for(l++,r=n,f=0,e=0;e<p&&(f++,r=r.nextZ,!!r);e++);for(s=p;f>0||s>0&&r;)f!==0&&(s===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,f--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,p*=2}while(l>1);return t}function uB(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function P3e(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Cg(t,e,n,r,i,o,l,f){return(i-l)*(e-f)>=(t-l)*(o-f)&&(t-l)*(r-f)>=(n-l)*(e-f)&&(n-l)*(o-f)>=(i-l)*(r-f)}function I3e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!R3e(t,e)&&(Eb(t,e)&&Eb(e,t)&&O3e(t,e)&&(wo(t.prev,t,e.prev)||wo(t,e.prev,e))||jT(t,e)&&wo(t.prev,t,t.next)>0&&wo(e.prev,e,e.next)>0)}function wo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function jT(t,e){return t.x===e.x&&t.y===e.y}function jK(t,e,n,r){var i=Vw(wo(t,e,n)),o=Vw(wo(t,e,r)),l=Vw(wo(n,r,t)),f=Vw(wo(n,r,e));return!!(i!==o&&l!==f||i===0&&Uw(t,n,e)||o===0&&Uw(t,r,e)||l===0&&Uw(n,t,r)||f===0&&Uw(n,e,r))}function Uw(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Vw(t){return t>0?1:t<0?-1:0}function R3e(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&jK(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Eb(t,e){return wo(t.prev,t,t.next)<0?wo(t,e,t.next)>=0&&wo(t,t.prev,e)>=0:wo(t,e,t.prev)<0||wo(t,t.next,e)<0}function O3e(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function UK(t,e){var n=new dB(t.i,t.x,t.y),r=new dB(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function AV(t,e,n,r){var i=new dB(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Cb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function dB(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}$T.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,l=Math.abs(fB(t,0,o,n));if(i)for(var f=0,s=e.length;f<s;f++){var p=e[f]*n,v=f<s-1?e[f+1]*n:t.length;l-=Math.abs(fB(t,p,v,n))}var x=0;for(f=0;f<r.length;f+=3){var S=r[f]*n,M=r[f+1]*n,P=r[f+2]*n;x+=Math.abs((t[S]-t[P])*(t[M+1]-t[S+1])-(t[S]-t[M])*(t[P+1]-t[S+1]))}return l===0&&x===0?0:Math.abs((x-l)/l)};function fB(t,e,n,r){for(var i=0,o=e,l=n-r;o<n;o+=r)i+=(t[l]-t[o])*(t[o+1]+t[l+1]),l=o;return i}$T.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var l=0;l<e;l++)n.vertices.push(t[i][o][l]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var L3e=Nk.exports;const B3e=Ep(L3e),Gw=OK.CLOCKWISE,MV=OK.COUNTER_CLOCKWISE,xf={isClosed:!0};function D3e(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Z0(t){return"positions"in t?t.positions:t}function HS(t){return"holeIndices"in t?t.holeIndices:null}function k3e(t){return Array.isArray(t[0])}function F3e(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function z3e(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function N3e(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function PV(t,e,n,r,i){let o=e;const l=n.length;for(let f=0;f<l;f++)for(let s=0;s<r;s++)t[o++]=n[f][s]||0;if(!z3e(n))for(let f=0;f<r;f++)t[o++]=n[0][f]||0;return xf.start=e,xf.end=o,xf.size=r,LK(t,i,xf),o}function IV(t,e,n,r,i=0,o,l){o=o||n.length;const f=o-i;if(f<=0)return e;let s=e;for(let p=0;p<f;p++)t[s++]=n[i+p];if(!N3e(n,r,i,o))for(let p=0;p<r;p++)t[s++]=n[i+p];return xf.start=e,xf.end=s,xf.size=r,LK(t,l,xf),s}function $3e(t,e){D3e(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let l=0;for(let f=0;f<=o.length;f++)l=IV(n,l,i,e,o[f-1],o[f],f===0?Gw:MV),r.push(l);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!k3e(t))return IV(n,0,t,e,0,n.length,Gw),n;if(!F3e(t)){let i=0;for(const[o,l]of t.entries())i=PV(n,i,l,e,o===0?Gw:MV),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return PV(n,0,t,e,Gw),n}function ZI(t,e,n){const r=t.length/3;let i=0;for(let o=0;o<r;o++){const l=(o+1)%r;i+=t[o*3+e]*t[l*3+n],i-=t[l*3+e]*t[o*3+n]}return Math.abs(i/2)}function RV(t,e,n,r){const i=t.length/3;for(let o=0;o<i;o++){const l=o*3,f=t[l+0],s=t[l+1],p=t[l+2];t[l+e]=f,t[l+n]=s,t[l+r]=p}}function j3e(t,e,n,r){let i=HS(t);i&&(i=i.map(f=>f/e));let o=Z0(t);const l=r&&e===3;if(n){const f=o.length;o=o.slice();const s=[];for(let p=0;p<f;p+=e){s[0]=o[p],s[1]=o[p+1],l&&(s[2]=o[p+2]);const v=n(s);o[p]=v[0],o[p+1]=v[1],l&&(o[p+2]=v[2])}}if(l){const f=ZI(o,0,1),s=ZI(o,0,2),p=ZI(o,1,2);if(!f&&!s&&!p)return[];f>s&&f>p||(s>p?(n||(o=o.slice()),RV(o,0,2,1)):(n||(o=o.slice()),RV(o,2,0,1)))}return B3e(o,i,e)}class U3e extends hK{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=$3e(e,this.positionSize);return this.opts.resolution?DK(Z0(n),HS(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?l3e(Z0(n),HS(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(OV(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return Z0(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&OV(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:o,indexStarts:l,typedArrayManager:f}=this;let s=o.indices;if(!s||!e)return;let p=i;const v=j3e(e,this.positionSize,this.opts.preproject,this.opts.full3d);s=f.allocate(s,i+v.length,{copy:!0});for(let x=0;x<v.length;x++)s[p++]=v[x]+r;l[n+1]=i+v.length,o.indices=s}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const l=Z0(e);for(let f=n,s=0;s<r;f++,s++){const p=l[s*o],v=l[s*o+1],x=o>2?l[s*o+2]:0;i[f*3]=p,i[f*3+1]=v,i[f*3+2]=x}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,o=this.attributes.vertexValid,l=e&&HS(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+r),l)for(let f=0;f<l.length;f++)o[n+l[f]/i-1]=0;o[n+r-1]=0}}function OV(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const VK=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,V3e=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(VK,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),G3e=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(VK,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),H3e=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,fC=[0,0,0,255],W3e={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:fC},getLineColor:{type:"accessor",value:fC},material:!0},Hw={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class $k extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?V3e:G3e,fs:H3e,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Op,CPe,Lp]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===ni.DEFAULT&&(r=ni.LNGLAT);let o;r===ni.LNGLAT&&(i?o=n.projectPosition.bind(n):o=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new U3e({preproject:o,fp64:this.use64bitPositions(),IndexType:!e||ik(e,Vi.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const l=this.getAttributeManager(),f=!0;l.remove(["instancePickingColors"]),l.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:f},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Hw,accessor:"getPolygon",update:this.calculatePositions,noAlloc:f,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:f},elevations:{size:1,transition:Hw,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hw,accessor:"getFillColor",defaultValue:fC,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hw,accessor:"getLineColor",defaultValue:fC,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:p,target:v})=>this.encodePickingColor(s&&s.__source?s.__source.index:p,v),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:l,sideModel:f,polygonTesselator:s}=this.state,p={...e,extruded:!!n,elevationScale:o};f&&(f.setInstanceCount(s.instanceCount-1),f.setUniforms(p),i&&(f.setDrawMode(3),f.setUniforms({isWireframe:!0}).draw()),r&&(f.setDrawMode(6),f.setUniforms({isWireframe:!1}).draw())),l&&(l.setVertexCount(s.vertexCount),l.setUniforms(p).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var f;(f=this.state.models)===null||f===void 0||f.forEach(s=>s.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,l=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:l.getPolygon,buffers:l,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let o,l;if(r){const f=this.getShaders("top");f.defines.NON_INSTANCED_MODEL=1,o=new lu(e,{...f,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(l=new lu(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Zu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),l.userData.excludeAttributes={indices:!0}),{models:[l,o].filter(Boolean),topModel:o,sideModel:l}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}j($k,"defaultProps",W3e);j($k,"layerName","SolidPolygonLayer");function X3e({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:o=1/0}=n,l=t.length;let f=l,s=l;for(let S=0;S<l;S++){const M=e(t[S]);if(f>S&&M>=i&&(f=S),M>=o){s=S;break}}let p=f;const x=s-f!==r.length?t.slice(s):void 0;for(let S=0;S<r.length;S++)t[p++]=r[S];if(x){for(let S=0;S<x.length;S++)t[p++]=x[S];t.length=p}return{startRow:f,endRow:f+r.length}}function q3e(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?Y3e(t,r,n):null}function Y3e(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function Z3e(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const o=[];for(let l=0;l<i.length;l++)e(i[l],o),n[r][l*3+0]=o[0],n[r][l*3+1]=o[1],n[r][l*3+2]=o[2]}return n}const K3e=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,KI=192/256,LV=[],J3e={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class jk extends NT{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:K3e}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&Mr.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:o}=this.state,l=i?Math.max(r,KI*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:KI,outlineBuffer:l,gamma:r,sdf:!!n,outlineColor:o},super.draw(e),n&&i){const{iconManager:f}=this.state;f.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:KI}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):LV}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):LV}}j(jk,"defaultProps",J3e);j(jk,"layerName","MultiIconLayer");const C_=1e20;class Q3e{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:o="sans-serif",fontWeight:l="normal",fontStyle:f="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const s=this.size=e+n*4,p=this._createCanvas(s),v=this.ctx=p.getContext("2d",{willReadFrequently:!0});v.font=`${f} ${l} ${e}px ${o}`,v.textBaseline="alphabetic",v.textAlign="left",v.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:o,actualBoundingBoxRight:l}=this.ctx.measureText(e),f=Math.ceil(r),s=0,p=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(l-o))),v=Math.min(this.size-this.buffer,f+Math.ceil(i)),x=p+2*this.buffer,S=v+2*this.buffer,M=Math.max(x*S,0),P=new Uint8ClampedArray(M),R={data:P,width:x,height:S,glyphWidth:p,glyphHeight:v,glyphTop:f,glyphLeft:s,glyphAdvance:n};if(p===0||v===0)return R;const{ctx:D,buffer:B,gridInner:O,gridOuter:k}=this;D.clearRect(B,B,p,v),D.fillText(e,B,B+f);const $=D.getImageData(B,B,p,v);k.fill(C_,0,M),O.fill(0,0,M);for(let H=0;H<v;H++)for(let U=0;U<p;U++){const X=$.data[4*(H*p+U)+3]/255;if(X===0)continue;const J=(H+B)*x+U+B;if(X===1)k[J]=0,O[J]=C_;else{const K=.5-X;k[J]=K>0?K*K:0,O[J]=K<0?K*K:0}}BV(k,0,0,x,S,x,this.f,this.v,this.z),BV(O,B,B,p,v,x,this.f,this.v,this.z);for(let H=0;H<M;H++){const U=Math.sqrt(k[H])-Math.sqrt(O[H]);P[H]=Math.round(255-255*(U/this.radius+this.cutoff))}return R}}function BV(t,e,n,r,i,o,l,f,s){for(let p=e;p<e+r;p++)DV(t,n*o+p,o,i,l,f,s);for(let p=n;p<n+i;p++)DV(t,p*o+e,1,r,l,f,s)}function DV(t,e,n,r,i,o,l){o[0]=0,l[0]=-C_,l[1]=C_,i[0]=t[e];for(let f=1,s=0,p=0;f<r;f++){i[f]=t[e+f*n];const v=f*f;do{const x=o[s];p=(i[f]-i[x]+v-x*x)/(f-x)/2}while(p<=l[s]&&--s>-1);s++,o[s]=f,l[s]=p,l[s+1]=C_}for(let f=0,s=0;f<r;f++){for(;l[s+1]<f;)s++;const p=o[s],v=f-p;t[e+f*n]=i[p]+v*v}}const eke=32,tke=[];function nke(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function rke({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:l=0,yOffset:f=0}){let s=0,p=l;const v=n+r*2;for(const x of t)if(!o[x]){const S=e(x);p+S+r*2>i&&(p=0,s++),o[x]={x:p+r,y:f+s*v+r,width:S,height:v,layoutWidth:S,layoutHeight:n},p+=S+r*2}return{mapping:o,xOffset:p,yOffset:f+s*v,canvasHeight:nke(f+(s+1)*v)}}function GK(t,e,n,r){let i=0;for(let l=e;l<n;l++){var o;const f=t[l];i+=((o=r[f])===null||o===void 0?void 0:o.layoutWidth)||0}return i}function HK(t,e,n,r,i,o){let l=e,f=0;for(let s=e;s<n;s++){const p=GK(t,s,s+1,i);f+p>r&&(l<s&&o.push(s),l=s,f=0),f+=p}return f}function ike(t,e,n,r,i,o){let l=e,f=e,s=e,p=0;for(let v=e;v<n;v++)if((t[v]===" "||t[v+1]===" "||v+1===n)&&(s=v+1),s>f){let x=GK(t,f,s,i);p+x>r&&(l<f&&(o.push(f),l=f,p=0),x>r&&(x=HK(t,f,s,r,i,o),l=o[o.length-1])),f=s,p+=x}return p}function oke(t,e,n,r,i=0,o){o===void 0&&(o=t.length);const l=[];return e==="break-all"?HK(t,i,o,n,r,l):ike(t,i,o,n,r,l),l}function ske(t,e,n,r,i,o){let l=0,f=0;for(let s=e;s<n;s++){const p=t[s],v=r[p];v?(f||(f=v.layoutHeight),i[s]=l+v.layoutWidth/2,l+=v.layoutWidth):(Mr.warn("Missing character: ".concat(p," (").concat(p.codePointAt(0),")"))(),i[s]=l,l+=eke)}o[0]=l,o[1]=f}function ake(t,e,n,r,i){const o=Array.from(t),l=o.length,f=new Array(l),s=new Array(l),p=new Array(l),v=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,x=[0,0],S=[0,0];let M=0,P=0,R=0;for(let B=0;B<=l;B++){const O=o[B];if((O===`
`||B===l)&&(R=B),R>P){const k=v?oke(o,n,r,i,P,R):tke;for(let $=0;$<=k.length;$++){const H=$===0?P:k[$-1],U=$<k.length?k[$]:R;ske(o,H,U,i,f,S);for(let X=H;X<U;X++){var D;const J=o[X],K=((D=i[J])===null||D===void 0?void 0:D.layoutOffsetY)||0;s[X]=M+S[1]/2+K,p[X]=S[0]}M=M+S[1]*e,x[0]=Math.max(x[0],S[0])}P=R}O===`
`&&(f[P]=0,s[P]=0,p[P]=0,P++)}return x[1]=M,{x:f,y:s,rowWidth:p,size:x}}function lke({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:o}){const l=t.BYTES_PER_ELEMENT,f=n?n/l:1,s=r?r/l:0,p=i[e]||Math.ceil((t.length-s)/f),v=o&&new Set,x=new Array(e);let S=t;if(f>1||s>0){const M=t.constructor;S=new M(p);for(let P=0;P<p;P++)S[P]=t[P*f+s]}for(let M=0;M<e;M++){const P=i[M],R=i[M+1]||p,D=S.subarray(P,R);x[M]=String.fromCodePoint.apply(null,D),v&&D.forEach(v.add,v)}if(v)for(const M of v)o.add(String.fromCodePoint(M));return{texts:x,characterCount:p}}class WK{constructor(e=5){j(this,"limit",void 0),j(this,"_cache",{}),j(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function cke(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const jg={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:cke(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},kV=1024,FV=.9,zV=1.2,XK=3;let hC=new WK(XK);function uke(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=hC.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function dke(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function NV(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function fke(t){Mr.assert(Number.isFinite(t)&&t>=XK,"Invalid cache limit"),hC=new WK(t)}class hke{constructor(){j(this,"props",{...jg}),j(this,"_key",void 0),j(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*zV+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=uke(this._key,this.props.characterSet),r=hC.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,hC.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:o,buffer:l,sdf:f,radius:s,cutoff:p}=this.props;let v=n&&n.data;v||(v=document.createElement("canvas"),v.width=kV);const x=v.getContext("2d",{willReadFrequently:!0});NV(x,r,o,i);const{mapping:S,canvasHeight:M,xOffset:P,yOffset:R}=rke({getFontWidth:D=>x.measureText(D).width,fontHeight:o*zV,buffer:l,characterSet:e,maxCanvasWidth:kV,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(v.height!==M){const D=x.getImageData(0,0,v.width,v.height);v.height=M,x.putImageData(D,0,0)}if(NV(x,r,o,i),f){const D=new Q3e({fontSize:o,buffer:l,radius:s,cutoff:p,fontFamily:r,fontWeight:"".concat(i)});for(const B of e){const{data:O,width:k,height:$,glyphTop:H}=D.draw(B);S[B].width=k,S[B].layoutOffsetY=o*FV-H;const U=x.createImageData(k,$);dke(O,U),x.putImageData(U,S[B].x,S[B].y)}}else for(const D of e)x.fillText(D,S[D].x,S[D].y+l+o*FV);return{xOffset:P,yOffset:R,mapping:S,data:v,width:v.width,height:v.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:o,radius:l,cutoff:f}=this.props;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(l," ").concat(f):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const pke=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,mke=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,gke={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Uk extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){return super.getShaders({vs:pke,fs:mke,modules:[Op,Lp]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:l,getLineWidth:f}=this.props;let{padding:s}=this.props;s.length<4&&(s=[s[0],s[1],s[0],s[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!f,padding:s,sizeUnits:vp[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:l}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new lu(e,{...this.getShaders(),id:this.props.id,geometry:new Zu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}j(Uk,"defaultProps",gke);j(Uk,"layerName","TextBackgroundLayer");const $V={start:1,middle:0,end:-1},jV={top:1,center:0,bottom:-1},JI=[0,0,0,255],vke=1,yke={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:JI},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:jg.characterSet},fontFamily:jg.fontFamily,fontWeight:jg.fontWeight,lineHeight:vke,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:JI},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:JI},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Vk extends Ek{constructor(...e){super(...e),j(this,"state",void 0),j(this,"getBoundingRect",(n,r)=>{let{size:[i,o]}=this.transformParagraph(n,r);const{fontSize:l}=this.state.fontAtlasManager.props;i/=l,o/=l;const{getTextAnchor:f,getAlignmentBaseline:s}=this.props,p=$V[typeof f=="function"?f(n,r):f],v=jV[typeof s=="function"?s(n,r):s];return[(p-1)*i/2,(v-1)*o/2,i,o]}),j(this,"getIconOffsets",(n,r)=>{const{getTextAnchor:i,getAlignmentBaseline:o}=this.props,{x:l,y:f,rowWidth:s,size:[p,v]}=this.transformParagraph(n,r),x=$V[typeof i=="function"?i(n,r):i],S=jV[typeof o=="function"?o(n,r):o],M=l.length,P=new Array(M*2);let R=0;for(let D=0;D<M;D++){const B=(1-x)*(p-s[D])/2;P[R++]=(x-1)*p/2+B+l[D],P[R++]=(S-1)*v/2+f[D]}return P})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new hke},this.props.maxWidth>0&&Mr.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,l={...e,characterSet:o,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(l),!0;for(const f in l)if(l[f]!==i.props[f])return i.setProps(l),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:o}=this.props,l=n.startIndices,f;const s=r==="auto"&&new Set;if(i&&l){const{texts:p,characterCount:v}=lke({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:l,characterSet:s});f=v,o=(x,{index:S})=>p[S]}else{const{iterable:p,objectInfo:v}=cx(n);l=[0],f=0;for(const x of p){v.index++;const S=Array.from(o(x,v)||"");s&&S.forEach(s.add,s),f+=S.length,l.push(f)}}this.setState({getText:o,startIndices:l,numInstances:f,characterSet:s||r})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,o=this.state.getText,{wordBreak:l,lineHeight:f,maxWidth:s}=this.props,p=o(e,n)||"";return ake(p,f,l,s*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:o,mapping:l},styleVersion:f}=this.state,{data:s,_dataDiff:p,getPosition:v,getColor:x,getSize:S,getAngle:M,getPixelOffset:P,getBackgroundColor:R,getBorderColor:D,getBorderWidth:B,backgroundPadding:O,background:k,billboard:$,fontSettings:H,outlineWidth:U,outlineColor:X,sizeScale:J,sizeUnits:K,sizeMinPixels:Q,sizeMaxPixels:ce,transitions:ge,updateTriggers:ae}=this.props,ve=this.getSubLayerClass("characters",jk),Fe=this.getSubLayerClass("background",Uk);return[k&&new Fe({getFillColor:R,getLineColor:D,getLineWidth:B,padding:O,getPosition:v,getSize:S,getAngle:M,getPixelOffset:P,billboard:$,sizeScale:J,sizeUnits:K,sizeMinPixels:Q,sizeMaxPixels:ce,transitions:ge&&{getPosition:ge.getPosition,getAngle:ge.getAngle,getSize:ge.getSize,getFillColor:ge.getBackgroundColor,getLineColor:ge.getBorderColor,getLineWidth:ge.getBorderWidth,getPixelOffset:ge.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ae.getPosition,getAngle:ae.getAngle,getSize:ae.getSize,getFillColor:ae.getBackgroundColor,getLineColor:ae.getBorderColor,getLineWidth:ae.getBorderWidth,getPixelOffset:ae.getPixelOffset,getBoundingRect:{getText:ae.getText,getTextAnchor:ae.getTextAnchor,getAlignmentBaseline:ae.getAlignmentBaseline,styleVersion:f}}}),{data:s.attributes&&s.attributes.background?{length:s.length,attributes:s.attributes.background}:s,_dataDiff:p,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ve({sdf:H.sdf,smoothing:Number.isFinite(H.smoothing)?H.smoothing:jg.smoothing,outlineWidth:U/(H.radius||jg.radius),outlineColor:X,iconAtlas:o,iconMapping:l,getPosition:v,getColor:x,getSize:S,getAngle:M,getPixelOffset:P,billboard:$,sizeScale:J*i,sizeUnits:K,sizeMinPixels:Q*i,sizeMaxPixels:ce*i,transitions:ge&&{getPosition:ge.getPosition,getAngle:ge.getAngle,getColor:ge.getColor,getSize:ge.getSize,getPixelOffset:ge.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:ae.getText,getPosition:ae.getPosition,getAngle:ae.getAngle,getColor:ae.getColor,getSize:ae.getSize,getPixelOffset:ae.getPixelOffset,getIconOffsets:{getTextAnchor:ae.getTextAnchor,getAlignmentBaseline:ae.getAlignmentBaseline,styleVersion:f}}}),{data:s,_dataDiff:p,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){fke(e)}}j(Vk,"defaultProps",yke);j(Vk,"layerName","TextLayer");const WS={circle:{type:Fk,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:NT,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Vk,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},XS={type:zk,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},hB={type:$k,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function P0({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function QI(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const l=e[o];let f=t.props[o];o.startsWith("get")&&(f=t.getSubLayerAccessor(f),i.updateTriggers[l]=r[o],n&&(i.transitions[l]=n[o])),i[l]=f}return i}function _ke(t){if(Array.isArray(t))return t;switch(Mr.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return Mr.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function UV(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let l=i;l<o;l++){const f=t[l],{geometry:s}=f;if(s)if(s.type==="GeometryCollection"){Mr.assert(Array.isArray(s.geometries),"GeoJSON does not have geometries array");const{geometries:p}=s;for(let v=0;v<p.length;v++){const x=p[v];VV(x,r,e,f,l)}}else VV(s,r,e,f,l)}return r}function VV(t,e,n,r,i){const{type:o,coordinates:l}=t,{pointFeatures:f,lineFeatures:s,polygonFeatures:p,polygonOutlineFeatures:v}=e;if(!xke(o,l)){Mr.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":f.push(n({geometry:t},r,i));break;case"MultiPoint":l.forEach(x=>{f.push(n({geometry:{type:"Point",coordinates:x}},r,i))});break;case"LineString":s.push(n({geometry:t},r,i));break;case"MultiLineString":l.forEach(x=>{s.push(n({geometry:{type:"LineString",coordinates:x}},r,i))});break;case"Polygon":p.push(n({geometry:t},r,i)),l.forEach(x=>{v.push(n({geometry:{type:"LineString",coordinates:x}},r,i))});break;case"MultiPolygon":l.forEach(x=>{p.push(n({geometry:{type:"Polygon",coordinates:x}},r,i)),x.forEach(S=>{v.push(n({geometry:{type:"LineString",coordinates:S}},r,i))})});break}}const bke={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function xke(t,e){let n=bke[t];for(Mr.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function qK(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Ww(t){return t.geometry.coordinates}function wke(t,e){const n=qK(),{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:l}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Ww,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Ww,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Ww,n.polygonsOutline.data=l,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Ww,n}function Ske(t,e){const n=qK(),{points:r,lines:i,polygons:o}=t,l=Z3e(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:l.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:l.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:l.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:l.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Eke=["points","linestrings","polygons"],Cke={...P0(WS.circle),...P0(WS.icon),...P0(WS.text),...P0(XS),...P0(hB),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class mv extends Ek{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=Ske(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=_ke(e.data),i=this.getSubLayerRow.bind(this);let o={};const l={};if(Array.isArray(n.dataChanged)){const s=this.state.features;for(const p in s)o[p]=s[p].slice(),l[p]=[];for(const p of n.dataChanged){const v=UV(r,i,p);for(const x in s)l[x].push(X3e({data:o[x],getIndex:S=>S.__source.index,dataRange:p,replace:v[x]}))}}else o=UV(r,i);const f=wke(o,l);this.setState({features:o,featuresDiff:l,layerProps:f})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=Eke.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,hB.type);if(o){const l=QI(this,hB.props),f=e&&n;return f||delete l.getLineColor,l.updateTriggers.lineColors=f,new o(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",o="linestrings",l=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,XS.type),f=this.shouldRenderSubLayer(o,r.lines.data)&&this.getSubLayerClass(o,XS.type);if(l||f){const s=QI(this,XS.props);return[l&&new l(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),r.polygonsOutline),f&&new f(s,this.getSubLayerProps({id:o,updateTriggers:s.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(f=>f.__source.index===i));const o=new Set(e.split("+")),l=[];for(const f of o){const s="points-".concat(f),p=WS[f],v=p&&this.shouldRenderSubLayer(s,n.points.data)&&this.getSubLayerClass(s,p.type);if(v){const x=QI(this,p.props);let S=n.points;if(f==="text"&&r){const{instancePickingColors:M,...P}=S.data.attributes;S={...S,data:{...S.data,attributes:P}}}l.push(new v(x,this.getSubLayerProps({id:s,updateTriggers:x.updateTriggers,highlightedObjectIndex:i}),S))}}return l}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:o,index:l}=i,f=q3e(o,l);return e(f,i)}}}j(mv,"layerName","GeoJsonLayer");j(mv,"defaultProps",Cke);class UT{constructor(e,n,r){ds(this,"name");ds(this,"dtHint");ds(this,"prefetchLength");ds(this,"frameBuffer",[]);this.name=e,this.dtHint=n,this.prefetchLength=r}async fetch(e,n){let r=e-this.dtHint;const i=e+this.prefetchLength;do{if(this.frameBuffer.length>0){const s=this.frameBuffer[0];for(r<s.t-this.dtHint&&(this.frameBuffer=[]);this.frameBuffer.length>0&&this.frameBuffer[0].t<=r;)this.frameBuffer.shift();if(this.frameBuffer.length>0&&this.frameBuffer[this.frameBuffer.length-1].t>i)break;this.frameBuffer.length>0&&(r=this.frameBuffer[this.frameBuffer.length-1].t)}const f=n(r,Math.ceil((i-r)/this.prefetchLength),this.prefetchLength);for(const s of f){const p=await s.promise;this.frameBuffer.push(...p)}this.frameBuffer.sort((s,p)=>s.t-p.t),this.frameBuffer=this.frameBuffer.filter((s,p)=>p===0||s.t!==this.frameBuffer[p-1].t)}while(!1);if(this.frameBuffer.length===0)return[];if(e<this.frameBuffer[0].t)return[];if(e>this.frameBuffer[this.frameBuffer.length-1].t)return[];let o=0;for(;o<this.frameBuffer.length&&!(this.frameBuffer[o].t>=e);o++);const l=[];return this.frameBuffer[o].t===e?l.push(this.frameBuffer[o]):(l.push(this.frameBuffer[o-1]),l.push(this.frameBuffer[o])),l}}function pC(t){"@babel/helpers - typeof";return pC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pC(t)}var Tke=/^\s+/,Ake=/\s+$/;function ir(t,e){if(t=t||"",e=e||{},t instanceof ir)return t;if(!(this instanceof ir))return new ir(t,e);var n=Mke(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}ir.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,i,o,l,f;return n=e.r/255,r=e.g/255,i=e.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),i<=.03928?f=i/12.92:f=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*f},setAlpha:function(e){return this._a=YK(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=HV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=HV(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=GV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=GV(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return WV(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Oke(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(uo(this._r,255)*100)+"%",g:Math.round(uo(this._g,255)*100)+"%",b:Math.round(uo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(uo(this._r,255)*100)+"%, "+Math.round(uo(this._g,255)*100)+"%, "+Math.round(uo(this._b,255)*100)+"%)":"rgba("+Math.round(uo(this._r,255)*100)+"%, "+Math.round(uo(this._g,255)*100)+"%, "+Math.round(uo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Gke[WV(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+XV(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=ir(e);r="#"+XV(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ir(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(kke,arguments)},brighten:function(){return this._applyModification(Fke,arguments)},darken:function(){return this._applyModification(zke,arguments)},desaturate:function(){return this._applyModification(Lke,arguments)},saturate:function(){return this._applyModification(Bke,arguments)},greyscale:function(){return this._applyModification(Dke,arguments)},spin:function(){return this._applyModification(Nke,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(Uke,arguments)},complement:function(){return this._applyCombination($ke,arguments)},monochromatic:function(){return this._applyCombination(Vke,arguments)},splitcomplement:function(){return this._applyCombination(jke,arguments)},triad:function(){return this._applyCombination(qV,[3])},tetrad:function(){return this._applyCombination(qV,[4])}};ir.fromRatio=function(t,e){if(pC(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=K0(t[r]));t=n}return ir(t,e)};function Mke(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,f=!1;return typeof t=="string"&&(t=qke(t)),pC(t)=="object"&&(Bu(t.r)&&Bu(t.g)&&Bu(t.b)?(e=Pke(t.r,t.g,t.b),l=!0,f=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Bu(t.h)&&Bu(t.s)&&Bu(t.v)?(r=K0(t.s),i=K0(t.v),e=Rke(t.h,r,i),l=!0,f="hsv"):Bu(t.h)&&Bu(t.s)&&Bu(t.l)&&(r=K0(t.s),o=K0(t.l),e=Ike(t.h,r,o),l=!0,f="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=YK(n),{ok:l,format:t.format||f,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function Pke(t,e,n){return{r:uo(t,255)*255,g:uo(e,255)*255,b:uo(n,255)*255}}function GV(t,e,n){t=uo(t,255),e=uo(e,255),n=uo(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,l,f=(r+i)/2;if(r==i)o=l=0;else{var s=r-i;switch(l=f>.5?s/(2-r-i):s/(r+i),r){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4;break}o/=6}return{h:o,s:l,l:f}}function Ike(t,e,n){var r,i,o;t=uo(t,360),e=uo(e,100),n=uo(n,100);function l(p,v,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?p+(v-p)*6*x:x<1/2?v:x<2/3?p+(v-p)*(2/3-x)*6:p}if(e===0)r=i=o=n;else{var f=n<.5?n*(1+e):n+e-n*e,s=2*n-f;r=l(s,f,t+1/3),i=l(s,f,t),o=l(s,f,t-1/3)}return{r:r*255,g:i*255,b:o*255}}function HV(t,e,n){t=uo(t,255),e=uo(e,255),n=uo(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o,l,f=r,s=r-i;if(l=r===0?0:s/r,r==i)o=0;else{switch(r){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4;break}o/=6}return{h:o,s:l,v:f}}function Rke(t,e,n){t=uo(t,360)*6,e=uo(e,100),n=uo(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),l=n*(1-i*e),f=n*(1-(1-i)*e),s=r%6,p=[n,l,o,o,f,n][s],v=[f,n,n,l,o,o][s],x=[o,o,f,n,n,l][s];return{r:p*255,g:v*255,b:x*255}}function WV(t,e,n,r){var i=[uc(Math.round(t).toString(16)),uc(Math.round(e).toString(16)),uc(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Oke(t,e,n,r,i){var o=[uc(Math.round(t).toString(16)),uc(Math.round(e).toString(16)),uc(Math.round(n).toString(16)),uc(ZK(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function XV(t,e,n,r){var i=[uc(ZK(r)),uc(Math.round(t).toString(16)),uc(Math.round(e).toString(16)),uc(Math.round(n).toString(16))];return i.join("")}ir.equals=function(t,e){return!t||!e?!1:ir(t).toRgbString()==ir(e).toRgbString()};ir.random=function(){return ir.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Lke(t,e){e=e===0?0:e||10;var n=ir(t).toHsl();return n.s-=e/100,n.s=VT(n.s),ir(n)}function Bke(t,e){e=e===0?0:e||10;var n=ir(t).toHsl();return n.s+=e/100,n.s=VT(n.s),ir(n)}function Dke(t){return ir(t).desaturate(100)}function kke(t,e){e=e===0?0:e||10;var n=ir(t).toHsl();return n.l+=e/100,n.l=VT(n.l),ir(n)}function Fke(t,e){e=e===0?0:e||10;var n=ir(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),ir(n)}function zke(t,e){e=e===0?0:e||10;var n=ir(t).toHsl();return n.l-=e/100,n.l=VT(n.l),ir(n)}function Nke(t,e){var n=ir(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,ir(n)}function $ke(t){var e=ir(t).toHsl();return e.h=(e.h+180)%360,ir(e)}function qV(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=ir(t).toHsl(),r=[ir(t)],i=360/e,o=1;o<e;o++)r.push(ir({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function jke(t){var e=ir(t).toHsl(),n=e.h;return[ir(t),ir({h:(n+72)%360,s:e.s,l:e.l}),ir({h:(n+216)%360,s:e.s,l:e.l})]}function Uke(t,e,n){e=e||6,n=n||30;var r=ir(t).toHsl(),i=360/n,o=[ir(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(ir(r));return o}function Vke(t,e){e=e||6;for(var n=ir(t).toHsv(),r=n.h,i=n.s,o=n.v,l=[],f=1/e;e--;)l.push(ir({h:r,s:i,v:o})),o=(o+f)%1;return l}ir.mix=function(t,e,n){n=n===0?0:n||50;var r=ir(t).toRgb(),i=ir(e).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return ir(l)};ir.readability=function(t,e){var n=ir(t),r=ir(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};ir.isReadable=function(t,e,n){var r=ir.readability(t,e),i,o;switch(o=!1,i=Yke(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};ir.mostReadable=function(t,e,n){var r=null,i=0,o,l,f,s;n=n||{},l=n.includeFallbackColors,f=n.level,s=n.size;for(var p=0;p<e.length;p++)o=ir.readability(t,e[p]),o>i&&(i=o,r=ir(e[p]));return ir.isReadable(t,r,{level:f,size:s})||!l?r:(n.includeFallbackColors=!1,ir.mostReadable(t,["#fff","#000"],n))};var pB=ir.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Gke=ir.hexNames=Hke(pB);function Hke(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function YK(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function uo(t,e){Wke(t)&&(t="100%");var n=Xke(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function VT(t){return Math.min(1,Math.max(0,t))}function Fa(t){return parseInt(t,16)}function Wke(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Xke(t){return typeof t=="string"&&t.indexOf("%")!=-1}function uc(t){return t.length==1?"0"+t:""+t}function K0(t){return t<=1&&(t=t*100+"%"),t}function ZK(t){return Math.round(parseFloat(t)*255).toString(16)}function YV(t){return Fa(t)/255}var Yl=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Bu(t){return!!Yl.CSS_UNIT.exec(t)}function qke(t){t=t.replace(Tke,"").replace(Ake,"").toLowerCase();var e=!1;if(pB[t])t=pB[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Yl.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Yl.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Yl.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Yl.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Yl.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Yl.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Yl.hex8.exec(t))?{r:Fa(n[1]),g:Fa(n[2]),b:Fa(n[3]),a:YV(n[4]),format:e?"name":"hex8"}:(n=Yl.hex6.exec(t))?{r:Fa(n[1]),g:Fa(n[2]),b:Fa(n[3]),format:e?"name":"hex"}:(n=Yl.hex4.exec(t))?{r:Fa(n[1]+""+n[1]),g:Fa(n[2]+""+n[2]),b:Fa(n[3]+""+n[3]),a:YV(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Yl.hex3.exec(t))?{r:Fa(n[1]+""+n[1]),g:Fa(n[2]+""+n[2]),b:Fa(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function Yke(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}const rc=(t,e)=>{const n=ir(t).setAlpha(e??1).toRgb();return[n.r,n.g,n.b,n.a*255]},Rh=.5,Zke=[rc("#2e8b57",Rh),rc("#32cd32",Rh),rc("#eeee00",Rh),rc("#aa0000",Rh),rc("#800000",Rh),rc("#600000",Rh),rc("#7d8597",Rh)];class Kke{constructor(e,n,r){ds(this,"onFetch");ds(this,"geoJsonData");ds(this,"fetcher");this.onFetch=e,this.geoJsonData=n,this.fetcher=new UT("road",r??1,3)}async init(){}updateGeoJson(e){this.geoJsonData=e}createRequests(e,n,r,i){const o=[];for(let l=0;l<n;l++){const f=e+l*r,s=f+r;o.push({startT:f,endT:s,promise:this.onFetch(f,s,i)})}return o}async play(e,n,r,i){if(this.geoJsonData===void 0)return[];const o=await this.fetcher.fetch(e,(v,x,S)=>this.createRequests(v,x,S,i));if(o.length===0)return console.log("RoadStatusPlayer: no data"),[];const l=o[0].data;console.log(`RoadStatusPlayer: play at ${e}, f1.t=${o[0].t}`);const f=new Map;for(const v of l)f.set(v.id,Zke[v.level]);const s=this.geoJsonData.map(v=>{var S;const x=((S=v.properties)==null?void 0:S.id)??v.id;return x===void 0?(console.error("RoadStatusPlayer: 未找到id"),v):(v.properties?v.properties.color=f.get(x)||[0,0,0,0]:v.properties={color:f.get(x)||[0,0,0,0]},v)});return[new mv({id:"road-status",data:s,stroked:!0,filled:!0,extruded:!1,lineWidthScale:10,lineWidthMinPixels:2,getLineColor:v=>v.properties.color,getFillColor:v=>v.properties.color,pickable:r})]}}const Xw=.5,Jke=[rc("#ffffff",Xw),rc("#ff0000",Xw),rc("#00ff00",Xw),rc("#ffff00",Xw)];class Qke{constructor(e,n,r){ds(this,"onFetch");ds(this,"geoJsonData");ds(this,"fetcher");this.onFetch=e,this.geoJsonData=n,this.fetcher=new UT("tl",r??1,3)}async init(){}updateGeoJson(e){this.geoJsonData=e}createRequests(e,n,r,i){const o=[];for(let l=0;l<n;l++){const f=e+l*r,s=f+r;o.push({startT:f,endT:s,promise:this.onFetch(f,s,i)})}return o}async play(e,n,r,i){if(this.geoJsonData===void 0)return[];const o=await this.fetcher.fetch(e,(v,x,S)=>this.createRequests(v,x,S,i));if(o.length===0)return console.log("TLPlayer: no data"),[];const l=o[0].data;console.log(`TLPlayer: play at ${e}, f1.t=${o[0].t}`);const f=new Map;for(const v of l)f.set(v.id,Jke[v.state]);const s=this.geoJsonData.map(v=>{var S;const x=((S=v.properties)==null?void 0:S.id)??v.id;return x===void 0?($u.error("TLPlayer: 未找到id属性"),v):(v.properties?v.properties.color=f.get(x)||[0,0,0,0]:v.properties={color:f.get(x)||[0,0,0,0]},v)});return[new mv({id:"tl",data:s,stroked:!0,filled:!0,extruded:!1,lineWidthScale:1,lineWidthMinPixels:1,getLineColor:v=>v.properties.color,getFillColor:v=>v.properties.color,pickable:r})]}}const eR=Math.PI/180,qw=new Float32Array(16),ZV=new Float32Array(12);function KV(t,e,n){const r=e[0]*eR,i=e[1]*eR,o=e[2]*eR,l=Math.sin(o),f=Math.sin(r),s=Math.sin(i),p=Math.cos(o),v=Math.cos(r),x=Math.cos(i),S=n[0],M=n[1],P=n[2];t[0]=S*x*v,t[1]=S*s*v,t[2]=S*-f,t[3]=M*(-s*p+x*f*l),t[4]=M*(x*p+s*f*l),t[5]=M*v*l,t[6]=P*(s*l+x*f*p),t[7]=P*(-x*l+s*f*p),t[8]=P*v*p}function JV(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const KK={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:r,getOrientation:i,getScale:o,getTranslation:l,getTransformMatrix:f}=this.props,s=Array.isArray(f),p=s&&f.length===16,v=Array.isArray(o),x=Array.isArray(i),S=Array.isArray(l),M=p||!s&&!!f(r[0]);M?t.constant=p:t.constant=x&&v&&S;const P=t.value;if(t.constant){let R;M?(qw.set(f),R=JV(qw)):(R=ZV,KV(R,i,o),R.set(l,9)),t.value=new Float32Array(R)}else{let R=e*t.size;const{iterable:D,objectInfo:B}=cx(r,e,n);for(const O of D){B.index++;let k;if(M)qw.set(p?f:f(O,B)),k=JV(qw);else{k=ZV;const $=x?i:i(O,B),H=v?o:o(O,B);KV(k,$,H),k.set(S?l:l(O,B),9)}P[R++]=k[0],P[R++]=k[1],P[R++]=k[2],P[R++]=k[3],P[R++]=k[4],P[R++]=k[5],P[R++]=k[6],P[R++]=k[7],P[R++]=k[8],P[R++]=k[9],P[R++]=k[10],P[R++]=k[11]}}}};function JK(t,e){return e===ni.CARTESIAN||e===ni.METER_OFFSETS||e===ni.DEFAULT&&!t.isGeospatial}const eFe=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,tFe=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  DECKGL_FILTER_COLOR(color, geometry);

  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);
}
`;function QK(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,l=-1/0;const f=t.POSITION?t.POSITION.value:[],s=f&&f.length;for(let p=0;p<s;p+=3){const v=f[p],x=f[p+1],S=f[p+2];e=v<e?v:e,n=x<n?x:n,r=S<r?S:r,i=v>i?v:i,o=x>o?x:o,l=S>l?S:l}return[[e,n,r],[i,o,l]]}function nFe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}class Tg{constructor(e,n){j(this,"fields",void 0),j(this,"metadata",void 0),nFe(Array.isArray(e)),rFe(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(const l of r)e[l]=!0;const o=this.fields.filter(l=>e[l.name]);return new Tg(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.map(o=>this.fields[o]).filter(Boolean);return new Tg(i,this.metadata)}assign(e){let n,r=this.metadata;if(e instanceof Tg){const l=e;n=l.fields,r=QV(QV(new Map,this.metadata),l.metadata)}else n=e;const i=Object.create(null);for(const l of this.fields)i[l.name]=l;for(const l of n)i[l.name]=l;const o=Object.values(i);return new Tg(o,r)}}function rFe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}function QV(t,e){return new Map([...t||new Map,...e||new Map])}class mC{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;j(this,"name",void 0),j(this,"type",void 0),j(this,"nullable",void 0),j(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=r,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new mC(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Ao=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({}),eJ,tJ,nJ;class Gk{static isNull(e){return e&&e.typeId===Ao.Null}static isInt(e){return e&&e.typeId===Ao.Int}static isFloat(e){return e&&e.typeId===Ao.Float}static isBinary(e){return e&&e.typeId===Ao.Binary}static isUtf8(e){return e&&e.typeId===Ao.Utf8}static isBool(e){return e&&e.typeId===Ao.Bool}static isDecimal(e){return e&&e.typeId===Ao.Decimal}static isDate(e){return e&&e.typeId===Ao.Date}static isTime(e){return e&&e.typeId===Ao.Time}static isTimestamp(e){return e&&e.typeId===Ao.Timestamp}static isInterval(e){return e&&e.typeId===Ao.Interval}static isList(e){return e&&e.typeId===Ao.List}static isStruct(e){return e&&e.typeId===Ao.Struct}static isUnion(e){return e&&e.typeId===Ao.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ao.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ao.FixedSizeList}static isMap(e){return e&&e.typeId===Ao.Map}static isDictionary(e){return e&&e.typeId===Ao.Dictionary}get typeId(){return Ao.NONE}compareTo(e){return this===e}}eJ=Symbol.toStringTag;class kv extends Gk{constructor(e,n){super(),j(this,"isSigned",void 0),j(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Ao.Int}get[eJ](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class iFe extends kv{constructor(){super(!0,8)}}class oFe extends kv{constructor(){super(!0,16)}}class sFe extends kv{constructor(){super(!0,32)}}class aFe extends kv{constructor(){super(!1,8)}}class lFe extends kv{constructor(){super(!1,16)}}class cFe extends kv{constructor(){super(!1,32)}}const rJ={HALF:16,SINGLE:32,DOUBLE:64};tJ=Symbol.toStringTag;class iJ extends Gk{constructor(e){super(),j(this,"precision",void 0),this.precision=e}get typeId(){return Ao.Float}get[tJ](){return"Float"}toString(){return"Float".concat(this.precision)}}class uFe extends iJ{constructor(){super(rJ.SINGLE)}}class dFe extends iJ{constructor(){super(rJ.DOUBLE)}}nJ=Symbol.toStringTag;class fFe extends Gk{constructor(e,n){super(),j(this,"listSize",void 0),j(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Ao.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[nJ](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}function hFe(t){switch(t.constructor){case Int8Array:return new iFe;case Uint8Array:return new aFe;case Int16Array:return new oFe;case Uint16Array:return new lFe;case Int32Array:return new sFe;case Uint32Array:return new cFe;case Float32Array:return new uFe;case Float64Array:return new dFe;default:throw new Error("array type not supported")}}function pFe(t,e,n){const r=hFe(e.value),i=n||mFe(e);return new mC(t,new fFe(e.size,new mC("value",r)),!1,i)}function mFe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}function e8(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),Mr.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function t8(t,e){if(t.attributes)return e8(t.attributes,e),t instanceof Zu?t:new Zu(t);if(t.positions||t.POSITION)return e8(t,e),new Zu({attributes:t});throw Error("Invalid mesh")}const gFe=[0,0,0,255],vFe={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:gFe},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}};class Hk extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){const e=!kr(this.context.gl),n={};return rk(this.context.gl,Vi.GLSL_DERIVATIVES)&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:eFe,fs:tFe,modules:[Op,TPe,Lp],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:r}=this.props;if(!r)return null;if(n=(e=r.header)===null||e===void 0?void 0:e.boundingBox,!n){const{attributes:i}=t8(r,this.props._useMeshColors);i.POSITION=i.POSITION||i.positions,n=QK(i)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:KK}),this.setState({emptyTexture:new Zs(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e;if(n.mesh!==r.mesh||i.extensionsChanged){var o;if(this.state.positionBounds=null,(o=this.state.model)===null||o===void 0||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const l=n.mesh.attributes||n.mesh;this.setState({hasNormals:!!(l.NORMAL||l.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==r.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:r,composeModelMatrix:!o||JK(n,i),flatShading:!this.state.hasNormals}).draw()}get isLoaded(){var e;return((e=this.state)===null||e===void 0?void 0:e.model)&&super.isLoaded}getModel(e){const n=new lu(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:t8(e,this.props._useMeshColors),isInstanced:!0}),{texture:r}=this.props,{emptyTexture:i}=this.state;return n.setUniforms({sampler:r||i,hasTexture:!!r}),n}setTexture(e){const{emptyTexture:n,model:r}=this.state;r&&r.setUniforms({sampler:e||n,hasTexture:!!e})}}j(Hk,"defaultProps",vFe);j(Hk,"layerName","SimpleMeshLayer");class Ug{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n}=e;this.id=n||_c(this.constructor.name),this.display=!0,this.position=new _s,this.rotation=new _s,this.scale=new _s(1,1,1),this.matrix=new zs,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return In(e.length===3,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return In(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return In(e.length===3,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:n,rotation:r,scale:i,update:o=!0}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(r),this}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:n,rotation:r,scale:i}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,n){In(e),n=n||this.matrix;const r=new zs(e).multiplyRight(n),i=r.invert(),o=i.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class T_ extends Ug{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;Hn.assert(n.every(r=>r instanceof Ug),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)Array.isArray(i)?this.add(...i):this.children.push(i);return this}remove(e){const n=this.children,r=n.indexOf(e);return r>-1&&n.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,r)=>{let{worldMatrix:i}=r;const o=n.getBounds();if(!o)return;const[l,f]=o,s=new _s(l).add(f).divide([2,2,2]);i.transformAsPoint(s,s);const p=new _s(f).subtract(l).divide([2,2,2]);i.transformAsVector(p,p);for(let v=0;v<8;v++){const x=new _s(v&1?-1:1,v&2?-1:1,v&4?-1:1).multiply(p).add(s);for(let S=0;S<3;S++)e[0][S]=Math.min(e[0][S],x[S]),e[1][S]=Math.max(e[1][S],x[S])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new zs}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new zs(n).multiplyRight(this.matrix);for(const i of this.children)i instanceof T_?i.traverse(e,{worldMatrix:r}):e(i,{worldMatrix:r})}}const yFe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_Fe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function n8(t){if(!t._animation){const e=_Fe[t.componentType],n=yFe[t.type],r=n*t.count,{buffer:i,byteOffset:o}=t.bufferView.data,l=new e(i,o+(t.byteOffset||0),r);if(n===1)t._animation=Array.from(l);else{const f=[];for(let s=0;s<l.length;s+=n)f.push(Array.from(l.slice(s,s+n)));t._animation=f}}return t._animation}const bFe=new zs;function xFe(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=bFe.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}const tR=new pPe;function wFe(t,e,n,r,i){if(e==="rotation"){tR.slerp({start:n,target:r,ratio:i});for(let o=0;o<tR.length;o++)t[e][o]=tR[o]}else for(let o=0;o<n.length;o++)t[e][o]=i*r[o]+(1-i)*n[o]}function SFe(t,e,n){let{p0:r,outTangent0:i,inTangent1:o,p1:l,tDiff:f,ratio:s}=n;for(let p=0;p<t[e].length;p++){const v=i[p]*f,x=o[p]*f;t[e][p]=(2*Math.pow(s,3)-3*Math.pow(s,2)+1)*r[p]+(Math.pow(s,3)-2*Math.pow(s,2)+s)*v+(-2*Math.pow(s,3)+3*Math.pow(s,2))*l[p]+(Math.pow(s,3)-Math.pow(s,2))*x}}function EFe(t,e,n){for(let r=0;r<n.length;r++)t[e][r]=n[r]}function CFe(t,e,n,r){let{input:i,interpolation:o,output:l}=e;const f=i[i.length-1],s=t%f,p=i.findIndex(M=>M>=s),v=Math.max(0,p-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:Hn.warn("Bad animation path ".concat(r))()}In(n[r].length===l[v].length);const x=i[v],S=i[p];switch(o){case"STEP":EFe(n,r,l[v]);break;case"LINEAR":if(S>x){const M=(s-x)/(S-x);wFe(n,r,l[v],l[p],M)}break;case"CUBICSPLINE":if(S>x){const M=(s-x)/(S-x),P=S-x,R=l[3*v+1],D=l[3*v+2],B=l[3*p+0],O=l[3*p+1];SFe(n,r,{p0:R,outTangent0:D,inTangent1:B,p1:O,tDiff:P,ratio:M})}break;default:Hn.warn("Interpolation ".concat(o," not supported"))();break}}class TFe{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const r=(e/1e3-this.startTime)*this.speed;this.channels.forEach(i=>{let{sampler:o,target:l,path:f}=i;CFe(r,o,l,f),xFe(l,l._node)})}}class AFe{constructor(e){this.animations=e.animations.map((n,r)=>{const i=n.name||"Animation-".concat(r),o=n.samplers.map(f=>{let{input:s,interpolation:p="LINEAR",output:v}=f;return{input:n8(e.accessors[s]),interpolation:p,output:n8(e.accessors[v])}}),l=n.channels.map(f=>{let{sampler:s,target:p}=f;return{sampler:o[s],target:e.nodes[p.node],path:p.path}});return new TFe({name:i,channels:l})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class MFe extends Ug{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof lu?(this.model=e,this._setModelNodeProps(n)):this.model=new lu(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class PFe{constructor(e,n){let{attributes:r,material:i,pbrDebug:o,imageBasedLightingEnvironment:l,lights:f,useTangents:s}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},rk(e,Vi.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],l&&(this.uniforms.u_DiffuseEnvSampler=l.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=l.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=l.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&s,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(l,"USE_IBL"),this.defineIfPresent(f,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const i=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},o=e.texture.source.image;let l,f={};o.compressed?(l=o,f={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):l={data:o};const s=new Zs(this.gl,{id:e.name||e.id,parameters:{...i,...f},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...l});this.uniforms[n]=s,this.defineIfPresent(r,r),this.generatedTextures.push(s)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:r=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,r]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else e.alphaMode==="BLEND"&&(Hn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}const IFe=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,RFe=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function r8(t,e){return kr(t)?`#version 300 es
`.concat(e):e}function OFe(t,e){const{id:n,drawMode:r,vertexCount:i,attributes:o,modelOptions:l}=e,f=new PFe(t,e);Hn.info(4,"createGLTFModel defines: ",f.defines)();const s=[];s.push(...f.generatedTextures),s.push(...Object.values(o).map(v=>v.buffer));const p=new MFe(t,{id:n,drawMode:r,vertexCount:i,modules:[xZ],parameters:f.parameters,vs:r8(t,IFe),fs:r8(t,RFe),managedResources:s,...l,defines:{...f.defines,...l.defines}});return p.setProps({attributes:o}),p.setUniforms(f.uniforms),p}const LFe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BFe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class DFe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.options=Object.assign({},BFe,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(r=>this.createScene(r))}createAnimator(){return Array.isArray(this.gltf.animations)?new AFe(this.gltf):null}createScene(e){const r=(e.nodes||[]).map(o=>this.createNode(o));return new T_({id:e.name||e.id,children:r})}createNode(e){if(!e._node){const r=(e.children||[]).map(o=>this.createNode(o));e.mesh&&r.push(this.createMesh(e.mesh));const i=new T_({id:e.name||e.id,children:r});if(e.matrix)i.setMatrix(e.matrix);else{if(i.matrix.identity(),e.translation&&i.matrix.translate(e.translation),e.rotation){const o=new zs().fromQuaternion(e.rotation);i.matrix.multiplyRight(o)}e.scale&&i.matrix.scale(e.scale)}e._node=i}return e._node}createMesh(e){if(!e._mesh){const r=(e.primitives||[]).map((o,l)=>this.createPrimitive(o,l,e)),i=new T_({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}getVertexCount(e){Hn.warn("getVertexCount() not found")()}createPrimitive(e,n,r){const i=OFe(this.gl,Object.assign({id:e.name||"".concat(r.name||r.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return i.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],i}createAttributes(e,n){const r={};return Object.keys(e).forEach(i=>{r[i]=this.createAccessor(e[i],this.createBuffer(e[i],this.gl.ARRAY_BUFFER))}),n&&(r.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),Hn.info(4,"glTF Attributes",{attributes:e,indices:n,generated:r})(),r}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:r}=e;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[n]||(r.lumaBuffers[n]=new Oi(this.gl,{id:"from-".concat(r.id),data:r.data||e.value,target:n})),r.lumaBuffers[n]}createAccessor(e,n){return new pa({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:LFe[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function kFe(t,e,n){const r=new DFe(t,n),i=r.instantiate(e),o=r.createAnimator();return{scenes:i,animator:o}}const FFe="3.4.15";function zFe(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const nR={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},NFe=nR.global||nR.self||nR.window||{},GT=typeof process!="object"||String(process)!=="[object process]"||process.browser,Wk=typeof importScripts=="function",i8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);i8&&parseFloat(i8[1]);const $Fe=null,jFe=null,mB=null,oJ=null,UFe=Object.freeze(Object.defineProperty({__proto__:null,readFileAsArrayBuffer:$Fe,readFileAsText:jFe,requireFromFile:mB,requireFromString:oJ},Symbol.toStringTag,{value:"Module"})),VFe="3.4.15",rR={};async function gC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e&&(t=GFe(t,e,n)),rR[t]=rR[t]||HFe(t),await rR[t]}function GFe(t,e,n){if(t.startsWith("http"))return t;const r=n.modules||{};return r[t]?r[t]:GT?n.CDN?(zFe(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(VFe,"/dist/libs/").concat(t)):Wk?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function HFe(t){if(t.endsWith("wasm"))return await(await fetch(t)).arrayBuffer();if(!GT)try{return UFe&&mB&&await mB(t)}catch{return null}if(Wk)return importScripts(t);const n=await(await fetch(t)).text();return WFe(n,t)}function WFe(t,e){if(!GT)return oJ;if(Wk)return eval.call(NFe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}const XFe="3.4.15",sJ="3.4.15",qFe="https://unpkg.com/@loaders.gl/textures@".concat(sJ,"/dist/libs/basis_encoder.wasm"),YFe="https://unpkg.com/@loaders.gl/textures@".concat(sJ,"/dist/libs/basis_encoder.js");let iR;async function o8(t){const e=t.modules||{};return e.basis?e.basis:(iR=iR||ZFe(t),await iR)}async function ZFe(t){let e=null,n=null;return[e,n]=await Promise.all([await gC("basis_transcoder.js","textures",t),await gC("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,await KFe(e,n)}function KFe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{const{BasisFile:o,initializeBasis:l}=i;l(),r({BasisFile:o})})})}let oR;async function s8(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(oR=oR||JFe(t),await oR)}async function JFe(t){let e=null,n=null;return[e,n]=await Promise.all([await gC(YFe,"textures",t),await gC(qFe,"textures",t)]),e=e||globalThis.BASIS,await QFe(e,n)}function QFe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{const{BasisFile:o,KTX2File:l,initializeBasis:f,BasisEncoder:s}=i;f(),r({BasisFile:o,KTX2File:l,BasisEncoder:s})})})}const Qm={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},eze=["","WEBKIT_","MOZ_"],a8={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let Yw=null;function tze(t){if(!Yw){t=t||nze()||void 0,Yw=new Set;for(const e of eze)for(const n in a8)if(t&&t.getExtension("".concat(e).concat(n))){const r=a8[n];Yw.add(r)}}return Yw}function nze(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var l8,c8,u8,d8,f8,h8,p8,m8;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(l8||(l8={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(c8||(c8={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(u8||(u8={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(d8||(d8={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(f8||(f8={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(h8||(h8={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(p8||(p8={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(m8||(m8={}));const Oa=[171,75,84,88,32,50,48,187,13,10,26,10];function rze(t){const e=new Uint8Array(t);return!(e.byteLength<Oa.length||e[0]!==Oa[0]||e[1]!==Oa[1]||e[2]!==Oa[2]||e[3]!==Oa[3]||e[4]!==Oa[4]||e[5]!==Oa[5]||e[6]!==Oa[6]||e[7]!==Oa[7]||e[8]!==Oa[8]||e[9]!==Oa[9]||e[10]!==Oa[10]||e[11]!==Oa[11])}const ize={etc1:{basisFormat:0,compressed:!0,format:Qm.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Qm.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Qm.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Qm.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Qm.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Qm.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function oze(t,e){if(e.basis.containerFormat==="auto"){if(rze(t)){const r=await s8(e);return g8(r.KTX2File,t,e)}const{BasisFile:n}=await o8(e);return sR(n,t,e)}switch(e.basis.module){case"encoder":const n=await s8(e);switch(e.basis.containerFormat){case"ktx2":return g8(n.KTX2File,t,e);case"basis":default:return sR(n.BasisFile,t,e)}case"transcoder":default:const{BasisFile:r}=await o8(e);return sR(r,t,e)}}function sR(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const i=r.getNumImages(),o=[];for(let l=0;l<i;l++){const f=r.getNumLevels(l),s=[];for(let p=0;p<f;p++)s.push(sze(r,l,p,n));o.push(s)}return o}finally{r.close(),r.delete()}}function sze(t,e,n,r){const i=t.getImageWidth(e,n),o=t.getImageHeight(e,n),l=t.getHasAlpha(),{compressed:f,format:s,basisFormat:p}=aJ(r,l),v=t.getImageTranscodedSizeInBytes(e,n,p),x=new Uint8Array(v);if(!t.transcodeImage(x,e,n,p,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:o,data:x,compressed:f,format:s,hasAlpha:l}}function g8(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const i=r.getLevels(),o=[];for(let l=0;l<i;l++){o.push(aze(r,l,n));break}return[o]}finally{r.close(),r.delete()}}function aze(t,e,n){const{alphaFlag:r,height:i,width:o}=t.getImageLevelInfo(e,0,0),{compressed:l,format:f,basisFormat:s}=aJ(n,r),p=t.getImageTranscodedSizeInBytes(e,0,0,s),v=new Uint8Array(p);if(!t.transcodeImage(v,e,0,0,s,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:v,compressed:l,levelSize:p,hasAlpha:r,format:f}}function aJ(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=lJ()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),ize[n]}function lJ(){const t=tze();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const lze={name:"Basis",id:GT?"basis":"basis-nodejs",module:"textures",version:XFe,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},cze={...lze,parse:oze};function Tb(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function uze(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?v8(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?v8(t,0,e):""}function v8(t,e,n){if(t.byteLength<=e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function dze(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(uze(t),'"'))}}function cJ(t,e,n){const r=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}function ux(t,e){return Tb(t>=0),Tb(e>0),t+(e-1)&~(e-1)}function fze(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const i=t.byteOffset,o=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,i,o)}return e.set(r,n),n+ux(r.byteLength,4)}function Wa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function uJ(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return r.substr(0,r.lastIndexOf("/")+1)+t}function hze(t,e,n){const r=t.bufferViews[n];Wa(r);const i=r.buffer,o=e[i];Wa(o);const l=(r.byteOffset||0)+o.byteOffset;return new Uint8Array(o.arrayBuffer,l,r.byteLength)}const y8=["SCALAR","VEC2","VEC3","VEC4"],pze=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],mze=new Map(pze),gze={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vze={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},yze={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function dJ(t){return y8[t-1]||y8[0]}function fJ(t){const e=mze.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function Xk(t,e){const n=yze[t.componentType],r=gze[t.type],i=vze[t.componentType],o=t.count*r,l=t.count*r*i;return Wa(l>=0&&l<=e.byteLength),{ArrayType:n,length:o,byteLength:l}}const _ze={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class ba{constructor(e){j(this,"gltf",void 0),j(this,"sourceBuffers",void 0),j(this,"byteLength",void 0),this.gltf=e||{json:{..._ze},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){const n=this.getUsedExtensions().find(i=>i===e),r=this.json.extensions||{};return n?r[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;const r=this.json[e]&&this.json[e][n];if(!r)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);const n=e.buffer,r=this.gltf.buffers[n];Wa(r);const i=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,i,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,{ArrayType:o,length:l}=Xk(e,n),f=n.byteOffset+e.byteOffset;return new o(i,f,l)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,o=n.byteOffset||0;return new Uint8Array(i,o,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,r){return e.extensions=e.extensions||{},e.extensions[n]=r,this.registerUsedExtension(n),this}setObjectExtension(e,n,r){const i=e.extensions||{};i[n]=r}removeObjectExtension(e,n){const r=e.extensions||{},i=r[n];return delete r[n],i}addExtension(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:r}=e;this.json.nodes=this.json.nodes||[];const i={mesh:n};return r&&(i.matrix=r),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:r,material:i,mode:o=4}=e,f={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(r){const s=this._addIndices(r);f.primitives[0].indices=s}return Number.isFinite(i)&&(f.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(f),this.json.meshes.length-1}addPointCloud(e){const r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,n){const r=K3(e),i=n||(r==null?void 0:r.mimeType),l={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(l),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Wa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const r={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=ux(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(e,n){const r={bufferView:e,type:dJ(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3};const r=this.addBufferView(e);let i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:fJ(e),count:Math.round(e.length/n.size),min:i.min,max:i.max};return this.addAccessor(r,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,r={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const r=this.byteLength,i=new ArrayBuffer(r),o=new Uint8Array(i);let l=0;for(const f of this.sourceBuffers||[])l=fze(f,o,l);(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(e,n){let r=!0;for(;r;){const i=e.indexOf(n);i>-1?e.splice(i,1):r=!1}}_addAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};for(const r in e){const i=e[r],o=this._getGltfAttributeName(r),l=this.addBinaryBuffer(i.value,i);n[o]=l}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const r={min:null,max:null};if(e.length<n)return r;r.min=[],r.max=[];const i=e.subarray(0,n);for(const o of i)r.min.push(o),r.max.push(o);for(let o=n;o<e.length;o+=n)for(let l=0;l<n;l++)r.min[0+l]=Math.min(r.min[0+l],e[o+l]),r.max[0+l]=Math.max(r.max[0+l],e[o+l]);return r}}const bze="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",xze="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",wze=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Sze=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Eze={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Cze={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function Tze(t,e,n,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"NONE";const l=await Aze();Ize(l,l.exports[Cze[i]],t,e,n,r,l.exports[Eze[o||"NONE"]])}let aR;async function Aze(){return aR||(aR=Mze()),aR}async function Mze(){let t=bze;WebAssembly.validate(wze)&&(t=xze,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(Pze(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function Pze(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const i=t.charCodeAt(r);e[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?Sze[e[r]]:(e[r]-60)*64+e[++r];return e.buffer.slice(0,n)}function Ize(t,e,n,r,i,o,l){const f=t.exports.sbrk,s=r+3&-4,p=f(s*i),v=f(o.length),x=new Uint8Array(t.exports.memory.buffer);x.set(o,v);const S=e(p,r,i,v,o.length);if(S===0&&l&&l(p,s,i),n.set(x.subarray(p,p+r*i)),f(p-f(0)),S!==0)throw new Error("Malformed buffer data: ".concat(S))}const qk="EXT_meshopt_compression",Rze=qk;async function Oze(t,e){var n;const r=new ba(t);if(!(e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes))return;const i=[];for(const o of t.json.bufferViews||[])i.push(Lze(r,o));await Promise.all(i),r.removeExtension(qk)}async function Lze(t,e){const n=t.getObjectExtension(e,qk);if(n){const{byteOffset:r=0,byteLength:i=0,byteStride:o,count:l,mode:f,filter:s="NONE",buffer:p}=n,v=t.gltf.buffers[p],x=new Uint8Array(v.arrayBuffer,v.byteOffset+r,i),S=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return await Tze(S,l,o,x,f,s),S}return null}const Bze=Object.freeze(Object.defineProperty({__proto__:null,decode:Oze,name:Rze},Symbol.toStringTag,{value:"Module"})),og="EXT_texture_webp",Dze=og;function kze(t,e){const n=new ba(t);if(!xSe("image/webp")){if(n.getRequiredExtensions().includes(og))throw new Error("gltf: Required extension ".concat(og," not supported by browser"));return}const{json:r}=n;for(const i of r.textures||[]){const o=n.getObjectExtension(i,og);o&&(i.source=o.source),n.removeObjectExtension(i,og)}n.removeExtension(og)}const Fze=Object.freeze(Object.defineProperty({__proto__:null,name:Dze,preprocess:kze},Symbol.toStringTag,{value:"Module"})),qS="KHR_texture_basisu",zze=qS;function Nze(t,e){const n=new ba(t),{json:r}=n;for(const i of r.textures||[]){const o=n.getObjectExtension(i,qS);o&&(i.source=o.source),n.removeObjectExtension(i,qS)}n.removeExtension(qS)}const $ze=Object.freeze(Object.defineProperty({__proto__:null,name:zze,preprocess:Nze},Symbol.toStringTag,{value:"Module"}));function jze(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const lR={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Uze=lR.global||lR.self||lR.window||{},HT=typeof process!="object"||String(process)!=="[object process]"||process.browser,Yk=typeof importScripts=="function",_8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);_8&&parseFloat(_8[1]);const Vze=null,Gze=null,gB=null,hJ=null,Hze=Object.freeze(Object.defineProperty({__proto__:null,readFileAsArrayBuffer:Vze,readFileAsText:Gze,requireFromFile:gB,requireFromString:hJ},Symbol.toStringTag,{value:"Module"})),Wze="3.4.15",cR={};async function uR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e&&(t=Xze(t,e,n)),cR[t]=cR[t]||qze(t),await cR[t]}function Xze(t,e,n){if(t.startsWith("http"))return t;const r=n.modules||{};return r[t]?r[t]:HT?n.CDN?(jze(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Wze,"/dist/libs/").concat(t)):Yk?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function qze(t){if(t.endsWith("wasm"))return await(await fetch(t)).arrayBuffer();if(!HT)try{return Hze&&gB&&await gB(t)}catch{return null}if(Yk)return importScripts(t);const n=await(await fetch(t)).text();return Yze(n,t)}function Yze(t,e){if(!HT)return hJ;if(Yk)return eval.call(Uze,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}const Zze="3.4.15",Kze={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},Jze={name:"Draco",id:HT?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:Zze,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:Kze};function Qze(t,e,n){const r=pJ(e.metadata),i=[],o=eNe(e.attributes);for(const l in t){const f=t[l],s=b8(l,f,o[l]);i.push(s)}if(n){const l=b8("indices",n);i.push(l)}return new Tg(i,r)}function eNe(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}function b8(t,e,n){const r=n?pJ(n.metadata):void 0;return pFe(t,e,r)}function pJ(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const x8={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},tNe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},nNe=4;class rNe{constructor(e){j(this,"draco",void 0),j(this,"decoder",void 0),j(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const i=this.decoder.GetEncodedGeometryType(r),o=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let l;switch(i){case this.draco.TRIANGULAR_MESH:l=this.decoder.DecodeBufferToMesh(r,o);break;case this.draco.POINT_CLOUD:l=this.decoder.DecodeBufferToPointCloud(r,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!l.ok()||!o.ptr){const S="DRACO decompression failed: ".concat(l.error_msg());throw new Error(S)}const f=this._getDracoLoaderData(o,i,n),s=this._getMeshData(o,f,n),p=QK(s.attributes),v=Qze(s.attributes,f,s.indices);return{loader:"draco",loaderData:f,header:{vertexCount:o.num_points(),boundingBox:p},...s,schema:v}}finally{this.draco.destroy(r),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,r){const i=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,r);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:o}}_getDracoAttributes(e,n){const r={};for(let i=0;i<e.num_attributes();i++){const o=this.decoder.GetAttribute(e,i),l=this._getAttributeMetadata(e,i);r[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:i,metadata:l};const f=this._getQuantizationTransform(o,n);f&&(r[o.unique_id()].quantization_transform=f);const s=this._getOctahedronTransform(o,n);s&&(r[o.unique_id()].octahedron_transform=s)}return r}_getMeshData(e,n,r){const i=this._getMeshAttributes(n,e,r);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(e,n,r){const i={};for(const o of Object.values(e.attributes)){const l=this._deduceAttributeName(o,r);o.name=l;const{value:f,size:s}=this._getAttributeValues(n,o);i[l]={value:f,size:s,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return i}_getTriangleListIndices(e){const r=e.num_faces()*3,i=r*nNe,o=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,o),new Uint32Array(this.draco.HEAPF32.buffer,o,r).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),sNe(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const r=tNe[n.data_type],i=n.num_components,l=e.num_points()*i,f=l*r.BYTES_PER_ELEMENT,s=iNe(this.draco,r);let p;const v=this.draco._malloc(f);try{const x=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,x,s,f,v),p=new r(this.draco.HEAPF32.buffer,v,l).slice()}finally{this.draco._free(v)}return{value:p,size:i}}_deduceAttributeName(e,n){const r=e.unique_id;for(const[l,f]of Object.entries(n.extraAttributes||{}))if(f===r)return l;const i=e.attribute_type;for(const l in x8)if(this.draco[l]===i)return x8[l];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(r)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const r=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},r=this.metadataQuerier.NumEntries(e);for(let i=0;i<r;i++){const o=this.metadataQuerier.GetEntryName(e,i);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,r);const i=oNe(r);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:i}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:r=[]}=e,i=[...n,...r];for(const o of i)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:r=[]}=n,i=e.attribute_type();if(r.map(l=>this.decoder[l]).includes(i)){const l=new this.draco.AttributeQuantizationTransform;try{if(l.InitFromAttribute(e))return{quantization_bits:l.quantization_bits(),range:l.range(),min_values:new Float32Array([1,2,3]).map(f=>l.min_value(f))}}finally{this.draco.destroy(l)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:r=[]}=n,i=e.attribute_type();if(r.map(l=>this.decoder[l]).includes(i)){const l=new this.draco.AttributeQuantizationTransform;try{if(l.InitFromAttribute(e))return{quantization_bits:l.quantization_bits()}}finally{this.draco.destroy(l)}}return null}}function iNe(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function oNe(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}function sNe(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}const aNe="1.5.5",Zk="https://www.gstatic.com/draco/versioned/decoders/".concat(aNe),lNe="".concat(Zk,"/draco_decoder.js"),cNe="".concat(Zk,"/draco_wasm_wrapper.js"),uNe="".concat(Zk,"/draco_decoder.wasm");let I0;async function dNe(t){const e=t.modules||{};return e.draco3d?I0=I0||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):I0=I0||fNe(t),await I0}async function fNe(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await uR(lNe,"draco",t);break;case"wasm":default:[e,n]=await Promise.all([await uR(cNe,"draco",t),await uR(uNe,"draco",t)])}return e=e||globalThis.DracoDecoderModule,await hNe(e,n)}function hNe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t({...n,onModuleLoaded:i=>r({draco:i})})})}const pNe={...Jze,parse:mNe};async function mNe(t,e){const{draco:n}=await dNe(e),r=new rNe(n);try{return r.parseSync(t,e==null?void 0:e.draco)}finally{r.destroy()}}function gNe(t){const e={};for(const n in t){const r=t[n];if(n!=="indices"){const i=mJ(r);e[n]=i}}return e}function mJ(t){const{buffer:e,size:n,count:r}=vNe(t);return{value:e,size:n,byteOffset:0,count:r,type:dJ(n),componentType:fJ(e)}}function vNe(t){let e=t,n=1,r=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=yNe(e,Float32Array)),r=e.length/n),{buffer:e,size:n,count:r}}function yNe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}const Sp="KHR_draco_mesh_compression",_Ne=Sp;function bNe(t,e,n){const r=new ba(t);for(const i of gJ(r))r.getObjectExtension(i,Sp)}async function xNe(t,e,n){var r;if(!(e!=null&&(r=e.gltf)!==null&&r!==void 0&&r.decompressMeshes))return;const i=new ba(t),o=[];for(const l of gJ(i))i.getObjectExtension(l,Sp)&&o.push(SNe(i,l,e,n));await Promise.all(o),i.removeExtension(Sp)}function wNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=new ba(t);for(const r of n.json.meshes||[])ENe(r,e),n.addRequiredExtension(Sp)}async function SNe(t,e,n,r){const i=t.getObjectExtension(e,Sp);if(!i)return;const o=t.getTypedArrayForBufferView(i.bufferView),l=cJ(o.buffer,o.byteOffset),{parse:f}=r,s={...n};delete s["3d-tiles"];const p=await f(l,pNe,s,r),v=gNe(p.attributes);for(const[x,S]of Object.entries(v))if(x in e.attributes){const M=e.attributes[x],P=t.getAccessor(M);P!=null&&P.min&&P!==null&&P!==void 0&&P.max&&(S.min=P.min,S.max=P.max)}e.attributes=v,p.indices&&(e.indices=mJ(p.indices)),CNe(e)}function ENe(t,e){var n;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const l=i.DracoWriter.encodeSync({attributes:t}),f=o==null||(n=o.parseSync)===null||n===void 0?void 0:n.call(o,{attributes:t}),s=i._addFauxAttributes(f.attributes),p=i.addBufferView(l);return{primitives:[{attributes:s,mode:r,extensions:{[Sp]:{bufferView:p,attributes:s}}}]}}function CNe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*gJ(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const TNe=Object.freeze(Object.defineProperty({__proto__:null,decode:xNe,encode:wNe,name:_Ne,preprocess:bNe},Symbol.toStringTag,{value:"Module"})),ANe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MNe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Kk="KHR_texture_transform",PNe=Kk,Zw=new _s,INe=new rx,RNe=new rx;async function ONe(t,e){if(!new ba(t).getExtension(Kk))return;const i=t.json.materials||[];for(let o=0;o<i.length;o++)LNe(o,t)}function LNe(t,e){var n,r,i;const o=[],l=(n=e.json.materials)===null||n===void 0?void 0:n[t],f=l==null||(r=l.pbrMetallicRoughness)===null||r===void 0?void 0:r.baseColorTexture;f&&R0(e,t,f,o);const s=l==null?void 0:l.emissiveTexture;s&&R0(e,t,s,o);const p=l==null?void 0:l.normalTexture;p&&R0(e,t,p,o);const v=l==null?void 0:l.occlusionTexture;v&&R0(e,t,v,o);const x=l==null||(i=l.pbrMetallicRoughness)===null||i===void 0?void 0:i.metallicRoughnessTexture;x&&R0(e,t,x,o)}function R0(t,e,n,r){const i=BNe(n,r);if(!i)return;const o=t.json.meshes||[];for(const l of o)for(const f of l.primitives){const s=f.material;Number.isFinite(s)&&e===s&&DNe(t,f,i)}}function BNe(t,e){var n;const r=(n=t.extensions)===null||n===void 0?void 0:n[Kk],{texCoord:i=0}=t,{texCoord:o=i}=r;if(!(e.findIndex(f=>{let[s,p]=f;return s===i&&p===o})!==-1)){const f=zNe(r);return i!==o&&(t.texCoord=o),e.push([i,o]),{originalTexCoord:i,texCoord:o,matrix:f}}return null}function DNe(t,e,n){const{originalTexCoord:r,texCoord:i,matrix:o}=n,l=e.attributes["TEXCOORD_".concat(r)];if(Number.isFinite(l)){var f;const p=(f=t.json.accessors)===null||f===void 0?void 0:f[l];if(p&&p.bufferView){var s;const v=(s=t.json.bufferViews)===null||s===void 0?void 0:s[p.bufferView];if(v){const{arrayBuffer:x,byteOffset:S}=t.buffers[v.buffer],M=(S||0)+(p.byteOffset||0)+(v.byteOffset||0),{ArrayType:P,length:R}=Xk(p,v),D=MNe[p.componentType],B=ANe[p.type],O=v.byteStride||D*B,k=new Float32Array(R);for(let $=0;$<p.count;$++){const H=new P(x,M+$*O,2);Zw.set(H[0],H[1],1),Zw.transformByMatrix3(o),k.set([Zw[0],Zw[1]],$*B)}r===i?kNe(p,v,t.buffers,k):FNe(i,p,e,t,k)}}}}function kNe(t,e,n,r){t.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}function FNe(t,e,n,r,i){r.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const o=r.json.bufferViews;if(!o)return;o.push({buffer:r.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const l=r.json.accessors;l&&(l.push({bufferView:(o==null?void 0:o.length)-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=l.length-1)}function zNe(t){const{offset:e=[0,0],rotation:n=0,scale:r=[1,1]}=t,i=new rx().set(1,0,0,0,1,0,e[0],e[1],1),o=INe.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),l=RNe.set(r[0],0,0,0,r[1],0,0,0,1);return i.multiplyRight(o).multiplyRight(l)}const NNe=Object.freeze(Object.defineProperty({__proto__:null,decode:ONe,name:PNe},Symbol.toStringTag,{value:"Module"})),ep="KHR_lights_punctual",$Ne=ep;async function jNe(t){const e=new ba(t),{json:n}=e,r=e.getExtension(ep);r&&(e.json.lights=r.lights,e.removeExtension(ep));for(const i of n.nodes||[]){const o=e.getObjectExtension(i,ep);o&&(i.light=o.light),e.removeObjectExtension(i,ep)}}async function UNe(t){const e=new ba(t),{json:n}=e;if(n.lights){const r=e.addExtension(ep);Wa(!r.lights),r.lights=n.lights,delete n.lights}if(e.json.lights){for(const r of e.json.lights){const i=r.node;e.addObjectExtension(i,ep,r)}delete e.json.lights}}const VNe=Object.freeze(Object.defineProperty({__proto__:null,decode:jNe,encode:UNe,name:$Ne},Symbol.toStringTag,{value:"Module"})),Ab="KHR_materials_unlit",GNe=Ab;async function HNe(t){const e=new ba(t),{json:n}=e;for(const r of n.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,Ab);e.removeExtension(Ab)}function WNe(t){const e=new ba(t),{json:n}=e;if(e.materials)for(const r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,Ab,{}),e.addExtension(Ab))}const XNe=Object.freeze(Object.defineProperty({__proto__:null,decode:HNe,encode:WNe,name:GNe},Symbol.toStringTag,{value:"Module"})),J0="KHR_techniques_webgl",qNe=J0;async function YNe(t){const e=new ba(t),{json:n}=e,r=e.getExtension(J0);if(r){const i=KNe(r,e);for(const o of n.materials||[]){const l=e.getObjectExtension(o,J0);l&&(o.technique=Object.assign({},l,i[l.technique]),o.technique.values=JNe(o.technique,e)),e.removeObjectExtension(o,J0)}e.removeExtension(J0)}}async function ZNe(t,e){}function KNe(t,e){const{programs:n=[],shaders:r=[],techniques:i=[]}=t,o=new TextDecoder;return r.forEach(l=>{if(Number.isFinite(l.bufferView))l.code=o.decode(e.getTypedArrayForBufferView(l.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(l=>{l.fragmentShader=r[l.fragmentShader],l.vertexShader=r[l.vertexShader]}),i.forEach(l=>{l.program=n[l.program]}),i}function JNe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(r=>{t.uniforms[r].value&&!(r in n)&&(n[r]=t.uniforms[r].value)}),Object.keys(n).forEach(r=>{typeof n[r]=="object"&&n[r].index!==void 0&&(n[r].texture=e.getTexture(n[r].index))}),n}const QNe=Object.freeze(Object.defineProperty({__proto__:null,decode:YNe,encode:ZNe,name:qNe},Symbol.toStringTag,{value:"Module"})),vJ="EXT_feature_metadata",e4e=vJ;async function t4e(t){const e=new ba(t);n4e(e)}function n4e(t){var e;const n=t.getExtension(vJ),r=n==null||(e=n.schema)===null||e===void 0?void 0:e.classes,i=n==null?void 0:n.featureTables;if((n==null?void 0:n.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),r&&i)for(const l in r){const f=r[l],s=o4e(i,l);s&&r4e(t,s,f)}}function r4e(t,e,n){for(const i in n.properties){var r;const o=n.properties[i],l=e==null||(r=e.properties)===null||r===void 0?void 0:r[i],f=e.count;if(l){const s=i4e(t,o,f,l);l.data=s}}}function i4e(t,e,n,r){const i=r.bufferView;let o=t.getTypedArrayForBufferView(i);switch(e.type){case"STRING":{const l=r.stringOffsetBufferView,f=t.getTypedArrayForBufferView(l);o=s4e(o,f,n);break}}return o}function o4e(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}function s4e(t,e,n){const r=[],i=new TextDecoder("utf8");let o=0;const l=4;for(let f=0;f<n;f++){const s=e[(f+1)*l]-e[f*l],p=t.subarray(o,s+o),v=i.decode(p);r.push(v),o+=s}return r}const a4e=Object.freeze(Object.defineProperty({__proto__:null,decode:t4e,name:e4e},Symbol.toStringTag,{value:"Module"})),yJ=[Bze,Fze,$ze,TNe,VNe,XNe,QNe,NNe,a4e];function l4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=yJ.filter(o=>_J(o.name,e));for(const o of r){var i;(i=o.preprocess)===null||i===void 0||i.call(o,t,e,n)}}async function c4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=yJ.filter(o=>_J(o.name,e));for(const o of r){var i;await((i=o.decode)===null||i===void 0?void 0:i.call(o,t,e,n))}}function _J(t,e){var n;const r=(e==null||(n=e.gltf)===null||n===void 0?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}const dR="KHR_binary_glTF";function u4e(t){const e=new ba(t),{json:n}=e;for(const r of n.images||[]){const i=e.getObjectExtension(r,dR);i&&Object.assign(r,i),e.removeObjectExtension(r,dR)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(dR)}const w8={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},d4e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class f4e{constructor(){j(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),j(this,"json",void 0)}normalize(e,n){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(r.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),u4e(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in w8)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const r=e[n];if(!(!r||Array.isArray(r))){e[n]=[];for(const i in r){const o=r[i];o.id=o.id||i;const l=e[n].length;e[n].push(o),this.idToIndexMap[n][i]=l}}}_convertObjectIdsToArrayIndices(e){for(const n in w8)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:r,indices:i,material:o}=n;for(const l in r)r[l]=this._convertIdToIndex(r[l],"accessor");i&&(n.indices=this._convertIdToIndex(i,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const r of e[n])for(const i in r){const o=r[i],l=this._convertIdToIndex(o,i);r[i]=l}}_convertIdToIndex(e,n){const r=d4e[n];if(r in this.idToIndexMap){const i=this.idToIndexMap[r][e];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return i}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const o of e.materials){var n,r,i;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const l=((n=o.values)===null||n===void 0?void 0:n.tex)||((r=o.values)===null||r===void 0?void 0:r.texture2d_0)||((i=o.values)===null||i===void 0?void 0:i.diffuseTex),f=e.textures.findIndex(s=>s.id===l);f!==-1&&(o.pbrMetallicRoughness.baseColorTexture={index:f})}}}function h4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new f4e().normalize(t,e)}const p4e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},m4e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},fl={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},g4e={magFilter:fl.TEXTURE_MAG_FILTER,minFilter:fl.TEXTURE_MIN_FILTER,wrapS:fl.TEXTURE_WRAP_S,wrapT:fl.TEXTURE_WRAP_T},v4e={[fl.TEXTURE_MAG_FILTER]:fl.LINEAR,[fl.TEXTURE_MIN_FILTER]:fl.NEAREST_MIPMAP_LINEAR,[fl.TEXTURE_WRAP_S]:fl.REPEAT,[fl.TEXTURE_WRAP_T]:fl.REPEAT};function y4e(t){return m4e[t]}function _4e(t){return p4e[t]}class b4e{constructor(){j(this,"baseUri",""),j(this,"json",{}),j(this,"buffers",[]),j(this,"images",[])}postProcess(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{json:r,buffers:i=[],images:o=[],baseUri:l=""}=e;return Wa(r),this.baseUri=l,this.json=r,this.buffers=i,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map((n,r)=>this._resolveBufferView(n,r))),e.images&&(e.images=e.images.map((n,r)=>this._resolveImage(n,r))),e.samplers&&(e.samplers=e.samplers.map((n,r)=>this._resolveSampler(n,r))),e.textures&&(e.textures=e.textures.map((n,r)=>this._resolveTexture(n,r))),e.accessors&&(e.accessors=e.accessors.map((n,r)=>this._resolveAccessor(n,r))),e.materials&&(e.materials=e.materials.map((n,r)=>this._resolveMaterial(n,r))),e.meshes&&(e.meshes=e.meshes.map((n,r)=>this._resolveMesh(n,r))),e.nodes&&(e.nodes=e.nodes.map((n,r)=>this._resolveNode(n,r))),e.skins&&(e.skins=e.skins.map((n,r)=>this._resolveSkin(n,r))),e.scenes&&(e.scenes=e.scenes.map((n,r)=>this._resolveScene(n,r))),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if(typeof n=="object")return n;const r=this.json[e]&&this.json[e][n];return r||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),r}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(r=>this.getNode(r)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(r=>this.getNode(r))),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce((r,i)=>{const o=this.getMesh(i);return r.id=o.id,r.primitives=r.primitives.concat(o.primitives),r},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(r=>{r={...r};const i=r.attributes;r.attributes={};for(const o in i)r.attributes[o]=this.getAccessor(i[o]);return r.indices!==void 0&&(r.indices=this.getAccessor(r.indices)),r.material!==void 0&&(r.material=this.getMaterial(r.material)),r})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture={...r.baseColorTexture},r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture={...r.metallicRoughnessTexture},r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=y4e(e.componentType),e.components=_4e(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const r=e.bufferView.buffer,{ArrayType:i,byteLength:o}=Xk(e,e.bufferView),l=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+r.byteOffset;let f=r.arrayBuffer.slice(l,l+o);e.bufferView.byteStride&&(f=this._getValueFromInterleavedBuffer(r,l,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new i(f)}return e}_getValueFromInterleavedBuffer(e,n,r,i,o){const l=new Uint8Array(o*i);for(let f=0;f<o;f++){const s=n+f*r;l.set(new Uint8Array(e.arrayBuffer.slice(s,s+i)),f*i)}return l.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):v4e,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const r in e){const i=this._enumSamplerParameter(r);i!==void 0&&(e.parameters[i]=e[r])}return e}_enumSamplerParameter(e){return g4e[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));const r=this.images[n];return r&&(e.image=r),e}_resolveBufferView(e,n){const r=e.buffer,i={id:"bufferView-".concat(n),...e,buffer:this.buffers[r]},o=this.buffers[r].arrayBuffer;let l=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(l+=e.byteOffset),i.data=new Uint8Array(o,l,e.byteLength),i}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}}function x4e(t,e){return new b4e().postProcess(t,e)}const S8=1735152710,Jk=12,vC=8,w4e=1313821514,S4e=5130562,E4e=0,C4e=1,T4e=0,gv=!0;function A4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function M4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new DataView(t),{magic:i=S8}=n,o=r.getUint32(e,!1);return o===i||o===S8}function P4e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=new DataView(e),i=A4e(r,n+0),o=r.getUint32(n+4,gv),l=r.getUint32(n+8,gv);switch(Object.assign(t,{header:{byteOffset:n,byteLength:l,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),n+=Jk,t.version){case 1:return I4e(t,r,n);case 2:return R4e(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function I4e(t,e,n){Tb(t.header.byteLength>Jk+vC);const r=e.getUint32(n+0,gv),i=e.getUint32(n+4,gv);return n+=vC,Tb(i===T4e),vB(t,e,n,r),n+=r,n+=yB(t,e,n,t.header.byteLength),n}function R4e(t,e,n,r){return Tb(t.header.byteLength>Jk+vC),O4e(t,e,n,r),n+t.header.byteLength}function O4e(t,e,n,r){for(;n+8<=t.header.byteLength;){const i=e.getUint32(n+0,gv),o=e.getUint32(n+4,gv);switch(n+=vC,o){case w4e:vB(t,e,n,i);break;case S4e:yB(t,e,n,i);break;case E4e:r.strict||vB(t,e,n,i);break;case C4e:r.strict||yB(t,e,n,i);break}n+=ux(i,4)}return n}function vB(t,e,n,r){const i=new Uint8Array(e.buffer,n,r),l=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(l),ux(r,4)}function yB(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),ux(r,4)}async function L4e(t,e){var n,r,i,o;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;B4e(t,e,l,f),h4e(t,{normalize:f==null||(n=f.gltf)===null||n===void 0?void 0:n.normalize}),l4e(t,f,s);const p=[];if(f!=null&&(r=f.gltf)!==null&&r!==void 0&&r.loadBuffers&&t.json.buffers&&await D4e(t,f,s),f!=null&&(i=f.gltf)!==null&&i!==void 0&&i.loadImages){const x=k4e(t,f,s);p.push(x)}const v=c4e(t,f,s);return p.push(v),await Promise.all(p),f!=null&&(o=f.gltf)!==null&&o!==void 0&&o.postProcess?x4e(t,f):t}function B4e(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!M4e(e,n,r)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=dze(e);else if(e instanceof ArrayBuffer){const l={};n=P4e(l,e,n,r.glb),Wa(l.type==="glTF","Invalid GLB magic string ".concat(l.type)),t._glb=l,t.json=l.json}else Wa(!1,"GLTF: must be ArrayBuffer or string");const i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:l}=t._glb;t.buffers[0]={arrayBuffer:l[0].arrayBuffer,byteOffset:l[0].byteOffset,byteLength:l[0].byteLength}}const o=t.json.images||[];t.images=new Array(o.length).fill({})}async function D4e(t,e,n){const r=t.json.buffers||[];for(let l=0;l<r.length;++l){const f=r[l];if(f.uri){var i,o;const{fetch:s}=n;Wa(s);const p=uJ(f.uri,e),v=await(n==null||(i=n.fetch)===null||i===void 0?void 0:i.call(n,p)),x=await(v==null||(o=v.arrayBuffer)===null||o===void 0?void 0:o.call(v));t.buffers[l]={arrayBuffer:x,byteOffset:0,byteLength:x.byteLength},delete f.uri}else t.buffers[l]===null&&(t.buffers[l]={arrayBuffer:new ArrayBuffer(f.byteLength),byteOffset:0,byteLength:f.byteLength})}}async function k4e(t,e,n){const r=F4e(t),i=t.json.images||[],o=[];for(const l of r)o.push(z4e(t,i[l],l,e,n));return await Promise.all(o)}function F4e(t){const e=new Set,n=t.json.textures||[];for(const r of n)r.source!==void 0&&e.add(r.source);return Array.from(e).sort()}async function z4e(t,e,n,r,i){const{fetch:o,parse:l}=i;let f;if(e.uri&&!e.hasOwnProperty("bufferView")){const p=uJ(e.uri,r);f=await(await o(p)).arrayBuffer(),e.bufferView={data:f}}if(Number.isFinite(e.bufferView)){const p=hze(t.json,t.buffers,e.bufferView);f=cJ(p.buffer,p.byteOffset,p.byteLength)}Wa(f,"glTF image has no data");let s=await l(f,[vY,cze],{mimeType:e.mimeType,basis:r.basis||{format:lJ()}},i);s&&s[0]&&(s={compressed:!0,mipmaps:!1,width:s[0].width,height:s[0].height,data:s[0]}),t.images=t.images||[],t.images[n]=s}const _B={name:"glTF",id:"gltf",module:"gltf",version:FFe,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:N4e,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};async function N4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={..._B.options,...e},e.gltf={..._B.options.gltf,...e.gltf};const{byteOffset:r=0}=e;return await L4e({},t,r,e,n)}async function $4e(t){const e=[];return t.scenes.forEach(n=>{n.traverse(r=>{Object.values(r.model.getUniforms()).forEach(i=>{i.loaded===!1&&e.push(i)})})}),await j4e(()=>e.some(n=>!n.loaded))}async function j4e(t){for(;t();)await new Promise(e=>requestAnimationFrame(e))}const U4e=`#version 300 es
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif
out vec4 vColor;
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    geometry.normal = project_normal(normal);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,V4e=`#version 300 es
uniform float opacity;
in vec4 vColor;

out vec4 fragmentColor;
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`,bJ=[255,255,255,255],G4e={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene=="object"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:bJ},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[_B]};class Qk extends Cc{constructor(...e){super(...e),j(this,"state",void 0)}getShaders(){const e=[Op,Lp];return this.props._lighting==="pbr"&&e.push(xZ),super.getShaders({vs:U4e,fs:V4e,modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:bJ,transition:!0},instanceModelMatrix:KK})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;n.scenegraph!==r.scenegraph?this._updateScenegraph():n._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}get isLoaded(){var e;return((e=this.state)===null||e===void 0?void 0:e.scenegraph)&&super.isLoaded}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let r=null;if(e.scenegraph instanceof Ug)r={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const f=e.scenegraph,s=kFe(n,f,this._getModelOptions());r={gltf:f,...s},$4e(s).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(Mr.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=e.scenegraph);const i={layer:this,gl:n},o=e.getScene(r,i),l=e.getAnimator(r,i);o instanceof Ug?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,l,e._animations),this.setState({scenegraph:o,animator:l})):o!==null&&Mr.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(r=>{this._setModelAttributes(r.model,n)})}}_applyAnimationsProp(e,n,r){if(!e||!n||!r)return;const i=n.getAnimations();Object.keys(r).sort().forEach(o=>{const l=r[o];if(o==="*")i.forEach(f=>{Object.assign(f,l)});else if(Number.isFinite(Number(o))){const f=Number(o);f>=0&&f<i.length?Object.assign(i[f],l):Mr.warn("animation ".concat(o," not found"))()}else{const f=i.find(({name:s})=>s===o);f?Object.assign(f,l):Mr.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Ug&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(typeof e=="function"?n=e({gl:this.context.gl,layer:this}):n=e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!kr(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:i}=this.context,{sizeScale:o,sizeMinPixels:l,sizeMaxPixels:f,opacity:s,coordinateSystem:p}=this.props,v=this.getNumInstances();this.state.scenegraph.traverse((x,{worldMatrix:S})=>{x.model.setInstanceCount(v),x.updateModuleSettings(e),x.draw({parameters:n,uniforms:{sizeScale:o,opacity:s,sizeMinPixels:l,sizeMaxPixels:f,composeModelMatrix:JK(i,p),sceneModelMatrix:S,u_Camera:x.model.getUniforms().project_uCameraPosition}})})}}j(Qk,"defaultProps",G4e);j(Qk,"layerName","ScenegraphLayer");class H4e{constructor(e,n){ds(this,"onFetch");ds(this,"fetcher");this.onFetch=e,this.fetcher=new UT("ped",n??1,3)}async init(){}createRequests(e,n,r,i){const o=[];for(let l=0;l<n;l++){const f=e+l*r,s=f+r;o.push({startT:f,endT:s,promise:this.onFetch(f,s,i)})}return o}async play(e,n,r,i){const o=await this.fetcher.fetch(e,(S,M,P)=>this.createRequests(S,M,P,i));if(o.length===0)return console.log("PedestrianPlayer: no data"),[];const l=o[0],f=o[o.length-1];console.log(`PedestrianPlayer: play at ${e}, f1.t=${l.t}, f2.t=${f.t}`);const s=new Map;for(const S of f.data)s.set(S.id,S);const p=f.t>l.t&&n?(e-l.t)/(f.t-l.t):0,v=[];for(const S of l.data){let{lng:M,lat:P,v:R}=S;const D=s.get(S.id);if(D){const{lng:B,lat:O}=D;M=M*(1-p)+B*p,P=P*(1-p)+O*p,R=R*(1-p)+D.v*p}v.push({id:S.id,position:[M,P,1.7/2],angle:S.direction,v:R})}return[new Hk({id:"pedestrian",data:v,mesh:new eIe({radius:.5,height:1.7,verticalAxis:"z",bottomCap:!0}),getPosition:S=>S.position,getColor:[255,0,0],pickable:r})]}}function W4e(t){const e=2*Math.PI;return(t%e+e)%e}function X4e(t,e,n){let r=W4e(e-t);return r>Math.PI&&(r=r-Math.PI*2),t+r*n}class q4e{constructor(e,n,r,i){ds(this,"onFetch");ds(this,"fetcher");ds(this,"modelPaths");ds(this,"defaultModelPath");this.onFetch=e,this.modelPaths=n,this.defaultModelPath=r,this.fetcher=new UT("car",i??1,3)}async init(){}createRequests(e,n,r,i){const o=[];for(let l=0;l<n;l++){const f=e+l*r,s=f+r;o.push({startT:f,endT:s,promise:this.onFetch(f,s,i)})}return o}async play(e,n,r,i){const o=await this.fetcher.fetch(e,(S,M,P)=>this.createRequests(S,M,P,i));if(o.length===0)return console.log("CarPlayer: no data"),[];const l=o[0],f=o[o.length-1];console.log(`CarPlayer: play at ${e}, f1.t=${l.t}, f2.t=${f.t}`);const s=new Map;for(const S of f.data)s.set(S.id,S);const p=f.t>l.t&&n?(e-l.t)/(f.t-l.t):0,v={};for(const S of l.data){let{lng:M,lat:P,direction:R,v:D,numPassengers:B}=S;const O=s.get(S.id);if(O){const{lng:k,lat:$}=O;M=M*(1-p)+k*p,P=P*(1-p)+$*p,R=X4e(R,O.direction,p),D=D*(1-p)+O.v*p}S.model in this.modelPaths||(S.model=""),v[S.model]=v[S.model]||[],v[S.model].push({id:S.id,position:[M,P,0],angle:R,v:D,numPassengers:B})}return Object.keys(v).map(S=>new Qk({id:`car-${S}`,data:v[S],scenegraph:this.modelPaths[S]??this.defaultModelPath,getPosition:P=>P.position,getOrientation:P=>[0,P.angle*180/Math.PI,0],_animations:{"*":{speed:5}},sizeScale:1,_lighting:"pbr",pickable:r}))}}const Y4e=(t,e,n,r,i,o,l,f,s,p,v,x)=>{const[S,M]=E.useState(0),P=E.useRef(0),R=it=>{P.current=it,M(S+1)},D=E.useRef(0),B=it=>{D.current=it,M(S+1)},O=E.useRef(0),k=E.useRef(0),$=E.useRef(1),H=it=>{$.current=it,M(S+1)},U=E.useRef(!1),X=it=>{it&&(k.current=performance.now()),U.current=it,M(S+1)},J=E.useRef(!0),K=E.useRef(!0),Q=E.useRef(!1),ce=E.useRef(!1),ge=E.useRef(!0),ae=E.useRef(!1),ve=E.useRef([]),Fe=E.useRef([]),Ae=E.useRef(),pe=it=>{Ae.current=it},fe=E.useRef(),xe=E.useRef(),Re=E.useRef(),ke=E.useRef(),ze=E.useRef(!1),Xe=1e3/x,Ne=E.useRef(0),[Qe,pt]=E.useState([]);E.useEffect(()=>{ze.current||(ze.current=!0,Ne.current=performance.now(),ot())},[]),E.useEffect(()=>{X(!1),R(0),B(0),O.current=0,(async()=>{t!==void 0&&(R(t.start),B(t.start+t.steps),O.current=t.start,fe.current=new Kke(i,l),xe.current=new Qke(r,o),Re.current=new H4e(n),ke.current=new q4e(e,p,v),await Promise.all([fe.current.init(),xe.current.init(),Re.current.init(),ke.current.init()]),pt([]),await Ke(t.start))})()},[t]),E.useEffect(()=>{fe.current&&fe.current.updateGeoJson(l)},[l]),E.useEffect(()=>{xe.current&&xe.current.updateGeoJson(o)},[o]),E.useEffect(()=>{ve.current=f},[f]),E.useEffect(()=>{Fe.current=s},[s]);const Ke=async it=>{const Bt=performance.now();if(it!==void 0)k.current=Bt,O.current=it;else{const zt=(Bt-k.current)*$.current/1e3;k.current=Bt,O.current=O.current+zt}O.current<P.current&&(O.current=P.current),O.current>D.current&&(O.current=D.current);let jt=[];J.current&&(jt.push(xe.current),jt.push(Re.current),jt.push(ke.current)),K.current&&jt.push(fe.current),jt=jt.filter(zt=>zt!==void 0);const cn=ge.current?O.current:Math.floor(O.current),rn=(await Promise.all(jt.map(zt=>zt.play(cn,ge.current,ae.current,Ae.current)))).flat();Q.current&&rn.push(new mv({id:"aoi",data:ve.current,stroked:!0,filled:!0,extruded:!1,lineWidthScale:1,lineWidthMinPixels:1,getLineColor:[230,199,168,128],getFillColor:[230,199,168,64],pickable:ae.current})),ce.current&&rn.push(new mv({id:"more-lane",data:Fe.current,stroked:!0,filled:!0,extruded:!1,lineWidthScale:1,lineWidthMinPixels:1,getLineColor:zt=>zt.properties.type===1?[0,153,204,64]:[0,153,255,32],pickable:ae.current})),pt(rn),O.current>=D.current&&X(!1)},ot=async()=>{const it=performance.now(),Bt=it-Ne.current;Bt>Xe&&(Ne.current=it-Bt%Xe,U.current&&await Ke()),requestAnimationFrame(()=>ot())},St=async it=>{J.current=it,M(S+1),await Ke(O.current)},st=async it=>{K.current=it,M(S+1),await Ke(O.current)},rt=async it=>{Q.current=it,M(S+1),await Ke(O.current)},lt=async it=>{ce.current=it,M(S+1),await Ke(O.current)},Rt=async it=>{ge.current=it,M(S+1),await Ke(O.current)},bt=async it=>{ae.current=it,M(S+1),await Ke(O.current)},wt=async it=>{k.current=performance.now(),O.current=it,await Ke(it)};return{layers:Qe,playing:U.current,setPlaying:X,startT:P.current,setStartT:R,endT:D.current,setEndT:B,speed:$,setSpeed:H,t:O.current,setT:wt,setBound:pe,openMicroLayer:J.current,setOpenMicroLayer:St,openMacroLayer:K.current,setOpenMacroLayer:st,openAoiLayer:Q.current,setOpenAoiLayer:rt,openAllLaneLayer:ce.current,setOpenAllLaneLayer:lt,interpolation:ge.current,setInterpolation:Rt,pickable:ae.current,setPickable:bt}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var xJ;function On(){return xJ.apply(null,arguments)}function Z4e(t){xJ=t}function xc(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function cp(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function vi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function eF(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(vi(t,e))return!1;return!0}function ua(t){return t===void 0}function dd(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function dx(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function wJ(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function wf(t,e){for(var n in e)vi(e,n)&&(t[n]=e[n]);return vi(e,"toString")&&(t.toString=e.toString),vi(e,"valueOf")&&(t.valueOf=e.valueOf),t}function fu(t,e,n,r){return HJ(t,e,n,r,!0).utc()}function K4e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ir(t){return t._pf==null&&(t._pf=K4e()),t._pf}var bB;Array.prototype.some?bB=Array.prototype.some:bB=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function tF(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=Ir(t),n=bB.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function WT(t){var e=fu(NaN);return t!=null?wf(Ir(e),t):Ir(e).userInvalidated=!0,e}var E8=On.momentProperties=[],fR=!1;function nF(t,e){var n,r,i,o=E8.length;if(ua(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),ua(e._i)||(t._i=e._i),ua(e._f)||(t._f=e._f),ua(e._l)||(t._l=e._l),ua(e._strict)||(t._strict=e._strict),ua(e._tzm)||(t._tzm=e._tzm),ua(e._isUTC)||(t._isUTC=e._isUTC),ua(e._offset)||(t._offset=e._offset),ua(e._pf)||(t._pf=Ir(e)),ua(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)r=E8[n],i=e[r],ua(i)||(t[r]=i);return t}function fx(t){nF(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),fR===!1&&(fR=!0,On.updateOffset(this),fR=!1)}function wc(t){return t instanceof fx||t!=null&&t._isAMomentObject!=null}function SJ(t){On.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Pl(t,e){var n=!0;return wf(function(){if(On.deprecationHandler!=null&&On.deprecationHandler(null,t),n){var r=[],i,o,l,f=arguments.length;for(o=0;o<f;o++){if(i="",typeof arguments[o]=="object"){i+=`
[`+o+"] ";for(l in arguments[0])vi(arguments[0],l)&&(i+=l+": "+arguments[0][l]+", ");i=i.slice(0,-2)}else i=arguments[o];r.push(i)}SJ(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var C8={};function EJ(t,e){On.deprecationHandler!=null&&On.deprecationHandler(t,e),C8[t]||(SJ(e),C8[t]=!0)}On.suppressDeprecationWarnings=!1;On.deprecationHandler=null;function hu(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function J4e(t){var e,n;for(n in t)vi(t,n)&&(e=t[n],hu(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function xB(t,e){var n=wf({},t),r;for(r in e)vi(e,r)&&(cp(t[r])&&cp(e[r])?(n[r]={},wf(n[r],t[r]),wf(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)vi(t,r)&&!vi(e,r)&&cp(t[r])&&(n[r]=wf({},n[r]));return n}function rF(t){t!=null&&this.set(t)}var wB;Object.keys?wB=Object.keys:wB=function(t){var e,n=[];for(e in t)vi(t,e)&&n.push(e);return n};var Q4e={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function e2e(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return hu(r)?r.call(e,n):r}function uu(t,e,n){var r=""+Math.abs(t),i=e-r.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var iF=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Kw=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hR={},Vg={};function sr(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(Vg[t]=i),e&&(Vg[e[0]]=function(){return uu(i.apply(this,arguments),e[1],e[2])}),n&&(Vg[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function t2e(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function n2e(t){var e=t.match(iF),n,r;for(n=0,r=e.length;n<r;n++)Vg[e[n]]?e[n]=Vg[e[n]]:e[n]=t2e(e[n]);return function(i){var o="",l;for(l=0;l<r;l++)o+=hu(e[l])?e[l].call(i,t):e[l];return o}}function YS(t,e){return t.isValid()?(e=CJ(e,t.localeData()),hR[e]=hR[e]||n2e(e),hR[e](t)):t.localeData().invalidDate()}function CJ(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(Kw.lastIndex=0;n>=0&&Kw.test(t);)t=t.replace(Kw,r),Kw.lastIndex=0,n-=1;return t}var r2e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function i2e(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(iF).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var o2e="Invalid date";function s2e(){return this._invalidDate}var a2e="%d",l2e=/\d{1,2}/;function c2e(t){return this._ordinal.replace("%d",t)}var u2e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d2e(t,e,n,r){var i=this._relativeTime[n];return hu(i)?i(t,e,n,r):i.replace(/%d/i,t)}function f2e(t,e){var n=this._relativeTime[t>0?"future":"past"];return hu(n)?n(e):n.replace(/%s/i,e)}var T8={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Il(t){return typeof t=="string"?T8[t]||T8[t.toLowerCase()]:void 0}function oF(t){var e={},n,r;for(r in t)vi(t,r)&&(n=Il(r),n&&(e[n]=t[r]));return e}var h2e={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function p2e(t){var e=[],n;for(n in t)vi(t,n)&&e.push({unit:n,priority:h2e[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}var TJ=/\d/,Qa=/\d\d/,AJ=/\d{3}/,sF=/\d{4}/,XT=/[+-]?\d{6}/,so=/\d\d?/,MJ=/\d\d\d\d?/,PJ=/\d\d\d\d\d\d?/,qT=/\d{1,3}/,aF=/\d{1,4}/,YT=/[+-]?\d{1,6}/,Fv=/\d+/,ZT=/[+-]?\d+/,m2e=/Z|[+-]\d\d:?\d\d/gi,KT=/Z|[+-]\d\d(?::?\d\d)?/gi,g2e=/[+-]?\d+(\.\d{1,3})?/,hx=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,zv=/^[1-9]\d?/,lF=/^([1-9]\d|\d)/,yC;yC={};function $n(t,e,n){yC[t]=hu(e)?e:function(r,i){return r&&n?n:e}}function v2e(t,e){return vi(yC,t)?yC[t](e._strict,e._locale):new RegExp(y2e(t))}function y2e(t){return Ku(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,o){return n||r||i||o}))}function Ku(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _l(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Jr(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=_l(e)),n}var SB={};function ji(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),dd(e)&&(r=function(o,l){l[e]=Jr(o)}),i=t.length,n=0;n<i;n++)SB[t[n]]=r}function px(t,e){ji(t,function(n,r,i,o){i._w=i._w||{},e(n,i._w,i,o)})}function _2e(t,e,n){e!=null&&vi(SB,t)&&SB[t](e,n._a,n,t)}function JT(t){return t%4===0&&t%100!==0||t%400===0}var ks=0,Wu=1,Jc=2,Ko=3,dc=4,Xu=5,tp=6,b2e=7,x2e=8;sr("Y",0,0,function(){var t=this.year();return t<=9999?uu(t,4):"+"+t});sr(0,["YY",2],0,function(){return this.year()%100});sr(0,["YYYY",4],0,"year");sr(0,["YYYYY",5],0,"year");sr(0,["YYYYYY",6,!0],0,"year");$n("Y",ZT);$n("YY",so,Qa);$n("YYYY",aF,sF);$n("YYYYY",YT,XT);$n("YYYYYY",YT,XT);ji(["YYYYY","YYYYYY"],ks);ji("YYYY",function(t,e){e[ks]=t.length===2?On.parseTwoDigitYear(t):Jr(t)});ji("YY",function(t,e){e[ks]=On.parseTwoDigitYear(t)});ji("Y",function(t,e){e[ks]=parseInt(t,10)});function A_(t){return JT(t)?366:365}On.parseTwoDigitYear=function(t){return Jr(t)+(Jr(t)>68?1900:2e3)};var IJ=Nv("FullYear",!0);function w2e(){return JT(this.year())}function Nv(t,e){return function(n){return n!=null?(RJ(this,t,n),On.updateOffset(this,e),this):Mb(this,t)}}function Mb(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function RJ(t,e,n){var r,i,o,l,f;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,l=t.month(),f=t.date(),f=f===29&&l===1&&!JT(o)?28:f,i?r.setUTCFullYear(o,l,f):r.setFullYear(o,l,f)}}function S2e(t){return t=Il(t),hu(this[t])?this[t]():this}function E2e(t,e){if(typeof t=="object"){t=oF(t);var n=p2e(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=Il(t),hu(this[t]))return this[t](e);return this}function C2e(t,e){return(t%e+e)%e}var ko;Array.prototype.indexOf?ko=Array.prototype.indexOf:ko=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function cF(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=C2e(e,12);return t+=(e-n)/12,n===1?JT(t)?29:28:31-n%7%2}sr("M",["MM",2],"Mo",function(){return this.month()+1});sr("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});sr("MMMM",0,0,function(t){return this.localeData().months(this,t)});$n("M",so,zv);$n("MM",so,Qa);$n("MMM",function(t,e){return e.monthsShortRegex(t)});$n("MMMM",function(t,e){return e.monthsRegex(t)});ji(["M","MM"],function(t,e){e[Wu]=Jr(t)-1});ji(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[Wu]=i:Ir(n).invalidMonth=t});var T2e="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),OJ="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),LJ=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,A2e=hx,M2e=hx;function P2e(t,e){return t?xc(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||LJ).test(e)?"format":"standalone"][t.month()]:xc(this._months)?this._months:this._months.standalone}function I2e(t,e){return t?xc(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[LJ.test(e)?"format":"standalone"][t.month()]:xc(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function R2e(t,e,n){var r,i,o,l=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=fu([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(i=ko.call(this._shortMonthsParse,l),i!==-1?i:null):(i=ko.call(this._longMonthsParse,l),i!==-1?i:null):e==="MMM"?(i=ko.call(this._shortMonthsParse,l),i!==-1?i:(i=ko.call(this._longMonthsParse,l),i!==-1?i:null)):(i=ko.call(this._longMonthsParse,l),i!==-1?i:(i=ko.call(this._shortMonthsParse,l),i!==-1?i:null))}function O2e(t,e,n){var r,i,o;if(this._monthsParseExact)return R2e.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=fu([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function BJ(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Jr(e);else if(e=t.localeData().monthsParse(e),!dd(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,cF(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function DJ(t){return t!=null?(BJ(this,t),On.updateOffset(this,!0),this):Mb(this,"Month")}function L2e(){return cF(this.year(),this.month())}function B2e(t){return this._monthsParseExact?(vi(this,"_monthsRegex")||kJ.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(vi(this,"_monthsShortRegex")||(this._monthsShortRegex=A2e),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function D2e(t){return this._monthsParseExact?(vi(this,"_monthsRegex")||kJ.call(this),t?this._monthsStrictRegex:this._monthsRegex):(vi(this,"_monthsRegex")||(this._monthsRegex=M2e),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function kJ(){function t(s,p){return p.length-s.length}var e=[],n=[],r=[],i,o,l,f;for(i=0;i<12;i++)o=fu([2e3,i]),l=Ku(this.monthsShort(o,"")),f=Ku(this.months(o,"")),e.push(l),n.push(f),r.push(f),r.push(l);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function k2e(t,e,n,r,i,o,l){var f;return t<100&&t>=0?(f=new Date(t+400,e,n,r,i,o,l),isFinite(f.getFullYear())&&f.setFullYear(t)):f=new Date(t,e,n,r,i,o,l),f}function Pb(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function _C(t,e,n){var r=7+e-n,i=(7+Pb(t,0,r).getUTCDay()-e)%7;return-i+r-1}function FJ(t,e,n,r,i){var o=(7+n-r)%7,l=_C(t,r,i),f=1+7*(e-1)+o+l,s,p;return f<=0?(s=t-1,p=A_(s)+f):f>A_(t)?(s=t+1,p=f-A_(t)):(s=t,p=f),{year:s,dayOfYear:p}}function Ib(t,e,n){var r=_C(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,o,l;return i<1?(l=t.year()-1,o=i+Ju(l,e,n)):i>Ju(t.year(),e,n)?(o=i-Ju(t.year(),e,n),l=t.year()+1):(l=t.year(),o=i),{week:o,year:l}}function Ju(t,e,n){var r=_C(t,e,n),i=_C(t+1,e,n);return(A_(t)-r+i)/7}sr("w",["ww",2],"wo","week");sr("W",["WW",2],"Wo","isoWeek");$n("w",so,zv);$n("ww",so,Qa);$n("W",so,zv);$n("WW",so,Qa);px(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=Jr(t)});function F2e(t){return Ib(t,this._week.dow,this._week.doy).week}var z2e={dow:0,doy:6};function N2e(){return this._week.dow}function $2e(){return this._week.doy}function j2e(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function U2e(t){var e=Ib(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}sr("d",0,"do","day");sr("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});sr("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});sr("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});sr("e",0,0,"weekday");sr("E",0,0,"isoWeekday");$n("d",so);$n("e",so);$n("E",so);$n("dd",function(t,e){return e.weekdaysMinRegex(t)});$n("ddd",function(t,e){return e.weekdaysShortRegex(t)});$n("dddd",function(t,e){return e.weekdaysRegex(t)});px(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:Ir(n).invalidWeekday=t});px(["d","e","E"],function(t,e,n,r){e[r]=Jr(t)});function V2e(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function G2e(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function uF(t,e){return t.slice(e,7).concat(t.slice(0,e))}var H2e="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zJ="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),W2e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),X2e=hx,q2e=hx,Y2e=hx;function Z2e(t,e){var n=xc(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?uF(n,this._week.dow):t?n[t.day()]:n}function K2e(t){return t===!0?uF(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function J2e(t){return t===!0?uF(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Q2e(t,e,n){var r,i,o,l=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=fu([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(i=ko.call(this._weekdaysParse,l),i!==-1?i:null):e==="ddd"?(i=ko.call(this._shortWeekdaysParse,l),i!==-1?i:null):(i=ko.call(this._minWeekdaysParse,l),i!==-1?i:null):e==="dddd"?(i=ko.call(this._weekdaysParse,l),i!==-1||(i=ko.call(this._shortWeekdaysParse,l),i!==-1)?i:(i=ko.call(this._minWeekdaysParse,l),i!==-1?i:null)):e==="ddd"?(i=ko.call(this._shortWeekdaysParse,l),i!==-1||(i=ko.call(this._weekdaysParse,l),i!==-1)?i:(i=ko.call(this._minWeekdaysParse,l),i!==-1?i:null)):(i=ko.call(this._minWeekdaysParse,l),i!==-1||(i=ko.call(this._weekdaysParse,l),i!==-1)?i:(i=ko.call(this._shortWeekdaysParse,l),i!==-1?i:null))}function e$e(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Q2e.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=fu([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function t$e(t){if(!this.isValid())return t!=null?this:NaN;var e=Mb(this,"Day");return t!=null?(t=V2e(t,this.localeData()),this.add(t-e,"d")):e}function n$e(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function r$e(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=G2e(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function i$e(t){return this._weekdaysParseExact?(vi(this,"_weekdaysRegex")||dF.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(vi(this,"_weekdaysRegex")||(this._weekdaysRegex=X2e),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function o$e(t){return this._weekdaysParseExact?(vi(this,"_weekdaysRegex")||dF.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(vi(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=q2e),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function s$e(t){return this._weekdaysParseExact?(vi(this,"_weekdaysRegex")||dF.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(vi(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Y2e),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function dF(){function t(v,x){return x.length-v.length}var e=[],n=[],r=[],i=[],o,l,f,s,p;for(o=0;o<7;o++)l=fu([2e3,1]).day(o),f=Ku(this.weekdaysMin(l,"")),s=Ku(this.weekdaysShort(l,"")),p=Ku(this.weekdays(l,"")),e.push(f),n.push(s),r.push(p),i.push(f),i.push(s),i.push(p);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function fF(){return this.hours()%12||12}function a$e(){return this.hours()||24}sr("H",["HH",2],0,"hour");sr("h",["hh",2],0,fF);sr("k",["kk",2],0,a$e);sr("hmm",0,0,function(){return""+fF.apply(this)+uu(this.minutes(),2)});sr("hmmss",0,0,function(){return""+fF.apply(this)+uu(this.minutes(),2)+uu(this.seconds(),2)});sr("Hmm",0,0,function(){return""+this.hours()+uu(this.minutes(),2)});sr("Hmmss",0,0,function(){return""+this.hours()+uu(this.minutes(),2)+uu(this.seconds(),2)});function NJ(t,e){sr(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}NJ("a",!0);NJ("A",!1);function $J(t,e){return e._meridiemParse}$n("a",$J);$n("A",$J);$n("H",so,lF);$n("h",so,zv);$n("k",so,zv);$n("HH",so,Qa);$n("hh",so,Qa);$n("kk",so,Qa);$n("hmm",MJ);$n("hmmss",PJ);$n("Hmm",MJ);$n("Hmmss",PJ);ji(["H","HH"],Ko);ji(["k","kk"],function(t,e,n){var r=Jr(t);e[Ko]=r===24?0:r});ji(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});ji(["h","hh"],function(t,e,n){e[Ko]=Jr(t),Ir(n).bigHour=!0});ji("hmm",function(t,e,n){var r=t.length-2;e[Ko]=Jr(t.substr(0,r)),e[dc]=Jr(t.substr(r)),Ir(n).bigHour=!0});ji("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Ko]=Jr(t.substr(0,r)),e[dc]=Jr(t.substr(r,2)),e[Xu]=Jr(t.substr(i)),Ir(n).bigHour=!0});ji("Hmm",function(t,e,n){var r=t.length-2;e[Ko]=Jr(t.substr(0,r)),e[dc]=Jr(t.substr(r))});ji("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Ko]=Jr(t.substr(0,r)),e[dc]=Jr(t.substr(r,2)),e[Xu]=Jr(t.substr(i))});function l$e(t){return(t+"").toLowerCase().charAt(0)==="p"}var c$e=/[ap]\.?m?\.?/i,u$e=Nv("Hours",!0);function d$e(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var jJ={calendar:Q4e,longDateFormat:r2e,invalidDate:o2e,ordinal:a2e,dayOfMonthOrdinalParse:l2e,relativeTime:u2e,months:T2e,monthsShort:OJ,week:z2e,weekdays:H2e,weekdaysMin:W2e,weekdaysShort:zJ,meridiemParse:c$e},co={},O0={},Rb;function f$e(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function A8(t){return t&&t.toLowerCase().replace("_","-")}function h$e(t){for(var e=0,n,r,i,o;e<t.length;){for(o=A8(t[e]).split("-"),n=o.length,r=A8(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=QT(o.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&f$e(o,r)>=n-1)break;n--}e++}return Rb}function p$e(t){return!!(t&&t.match("^[^/\\\\]*$"))}function QT(t){var e=null,n;if(co[t]===void 0&&typeof JS<"u"&&JS&&JS.exports&&p$e(t))try{e=Rb._abbr,n=require,n("./locale/"+t),Bf(e)}catch{co[t]=null}return co[t]}function Bf(t,e){var n;return t&&(ua(e)?n=vd(t):n=hF(t,e),n?Rb=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Rb._abbr}function hF(t,e){if(e!==null){var n,r=jJ;if(e.abbr=t,co[t]!=null)EJ("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=co[t]._config;else if(e.parentLocale!=null)if(co[e.parentLocale]!=null)r=co[e.parentLocale]._config;else if(n=QT(e.parentLocale),n!=null)r=n._config;else return O0[e.parentLocale]||(O0[e.parentLocale]=[]),O0[e.parentLocale].push({name:t,config:e}),null;return co[t]=new rF(xB(r,e)),O0[t]&&O0[t].forEach(function(i){hF(i.name,i.config)}),Bf(t),co[t]}else return delete co[t],null}function m$e(t,e){if(e!=null){var n,r,i=jJ;co[t]!=null&&co[t].parentLocale!=null?co[t].set(xB(co[t]._config,e)):(r=QT(t),r!=null&&(i=r._config),e=xB(i,e),r==null&&(e.abbr=t),n=new rF(e),n.parentLocale=co[t],co[t]=n),Bf(t)}else co[t]!=null&&(co[t].parentLocale!=null?(co[t]=co[t].parentLocale,t===Bf()&&Bf(t)):co[t]!=null&&delete co[t]);return co[t]}function vd(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Rb;if(!xc(t)){if(e=QT(t),e)return e;t=[t]}return h$e(t)}function g$e(){return wB(co)}function pF(t){var e,n=t._a;return n&&Ir(t).overflow===-2&&(e=n[Wu]<0||n[Wu]>11?Wu:n[Jc]<1||n[Jc]>cF(n[ks],n[Wu])?Jc:n[Ko]<0||n[Ko]>24||n[Ko]===24&&(n[dc]!==0||n[Xu]!==0||n[tp]!==0)?Ko:n[dc]<0||n[dc]>59?dc:n[Xu]<0||n[Xu]>59?Xu:n[tp]<0||n[tp]>999?tp:-1,Ir(t)._overflowDayOfYear&&(e<ks||e>Jc)&&(e=Jc),Ir(t)._overflowWeeks&&e===-1&&(e=b2e),Ir(t)._overflowWeekday&&e===-1&&(e=x2e),Ir(t).overflow=e),t}var v$e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,y$e=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_$e=/Z|[+-]\d\d(?::?\d\d)?/,Jw=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pR=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],b$e=/^\/?Date\((-?\d+)/i,x$e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,w$e={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function UJ(t){var e,n,r=t._i,i=v$e.exec(r)||y$e.exec(r),o,l,f,s,p=Jw.length,v=pR.length;if(i){for(Ir(t).iso=!0,e=0,n=p;e<n;e++)if(Jw[e][1].exec(i[1])){l=Jw[e][0],o=Jw[e][2]!==!1;break}if(l==null){t._isValid=!1;return}if(i[3]){for(e=0,n=v;e<n;e++)if(pR[e][1].exec(i[3])){f=(i[2]||" ")+pR[e][0];break}if(f==null){t._isValid=!1;return}}if(!o&&f!=null){t._isValid=!1;return}if(i[4])if(_$e.exec(i[4]))s="Z";else{t._isValid=!1;return}t._f=l+(f||"")+(s||""),gF(t)}else t._isValid=!1}function S$e(t,e,n,r,i,o){var l=[E$e(t),OJ.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&l.push(parseInt(o,10)),l}function E$e(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function C$e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function T$e(t,e,n){if(t){var r=zJ.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return Ir(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function A$e(t,e,n){if(t)return w$e[t];if(e)return 0;var r=parseInt(n,10),i=r%100,o=(r-i)/100;return o*60+i}function VJ(t){var e=x$e.exec(C$e(t._i)),n;if(e){if(n=S$e(e[4],e[3],e[2],e[5],e[6],e[7]),!T$e(e[1],n,t))return;t._a=n,t._tzm=A$e(e[8],e[9],e[10]),t._d=Pb.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Ir(t).rfc2822=!0}else t._isValid=!1}function M$e(t){var e=b$e.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(UJ(t),t._isValid===!1)delete t._isValid;else return;if(VJ(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:On.createFromInputFallback(t)}On.createFromInputFallback=Pl("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function sg(t,e,n){return t??e??n}function P$e(t){var e=new Date(On.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function mF(t){var e,n,r=[],i,o,l;if(!t._d){for(i=P$e(t),t._w&&t._a[Jc]==null&&t._a[Wu]==null&&I$e(t),t._dayOfYear!=null&&(l=sg(t._a[ks],i[ks]),(t._dayOfYear>A_(l)||t._dayOfYear===0)&&(Ir(t)._overflowDayOfYear=!0),n=Pb(l,0,t._dayOfYear),t._a[Wu]=n.getUTCMonth(),t._a[Jc]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ko]===24&&t._a[dc]===0&&t._a[Xu]===0&&t._a[tp]===0&&(t._nextDay=!0,t._a[Ko]=0),t._d=(t._useUTC?Pb:k2e).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ko]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(Ir(t).weekdayMismatch=!0)}}function I$e(t){var e,n,r,i,o,l,f,s,p;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,l=4,n=sg(e.GG,t._a[ks],Ib(oo(),1,4).year),r=sg(e.W,1),i=sg(e.E,1),(i<1||i>7)&&(s=!0)):(o=t._locale._week.dow,l=t._locale._week.doy,p=Ib(oo(),o,l),n=sg(e.gg,t._a[ks],p.year),r=sg(e.w,p.week),e.d!=null?(i=e.d,(i<0||i>6)&&(s=!0)):e.e!=null?(i=e.e+o,(e.e<0||e.e>6)&&(s=!0)):i=o),r<1||r>Ju(n,o,l)?Ir(t)._overflowWeeks=!0:s!=null?Ir(t)._overflowWeekday=!0:(f=FJ(n,r,i,o,l),t._a[ks]=f.year,t._dayOfYear=f.dayOfYear)}On.ISO_8601=function(){};On.RFC_2822=function(){};function gF(t){if(t._f===On.ISO_8601){UJ(t);return}if(t._f===On.RFC_2822){VJ(t);return}t._a=[],Ir(t).empty=!0;var e=""+t._i,n,r,i,o,l,f=e.length,s=0,p,v;for(i=CJ(t._f,t._locale).match(iF)||[],v=i.length,n=0;n<v;n++)o=i[n],r=(e.match(v2e(o,t))||[])[0],r&&(l=e.substr(0,e.indexOf(r)),l.length>0&&Ir(t).unusedInput.push(l),e=e.slice(e.indexOf(r)+r.length),s+=r.length),Vg[o]?(r?Ir(t).empty=!1:Ir(t).unusedTokens.push(o),_2e(o,r,t)):t._strict&&!r&&Ir(t).unusedTokens.push(o);Ir(t).charsLeftOver=f-s,e.length>0&&Ir(t).unusedInput.push(e),t._a[Ko]<=12&&Ir(t).bigHour===!0&&t._a[Ko]>0&&(Ir(t).bigHour=void 0),Ir(t).parsedDateParts=t._a.slice(0),Ir(t).meridiem=t._meridiem,t._a[Ko]=R$e(t._locale,t._a[Ko],t._meridiem),p=Ir(t).era,p!==null&&(t._a[ks]=t._locale.erasConvertYear(p,t._a[ks])),mF(t),pF(t)}function R$e(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function O$e(t){var e,n,r,i,o,l,f=!1,s=t._f.length;if(s===0){Ir(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<s;i++)o=0,l=!1,e=nF({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],gF(e),tF(e)&&(l=!0),o+=Ir(e).charsLeftOver,o+=Ir(e).unusedTokens.length*10,Ir(e).score=o,f?o<r&&(r=o,n=e):(r==null||o<r||l)&&(r=o,n=e,l&&(f=!0));wf(t,n||e)}function L$e(t){if(!t._d){var e=oF(t._i),n=e.day===void 0?e.date:e.day;t._a=wJ([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),mF(t)}}function B$e(t){var e=new fx(pF(GJ(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function GJ(t){var e=t._i,n=t._f;return t._locale=t._locale||vd(t._l),e===null||n===void 0&&e===""?WT({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),wc(e)?new fx(pF(e)):(dx(e)?t._d=e:xc(n)?O$e(t):n?gF(t):D$e(t),tF(t)||(t._d=null),t))}function D$e(t){var e=t._i;ua(e)?t._d=new Date(On.now()):dx(e)?t._d=new Date(e.valueOf()):typeof e=="string"?M$e(t):xc(e)?(t._a=wJ(e.slice(0),function(n){return parseInt(n,10)}),mF(t)):cp(e)?L$e(t):dd(e)?t._d=new Date(e):On.createFromInputFallback(t)}function HJ(t,e,n,r,i){var o={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(cp(t)&&eF(t)||xc(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,B$e(o)}function oo(t,e,n,r){return HJ(t,e,n,r,!1)}var k$e=Pl("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oo.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:WT()}),F$e=Pl("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oo.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:WT()});function WJ(t,e){var n,r;if(e.length===1&&xc(e[0])&&(e=e[0]),!e.length)return oo();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function z$e(){var t=[].slice.call(arguments,0);return WJ("isBefore",t)}function N$e(){var t=[].slice.call(arguments,0);return WJ("isAfter",t)}var $$e=function(){return Date.now?Date.now():+new Date},L0=["year","quarter","month","week","day","hour","minute","second","millisecond"];function j$e(t){var e,n=!1,r,i=L0.length;for(e in t)if(vi(t,e)&&!(ko.call(L0,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[L0[r]]){if(n)return!1;parseFloat(t[L0[r]])!==Jr(t[L0[r]])&&(n=!0)}return!0}function U$e(){return this._isValid}function V$e(){return Ac(NaN)}function eA(t){var e=oF(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,l=e.day||0,f=e.hour||0,s=e.minute||0,p=e.second||0,v=e.millisecond||0;this._isValid=j$e(e),this._milliseconds=+v+p*1e3+s*6e4+f*1e3*60*60,this._days=+l+o*7,this._months=+i+r*3+n*12,this._data={},this._locale=vd(),this._bubble()}function ZS(t){return t instanceof eA}function EB(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function G$e(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0,l;for(l=0;l<r;l++)(n&&t[l]!==e[l]||!n&&Jr(t[l])!==Jr(e[l]))&&o++;return o+i}function XJ(t,e){sr(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+uu(~~(n/60),2)+e+uu(~~n%60,2)})}XJ("Z",":");XJ("ZZ","");$n("Z",KT);$n("ZZ",KT);ji(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=vF(KT,t)});var H$e=/([\+\-]|\d\d)/gi;function vF(t,e){var n=(e||"").match(t),r,i,o;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(H$e)||["-",0,0],o=+(i[1]*60)+Jr(i[2]),o===0?0:i[0]==="+"?o:-o)}function yF(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(wc(t)||dx(t)?t.valueOf():oo(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),On.updateOffset(n,!1),n):oo(t).local()}function CB(t){return-Math.round(t._d.getTimezoneOffset())}On.updateOffset=function(){};function W$e(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=vF(KT,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=CB(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?ZJ(this,Ac(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,On.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:CB(this)}function X$e(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function q$e(t){return this.utcOffset(0,t)}function Y$e(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(CB(this),"m")),this}function Z$e(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=vF(m2e,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function K$e(t){return this.isValid()?(t=t?oo(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function J$e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Q$e(){if(!ua(this._isDSTShifted))return this._isDSTShifted;var t={},e;return nF(t,this),t=GJ(t),t._a?(e=t._isUTC?fu(t._a):oo(t._a),this._isDSTShifted=this.isValid()&&G$e(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function e5e(){return this.isValid()?!this._isUTC:!1}function t5e(){return this.isValid()?this._isUTC:!1}function qJ(){return this.isValid()?this._isUTC&&this._offset===0:!1}var n5e=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,r5e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ac(t,e){var n=t,r=null,i,o,l;return ZS(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:dd(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=n5e.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:Jr(r[Jc])*i,h:Jr(r[Ko])*i,m:Jr(r[dc])*i,s:Jr(r[Xu])*i,ms:Jr(EB(r[tp]*1e3))*i}):(r=r5e.exec(t))?(i=r[1]==="-"?-1:1,n={y:Oh(r[2],i),M:Oh(r[3],i),w:Oh(r[4],i),d:Oh(r[5],i),h:Oh(r[6],i),m:Oh(r[7],i),s:Oh(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(l=i5e(oo(n.from),oo(n.to)),n={},n.ms=l.milliseconds,n.M=l.months),o=new eA(n),ZS(t)&&vi(t,"_locale")&&(o._locale=t._locale),ZS(t)&&vi(t,"_isValid")&&(o._isValid=t._isValid),o}Ac.fn=eA.prototype;Ac.invalid=V$e;function Oh(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function M8(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function i5e(t,e){var n;return t.isValid()&&e.isValid()?(e=yF(e,t),t.isBefore(e)?n=M8(t,e):(n=M8(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function YJ(t,e){return function(n,r){var i,o;return r!==null&&!isNaN(+r)&&(EJ(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),i=Ac(n,r),ZJ(this,i,t),this}}function ZJ(t,e,n,r){var i=e._milliseconds,o=EB(e._days),l=EB(e._months);t.isValid()&&(r=r??!0,l&&BJ(t,Mb(t,"Month")+l*n),o&&RJ(t,"Date",Mb(t,"Date")+o*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&On.updateOffset(t,o||l))}var o5e=YJ(1,"add"),s5e=YJ(-1,"subtract");function KJ(t){return typeof t=="string"||t instanceof String}function a5e(t){return wc(t)||dx(t)||KJ(t)||dd(t)||c5e(t)||l5e(t)||t===null||t===void 0}function l5e(t){var e=cp(t)&&!eF(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,o,l=r.length;for(i=0;i<l;i+=1)o=r[i],n=n||vi(t,o);return e&&n}function c5e(t){var e=xc(t),n=!1;return e&&(n=t.filter(function(r){return!dd(r)&&KJ(t)}).length===0),e&&n}function u5e(t){var e=cp(t)&&!eF(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,o;for(i=0;i<r.length;i+=1)o=r[i],n=n||vi(t,o);return e&&n}function d5e(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function f5e(t,e){arguments.length===1&&(arguments[0]?a5e(arguments[0])?(t=arguments[0],e=void 0):u5e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||oo(),r=yF(n,this).startOf("day"),i=On.calendarFormat(this,r)||"sameElse",o=e&&(hu(e[i])?e[i].call(this,n):e[i]);return this.format(o||this.localeData().calendar(i,this,oo(n)))}function h5e(){return new fx(this)}function p5e(t,e){var n=wc(t)?t:oo(t);return this.isValid()&&n.isValid()?(e=Il(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function m5e(t,e){var n=wc(t)?t:oo(t);return this.isValid()&&n.isValid()?(e=Il(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function g5e(t,e,n,r){var i=wc(t)?t:oo(t),o=wc(e)?e:oo(e);return this.isValid()&&i.isValid()&&o.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function v5e(t,e){var n=wc(t)?t:oo(t),r;return this.isValid()&&n.isValid()?(e=Il(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function y5e(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function _5e(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function b5e(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(r=yF(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=Il(e),e){case"year":o=KS(this,r)/12;break;case"month":o=KS(this,r);break;case"quarter":o=KS(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:_l(o)}function KS(t,e){if(t.date()<e.date())return-KS(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,o;return e-r<0?(i=t.clone().add(n-1,"months"),o=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),o=(e-r)/(i-r)),-(n+o)||0}On.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";On.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function x5e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function w5e(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?YS(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):hu(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",YS(n,"Z")):YS(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function S5e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+r+i+o)}function E5e(t){t||(t=this.isUtc()?On.defaultFormatUtc:On.defaultFormat);var e=YS(this,t);return this.localeData().postformat(e)}function C5e(t,e){return this.isValid()&&(wc(t)&&t.isValid()||oo(t).isValid())?Ac({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function T5e(t){return this.from(oo(),t)}function A5e(t,e){return this.isValid()&&(wc(t)&&t.isValid()||oo(t).isValid())?Ac({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function M5e(t){return this.to(oo(),t)}function JJ(t){var e;return t===void 0?this._locale._abbr:(e=vd(t),e!=null&&(this._locale=e),this)}var QJ=Pl("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function eQ(){return this._locale}var bC=1e3,Gg=60*bC,xC=60*Gg,tQ=(365*400+97)*24*xC;function Hg(t,e){return(t%e+e)%e}function nQ(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-tQ:new Date(t,e,n).valueOf()}function rQ(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-tQ:Date.UTC(t,e,n)}function P5e(t){var e,n;if(t=Il(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?rQ:nQ,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Hg(e+(this._isUTC?0:this.utcOffset()*Gg),xC);break;case"minute":e=this._d.valueOf(),e-=Hg(e,Gg);break;case"second":e=this._d.valueOf(),e-=Hg(e,bC);break}return this._d.setTime(e),On.updateOffset(this,!0),this}function I5e(t){var e,n;if(t=Il(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?rQ:nQ,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=xC-Hg(e+(this._isUTC?0:this.utcOffset()*Gg),xC)-1;break;case"minute":e=this._d.valueOf(),e+=Gg-Hg(e,Gg)-1;break;case"second":e=this._d.valueOf(),e+=bC-Hg(e,bC)-1;break}return this._d.setTime(e),On.updateOffset(this,!0),this}function R5e(){return this._d.valueOf()-(this._offset||0)*6e4}function O5e(){return Math.floor(this.valueOf()/1e3)}function L5e(){return new Date(this.valueOf())}function B5e(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function D5e(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function k5e(){return this.isValid()?this.toISOString():null}function F5e(){return tF(this)}function z5e(){return wf({},Ir(this))}function N5e(){return Ir(this).overflow}function $5e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}sr("N",0,0,"eraAbbr");sr("NN",0,0,"eraAbbr");sr("NNN",0,0,"eraAbbr");sr("NNNN",0,0,"eraName");sr("NNNNN",0,0,"eraNarrow");sr("y",["y",1],"yo","eraYear");sr("y",["yy",2],0,"eraYear");sr("y",["yyy",3],0,"eraYear");sr("y",["yyyy",4],0,"eraYear");$n("N",_F);$n("NN",_F);$n("NNN",_F);$n("NNNN",K5e);$n("NNNNN",J5e);ji(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?Ir(n).era=i:Ir(n).invalidEra=t});$n("y",Fv);$n("yy",Fv);$n("yyy",Fv);$n("yyyy",Fv);$n("yo",Q5e);ji(["y","yy","yyy","yyyy"],ks);ji(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[ks]=n._locale.eraYearOrdinalParse(t,i):e[ks]=parseInt(t,10)});function j5e(t,e){var n,r,i,o=this._eras||vd("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":i=On(o[n].since).startOf("day"),o[n].since=i.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=On(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf();break}}return o}function U5e(t,e,n){var r,i,o=this.eras(),l,f,s;for(t=t.toUpperCase(),r=0,i=o.length;r<i;++r)if(l=o[r].name.toUpperCase(),f=o[r].abbr.toUpperCase(),s=o[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(f===t)return o[r];break;case"NNNN":if(l===t)return o[r];break;case"NNNNN":if(s===t)return o[r];break}else if([l,f,s].indexOf(t)>=0)return o[r]}function V5e(t,e){var n=t.since<=t.until?1:-1;return e===void 0?On(t.since).year():On(t.since).year()+(e-t.offset)*n}function G5e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function H5e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function W5e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function X5e(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-On(i[t].since).year())*n+i[t].offset;return this.year()}function q5e(t){return vi(this,"_erasNameRegex")||bF.call(this),t?this._erasNameRegex:this._erasRegex}function Y5e(t){return vi(this,"_erasAbbrRegex")||bF.call(this),t?this._erasAbbrRegex:this._erasRegex}function Z5e(t){return vi(this,"_erasNarrowRegex")||bF.call(this),t?this._erasNarrowRegex:this._erasRegex}function _F(t,e){return e.erasAbbrRegex(t)}function K5e(t,e){return e.erasNameRegex(t)}function J5e(t,e){return e.erasNarrowRegex(t)}function Q5e(t,e){return e._eraYearOrdinalRegex||Fv}function bF(){var t=[],e=[],n=[],r=[],i,o,l,f,s,p=this.eras();for(i=0,o=p.length;i<o;++i)l=Ku(p[i].name),f=Ku(p[i].abbr),s=Ku(p[i].narrow),e.push(l),t.push(f),n.push(s),r.push(l),r.push(f),r.push(s);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}sr(0,["gg",2],0,function(){return this.weekYear()%100});sr(0,["GG",2],0,function(){return this.isoWeekYear()%100});function tA(t,e){sr(0,[t,t.length],0,e)}tA("gggg","weekYear");tA("ggggg","weekYear");tA("GGGG","isoWeekYear");tA("GGGGG","isoWeekYear");$n("G",ZT);$n("g",ZT);$n("GG",so,Qa);$n("gg",so,Qa);$n("GGGG",aF,sF);$n("gggg",aF,sF);$n("GGGGG",YT,XT);$n("ggggg",YT,XT);px(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=Jr(t)});px(["gg","GG"],function(t,e,n,r){e[r]=On.parseTwoDigitYear(t)});function eje(t){return iQ.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function tje(t){return iQ.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function nje(){return Ju(this.year(),1,4)}function rje(){return Ju(this.isoWeekYear(),1,4)}function ije(){var t=this.localeData()._week;return Ju(this.year(),t.dow,t.doy)}function oje(){var t=this.localeData()._week;return Ju(this.weekYear(),t.dow,t.doy)}function iQ(t,e,n,r,i){var o;return t==null?Ib(this,r,i).year:(o=Ju(t,r,i),e>o&&(e=o),sje.call(this,t,e,n,r,i))}function sje(t,e,n,r,i){var o=FJ(t,e,n,r,i),l=Pb(o.year,0,o.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}sr("Q",0,"Qo","quarter");$n("Q",TJ);ji("Q",function(t,e){e[Wu]=(Jr(t)-1)*3});function aje(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}sr("D",["DD",2],"Do","date");$n("D",so,zv);$n("DD",so,Qa);$n("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ji(["D","DD"],Jc);ji("Do",function(t,e){e[Jc]=Jr(t.match(so)[0])});var oQ=Nv("Date",!0);sr("DDD",["DDDD",3],"DDDo","dayOfYear");$n("DDD",qT);$n("DDDD",AJ);ji(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Jr(t)});function lje(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}sr("m",["mm",2],0,"minute");$n("m",so,lF);$n("mm",so,Qa);ji(["m","mm"],dc);var cje=Nv("Minutes",!1);sr("s",["ss",2],0,"second");$n("s",so,lF);$n("ss",so,Qa);ji(["s","ss"],Xu);var uje=Nv("Seconds",!1);sr("S",0,0,function(){return~~(this.millisecond()/100)});sr(0,["SS",2],0,function(){return~~(this.millisecond()/10)});sr(0,["SSS",3],0,"millisecond");sr(0,["SSSS",4],0,function(){return this.millisecond()*10});sr(0,["SSSSS",5],0,function(){return this.millisecond()*100});sr(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});sr(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});sr(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});sr(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});$n("S",qT,TJ);$n("SS",qT,Qa);$n("SSS",qT,AJ);var Sf,sQ;for(Sf="SSSS";Sf.length<=9;Sf+="S")$n(Sf,Fv);function dje(t,e){e[tp]=Jr(("0."+t)*1e3)}for(Sf="S";Sf.length<=9;Sf+="S")ji(Sf,dje);sQ=Nv("Milliseconds",!1);sr("z",0,0,"zoneAbbr");sr("zz",0,0,"zoneName");function fje(){return this._isUTC?"UTC":""}function hje(){return this._isUTC?"Coordinated Universal Time":""}var fn=fx.prototype;fn.add=o5e;fn.calendar=f5e;fn.clone=h5e;fn.diff=b5e;fn.endOf=I5e;fn.format=E5e;fn.from=C5e;fn.fromNow=T5e;fn.to=A5e;fn.toNow=M5e;fn.get=S2e;fn.invalidAt=N5e;fn.isAfter=p5e;fn.isBefore=m5e;fn.isBetween=g5e;fn.isSame=v5e;fn.isSameOrAfter=y5e;fn.isSameOrBefore=_5e;fn.isValid=F5e;fn.lang=QJ;fn.locale=JJ;fn.localeData=eQ;fn.max=F$e;fn.min=k$e;fn.parsingFlags=z5e;fn.set=E2e;fn.startOf=P5e;fn.subtract=s5e;fn.toArray=B5e;fn.toObject=D5e;fn.toDate=L5e;fn.toISOString=w5e;fn.inspect=S5e;typeof Symbol<"u"&&Symbol.for!=null&&(fn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});fn.toJSON=k5e;fn.toString=x5e;fn.unix=O5e;fn.valueOf=R5e;fn.creationData=$5e;fn.eraName=G5e;fn.eraNarrow=H5e;fn.eraAbbr=W5e;fn.eraYear=X5e;fn.year=IJ;fn.isLeapYear=w2e;fn.weekYear=eje;fn.isoWeekYear=tje;fn.quarter=fn.quarters=aje;fn.month=DJ;fn.daysInMonth=L2e;fn.week=fn.weeks=j2e;fn.isoWeek=fn.isoWeeks=U2e;fn.weeksInYear=ije;fn.weeksInWeekYear=oje;fn.isoWeeksInYear=nje;fn.isoWeeksInISOWeekYear=rje;fn.date=oQ;fn.day=fn.days=t$e;fn.weekday=n$e;fn.isoWeekday=r$e;fn.dayOfYear=lje;fn.hour=fn.hours=u$e;fn.minute=fn.minutes=cje;fn.second=fn.seconds=uje;fn.millisecond=fn.milliseconds=sQ;fn.utcOffset=W$e;fn.utc=q$e;fn.local=Y$e;fn.parseZone=Z$e;fn.hasAlignedHourOffset=K$e;fn.isDST=J$e;fn.isLocal=e5e;fn.isUtcOffset=t5e;fn.isUtc=qJ;fn.isUTC=qJ;fn.zoneAbbr=fje;fn.zoneName=hje;fn.dates=Pl("dates accessor is deprecated. Use date instead.",oQ);fn.months=Pl("months accessor is deprecated. Use month instead",DJ);fn.years=Pl("years accessor is deprecated. Use year instead",IJ);fn.zone=Pl("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",X$e);fn.isDSTShifted=Pl("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Q$e);function pje(t){return oo(t*1e3)}function mje(){return oo.apply(null,arguments).parseZone()}function aQ(t){return t}var yi=rF.prototype;yi.calendar=e2e;yi.longDateFormat=i2e;yi.invalidDate=s2e;yi.ordinal=c2e;yi.preparse=aQ;yi.postformat=aQ;yi.relativeTime=d2e;yi.pastFuture=f2e;yi.set=J4e;yi.eras=j5e;yi.erasParse=U5e;yi.erasConvertYear=V5e;yi.erasAbbrRegex=Y5e;yi.erasNameRegex=q5e;yi.erasNarrowRegex=Z5e;yi.months=P2e;yi.monthsShort=I2e;yi.monthsParse=O2e;yi.monthsRegex=D2e;yi.monthsShortRegex=B2e;yi.week=F2e;yi.firstDayOfYear=$2e;yi.firstDayOfWeek=N2e;yi.weekdays=Z2e;yi.weekdaysMin=J2e;yi.weekdaysShort=K2e;yi.weekdaysParse=e$e;yi.weekdaysRegex=i$e;yi.weekdaysShortRegex=o$e;yi.weekdaysMinRegex=s$e;yi.isPM=l$e;yi.meridiem=d$e;function wC(t,e,n,r){var i=vd(),o=fu().set(r,e);return i[n](o,t)}function lQ(t,e,n){if(dd(t)&&(e=t,t=void 0),t=t||"",e!=null)return wC(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=wC(t,r,n,"month");return i}function xF(t,e,n,r){typeof t=="boolean"?(dd(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,dd(e)&&(n=e,e=void 0),e=e||"");var i=vd(),o=t?i._week.dow:0,l,f=[];if(n!=null)return wC(e,(n+o)%7,r,"day");for(l=0;l<7;l++)f[l]=wC(e,(l+o)%7,r,"day");return f}function gje(t,e){return lQ(t,e,"months")}function vje(t,e){return lQ(t,e,"monthsShort")}function yje(t,e,n){return xF(t,e,n,"weekdays")}function _je(t,e,n){return xF(t,e,n,"weekdaysShort")}function bje(t,e,n){return xF(t,e,n,"weekdaysMin")}Bf("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Jr(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});On.lang=Pl("moment.lang is deprecated. Use moment.locale instead.",Bf);On.langData=Pl("moment.langData is deprecated. Use moment.localeData instead.",vd);var Du=Math.abs;function xje(){var t=this._data;return this._milliseconds=Du(this._milliseconds),this._days=Du(this._days),this._months=Du(this._months),t.milliseconds=Du(t.milliseconds),t.seconds=Du(t.seconds),t.minutes=Du(t.minutes),t.hours=Du(t.hours),t.months=Du(t.months),t.years=Du(t.years),this}function cQ(t,e,n,r){var i=Ac(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function wje(t,e){return cQ(this,t,e,1)}function Sje(t,e){return cQ(this,t,e,-1)}function P8(t){return t<0?Math.floor(t):Math.ceil(t)}function Eje(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,o,l,f,s;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=P8(TB(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=_l(t/1e3),r.seconds=i%60,o=_l(i/60),r.minutes=o%60,l=_l(o/60),r.hours=l%24,e+=_l(l/24),s=_l(uQ(e)),n+=s,e-=P8(TB(s)),f=_l(n/12),n%=12,r.days=e,r.months=n,r.years=f,this}function uQ(t){return t*4800/146097}function TB(t){return t*146097/4800}function Cje(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=Il(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+uQ(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(TB(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function yd(t){return function(){return this.as(t)}}var dQ=yd("ms"),Tje=yd("s"),Aje=yd("m"),Mje=yd("h"),Pje=yd("d"),Ije=yd("w"),Rje=yd("M"),Oje=yd("Q"),Lje=yd("y"),Bje=dQ;function Dje(){return Ac(this)}function kje(t){return t=Il(t),this.isValid()?this[t+"s"]():NaN}function kp(t){return function(){return this.isValid()?this._data[t]:NaN}}var Fje=kp("milliseconds"),zje=kp("seconds"),Nje=kp("minutes"),$je=kp("hours"),jje=kp("days"),Uje=kp("months"),Vje=kp("years");function Gje(){return _l(this.days()/7)}var zu=Math.round,Ag={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Hje(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function Wje(t,e,n,r){var i=Ac(t).abs(),o=zu(i.as("s")),l=zu(i.as("m")),f=zu(i.as("h")),s=zu(i.as("d")),p=zu(i.as("M")),v=zu(i.as("w")),x=zu(i.as("y")),S=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||l<=1&&["m"]||l<n.m&&["mm",l]||f<=1&&["h"]||f<n.h&&["hh",f]||s<=1&&["d"]||s<n.d&&["dd",s];return n.w!=null&&(S=S||v<=1&&["w"]||v<n.w&&["ww",v]),S=S||p<=1&&["M"]||p<n.M&&["MM",p]||x<=1&&["y"]||["yy",x],S[2]=e,S[3]=+t>0,S[4]=r,Hje.apply(null,S)}function Xje(t){return t===void 0?zu:typeof t=="function"?(zu=t,!0):!1}function qje(t,e){return Ag[t]===void 0?!1:e===void 0?Ag[t]:(Ag[t]=e,t==="s"&&(Ag.ss=e-1),!0)}function Yje(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ag,i,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},Ag,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),o=Wje(this,!n,r,i),n&&(o=i.pastFuture(+this,o)),i.postformat(o)}var mR=Math.abs;function eg(t){return(t>0)-(t<0)||+t}function nA(){if(!this.isValid())return this.localeData().invalidDate();var t=mR(this._milliseconds)/1e3,e=mR(this._days),n=mR(this._months),r,i,o,l,f=this.asSeconds(),s,p,v,x;return f?(r=_l(t/60),i=_l(r/60),t%=60,r%=60,o=_l(n/12),n%=12,l=t?t.toFixed(3).replace(/\.?0+$/,""):"",s=f<0?"-":"",p=eg(this._months)!==eg(f)?"-":"",v=eg(this._days)!==eg(f)?"-":"",x=eg(this._milliseconds)!==eg(f)?"-":"",s+"P"+(o?p+o+"Y":"")+(n?p+n+"M":"")+(e?v+e+"D":"")+(i||r||t?"T":"")+(i?x+i+"H":"")+(r?x+r+"M":"")+(t?x+l+"S":"")):"P0D"}var ii=eA.prototype;ii.isValid=U$e;ii.abs=xje;ii.add=wje;ii.subtract=Sje;ii.as=Cje;ii.asMilliseconds=dQ;ii.asSeconds=Tje;ii.asMinutes=Aje;ii.asHours=Mje;ii.asDays=Pje;ii.asWeeks=Ije;ii.asMonths=Rje;ii.asQuarters=Oje;ii.asYears=Lje;ii.valueOf=Bje;ii._bubble=Eje;ii.clone=Dje;ii.get=kje;ii.milliseconds=Fje;ii.seconds=zje;ii.minutes=Nje;ii.hours=$je;ii.days=jje;ii.weeks=Gje;ii.months=Uje;ii.years=Vje;ii.humanize=Yje;ii.toISOString=nA;ii.toString=nA;ii.toJSON=nA;ii.locale=JJ;ii.localeData=eQ;ii.toIsoString=Pl("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nA);ii.lang=QJ;sr("X",0,0,"unix");sr("x",0,0,"valueOf");$n("x",ZT);$n("X",g2e);ji("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});ji("x",function(t,e,n){n._d=new Date(Jr(t))});//! moment.js
On.version="2.30.1";Z4e(oo);On.fn=fn;On.min=z$e;On.max=N$e;On.now=$$e;On.utc=fu;On.unix=pje;On.months=gje;On.isDate=dx;On.locale=Bf;On.invalid=WT;On.duration=Ac;On.isMoment=wc;On.weekdays=yje;On.parseZone=mje;On.localeData=vd;On.isDuration=ZS;On.monthsShort=vje;On.weekdaysMin=bje;On.defineLocale=hF;On.updateLocale=m$e;On.locales=g$e;On.weekdaysShort=_je;On.normalizeUnits=Il;On.relativeTimeRounding=Xje;On.relativeTimeThreshold=qje;On.calendarFormat=d5e;On.prototype=fn;On.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Qw=fae({scriptUrl:"//at.alicdn.com/t/c/font_4473864_4oani4ws6sk.js"}),gR=[1,2,5,10,30,60,120,300],Zje=({layers:t,onJump:e})=>an.jsxs(zh,{children:[an.jsxs(ac,{layout:"inline",onFinish:async n=>{e({lng:parseFloat(n.lng),lat:parseFloat(n.lat),zoom:18})},children:[an.jsx(ac.Item,{name:"lng",children:an.jsx(wS,{type:"number",placeholder:"Longitude"})}),an.jsx(ac.Item,{name:"lat",children:an.jsx(wS,{type:"number",placeholder:"Latitude"})}),an.jsx(gf,{title:"Jump to the location",children:an.jsx(os,{type:"default",htmlType:"submit",icon:an.jsx(E2,{})})})]}),an.jsxs(ac,{layout:"inline",onFinish:async n=>{console.log(t);const r=parseInt(n.personID);for(const i of t)if(i.id.startsWith("car")||i.id.startsWith("pedestrian")){const o=i.props.data;for(const l of o)if(l.id===r){e({lng:l.position[0],lat:l.position[1],zoom:18});return}}$u.warning(`Person ${r} not found in the current visualization area`,1)},children:[an.jsx(ac.Item,{name:"personID",children:an.jsx(wS,{type:"number",placeholder:"Person ID"})}),an.jsx(gf,{title:"Jump to the person",children:an.jsx(os,{type:"default",htmlType:"submit",icon:an.jsx(E2,{})})})]})]}),Kje=t=>{const[e,n]=E.useState(!1),[r,i]=E.useState({lng:0,lat:0}),[o,l]=E.useState(),{layers:f,startT:s,endT:p,t:v,setT:x,playing:S,setPlaying:M,setSpeed:P,setBound:R,openMicroLayer:D,setOpenMicroLayer:B,openMacroLayer:O,setOpenMacroLayer:k,openAoiLayer:$,setOpenAoiLayer:H,openAllLaneLayer:U,setOpenAllLaneLayer:X,interpolation:J,setInterpolation:K,pickable:Q,setPickable:ce}=Y4e(t.sim,t.onCarFetch,t.onPedestrianFetch,t.onTLFetch,t.onRoadStatusFetch,t.junctionLaneGeoJson,t.roadGeoJson,t.aoiGeoJson,t.allLaneGeoJson,t.carModelPaths,t.defaultCarModelPath,t.fps??30);E.useEffect(()=>{},[t.aoiGeoJson]),E.useEffect(()=>{},[t.allLaneGeoJson]);const ge=an.jsxs(zh,{direction:"horizontal",size:"small",children:[an.jsx(w5,{checked:J,onChange:ae=>{K(ae.target.checked)},children:"Interpolate"}),an.jsx(w5,{checked:Q,onChange:ae=>ce(ae.target.checked),children:"Pick"}),an.jsx(gf,{placement:"bottom",title:"Vehicle | Pedestrian | Traffic Light",children:an.jsx(os,{type:D?"link":"text",icon:an.jsx(Qw,{type:"icon-car-fill"}),onClick:()=>B(!D)})}),an.jsx(gf,{placement:"bottom",title:"Road Status",children:an.jsx(os,{type:O?"link":"text",icon:an.jsx(Qw,{type:"icon-gaosu"}),onClick:()=>k(!O)})}),an.jsx(gf,{placement:"bottom",title:"AOI",children:an.jsx(os,{type:$?"link":"text",icon:an.jsx(Qw,{type:"icon-community-line"}),onClick:()=>H(!$)})}),an.jsx(gf,{placement:"bottom",title:"More Lane Information",children:an.jsx(os,{type:U?"link":"text",icon:an.jsx(Qw,{type:"icon-daolu"}),onClick:()=>{const ae=!U;ae&&t.message.warning("Enabling this option may affect display performance, please note!",1),X(ae)}})})]});return an.jsx(ng,{style:{textAlign:"center"},children:an.jsxs(Fh,{span:24,children:[an.jsx(ng,{style:{marginTop:"8px"},justify:"center",align:"middle",children:an.jsxs(k5,{gap:"middle",justify:"center",align:"center",children:[an.jsx(Zje,{layers:f,onJump:t.onSetMapCenter}),ge,t.extraHeader]})}),an.jsx(ng,{children:an.jsx(Fh,{span:24,children:an.jsxs("div",{style:{marginTop:"16px",height:t.deckHeight??"80vh",borderRadius:"16px 16px 0px 0px",boxShadow:"0px 4px 10px 0px rgba(80, 80, 80, 0.1)",position:"relative"},children:[an.jsx("div",{style:{position:"fixed",top:"8%",right:"5%",width:"auto",height:"auto",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"8px",alignItems:"center"},children:an.jsxs("span",{style:{padding:"8px",color:"#007AFF",fontSize:16},children:[r.lng.toFixed(8),", ",r.lat.toFixed(8)]})}),an.jsxs(JLe,{initialViewState:{longitude:t.mapCenter.lng,latitude:t.mapCenter.lat,zoom:t.mapCenter.zoom,pitch:0,bearing:0,transitionDuration:2e3,transitionInterpolator:new $Le},controller:!0,layers:f,onHover:ae=>{const{object:ve,coordinate:Fe}=ae;n(!!ve),i(Fe?{lng:Fe[0],lat:Fe[1]}:{lng:0,lat:0})},getCursor:()=>e?"pointer":"grab",getTooltip:({object:ae,layer:ve})=>{if(!ae)return null;if(ve.id.startsWith("car")){const Fe=an.jsx("div",{children:an.jsxs("p",{children:["Car ",ae.id,an.jsx("br",{}),"Position: ",ae.position.join(", "),an.jsx("br",{}),"Angle: ",ae.angle.toFixed(2)," rad",an.jsx("br",{}),"Speed: ",(ae.v*3.6).toFixed(2)," km/h",an.jsx("br",{}),"Passengers: ",ae.numPassengers]})});return{html:$f.renderToString(Fe),style:{backgroundColor:"rgba(255, 255, 255)"}}}if(ve.id.startsWith("pedestrian")){const Fe=an.jsx("div",{children:an.jsxs("p",{children:["Pedestrian ",ae.id,an.jsx("br",{}),"Position: ",ae.position.join(", "),an.jsx("br",{}),"Angle: ",ae.angle.toFixed(2)," rad",an.jsx("br",{}),"Speed: ",(ae.v*3.6).toFixed(2)," km/h"]})});return{html:$f.renderToString(Fe),style:{backgroundColor:"rgba(255, 255, 255)"}}}return ae.properties!==void 0?{html:`<pre>${JSON.stringify(ae.properties,null,"  ")}</pre>`,style:{backgroundColor:"rgba(255, 255, 255)",color:"black",textAlign:"left"}}:{html:`<pre>${JSON.stringify(ae,null,"  ")}</pre>`,style:{backgroundColor:"rgba(255, 255, 255)",color:"black",textAlign:"left"}}},onViewStateChange:({viewState:ae})=>{const ve=new bp(ae),[Fe,Ae]=ve.unproject([0,0]),[pe,fe]=ve.unproject([ve.width,ve.height]);R({lng1:Fe,lat1:fe,lng2:pe,lat2:Ae})},ContextProvider:Dp.Provider,children:[an.jsx(gd,{mapboxApiAccessToken:t.mapboxAccessToken}),an.jsx(kDe,{style:{position:"absolute",top:10,left:10}})]})]})})}),an.jsx(ng,{style:{padding:"8px 0px 0px 0px"},children:an.jsx(Fh,{span:24,children:an.jsxs(k5,{gap:"middle",justify:"center",align:"center",children:[an.jsxs(zh,{size:"small",children:[S?an.jsx(os,{icon:an.jsx(Cse,{}),onClick:()=>M(!1)}):an.jsx(os,{icon:an.jsx(Ise,{}),onClick:()=>M(!0)}),an.jsx(os,{icon:an.jsx(Yse,{}),onClick:async()=>await x(v-1)}),an.jsx(os,{icon:an.jsx(eae,{}),onClick:async()=>await x(v+1)})]}),an.jsxs(zh,{size:"small",children:[an.jsx("span",{children:"Speedup: "}),an.jsx(B5,{min:0,max:gR.length-1,tooltip:{formatter:ae=>`${gR[ae??0]}`},onChange:ae=>{P(gR[ae??0])},defaultValue:0,style:{width:60}})]}),an.jsxs(zh,{size:"small",children:[an.jsx("span",{children:"Skip to: "}),an.jsxs(ac,{layout:"inline",onFinish:async ae=>{const ve=Number(ae.goTime);await x(ve)},children:[an.jsx(ac.Item,{name:"goTime",children:an.jsx(kye,{controls:!1,size:"small",style:{width:80},placeholder:"Frame"})}),an.jsx(os,{htmlType:"submit",children:"Goto"})]})]}),an.jsx(zh,{size:"small",children:an.jsxs("div",{children:["Play:",On("00:00:00","HH:mm:ss").add(s,"seconds").format("HH:mm:ss"),"/",On("00:00:00","HH:mm:ss").add(v,"seconds").format("HH:mm:ss"),"/",On("00:00:00","HH:mm:ss").add(p,"seconds").format("HH:mm:ss")]})})]})})}),an.jsxs(ng,{justify:"space-around",align:"middle",children:[an.jsx(Fh,{span:2,children:an.jsx("span",{children:"Progress Bar"})}),an.jsx(Fh,{span:20,children:an.jsx(B5,{min:s,max:p,value:o??v,onChange:l,onChangeComplete:async ae=>{const ve=Number(ae);await x(ve),l(void 0)}})})]})]})})},Jje="pk.eyJ1IjoiZmh5ZHJhbGlzayIsImEiOiJja3VzMWc5NXkwb3RnMm5sbnVvd3IydGY0In0.FrwFkYIMpLbU83K9rHSe8w",Qje=(t,e)=>{const[n,r]=E.useState(void 0),[i,o]=E.useState(void 0),[l,f]=E.useState([]),[s,p]=E.useState(!1),v=E.useRef(),x=async()=>{const R=(await(await fetch(`${t}/sims`)).json()).data;f(R)},S=an.jsxs(ac,{layout:"inline",onFinish:async R=>{r(R.name),o(l.find(D=>D.name===R.name))},children:[an.jsx(ac.Item,{name:"name",children:an.jsx(uve,{style:{width:"200px"},placeholder:n??"Sim Name",onDropdownVisibleChange:x,options:l.map(R=>({label:R.name,value:R.name}))})}),an.jsx(os,{icon:an.jsx(Joe,{}),type:"primary",htmlType:"submit",children:"Load"})]}),M=an.jsx(rbe,{title:"Set API URL",open:s,onCancel:()=>{p(!1)},footer:null,children:an.jsxs(ac,{ref:v,onFinish:async R=>{localStorage.setItem("apiUrl",R.apiUrl),e(R.apiUrl),$u.success("API URL applied successfully."),p(!1)},children:[an.jsx(ac.Item,{name:"apiUrl",label:"API URL",shouldUpdate:!0,children:an.jsx(wS,{})}),an.jsx(os,{type:"primary",htmlType:"submit",children:"Apply"})]})}),P=an.jsxs(zh,{children:[S,M,an.jsx(os,{icon:an.jsx(Gse,{}),onClick:()=>{p(!0)}})]});return E.useEffect(()=>{var R;t!==""&&((R=v.current)==null||R.setFieldsValue({apiUrl:t}),x())},[t,s]),{LoadForm:P,sim:i}};function I8(){const[t,e]=E.useState(""),[n,r]=E.useState(ibe),{LoadForm:i,sim:o}=Qje(t,e),[l,f]=E.useState([]),[s,p]=E.useState([]),[v,x]=E.useState([]),[S,M]=E.useState([]),P=o==null?void 0:o.name;return E.useEffect(()=>{const R=localStorage.getItem("apiUrl");R?e(R):$u.warning("Please input API URL by clicking the setting icon on the top right corner.")},[]),E.useEffect(()=>{o&&(r({lng:((o==null?void 0:o.min_lng)+(o==null?void 0:o.max_lng))/2,lat:((o==null?void 0:o.min_lat)+(o==null?void 0:o.max_lat))/2,zoom:12}),fetch(`${t}/aoi/${o.name}`).then(R=>R.json()).then(R=>{f(R.data)}),fetch(`${t}/all-lane/${o.name}`).then(R=>R.json()).then(R=>{p(R.data)}),fetch(`${t}/junclane/${o.name}`).then(R=>R.json()).then(R=>{M(R.data)}),fetch(`${t}/roadlane/${o.name}`).then(R=>R.json()).then(R=>{x(R.data)}))},[o]),an.jsx(Kje,{sim:o,mapCenter:n,onSetMapCenter:r,onCarFetch:async(R,D,B)=>{var U;R=Math.floor(R),D=Math.ceil(D);const k=(await(await fetch(`${t}/cars/${P}?begin=${R}&end=${D}&lat1=${B.lat1}&lat2=${B.lat2}&lng1=${B.lng1}&lng2=${B.lng2}`)).json()).data,$=new Map;for(let X=R;X<D;X++)$.set(X,[]);for(const X of k)$.has(X.step)||$.set(X.step,[]),(U=$.get(X.step))==null||U.push(X);const H=Array.from($).map(([X,J])=>({t:X,data:J.map(K=>({id:K.id,lng:K.lng,lat:K.lat,direction:K.direction,laneId:K.laneId,model:K.model,v:K.v,numPassengers:K.numPassengers}))}));return H.sort((X,J)=>X.t-J.t),H},onPedestrianFetch:async(R,D,B)=>{var U;R=Math.floor(R),D=Math.ceil(D);const k=(await(await fetch(`${t}/people/${P}?begin=${R}&end=${D}&lat1=${B.lat1}&lat2=${B.lat2}&lng1=${B.lng1}&lng2=${B.lng2}`)).json()).data,$=new Map;for(let X=R;X<D;X++)$.set(X,[]);for(const X of k)$.has(X.step)||$.set(X.step,[]),(U=$.get(X.step))==null||U.push(X);const H=Array.from($).map(([X,J])=>({t:X,data:J.map(K=>({id:K.id,lng:K.lng,lat:K.lat,direction:K.direction,parentId:K.parentId,model:K.model,v:K.v}))}));return H.sort((X,J)=>X.t-J.t),H},onTLFetch:async(R,D,B)=>{var X;R=Math.floor(R),D=Math.ceil(D);const k=(await(await fetch(`${t}/traffic-lights/${P}?begin=${R}&end=${D}&lat1=${B.lat1}&lat2=${B.lat2}&lng1=${B.lng1}&lng2=${B.lng2}`)).json()).data,$=new Map;for(let J=R;J<D;J++)$.set(J,[]);for(const J of k)$.has(J.step)||$.set(J.step,[]),(X=$.get(J.step))==null||X.push(J);const H=Array.from($).map(([J,K])=>({t:J,data:K.map(Q=>({id:Q.id,state:Q.state}))}));H.sort((J,K)=>J.t-K.t);let U=`onTLFetch: ${P} ${R} ${D}
`;for(const J of H)U+=`frame ${J.t}: `;return console.log(U),H},onRoadStatusFetch:async(R,D)=>{var H;R=Math.floor(R),D=Math.ceil(D);const O=(await(await fetch(`${t}/road-status/${P}?begin=${R}&end=${D}`)).json()).data,k=new Map;for(let U=R;U<D;U++)k.set(U,[]);for(const U of O)k.has(U.step)||k.set(U.step,[]),(H=k.get(U.step))==null||H.push(U);const $=Array.from(k).map(([U,X])=>({t:U,data:X.map(J=>({id:J.id,level:J.level}))}));return $.sort((U,X)=>U.t-X.t),$},aoiGeoJson:l,allLaneGeoJson:s,roadGeoJson:v,junctionLaneGeoJson:S,carModelPaths:{mini:"/moss-webui-frontend/models/cars/car_mini_red.gltf",normal:"/moss-webui-frontend/models/cars/car_normal_red.gltf",bus:"/moss-webui-frontend/models/cars/bus_green01.gltf"},defaultCarModelPath:"/moss-webui-frontend/models/cars/car_normal_red.gltf",mapboxAccessToken:Jje,message:{info:(R,D)=>$u.info(R,D),success:(R,D)=>$u.success(R,D),warning:(R,D)=>$u.warning(R,D),error:(R,D)=>$u.error(R,D)},extraHeader:i})}/**
 * @remix-run/router v1.15.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Io(){return Io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Io.apply(this,arguments)}var Do;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Do||(Do={}));const R8="popstate";function e6e(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:l,hash:f}=r.location;return Ob("",{pathname:o,search:l,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mx(i)}return n6e(e,n,null,t)}function Gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t6e(){return Math.random().toString(36).substr(2,8)}function O8(t,e){return{usr:t.state,key:t.key,idx:e}}function Ob(t,e,n,r){return n===void 0&&(n=null),Io({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_d(e):e,{state:n,key:e&&e.key||r||t6e()})}function mx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function n6e(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,f=Do.Pop,s=null,p=v();p==null&&(p=0,l.replaceState(Io({},l.state,{idx:p}),""));function v(){return(l.state||{idx:null}).idx}function x(){f=Do.Pop;let D=v(),B=D==null?null:D-p;p=D,s&&s({action:f,location:R.location,delta:B})}function S(D,B){f=Do.Push;let O=Ob(R.location,D,B);n&&n(O,D),p=v()+1;let k=O8(O,p),$=R.createHref(O);try{l.pushState(k,"",$)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign($)}o&&s&&s({action:f,location:R.location,delta:1})}function M(D,B){f=Do.Replace;let O=Ob(R.location,D,B);n&&n(O,D),p=v();let k=O8(O,p),$=R.createHref(O);l.replaceState(k,"",$),o&&s&&s({action:f,location:R.location,delta:0})}function P(D){let B=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof D=="string"?D:mx(D);return O=O.replace(/ $/,"%20"),Gr(B,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,B)}let R={get action(){return f},get location(){return t(i,l)},listen(D){if(s)throw new Error("A history only accepts one active listener");return i.addEventListener(R8,x),s=D,()=>{i.removeEventListener(R8,x),s=null}},createHref(D){return e(i,D)},createURL:P,encodeLocation(D){let B=P(D);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:S,replace:M,go(D){return l.go(D)}};return R}var Mo;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mo||(Mo={}));const r6e=new Set(["lazy","caseSensitive","path","id","index","children"]);function i6e(t){return t.index===!0}function AB(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let l=[...n,o],f=typeof i.id=="string"?i.id:l.join("-");if(Gr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Gr(!r[f],'Found a route id collision on id "'+f+`".  Route id's must be globally unique within Data Router usages`),i6e(i)){let s=Io({},i,e(i),{id:f});return r[f]=s,s}else{let s=Io({},i,e(i),{id:f,children:void 0});return r[f]=s,i.children&&(s.children=AB(i.children,e,l,r)),s}})}function Mg(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?_d(e):e,i=gx(r.pathname||"/",n);if(i==null)return null;let o=fQ(t);s6e(o);let l=null;for(let f=0;l==null&&f<o.length;++f){let s=y6e(i);l=m6e(o[f],s)}return l}function o6e(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function fQ(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,f)=>{let s={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};s.relativePath.startsWith("/")&&(Gr(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(r.length));let p=Df([r,s.relativePath]),v=n.concat(s);o.children&&o.children.length>0&&(Gr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),fQ(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:h6e(p,o.index),routesMeta:v})};return t.forEach((o,l)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))i(o,l);else for(let s of hQ(o.path))i(o,l,s)}),e}function hQ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=hQ(r.join("/")),f=[];return f.push(...l.map(s=>s===""?o:[o,s].join("/"))),i&&f.push(...l),f.map(s=>t.startsWith("/")&&s===""?"/":s)}function s6e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p6e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const a6e=/^:[\w-]+$/,l6e=3,c6e=2,u6e=1,d6e=10,f6e=-2,L8=t=>t==="*";function h6e(t,e){let n=t.split("/"),r=n.length;return n.some(L8)&&(r+=f6e),e&&(r+=c6e),n.filter(i=>!L8(i)).reduce((i,o)=>i+(a6e.test(o)?l6e:o===""?u6e:d6e),r)}function p6e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function m6e(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let l=0;l<n.length;++l){let f=n[l],s=l===n.length-1,p=i==="/"?e:e.slice(i.length)||"/",v=g6e({path:f.relativePath,caseSensitive:f.caseSensitive,end:s},p);if(!v)return null;Object.assign(r,v.params);let x=f.route;o.push({params:r,pathname:Df([i,v.pathname]),pathnameBase:x6e(Df([i,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(i=Df([i,v.pathnameBase]))}return o}function g6e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v6e(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((p,v,x)=>{let{paramName:S,isOptional:M}=v;if(S==="*"){let R=f[x]||"";l=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const P=f[x];return M&&!P?p[S]=void 0:p[S]=(P||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function v6e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,s)=>(r.push({paramName:f,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function y6e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _6e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_d(t):t;return{pathname:n?n.startsWith("/")?n:b6e(n,e):e,search:w6e(r),hash:S6e(i)}}function b6e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vR(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wF(t,e){let n=pQ(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SF(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_d(t):(i=Io({},t),Gr(!i.pathname||!i.pathname.includes("?"),vR("?","pathname","search",i)),Gr(!i.pathname||!i.pathname.includes("#"),vR("#","pathname","hash",i)),Gr(!i.search||!i.search.includes("#"),vR("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,f;if(l==null)f=n;else{let x=e.length-1;if(!r&&l.startsWith("..")){let S=l.split("/");for(;S[0]==="..";)S.shift(),x-=1;i.pathname=S.join("/")}f=x>=0?e[x]:"/"}let s=_6e(i,f),p=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!s.pathname.endsWith("/")&&(p||v)&&(s.pathname+="/"),s}const Df=t=>t.join("/").replace(/\/\/+/g,"/"),x6e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w6e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S6e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class EF{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function mQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gQ=["post","put","patch","delete"],E6e=new Set(gQ),C6e=["get",...gQ],T6e=new Set(C6e),A6e=new Set([301,302,303,307,308]),M6e=new Set([307,308]),yR={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},P6e={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},B0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I6e=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),yQ="remix-router-transitions";function R6e(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Gr(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let te=t.detectErrorBoundary;i=le=>({hasErrorBoundary:te(le)})}else i=I6e;let o={},l=AB(t.routes,i,void 0,o),f,s=t.basename||"/",p=Io({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),v=null,x=new Set,S=null,M=null,P=null,R=t.hydrationData!=null,D=Mg(l,t.history.location,s),B=null;if(D==null){let te=hl(404,{pathname:t.history.location.pathname}),{matches:le,route:ue}=j8(l);D=le,B={[ue.id]:te}}let O,k=D.some(te=>te.route.lazy),$=D.some(te=>te.route.loader);if(k)O=!1;else if(!$)O=!0;else if(p.v7_partialHydration){let te=t.hydrationData?t.hydrationData.loaderData:null,le=t.hydrationData?t.hydrationData.errors:null;O=D.every(ue=>ue.route.loader&&ue.route.loader.hydrate!==!0&&(te&&te[ue.route.id]!==void 0||le&&le[ue.route.id]!==void 0))}else O=t.hydrationData!=null;let H,U={historyAction:t.history.action,location:t.history.location,matches:D,initialized:O,navigation:yR,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||B,fetchers:new Map,blockers:new Map},X=Do.Pop,J=!1,K,Q=!1,ce=new Map,ge=null,ae=!1,ve=!1,Fe=[],Ae=[],pe=new Map,fe=0,xe=-1,Re=new Map,ke=new Set,ze=new Map,Xe=new Map,Ne=new Set,Qe=new Map,pt=new Map,Ke=!1;function ot(){if(v=t.history.listen(te=>{let{action:le,location:ue,delta:Me}=te;if(Ke){Ke=!1;return}vv(pt.size===0||Me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=cr({currentLocation:U.location,nextLocation:ue,historyAction:le});if(Ce&&Me!=null){Ke=!0,t.history.go(Me*-1),fr(Ce,{state:"blocked",location:ue,proceed(){fr(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),t.history.go(Me)},reset(){let _e=new Map(U.blockers);_e.set(Ce,B0),rt({blockers:_e})}});return}return wt(le,ue)}),n){U6e(e,ce);let te=()=>V6e(e,ce);e.addEventListener("pagehide",te),ge=()=>e.removeEventListener("pagehide",te)}return U.initialized||wt(Do.Pop,U.location,{initialHydration:!0}),H}function St(){v&&v(),ge&&ge(),x.clear(),K&&K.abort(),U.fetchers.forEach((te,le)=>vn(le)),U.blockers.forEach((te,le)=>Sn(le))}function st(te){return x.add(te),()=>x.delete(te)}function rt(te,le){le===void 0&&(le={}),U=Io({},U,te);let ue=[],Me=[];p.v7_fetcherPersist&&U.fetchers.forEach((Ce,_e)=>{Ce.state==="idle"&&(Ne.has(_e)?Me.push(_e):ue.push(_e))}),[...x].forEach(Ce=>Ce(U,{deletedFetchers:Me,unstable_viewTransitionOpts:le.viewTransitionOpts,unstable_flushSync:le.flushSync===!0})),p.v7_fetcherPersist&&(ue.forEach(Ce=>U.fetchers.delete(Ce)),Me.forEach(Ce=>vn(Ce)))}function lt(te,le,ue){var Me,Ce;let{flushSync:_e}=ue===void 0?{}:ue,De=U.actionData!=null&&U.navigation.formMethod!=null&&ic(U.navigation.formMethod)&&U.navigation.state==="loading"&&((Me=te.state)==null?void 0:Me._isRedirect)!==!0,et;le.actionData?Object.keys(le.actionData).length>0?et=le.actionData:et=null:De?et=U.actionData:et=null;let nt=le.loaderData?$8(U.loaderData,le.loaderData,le.matches||[],le.errors):U.loaderData,Ze=U.blockers;Ze.size>0&&(Ze=new Map(Ze),Ze.forEach((Ct,Vt)=>Ze.set(Vt,B0)));let Et=J===!0||U.navigation.formMethod!=null&&ic(U.navigation.formMethod)&&((Ce=te.state)==null?void 0:Ce._isRedirect)!==!0;f&&(l=f,f=void 0),ae||X===Do.Pop||(X===Do.Push?t.history.push(te,te.state):X===Do.Replace&&t.history.replace(te,te.state));let vt;if(X===Do.Pop){let Ct=ce.get(U.location.pathname);Ct&&Ct.has(te.pathname)?vt={currentLocation:U.location,nextLocation:te}:ce.has(te.pathname)&&(vt={currentLocation:te,nextLocation:U.location})}else if(Q){let Ct=ce.get(U.location.pathname);Ct?Ct.add(te.pathname):(Ct=new Set([te.pathname]),ce.set(U.location.pathname,Ct)),vt={currentLocation:U.location,nextLocation:te}}rt(Io({},le,{actionData:et,loaderData:nt,historyAction:X,location:te,initialized:!0,navigation:yR,revalidation:"idle",restoreScrollPosition:se(te,le.matches||U.matches),preventScrollReset:Et,blockers:Ze}),{viewTransitionOpts:vt,flushSync:_e===!0}),X=Do.Pop,J=!1,Q=!1,ae=!1,ve=!1,Fe=[],Ae=[]}async function Rt(te,le){if(typeof te=="number"){t.history.go(te);return}let ue=MB(U.location,U.matches,s,p.v7_prependBasename,te,p.v7_relativeSplatPath,le==null?void 0:le.fromRouteId,le==null?void 0:le.relative),{path:Me,submission:Ce,error:_e}=B8(p.v7_normalizeFormMethod,!1,ue,le),De=U.location,et=Ob(U.location,Me,le&&le.state);et=Io({},et,t.history.encodeLocation(et));let nt=le&&le.replace!=null?le.replace:void 0,Ze=Do.Push;nt===!0?Ze=Do.Replace:nt===!1||Ce!=null&&ic(Ce.formMethod)&&Ce.formAction===U.location.pathname+U.location.search&&(Ze=Do.Replace);let Et=le&&"preventScrollReset"in le?le.preventScrollReset===!0:void 0,vt=(le&&le.unstable_flushSync)===!0,Ct=cr({currentLocation:De,nextLocation:et,historyAction:Ze});if(Ct){fr(Ct,{state:"blocked",location:et,proceed(){fr(Ct,{state:"proceeding",proceed:void 0,reset:void 0,location:et}),Rt(te,le)},reset(){let Vt=new Map(U.blockers);Vt.set(Ct,B0),rt({blockers:Vt})}});return}return await wt(Ze,et,{submission:Ce,pendingError:_e,preventScrollReset:Et,replace:le&&le.replace,enableViewTransition:le&&le.unstable_viewTransition,flushSync:vt})}function bt(){if(Ot(),rt({revalidation:"loading"}),U.navigation.state!=="submitting"){if(U.navigation.state==="idle"){wt(U.historyAction,U.location,{startUninterruptedRevalidation:!0});return}wt(X||U.historyAction,U.navigation.location,{overrideNavigation:U.navigation})}}async function wt(te,le,ue){K&&K.abort(),K=null,X=te,ae=(ue&&ue.startUninterruptedRevalidation)===!0,Oe(U.location,U.matches),J=(ue&&ue.preventScrollReset)===!0,Q=(ue&&ue.enableViewTransition)===!0;let Me=f||l,Ce=ue&&ue.overrideNavigation,_e=Mg(Me,le,s),De=(ue&&ue.flushSync)===!0;if(!_e){let Vt=hl(404,{pathname:le.pathname}),{matches:ln,route:kn}=j8(Me);ur(),lt(le,{matches:ln,loaderData:{},errors:{[kn.id]:Vt}},{flushSync:De});return}if(U.initialized&&!ve&&k6e(U.location,le)&&!(ue&&ue.submission&&ic(ue.submission.formMethod))){lt(le,{matches:_e},{flushSync:De});return}K=new AbortController;let et=k0(t.history,le,K.signal,ue&&ue.submission),nt,Ze;if(ue&&ue.pendingError)Ze={[M_(_e).route.id]:ue.pendingError};else if(ue&&ue.submission&&ic(ue.submission.formMethod)){let Vt=await it(et,le,ue.submission,_e,{replace:ue.replace,flushSync:De});if(Vt.shortCircuited)return;nt=Vt.pendingActionData,Ze=Vt.pendingActionError,Ce=_R(le,ue.submission),De=!1,et=new Request(et.url,{signal:et.signal})}let{shortCircuited:Et,loaderData:vt,errors:Ct}=await Bt(et,le,_e,Ce,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,De,nt,Ze);Et||(K=null,lt(le,Io({matches:_e},nt?{actionData:nt}:{},{loaderData:vt,errors:Ct})))}async function it(te,le,ue,Me,Ce){Ce===void 0&&(Ce={}),Ot();let _e=$6e(le,ue);rt({navigation:_e},{flushSync:Ce.flushSync===!0});let De,et=IB(Me,le);if(!et.route.action&&!et.route.lazy)De={type:Mo.error,error:hl(405,{method:te.method,pathname:le.pathname,routeId:et.route.id})};else if(De=await D0("action",te,et,Me,o,i,s,p.v7_relativeSplatPath),te.signal.aborted)return{shortCircuited:!0};if(rp(De)){let nt;return Ce&&Ce.replace!=null?nt=Ce.replace:nt=De.location===U.location.pathname+U.location.search,await zt(U,De,{submission:ue,replace:nt}),{shortCircuited:!0}}if(Pg(De)){let nt=M_(Me,et.route.id);return(Ce&&Ce.replace)!==!0&&(X=Do.Push),{pendingActionData:{},pendingActionError:{[nt.route.id]:De.error}}}if(np(De))throw hl(400,{type:"defer-action"});return{pendingActionData:{[et.route.id]:De.data}}}async function Bt(te,le,ue,Me,Ce,_e,De,et,nt,Ze,Et){let vt=Me||_R(le,Ce),Ct=Ce||_e||G8(vt),Vt=f||l,[ln,kn]=D8(t.history,U,ue,Ct,le,p.v7_partialHydration&&et===!0,ve,Fe,Ae,Ne,ze,ke,Vt,s,Ze,Et);if(ur(Gt=>!(ue&&ue.some(xn=>xn.route.id===Gt))||ln&&ln.some(xn=>xn.route.id===Gt)),xe=++fe,ln.length===0&&kn.length===0){let Gt=Vn();return lt(le,Io({matches:ue,loaderData:{},errors:Et||null},Ze?{actionData:Ze}:{},Gt?{fetchers:new Map(U.fetchers)}:{}),{flushSync:nt}),{shortCircuited:!0}}if(!ae&&(!p.v7_partialHydration||!et)){kn.forEach(xn=>{let nr=U.fetchers.get(xn.key),or=F0(void 0,nr?nr.data:void 0);U.fetchers.set(xn.key,or)});let Gt=Ze||U.actionData;rt(Io({navigation:vt},Gt?Object.keys(Gt).length===0?{actionData:null}:{actionData:Gt}:{},kn.length>0?{fetchers:new Map(U.fetchers)}:{}),{flushSync:nt})}kn.forEach(Gt=>{pe.has(Gt.key)&&wn(Gt.key),Gt.controller&&pe.set(Gt.key,Gt.controller)});let Jn=()=>kn.forEach(Gt=>wn(Gt.key));K&&K.signal.addEventListener("abort",Jn);let{results:_r,loaderResults:Wn,fetcherResults:dr}=await bn(U.matches,ue,ln,kn,te);if(te.signal.aborted)return{shortCircuited:!0};K&&K.signal.removeEventListener("abort",Jn),kn.forEach(Gt=>pe.delete(Gt.key));let gr=U8(_r);if(gr){if(gr.idx>=ln.length){let Gt=kn[gr.idx-ln.length].key;ke.add(Gt)}return await zt(U,gr.result,{replace:De}),{shortCircuited:!0}}let{loaderData:Yn,errors:ri}=N8(U,ue,ln,Wn,Et,kn,dr,Qe);Qe.forEach((Gt,xn)=>{Gt.subscribe(nr=>{(nr||Gt.done)&&Qe.delete(xn)})});let Cn=Vn(),yn=rr(xe),Ft=Cn||yn||kn.length>0;return Io({loaderData:Yn,errors:ri},Ft?{fetchers:new Map(U.fetchers)}:{})}function jt(te,le,ue,Me){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");pe.has(te)&&wn(te);let Ce=(Me&&Me.unstable_flushSync)===!0,_e=f||l,De=MB(U.location,U.matches,s,p.v7_prependBasename,ue,p.v7_relativeSplatPath,le,Me==null?void 0:Me.relative),et=Mg(_e,De,s);if(!et){Jt(te,le,hl(404,{pathname:De}),{flushSync:Ce});return}let{path:nt,submission:Ze,error:Et}=B8(p.v7_normalizeFormMethod,!0,De,Me);if(Et){Jt(te,le,Et,{flushSync:Ce});return}let vt=IB(et,nt);if(J=(Me&&Me.preventScrollReset)===!0,Ze&&ic(Ze.formMethod)){cn(te,le,nt,vt,et,Ce,Ze);return}ze.set(te,{routeId:le,path:nt}),rn(te,le,nt,vt,et,Ce,Ze)}async function cn(te,le,ue,Me,Ce,_e,De){if(Ot(),ze.delete(te),!Me.route.action&&!Me.route.lazy){let xn=hl(405,{method:De.formMethod,pathname:ue,routeId:le});Jt(te,le,xn,{flushSync:_e});return}let et=U.fetchers.get(te);Nt(te,j6e(De,et),{flushSync:_e});let nt=new AbortController,Ze=k0(t.history,ue,nt.signal,De);pe.set(te,nt);let Et=fe,vt=await D0("action",Ze,Me,Ce,o,i,s,p.v7_relativeSplatPath);if(Ze.signal.aborted){pe.get(te)===nt&&pe.delete(te);return}if(p.v7_fetcherPersist&&Ne.has(te)){if(rp(vt)||Pg(vt)){Nt(te,of(void 0));return}}else{if(rp(vt))if(pe.delete(te),xe>Et){Nt(te,of(void 0));return}else return ke.add(te),Nt(te,F0(De)),zt(U,vt,{fetcherSubmission:De});if(Pg(vt)){Jt(te,le,vt.error);return}}if(np(vt))throw hl(400,{type:"defer-action"});let Ct=U.navigation.location||U.location,Vt=k0(t.history,Ct,nt.signal),ln=f||l,kn=U.navigation.state!=="idle"?Mg(ln,U.navigation.location,s):U.matches;Gr(kn,"Didn't find any matches after fetcher action");let Jn=++fe;Re.set(te,Jn);let _r=F0(De,vt.data);U.fetchers.set(te,_r);let[Wn,dr]=D8(t.history,U,kn,De,Ct,!1,ve,Fe,Ae,Ne,ze,ke,ln,s,{[Me.route.id]:vt.data},void 0);dr.filter(xn=>xn.key!==te).forEach(xn=>{let nr=xn.key,or=U.fetchers.get(nr),Fr=F0(void 0,or?or.data:void 0);U.fetchers.set(nr,Fr),pe.has(nr)&&wn(nr),xn.controller&&pe.set(nr,xn.controller)}),rt({fetchers:new Map(U.fetchers)});let gr=()=>dr.forEach(xn=>wn(xn.key));nt.signal.addEventListener("abort",gr);let{results:Yn,loaderResults:ri,fetcherResults:Cn}=await bn(U.matches,kn,Wn,dr,Vt);if(nt.signal.aborted)return;nt.signal.removeEventListener("abort",gr),Re.delete(te),pe.delete(te),dr.forEach(xn=>pe.delete(xn.key));let yn=U8(Yn);if(yn){if(yn.idx>=Wn.length){let xn=dr[yn.idx-Wn.length].key;ke.add(xn)}return zt(U,yn.result)}let{loaderData:Ft,errors:Gt}=N8(U,U.matches,Wn,ri,void 0,dr,Cn,Qe);if(U.fetchers.has(te)){let xn=of(vt.data);U.fetchers.set(te,xn)}rr(Jn),U.navigation.state==="loading"&&Jn>xe?(Gr(X,"Expected pending action"),K&&K.abort(),lt(U.navigation.location,{matches:kn,loaderData:Ft,errors:Gt,fetchers:new Map(U.fetchers)})):(rt({errors:Gt,loaderData:$8(U.loaderData,Ft,kn,Gt),fetchers:new Map(U.fetchers)}),ve=!1)}async function rn(te,le,ue,Me,Ce,_e,De){let et=U.fetchers.get(te);Nt(te,F0(De,et?et.data:void 0),{flushSync:_e});let nt=new AbortController,Ze=k0(t.history,ue,nt.signal);pe.set(te,nt);let Et=fe,vt=await D0("loader",Ze,Me,Ce,o,i,s,p.v7_relativeSplatPath);if(np(vt)&&(vt=await xQ(vt,Ze.signal,!0)||vt),pe.get(te)===nt&&pe.delete(te),!Ze.signal.aborted){if(Ne.has(te)){Nt(te,of(void 0));return}if(rp(vt))if(xe>Et){Nt(te,of(void 0));return}else{ke.add(te),await zt(U,vt);return}if(Pg(vt)){Jt(te,le,vt.error);return}Gr(!np(vt),"Unhandled fetcher deferred data"),Nt(te,of(vt.data))}}async function zt(te,le,ue){let{submission:Me,fetcherSubmission:Ce,replace:_e}=ue===void 0?{}:ue;le.revalidate&&(ve=!0);let De=Ob(te.location,le.location,{_isRedirect:!0});if(Gr(De,"Expected a location on the redirect navigation"),n){let Ct=!1;if(le.reloadDocument)Ct=!0;else if(vQ.test(le.location)){const Vt=t.history.createURL(le.location);Ct=Vt.origin!==e.location.origin||gx(Vt.pathname,s)==null}if(Ct){_e?e.location.replace(le.location):e.location.assign(le.location);return}}K=null;let et=_e===!0?Do.Replace:Do.Push,{formMethod:nt,formAction:Ze,formEncType:Et}=te.navigation;!Me&&!Ce&&nt&&Ze&&Et&&(Me=G8(te.navigation));let vt=Me||Ce;if(M6e.has(le.status)&&vt&&ic(vt.formMethod))await wt(et,De,{submission:Io({},vt,{formAction:le.location}),preventScrollReset:J});else{let Ct=_R(De,Me);await wt(et,De,{overrideNavigation:Ct,fetcherSubmission:Ce,preventScrollReset:J})}}async function bn(te,le,ue,Me,Ce){let _e=await Promise.all([...ue.map(nt=>D0("loader",Ce,nt,le,o,i,s,p.v7_relativeSplatPath)),...Me.map(nt=>nt.matches&&nt.match&&nt.controller?D0("loader",k0(t.history,nt.path,nt.controller.signal),nt.match,nt.matches,o,i,s,p.v7_relativeSplatPath):{type:Mo.error,error:hl(404,{pathname:nt.path})})]),De=_e.slice(0,ue.length),et=_e.slice(ue.length);return await Promise.all([V8(te,ue,De,De.map(()=>Ce.signal),!1,U.loaderData),V8(te,Me.map(nt=>nt.match),et,Me.map(nt=>nt.controller?nt.controller.signal:null),!0)]),{results:_e,loaderResults:De,fetcherResults:et}}function Ot(){ve=!0,Fe.push(...ur()),ze.forEach((te,le)=>{pe.has(le)&&(Ae.push(le),wn(le))})}function Nt(te,le,ue){ue===void 0&&(ue={}),U.fetchers.set(te,le),rt({fetchers:new Map(U.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Jt(te,le,ue,Me){Me===void 0&&(Me={});let Ce=M_(U.matches,le);vn(te),rt({errors:{[Ce.route.id]:ue},fetchers:new Map(U.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function on(te){return p.v7_fetcherPersist&&(Xe.set(te,(Xe.get(te)||0)+1),Ne.has(te)&&Ne.delete(te)),U.fetchers.get(te)||P6e}function vn(te){let le=U.fetchers.get(te);pe.has(te)&&!(le&&le.state==="loading"&&Re.has(te))&&wn(te),ze.delete(te),Re.delete(te),ke.delete(te),Ne.delete(te),U.fetchers.delete(te)}function hn(te){if(p.v7_fetcherPersist){let le=(Xe.get(te)||0)-1;le<=0?(Xe.delete(te),Ne.add(te)):Xe.set(te,le)}else vn(te);rt({fetchers:new Map(U.fetchers)})}function wn(te){let le=pe.get(te);Gr(le,"Expected fetch controller: "+te),le.abort(),pe.delete(te)}function Rn(te){for(let le of te){let ue=on(le),Me=of(ue.data);U.fetchers.set(le,Me)}}function Vn(){let te=[],le=!1;for(let ue of ke){let Me=U.fetchers.get(ue);Gr(Me,"Expected fetcher: "+ue),Me.state==="loading"&&(ke.delete(ue),te.push(ue),le=!0)}return Rn(te),le}function rr(te){let le=[];for(let[ue,Me]of Re)if(Me<te){let Ce=U.fetchers.get(ue);Gr(Ce,"Expected fetcher: "+ue),Ce.state==="loading"&&(wn(ue),Re.delete(ue),le.push(ue))}return Rn(le),le.length>0}function Pn(te,le){let ue=U.blockers.get(te)||B0;return pt.get(te)!==le&&pt.set(te,le),ue}function Sn(te){U.blockers.delete(te),pt.delete(te)}function fr(te,le){let ue=U.blockers.get(te)||B0;Gr(ue.state==="unblocked"&&le.state==="blocked"||ue.state==="blocked"&&le.state==="blocked"||ue.state==="blocked"&&le.state==="proceeding"||ue.state==="blocked"&&le.state==="unblocked"||ue.state==="proceeding"&&le.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+le.state);let Me=new Map(U.blockers);Me.set(te,le),rt({blockers:Me})}function cr(te){let{currentLocation:le,nextLocation:ue,historyAction:Me}=te;if(pt.size===0)return;pt.size>1&&vv(!1,"A router only supports one blocker at a time");let Ce=Array.from(pt.entries()),[_e,De]=Ce[Ce.length-1],et=U.blockers.get(_e);if(!(et&&et.state==="proceeding")&&De({currentLocation:le,nextLocation:ue,historyAction:Me}))return _e}function ur(te){let le=[];return Qe.forEach((ue,Me)=>{(!te||te(Me))&&(ue.cancel(),le.push(Me),Qe.delete(Me))}),le}function tr(te,le,ue){if(S=te,P=le,M=ue||null,!R&&U.navigation===yR){R=!0;let Me=se(U.location,U.matches);Me!=null&&rt({restoreScrollPosition:Me})}return()=>{S=null,P=null,M=null}}function oi(te,le){return M&&M(te,le.map(Me=>o6e(Me,U.loaderData)))||te.key}function Oe(te,le){if(S&&P){let ue=oi(te,le);S[ue]=P()}}function se(te,le){if(S){let ue=oi(te,le),Me=S[ue];if(typeof Me=="number")return Me}return null}function oe(te){o={},f=AB(te,i,void 0,o)}return H={get basename(){return s},get future(){return p},get state(){return U},get routes(){return l},get window(){return e},initialize:ot,subscribe:st,enableScrollRestoration:tr,navigate:Rt,fetch:jt,revalidate:bt,createHref:te=>t.history.createHref(te),encodeLocation:te=>t.history.encodeLocation(te),getFetcher:on,deleteFetcher:hn,dispose:St,getBlocker:Pn,deleteBlocker:Sn,_internalFetchControllers:pe,_internalActiveDeferreds:Qe,_internalSetRoutes:oe},H}function O6e(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function MB(t,e,n,r,i,o,l,f){let s,p;if(l){s=[];for(let x of e)if(s.push(x),x.route.id===l){p=x;break}}else s=e,p=e[e.length-1];let v=SF(i||".",wF(s,o),gx(t.pathname,n)||t.pathname,f==="path");return i==null&&(v.search=t.search,v.hash=t.hash),(i==null||i===""||i===".")&&p&&p.route.index&&!CF(v.search)&&(v.search=v.search?v.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Df([n,v.pathname])),mx(v)}function B8(t,e,n,r){if(!r||!O6e(r))return{path:n};if(r.formMethod&&!N6e(r.formMethod))return{path:n,error:hl(405,{method:r.formMethod})};let i=()=>({path:n,error:hl(400,{type:"invalid-body"})}),o=r.formMethod||"get",l=t?o.toUpperCase():o.toLowerCase(),f=bQ(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ic(l))return i();let S=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((M,P)=>{let[R,D]=P;return""+M+R+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:l,formAction:f,formEncType:r.formEncType,formData:void 0,json:void 0,text:S}}}else if(r.formEncType==="application/json"){if(!ic(l))return i();try{let S=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:f,formEncType:r.formEncType,formData:void 0,json:S,text:void 0}}}catch{return i()}}}Gr(typeof FormData=="function","FormData is not available in this environment");let s,p;if(r.formData)s=PB(r.formData),p=r.formData;else if(r.body instanceof FormData)s=PB(r.body),p=r.body;else if(r.body instanceof URLSearchParams)s=r.body,p=z8(s);else if(r.body==null)s=new URLSearchParams,p=new FormData;else try{s=new URLSearchParams(r.body),p=z8(s)}catch{return i()}let v={formMethod:l,formAction:f,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(ic(v.formMethod))return{path:n,submission:v};let x=_d(n);return e&&x.search&&CF(x.search)&&s.append("index",""),x.search="?"+s,{path:mx(x),submission:v}}function L6e(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function D8(t,e,n,r,i,o,l,f,s,p,v,x,S,M,P,R){let D=R?Object.values(R)[0]:P?Object.values(P)[0]:void 0,B=t.createURL(e.location),O=t.createURL(i),k=R?Object.keys(R)[0]:void 0,H=L6e(n,k).filter((X,J)=>{let{route:K}=X;if(K.lazy)return!0;if(K.loader==null)return!1;if(o)return K.loader.hydrate?!0:e.loaderData[K.id]===void 0&&(!e.errors||e.errors[K.id]===void 0);if(B6e(e.loaderData,e.matches[J],X)||f.some(ge=>ge===X.route.id))return!0;let Q=e.matches[J],ce=X;return k8(X,Io({currentUrl:B,currentParams:Q.params,nextUrl:O,nextParams:ce.params},r,{actionResult:D,defaultShouldRevalidate:l||B.pathname+B.search===O.pathname+O.search||B.search!==O.search||_Q(Q,ce)}))}),U=[];return v.forEach((X,J)=>{if(o||!n.some(ae=>ae.route.id===X.routeId)||p.has(J))return;let K=Mg(S,X.path,M);if(!K){U.push({key:J,routeId:X.routeId,path:X.path,matches:null,match:null,controller:null});return}let Q=e.fetchers.get(J),ce=IB(K,X.path),ge=!1;x.has(J)?ge=!1:s.includes(J)?ge=!0:Q&&Q.state!=="idle"&&Q.data===void 0?ge=l:ge=k8(ce,Io({currentUrl:B,currentParams:e.matches[e.matches.length-1].params,nextUrl:O,nextParams:n[n.length-1].params},r,{actionResult:D,defaultShouldRevalidate:l})),ge&&U.push({key:J,routeId:X.routeId,path:X.path,matches:K,match:ce,controller:new AbortController})}),[H,U]}function B6e(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function _Q(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function k8(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function F8(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Gr(i,"No route found in manifest");let o={};for(let l in r){let s=i[l]!==void 0&&l!=="hasErrorBoundary";vv(!s,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!s&&!r6e.has(l)&&(o[l]=r[l])}Object.assign(i,o),Object.assign(i,Io({},e(i),{lazy:void 0}))}async function D0(t,e,n,r,i,o,l,f,s){s===void 0&&(s={});let p,v,x,S=R=>{let D,B=new Promise((O,k)=>D=k);return x=()=>D(),e.signal.addEventListener("abort",x),Promise.race([R({request:e,params:n.params,context:s.requestContext}),B])};try{let R=n.route[t];if(n.route.lazy)if(R){let D,B=await Promise.all([S(R).catch(O=>{D=O}),F8(n.route,o,i)]);if(D)throw D;v=B[0]}else if(await F8(n.route,o,i),R=n.route[t],R)v=await S(R);else if(t==="action"){let D=new URL(e.url),B=D.pathname+D.search;throw hl(405,{method:e.method,pathname:B,routeId:n.route.id})}else return{type:Mo.data,data:void 0};else if(R)v=await S(R);else{let D=new URL(e.url),B=D.pathname+D.search;throw hl(404,{pathname:B})}Gr(v!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(R){p=Mo.error,v=R}finally{x&&e.signal.removeEventListener("abort",x)}if(z6e(v)){let R=v.status;if(A6e.has(R)){let B=v.headers.get("Location");if(Gr(B,"Redirects returned/thrown from loaders/actions must have a Location header"),!vQ.test(B))B=MB(new URL(e.url),r.slice(0,r.indexOf(n)+1),l,!0,B,f);else if(!s.isStaticRequest){let O=new URL(e.url),k=B.startsWith("//")?new URL(O.protocol+B):new URL(B),$=gx(k.pathname,l)!=null;k.origin===O.origin&&$&&(B=k.pathname+k.search+k.hash)}if(s.isStaticRequest)throw v.headers.set("Location",B),v;return{type:Mo.redirect,status:R,location:B,revalidate:v.headers.get("X-Remix-Revalidate")!==null,reloadDocument:v.headers.get("X-Remix-Reload-Document")!==null}}if(s.isRouteRequest)throw{type:p===Mo.error?Mo.error:Mo.data,response:v};let D;try{let B=v.headers.get("Content-Type");B&&/\bapplication\/json\b/.test(B)?v.body==null?D=null:D=await v.json():D=await v.text()}catch(B){return{type:Mo.error,error:B}}return p===Mo.error?{type:p,error:new EF(R,v.statusText,D),headers:v.headers}:{type:Mo.data,data:D,statusCode:v.status,headers:v.headers}}if(p===Mo.error)return{type:p,error:v};if(F6e(v)){var M,P;return{type:Mo.deferred,deferredData:v,statusCode:(M=v.init)==null?void 0:M.status,headers:((P=v.init)==null?void 0:P.headers)&&new Headers(v.init.headers)}}return{type:Mo.data,data:v}}function k0(t,e,n,r){let i=t.createURL(bQ(e)).toString(),o={signal:n};if(r&&ic(r.formMethod)){let{formMethod:l,formEncType:f}=r;o.method=l.toUpperCase(),f==="application/json"?(o.headers=new Headers({"Content-Type":f}),o.body=JSON.stringify(r.json)):f==="text/plain"?o.body=r.text:f==="application/x-www-form-urlencoded"&&r.formData?o.body=PB(r.formData):o.body=r.formData}return new Request(i,o)}function PB(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function z8(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function D6e(t,e,n,r,i){let o={},l=null,f,s=!1,p={};return n.forEach((v,x)=>{let S=e[x].route.id;if(Gr(!rp(v),"Cannot handle redirect results in processLoaderData"),Pg(v)){let M=M_(t,S),P=v.error;r&&(P=Object.values(r)[0],r=void 0),l=l||{},l[M.route.id]==null&&(l[M.route.id]=P),o[S]=void 0,s||(s=!0,f=mQ(v.error)?v.error.status:500),v.headers&&(p[S]=v.headers)}else np(v)?(i.set(S,v.deferredData),o[S]=v.deferredData.data):o[S]=v.data,v.statusCode!=null&&v.statusCode!==200&&!s&&(f=v.statusCode),v.headers&&(p[S]=v.headers)}),r&&(l=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:l,statusCode:f||200,loaderHeaders:p}}function N8(t,e,n,r,i,o,l,f){let{loaderData:s,errors:p}=D6e(e,n,r,i,f);for(let v=0;v<o.length;v++){let{key:x,match:S,controller:M}=o[v];Gr(l!==void 0&&l[v]!==void 0,"Did not find corresponding fetcher result");let P=l[v];if(!(M&&M.signal.aborted))if(Pg(P)){let R=M_(t.matches,S==null?void 0:S.route.id);p&&p[R.route.id]||(p=Io({},p,{[R.route.id]:P.error})),t.fetchers.delete(x)}else if(rp(P))Gr(!1,"Unhandled fetcher revalidation redirect");else if(np(P))Gr(!1,"Unhandled fetcher deferred data");else{let R=of(P.data);t.fetchers.set(x,R)}}return{loaderData:s,errors:p}}function $8(t,e,n,r){let i=Io({},e);for(let o of n){let l=o.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(i[l]=e[l]):t[l]!==void 0&&o.route.loader&&(i[l]=t[l]),r&&r.hasOwnProperty(l))break}return i}function M_(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function j8(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function hl(t,e){let{pathname:n,routeId:r,method:i,type:o}=e===void 0?{}:e,l="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?f="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?f="defer() is not supported in actions":o==="invalid-body"&&(f="Unable to encode submission body")):t===403?(l="Forbidden",f='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",f='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?f="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(f='Invalid request method "'+i.toUpperCase()+'"')),new EF(t||500,l,new Error(f),!0)}function U8(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(rp(n))return{result:n,idx:e}}}function bQ(t){let e=typeof t=="string"?_d(t):t;return mx(Io({},e,{hash:""}))}function k6e(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function np(t){return t.type===Mo.deferred}function Pg(t){return t.type===Mo.error}function rp(t){return(t&&t.type)===Mo.redirect}function F6e(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function z6e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function N6e(t){return T6e.has(t.toLowerCase())}function ic(t){return E6e.has(t.toLowerCase())}async function V8(t,e,n,r,i,o){for(let l=0;l<n.length;l++){let f=n[l],s=e[l];if(!s)continue;let p=t.find(x=>x.route.id===s.route.id),v=p!=null&&!_Q(p,s)&&(o&&o[s.route.id])!==void 0;if(np(f)&&(i||v)){let x=r[l];Gr(x,"Expected an AbortSignal for revalidating fetcher deferred result"),await xQ(f,x,i).then(S=>{S&&(n[l]=S||n[l])})}}}async function xQ(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Mo.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Mo.error,error:i}}return{type:Mo.data,data:t.deferredData.data}}}function CF(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function IB(t,e){let n=typeof e=="string"?_d(e).search:e.search;if(t[t.length-1].route.index&&CF(n||""))return t[t.length-1];let r=pQ(t);return r[r.length-1]}function G8(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:l}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function _R(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $6e(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function F0(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function j6e(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function of(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function U6e(t,e){try{let n=t.sessionStorage.getItem(yQ);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function V6e(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(yQ,JSON.stringify(n))}catch(r){vv(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lb.apply(this,arguments)}const rA=E.createContext(null),wQ=E.createContext(null),vx=E.createContext(null),iA=E.createContext(null),Fp=E.createContext({outlet:null,matches:[],isDataRoute:!1}),SQ=E.createContext(null);function yx(){return E.useContext(iA)!=null}function TF(){return yx()||Gr(!1),E.useContext(iA).location}function EQ(t){E.useContext(vx).static||E.useLayoutEffect(t)}function G6e(){let{isDataRoute:t}=E.useContext(Fp);return t?nUe():H6e()}function H6e(){yx()||Gr(!1);let t=E.useContext(rA),{basename:e,future:n,navigator:r}=E.useContext(vx),{matches:i}=E.useContext(Fp),{pathname:o}=TF(),l=JSON.stringify(wF(i,n.v7_relativeSplatPath)),f=E.useRef(!1);return EQ(()=>{f.current=!0}),E.useCallback(function(p,v){if(v===void 0&&(v={}),!f.current)return;if(typeof p=="number"){r.go(p);return}let x=SF(p,JSON.parse(l),o,v.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Df([e,x.pathname])),(v.replace?r.replace:r.push)(x,v.state,v)},[e,r,l,o,t])}function W6e(t,e,n,r){yx()||Gr(!1);let{navigator:i}=E.useContext(vx),{matches:o}=E.useContext(Fp),l=o[o.length-1],f=l?l.params:{};l&&l.pathname;let s=l?l.pathnameBase:"/";l&&l.route;let p=TF(),v;if(e){var x;let D=typeof e=="string"?_d(e):e;s==="/"||(x=D.pathname)!=null&&x.startsWith(s)||Gr(!1),v=D}else v=p;let S=v.pathname||"/",M=S;if(s!=="/"){let D=s.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(D.length).join("/")}let P=Mg(t,{pathname:M}),R=K6e(P&&P.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:Df([s,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?s:Df([s,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,n,r);return e&&R?E.createElement(iA.Provider,{value:{location:Lb({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Do.Pop}},R):R}function X6e(){let t=tUe(),e=mQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,null)}const q6e=E.createElement(X6e,null);class Y6e extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(Fp.Provider,{value:this.props.routeContext},E.createElement(SQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z6e(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(rA);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Fp.Provider,{value:e},r)}function K6e(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let l=t,f=(i=n)==null?void 0:i.errors;if(f!=null){let v=l.findIndex(x=>x.route.id&&(f==null?void 0:f[x.route.id]));v>=0||Gr(!1),l=l.slice(0,Math.min(l.length,v+1))}let s=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<l.length;v++){let x=l[v];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=v),x.route.id){let{loaderData:S,errors:M}=n,P=x.route.loader&&S[x.route.id]===void 0&&(!M||M[x.route.id]===void 0);if(x.route.lazy||P){s=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((v,x,S)=>{let M,P=!1,R=null,D=null;n&&(M=f&&x.route.id?f[x.route.id]:void 0,R=x.route.errorElement||q6e,s&&(p<0&&S===0?(rUe("route-fallback",!1),P=!0,D=null):p===S&&(P=!0,D=x.route.hydrateFallbackElement||null)));let B=e.concat(l.slice(0,S+1)),O=()=>{let k;return M?k=R:P?k=D:x.route.Component?k=E.createElement(x.route.Component,null):x.route.element?k=x.route.element:k=v,E.createElement(Z6e,{match:x,routeContext:{outlet:v,matches:B,isDataRoute:n!=null},children:k})};return n&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?E.createElement(Y6e,{location:n.location,revalidation:n.revalidation,component:R,error:M,children:O(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):O()},null)}var CQ=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CQ||{}),SC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SC||{});function J6e(t){let e=E.useContext(rA);return e||Gr(!1),e}function Q6e(t){let e=E.useContext(wQ);return e||Gr(!1),e}function eUe(t){let e=E.useContext(Fp);return e||Gr(!1),e}function TQ(t){let e=eUe(),n=e.matches[e.matches.length-1];return n.route.id||Gr(!1),n.route.id}function tUe(){var t;let e=E.useContext(SQ),n=Q6e(SC.UseRouteError),r=TQ(SC.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nUe(){let{router:t}=J6e(CQ.UseNavigateStable),e=TQ(SC.UseNavigateStable),n=E.useRef(!1);return EQ(()=>{n.current=!0}),E.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lb({fromRouteId:e},o)))},[t,e])}const H8={};function rUe(t,e,n){!e&&!H8[t]&&(H8[t]=!0)}function W8(t){let{to:e,replace:n,state:r,relative:i}=t;yx()||Gr(!1);let{future:o,static:l}=E.useContext(vx),{matches:f}=E.useContext(Fp),{pathname:s}=TF(),p=G6e(),v=SF(e,wF(f,o.v7_relativeSplatPath),s,i==="path"),x=JSON.stringify(v);return E.useEffect(()=>p(JSON.parse(x),{replace:n,state:r,relative:i}),[p,x,i,n,r]),null}function iUe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Do.Pop,navigator:o,static:l=!1,future:f}=t;yx()&&Gr(!1);let s=e.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:s,navigator:o,static:l,future:Lb({v7_relativeSplatPath:!1},f)}),[s,f,o,l]);typeof r=="string"&&(r=_d(r));let{pathname:v="/",search:x="",hash:S="",state:M=null,key:P="default"}=r,R=E.useMemo(()=>{let D=gx(v,s);return D==null?null:{location:{pathname:D,search:x,hash:S,state:M,key:P},navigationType:i}},[s,v,x,S,M,P,i]);return R==null?null:E.createElement(vx.Provider,{value:p},E.createElement(iA.Provider,{children:n,value:R}))}new Promise(()=>{});function oUe(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:E.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:E.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:E.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EC(){return EC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EC.apply(this,arguments)}const sUe="6";try{window.__reactRouterVersion=sUe}catch{}function aUe(t,e){return R6e({basename:e==null?void 0:e.basename,future:EC({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:e6e({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||lUe(),routes:t,mapRouteProperties:oUe,window:e==null?void 0:e.window}).initialize()}function lUe(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=EC({},e,{errors:cUe(e.errors)})),e}function cUe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new EF(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const uUe=E.createContext({isTransitioning:!1}),dUe=E.createContext(new Map),fUe="startTransition",X8=Db[fUe],hUe="flushSync",q8=uH[hUe];function pUe(t){X8?X8(t):t()}function z0(t){q8?q8(t):t()}class mUe{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function gUe(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=E.useState(n.state),[l,f]=E.useState(),[s,p]=E.useState({isTransitioning:!1}),[v,x]=E.useState(),[S,M]=E.useState(),[P,R]=E.useState(),D=E.useRef(new Map),{v7_startTransition:B}=r||{},O=E.useCallback(X=>{B?pUe(X):X()},[B]),k=E.useCallback((X,J)=>{let{deletedFetchers:K,unstable_flushSync:Q,unstable_viewTransitionOpts:ce}=J;K.forEach(ae=>D.current.delete(ae)),X.fetchers.forEach((ae,ve)=>{ae.data!==void 0&&D.current.set(ve,ae.data)});let ge=n.window==null||typeof n.window.document.startViewTransition!="function";if(!ce||ge){Q?z0(()=>o(X)):O(()=>o(X));return}if(Q){z0(()=>{S&&(v&&v.resolve(),S.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})});let ae=n.window.document.startViewTransition(()=>{z0(()=>o(X))});ae.finished.finally(()=>{z0(()=>{x(void 0),M(void 0),f(void 0),p({isTransitioning:!1})})}),z0(()=>M(ae));return}S?(v&&v.resolve(),S.skipTransition(),R({state:X,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation})):(f(X),p({isTransitioning:!0,flushSync:!1,currentLocation:ce.currentLocation,nextLocation:ce.nextLocation}))},[n.window,S,v,D,O]);E.useLayoutEffect(()=>n.subscribe(k),[n,k]),E.useEffect(()=>{s.isTransitioning&&!s.flushSync&&x(new mUe)},[s]),E.useEffect(()=>{if(v&&l&&n.window){let X=l,J=v.promise,K=n.window.document.startViewTransition(async()=>{O(()=>o(X)),await J});K.finished.finally(()=>{x(void 0),M(void 0),f(void 0),p({isTransitioning:!1})}),M(K)}},[O,l,v,n.window]),E.useEffect(()=>{v&&l&&i.location.key===l.location.key&&v.resolve()},[v,S,i.location,l]),E.useEffect(()=>{!s.isTransitioning&&P&&(f(P.state),p({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),R(void 0))},[s.isTransitioning,P]),E.useEffect(()=>{},[]);let $=E.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:X=>n.navigate(X),push:(X,J,K)=>n.navigate(X,{state:J,preventScrollReset:K==null?void 0:K.preventScrollReset}),replace:(X,J,K)=>n.navigate(X,{replace:!0,state:J,preventScrollReset:K==null?void 0:K.preventScrollReset})}),[n]),H=n.basename||"/",U=E.useMemo(()=>({router:n,navigator:$,static:!1,basename:H}),[n,$,H]);return E.createElement(E.Fragment,null,E.createElement(rA.Provider,{value:U},E.createElement(wQ.Provider,{value:i},E.createElement(dUe.Provider,{value:D.current},E.createElement(uUe.Provider,{value:s},E.createElement(iUe,{basename:H,location:i.location,navigationType:i.historyAction,navigator:$,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?E.createElement(vUe,{routes:n.routes,future:n.future,state:i}):e))))),null)}function vUe(t){let{routes:e,future:n,state:r}=t;return W6e(e,void 0,r,n)}var Y8;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Y8||(Y8={}));var Z8;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Z8||(Z8={}));var oA={},AQ={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(AQ);var sA=AQ.exports,aA={};Object.defineProperty(aA,"__esModule",{value:!0});aA.default=void 0;var yUe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};aA.default=yUe;var lA={},_x={},cA={},MQ={exports:{}},PQ={exports:{}},IQ={exports:{}},RQ={exports:{}};(function(t){function e(n){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(RQ);var OQ=RQ.exports,LQ={exports:{}};(function(t){var e=OQ.default;function n(r,i){if(e(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var l=o.call(r,i||"default");if(e(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(LQ);var _Ue=LQ.exports;(function(t){var e=OQ.default,n=_Ue;function r(i){var o=n(i,"string");return e(o)=="symbol"?o:o+""}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(IQ);var bUe=IQ.exports;(function(t){var e=bUe;function n(r,i,o){return(i=e(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(PQ);var xUe=PQ.exports;(function(t){var e=xUe;function n(i,o){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);o&&(f=f.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),l.push.apply(l,f)}return l}function r(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?n(Object(l),!0).forEach(function(f){e(i,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(f){Object.defineProperty(i,f,Object.getOwnPropertyDescriptor(l,f))})}return i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(MQ);var wUe=MQ.exports,uA={};Object.defineProperty(uA,"__esModule",{value:!0});uA.commonLocale=void 0;uA.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var SUe=sA.default;Object.defineProperty(cA,"__esModule",{value:!0});cA.default=void 0;var K8=SUe(wUe),EUe=uA,CUe=(0,K8.default)((0,K8.default)({},EUe.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});cA.default=CUe;var bx={};Object.defineProperty(bx,"__esModule",{value:!0});bx.default=void 0;const TUe={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};bx.default=TUe;var BQ=sA.default;Object.defineProperty(_x,"__esModule",{value:!0});_x.default=void 0;var AUe=BQ(cA),MUe=BQ(bx);const DQ={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},AUe.default),timePickerLocale:Object.assign({},MUe.default)};DQ.lang.ok="确定";_x.default=DQ;var PUe=sA.default;Object.defineProperty(lA,"__esModule",{value:!0});lA.default=void 0;var IUe=PUe(_x);lA.default=IUe.default;var dA=sA.default;Object.defineProperty(oA,"__esModule",{value:!0});oA.default=void 0;var RUe=dA(aA),OUe=dA(lA),LUe=dA(_x),BUe=dA(bx);const La="${label}不是一个有效的${type}",DUe={locale:"zh-cn",Pagination:RUe.default,DatePicker:LUe.default,TimePicker:BUe.default,Calendar:OUe.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:La,method:La,array:La,object:La,number:La,date:La,boolean:La,integer:La,float:La,regexp:La,email:La,url:La,hex:La},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};oA.default=DUe;var kUe=oA;const FUe=Ep(kUe),zUe=aUe([{path:"/",element:an.jsx(I8,{})},{path:"*",element:an.jsx(W8,{to:"/"})},{path:"/moss-webui-frontend/",element:an.jsx(I8,{})},{path:"/moss-webui-frontend/*",element:an.jsx(W8,{to:"/moss-webui-frontend/"})}]);bR.createRoot(document.getElementById("root")).render(an.jsx(Cv,{locale:FUe,children:an.jsx(gUe,{router:zUe})}))});export default NUe();
